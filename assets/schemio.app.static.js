/*! For license information please see schemio.app.static.js.LICENSE.txt */
(()=>{var e={7010:function(e){"undefined"!=typeof self&&self,e.exports=function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=8)}([function(e,t){function n(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var r=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(i);return[n].concat(i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}))).concat([r]).join("\n")}return""+n}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=n(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;this.length>r;r++){var s=this[r][0];"number"==typeof s&&(i[s]=!0)}for(r=0;e.length>r;r++){var o=e[r];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t){e.exports="data:application/vnd.ms-fontobject;base64,aAUAAMQEAAABAAIAAAAAAAAAAAAAAAAAAAABAJABAAAAAExQAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAUdPJHwAAAAAAAAAAAAAAAAAAAAAAAA4AaQBjAG8AbQBvAG8AbgAAAA4AUgBlAGcAdQBsAGEAcgAAABYAVgBlAHIAcwBpAG8AbgAgADEALgAwAAAADgBpAGMAbwBtAG8AbwBuAAAAAAAAAQAAAAsAgAADADBPUy8yDxIFrAAAALwAAABgY21hcBdW0okAAAEcAAAAVGdhc3AAAAAQAAABcAAAAAhnbHlmpZ+jMAAAAXgAAAD8aGVhZA/FmAgAAAJ0AAAANmhoZWEHgAPIAAACrAAAACRobXR4EgABvgAAAtAAAAAcbG9jYQCSAOIAAALsAAAAEG1heHAACQAfAAAC/AAAACBuYW1lmUoJ+wAAAxwAAAGGcG9zdAADAAAAAASkAAAAIAADA4ABkAAFAAACmQLMAAAAjwKZAswAAAHrADMBCQAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAAAAAAAEAAAOkCA8D/wABAA8AAQAAAAAEAAAAAAAAAAAAAACAAAAAAAAMAAAADAAAAHAABAAMAAAAcAAMAAQAAABwABAA4AAAACgAIAAIAAgABACDpAv/9//8AAAAAACDpAP/9//8AAf/jFwQAAwABAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAVgEBA74CgQAcAAABMhceARcWFwcmJy4BJyYjIgYHFyERFzY3PgE3NgIWSkNDbykpF2QQIB9VMzQ5P3AtnP6AmB0iIkspKAJVFxhSODlCIDMrKz4REislmgGAmhkVFBwICAABANYAgQMqAtUACwAAAQcXBycHJzcnNxc3Ayru7jzu7jzu7jzu7gKZ7u487u487u487u4AAQCSAIEDgAK9AAUAACUBFwEnNwGAAcQ8/gDuPPkBxDz+AO48AAAAAAEAAAAAAAAfydNRXw889QALBAAAAAAA1nUqGwAAAADWdSobAAAAAAO+AtUAAAAIAAIAAAAAAAAAAQAAA8D/wAAABAAAAAAAA74AAQAAAAAAAAAAAAAAAAAAAAcEAAAAAAAAAAAAAAACAAAABAAAVgQAANYEAACSAAAAAAAKABQAHgBQAGoAfgABAAAABwAdAAEAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEABwAAAAEAAAAAAAIABwBgAAEAAAAAAAMABwA2AAEAAAAAAAQABwB1AAEAAAAAAAUACwAVAAEAAAAAAAYABwBLAAEAAAAAAAoAGgCKAAMAAQQJAAEADgAHAAMAAQQJAAIADgBnAAMAAQQJAAMADgA9AAMAAQQJAAQADgB8AAMAAQQJAAUAFgAgAAMAAQQJAAYADgBSAAMAAQQJAAoANACkaWNvbW9vbgBpAGMAbwBtAG8AbwBuVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwaWNvbW9vbgBpAGMAbwBtAG8AbwBuaWNvbW9vbgBpAGMAbwBtAG8AbwBuUmVndWxhcgBSAGUAZwB1AGwAYQByaWNvbW9vbgBpAGMAbwBtAG8AbwBuRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="},function(e,t,n){function i(e){for(var t=0;e.length>t;t++){var n=e[t],i=h[n.id];if(i){i.refs++;for(var r=0;i.parts.length>r;r++)i.parts[r](n.parts[r]);for(;n.parts.length>r;r++)i.parts.push(s(n.parts[r]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var o=[];for(r=0;n.parts.length>r;r++)o.push(s(n.parts[r]));h[n.id]={id:n.id,refs:1,parts:o}}}}function r(){var e=document.createElement("style");return e.type="text/css",d.appendChild(e),e}function s(e){var t,n,i=document.querySelector("style["+v+'~="'+e.id+'"]');if(i){if(m)return f;i.parentNode.removeChild(i)}if(y){var s=p++;i=u||(u=r()),t=o.bind(null,i,s,!1),n=o.bind(null,i,s,!0)}else i=r(),t=a.bind(null,i),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;t(e=i)}else n()}}function o(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=x(t,r);else{var s=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function a(e,t){var n=t.css,i=t.media,r=t.sourceMap;if(i&&e.setAttribute("media",i),g.ssrId&&e.setAttribute(v,t.id),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=n(15),h={},d=l&&(document.head||document.getElementsByTagName("head")[0]),u=null,p=0,m=!1,f=function(){},g=null,v="data-vue-ssr-id",y="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,n,r){m=n,g=r||{};var s=c(e,t);return i(s),function(t){for(var n=[],r=0;s.length>r;r++){var o=s[r];(a=h[o.id]).refs--,n.push(a)}for(t?i(s=c(e,t)):s=[],r=0;n.length>r;r++){var a;if(0===(a=n[r]).refs){for(var l=0;a.parts.length>l;l++)a.parts[l]();delete h[a.id]}}}};var x=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e,t,n,i,r,s){var o,a=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(o=e,a=e.default);var c,h="function"==typeof a?a.options:a;if(t&&(h.render=t.render,h.staticRenderFns=t.staticRenderFns,h._compiled=!0),n&&(h.functional=!0),r&&(h._scopeId=r),s?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},h._ssrRegister=c):i&&(c=i),c){var d=h.functional,u=d?h.render:h.beforeCreate;d?(h._injectStyles=c,h.render=function(e,t){return c.call(t),u(e,t)}):h.beforeCreate=u?[].concat(u,c):[c]}return{esModule:o,exports:a,options:h}}},function(e,t,n){"use strict";var i=n(16),r=n.n(i),s=n(5),o=n(6),a=n(20),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.a={name:"VueTagsInput",components:{TagInput:o.a},props:a.a,data:function(){return{newTag:null,tagsCopy:null,tagsEditStatus:null,deletionMark:null,deletionMarkTime:null,selectedItem:null,focused:null}},computed:{autocompleteOpen:function(){return!!this.autocompleteAlwaysOpen||null!==this.newTag&&this.newTag.length>=this.autocompleteMinLength&&this.filteredAutocompleteItems.length>0&&this.focused},filteredAutocompleteItems:function(){var e=this,t=this.autocompleteItems.map((function(t){return Object(s.c)(t,e.tags,e.validation,e.isDuplicate)}));return this.autocompleteFilterDuplicates?t.filter(this.duplicateFilter):t}},methods:{createClasses:s.b,getSelectedIndex:function(e){var t=this.filteredAutocompleteItems,n=this.selectedItem,i=t.length-1;if(0!==t.length)return null===n?0:"before"===e&&0===n?i:"after"===e&&n===i?0:"after"===e?n+1:n-1},selectDefaultItem:function(){this.selectedItem=this.addOnlyFromAutocomplete&&this.filteredAutocompleteItems.length>0?0:null},selectItem:function(e,t){e.preventDefault(),this.selectedItem=this.getSelectedIndex(t)},isSelected:function(e){return this.selectedItem===e},isMarked:function(e){return this.deletionMark===e},invokeDelete:function(){var e=this;if(this.deleteOnBackslash&&0>=this.newTag.length){var t=this.tagsCopy.length-1;null===this.deletionMark?(this.deletionMarkTime=setTimeout((function(){return e.deletionMark=null}),1e3),this.deletionMark=t):this.performDeleteTag(t)}},addTagsFromPaste:function(){var e=this;this.addFromPaste&&setTimeout((function(){return e.performAddTags(e.newTag)}),10)},performEditTag:function(e){var t=this;this.allowEditTags&&(this._events["before-editing-tag"]||this.editTag(e),this.$emit("before-editing-tag",{index:e,tag:this.tagsCopy[e],editTag:function(){return t.editTag(e)}}))},editTag:function(e){this.allowEditTags&&(this.toggleEditMode(e),this.focus(e))},toggleEditMode:function(e){this.allowEditTags&&!this.disabled&&this.$set(this.tagsEditStatus,e,!this.tagsEditStatus[e])},createChangedTag:function(e,t){var n=this.tagsCopy[e];n.text=t?t.target.value:this.tagsCopy[e].text,this.$set(this.tagsCopy,e,Object(s.c)(n,this.tagsCopy,this.validation,this.isDuplicate))},focus:function(e){var t=this;this.$nextTick((function(){var n=t.$refs.tagCenter[e].querySelector("input.tag-input");n&&n.focus()}))},quote:function(e){return e.replace(/([()[{*+.$^\\|?])/g,"\\$1")},cancelEdit:function(e){this.tags[e]&&(this.tagsCopy[e]=Object(s.a)(Object(s.c)(this.tags[e],this.tags,this.validation,this.isDuplicate)),this.$set(this.tagsEditStatus,e,!1))},hasForbiddingAddRule:function(e){var t=this;return e.some((function(e){var n=t.validation.find((function(t){return e===t.type}));return!!n&&n.disableAdd}))},createTagTexts:function(e){var t=this;return e.split(RegExp(this.separators.map((function(e){return t.quote(e)})).join("|"))).map((function(e){return{text:e}}))},performDeleteTag:function(e){var t=this;this._events["before-deleting-tag"]||this.deleteTag(e),this.$emit("before-deleting-tag",{index:e,tag:this.tagsCopy[e],deleteTag:function(){return t.deleteTag(e)}})},deleteTag:function(e){this.disabled||(this.deletionMark=null,clearTimeout(this.deletionMarkTime),this.tagsCopy.splice(e,1),this._events["update:tags"]&&this.$emit("update:tags",this.tagsCopy),this.$emit("tags-changed",this.tagsCopy))},noTriggerKey:function(e,t){var n=-1!==this[t].indexOf(e.keyCode)||-1!==this[t].indexOf(e.key);return n&&e.preventDefault(),!n},performAddTags:function(e,t,n){var i=this;if(!(this.disabled||t&&this.noTriggerKey(t,"addOnKey")||"string"==typeof e&&0===e.trim().length)){var r=[];"object"===(void 0===e?"undefined":l(e))&&(r=[e]),"string"==typeof e&&(r=this.createTagTexts(e)),r.forEach((function(e){e=Object(s.c)(e,i.tags,i.validation,i.isDuplicate),i._events["before-adding-tag"]||i.addTag(e,n),i.$emit("before-adding-tag",{tag:e,addTag:function(){return i.addTag(e,n)}})}))}},duplicateFilter:function(e){return this.isDuplicate?!this.isDuplicate(this.tagsCopy,e):!this.tagsCopy.find((function(t){return t.text===e.text}))},addTag:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"new-tag-input",i=this.filteredAutocompleteItems.map((function(e){return e.text}));this.addOnlyFromAutocomplete&&-1===i.indexOf(e.text)||this.$nextTick((function(){return t.maxTags&&t.tagsCopy.length>=t.maxTags?t.$emit("max-tags-reached",e):t.avoidAddingDuplicates&&!t.duplicateFilter(e)?t.$emit("adding-duplicate",e):void(!e.valid&&t.hasForbiddingAddRule(e.tiClasses)||(t.$emit("input",""),t.tagsCopy.push(e),t._events["update:tags"]&&t.$emit("update:tags",t.tagsCopy),"autocomplete"===n&&t.$refs.newTagInput.focus(),t.$emit("tags-changed",t.tagsCopy)))}))},performSaveTag:function(e,t){var n=this,i=this.tagsCopy[e];this.disabled||t&&this.noTriggerKey(t,"addOnKey")||0!==i.text.trim().length&&(this._events["before-saving-tag"]||this.saveTag(e,i),this.$emit("before-saving-tag",{index:e,tag:i,saveTag:function(){return n.saveTag(e,i)}}))},saveTag:function(e,t){if(this.avoidAddingDuplicates){var n=Object(s.a)(this.tagsCopy),i=n.splice(e,1)[0];if(this.isDuplicate?this.isDuplicate(n,i):-1!==n.map((function(e){return e.text})).indexOf(i.text))return this.$emit("saving-duplicate",t)}!t.valid&&this.hasForbiddingAddRule(t.tiClasses)||(this.$set(this.tagsCopy,e,t),this.toggleEditMode(e),this._events["update:tags"]&&this.$emit("update:tags",this.tagsCopy),this.$emit("tags-changed",this.tagsCopy))},tagsEqual:function(){var e=this;return!this.tagsCopy.some((function(t,n){return!r()(t,e.tags[n])}))},updateNewTag:function(e){var t=e.target.value;this.newTag=t,this.$emit("input",t)},initTags:function(){this.tagsCopy=Object(s.d)(this.tags,this.validation,this.isDuplicate),this.tagsEditStatus=Object(s.a)(this.tags).map((function(){return!1})),this._events["update:tags"]&&!this.tagsEqual()&&this.$emit("update:tags",this.tagsCopy)},blurred:function(e){this.$el.contains(e.target)||(this.addOnBlur&&this.focused&&this.performAddTags(this.newTag),this.focused=!1)}},watch:{value:function(e){this.addOnlyFromAutocomplete||(this.selectedItem=null),this.newTag=e},tags:{handler:function(){this.initTags()},deep:!0},autocompleteOpen:"selectDefaultItem"},created:function(){this.newTag=this.value,this.initTags()},mounted:function(){this.selectDefaultItem(),document.addEventListener("click",this.blurred)},destroyed:function(){document.removeEventListener("click",this.blurred)}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return r}));var i=function(e,t){return t.filter((function(t){return"string"==typeof t.rule?!RegExp(t.rule).test(e):t.rule instanceof RegExp?!t.rule.test(e):"[object Function]"==={}.toString.call(t.rule)?t.rule(e):void 0})).map((function(e){return e.type}))},r=function(e){return JSON.parse(JSON.stringify(e))},s=function(e,t){for(var n=0;e.length>n;){if(t(e[n],n,e))return n;n++}return-1},o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments[3];void 0===e.text&&(e={text:e});var a=i(e.text,n),l=s(t,(function(t){return t===e})),c=r(t),h=-1!==l?c.splice(l,1)[0]:r(e);return(o?o(c,h):-1!==c.map((function(e){return e.text})).indexOf(h.text))&&a.push("duplicate"),a.push(0===a.length?"valid":"invalid"),a},a=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];void 0===e.text&&(e={text:e});var s=r(e);return s.tiClasses=o.apply(void 0,[e].concat(n)),s},l=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];return e.map((function(t){return a.apply(void 0,[t,e].concat(n))}))}},function(e,t,n){"use strict";var i=n(7),r=n(19);t.a=n(3)(i.a,r.a,!1,(function(e){n(17)}),"data-v-5d05513b",null).exports},function(e,t,n){"use strict";t.a={name:"TagInput",props:["scope"]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),r=n(5),s=n(6);n.d(t,"VueTagsInput",(function(){return i.a})),n.d(t,"createClasses",(function(){return r.b})),n.d(t,"createTag",(function(){return r.c})),n.d(t,"createTags",(function(){return r.d})),n.d(t,"TagInput",(function(){return s.a})),i.a.install=function(e){return e.component(i.a.name,i.a)},"undefined"!=typeof window&&window.Vue&&window.Vue.use(i.a),t.default=i.a},function(e,t,n){"use strict";var i=n(4),r=n(21);t.a=n(3)(i.a,r.a,!1,(function(e){n(10)}),"data-v-523b8ea9",null).exports},function(e,t,n){var i=n(11);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),n(2)("3e3f1cb8",i,!0,{})},function(e,t,n){var i=n(12);(e.exports=n(0)(!1)).push([e.i,"@font-face{font-family:icomoon;src:url("+i(n(1))+");src:url("+i(n(1))+'#iefix) format("embedded-opentype"),url('+i(n(13))+') format("truetype"),url('+i(n(14))+') format("woff");font-weight:400;font-style:normal}[class*=" icon-"][data-v-523b8ea9],[class^=icon-][data-v-523b8ea9]{font-family:icomoon!important;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-check[data-v-523b8ea9]:before{content:"\\E902"}.icon-close[data-v-523b8ea9]:before{content:"\\E901"}.icon-undo[data-v-523b8ea9]:before{content:"\\E900"}ul[data-v-523b8ea9]{margin:0;padding:0;list-style-type:none}[data-v-523b8ea9],[data-v-523b8ea9]:after,[data-v-523b8ea9]:before{-webkit-box-sizing:border-box;box-sizing:border-box}input[data-v-523b8ea9]:focus{outline:none}input[disabled][data-v-523b8ea9]{background-color:transparent}.vue-tags-input[data-v-523b8ea9]{max-width:450px;position:relative;background-color:#fff}.vue-tags-input.vue-tags-input.disabled[data-v-523b8ea9]{opacity:.5}.vue-tags-input.vue-tags-input.disabled [data-v-523b8ea9]{cursor:default}.input[data-v-523b8ea9]{border:1px solid #ccc;padding:4px}.input[data-v-523b8ea9],.tags[data-v-523b8ea9]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.tags[data-v-523b8ea9]{width:100%}.tag[data-v-523b8ea9]{background-color:#5c6bc0;color:#fff;border-radius:2px;display:-webkit-box;display:-ms-flexbox;display:flex;padding:3px 5px;margin:2px;font-size:.85em}.tag[data-v-523b8ea9]:focus{outline:none}.tag .content[data-v-523b8ea9]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.tag .tag-center[data-v-523b8ea9]{position:relative}.tag span[data-v-523b8ea9]{line-height:inherit}.tag span.hidden[data-v-523b8ea9]{padding-left:14px;visibility:hidden;height:0;white-space:pre}.tag .actions[data-v-523b8ea9]{margin-left:2px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:1.15em}.tag .actions i[data-v-523b8ea9]{cursor:pointer}.tag[data-v-523b8ea9]:last-child{margin-right:4px}.tag.invalid[data-v-523b8ea9],.tag.tag.deletion-mark[data-v-523b8ea9]{background-color:#e54d42}.new-tag-input-wrapper[data-v-523b8ea9]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto;padding:3px 5px;margin:2px;font-size:.85em}.new-tag-input-wrapper input[data-v-523b8ea9]{-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto;min-width:100px;border:none;padding:0;margin:0}.new-tag-input[data-v-523b8ea9]{line-height:inherit}.autocomplete[data-v-523b8ea9]{border:1px solid #ccc;border-top:none;position:absolute;width:100%;background-color:#fff;z-index:20}.item>div[data-v-523b8ea9]{cursor:pointer;padding:3px 6px;width:100%}.selected-item[data-v-523b8ea9]{background-color:#5c6bc0;color:#fff}',""])},function(e,t){e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,t){e.exports="data:font/ttf;base64,AAEAAAALAIAAAwAwT1MvMg8SBawAAAC8AAAAYGNtYXAXVtKJAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZqWfozAAAAF4AAAA/GhlYWQPxZgIAAACdAAAADZoaGVhB4ADyAAAAqwAAAAkaG10eBIAAb4AAALQAAAAHGxvY2EAkgDiAAAC7AAAABBtYXhwAAkAHwAAAvwAAAAgbmFtZZlKCfsAAAMcAAABhnBvc3QAAwAAAAAEpAAAACAAAwOAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpAgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6QL//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAFYBAQO+AoEAHAAAATIXHgEXFhcHJicuAScmIyIGBxchERc2Nz4BNzYCFkpDQ28pKRdkECAfVTM0OT9wLZz+gJgdIiJLKSgCVRcYUjg5QiAzKys+ERIrJZoBgJoZFRQcCAgAAQDWAIEDKgLVAAsAAAEHFwcnByc3JzcXNwMq7u487u487u487u4Cme7uPO7uPO7uPO7uAAEAkgCBA4ACvQAFAAAlARcBJzcBgAHEPP4A7jz5AcQ8/gDuPAAAAAABAAAAAAAAH8nTUV8PPPUACwQAAAAAANZ1KhsAAAAA1nUqGwAAAAADvgLVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAO+AAEAAAAAAAAAAAAAAAAAAAAHBAAAAAAAAAAAAAAAAgAAAAQAAFYEAADWBAAAkgAAAAAACgAUAB4AUABqAH4AAQAAAAcAHQABAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGljb21vb24AaQBjAG8AbQBvAG8AblZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGljb21vb24AaQBjAG8AbQBvAG8Abmljb21vb24AaQBjAG8AbQBvAG8AblJlZ3VsYXIAUgBlAGcAdQBsAGEAcmljb21vb24AaQBjAG8AbQBvAG8AbkZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="},function(e,t){e.exports="data:font/woff;base64,d09GRgABAAAAAAUQAAsAAAAABMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgDxIFrGNtYXAAAAFoAAAAVAAAAFQXVtKJZ2FzcAAAAbwAAAAIAAAACAAAABBnbHlmAAABxAAAAPwAAAD8pZ+jMGhlYWQAAALAAAAANgAAADYPxZgIaGhlYQAAAvgAAAAkAAAAJAeAA8hobXR4AAADHAAAABwAAAAcEgABvmxvY2EAAAM4AAAAEAAAABAAkgDibWF4cAAAA0gAAAAgAAAAIAAJAB9uYW1lAAADaAAAAYYAAAGGmUoJ+3Bvc3QAAATwAAAAIAAAACAAAwAAAAMDgAGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA6QIDwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADgAAAAKAAgAAgACAAEAIOkC//3//wAAAAAAIOkA//3//wAB/+MXBAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQBWAQEDvgKBABwAAAEyFx4BFxYXByYnLgEnJiMiBgcXIREXNjc+ATc2AhZKQ0NvKSkXZBAgH1UzNDk/cC2c/oCYHSIiSykoAlUXGFI4OUIgMysrPhESKyWaAYCaGRUUHAgIAAEA1gCBAyoC1QALAAABBxcHJwcnNyc3FzcDKu7uPO7uPO7uPO7uApnu7jzu7jzu7jzu7gABAJIAgQOAAr0ABQAAJQEXASc3AYABxDz+AO48+QHEPP4A7jwAAAAAAQAAAAAAAB/J01FfDzz1AAsEAAAAAADWdSobAAAAANZ1KhsAAAAAA74C1QAAAAgAAgAAAAAAAAABAAADwP/AAAAEAAAAAAADvgABAAAAAAAAAAAAAAAAAAAABwQAAAAAAAAAAAAAAAIAAAAEAABWBAAA1gQAAJIAAAAAAAoAFAAeAFAAagB+AAEAAAAHAB0AAQAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAHAAAAAQAAAAAAAgAHAGAAAQAAAAAAAwAHADYAAQAAAAAABAAHAHUAAQAAAAAABQALABUAAQAAAAAABgAHAEsAAQAAAAAACgAaAIoAAwABBAkAAQAOAAcAAwABBAkAAgAOAGcAAwABBAkAAwAOAD0AAwABBAkABAAOAHwAAwABBAkABQAWACAAAwABBAkABgAOAFIAAwABBAkACgA0AKRpY29tb29uAGkAYwBvAG0AbwBvAG5WZXJzaW9uIDEuMABWAGUAcgBzAGkAbwBuACAAMQAuADBpY29tb29uAGkAYwBvAG0AbwBvAG5pY29tb29uAGkAYwBvAG0AbwBvAG5SZWd1bGFyAFIAZQBnAHUAbABhAHJpY29tb29uAGkAYwBvAG0AbwBvAG5Gb250IGdlbmVyYXRlZCBieSBJY29Nb29uLgBGAG8AbgB0ACAAZwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAC4AAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},function(e,t){e.exports=function(e,t){for(var n=[],i={},r=0;t.length>r;r++){var s=t[r],o=s[0],a={id:e+":"+r,css:s[1],media:s[2],sourceMap:s[3]};i[o]?i[o].parts.push(a):n.push(i[o]={id:o,parts:[a]})}return n}},function(e,t,n){"use strict";var i=Array.isArray,r=Object.keys,s=Object.prototype.hasOwnProperty;e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var o,a,l,c=i(t),h=i(n);if(c&&h){if((a=t.length)!=n.length)return!1;for(o=a;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(c!=h)return!1;var d=t instanceof Date,u=n instanceof Date;if(d!=u)return!1;if(d&&u)return t.getTime()==n.getTime();var p=t instanceof RegExp,m=n instanceof RegExp;if(p!=m)return!1;if(p&&m)return""+t==""+n;var f=r(t);if((a=f.length)!==r(n).length)return!1;for(o=a;0!=o--;)if(!s.call(n,f[o]))return!1;for(o=a;0!=o--;)if(!e(t[l=f[o]],n[l]))return!1;return!0}return t!=t&&n!=n}},function(e,t,n){var i=n(18);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),n(2)("85656b4e",i,!0,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,".tag-input[data-v-5d05513b]{background-color:transparent;color:inherit;border:none;padding:0;margin:0;display:-webkit-box;display:-ms-flexbox;display:flex;top:0;position:absolute;width:100%;line-height:inherit}.tag-input[data-v-5d05513b]::-ms-clear{display:none}input[data-v-5d05513b]:focus{outline:none}input[disabled][data-v-5d05513b]{background-color:transparent}",""])},function(e,t,n){"use strict";t.a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.scope.edit?n("input",{directives:[{name:"model",rawName:"v-model",value:e.scope.tag.text,expression:"scope.tag.text"}],staticClass:"tag-input",attrs:{type:"text",maxlength:e.scope.maxlength,size:"1"},domProps:{value:e.scope.tag.text},on:{input:[function(t){t.target.composing||e.$set(e.scope.tag,"text",t.target.value)},function(t){e.scope.validateTag(e.scope.index,t)}],blur:function(t){e.scope.cancelEdit(e.scope.index)},keydown:function(t){e.scope.performSaveTag(e.scope.index,t)}}}):e._e()},staticRenderFns:[]}},function(e,t,n){"use strict";var i=function(e){return!e.some((function(e){var t=!e.text;t&&console.warn('Missing property "text"',e);var n=!1;return e.classes&&(n="string"!=typeof e.classes),n&&console.warn('Property "classes" must be type of string',e),t||n}))},r=function(e){return!e.some((function(e){if("number"==typeof e){var t=isFinite(e)&&Math.floor(e)===e;return t||console.warn("Only numerics are allowed for this prop. Found:",e),!t}if("string"==typeof e){var n=/\W|[a-z]|!\d/i.test(e);return n||console.warn("Only alpha strings are allowed for this prop. Found:",e),!n}return console.warn("Only numeric and string values are allowed. Found:",e),!1}))};t.a={value:{type:String,default:"",required:!0},tags:{type:Array,default:function(){return[]},validator:i},autocompleteItems:{type:Array,default:function(){return[]},validator:i},allowEditTags:{type:Boolean,default:!1},autocompleteFilterDuplicates:{default:!0,type:Boolean},addOnlyFromAutocomplete:{type:Boolean,default:!1},autocompleteMinLength:{type:Number,default:1},autocompleteAlwaysOpen:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"Add Tag"},addOnKey:{type:Array,default:function(){return[13]},validator:r},saveOnKey:{type:Array,default:function(){return[13]},validator:r},maxTags:{type:Number},maxlength:{type:Number},validation:{type:Array,default:function(){return[]},validator:function(e){return!e.some((function(e){var t=!e.rule;t&&console.warn('Property "rule" is missing',e);var n=e.rule&&("string"==typeof e.rule||e.rule instanceof RegExp||"[object Function]"==={}.toString.call(e.rule));n||console.warn("A rule must be type of string, RegExp or function. Found:",JSON.stringify(e.rule));var i=!e.type;i&&console.warn('Property "type" is missing',e);var r=e.type&&"string"!=typeof e.type;return r&&console.warn('Property "type" must be type of string. Found:',e),!n||t||i||r}))}},separators:{type:Array,default:function(){return[";"]},validator:function(e){return!e.some((function(e){var t="string"!=typeof e;return t&&console.warn("Separators must be type of string. Found:",e),t}))}},avoidAddingDuplicates:{type:Boolean,default:!0},addOnBlur:{type:Boolean,default:!0},isDuplicate:{type:Function,default:null},addFromPaste:{type:Boolean,default:!0},deleteOnBackslash:{default:!0,type:Boolean}}},function(e,t,n){"use strict";t.a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vue-tags-input",class:[{disabled:e.disabled},{"ti-focus":e.focused}]},[n("div",{staticClass:"input"},[e.tagsCopy?n("ul",{staticClass:"tags"},[e._l(e.tagsCopy,(function(t,i){return n("li",{key:i,staticClass:"tag",class:[{editing:e.tagsEditStatus[i]},t.tiClasses,t.classes,{"deletion-mark":e.isMarked(i)}],style:t.style,attrs:{tabindex:i+1},on:{click:function(n){e.$emit("tag-clicked",{tag:t,index:i})}}},[n("div",{staticClass:"content"},[e.$scopedSlots.tagLeft?n("div",{staticClass:"tag-left"},[e._t("tagLeft",null,{tag:t,index:i,edit:e.tagsEditStatus[i],performSaveEdit:e.performSaveTag,performDelete:e.performDeleteTag,performCancelEdit:e.cancelEdit,performOpenEdit:e.performEditTag,deletionMark:e.isMarked(i)})],2):e._e(),e._v(" "),n("div",{ref:"tagCenter",refInFor:!0,staticClass:"tag-center"},[e.$scopedSlots.tagCenter?e._e():n("span",{class:{hidden:e.tagsEditStatus[i]},on:{click:function(t){e.performEditTag(i)}}},[e._v(e._s(t.text))]),e._v(" "),e.$scopedSlots.tagCenter?e._e():n("tag-input",{attrs:{scope:{edit:e.tagsEditStatus[i],maxlength:e.maxlength,tag:t,index:i,validateTag:e.createChangedTag,cancelEdit:e.cancelEdit,performSaveTag:e.performSaveTag}}}),e._v(" "),e._t("tagCenter",null,{tag:t,index:i,maxlength:e.maxlength,edit:e.tagsEditStatus[i],performSaveEdit:e.performSaveTag,performDelete:e.performDeleteTag,performCancelEdit:e.cancelEdit,validateTag:e.createChangedTag,performSaveTag:e.performSaveTag,performOpenEdit:e.performEditTag,deletionMark:e.isMarked(i)})],2),e._v(" "),e.$scopedSlots.tagRight?n("div",{staticClass:"tag-right"},[e._t("tagRight",null,{tag:t,index:i,edit:e.tagsEditStatus[i],performSaveEdit:e.performSaveTag,performDelete:e.performDeleteTag,performCancelEdit:e.cancelEdit,performOpenEdit:e.performEditTag,deletionMark:e.isMarked(i)})],2):e._e()]),e._v(" "),n("div",{staticClass:"actions"},[e.$scopedSlots.tagActions?e._e():n("i",{directives:[{name:"show",rawName:"v-show",value:e.tagsEditStatus[i],expression:"tagsEditStatus[index]"}],staticClass:"icon-undo",on:{click:function(t){e.cancelEdit(i)}}}),e._v(" "),e.$scopedSlots.tagActions?e._e():n("i",{directives:[{name:"show",rawName:"v-show",value:!e.tagsEditStatus[i],expression:"!tagsEditStatus[index]"}],staticClass:"icon-close",on:{click:function(t){e.performDeleteTag(i)}}}),e._v(" "),e.$scopedSlots.tagActions?e._t("tagActions",null,{tag:t,index:i,edit:e.tagsEditStatus[i],performSaveEdit:e.performSaveTag,performDelete:e.performDeleteTag,performCancelEdit:e.cancelEdit,performOpenEdit:e.performEditTag,deletionMark:e.isMarked(i)}):e._e()],2)])})),e._v(" "),n("li",{staticClass:"new-tag-input-wrapper"},[n("input",e._b({ref:"newTagInput",staticClass:"new-tag-input",class:[e.createClasses(e.newTag,e.tags,e.validation,e.isDuplicate)],attrs:{type:"text",size:"1",placeholder:e.placeholder,maxlength:e.maxlength,disabled:e.disabled},domProps:{value:e.newTag},on:{paste:e.addTagsFromPaste,keydown:[function(t){e.performAddTags(e.filteredAutocompleteItems[e.selectedItem]||e.newTag,t)},function(t){return"button"in t||8===t.keyCode?e.invokeDelete(t):null},function(t){if(!("button"in t)&&38!==t.keyCode)return null;e.selectItem(t,"before")},function(t){if(!("button"in t)&&40!==t.keyCode)return null;e.selectItem(t,"after")}],input:e.updateNewTag,blur:function(t){e.$emit("blur",t)},focus:function(t){e.focused=!0,e.$emit("focus",t)},click:function(t){!e.addOnlyFromAutocomplete&&(e.selectedItem=null)}}},"input",e.$attrs,!1))])],2):e._e()]),e._v(" "),e._t("between-elements"),e._v(" "),e.autocompleteOpen?n("div",{staticClass:"autocomplete",on:{mouseout:function(t){e.selectedItem=null}}},[e._t("autocompleteHeader"),e._v(" "),n("ul",e._l(e.filteredAutocompleteItems,(function(t,i){return n("li",{key:i,staticClass:"item",class:[t.tiClasses,t.classes,{"selected-item":e.isSelected(i)}],style:t.style,on:{mouseover:function(t){!e.disabled&&(e.selectedItem=i)}}},[e.$scopedSlots.autocompleteItem?e._t("autocompleteItem",null,{item:t,index:i,performAdd:function(t){return e.performAddTags(t,void 0,"autocomplete")},selected:e.isSelected(i)}):n("div",{on:{click:function(n){e.performAddTags(t,void 0,"autocomplete")}}},[e._v(e._s(t.text)+"\n        ")])],2)}))),e._v(" "),e._t("autocompleteFooter")],2):e._e()],2)},staticRenderFns:[]}}])},9669:(e,t,n)=>{e.exports=n(1609)},5448:(e,t,n)=>{"use strict";var i=n(4867),r=n(6026),s=n(4372),o=n(5327),a=n(4097),l=n(4109),c=n(7985),h=n(5061),d=n(5655),u=n(5263);e.exports=function(e){return new Promise((function(t,n){var p,m=e.data,f=e.headers,g=e.responseType;function v(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}i.isFormData(m)&&delete f["Content-Type"];var y=new XMLHttpRequest;if(e.auth){var x=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";f.Authorization="Basic "+btoa(x+":"+b)}var w=a(e.baseURL,e.url);function C(){if(y){var i="getAllResponseHeaders"in y?l(y.getAllResponseHeaders()):null,s={data:g&&"text"!==g&&"json"!==g?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:i,config:e,request:y};r((function(e){t(e),v()}),(function(e){n(e),v()}),s),y=null}}if(y.open(e.method.toUpperCase(),o(w,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,"onloadend"in y?y.onloadend=C:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(C)},y.onabort=function(){y&&(n(h("Request aborted",e,"ECONNABORTED",y)),y=null)},y.onerror=function(){n(h("Network Error",e,null,y)),y=null},y.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded",i=e.transitional||d.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(h(t,e,i.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",y)),y=null},i.isStandardBrowserEnv()){var _=(e.withCredentials||c(w))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;_&&(f[e.xsrfHeaderName]=_)}"setRequestHeader"in y&&i.forEach(f,(function(e,t){void 0===m&&"content-type"===t.toLowerCase()?delete f[t]:y.setRequestHeader(t,e)})),i.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),g&&"json"!==g&&(y.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&y.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){y&&(n(!e||e&&e.type?new u("canceled"):e),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),m||(m=null),y.send(m)}))}},1609:(e,t,n)=>{"use strict";var i=n(4867),r=n(1849),s=n(321),o=n(7185),a=function e(t){var n=new s(t),a=r(s.prototype.request,n);return i.extend(a,s.prototype,n),i.extend(a,n),a.create=function(n){return e(o(t,n))},a}(n(5655));a.Axios=s,a.Cancel=n(5263),a.CancelToken=n(4972),a.isCancel=n(6502),a.VERSION=n(7288).version,a.all=function(e){return Promise.all(e)},a.spread=n(8713),a.isAxiosError=n(6268),e.exports=a,e.exports.default=a},5263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},4972:(e,t,n)=>{"use strict";var i=n(5263);function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,i=n._listeners.length;for(t=0;t<i;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,i=new Promise((function(e){n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e){n.reason||(n.reason=new i(e),t(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},r.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},r.source=function(){var e;return{token:new r((function(t){e=t})),cancel:e}},e.exports=r},6502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,n)=>{"use strict";var i=n(4867),r=n(5327),s=n(782),o=n(3572),a=n(7185),l=n(4875),c=l.validators;function h(e){this.defaults=e,this.interceptors={request:new s,response:new s}}h.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&l.assertOptions(t,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(i=i&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var r,s=[];if(this.interceptors.response.forEach((function(e){s.push(e.fulfilled,e.rejected)})),!i){var h=[o,void 0];for(Array.prototype.unshift.apply(h,n),h=h.concat(s),r=Promise.resolve(e);h.length;)r=r.then(h.shift(),h.shift());return r}for(var d=e;n.length;){var u=n.shift(),p=n.shift();try{d=u(d)}catch(e){p(e);break}}try{r=o(d)}catch(e){return Promise.reject(e)}for(;s.length;)r=r.then(s.shift(),s.shift());return r},h.prototype.getUri=function(e){return e=a(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(e){h.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),i.forEach(["post","put","patch"],(function(e){h.prototype[e]=function(t,n,i){return this.request(a(i||{},{method:e,url:t,data:n}))}})),e.exports=h},782:(e,t,n)=>{"use strict";var i=n(4867);function r(){this.handlers=[]}r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},4097:(e,t,n)=>{"use strict";var i=n(1793),r=n(7303);e.exports=function(e,t){return e&&!i(t)?r(e,t):t}},5061:(e,t,n)=>{"use strict";var i=n(481);e.exports=function(e,t,n,r,s){var o=new Error(e);return i(o,t,n,r,s)}},3572:(e,t,n)=>{"use strict";var i=n(4867),r=n(8527),s=n(6502),o=n(5655),a=n(5263);function l(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a("canceled")}e.exports=function(e){return l(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return l(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(l(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},481:e=>{"use strict";e.exports=function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},7185:(e,t,n)=>{"use strict";var i=n(4867);e.exports=function(e,t){t=t||{};var n={};function r(e,t){return i.isPlainObject(e)&&i.isPlainObject(t)?i.merge(e,t):i.isPlainObject(t)?i.merge({},t):i.isArray(t)?t.slice():t}function s(n){return i.isUndefined(t[n])?i.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function o(e){if(!i.isUndefined(t[e]))return r(void 0,t[e])}function a(n){return i.isUndefined(t[n])?i.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function l(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return i.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||s,r=t(e);i.isUndefined(r)&&t!==l||(n[e]=r)})),n}},6026:(e,t,n)=>{"use strict";var i=n(5061);e.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(i("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},8527:(e,t,n)=>{"use strict";var i=n(4867),r=n(5655);e.exports=function(e,t,n){var s=this||r;return i.forEach(n,(function(n){e=n.call(s,e,t)})),e}},5655:(e,t,n)=>{"use strict";var i=n(4867),r=n(6016),s=n(481),o={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(l=n(5448)),l),transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)||t&&"application/json"===t["Content-Type"]?(a(t,"application/json"),function(e,t,n){if(i.isString(e))try{return(0,JSON.parse)(e),i.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||c.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||r&&i.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw s(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){c.headers[e]=i.merge(o)})),e.exports=c},7288:e=>{e.exports={version:"0.22.0"}},1849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},5327:(e,t,n)=>{"use strict";var i=n(4867);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(i.isURLSearchParams(t))s=t.toString();else{var o=[];i.forEach(t,(function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push(r(t)+"="+r(e))})))})),s=o.join("&")}if(s){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,n)=>{"use strict";var i=n(4867);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,n,r,s,o){var a=[];a.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),i.isString(r)&&a.push("path="+r),i.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},6268:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},7985:(e,t,n)=>{"use strict";var i=n(4867);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=i.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},6016:(e,t,n)=>{"use strict";var i=n(4867);e.exports=function(e,t){i.forEach(e,(function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])}))}},4109:(e,t,n)=>{"use strict";var i=n(4867),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,o={};return e?(i.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=i.trim(e.substr(0,s)).toLowerCase(),n=i.trim(e.substr(s+1)),t){if(o[t]&&r.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},4875:(e,t,n)=>{"use strict";var i=n(7288).version,r={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){r[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var s={};r.transitional=function(e,t,n){function r(e,t){return"[Axios v"+i+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,o){if(!1===e)throw new Error(r(i," has been removed"+(t?" in "+t:"")));return t&&!s[i]&&(s[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var i=Object.keys(e),r=i.length;r-- >0;){var s=i[r],o=t[s];if(o){var a=e[s],l=void 0===a||o(a,s,e);if(!0!==l)throw new TypeError("option "+s+" must be "+l)}else if(!0!==n)throw Error("Unknown option "+s)}},validators:r}},4867:(e,t,n)=>{"use strict";var i=n(1849),r=Object.prototype.toString;function s(e){return"[object Array]"===r.call(e)}function o(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==r.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===r.call(e)}function h(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),s(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isPlainObject:l,isUndefined:o,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:c,isStream:function(e){return a(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:h,merge:function e(){var t={};function n(n,i){l(t[i])&&l(n)?t[i]=e(t[i],n):l(n)?t[i]=e({},n):s(n)?t[i]=n.slice():t[i]=n}for(var i=0,r=arguments.length;i<r;i++)h(arguments[i],n);return t},extend:function(e,t,n){return h(t,(function(t,r){e[r]=n&&"function"==typeof t?i(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},2643:(e,t,n)=>{"use strict";n.d(t,{o:()=>r,I:()=>s});var i=n(4691);function r(e,t){if(!e)return null;const n={};let i=!0;for(let s in e)if(e.hasOwnProperty(s)){let o,a=!0;if(t.hasOwnProperty("*")?o=t["*"]:t.hasOwnProperty(s)&&(o=t[s]),void 0!==o&&typeof e[s]==typeof o)if(Array.isArray(e[s]))if(n[s]=[],Array.isArray(o)&&1===o.length){e[s].length>0&&(i=!1);for(let t=0;t<e[s].length;t++){const i=r(e[s][t],o[0]);n[s][t]=void 0!==i?i:{}}a=!1}else a=!0;else if("object"==typeof e[s]){const t=r(e[s],o);void 0!==t?(n[s]=t,a=!1,i=!1):a=!1}else e[s]===o&&(a=!1);a&&(n[s]=e[s],i=!1)}return i?void 0:n}function s(e,t){for(let n in t)if(t.hasOwnProperty(n))if("*"===n)for(let n in e)s(e[n],t["*"]);else{const r=t[n];if(!e.hasOwnProperty(n)||null===e[n]||typeof e[n]!=typeof r||Array.isArray(r)&&!Array.isArray(e[n]))Array.isArray(r)?e[n]=[]:e[n]=i.Z.clone(r);else if("object"!=typeof r||Array.isArray(r)){if(Array.isArray(r)&&1===r.length)for(let t=0;t<e[n].length;t++)s(e[n][t],r[0])}else s(e[n],r)}return e}},3762:(e,t,n)=>{const i=n(1036);e.exports=function(e){return i(e,{allowedTags:["blockquote","code","div","em","li","ol","p","strong","b","s","i","u","ul","img","a","h1","h2","h3","h4","h5","h6"],allowedAttributes:{a:["href"],img:["src"]}})}},2217:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(4670),r=n.n(i),s=n(4486),o=n.n(s);class a{constructor(){this.enabled=!0,this.entityId=null,this.id=r().generate()}init(){return!0}play(e){return!1}destroy(){}svg(e,t,n){const i=document.createElementNS("http://www.w3.org/2000/svg",e);return this._enrichDomElement(i,t,n),i}html(e,t,n){const i=document.createElement(e);return this._enrichDomElement(i,t,n),i}_enrichDomElement(e,t,n){t&&o()(t,((t,n)=>{e.setAttribute(n,t)})),n&&o()(n,(t=>{e.appendChild(t)}))}stop(){this.enabled=!1}}},9737:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(4486),r=n.n(i);let s=!0,o=!1;const a=[];function l(e,t){if(0!==a.length)if(s){let n=0;for(;n<a.length;){let e=a[n],i=!0;try{i=!!e.enabled&&e.play(t)}catch(e){i=!1,console.error(e)}if(i)n+=1;else{try{e.destroy()}catch(e){console.error(e)}a.splice(n,1)}}window.requestAnimationFrame((()=>{const t=performance.now();l(t,t-e)}))}else o=!1;else o=!1}function c(){s&&!o&&(o=!0,window.requestAnimationFrame((()=>l(performance.now(),16))))}const h={play(e,t){for(let t=0;t<a.length;t++)if(a[t].id===e.id){a.enabled=!1,a.splice(t,1);break}e.entityId=t;let n=!1;try{e.enabled=!0,n=e.init()}catch(e){console.error("Could not initialize animation",e)}n?(a.push(e),c()):e.destroy()},stopAllAnimations(){const e=this.animations;this.animations=[],r()(e,(e=>{e.destroy()}))},disableAnimations(){s=!1},enableAnimations(){s=!0},stopAllAnimationsForEntity(e){r()(a,(t=>{t.entityId===e&&(t.enabled=!1)}))}}},8370:(e,t,n)=>{"use strict";n.d(t,{uR:()=>b,qK:()=>w,QI:()=>_,yl:()=>k,_p:()=>I});var i=n(4486),r=n.n(i),s=n(3363),o=n(4691),a=n(536),l=n(3805),c=n(6012),h=n(2217),d=n(1179),u=n(9375);const p="number",m="color",f="boolean",g="string",v=new Set([p,m,g,f,"choice"]),y=new Map([["area.x",{type:p}],["area.y",{type:p}],["area.w",{type:p}],["area.h",{type:p}],["area.r",{type:p}],["area.sx",{type:p}],["area.sy",{type:p}],["opacity",{type:p}],["selfOpacity",{type:p}],["visible",{type:f}],["blendMode",{type:g,options:d.W}]]),x=new Map([["style.backgroundColor",{type:m}]]);function b(e){return x.get(e)}function w(e,t){const n=y.get(t);if(n)return n;if(t.startsWith("shapeProps.")){const n=t.split(".");if(n.length<=1)return null;const i=s.Z.find(e.shape);if(!i)return null;const r=s.Z.getShapePropDescriptor(i,n[1]);if(!r)return null;if(r.type===m||"advanced-color"===r.type&&3===n.length&&"color"===n[2])return{type:m};if(v.has(r.type))return r}return null}function C(e,t){e.sort(((e,t)=>e.frame-t.frame));const n=[],i=(e,t,i)=>{const r={prevIdx:t,nextIdx:i};for(let t=0;t<e;t++)n.push(r)};let s=-1;return r()(e,(e=>{if(s>=0&&n[s].frame.frame===e.frame)return;const t={frame:e,prevIdx:s,nextIdx:-1};e.frame-1>n.length&&i(e.frame-1-n.length,s,e.frame-1),n.push(t),s>=0&&(n[s].nextIdx=e.frame-1),s=e.frame-1})),n.length<t&&i(t-n.length,s,-1),n}function _(e,t,n,i){if(e===p)return t*(1-i)+i*n;if(e===m){const e=(0,c.l)(t),r=(0,c.l)(n),s={r:e.r*(1-i)+i*r.r,g:e.g*(1-i)+i*r.g,b:e.b*(1-i)+i*r.b,a:e.a*(1-i)+i*r.a};return(0,c.N)(s)}return t}function A(e,t,n,i){if(t.kind===l.jU.STEP)return t.value;if(i===p||i===m){let r=n.frame-t.frame;if(r>0&&e>=t.frame&&e<=n.frame){const s=(0,l.rJ)((e-t.frame)/r,t.kind);return _(i,t.value,n.value,s)}}return t.value}function S(e,t,n,i,r,s){if(!n)return null;const l=t.split("."),c=C(i,r);return{toggleFrame(t){if(t<1)return;const i=Math.floor(t);let r=null;r=i<=c.length?c[i-1]:c[c.length-1];let h=r;if(!r.frame){if(r.prevIdx<0)return;h=c[r.prevIdx]}let d=null;r.nextIdx>=0&&(d=c[r.nextIdx]);let u=h.frame.value;d&&(u=A(t,h.frame,d.frame,n.type)),o.Z.setObjectProperty(e,l,u),s&&a.Z.emitItemChanged(e.id)}}}function k(e,t){const n=[],i={};return r()(e.shapeProps.animations,(r=>{if("item"===r.kind){const i=t.findItemById(r.id);if(i){const t=w(i,r.property),s=S(i,r.property,t,r.frames,e.shapeProps.totalFrames,!0);s&&n.push(s)}}else if("function"===r.kind)i.hasOwnProperty(r.id)||(i[r.id]={}),i[r.id][r.property]=r;else if("scheme"===r.kind){const i=b(r.property),s=S(t.scheme,r.property,i,r.frames,e.shapeProps.totalFrames,!1);s&&n.push(s)}})),n.concat(function(e,t,n){const i=[];return r()(e.shapeProps.functions,((s,o)=>{if(!t[o])return;const a=u.Z[s.functionId];if(!a)return;const l=a.create(s.args,n),c={};r()(a.inputs,((e,n)=>{t[o][n]?c[n]=t[o][n]:c[n]={kind:"function",functionId:o,property:n,frames:[{frame:0,kind:"linear",value:e.value}]}}));const h=function(e,t,n,i){const s={};return r()(n,((e,t)=>{s[t]=C(e.frames,i)})),{toggleFrame(n){if(n<1)return;const i=Math.floor(n),o={};let a=!1;r()(s,((t,r)=>{let s=null;s=i<=t.length?t[i-1]:t[t.length-1];let l=s;if(!s.frame){if(s.prevIdx<0)return void(a=!0);l=t[s.prevIdx]}let c=null;s.nextIdx>=0&&(c=t[s.nextIdx]);let h=l.frame.value;c&&(h=A(n,l.frame,c.frame,e.inputs[r].type)),o[r]=h})),a||e.execute(t,o)}}}(a,l,c,e.shapeProps.totalFrames);h&&i.push(h)})),i}(e,i,t))}class I extends h.Z{constructor(e,t,n){super(),this.totalTimePassed=0,this.currentFrame=0,this.startFrame=1,this.fps=e,this.totalFrames=t,this.compiledAnimations=n,this.onFrame=null,this.onFinish=null,this.stopFrame=-1}setFrame(e){this.startFrame=e,this.currentFrame=Math.floor(e)-1}setStopFrame(e){this.stopFrame=e}init(){return this.totalTimePassed=0,!0}setCallbacks({onFrame:e,onFinish:t}){this.onFrame=e,this.onFinish=t}play(e){this.totalTimePassed+=e;let t=this.startFrame+this.totalTimePassed*Math.max(this.fps,.01)/1e3,n=Math.floor(t);n>this.currentFrame&&(this.currentFrame=n,this.onFrame&&this.onFrame(this.currentFrame));const i=Math.floor(t);return this.stopFrame>0&&i===this.stopFrame?(this.onFrame&&this.onFrame(this.stopFrame),this.toggleFrame(this.stopFrame),!1):(this.toggleFrame(t),n<this.totalFrames)}toggleFrame(e){this.startFrame=e,this.totalTimePassed=0,this.currentFrame=e,r()(this.compiledAnimations,(t=>{t.toggleFrame(e)}))}destroy(){this.onFinish&&this.onFinish()}}},3805:(e,t,n)=>{"use strict";n.d(t,{jU:()=>r,rJ:()=>s,ZP:()=>o});var i=n(2217);const r={LINEAR:"linear",STEP:"step",SMOOTH:"smooth",EASE_IN:"ease-in",EASE_OUT:"ease-out",EASE_IN_OUT:"ease-in-out",BOUNCE:"bounce",values(){return[this.LINEAR,this.STEP,this.SMOOTH,this.EASE_IN,this.EASE_OUT,this.EASE_IN_OUT,this.BOUNCE]}};function s(e,t){return t===r.SMOOTH?Math.sin(e*Math.PI/2):t===r.EASE_IN?e*e:t===r.EASE_OUT?1-(e-1)*(e-1):t===r.EASE_IN_OUT?.5-Math.cos(e*Math.PI)/2:"bounce"===t?1-Math.pow(3,-10*e)*Math.cos(10*Math.PI*e):e}class o extends i.Z{constructor(e){super(),this.updateCallback=null,this.durationMillis=1e3,this.elapsedTime=0,this.initCallback=null,this.destroyCallback=null,this.animationType="ease-out",e&&(e.durationMillis&&(this.durationMillis=e.durationMillis),e.update&&(this.updateCallback=e.update),e.init&&(this.initCallback=e.init),e.destroy&&(this.destroyCallback=e.destroy),e.animationType&&(this.animationType=e.animationType))}init(){return!!this.updateCallback&&(this.initCallback&&this.initCallback(),!0)}play(e){if(this.elapsedTime+=e,this.elapsedTime>=this.durationMillis)return this.updateCallback(1),!1;const t=this.elapsedTime/this.durationMillis;return this.updateCallback(s(t,this.animationType)),!0}destroy(){this.destroyCallback&&this.destroyCallback()}}},9375:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={moveAlongPath:n(3277).Z}},3277:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(536),r=n(3363),s=n(3590);const o={name:"Move along path",args:{item:{name:"Item",type:"element",value:null},path:{name:"Path",type:"element",value:null},rotateItem:{name:"Rotate item",type:"boolean",value:!1,description:"Adjust rotation of the item to path"},rotationOffset:{name:"Rotation offset",type:"number",value:0,description:"Rotation angle offset",depends:{rotateItem:!0}}},inputs:{distance:{name:"Distance (%)",type:"number",value:0,endValue:100}},create(e,t){const n=t.findFirstElementBySelector(e.item);if(!n)return null;const i=t.findFirstElementBySelector(e.path);if(!i)return null;if(!r.Z.find(i.shape))return null;const s=t.getSvgOutlineOfItem(i);return s?{path:s,item:n,pathItem:i,schemeContainer:t,totalLength:s.getTotalLength(),rotateItem:e.rotateItem,rotationOffset:e.rotationOffset}:null},getFullName(e,t){const n=e=>{const n=t.findFirstElementBySelector(e);return n?n.name:"unknown"};return`Move "${n(e.item)}" along the path of "${n(e.path)}"`},execute({path:e,item:t,pathItem:n,schemeContainer:r,totalLength:o,rotateItem:a,rotationOffset:l},{distance:c}){const h=c*o/100,d=e.getPointAtLength(h);let u=r.worldPointOnItem(d.x,d.y,n);if(a){const i=e.getPointAtLength(h+2),o=r.worldPointOnItem(i.x,i.y,n),a=o.x-u.x,c=o.y-u.y,d=a*a+c*c;if(!s.Z.tooSmall(d)){const e=Math.sqrt(d),n=a/e,i=c/e,r=180*s.Z.fullAngleForNormalizedVector(n,i)/Math.PI;t.area.r=r,isFinite(l)&&(t.area.r+=l)}}let p=u;if(t.meta&&t.meta.parentId){const e=r.findItemById(t.meta.parentId);e&&(p=r.localPointOnItem(u.x,u.y,e))}t.area.x=p.x-t.area.w/2,t.area.y=p.y-t.area.h/2,r.reindexItemTransforms(t),i.Z.emitItemChanged(t.id)}}},6012:(e,t,n)=>{"use strict";function i(e){return`rgba(${e.r},${e.g},${e.b},${e.a})`}function r(e){e=e.toLowerCase();try{const t=e.indexOf("("),n=e.indexOf(")");if(t>0&&n>0){const i=e.substring(0,t).trim();if("rgb"===i||"rgba"===i)return function(e){const t=e.split(",");let n=0,i=0,r=0,s=1;return t.length>0&&(n=parseInt(t[0])),t.length>1&&(i=parseInt(t[1])),t.length>2&&(r=parseInt(t[2])),t.length>3&&(s=parseFloat(t[3])),{r:n,g:i,b:r,a:s}}(e.substring(t+1,n))}if("#"===e.charAt(0))return function(e){let t=0,n=0,i=0;return 3===e.length?(t=parseInt(`${e[0]}${e[0]}`,16),n=parseInt(`${e[1]}${e[1]}`,16),i=parseInt(`${e[2]}${e[2]}`,16)):(e.length>=2&&(t=parseInt(e.substring(0,2),16)),e.length>=4&&(n=parseInt(e.substring(2,4),16)),e.length>=6&&(i=parseInt(e.substring(4,6),16))),{r:t,g:n,b:i,a:1}}(e.substring(1))}catch(e){}return{r:0,g:0,b:0,a:1}}n.d(t,{N:()=>i,l:()=>r})},536:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(2934),r=n.n(i),s=n(2017),o=n(8442);const a=new s.Yd("EventBus"),l=new(r())({data:()=>({START_CREATING_ITEM:"start-creating-item",START_CONNECTING_ITEM:"start-connecting-item",START_CURVE_EDITING:"start-curve-editing",START_DRAWING:"start-drawing",STOP_DRAWING:"stop-drawing",COMPONENT_LOAD_REQUESTED:"component-load-requested",COMPONENT_LOAD_FAILED:"component-load-failed",COMPONENT_SCHEME_MOUNTED:"component-scheme-mounted",PLACE_ITEM:"place-item",CANCEL_CURRENT_STATE:"cancel-current-state",EDITOR_STATE_CHANGED:"editor-state-changed",KEY_PRESS:"key-press",KEY_UP:"key-up",BRING_TO_VIEW:"bring-to-view",SCHEME_CHANGE_COMMITED:"scheme-changed-commited",ANY_ITEM_CLICKED:"any-item-clicked",ITEM_CHANGED:"item-changed",ITEM_SELECTED:"item-selected",ITEM_DESELECTED:"item-deselected",ANY_ITEM_CHANGED:"any-item-changed",ANY_ITEM_SELECTED:"any-item-selected",ANY_ITEM_DESELECTED:"any-item-deselected",ITEM_HIGHLIGHT_SET:"item-highlight-set",ITEM_TEXT_SLOT_EDIT_TRIGGERED:"item-text-slot-edit-triggered",ITEM_TEXT_SLOT_EDIT_CANCELED:"item-text-slot-edit-canceled",ITEM_TEXT_SLOT_MOVED:"item-text-slot-moved",ITEM_IN_PLACE_TEXT_EDITOR_CREATED:"item-in-place-text-editor-created",VOID_CLICKED:"void-clicked",VOID_RIGHT_CLICKED:"void-clicked",VOID_DOUBLE_CLICKED:"void-double-clicked",ITEM_TOOLTIP_TRIGGERED:"item-tooltip-triggered",ITEM_SIDE_PANEL_TRIGGERED:"item-side-panel-triggered",ITEM_LINKS_SHOW_REQUESTED:"item-links-show-requested",RIGHT_CLICKED_ITEM:"right-clicked-item",ELEMENT_PICK_REQUESTED:"element-pick-requested",ELEMENT_PICK_CANCELED:"element-pick-canceled",ELEMENT_PICKED:"element-picked",CURVE_EDITED:"curve-edited",CURVE_EDIT_STOPPED:"curve-edit-stopped",CURVE_EDIT_POINTS_UPDATED:"curve-edit-points-updated",CUSTOM_CONTEXT_MENU_REQUESTED:"custom-context-menu-requested",SCREEN_TRANSFORM_UPDATED:"screen-transform-updated",ITEMS_HIGHLIGHTED:"items-highlighted",ITEM_SURROUND_CREATED:"item-surround-created",BEHAVIOR_PANEL_REQUESTED:"behavior-panel-requested",MULTI_ITEM_EDIT_BOX_ITEMS_UPDATED:"multi-item-edit-box-items-updated",MULTI_ITEM_EDIT_BOX_AREA_UPDATED:"multi-item-edit-box-area-updated",ITEM_CREATION_DRAGGED_TO_SVG_EDITOR:"item-creation-dragged-to-svg-editor",HISTORY_UNDONE:"history-undone",IMAGE_CROP_TRIGGERED:"image-crop-triggered",SCHEME_PATCH_REQUESTED:"scheme-patch-requested",FLOATING_HELPER_PANEL_UPDATED:"floating-helper-panel-updated",FRAME_PLAYER_PREPARED:"frame-player-prepared",CLICKABLE_MARKERS_TOGGLED:"clickable-markers-toggled",EXTRA_SHAPE_GROUP_REGISTERED:"extra-shape-group-registered",ART_PACK_ADDED:"art-pack-added"}),methods:{emitSchemeChangeCommited(e){this.$emit(l.SCHEME_CHANGE_COMMITED,e)},emitItemsHighlighted(e,t){const n=!!t&&t.highlightPins;this.$emit(l.ITEMS_HIGHLIGHTED,e,{highlightPins:n})},emitItemChanged(e,t){this.$emit(this._itemChangedEvent(e),t),this.$emit(l.ANY_ITEM_CHANGED,e,t)},subscribeForItemChanged(e,t){this.$on(this._itemChangedEvent(e),t)},unsubscribeForItemChanged(e,t){this.$off(this._itemChangedEvent(e),t)},_itemChangedEvent:e=>`${l.ITEM_CHANGED}/${e}`,emitItemSelected(e){this.$emit(this._itemSelectedEvent(e)),this.$emit(l.ANY_ITEM_SELECTED,e)},subscribeForItemSelected(e,t){this.$on(this._itemSelectedEvent(e),t)},unsubscribeForItemSelected(e,t){this.$off(this._itemSelectedEvent(e),t)},_itemSelectedEvent:e=>`${l.ITEM_SELECTED}/${e}`,emitItemDeselected(e){this.$emit(this._itemDeselectedEvent(e)),this.$emit(l.ANY_ITEM_DESELECTED,e)},subscribeForItemDeselected(e,t){this.$on(this._itemDeselectedEvent(e),t)},unsubscribeForItemDeselected(e,t){this.$off(this._itemDeselectedEvent(e),t)},_itemDeselectedEvent:e=>`${l.ITEM_DESELECTED}/${e}`,emitAnyItemDeselected(){this.$emit(l.ANY_ITEM_DESELECTED)},emitRightClickedItem(e,t,n){this.$emit(l.RIGHT_CLICKED_ITEM,e,t,n)},emitItemTextSlotEditTriggered(e,t,n,i,r){this.$emit(l.ITEM_TEXT_SLOT_EDIT_TRIGGERED,e,t,n,i,r)},emitItemTextSlotEditCanceled(e,t){this.$emit(l.ITEM_TEXT_SLOT_EDIT_CANCELED,e,t)},emitItemTextSlotMoved(e,t,n){this.$emit(l.ITEM_TEXT_SLOT_MOVED,e,t,n)},emitItemInPlaceTextEditorCreated(e){this.$emit(this.ITEM_IN_PLACE_TEXT_EDITOR_CREATED,e)},emitElementPickRequested(e){this.$emit(l.ELEMENT_PICK_REQUESTED,e)},emitElementPickCanceled(){this.$emit(l.ELEMENT_PICK_CANCELED)},emitCurveEdited(e){this.$emit(l.CURVE_EDITED,e)},emitCustomContextMenuRequested(e,t,n){this.$emit(l.CUSTOM_CONTEXT_MENU_REQUESTED,e,t,n)},emitItemSurroundCreated(e,t,n){this.$emit(l.ITEM_SURROUND_CREATED,e,t,n)},emitBringToViewAnimated(e){this.$emit(l.BRING_TO_VIEW,e,!0)},emitBringToViewInstantly(e){this.$emit(l.BRING_TO_VIEW,e,!1)},emitItemCreationDraggedToSvgEditor(e,t,n){this.$emit(l.ITEM_CREATION_DRAGGED_TO_SVG_EDITOR,e,t,n)},emitComponentLoadRequested(e){this.$emit(l.COMPONENT_LOAD_REQUESTED,e)},emitComponentLoadFailed(e){this.$emit(l.COMPONENT_LOAD_FAILED,e)},emitComponentSchemeMounted(e){this.$emit(l.COMPONENT_SCHEME_MOUNTED,e)},emitEditorStateChanged(e){this.$emit(l.EDITOR_STATE_CHANGED,e)},emitSchemePatchRequested(e){this.$emit(l.SCHEME_PATCH_REQUESTED,e)},emitFloatingHelperPanelUpdated(){this.$emit(l.FLOATING_HELPER_PANEL_UPDATED)},emitFramePlayerPrepared(e,t){this.$emit(l.FRAME_PLAYER_PREPARED,e,t)}}}),c=l.$emit;l.$emit=(...e)=>{a.infoEvent(e[0],e),c&&c.apply(l,e)},document.addEventListener("keyup",(e=>{if((e=e||window.event).target===document.body){const t=(0,o.W)(e);t&&(e.preventDefault(),l.$emit(l.KEY_UP,t,{ctrlCmdPressed:e.metaKey||e.ctrlKey}))}})),document.addEventListener("keydown",(e=>{if((e=e||window.event).target===document.body){const t=(0,o.W)(e);t&&(e.preventDefault(),l.$emit(l.KEY_PRESS,t,{ctrlCmdPressed:e.metaKey||e.ctrlKey}))}}));const h=l},9874:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(3311),r=n.n(i);const s=[{name:"default",fontAwesomeSymbol:"",cssClass:"fas fa-link"},{name:"doc",fontAwesomeSymbol:"",cssClass:"fas fa-project-diagram"},{name:"logs",fontAwesomeSymbol:"",cssClass:"fas fa-stream"},{name:"graphs",fontAwesomeSymbol:"",cssClass:"fas fa-chart-line"},{name:"video",fontAwesomeSymbol:"",cssClass:"fas fa-video"}],o={knownTypes:s,findTypeByNameOrDefault:e=>r()(s,(t=>t.name===e))||s[0]}},4502:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(3674);const r={solid:()=>"",dotted:e=>`${e} ${2*e}`,dashed:e=>`${4*e} ${4*e}`,"dashed-2":e=>`${4*e} ${2*e}`,"dashed-3":e=>`${4*e} ${8*e}`,"dashed-dotted":e=>`${4*e} ${2*e} ${2*e} ${2*e}`,"dashed-dotted-2":e=>`${4*e} ${e} ${e} ${e}`,"dashed-dotted-3":e=>`${8*e} ${4*e} ${4*e} ${4*e}`,"dashed-dotted-4":e=>`${8*e} ${2*e} ${2*e} ${2*e}`},s={createDashArray(e,t){const n=r[e];return n?n(t):""},generateStrokeHtml(e,t,n,i,r){return`<svg width="${i}px" height="${r}px"><path d="M0 ${n} l ${i} 0" fill="none" stroke="#111111" stroke-width="${t}" stroke-dasharray="${this.createDashArray(e,t)}"/></svg>`},patterns:n.n(i)()(r),SOLID:"solid",DASHED:"dashed",DOTTED:"dotted"}},6942:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={shapeConfig:{shapeType:"standard",id:"bracket",menuItems:[{name:"Curly Bracket",group:"General",iconUrl:"/assets/images/items/curly-bracket.svg",item:{shapeProps:{fill:{type:"none"},style:"curly"}},size:{w:20,h:200},previewArea:{x:5,y:30,w:130,h:15,r:0}},{name:"Square Bracket",group:"General",iconUrl:"/assets/images/items/square-bracket.svg",item:{shapeProps:{fill:{type:"none"},style:"square"}},size:{w:20,h:200},previewArea:{x:5,y:30,w:130,h:15,r:0}},{name:"Round Bracket",group:"General",iconUrl:"/assets/images/items/round-bracket.svg",item:{shapeProps:{fill:{type:"none"},style:"round"}},size:{w:20,h:200},previewArea:{x:5,y:30,w:130,h:15,r:0}}],getPins:e=>[],getTextSlots:e=>[],computePath(e){const t={x:0,y:0},n={x:0,y:1};let i=e.area.h;const r={x:1,y:0};let s=e.area.w;e.area.w<e.area.h&&(n.x=1,n.y=0,i=e.area.w,r.x=0,r.y=-1,s=e.area.h,t.x=0,t.y=e.area.h);let o=[];o="curly"===e.shapeProps.style?function(e,t,n,i,r){const s=Math.min(40,.2*r),o=Math.min(20,.2*r);return[e,{type:"Q",x1:e.x+t.x*i/2,y1:e.y+t.y*i/2,x2:e.x+t.x*i/2+n.x*s,y2:e.y+t.y*i/2+n.y*s},{x:e.x+t.x*i/2+n.x*(r/2-o),y:e.y+t.y*i/2+n.y*(r/2-o)},{type:"Q",x1:e.x+t.x*i/2+n.x*(r/2),y1:e.y+t.y*i/2+n.y*r/2,x2:e.x+t.x*i+n.x*(r/2),y2:e.y+t.y*i+n.y*(r/2)},{type:"Q",x1:e.x+t.x*i/2+n.x*(r/2),y1:e.y+t.y*i/2+n.y*r/2,x2:e.x+t.x*i/2+n.x*(r/2+o),y2:e.y+t.y*i/2+n.y*(r/2+o)},{x:e.x+t.x*i/2+n.x*(r-s),y:e.y+t.y*i/2+n.y*(r-s)},{type:"Q",x1:e.x+n.x*r+t.x*i/2,y1:e.y+n.y*r+t.y*i/2,x2:e.x+n.x*r,y2:e.y+n.y*r}]}(t,n,r,i,s):"curly-sharp"===e.shapeProps.style?function(e,t,n,i,r){const s=Math.min(40,.2*r),o=Math.min(20,.2*r);return[e,{x:e.x+t.x*i/2+n.x*s,y:e.y+t.y*i/2+n.y*s},{x:e.x+t.x*i/2+n.x*(r/2-o),y:e.y+t.y*i/2+n.y*(r/2-o)},{x:e.x+t.x*i+n.x*(r/2),y:e.y+t.y*i+n.y*(r/2)},{x:e.x+t.x*i/2+n.x*(r/2+o),y:e.y+t.y*i/2+n.y*(r/2+o)},{x:e.x+t.x*i/2+n.x*(r-s),y:e.y+t.y*i/2+n.y*(r-s)},{x:e.x+n.x*r,y:e.y+n.y*r}]}(t,n,r,i,s):"round"===e.shapeProps.style?function(e,t,n,i,r){const s=.3;return[e,{type:"C",x1:e.x+t.x*i+n.x*s,y1:e.y+t.y*i+n.y*s,x2:e.x+t.x*i+n.x*(r-s),y2:e.y+t.y*i+n.y*(r-s),x3:e.x+n.x*r,y3:e.y+n.y*r}]}(t,n,r,i,s):function(e,t,n,i,r){return[e,{x:e.x+t.x*i,y:e.y+t.y*i},{x:e.x+t.x*i+n.x*r,y:e.y+t.y*i+n.y*r},{x:e.x+n.x*r,y:e.y+n.y*r}]}(t,n,r,i,s);let a=`M ${o[0].x} ${o[0].y}`;for(let e=1;e<o.length;e++)"C"===o[e].type?a+=` C ${o[e].x1} ${o[e].y1} ${o[e].x2} ${o[e].y2} ${o[e].x3} ${o[e].y3}`:"Q"===o[e].type?a+=` Q ${o[e].x1} ${o[e].y1} ${o[e].x2} ${o[e].y2}`:a+=` L ${o[e].x} ${o[e].y}`;return a},args:{style:{type:"choice",value:"curly",name:"Style",options:["curly","curly-sharp","square","round"]}}}}},1008:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(4486),r=n.n(i),s=n(3590);const o={tail:function(e){let t=0,n=0;return"top"===e.shapeProps.tailSide?(t=e.shapeProps.tailPosition,n=-e.shapeProps.tailLength):"bottom"===e.shapeProps.tailSide?(t=e.shapeProps.tailPosition,n=e.area.h+e.shapeProps.tailLength):"left"===e.shapeProps.tailSide?(t=-e.shapeProps.tailLength,n=e.shapeProps.tailPosition):"right"===e.shapeProps.tailSide&&(t=e.area.w+e.shapeProps.tailLength,n=e.shapeProps.tailPosition),{x:t,y:n}},tailWidth:function(e){const t=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4),n=e.area.w,i=e.area.h;let r=0,o=0;const a=Math.max(0,e.shapeProps.tailWidth);if("top"===e.shapeProps.tailSide){let i=0;const l=Math.max(0,n-2*t);l>0&&(i=s.Z.clamp(e.shapeProps.tailPosition/l,0,1)),r=t+a+(l-a)*i,o=0}else if("bottom"===e.shapeProps.tailSide){let l=0;const c=Math.max(0,n-2*t);c>0&&(l=1-s.Z.clamp(e.shapeProps.tailPosition/c,0,1)),r=n-t-a-(c-a)*l,o=i}else if("left"===e.shapeProps.tailSide){let n=0;const l=Math.max(0,i-2*t);l>0&&(n=1-s.Z.clamp(e.shapeProps.tailPosition/l,0,1)),r=0,o=i-t-a-(l-a)*n}else if("right"===e.shapeProps.tailSide){let l=0;const c=Math.max(0,i-2*t);c>0&&(l=s.Z.clamp(e.shapeProps.tailPosition/c,0,1)),r=n,o=t+a+(c-a)*l}return{x:r,y:o}},cornerRadius:function(e){return{x:Math.min(e.area.w,Math.max(e.area.w-e.shapeProps.cornerRadius,e.area.w/2)),y:0}}},a={shapeConfig:{shapeType:"standard",id:"comment",menuItems:[{group:"Basic Shapes",name:"Comment",iconUrl:"/assets/images/items/comment.svg",item:{text:"Text...",shapeProps:{fontSize:8,cornerRadius:5,tailLength:20,tailWidth:20,tailSide:"bottom",tailPosition:10}},previewArea:{x:5,y:5,w:130,h:60,r:0}}],computePath(e){const t=e.area.w,n=e.area.h,i=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4);let r=`M 0 ${i} `,o=[{name:"top",length:t-2*i,invertT:!0,p1x:i,p1y:0,vx:1,vy:0,nx:0,ny:-1,ax:1,ay:-1},{name:"right",length:n-2*i,invertT:!0,p1x:t,p1y:i,vx:0,vy:1,nx:1,ny:0,ax:1,ay:1},{name:"bottom",length:t-2*i,invertT:!1,p1x:t-i,p1y:n,vx:-1,vy:0,nx:0,ny:1,ax:-1,ay:1},{name:"left",length:n-2*i,invertT:!1,p1x:0,p1y:n-i,vx:0,vy:-1,nx:-1,ny:0,ax:-1,ay:-1}];const a=Math.max(0,e.shapeProps.tailWidth);for(let t=0;t<o.length;t++){const n=o[t];if(r+=`a ${i} ${i} 0 0 1 ${i*n.ax} ${i*n.ay} `,e.shapeProps.tailSide===n.name){const t=e.shapeProps.tailLength,i=Math.min(Math.max(0,n.length-a),a);let o=0;n.length>0&&(o=s.Z.clamp(e.shapeProps.tailPosition/n.length,0,1)),n.invertT&&(o=1-o);const l=(n.length-i)*(1-o),c=(n.length-i)*o,h=l*n.vx,d=l*n.vy,u=n.p1x+h,p=n.p1y+d,m=u+i*n.vx,f=p+i*n.vy,g=m+c*n.vx,v=f+c*n.vy;let y=0,x=0;"bottom"===n.name||"top"===n.name?(y=e.shapeProps.tailPosition,x=n.p1y+t*n.ny):(x=e.shapeProps.tailPosition,y=n.p1x+t*n.nx),r+=`L ${n.p1x} ${n.p1y} L ${u} ${p} L ${y} ${x}  L ${m} ${f} L ${g} ${v} `}else r+=`l ${n.length*n.vx} ${n.length*n.vy} `}return r+=" z",r},controlPoints:{make(e,t){if(t)return o[t](e);{const t={};return r()(o,((n,i)=>{t[i]=n(e)})),t}},handleDrag(e,t,n,i,r,o){"tail"===t?function(e,t,n,i,r){let o=t+i,a=n+r,l=3;s.Z.identifyPointSideAgainstLine(o,a,s.Z.createLineEquation(0,0,e.area.w,e.area.h))<0&&(l&=1),s.Z.identifyPointSideAgainstLine(o,a,s.Z.createLineEquation(0,e.area.h,e.area.w,0))<0&&(l&=2),0===l?(e.shapeProps.tailSide="top",e.shapeProps.tailPosition=o,e.shapeProps.tailLength=-a):3===l&&(e.shapeProps.tailSide="bottom",e.shapeProps.tailPosition=o,e.shapeProps.tailLength=a-e.area.h),2==l?(e.shapeProps.tailSide="left",e.shapeProps.tailPosition=a,e.shapeProps.tailLength=-o):1==l&&(e.shapeProps.tailSide="right",e.shapeProps.tailPosition=a,e.shapeProps.tailLength=o-e.area.w)}(e,n,i,r,o):"cornerRadius"===t?e.shapeProps.cornerRadius=Math.max(0,e.area.w-Math.max(e.area.w/2,n+r)):"tailWidth"===t&&function(e,t,n,i,r){const o=t+i,a=n+r,l=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4),c=e.area.w,h=e.area.h,d=Math.max(0,e.shapeProps.tailWidth);if("top"===e.shapeProps.tailSide){let t=0;const n=Math.max(0,c-2*l);n>0&&(t=s.Z.clamp(e.shapeProps.tailPosition/n,0,1));const i=l+(n-d)*t;e.shapeProps.tailWidth=s.Z.clamp(o-i,0,n/2)}else if("bottom"===e.shapeProps.tailSide){let t=0;const n=Math.max(0,c-2*l);n>0&&(t=1-s.Z.clamp(e.shapeProps.tailPosition/n,0,1));const i=c-l-(n-d)*t;e.shapeProps.tailWidth=s.Z.clamp(i-o,0,n/2)}else if("left"===e.shapeProps.tailSide){let t=0;const n=Math.max(0,h-2*l);n>0&&(t=1-s.Z.clamp(e.shapeProps.tailPosition/n,0,1));const i=h-l-(n-d)*t;e.shapeProps.tailWidth=s.Z.clamp(i-a,0,n/2)}else if("right"===e.shapeProps.tailSide){let t=0;const n=Math.max(0,h-2*l);n>0&&(t=s.Z.clamp(e.shapeProps.tailPosition/n,0,1));const i=l+(n-d)*t;e.shapeProps.tailWidth=s.Z.clamp(a-i,0,n/2)}}(e,n,i,r,o)}},args:{cornerRadius:{type:"number",value:10,name:"Corner radius"},tailLength:{type:"number",value:30,name:"Tail Length"},tailWidth:{type:"number",value:40,name:"Tail Width"},tailSide:{type:"choice",value:"bottom",name:"Tail Side",options:["top","bottom","left","right"]},tailPosition:{type:"number",value:0,name:"Tail Position"}}}}},125:(e,t,n)=>{"use strict";n.d(t,{j:()=>c,g:()=>h});var i=n(3674),r=n.n(i);function s(e){return{hollow:!1,renderFunc:e}}function o(e){return{hollow:!0,renderFunc:e}}const a={empty:null,triangle:s(((e,t,n,i)=>u(e,t,n,i,1,2,!0))),"triangle-1":s(((e,t,n,i)=>u(e,t,n,i,1,1,!0))),"triangle-2":s(((e,t,n,i)=>u(e,t,n,i,1,3,!0))),arrow:s(((e,t,n,i)=>u(e,t,n,i,1,2,!1))),"arrow-1":s(((e,t,n,i)=>u(e,t,n,i,1,1,!1))),"arrow-2":s(((e,t,n,i)=>u(e,t,n,i,1,3,!1))),"triangle-h":o(((e,t,n,i)=>u(e,t,n,i,1,2,!0))),"triangle-h-1":o(((e,t,n,i)=>u(e,t,n,i,1,1,!0))),"triangle-h-2":o(((e,t,n,i)=>u(e,t,n,i,1,3,!0))),circle:s(((e,t,n,i)=>{const r=n*n+i*i;if(r>.01){let s=Math.sqrt(r)/2;return{path:` M ${e+n/2-s}, ${t+i/2} a ${s},${s} 0 1,0 ${2*s},0 a ${s},${s} 0 1,0 -${2*s},0`,hollow:!1,entryPoint:{x:e+n,y:t+i}}}return null})),"circle-cross":o(((e,t,n,i)=>{const r=n*n+i*i;if(r>.01){let s=Math.sqrt(r)/2;const o=e+n/2,a=t+i/2,l=Math.cos(Math.PI/4)*s;return{path:` M ${o-s}, ${a} a ${s},${s} 0 1,0 ${2*s},0 a ${s},${s} 0 1,0 -${2*s},0 z M ${o-l} ${a-l} L ${o+l} ${a+l}  M ${o+l} ${a-l} L ${o-l} ${a+l}`,hollow:!0,entryPoint:{x:e+n,y:t+i}}}return null})),"double-arrow":s(((e,t,n,i)=>u(e,t,n,i,2,2,!1))),"double-arrow-1":s(((e,t,n,i)=>u(e,t,n,i,2,1,!1))),"double-arrow-2":s(((e,t,n,i)=>u(e,t,n,i,2,3,!1))),"double-triangle":s(((e,t,n,i)=>u(e,t,n,i,2,2,!0))),"double-triangle-1":s(((e,t,n,i)=>u(e,t,n,i,2,1,!0))),"double-triangle-2":s(((e,t,n,i)=>u(e,t,n,i,2,3,!0))),"double-triangle-h":o(((e,t,n,i)=>u(e,t,n,i,2,2,!0))),"double-triangle-h-1":o(((e,t,n,i)=>u(e,t,n,i,2,1,!0))),"double-triangle-h-2":o(((e,t,n,i)=>u(e,t,n,i,2,3,!0))),diamond:s(((e,t,n,i)=>p(e,t,n,i,.5))),"diamond-1":s(((e,t,n,i)=>p(e,t,n,i,1))),"diamond-2":s(((e,t,n,i)=>p(e,t,n,i,1.5))),"diamond-h":o(((e,t,n,i)=>p(e,t,n,i,.5))),"diamond-h-1":o(((e,t,n,i)=>p(e,t,n,i,1))),"diamond-h-2":o(((e,t,n,i)=>p(e,t,n,i,1.5))),line:s(((e,t,n,i)=>d(e,t,n,i,1))),"double-line":s(((e,t,n,i)=>d(e,t,n,i,2))),"tripple-line":s(((e,t,n,i)=>d(e,t,n,i,3)))},l=r()(a);function c(){return l}function h(e,t,n,i,r){const s=a[r];if(s){const r=s.renderFunc(e,t,n,i);return s.hollow&&(r.hollow=!0),r}return null}function d(e,t,n,i,r){let s="";const o=i/2,a=-n/2;for(let l=0;l<r;l++){const c=e+n*(l+1)/(r+1),h=t+i*(l+1)/(r+1);s+=`M ${c+o} ${h+a} L ${c-o} ${h-a} `}return{path:s,hollow:!0,prolongLine:!0,entryPoint:{x:e+n,y:t+i}}}function u(e,t,n,i,r,s,o){let a="";const l=i/(2*s),c=-n/(2*s);for(let s=0;s<r;s++){const h=e+n*s/r,d=t+i*s/r;a+=`M ${h+n/r+l} ${d+i/r+c} L ${h} ${d} L ${h+n/r-l} ${d+i/r-c} `,o&&(a+=" z ")}return{path:a,hollow:!o,prolongLine:!o,entryPoint:{x:e+n,y:t+i}}}function p(e,t,n,i,r){const s=r*i/2,o=-r*n/2;return{path:`M ${e} ${t} L ${e+n/2-s} ${t+i/2-o} L ${e+n} ${t+i} L ${e+n/2+s} ${t+i/2+o} z`,hollow:!1,entryPoint:{x:e+n,y:t+i}}}},8915:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(9498);const r={shapeConfig:{shapeType:"standard",id:"ellipse",menuItems:[{group:"Basic Shapes",name:"Ellipse",iconUrl:"/assets/images/items/ellipse.svg"}],getPins:e=>(0,i.F)(e),computePath(e){const t=e.area.w/2,n=e.area.h/2;return`M 0 ${n} A ${t} ${n} 0 1 1 ${e.area.w} ${n}  A ${t} ${n} 0 1 1 0 ${n} Z`}}}},5664:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={shapeConfig:{shapeType:"standard",id:"npoly",menuItems:[{group:"Basic Shapes",name:"N-Polygon",iconUrl:"/assets/images/items/npolygon.svg",size:{w:60,h:60},previewArea:{x:0,y:0,w:150,h:150,r:0}}],computePath(e){const t=e.area.w/2,n=e.area.h/2,i=Math.max(3,e.shapeProps.corners);let r="";for(let s=0;s<i;s++){const o=e.area.w/2*Math.cos(2*s*Math.PI/i-Math.PI/2+e.shapeProps.angle*Math.PI/180)+t,a=e.area.h/2*Math.sin(2*s*Math.PI/i-Math.PI/2+e.shapeProps.angle*Math.PI/180)+n;0===s&&(r=`M ${o} ${a} `),r+=` L ${o} ${a}`}return r+" Z"},args:{corners:{type:"number",value:6,name:"Corners"},angle:{type:"number",value:0,name:"Angle"}}}}},9831:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(9498);const r={shapeConfig:{shapeType:"empty",id:"none",menuItems:[{group:"General",name:"Text",iconUrl:"/assets/images/items/text.svg",item:{textSlots:{body:{text:"Text ...",paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0}}}}],getPins:e=>(0,i.F)(e),computePath(e){const t=e.area.w,n=e.area.h;return`M 0 0  L ${t} 0  L ${t} ${n}  L 0 ${n} Z`},args:{}}}},1969:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(3590),r=n(9498);const s={shapeConfig:{shapeType:"standard",id:"rect",menuItems:[{group:"Basic Shapes",name:"Rect",iconUrl:"/assets/images/items/rect.svg",item:{shapeProps:{cornerRadius:0}}},{group:"Basic Shapes",name:"Rounded Rect",iconUrl:"/assets/images/items/rounded-rect.svg",item:{shapeProps:{cornerRadius:20}}},{group:"General",name:"Overlay",iconUrl:"/assets/images/items/overlay.svg",description:"\n                It lets you create a clickable area on the image (or any other element of the scheme) and treat it like an object.\n                E.g. you can select it, trigger events or connect it to other items on the page.\n            ",item:{cursor:"pointer",opacity:5,shapeProps:{cornerRadius:0},behavior:{events:[{event:"mousein",actions:[{element:"self",method:"set",args:{field:"opacity",value:50}}]},{event:"mouseout",actions:[{element:"self",method:"set",args:{field:"opacity",value:5}}]}]}}},{group:"General",name:"Button",iconUrl:"/assets/images/items/button.svg",item:{cursor:"pointer",opacity:100,shapeProps:{cornerRadius:20,fill:{type:"gradient",color:"rgba(29, 108, 176, 1)",gradient:{colors:[{c:"rgba(25, 121, 204, 1)",p:0},{c:"rgba(86, 172, 246, 1)",p:100}],type:"linear",direction:0}},strokeColor:"rgba(39, 132, 211, 1)",strokeSize:2,strokePattern:"solid"},textSlots:{body:{text:"<p><strong>Button</strong></p>",color:"rgba(255, 255, 255, 1)",halign:"center",valign:"middle"}},behavior:{events:[{event:"mousein",actions:[{element:"self",method:"set",args:{field:"opacity",value:90}}]},{event:"mouseout",actions:[{element:"self",method:"set",args:{field:"opacity",value:100}}]}]}},previewArea:{x:0,y:0,w:140,h:60,r:0}}],getPins:e=>(0,r.F)(e),computePath(e){const t=e.area.w,n=e.area.h,i=Math.min(e.shapeProps.cornerRadius,e.area.w/2,e.area.h/2);return`M ${t-i} ${n}  L ${i} ${n} a ${i} ${i} 0 0 1 ${-i} ${-i}  L 0 ${i}  a ${i} ${i} 0 0 1 ${i} ${-i}   L ${t-i} 0   a ${i} ${i} 0 0 1 ${i} ${i}  L ${t} ${n-i}   a ${i} ${i} 0 0 1 ${-i} ${i} Z`},editorProps:{},controlPoints:{make:e=>({cornerRadius:{x:Math.min(e.area.w,Math.max(e.area.w-e.shapeProps.cornerRadius,e.area.w/2)),y:0}}),handleDrag(e,t,n,r,s,o){"cornerRadius"===t&&(e.shapeProps.cornerRadius=Math.max(0,i.Z.roundPrecise(e.area.w-Math.max(e.area.w/2,n+s),1)))}},args:{cornerRadius:{type:"number",value:0,name:"Corner radius",min:0}}}}},3363:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var i=n(4486),r=n.n(i),s=n(3674),o=n.n(s),a=n(3590),l=n(8270),c=n(4691),h=n(9825);const d=n(2291).Z;let u=[n(1969).Z,n(9831).Z,n(8915).Z,n(5664).Z,n(9113).Z,n(1516).Z,n(6942).Z,n(3097).Z,n(1008).Z,n(6366).Z,n(5530).Z,n(5879).Z,n(3355).Z,n(9243).Z,n(2270).Z,n(5198).Z,n(9739).Z,n(8022).ZP,n(8733).Z,n(9078).Z,n(1533).Z,n(5845).Z,n(5906).Z,n(9699).Z,n(3652).Z,n(9880).Z,n(4437).Z,n(2517).Z,n(4387).Z,n(4358).Z,n(7569).Z,n(6852).Z,n(7153).Z,n(8396).Z,n(3486).Z,n(1693).Z,n(8028).Z,n(5576).Z];function p(e){return[]}u=u.concat(d.shapes);const m={description:"rich",onlyEditMode:!1,ignoreEventLayer:!1,customTextRendering:!1},f={fill:{name:"Fill",type:"advanced-color"},strokeColor:{name:"Stroke",type:"color"},strokeSize:{name:"Stroke Size",type:"number"},strokePattern:{name:"Stroke Pattern",type:"stroke-pattern"}};function g(e){return[{name:"body",area:{x:0,y:0,w:e.area.w,h:e.area.h}}]}function v(e){return[{x:e.area.w/2,y:e.area.h/2}]}function y(e,t,n){return a.Z.worldPointInArea(e,t,n.area,n.meta&&n.meta.transformMatrix?n.meta.transformMatrix:null)}function x(e){const t=y(0,0,e),n=y(e.area.w,0,e),i=y(e.area.w,e.area.h,e),r=y(0,e.area.h,e),s=[];return e.area.w>1e-4&&(Math.abs(t.y-n.y)<1e-4&&s.push({item:e,snapperType:"horizontal",value:t.y}),Math.abs(i.y-r.y)<1e-4&&s.push({item:e,snapperType:"horizontal",value:i.y}),Math.abs(t.x-r.x)<1e-4&&s.push({item:e,snapperType:"vertical",value:t.x}),Math.abs(n.x-i.x)<1e-4&&s.push({item:e,snapperType:"vertical",value:n.x})),s}function b(e,t){let n={};e.shapeConfig&&(n=e.shapeConfig),n.shapeType||console.error(`Missing shapeType for shape "${t}"`);const i={};return"standard"===n.shapeType&&r()(f,((e,t)=>{i[t]=c.Z.clone(e)})),n.args&&r()(n.args,((e,t)=>{i[t]=c.Z.clone(e),e.onUpdate&&(i[t].onUpdate=e.onUpdate)})),{shapeType:n.shapeType,editorProps:n.editorProps||m,args:i,computePath:n.computePath,computeCurves:n.computeCurves,computeOutline:n.computeOutline||n.computePath,readjustItem:n.readjustItem,getTextSlots:n.getTextSlots||g,getEvents:n.getEvents||p,controlPoints:n.controlPoints||null,getPins:n.getPins||v,shapeEvents:{beforeCreate:n.beforeCreate,mounted:n.mounted},getSnappers:n.getSnappers||x,vueComponent:"vue"===n.shapeType?e:null,menuItems:n.menuItems||[],argType(e){return this.args&&this.args[e]?this.args[e].type:"standard"===this.shapeType&&f[e]?f[e].type:null}}}const w={};function C(e,t){const n=(0,l.BM)(t);n.shapeConfig.id=e,w[e]=b(n)}r()(u,(function(e){e.shapeConfig.id&&("raw"===e.shapeConfig.shapeType?C(e.shapeConfig.id,e.shapeConfig):w[e.shapeConfig.id]=b(e))}));const _={getShapeIds:()=>o()(w),find:e=>w[e],standardShapeProps:f,getShapePropDescriptor:function(e,t){return"standard"===e.shapeType&&f.hasOwnProperty(t)?f[t]:e.args&&e.args.hasOwnProperty(t)?e.args[t]:null},getRegistry:function(){return w},computeStandardCurves:function(e,t){return t.computeCurves?t.computeCurves(e):t.computePath?[{path:t.computePath(e),fill:h.Z.computeStandardFill(e),strokeColor:e.shapeProps.strokeColor,strokeSize:e.shapeProps.strokeSize}]:void 0},getShapeArgs:function(e){if("standard"===e.shapeType){const t={},n=(e,n)=>t[n]=e;return r()(f,n),r()(e.args,n),t}return e.args},registerRawShape:C}},9498:(e,t,n)=>{"use strict";function i(e){const t=e.area.w,n=e.area.h;return[{x:t/2,y:n/2},{x:t/2,y:0,nx:0,ny:-1},{x:t/2,y:n,nx:0,ny:1},{x:0,y:n/2,nx:-1,ny:0},{x:t,y:n/2,nx:1,ny:0}]}n.d(t,{F:()=>i})},8270:(e,t,n)=>{"use strict";n.d(t,{DC:()=>h,FI:()=>u,Vk:()=>p,oJ:()=>m,VE:()=>y,BM:()=>w});var i=n(5161),r=n.n(i),s=n(4486),o=n.n(s),a=n(9825),l=n(3590);function c(e){return l.Z.roundPrecise2(e)}const h=100;function d(e,t){return"A"===e.t?function(e,t,n,i,r){const s=l.Z.distanceBetweenPoints(e,t,n,i),o=s*r/100;if(l.Z.tooSmall(o)||l.Z.tooSmall(s))return`L ${c(n)} ${c(i)} `;const a=Math.abs(o/2+s*s/(8*o));let h=Math.abs(o)>s/2?1:0,d=r>0?1:0;return`A ${c(a)} ${c(a)} 0 ${h} ${d} ${c(n)} ${c(i)}`}(e.x,e.y,t.x,t.y,e.h):"L"===e.t&&"B"===t.t?`Q ${c(t.x1+t.x)} ${c(t.y1+t.y)} ${c(t.x)} ${c(t.y)} `:"B"===e.t&&"B"!==t.t?`Q ${c(e.x2+e.x)} ${c(e.y2+e.y)} ${c(t.x)} ${c(t.y)} `:"B"===e.t&&"B"===t.t?`C ${c(e.x2+e.x)} ${c(e.y2+e.y)} ${c(t.x1+t.x)} ${c(t.y1+t.y)} ${c(t.x)} ${c(t.y)} `:`L ${c(t.x)} ${c(t.y)} `}function u(e,t,n,i){if(n.length<2)return null;let r="",s=null,a=null;return o()(n,(n=>{const i=m(n,e,t);a||(a=i),r+=s?d(s,i):`M ${c(i.x)} ${c(i.y)} `,s=i})),i&&s&&a&&(r+=d(s,a),r+=" Z"),r}function p(e,t,n){let i=1,r=1;return l.Z.tooSmall(t)&&(t=1,i=0),l.Z.tooSmall(n)&&(n=1,r=0),"B"===e.t?{t:"B",x:e.x*h*i/t,y:e.y*h*r/n,x1:e.x1*h*i/t,y1:e.y1*h*r/n,x2:e.x2*h*i/t,y2:e.y2*h*r/n}:"A"===e.t?{t:e.t,x:e.x*h*i/t,y:e.y*h*r/n,h:e.h||50}:{t:"L",x:e.x*h*i/t,y:e.y*h*r/n}}function m(e,t,n){return"B"===e.t?{t:e.t,x:t*e.x/h,y:n*e.y/h,x1:t*e.x1/h,y1:n*e.y1/h,x2:t*e.x2/h,y2:n*e.y2/h}:"A"===e.t?{t:e.t,x:t*e.x/h,y:n*e.y/h,h:e.h}:{t:"L",x:t*e.x/h,y:n*e.y/h}}function f(e){return t=>{if(e.outlines&&e.outlines.length>0){let n="";return o()(e.outlines,(e=>{const i=v(t,0,e);i&&(n+=i)})),n}{const e=t.area.w,n=t.area.h;return`M  0 0 L ${e} 0 L ${e} ${n} L 0 ${n} Z`}}}function g(e,t,n){return{x:e*n.area.w/100,y:t*n.area.h/100}}function v(e,t,n){return"path"===n.type?function(e,t,n){let i="";return o()(n.paths,(t=>{const n=u(e.area.w,e.area.h,t.points,t.closed);i+=n+" "})),i}(e,0,n):"ellipse"===n.type?function(e,t,n){const{p0:i,pw:r,ph:s}=n.projection,o=(s.x-i.x)/2+i.x,a=(s.y-i.y)/2+i.y,c=(s.x-i.x)/2+r.x,h=(s.y-i.y)/2+r.y,d=g(o,a,e),u=g(c,h,e),p=g(i.x,i.y,e),m=g(r.x,r.y,e),f=g(s.x,s.y,e),v=l.Z.distanceBetweenPoints(m.x,m.y,p.x,p.y)/2,y=l.Z.distanceBetweenPoints(f.x,f.y,p.x,p.y)/2;return`M ${d.x} ${d.y} A ${v} ${y} 0 1 1 ${u.x} ${u.y}  A ${v} ${y} 0 1 1 ${d.x} ${d.y} Z`}(e,0,n):"rect"===n.type?function(e,t,n){const{p0:i,pw:r,ph:s}=n.projection,o=g(i.x,i.y,e),a=g(r.x,r.y,e),c=g(s.x,s.y,e),h=l.Z.distanceBetweenPoints(a.x,a.y,o.x,o.y),d=l.Z.distanceBetweenPoints(c.x,c.y,o.x,o.y),u=Math.min(n.cornerRadiusRatio.w*h,n.cornerRadiusRatio.h*d,h/2,d/2),p=l.Z.normalizedVector(a.x-o.x,a.y-o.y),m=l.Z.normalizedVector(c.x-o.x,c.y-o.y);if(!p||!m)return"";p.x=p.x*u,p.y=p.y*u,m.x=m.x*u,m.y=m.y*u;const f=l.Z.vectorMinusVector(l.Z.vectorPlusVector(a,c),o),v=[l.Z.vectorPlusVector(o,m),l.Z.vectorPlusVector(o,p),l.Z.vectorMinusVector(a,p),l.Z.vectorPlusVector(a,m),l.Z.vectorMinusVector(f,m),l.Z.vectorMinusVector(f,p),l.Z.vectorPlusVector(c,p),l.Z.vectorMinusVector(c,m)],y=e=>` L ${e.x} ${e.y}`;let x=`M ${v[0].x} ${v[0].y}`;for(let e=1;e<v.length;e++)x+=e%2==0?y(v[e]):` A ${u} ${u} 0 0 1 ${(b=v[e]).x} ${b.y}`;var b;return x+y(v[0])+" Z"}(e,0,n):(console.error("Uknown raw shape type: "+n.type),null)}function y(e,t,n){const i=v(e,0,n);if(!i)return null;let r="none";if("fill"===n.fillArg)r=a.Z.computeStandardFill(e);else if("none"===n.fillArg)r="none";else if(n.fillArg){const t=e.shapeProps[n.fillArg];"string"==typeof t&&(r=t)}return{path:i,fill:r,strokeColor:e.shapeProps.strokeColor,strokeSize:l.Z.roundPrecise2(e.shapeProps.strokeSize*n.strokeSize)}}function x(e){return t=>{if(e.items){const n=[];return o()(e.items,(e=>{const i=y(t,0,e);i&&n.push(i)})),n}return[]}}function b(e){return t=>{if(e.pins){const n=t.area.w,i=t.area.h;return r()(e.pins,(e=>{const t={x:e.x*n/100,y:e.y*i/100};return e.hasOwnProperty("nx")&&e.hasOwnProperty("ny")&&(t.nx=e.nx,t.ny=e.ny),t}))}return[{x:t.area.w/2,y:t.area.h/2}]}}function w(e){return{shapeConfig:{id:e.id,shapeType:"standard",menuItems:e.menuItems,computeOutline:f(e),computeCurves:x(e),getPins:b(e),args:{fill:{type:"advanced-color",value:{type:"solid",color:"rgba(255,255,255,1)"},name:"Fill"},strokeColor:{type:"color",value:"#111111",name:"Stroke color"},strokePattern:{type:"stroke-pattern",value:"solid",name:"Stroke pattern"},strokeSize:{type:"number",value:2,name:"Stroke Size"}}}}}},5198:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(9498);const r={shapeConfig:{shapeType:"standard",id:"basic_diamond",menuItems:[{group:"Basic Shapes",name:"Diamond",iconUrl:"/assets/images/items/basic-diamond.svg"},{group:"UML",name:"Decision",iconUrl:"/assets/images/items/basic-diamond.svg"}],computePath:e=>function(e){const t=e.area.w,n=e.area.h;return`M ${t/2} 0  L ${t} ${n/2}  L ${t/2} ${n}  L 0 ${n/2} Z`}(e),getPins:e=>(0,i.F)(e),args:{}}}},2270:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(3590);const r={shapeConfig:{shapeType:"standard",id:"basic_triangle",computePath(e){const t=e.area.w*e.shapeProps.skew/100;return`M 0 ${e.area.h}  L ${t} 0  L ${e.area.w} ${e.area.h} Z`},controlPoints:{make:e=>({skew:{x:e.area.w*e.shapeProps.skew/100,y:0}}),handleDrag(e,t,n,r,s,o){"skew"===t&&e.area.w>.01&&(e.shapeProps.skew=i.Z.roundPrecise1(i.Z.clamp(100*(n+s)/e.area.w,0,100)))}},getPins(e){const t=e.area.w*e.shapeProps.skew/100;return[{x:(t+e.area.w)/3,y:2*e.area.h/3},{x:t,y:0},{x:e.area.w,y:e.area.h},{x:0,y:e.area.h},{x:t/2,y:e.area.h/2},{x:t+(e.area.w-t)/2,y:e.area.h/2},{x:e.area.w/2,y:e.area.h}]},menuItems:[{group:"Basic Shapes",name:"Triangle",iconUrl:"/assets/images/items/basic-triangle.svg",item:{textSlots:{body:{valign:"bottom",halign:"center"}},shapeProps:{skew:50}}},{group:"Basic Shapes",name:"Left Triangle",iconUrl:"/assets/images/items/basic-triangle-left.svg",item:{textSlots:{body:{valign:"bottom",halign:"center"}},shapeProps:{skew:0}}},{group:"Basic Shapes",name:"Right Triangle",iconUrl:"/assets/images/items/basic-triangle-right.svg",item:{textSlots:{body:{valign:"bottom",halign:"center"}},shapeProps:{skew:100}}}],args:{skew:{type:"number",value:50,min:0,max:100,name:"Skew (%)"}}}}},2291:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={group:"Basic Shapes",shapes:[{name:"Cloud",shapeConfig:{shapeType:"raw",pins:[],textSlots:[],items:[{type:"path",paths:[{points:[{t:"B",x:14.77777777777778,y:99.72727272727273,x1:20.511111111111102,y1:-.259090909090906,x2:-4.005555555555556,y2:-.8272727272727242},{t:"B",x:1.7499999999999998,y:83.04545454545455,x1:2.2777777777777777,y1:9.240909090909097,x2:-2.2777777777777777,y2:-9.240909090909097},{t:"B",x:4.611111111111112,y:54.04545454545455,x1:-3.386111111111111,y1:6.25,x2:3.3861111111111106,y2:-6.25},{t:"B",x:20.333333333333332,y:44.27272727272727,x1:-6.336111111111111,y1:-2.840909090909091,x2:-.1305555555555592,y2:-4.081818181818184},{t:"B",x:26,y:25.04545454545455,x1:-4.972222222222223,y1:5.295454545454541,x2:4.972222222222223,y2:-5.295454545454548},{t:"B",x:40.27777777777778,y:23.090909090909083,x1:-5.336111111111114,y1:-3.418181818181816,x2:1.7694444444444457,y2:-3.999999999999999},{t:"B",x:51,y:4.454545454545455,x1:-7.3555555555555605,y1:6.040909090909091,x2:7.3555555555555605,y2:-6.040909090909091},{t:"B",x:73.50000000000001,y:6.136363636363637,x1:-6.500000000000018,y1:-6.818181818181818,x2:6.50000000000001,y2:6.818181818181818},{t:"B",x:83.91666666666666,y:44,x1:1.0555555555555587,y1:-18.272727272727273,x2:2.388888888888895,y2:.8181818181818169},{t:"B",x:96.86111111111113,y:56.136363636363626,x1:-4.222222222222219,y1:-10.863636363636365,x2:4.222222222222219,y2:10.863636363636372},{t:"B",x:93.5277777777778,y:92.9090909090909,x1:5.91666666666667,y1:-6.681818181818176,x2:-5.91666666666667,y2:6.681818181818176},{t:"L",x:83.91666666666666,y:99.72727272727273}],closed:!0}],fillArg:"fill",strokeSize:1}],outlines:[{type:"path",paths:[{points:[{t:"B",x:14.777777777777779,y:99.72272727272727,x1:20.51111111111111,y1:-.259090909090906,x2:-4.005555555555556,y2:-.8272727272727242},{t:"B",x:1.7499999999999998,y:83.0409090909091,x1:2.2777777777777777,y1:9.240909090909083,x2:-2.2777777777777777,y2:-9.240909090909083},{t:"B",x:4.611111111111112,y:54.04090909090909,x1:-3.386111111111112,y1:6.249999999999994,x2:3.3861111111111106,y2:-6.25},{t:"B",x:20.333333333333332,y:44.268181818181816,x1:-6.3361111111111095,y1:-2.840909090909091,x2:-.13055555555555523,y2:-4.081818181818184},{t:"B",x:26,y:25.04090909090909,x1:-4.972222222222223,y1:5.295454545454548,x2:4.972222222222223,y2:-5.295454545454544},{t:"B",x:40.27777777777778,y:23.086363636363636,x1:-5.336111111111114,y1:-3.4181818181818198,x2:1.7694444444444457,y2:-4.000000000000002},{t:"B",x:51,y:4.449999999999999,x1:-7.355555555555553,y1:6.040909090909091,x2:7.355555555555553,y2:-6.040909090909091},{t:"B",x:73.50000000000001,y:6.131818181818181,x1:-6.50000000000001,y1:-6.818181818181818,x2:6.499999999999994,y2:6.818181818181818},{t:"B",x:83.91666666666666,y:43.99545454545454,x1:1.0555555555555587,y1:-18.272727272727273,x2:2.388888888888895,y2:.8181818181818169},{t:"B",x:96.86111111111113,y:56.13181818181818,x1:-4.222222222222219,y1:-10.86363636363636,x2:4.222222222222219,y2:10.86363636363636},{t:"B",x:93.5277777777778,y:92.90454545454546,x1:5.91666666666667,y1:-6.681818181818176,x2:-5.91666666666667,y2:6.681818181818176},{t:"L",x:83.91666666666666,y:99.72272727272727}],closed:!0}]}],id:"basic_cloud",menuItems:[{group:"Basic Shapes",name:"Cloud",iconUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNDIgMjUuNjY2NjY2NjY2NjY2NjY0IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNDJweCIgaGVpZ2h0PSIyNS42NjY2NjY2NjY2NjY2NjRweCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMywgMykiPjxwYXRoIGQ9Ik0gNS4zMiAxOS42MSBDIDMuODggMTkuNDUgMS40NSAxOC4xNSAwLjYzIDE2LjMzIEMgLTAuMTkgMTQuNTEgMC40NCAxMS44NiAxLjY2IDEwLjYzIEMgMi44OCA5LjQgNS4wNCA4LjE1IDcuMzIgOC43MSBDIDcuMjcgNy45IDcuNTcgNS45NyA5LjM2IDQuOTMgQyAxMS4xNSAzLjg4IDEyLjU4IDMuODcgMTQuNSA0LjU0IEMgMTUuMTQgMy43NSAxNS43MSAyLjA2IDE4LjM2IDAuODggQyAyMS4wMSAtMC4zMSAyNC4xMiAtMC4xMyAyNi40NiAxLjIxIEMgMjguOCAyLjU1IDMwLjU5IDUuMDYgMzAuMjEgOC42NSBDIDMxLjA3IDguODEgMzMuMzUgOC45IDM0Ljg3IDExLjA0IEMgMzYuMzkgMTMuMTggMzUuOCAxNi45NiAzMy42NyAxOC4yNyBRIDMxLjU0IDE5LjU5IDMwLjIxIDE5LjYxIFEgMTIuNyAxOS41NiA1LjMyIDE5LjYxICBaICIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMTExMTExIiBzdHJva2Utd2lkdGg9IjJweCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvZz48L3N2Zz4=",size:{w:80,h:48.9},previewArea:{x:0,y:0,w:150,h:91.7,r:0}}]}},{name:"Star",shapeConfig:{shapeType:"raw",pins:[],textSlots:[],items:[{type:"path",paths:[{points:[{t:"L",x:50,y:0},{t:"L",x:59.59,y:26.92},{t:"L",x:85.35000000000002,y:14.65},{t:"L",x:73.10000000000002,y:40.45},{t:"L",x:100,y:50},{t:"L",x:73.10000000000002,y:59.55},{t:"L",x:85.35000000000002,y:85.35},{t:"L",x:59.56,y:73.10000000000001},{t:"L",x:50,y:100},{t:"L",x:40.45000000000002,y:73.10000000000001},{t:"L",x:14.650000000000004,y:85.35},{t:"L",x:26.900000000000006,y:59.55},{t:"L",x:0,y:50},{t:"L",x:26.900000000000006,y:40.45},{t:"L",x:14.650000000000004,y:14.65},{t:"L",x:40.45000000000002,y:26.9}],closed:!0}],fillArg:"fill",strokeSize:1}],outlines:[{type:"path",paths:[{points:[{t:"L",x:50,y:0},{t:"L",x:59.59,y:26.92},{t:"L",x:85.35000000000002,y:14.65},{t:"L",x:73.10000000000002,y:40.45},{t:"L",x:100,y:50},{t:"L",x:73.10000000000002,y:59.55},{t:"L",x:85.35000000000002,y:85.35},{t:"L",x:59.56,y:73.10000000000001},{t:"L",x:50,y:100},{t:"L",x:40.45000000000002,y:73.10000000000001},{t:"L",x:14.650000000000004,y:85.35},{t:"L",x:26.900000000000006,y:59.55},{t:"L",x:0,y:50},{t:"L",x:26.900000000000006,y:40.45},{t:"L",x:14.650000000000004,y:14.65},{t:"L",x:40.45000000000002,y:26.9}],closed:!0}]}],id:"basic_star",menuItems:[{group:"Basic Shapes",name:"Star",iconUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMsIDMpIj48cGF0aCBkPSJNIDEzIDAgTCAxNS40OSA3IEwgMjIuMTkgMy44MSBMIDE5LjAxIDEwLjUyIEwgMjYgMTMgTCAxOS4wMSAxNS40OCBMIDIyLjE5IDIyLjE5IEwgMTUuNDkgMTkuMDEgTCAxMyAyNiBMIDEwLjUyIDE5LjAxIEwgMy44MSAyMi4xOSBMIDYuOTkgMTUuNDggTCAwIDEzIEwgNi45OSAxMC41MiBMIDMuODEgMy44MSBMIDEwLjUyIDYuOTkgTCAxMyAwICBaICIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMTExMTExIiBzdHJva2Utd2lkdGg9IjJweCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvZz48L3N2Zz4=",size:{w:80,h:80},previewArea:{x:0,y:0,w:150,h:150,r:0}}]}}],preview:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSItMTAgLTEwIDIyMCAxMjAiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIyMzBweCIgaGVpZ2h0PSIxMzBweCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwgMTUuNTU1NTU1NTU1NTU1NTU3KSI+PHBhdGggZD0iTSAxMS44MiA0OC43NiBDIDguNjIgNDguMzUgMy4yMiA0NS4xMiAxLjQgNDAuNiBDIC0wLjQyIDM2LjA4IDAuOTggMjkuNDggMy42OSAyNi40MiBDIDYuNCAyMy4zNyAxMS4yIDIwLjI2IDE2LjI3IDIxLjY0IEMgMTYuMTYgMTkuNjUgMTYuODIgMTQuODMgMjAuOCAxMi4yNCBDIDI0Ljc4IDkuNjYgMjcuOTUgOS42MiAzMi4yMiAxMS4yOSBDIDMzLjY0IDkuMzMgMzQuOTIgNS4xMyA0MC44IDIuMTggQyA0Ni42OCAtMC43OCA1My42IC0wLjMzIDU4LjggMyBDIDY0IDYuMzMgNjcuOTggMTIuNTggNjcuMTMgMjEuNTEgQyA2OS4wNCAyMS45MSA3NC4xMSAyMi4xMyA3Ny40OSAyNy40NCBDIDgwLjg3IDMyLjc2IDc5LjU2IDQyLjE2IDc0LjgyIDQ1LjQyIFEgNzAuMDkgNDguNjkgNjcuMTMgNDguNzYgUSAyOC4yMyA0OC42MyAxMS44MiA0OC43NiAgWiAiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzExMTExMSIgc3Ryb2tlLXdpZHRoPSIycHgiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAwLCAwKSI+PHBhdGggZD0iTSA0MCAwIEwgNDcuNjcgMjEuNTQgTCA2OC4yOCAxMS43MiBMIDU4LjQ4IDMyLjM2IEwgODAgNDAgTCA1OC40OCA0Ny42NCBMIDY4LjI4IDY4LjI4IEwgNDcuNjUgNTguNDggTCA0MCA4MCBMIDMyLjM2IDU4LjQ4IEwgMTEuNzIgNjguMjggTCAyMS41MiA0Ny42NCBMIDAgNDAgTCAyMS41MiAzMi4zNiBMIDExLjcyIDExLjcyIEwgMzIuMzYgMjEuNTIgTCA0MCAwICBaICIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMTExMTExIiBzdHJva2Utd2lkdGg9IjJweCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvZz48L3N2Zz4="}},9078:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(3590),r=n(9498);function s(e){return i.Z.clamp(i.Z.roundPrecise1(Math.max(e.shapeProps.headerHeight,e.shapeProps.cornerRadius)),0,e.area.h)}function o(e,t){return i.Z.clamp(i.Z.roundPrecise1((e.area.h-t)*Math.max(e.shapeProps.sectionRatio,10)/100+t),0,e.area.h)}const a={shapeConfig:{shapeType:"standard",id:"uml_class",menuItems:[{group:"UML",name:"Class",iconUrl:"/assets/images/items/uml-class.svg",item:{textSlots:{title:{text:"<b>Class</b>",fontSize:16,halign:"center",valign:"middle",paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0},section1:{text:"",fontSize:14,font:"Courier New",halign:"left",valign:"top",paddingLeft:5,paddingTop:5,paddingRight:5,paddingBottom:5},section2:{text:"",fontSize:14,font:"Courier New",halign:"left",valign:"top",paddingLeft:5,paddingTop:5,paddingRight:5,paddingBottom:5}}},size:{w:140,h:100}}],getPins:e=>(0,r.F)(e),computePath(e){const t=e.area.w,n=e.area.h,i=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4),r=s(e);return`M ${t-i} ${n}  L ${i} ${n} a ${i} ${i} 0 0 1 ${-i} ${-i}  L 0 ${i}  a ${i} ${i} 0 0 1 ${i} ${-i}  L ${t-i} 0   a ${i} ${i} 0 0 1 ${i} ${i}  L ${t} ${n-i}   a ${i} ${i} 0 0 1 ${-i} ${i} ZM 0 ${r} l ${t} 0M 0 ${o(e,r)} l ${t} 0`},computeOutline(e){const t=e.area.w,n=e.area.h,i=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4);return`M ${t-i} ${n}  L ${i} ${n} a ${i} ${i} 0 0 1 ${-i} ${-i}  L 0 ${i}  a ${i} ${i} 0 0 1 ${i} ${-i}  L ${t-i} 0   a ${i} ${i} 0 0 1 ${i} ${i}  L ${t} ${n-i}   a ${i} ${i} 0 0 1 ${-i} ${i} Z`},getTextSlots(e){const t=s(e),n=o(e,t);return[{name:"title",area:{x:0,y:0,w:e.area.w,h:t}},{name:"section1",area:{x:0,y:t,w:e.area.w,h:n-t}},{name:"section2",area:{x:0,y:n,w:e.area.w,h:e.area.h-n}}]},controlPoints:{make:e=>({sectionRatio:{x:e.area.w/2,y:o(e,s(e))},headerHeight:{x:e.area.w/2,y:e.shapeProps.headerHeight},cornerRadius:{x:e.area.w-e.shapeProps.cornerRadius,y:0}}),handleDrag(e,t,n,r,o,a){if("headerHeight"===t)e.shapeProps.headerHeight=i.Z.clamp(i.Z.roundPrecise1(r+a),0,e.area.h);else if("cornerRadius"===t)e.shapeProps.cornerRadius=i.Z.clamp(i.Z.roundPrecise1(e.area.w-n-o),0,Math.min(e.area.w/4,e.area.h/4));else if("sectionRatio"===t){const t=s(e),n=Math.max(0,e.area.h-t);n>0&&(e.shapeProps.sectionRatio=i.Z.clamp(i.Z.roundPrecise1(100*Math.max(0,r+a-t)/n),0,100))}}},args:{cornerRadius:{type:"number",value:"0",name:"Corner radius"},headerHeight:{type:"number",value:30,name:"Header Height"},sectionRatio:{type:"number",value:50,name:"Section Ratio (%)",min:0,max:100}}}}},2517:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(3590),r=n(9498);const s={shapeConfig:{shapeType:"standard",id:"uml_database",menuItems:[{group:"UML",name:"Database",iconUrl:"/assets/images/items/uml-database.svg",size:{w:100,h:130}}],computePath(e){const t=e.area.w,n=e.area.h,r=i.Z.clamp(e.shapeProps.skew,0,e.area.h/3),s=r/2,o=e.area.w/4,a=t/2;return`M ${t} ${r} L ${t} ${n-r} C ${t} ${n-s}  ${t-o} ${n} ${a} ${n} C ${o} ${n} 0 ${n-s} 0 ${n-r} L 0 ${r}C 0 ${s} ${o} 0 ${a} 0  C ${t-o} 0 ${t} ${s} ${t} ${r}C ${t} ${r+s} ${t-o} ${2*r} ${a} ${2*r} C ${o} ${2*r} 0 ${r+s} 0 ${r}`},getPins:e=>(0,r.F)(e),computeOutline(e){const t=e.area.w,n=e.area.h,r=i.Z.clamp(e.shapeProps.skew,0,e.area.h/3),s=r/2,o=e.area.w/4,a=t/2;return`M ${t} ${r} L ${t} ${n-r} C ${t} ${n-s}  ${t-o} ${n} ${a} ${n} C ${o} ${n} 0 ${n-s} 0 ${n-r} L 0 ${r}C 0 ${s} ${o} 0 ${a} 0  C ${t-o} 0 ${t} ${s} ${t} ${r}`},controlPoints:{make:e=>({skew:{x:e.area.w/2,y:2*i.Z.clamp(e.shapeProps.skew,0,e.area.h/3)}}),handleDrag(e,t,n,r,s,o){"skew"===t&&(e.shapeProps.skew=i.Z.clamp((r+o)/2,0,e.area.h/3))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},4437:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(3590),r=n(9498);const s={shapeConfig:{shapeType:"standard",id:"uml_dataflow",menuItems:[{group:"UML",name:"Data Flow",iconUrl:"/assets/images/items/uml-dataflow.svg"}],getPins:e=>(0,r.F)(e),computePath(e){const t=e.area.w,n=e.area.h,r=i.Z.clamp(e.shapeProps.skew,0,e.area.w/3),s=e.area.h/4,o=n/2;return`M ${t-r} ${n} L ${r} ${n}  Q 0 ${n-s} 0 ${o}  Q 0 ${s} ${r} 0 L ${t-r} 0 Q ${t} ${s} ${t} ${o} Q ${t} ${n-s} ${t-r} ${n} Q ${t-2*r} ${n-s} ${t-2*r} ${o} Q ${t-2*r} ${s} ${t-r} 0`},computeOutline(e){const t=e.area.w,n=e.area.h,r=i.Z.clamp(e.shapeProps.skew,0,e.area.w/3),s=e.area.h/4,o=n/2;return`M ${t-r} ${n} L ${r} ${n}  Q 0 ${n-s} 0 ${o}  Q 0 ${s} ${r} 0 L ${t-r} 0 Q ${t} ${s} ${t} ${o} Q ${t} ${n-s} ${t-r} ${n}`},controlPoints:{make:e=>({skew:{x:e.area.w-2*i.Z.clamp(e.shapeProps.skew,0,e.area.w/3),y:e.area.h/2}}),handleDrag(e,t,n,r,s,o){"skew"===t&&(e.shapeProps.skew=i.Z.clamp((e.area.w-n-s)/2,0,e.area.w/3))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},4387:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(3590),r=n(9498);const s={shapeConfig:{shapeType:"standard",id:"uml_delay",menuItems:[{group:"UML",name:"Delay",iconUrl:"/assets/images/items/uml-delay.svg"}],getPins:e=>(0,r.F)(e),computePath:e=>function(e){const t=e.area.w,n=e.area.h,r=e.area.h/2,s=i.Z.clamp(t-r,0);return`M 0 0 L ${s} 0 A ${Math.min(r,t-s)} ${r} 0 0 1 ${s} ${n} L 0 ${n} Z`}(e),args:{}}}},9880:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={shapeConfig:{shapeType:"standard",id:"uml_document",menuItems:[{group:"UML",name:"Document",iconUrl:"/assets/images/items/uml-document.svg",size:{w:140,h:100}}],getPins(e){const t=e.area.h/8,n=e.area.w,i=e.area.h-t;return[{x:n/2,y:i/2},{x:n/2,y:0,nx:0,ny:-1},{x:n/2,y:i,nx:0,ny:1},{x:0,y:i/2,nx:-1,ny:0},{x:n,y:i/2,nx:1,ny:0}]},computePath:e=>function(e){const t=e.area.h/8,n=e.area.w,i=e.area.h-t,r=i/2;return`M 0 0 L ${n} 0 L ${n} ${i} C ${n/2} ${i-r} ${n/2} ${i+r} 0 ${i} Z`}(e),args:{}}}},3652:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(3590);function r(e){const t=e.area.w,n=e.area.h,r=i.Z.clamp(e.shapeProps.skew,0,t/2);return`M ${r} 0 L ${t} 0 L ${t-r} ${n} L 0 ${n} Z`}const s={shapeConfig:{shapeType:"standard",id:"uml_input",menuItems:[{group:"UML",name:"Input/Output",iconUrl:"/assets/images/items/uml-input.svg",size:{w:140,h:100}}],getPins(e){const t=e.area.w,n=e.area.h,r=i.Z.clamp(e.shapeProps.skew,0,e.area.w/2);return[{x:t/2,y:n/2},{x:t/2,y:0,nx:0,ny:-1},{x:t/2,y:n,nx:0,ny:1},{x:r/2,y:n/2,nx:-1,ny:0},{x:t-r/2,y:n/2,nx:1,ny:0}]},computePath:e=>r(e),computeOutline:e=>r(e),controlPoints:{make:e=>({skew:{x:i.Z.clamp(e.shapeProps.skew,0,e.area.w/2),y:0}}),handleDrag(e,t,n,r,s,o){"skew"===t&&(e.shapeProps.skew=i.Z.clamp(n+s,0,e.area.w/2))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},7569:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(3590),r=n(9498);const s={shapeConfig:{shapeType:"standard",id:"uml_loop_limit",menuItems:[{group:"UML",name:"Loop Limit",iconUrl:"/assets/images/items/uml-loop-limit.svg"}],getPins:e=>(0,r.F)(e),computePath:e=>function(e){const t=e.area.w,n=e.area.h,r=i.Z.clamp(e.shapeProps.skew,0,Math.min(t/4,n/2));return`M ${r} 0 L ${t-r} 0 L ${t} ${r} L ${t} ${n} L 0 ${n} L 0 ${r} Z`}(e),controlPoints:{make:e=>({skew:{x:e.area.w-i.Z.clamp(e.shapeProps.skew,0,Math.min(e.area.w/4,e.area.h/2)),y:0}}),handleDrag(e,t,n,r,s,o){"skew"===t&&(e.shapeProps.skew=i.Z.clamp(e.area.w-n-s,0,Math.min(e.area.w/4,e.area.h/2)))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},1533:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(3590);const r={shapeConfig:{shapeType:"standard",id:"uml_module",menuItems:[{group:"UML",name:"Module",iconUrl:"/assets/images/items/uml-module.svg",item:{textSlots:{title:{text:"<b>Module</b>",halign:"center"},body:{text:"",halign:"left"}}},size:{w:140,h:100}}],controlPoints:{make:e=>({brick:{x:Math.min(e.shapeProps.brickWidth,e.area.w/2),y:4*i.Z.clamp(e.shapeProps.brickHeight,0,e.area.h)}}),handleDrag(e,t,n,r,s,o){"brick"===t&&(e.shapeProps.brickWidth=i.Z.clamp(n+s,0,e.area.w/2),e.shapeProps.brickHeight=i.Z.clamp((r+o)/4,0,e.area.h/4))}},getPins(e){const t=Math.min(e.shapeProps.brickWidth,e.area.w/2)/2,n=e.area.w,i=e.area.h,r=e.area.w-t;return[{x:t+r/2,y:i/2},{x:t+r/2,y:0,nx:0,ny:-1},{x:t+r/2,y:i,nx:0,ny:1},{x:t,y:i/2,nx:-1,ny:0},{x:n,y:i/2,nx:1,ny:0}]},computePath(e){const t=e.area.w,n=e.area.h,i=Math.min(e.shapeProps.brickWidth,e.area.w/2),r=Math.min(e.shapeProps.brickHeight,e.area.h/4),s=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4,r,i);return`M ${t-s} ${n}  L ${i/2+s} ${n} a ${s} ${s} 0 0 1 ${-s} ${-s} L ${i/2} ${4*r} L ${i} ${4*r} L ${i} ${3*r} L ${i/2} ${3*r} L ${i/2} ${2*r} L ${i} ${2*r} L ${i} ${r} L ${i/2} ${r} L ${i/2} ${s}a ${s} ${s} 0 0 1 ${s} ${-s}   L ${t-s} 0   a ${s} ${s} 0 0 1 ${s} ${s}  L ${t} ${n-s}   a ${s} ${s} 0 0 1 ${-s} ${s} ZM 0 ${r} l ${i} 0  l 0 ${r} l ${-i} 0 ZM 0 ${3*r} l ${i} 0  l 0 ${r} l ${-i} 0 Z`},computeOutline(e){const t=e.area.w,n=e.area.h,i=Math.min(e.shapeProps.brickWidth,e.area.w/2),r=Math.min(e.shapeProps.brickHeight,e.area.h/4),s=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4,r,i);return`M ${t-s} ${n}  L ${i/2+s} ${n} a ${s} ${s} 0 0 1 ${-s} ${-s} L ${i/2} ${4*r} L 0 ${4*r} L 0 ${3*r} L ${i/2} ${3*r} L ${i/2} ${2*r} L 0 ${2*r} L 0 ${r} L ${i/2} ${r} L ${i/2} ${s}a ${s} ${s} 0 0 1 ${s} ${-s}   L ${t-s} 0   a ${s} ${s} 0 0 1 ${s} ${s}  L ${t} ${n-s}   a ${s} ${s} 0 0 1 ${-s} ${s} Z`},getTextSlots(e){const t=Math.max(e.shapeProps.brickWidth,0);return[{name:"body",area:{x:t,y:0,w:Math.max(0,e.area.w-t),h:e.area.h}}]},args:{cornerRadius:{type:"number",value:"0",name:"Corner radius"},brickWidth:{type:"number",value:"70",name:"Brick Width"},brickHeight:{type:"number",value:"20",name:"Brick Height"}}}}},5906:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(3590),r=n(9498);const s=e=>{let t=e.shapeProps.depth;const n=Math.min(e.area.w,e.area.h)/2;return t>n&&(t=n),t},o={shapeConfig:{shapeType:"standard",id:"uml_node",menuItems:[{group:"UML",name:"Node",iconUrl:"/assets/images/items/uml-node.svg",size:{w:140,h:100}}],controlPoints:{make(e){const t=s(e);return{depth:{x:i.Z.clamp(e.area.w-t,0,e.area.w),y:i.Z.clamp(t,0,e.area.h)}}},handleDrag(e,t,n,r,s,o){"depth"===t&&(e.shapeProps.depth=i.Z.clamp(r+o,0,Math.min(e.area.w,e.area.h)/2))}},getPins:e=>(0,r.F)(e),getTextSlots(e){const t=s(e);return[{name:"body",area:{x:0,y:t,w:e.area.w-t,h:e.area.h-t}}]},computePath(e){const t=e.area.w,n=e.area.h,i=s(e);return`M 0 ${i}  L ${t-i} ${i}  L ${t-i} ${n} L 0 ${n} ZM 0 ${i} L ${i} 0 L ${t} 0 L ${t-i} ${i} ZM ${t-i} ${i} L ${t} 0 L ${t} ${n-i} L ${t-i} ${n} Z`},computeOutline(e){const t=e.area.w,n=e.area.h,i=s(e);return`M 0 ${i}  L ${i} 0  L ${t} 0  L ${t} ${n-i} L ${t-i} ${n} L 0 ${n} Z`},args:{depth:{type:"number",value:20,name:"Depth"}}}}},6852:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(3590),r=n(9498);const s={shapeConfig:{shapeType:"standard",id:"uml_note",menuItems:[{group:"UML",name:"Note",iconUrl:"/assets/images/items/uml-note.svg"}],getPins:e=>(0,r.F)(e),computePath:e=>function(e){const t=e.area.w,n=e.area.h,r=i.Z.clamp(e.shapeProps.skew,0,Math.min(t/2,n/2));return`M ${t} ${r} L ${t} ${n} L 0 ${n} L 0 0 L ${t-r} 0 L ${t} ${r} L ${t-r} ${r} L ${t-r} 0`}(e),computeOutline:e=>function(e){const t=e.area.w,n=e.area.h,r=i.Z.clamp(e.shapeProps.skew,0,Math.min(t/2,n/2));return`M ${t} ${r} L ${t} ${n} L 0 ${n} L 0 0 L ${t-r} 0 Z`}(e),controlPoints:{make(e){const t=i.Z.clamp(e.shapeProps.skew,0,Math.min(e.area.w/2,e.area.h/2));return{skew:{x:e.area.w-t,y:t}}},handleDrag(e,t,n,r,s,o){const a=e.area.w-n-s,l=r+o;"skew"===t&&(e.shapeProps.skew=i.Z.clamp(Math.max(a,l),0,Math.min(e.area.w/2,e.area.h/2)))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},8733:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(3590),r=n(9498);const s={shapeConfig:{shapeType:"standard",id:"uml_object",menuItems:[{group:"UML",name:"Object",iconUrl:"/assets/images/items/uml-object.svg",item:{textSlots:{title:{text:"<b>Object</b>",fontSize:16,halign:"center",valign:"middle",paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0},body:{text:"",fontSize:14,font:"Courier New",halign:"left",valign:"top",paddingLeft:5,paddingTop:5,paddingRight:5,paddingBottom:5}}},size:{w:140,h:100}}],getPins:e=>(0,r.F)(e),computePath(e){const t=e.area.w,n=e.area.h,i=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4);return`M ${t-i} ${n}  L ${i} ${n} a ${i} ${i} 0 0 1 ${-i} ${-i}  L 0 ${i}  a ${i} ${i} 0 0 1 ${i} ${-i}  L ${t-i} 0   a ${i} ${i} 0 0 1 ${i} ${i}  L ${t} ${n-i}   a ${i} ${i} 0 0 1 ${-i} ${i} ZM 0 ${Math.min(e.area.h,Math.max(e.shapeProps.headerHeight,e.shapeProps.cornerRadius))} l ${t} 0`},computeOutline(e){const t=e.area.w,n=e.area.h,i=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4);return`M ${t-i} ${n}  L ${i} ${n} a ${i} ${i} 0 0 1 ${-i} ${-i}  L 0 ${i}  a ${i} ${i} 0 0 1 ${i} ${-i}  L ${t-i} 0   a ${i} ${i} 0 0 1 ${i} ${i}  L ${t} ${n-i}   a ${i} ${i} 0 0 1 ${-i} ${i} Z`},getTextSlots:e=>[{name:"title",area:{x:0,y:0,w:e.area.w,h:e.shapeProps.headerHeight}},{name:"body",area:{x:0,y:e.shapeProps.headerHeight,w:e.area.w,h:Math.max(10,e.area.h-e.shapeProps.headerHeight)}}],controlPoints:{make:e=>({headerHeight:{x:e.area.w/2,y:e.shapeProps.headerHeight},cornerRadius:{x:e.area.w-e.shapeProps.cornerRadius,y:0}}),handleDrag(e,t,n,r,s,o){"headerHeight"===t?e.shapeProps.headerHeight=i.Z.clamp(r+o,0,e.area.h):"cornerRadius"===t&&(e.shapeProps.cornerRadius=i.Z.clamp(e.area.w-n-s,0,Math.min(e.area.w/4,e.area.h/4)))}},args:{cornerRadius:{type:"number",value:"0",name:"Corner radius"},headerHeight:{type:"number",value:30,name:"Header Height"}}}}},5845:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(3590);const r={shapeConfig:{shapeType:"standard",id:"uml_package",menuItems:[{group:"UML",name:"Package",iconUrl:"/assets/images/items/uml-package.svg",size:{w:140,h:100}}],controlPoints:{make:e=>({brick:{x:Math.min(e.shapeProps.brickWidth,e.area.w/2),y:i.Z.clamp(e.shapeProps.brickHeight,0,e.area.h/2)}}),handleDrag(e,t,n,r,s,o){"brick"===t&&(e.shapeProps.brickWidth=i.Z.clamp(n+s,0,e.area.w/2),e.shapeProps.brickHeight=i.Z.clamp(r+o,0,e.area.h/2))}},getPins(e){const t=e.area.w,n=e.area.h,i=Math.min(Math.max(0,e.shapeProps.brickHeight),e.area.h/2),r=n-i;return[{x:t/2,y:i+r/2},{x:t/2,y:i,nx:0,ny:-1},{x:t/2,y:n,nx:0,ny:1},{x:0,y:i+r/2,nx:-1,ny:0},{x:t,y:i+r/2,nx:1,ny:0}]},computePath(e){const t=e.area.w,n=e.area.h,i=Math.min(Math.max(0,e.shapeProps.brickWidth),e.area.w/2),r=Math.min(Math.max(0,e.shapeProps.brickHeight),e.area.h/2);return`M 0 0  L ${i} 0 L ${i} ${r} L 0 ${r} ZM 0 ${r} L ${t} ${r} L ${t} ${n} L 0 ${n} Z`},computeOutline(e){const t=e.area.w,n=e.area.h,i=Math.min(Math.max(0,e.shapeProps.brickWidth),e.area.w/2),r=Math.min(Math.max(0,e.shapeProps.brickHeight),e.area.h/2);return`M 0 0  L ${i} 0 L ${i} ${r}  L ${t} ${r} L ${t} ${n} L 0 ${n} Z`},args:{brickWidth:{type:"number",value:60,name:"Brick width",min:0},brickHeight:{type:"number",value:20,name:"Brick height",min:0}}}}},4358:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(3590),r=n(9498);const s={shapeConfig:{shapeType:"standard",id:"uml_preparation",menuItems:[{group:"UML",name:"Preparation",iconUrl:"/assets/images/items/uml-preparation.svg"}],getPins:e=>(0,r.F)(e),computePath:e=>function(e){const t=e.area.w,n=e.area.h,r=i.Z.clamp(e.shapeProps.skew,0,t/3),s=n/2;return`M ${r} 0 L ${t-r} 0 L ${t} ${s} L ${t-r} ${n} L ${r} ${n} L 0 ${s} Z`}(e),controlPoints:{make:e=>({skew:{x:e.area.w-i.Z.clamp(e.shapeProps.skew,0,e.area.w/3),y:0}}),handleDrag(e,t,n,r,s,o){"skew"===t&&(e.shapeProps.skew=i.Z.clamp(e.area.w-n-s,0,e.area.w/3))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},1693:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(3590),r=n(9498);const s={shapeConfig:{shapeType:"standard",id:"uml_process",menuItems:[{group:"UML",name:"Process",iconUrl:"/assets/images/items/uml-process.svg"}],getPins:e=>(0,r.F)(e),computePath:e=>function(e){const t=e.area.w,n=e.area.h,r=i.Z.clamp(e.shapeProps.skew,0,t/4);return`M 0 0 L ${t} 0 L ${t} ${n} L 0 ${n} Z  M ${r} 0 L ${r} ${n} M ${t-r} 0 L ${t-r} ${n}`}(e),computeOutline:e=>function(e){const t=e.area.w,n=e.area.h;return`M 0 0 L ${t} 0 L ${t} ${n} L 0 ${n} Z`}(e),controlPoints:{make:e=>({skew:{x:e.area.w-i.Z.clamp(e.shapeProps.skew,0,e.area.w/4),y:0}}),handleDrag(e,t,n,r,s,o){"skew"===t&&(e.shapeProps.skew=i.Z.clamp(e.area.w-n-s,0,e.area.w/4))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},8396:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(3590);function r(e){const t=e.area.w,n=e.area.h;return`M 0 0 L ${t} 0 L ${t} ${n} L 0 ${n} L ${i.Z.clamp(n/2,0,t)} ${n/2} Z`}const s={shapeConfig:{shapeType:"standard",id:"uml_receive_signal",menuItems:[{group:"UML",name:"Receive Signal",iconUrl:"/assets/images/items/uml-receive-signal.svg"}],getPins(e){const t=e.area.w,n=e.area.h;return[{x:t/2,y:n/2},{x:t/2,y:0,nx:0,ny:-1},{x:t/2,y:n,nx:0,ny:1},{x:i.Z.clamp(n/2,0,t),y:n/2,nx:-1,ny:0},{x:t,y:n/2,nx:1,ny:0}]},computePath:e=>r(e),computeOutline:e=>r(e),args:{}}}},7153:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(3590),r=n(9498);function s(e){const t=e.area.w,n=e.area.h,r=i.Z.clamp(n/2,0,t);return`M 0 0 L ${t-r} 0 L ${t} ${n/2} L ${t-r} ${n} L 0 ${n} Z`}const o={shapeConfig:{shapeType:"standard",id:"uml_send_signal",menuItems:[{group:"UML",name:"Send Signal",iconUrl:"/assets/images/items/uml-send-signal.svg"}],getPins:e=>(0,r.F)(e),computePath:e=>s(e),computeOutline:e=>s(e),args:{}}}},9699:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(9498);function r(e){const t=e.area.w,n=e.area.h,i=Math.min(t,n)/2;return`M ${i} 0 L ${t-i} 0 A ${i} ${i} 0 0 1 ${t-i} ${n} L ${i} ${n} A ${i} ${i} 0 0 1 ${i} 0 Z`}const s={shapeConfig:{shapeType:"standard",id:"uml_start",menuItems:[{group:"UML",name:"Start/End",iconUrl:"/assets/images/items/uml-start.svg"}],getPins:e=>(0,i.F)(e),computePath:e=>r(e),computeOutline:e=>r(e),args:{}}}},3486:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(3590);function r(e){const t=e.area.w,n=e.area.h,r=i.Z.clamp(e.shapeProps.skew,0,e.area.w/3),s=e.area.h/4,o=n/2;return`M ${t} ${n} L ${r} ${n}  Q 0 ${n-s} 0 ${o}  Q 0 ${s} ${r} 0 L ${t} 0 Q ${t-r} ${s} ${t-r} ${o} Q ${t-r} ${n-s} ${t} ${n} Z`}const s={shapeConfig:{shapeType:"standard",id:"uml_storage",menuItems:[{group:"UML",name:"Storage",iconUrl:"/assets/images/items/uml-storage.svg"}],getPins(e){const t=e.area.w,n=e.area.h;return[{x:t/2,y:n/2},{x:t/2,y:0,nx:0,ny:-1},{x:t/2,y:n,nx:0,ny:1},{x:0,y:n/2,nx:-1,ny:0},{x:t-i.Z.clamp(e.shapeProps.skew,0,e.area.w/3),y:n/2,nx:1,ny:0}]},computePath:e=>r(e),computeOutline:e=>r(e),controlPoints:{make:e=>({skew:{x:e.area.w-i.Z.clamp(e.shapeProps.skew,0,e.area.w/3),y:e.area.h/2}}),handleDrag(e,t,n,r,s,o){"skew"===t&&(e.shapeProps.skew=i.Z.clamp(e.area.w-n-s,0,e.area.w/3))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},5576:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(3590),r=n(9825),s=n(1377);function o(e){return e.shapeProps.vertical?e.area.w:e.area.h}function a(e){return e.shapeProps.vertical?e.area.h:e.area.w}function l(e){return`M 0 0 L ${e.area.w} 0 L ${e.area.w} ${e.area.h} L 0 ${e.area.h} Z`}function c(e,t){let n=0;for(let i=1;i<=t;i++)n+=e.shapeProps[`colw${i}`]*o(e)/100;return e.shapeProps.vertical?{x:i.Z.clamp(n,0,o(e)),y:0}:{x:0,y:i.Z.clamp(n,0,o(e))}}const h={shapeConfig:{shapeType:"standard",id:"uml_swim_lane",menuItems:[{group:"UML",name:"Swim Lane",iconUrl:"/assets/images/items/uml-swim-lane.svg",item:{shapeProps:{columns:3,colw1:33.33333,colw2:33.33333,colw3:33.33333},textSlots:{col1:{text:"<b>Todo</b>"},col2:{text:"<b>In Progress</b>"},col3:{text:"<b>Done</b>"}}},previewArea:{x:5,y:5,w:250,h:100},size:{w:800,h:400}},{group:"UML",name:"Swim Lane (Horizontal)",iconUrl:"/assets/images/items/uml-swim-lane-horizontal.svg",item:{shapeProps:{columns:3,vertical:!1,headerHeight:110,colw1:33.33333,colw2:33.33333,colw3:33.33333},textSlots:{col1:{text:"<b>Todo</b>"},col2:{text:"<b>In Progress</b>"},col3:{text:"<b>Done</b>"}}},previewArea:{x:5,y:5,w:250,h:100},size:{w:800,h:400}}],computeCurves:function(e){const t=i.Z.clamp(e.shapeProps.headerHeight,0,a(e));let n="";n=e.shapeProps.vertical?`M 0 ${t} L ${e.area.w} ${t}`:`M ${t} 0 L ${t} ${e.area.h}`;const s=[{path:l(e),fill:r.Z.computeStandardFill(e),strokeColor:e.shapeProps.strokeColor,strokeSize:e.shapeProps.strokeSize},{path:n,fill:"none",strokeColor:e.shapeProps.strokeColor,strokeSize:e.shapeProps.strokeSize}];let c=0;for(let t=1;t<e.shapeProps.columns;t++){let n=i.Z.clamp(c+Math.abs(e.shapeProps[`colw${t}`]),0,100);const r=n*o(e)/100;let l="";l=e.shapeProps.vertical?`M ${r} 0 L ${r} ${a(e)}`:`M 0 ${r} L ${a(e)} ${r}`,s.push({path:l,fill:"none",strokeColor:e.shapeProps.strokeColor,strokeSize:e.shapeProps.strokeSize}),c=n}return s},computeOutline:l,getTextSlots:function(e){const t=[],n=o(e);let r=0,s=0;for(let o=1;o<=e.shapeProps.columns;o++){let a=i.Z.clamp(r+Math.abs(e.shapeProps[`colw${o}`]),0,100);const l=a*n/100;let c=l-s;o===e.shapeProps.columns&&(c=n-s),e.shapeProps.vertical?t.push({name:`col${o}`,area:{x:s,y:0,w:c,h:e.shapeProps.headerHeight}}):t.push({name:`col${o}`,area:{x:0,y:s,w:e.shapeProps.headerHeight,h:c}}),r=a,s=l}return t},beforeCreate(e,t){const n=i.Z.clamp(t.shapeProps.columns,1,12),r=100/n;for(let e=0;e<n;e++)t.shapeProps[`colw${e}`]=r},controlPoints:{make(e){const t={};e.shapeProps.vertical?t.headerHeight={x:0,y:i.Z.clamp(e.shapeProps.headerHeight,0,e.area.h)}:t.headerHeight={x:i.Z.clamp(e.shapeProps.headerHeight,0,e.area.w),y:0};for(let n=e.shapeProps.columns-1;n>0;n--)t[`colw${n}`]=c(e,n);return t},handleDrag(e,t,n,r,s,l){if(0===t.indexOf("colw")){let a=n+s;e.shapeProps.vertical||(a=r+l);const c=o(e),h=Math.max(1,e.shapeProps.columns);if(i.Z.tooSmall(c))return;const d=parseInt(t.substr(4));let u=0;for(let t=1;t<d;t++)u+=e.shapeProps[`colw${t}`]*c/100;const p=Math.max(0,a-u),m=5/h,f=100-5/h;e.shapeProps[`colw${d}`]=i.Z.clamp(100*p/c,m,f)}else if("headerHeight"===t){let t=r+l;e.shapeProps.vertical||(t=n+s),e.shapeProps.headerHeight=i.Z.clamp(t,0,a(e))}}},args:{columns:{type:"number",value:3,name:"Columns",min:1,max:12,onUpdate:function(e,t,n,r){const a=[];let l=0,c=o(t);for(let e=1;e<r;e++){const n=t.shapeProps[`colw${e}`]*c/100;a.push(n),l+=n}if(n>r&&n>1&&!i.Z.tooSmall(c)){const e=c/(n-1);t.shapeProps.vertical?t.area.w+=e:t.area.h+=e,c=o(t),t.shapeProps["colw"+(n-1)]=100*e/c;for(let e=1;e<r;e++)t.shapeProps[`colw${e}`]=100*a[e-1]/c;t.textSlots[`col${n}`]||(t.textSlots[`col${n}`]={text:`<b>Title ${n}</b>`},(0,s.q4)(t.textSlots[`col${n}`]))}if(n<r&&n>0&&!i.Z.tooSmall(c)&&(t.shapeProps.vertical?t.area.w=l:t.area.h=l,c=o(t),!i.Z.tooSmall(c)))for(let e=1;e<n;e++)t.shapeProps[`colw${e}`]=100*a[e-1]/c}},headerHeight:{type:"number",value:50,name:"Header Height",min:0,hidden:!0},vertical:{type:"boolean",value:!0,name:"Vertical"},colw1:{type:"number",value:20,name:"Column Width 1",min:0,max:100,hidden:!0},colw2:{type:"number",value:20,name:"Column Width 2",min:0,max:100,hidden:!0},colw3:{type:"number",value:20,name:"Column Width 3",min:0,max:100,hidden:!0},colw4:{type:"number",value:20,name:"Column Width 4",min:0,max:100,hidden:!0},colw5:{type:"number",value:20,name:"Column Width 5",min:0,max:100,hidden:!0},colw6:{type:"number",value:20,name:"Column Width 6",min:0,max:100,hidden:!0},colw7:{type:"number",value:20,name:"Column Width 7",min:0,max:100,hidden:!0},colw8:{type:"number",value:20,name:"Column Width 8",min:0,max:100,hidden:!0},colw9:{type:"number",value:20,name:"Column Width 9",min:0,max:100,hidden:!0},colw10:{type:"number",value:20,name:"Column Width 10",min:0,max:100,hidden:!0},colw11:{type:"number",value:20,name:"Column Width 11",min:0,max:100,hidden:!0},colw12:{type:"number",value:20,name:"Column Width 12",min:0,max:100,hidden:!0}}}}},5635:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(3086);function r(e){return{color:e.color,"font-size":e.fontSize+"px","font-family":(0,i.It)(e.font),"padding-left":e.paddingLeft+"px","padding-right":e.paddingRight+"px","padding-top":e.paddingTop+"px","padding-bottom":e.paddingBottom+"px","text-align":e.halign,"vertical-align":e.valign,"white-space":e.whiteSpace,display:"table-cell","box-sizing":"border-box"}}},8442:(e,t,n)=>{"use strict";n.d(t,{R:()=>s,W:()=>a});var i=n(894),r=n.n(i);const s={ESCAPE:"escape",DELETE:"delete",CTRL_A:"ctrl-a",CTRL_C:"ctrl-c",CTRL_V:"ctrl-v",CTRL_S:"ctrl-s",CTRL_Z:"ctrl-z",CTRL_SHIFT_Z:"ctrl-shift-z",UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",SPACE:"space",MINUS:"minus",EQUALS:"equals"},o={};function a(e){return r()(o,((t,n)=>t(e)))}o[s.ESCAPE]=e=>"Escape"===e.key||"Esc"===e.key||27===e.keyCode,o[s.DELETE]=e=>"Backspace"===e.key||"Delete"===e.key||8===e.keyCode||127===e.keyCode,o[s.CTRL_A]=e=>"a"===e.key&&(e.metaKey||e.ctrlKey),o[s.CTRL_C]=e=>"c"===e.key&&(e.metaKey||e.ctrlKey),o[s.CTRL_V]=e=>"v"===e.key&&(e.metaKey||e.ctrlKey),o[s.CTRL_S]=e=>"s"===e.key&&(e.metaKey||e.ctrlKey),o[s.CTRL_Z]=e=>"z"===e.key&&(e.metaKey||e.ctrlKey)&&!e.shiftKey,o[s.CTRL_SHIFT_Z]=e=>"z"===e.key&&(e.metaKey||e.ctrlKey)&&e.shiftKey,o[s.LEFT]=e=>"ArrowLeft"===e.key,o[s.RIGHT]=e=>"ArrowRight"===e.key,o[s.UP]=e=>"ArrowUp"===e.key,o[s.DOWN]=e=>"ArrowDown"===e.key,o[s.SPACE]=e=>" "===e.key||32===e.keyCode,o[s.MINUS]=e=>"-"===e.key||189===e.keyCode,o[s.EQUALS]=e=>"="===e.key||187===e.keyCode},2017:(e,t,n)=>{"use strict";n.d(t,{c7:()=>a,Yd:()=>c,qc:()=>h,$D:()=>m});var i=n(4486),r=n.n(i);function s(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}function o(){const e=new Date;return e.toLocaleTimeString()+"."+e.getMilliseconds()}const a={loggers:{},filterRegex:null,registerLogger(e){const t=Math.abs(s(e))%360;let n=!1;this.loggers.hasOwnProperty(e)&&(n=this.loggers[e].enabled),this.loggers[e]={enabled:n,background:`hsl(${t}, 75%, 35%)`}},showLoggers(){console.log("%cSchemio Log Config!","color: white; display: inline-block; padding: 5px 10px; background: #00aaff; font-family: Helvetica; font-size: 20px; font-weight: bold"),r()(this.loggers,((e,t)=>{console.log(t)}))},enable(e){this.loggers[e]||console.error("Unknown logger: "+e),this.loggers[e].enabled=!0,u()},disable(e){this.loggers[e]||console.error("Unknown logger: "+e),this.loggers[e].enabled=!1,u()},filter(e){this.filterRegex=e?new RegExp(e):null,u()}};function l(e,t){if(e){let n="";for(let e=0;e<t.length;e++){const i=t[e];"string"==typeof i&&(n=n+" "+i)}return e.test(n)}return!0}class c{constructor(e){this.name=e,this.timers={},a.registerLogger(e)}info(...e){const t=a.loggers[this.name];if(t&&t.enabled&&l(a.filterRegex,e)){const n=o();console.log.apply(console,[`${n} %c${this.name}`,`display: inline-block; font-weight: bold; background: ${t.background}; text-shadow: 0 0 4px rgba(0, 0, 0, 0.5); padding: 2px 5px; border-radius: 2px; color: white`,...e])}}time(e){this.timers[e]=performance.now()}timeEnd(e){const t=a.loggers[this.name];if(t&&t.enabled)if(this.timers[e]){if(l(a.filterRegex,`${this.name} ${e}`)){const n=performance.now()-this.timers[e],i=o();console.log.apply(console,[`${i} %c${this.name}%c Timer: %c${e}%c took ${n} ms`,`display: inline-block; font-weight: bold; background: ${t.background}; text-shadow: 0 0 4px rgba(0, 0, 0, 0.5); padding: 2px 5px; border-radius: 2px; color: white`,"","display: inline-block; font-weight: bold; background: hsl(142, 45%, 30%); padding: 2px 5px; border-radius: 2px; color: white",""])}}else console.error(`Could not measure time in ${this.name}. Missing timer ${e} initialisation`)}infoEvent(e,t){const n=a.loggers[this.name];if(n&&n.enabled&&l(a.filterRegex,t)){const i=Math.abs(s(e))%360,r=o();console.log.apply(console,[`${r} %c${this.name} %c${e}`,`display: inline-block; font-weight: bold; background: ${n.background}; text-shadow: 0 0 4px rgba(0, 0, 0, 0.5) padding: 2px 5px; padding: 2px 5px; border-radius: 2px; color: white; margin-right: 10px`,`display: inline-block; font-weight: bold; background: hsl(${i}, 70%, 30%); padding: 2px 5px; border-radius: 2px; color: white;`,...t])}}}const h={objects:[],register(e,t){this.objects.push({type:e,obj:t})}},d="SchemioLogConfig";function u(){"undefined"==typeof window&&window.localStorage&&window.localStorage.setItem(d,JSON.stringify(a))}!function(){if(!window||!window.localStorage)return;const e=window.localStorage.getItem(d);if(e)try{const t=JSON.parse(e);if(!t.loggers)return;r()(t.loggers,((e,t)=>{a.loggers[t]={enabled:e.enabled||!1}}))}catch(e){}}();let p=null;function m(e){p=e}"undefined"!=typeof window&&(window.SchemioDebugger=h,window.SchemioLogConfig=()=>{p&&p()})},3590:(e,t,n)=>{"use strict";function i(e){return Math.abs(e)<1e-5}function r(e,t,n,r){const s=e*e+t*t;if(!i(s)){const o=n*n+r*r;if(!i(o)){const i=Math.sqrt(s),a=Math.sqrt(o);return Math.asin((e*r-t*n)/(i*a))}}return 0}function s(e,t){return t>=0?Math.acos(e):-Math.acos(e)}function o(e,t,n,i){return{a:t-i,b:n-e,c:e*i-n*t}}function a(e,t,{a:n,b:r,c:s}){return i(n)&&i(r)?0:Math.abs(n*e+r*t+s)/Math.sqrt(n*n+r*r)}function l(e,t,n,i){if(i-n<2)return[e[n],e[i]];const r=o(e[n].x,e[n].y,e[i].x,e[i].y);let s=n+1,c=0;for(let t=n+1;t<i;t++){const n=a(e[t].x,e[t].y,r);n>c&&(c=n,s=t)}if(c>t){const r=l(e,t,n,s),o=l(e,t,s,i);return o.splice(0,1),r.concat(o)}return[e[n],e[i]]}n.d(t,{Z:()=>c});const c={sameFloatingValue:(e,t,n)=>(null==n&&(n=1e-4),Math.abs(e-t)<n),tooSmall:i,roundPrecise(e,t){if(t>0){const n=Math.pow(10,t);return Math.round(e*n)/n}return Math.round(e)},roundPrecise1(e){return this.roundPrecise(e,1)},roundPrecise2(e){return this.roundPrecise(e,2)},clamp:(e,t,n)=>e<t?t:e>n?n:e,vectorLength:(e,t)=>Math.sqrt(e*e+t*t),vectorPlusVector:(e,t)=>({x:e.x+t.x,y:e.y+t.y}),vectorMinusVector:(e,t)=>({x:e.x-t.x,y:e.y-t.y}),distanceBetweenPoints:(e,t,n,i)=>Math.sqrt((n-e)*(n-e)+(i-t)*(i-t)),normalizedVector(e,t){const n=e*e+t*t;if(this.tooSmall(n))return null;const i=Math.sqrt(n);return{x:e/i,y:t/i}},angleBetweenVectors:r,cosineAngleBetweenVectors:function(e,t,n,i){const r=e*e+t*t;if(r>.001){const s=n*n+i*i;if(s>.001){const o=Math.sqrt(r),a=Math.sqrt(s);return Math.acos((e*n+t*i)/(o*a))}}return 0},fullAngleForNormalizedVector:s,fullAngleForVector:function(e,t){const n=e*e+t*t;if(!i(n)){const i=Math.sqrt(n);return s(e/i,t/i)}return 0},createLineEquation:o,distanceFromPointToLine:a,linesIntersection(e,t){const n=e.a*t.b-t.a*e.b;if(this.tooSmall(n))return null;const i=(t.a*e.c-e.a*t.c)/n;let r=0;if(this.tooSmall(e.a)){if(this.tooSmall(t.a))return null;r=(-t.b*i-t.c)/t.a}else r=(-e.b*i-e.c)/e.a;return{x:r,y:i}},identifyPointSideAgainstLine:(e,t,{a:n,b:i,c:r})=>n*e+i*t+r>=0?1:-1,isPointInArea:(e,t,n)=>e>=n.x&&e<=n.x+n.w&&t>=n.y&&t<=n.y+n.h,isAreaInArea:(e,t)=>e.x>=t.x&&e.y>=t.y&&e.x+e.w<t.x+t.w&&e.y+e.h<t.y+t.h,overlappingArea(e,t){const n=e.x,i=e.y,r=e.x+e.w,s=e.y+e.h,o=t.x,a=t.y,l=t.x+t.w,c=t.y+t.h;let h=0,d=0,u=0,p=0;return u=o>=n?o:n,p=l>=r?r:l,h=a>=i?a:i,d=c>=s?s:c,d>=h&&p>=u?{x:u,y:h,w:p-u,h:d-h}:null},isPointWithinLineSegment(e,t,n){var i=t.x-e.x,r=t.y-e.y,s=n.x-e.x,o=n.y-e.y,a=n.x-t.x,l=n.y-t.y;return a*a+l*l>(i+s)*(i+s)+(r+o)*(r+o)},worldPointInArea(e,t,n,i){if(!n)return{x:0,y:0};i||(i=this.identityMatrix());const r=this.standardTransformWithArea(i,n);return this.transformPoint(r,e,t)},localPointInArea(e,t,n,i){if(!n)return{x:0,y:0};i||(i=this.identityMatrix());const r=this.standardTransformWithArea(i,n),s=this.inverseMatrix3x3(r);return s?this.transformPoint(s,e,t):{x:0,y:0}},closestPointOnPath(e,t,n,i){let r,s,o=.5;i&&void 0!==i.startDistance&&(r=i.startDistance),i&&void 0!==i.stopDistance&&(s=i.stopDistance),i&&void 0!==i.precision&&(o=i.precision);const a=n.getTotalLength();if(a<1e-7){const e=n.getPointAtLength(0);return e.distance=0,e}let l=0,c=0;if(void 0===r||void 0===s){const i=Math.max(8,Math.min(a/40,20)),r=a/i;let s=0,o=0;for(let a=0;a<i;a++){const i=n.getPointAtLength(a*r+r/2),l=(e-i.x)*(e-i.x)+(t-i.y)*(t-i.y);0===a?(s=a,o=l):o>l&&(o=l,s=a)}l=s*r,c=(s+1)*r}else l=Math.min(r,a),c=Math.min(s,a);const h=(l+c)/2,d=[l,h],u=[h,c];let p=(c-l)/2,m=n.getPointAtLength(l);for(m.distance=l;p>o;){const i=p/2;let r=n.getPointAtLength(d[0]+i);r.distance=d[0]+i;let s=n.getPointAtLength(u[0]+i);s.distance=u[0]+i,p=i,(e-r.x)*(e-r.x)+(t-r.y)*(t-r.y)<(e-s.x)*(e-s.x)+(t-s.y)*(t-s.y)?(m=r,d[1]=d[0]+p):(m=s,d[0]=u[0],d[1]=d[0]+p),u[0]=d[1],u[1]=u[0]+p}return m},worldPointToViewport:(e,t,n)=>({x:(t+e.x)/e.scale,y:(n+e.y)/e.scale}),viewportPointToWorld:(e,t,n)=>({x:t*e.scale-e.x,y:n*e.scale-e.y}),_snapScales:[500,100,20,5,1,.2,.04,.008],getSnappingWidthForScale(e){const t=Math.round(Math.log(e)/Math.log(5))+2;return t>0&&t<this._snapScales.length?this._snapScales[t]:t>this._snapScales.length?this._snapScales[this._snapScales.length-1]:this._snapScales[0]},simplifyPathPointsUsingRDP:(e,t)=>l(e,t,0,e.length-1),smoothPathPoints(e){if(e.length<=2)return e;const t=[e[0]];for(let n=1;n<e.length-1;n++){let i=e[n-1],s=e[n],o=e[n+1];const a=(s.x-i.x)*(s.x-i.x)+(s.y-i.y)*(s.y-i.y),l=(s.x-o.x)*(s.x-o.x)+(s.y-o.y)*(s.y-o.y),c=r(i.x-s.x,i.y-s.y,o.x-s.x,o.y-s.y);if(a<1e4&&l<1e4||Math.abs(c)<.1){const e=o.x-i.x,n=o.y-i.y;t.push({t:"B",x:s.x,y:s.y,x1:-e/8,y1:-n/8,x2:e/8,y2:n/8})}else t.push(s)}return t.push(e[e.length-1]),t},multiplyMatrices(...e){if(0===e.length)return this.identityMatrix();let t=e[0];for(let n=1;n<e.length;n++)t=this.multiplyTwoMatrices(t,e[n]);return t},multiplyTwoMatrices(e,t){let n=e.length,i=e[0].length,r=t[0].length,s=new Array(n);for(let o=0;o<n;o++){s[o]=new Array(r);for(let n=0;n<r;n++){s[o][n]=0;for(let r=0;r<i;r++)s[o][n]+=e[o][r]*t[r][n]}}return s},translationMatrix:(e,t)=>[[1,0,e],[0,1,t],[0,0,1]],rotationMatrixInDegrees(e){return this.rotationMatrixInRadians(e*Math.PI/180)},rotationMatrixInRadians:e=>[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]],scaleMatrix(e,t){if(isNaN(e))throw new Error("nan");return[[e,0,0],[0,t,0],[0,0,1]]},identityMatrix:()=>[[1,0,0],[0,1,0],[0,0,1]],standardTransformWithArea(e,t){const n=t.w*t.px,i=t.h*t.py,r=Math.cos(t.r*Math.PI/180),s=Math.sin(t.r*Math.PI/180),o=[[0,0,0],[0,0,0],[0,0,0]],a=t.x+n,l=t.y+i,c=-n,h=-i,d=e;for(let e=0;e<3;e++)o[e][0]=t.sx*(d[e][0]*r+d[e][1]*s),o[e][1]=t.sy*(d[e][1]*r-d[e][0]*s),o[e][2]=o[e][0]*c+o[e][1]*h+d[e][0]*a+d[e][1]*l+d[e][2];return o},transformPoint(e,t,n){const i=this.multiplyMatrices(e,[[t],[n],[1]]);return{x:i[0][0],y:i[1][0]}},transformVector(e,t,n){const i=this.transformPoint(e,0,0),r=this.transformPoint(e,t,n);return{x:r.x-i.x,y:r.y-i.y}},inverseMatrix3x3(e){const t=(t,n)=>{const i=[0,1,2],r=[0,1,2];return i.splice(t,1),r.splice(n,1),e[i[0]][r[0]]*e[i[1]][r[1]]-e[i[0]][r[1]]*e[i[1]][r[0]]},n=e[0][0]*t(0,0)-e[0][1]*t(0,1)+e[0][2]*t(0,2);if(this.tooSmall(n))return null;const i=[[0,0,0],[0,0,0],[0,0,0]];let r=2;for(let e=0;e<3;e++)for(let s=0;s<3;s++){const o=r%2==0?1:-1;i[s][e]=o*t(e,s)/n,r++}return i},findTranslationMatchingWorldPoint(e,t,n,i,r,s){let o=this.identityMatrix();if(s&&(o=this.inverseMatrix3x3(s)),o){const s=r.px*r.w,a=r.py*r.h,l=o,c=this.multiplyMatrices(this.translationMatrix(s,a),this.rotationMatrixInDegrees(r.r),this.scaleMatrix(r.sx,r.sy),this.translationMatrix(-s,-a)),h=n*c[2][0]+i*c[2][1]+c[2][2];if(!this.tooSmall(h)){const r=n*c[0][0]+i*c[0][1]+c[0][2],s=n*c[1][0]+i*c[1][1]+c[1][2];return{x:(l[0][0]*e+l[0][1]*t+l[0][2]-r)/h,y:(l[1][0]*e+l[1][1]*t+l[1][2]-s)/h}}}return null},nonNullNumber:e=>null==e?0:e,averagePoint(...e){let t=0,n=0;return e.forEach((e=>{t+=e.x,n+=e.y})),e.length>0?{x:t/e.length,y:n/e.length}:{x:t,y:n}},calculateRotationOffsetForSameCenter(e,t,n,i,r){const s=e-n,o=t-i,a=Math.cos(r),l=Math.sin(r);return{x:n+(s*a-o*l),y:i+(s*l+o*a)}},rotateVector90Clockwise:(e,t)=>({x:-t,y:e}),rotateVector90CounterClockwise:(e,t)=>({x:t,y:-e})}},3086:(e,t,n)=>{"use strict";n.d(t,{vq:()=>o,It:()=>a,_W:()=>l});const i=["Arial, Helvetica, sans-serif",'"Arial Black", Gadget, sans-serif','"Book Antiqua", Palatino, serif','"Comic Sans MS", cursive, sans-serif','"Courier New", Courier, monospace',"Georgia, serif","Helvetica, sans-serif","Impact, Charcoal, sans-serif",'"Lucida Grande", sans-serif','"Lucida Sans Unicode", "Lucida Grande", sans-serif','"Lucida Console", Monaco, monospace',"Monaco, monospace",'"Palatino Linotype", "Book Antiqua", Palatino, serif',"Tahoma, Geneva, sans-serif",'"Times New Roman", Times, serif','"Trebuchet MS", Helvetica, sans-serif',"Verdana, Geneva, sans-serif","Alfa Slab One","Cherry Swash","Caveat Brush","Heebo","Carter One","Permanent Marker","Josefin Sans","Cherry Swash","Josefin Sans","Knewave"],r=function(){const e={};for(let t=0;t<i.length;t++){let n=i[t].indexOf(","),r=i[t].trim();n>0&&(r=i[t].substring(0,n).trim()),'"'===r.charAt(0)&&'"'===r.charAt(r.length-1)&&(r=r.substring(1,r.length-1)),e[r]=i[t]}return e}(),s=function(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({name:n,family:e[n]});return t.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)),t}(r);function o(){return"Arial"}function a(e){return r[e]||"Arial, Helvetica, sans-serif"}function l(){return s}},7196:(e,t,n)=>{"use strict";n.d(t,{pp:()=>p,Ho:()=>m,eN:()=>f,Kp:()=>g,td:()=>v,$9:()=>y,kT:()=>w,XZ:()=>C,Oy:()=>A,Hp:()=>S,U3:()=>k,FR:()=>P,u2:()=>E});var i=n(4691),r=n(3363),s=n(3086),o=n(4486),a=n.n(o),l=n(2643),c=n(5161),h=n.n(c),d=n(3311),u=n.n(d);const p={NONE:"none",SIDE_PANEL:"side-panel",TOOLTIP:"tooltip",values(){return i.Z.enumerateConstants(this)}},m=[{name:"Wrap",value:"normal"},{name:"No Wrap",value:"nowrap"},{name:"Preserved",value:"pre"},{name:"Preserved + Wrap",value:"pre-wrap"}],f=[{field:"color",name:"Color",type:"color"},{field:"halign",name:"Horizontal Align",type:"choice",options:["left","center","right"]},{field:"valign",name:"Vertical Align",type:"choice",options:["top","middle","bottom"]},{field:"fontSize",name:"Font Size",type:"number"},{field:"whiteSpace",name:"White Space",type:"choice",options:m},{field:"font",name:"Font",type:"choice",options:h()((0,s._W)(),(e=>e.name))},{field:"paddingLeft",name:"Padding Left",type:"number"},{field:"paddingRight",name:"Padding Right",type:"number"},{field:"paddingTop",name:"Padding Top",type:"number"},{field:"paddingBottom",name:"Padding Bottom",type:"number"}];function g(e){for(let t=0;t<f.length;t++)if(f[t].field===e)return f[t].name;return e}const v={text:"",color:"rgba(0,0,0,1.0)",halign:"center",valign:"middle",fontSize:14,whiteSpace:"normal",font:(0,s.vq)(),paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0},y={fill:{type:"solid",color:"rgba(240,240,240,1.0)"},strokeColor:"rgba(30,30,30,1.0)",strokeSize:2,strokePattern:"solid"},x={x:0,y:0,w:0,h:0,r:0,px:.5,py:.5,sx:1,sy:1},b={opacity:{type:"number"},selfOpacity:{type:"number"},visible:{type:"boolean"},clip:{type:"boolean"}},w={area:x,opacity:100,selfOpacity:100,visible:!0,tags:[],blendMode:"normal",cursor:"default",shape:"none",clip:!1,effects:[],textSlots:{"*":v},description:"",interactionMode:p.SIDE_PANEL,behavior:{events:[]},shapeProps:{},tooltipBackground:"rgba(230,230,230,1.0)",tooltipColor:"rgba(30,30,30,1.0)"},C={cursor:"default",area:x,shape:"empty",opacity:100,blendMode:"normal",name:"",description:"",links:[],textSlots:{},behavior:{events:[]}},_={};function A(e){const t=e.shape,n=(0,l.o)(e,w),s=(0,l.o)(n.shapeProps,function(e){if(_[e])return _[e];const t=r.Z.find(e);return t?(_[e]={},a()(t.args,((t,n)=>{_[e][n]=i.Z.clone(t.value)})),"standard"===t.shapeType&&a()(y,((t,n)=>{_[e][n]=i.Z.clone(t)})),_[e]):{}}(t));return s?n.shapeProps=s:delete n.shapeProps,n}function S(e,t){t(e),e.childItems&&a()(e.childItems,(e=>{S(e,t)})),e._childItems&&a()(e._childItems,(e=>{S(e,t)}))}function k(e){return e.description.trim().length>8}const I=new Set(["color","advanced-color","stroke-pattern","path-cap","number"]);function P(e,t){const n=r.Z.find(e.shape);if(!n)return;const s=r.Z.find(t.shape);s&&a()(e.shapeProps,((e,o)=>{const a=r.Z.getShapePropDescriptor(n,o),l=r.Z.getShapePropDescriptor(s,o);a&&l&&a.type===l.type&&I.has(a.type)&&(t.shapeProps[o]=i.Z.clone(e))}))}function E(e,t){const n=b[t];if(n)return n;if(e&&0===t.indexOf("shapeProps.")){const n=t.substr("shapeProps.".length);if("standard"===e.shapeType&&r.Z.standardShapeProps.hasOwnProperty(n))return r.Z.standardShapeProps[n];if(e.args.hasOwnProperty(n))return e.args[n]}else if(0===t.indexOf("textSlots.")){const e=t.indexOf(".","textSlots.".length+1),n=t.substr(e+1),i=u()(f,(e=>e.field===n));if(i)return i}return null}},1179:(e,t,n)=>{"use strict";n.d(t,{W:()=>i});const i=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","difference","exclusion","hue","saturation","color","luminosity"]},1377:(e,t,n)=>{"use strict";n.d(t,{z9:()=>f,q4:()=>g,GO:()=>v});var i=n(7196),r=n(3363),s=n(4670),o=n.n(s),a=n(2643),l=n(8270),c=n(6703),h=n(4486),d=n.n(h),u=n(4691);function p(e){e.id||(e.id=o().generate())}function m(e){p(e);const t=c.Z.main[e.method];return!!t&&(e.args||(e.args={}),d()(t.args,((t,n)=>{e.args.hasOwnProperty(n)||(e.args[n]=t.value)})),d()(e.args,((n,i)=>{t.args.hasOwnProperty(i)||delete e.args[i]})),!0)}function f(e){var t;e.textSlots||(e.textSlots={}),e.shape||(e.shape="none"),"curve"===e.shape&&function(e){e.shape="path",!Array.isArray(e.shapeProps.paths)&&Array.isArray(e.shapeProps.points)&&(e.shapeProps.paths=[{points:e.shapeProps.points,closed:e.shapeProps.closed}],delete e.shapeProps.points)}(e),"path"===e.shape&&function(e){Array.isArray(e.shapeProps.paths)&&e.shapeProps.paths.forEach((t=>{"relative"!==t.pos&&(t.pos="relative",Array.isArray(t.points)&&(t.points=t.points.map((t=>(0,l.Vk)(t,e.area.w,e.area.h)))))}))}(e),(0,a.I)(e,i.kT),function(e){if(Array.isArray(e.groups)){const t=new Set(e.groups);Array.isArray(e.tags)&&e.tags.forEach((e=>t.add(e))),e.tags=Array.from(t),delete e.groups}}(e),t=e.behavior,d()(t.events,(e=>{p(e),d()(e.actions,m);for(let t=e.actions.length-1;t>=0;t--)m(e.actions[t])||e.actions.splice(t,1)})),d()(e.links,p);let n=r.Z.find(e.shape);if(!n)return;d()(n.args,((t,i)=>{e.shapeProps.hasOwnProperty(i)?"object"==typeof e.shapeProps[i]&&(0,a.I)(e.shapeProps[i],n.args[i].value):e.shapeProps[i]=u.Z.clone(t.value)})),"standard"===n.shapeType&&function(e){(0,a.I)(e.shapeProps,i.$9)}(e);const s=n.getTextSlots(e);s&&d()(s,(t=>{e.textSlots.hasOwnProperty(t.name)||(e.textSlots[t.name]={},g(e.textSlots[t.name]))}))}function g(e){return(0,a.I)(e,i.td)}function v(e){const t=r.Z.find(e.shape);t&&t.args&&(e.shapeProps||(e.shapeProps={}),d()(t.args,((t,n)=>{e.shapeProps.hasOwnProperty(n)||(e.shapeProps[n]=t.value)})))}},8537:(e,t,n)=>{"use strict";n.d(t,{GL:()=>c,mY:()=>h,wS:()=>d});var i=n(2643),r=n(7196),s=n(5161),o=n.n(s),a=n(4691);const l={name:"",description:"",tags:[],categoryId:null,items:[],settings:{screen:{draggable:!0}},style:{backgroundColor:"rgba(240, 240, 240, 1.0)",gridColor:"rgba(128 ,128, 128, 0.2)",boundaryBoxColor:"rgba(36, 182, 255, 1)",controlPointsColor:"rgba(4,177,23, 1.0)",itemMarkerColor:"rgba(36, 182, 255, 1)",itemMarkerToggled:!1}};function c(e){(0,i.I)(e,l)}function h(e){const t=(0,i.o)(e,l);return t.items=o()(t.items,(e=>(0,r.Oy)(e))),t}function d(e){const t=a.Z.clone(e);return h(a.Z.sanitizeScheme(t))}},8590:(e,t,n)=>{"use strict";n.d(t,{W4:()=>R,pf:()=>F,hG:()=>Z,ZP:()=>Q,aR:()=>W,N5:()=>z,ht:()=>U,Ym:()=>q,mo:()=>H,rs:()=>j,pD:()=>G,uI:()=>V});var i=n(5161),r=n.n(i),s=n(4486),o=n.n(s),a=n(3105),l=n.n(a),c=n(3674),h=n.n(c),d=n(3651),u=n.n(d),p=n(998),m=n.n(p),f=n(3311),g=n.n(f);class v{constructor(e,t,n){this.point={x:e,y:t},this.value=n,this.nw=null,this.ne=null,this.sw=null,this.se=null}addPoint(e,t,n){e>=this.point.x&&t>=this.point.y?this.se=y(this.se,e,t,n):e<=this.point.x&&t>=this.point.y?this.sw=y(this.sw,e,t,n):e>=this.point.x&&t<=this.point.y?this.ne=y(this.ne,e,t,n):this.nw=y(this.nw,e,t,n)}forEachInRange(e,t,n,i,r){e<=this.point.x&&this.point.x<=n&&t<=this.point.y&&this.point.y<=i&&r(this.value,this.point),this.se&&(e>=this.point.x||n>=this.point.x)&&(t>=this.point.y||i>=this.point.y)&&this.se.forEachInRange(e,t,n,i,r),this.sw&&(e<=this.point.x||n<=this.point.x)&&(t>=this.point.y||i>=this.point.y)&&this.sw.forEachInRange(e,t,n,i,r),this.ne&&(e>=this.point.x||n>=this.point.x)&&(t<=this.point.y||i<=this.point.y)&&this.ne.forEachInRange(e,t,n,i,r),this.nw&&(e<=this.point.x||n<=this.point.x)&&(t<=this.point.y||i<=this.point.y)&&this.nw.forEachInRange(e,t,n,i,r)}}function y(e,t,n,i){return e?(e.addPoint(t,n,i),e):new v(t,n,i)}class x{constructor(){this.root=null}addPoint(e,t,n){this.root?this.root.addPoint(e,t,n):this.root=new v(e,t,n)}forEachInRange(e,t,n,i,r){if(!this.root)return[];this.root.forEachInRange(e,t,n,i,r)}}const b=function(e,t){let n=-1;for(let i=0;i<t.length;i++){const r=t[i];if(r.startsWith(e)){const t=r.substring(e.length).trim();if(t.length>0){if(!isNaN(t)){const e=parseInt(t);e>n&&(n=e)}}else n<0&&(n=1)}}return n>=0?`${e} ${n+1}`:e};var w=n(3590),C=n(4691),_=n(4670),A=n.n(_),S=n(3363),k=n(7196),I=n(1377),P=n(8537),E=n(2017),T=n(6703),M=n(8370),O=n(2643),D=n(9375);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const N=new E.Yd("SchemeContainer"),R={id:"",moved:!0,rotated:!1,resized:!1},F={moved:!1,rotated:!1,resized:!0,id:""},Z={moved:!1,rotated:!0,resized:!1,id:""};function j(e,t,n){return w.Z.worldPointInArea(e,t,n.area,n.meta&&n.meta.transformMatrix?n.meta.transformMatrix:null)}function z(e,t,n){return w.Z.localPointInArea(e,t,n.area,n.meta&&n.meta.transformMatrix?n.meta.transformMatrix:null)}function U(e,t,n,i){const r=j(e,t,n);return z(r.x,r.y,i)}function H(e){const t=V(e.area.w,0,e);return 180*w.Z.fullAngleForVector(t.x,t.y)/Math.PI}function V(e,t,n){const i=j(0,0,n),r=j(e,t,n);return{x:r.x-i.x,y:r.y-i.y}}function q(e,t,n){if(n.meta.parentId){const i=this.findItemById(n.meta.parentId);if(i)return this.localPointOnItem(e,t,i)}return{x:e,y:t}}function G(e){const t=V(1,0,e),n=V(0,1,e);return{x:w.Z.vectorLength(t.x,t.y),y:w.Z.vectorLength(n.x,n.y)}}function W(e){const t=e.meta&&e.meta.transformMatrix?e.meta.transformMatrix:w.Z.identityMatrix();return w.Z.standardTransformWithArea(t,e.area)}function K(e){e.meta.revision=((e.meta.revision||0)+1)%1e3}function J(e,t,n,i,r,s){if(e){n||(n=w.Z.identityMatrix()),r||(r=[]),void 0===s&&(s=!0);for(let o=0;o<e.length;o++){(0,O.I)(e[o].area,k.kT.area),t(e[o],n,i,r,s);const a=w.Z.standardTransformWithArea(n,e[o].area);e[o].childItems&&J(e[o].childItems,t,a,e[o],r.concat([e[o].id]),s),e[o]._childItems&&J(e[o]._childItems,t,a,e[o],r.concat([e[o].id]),!1)}}}class Y{constructor(e){this.itemPaths=new Map,this.cacheMissFallback=e}get(e){const t=this.itemPaths.get(e.id);return t&&t.revision===e.meta.revision?t.value:this.forceUpdate(e)}forceUpdate(e){const t=this.cacheMissFallback(e);return this.itemPaths.set(e.id,{revision:e.meta.revision,value:t}),t}}const Q=class{constructor(e,t){E.qc.register("SchemioContainer",this),this.scheme=e,this.screenTransform={x:0,y:0,scale:1},this.screenSettings={width:700,height:400,x1:-1e6,y1:-1e6,x2:1e6,y2:1e6},this.eventBus=t,this.selectedItems=[],this.selectedItemsMap={},this.activeBoundaryBox=null,this.itemMap={},this._itemArray=[],this.revision=0,this.hudItems=[],this.worldItems=[],this.worldItemAreas=new Map,this.dependencyItemMap={},this.itemCloneIds=new Map,this.itemCloneReferenceIds=new Map,this._itemTagsToIds={},this.itemTags=[],this.framePlayers=[],this.spatialIndex=new x,this.pinSpatialIndex=new x,this.framesAnimations={},this.componentItems=[],this.componentCyclicIndex=new Map,this.outlinePointsCache=new Map,this.svgOutlinePathCache=new Y((e=>{N.info("Computing shape outline for item",e.id,e.name);const t=S.Z.find(e.shape);if(t){const n=t.computeOutline(e);if(n){const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d",n),e}}return null})),this.relativeSnappers={horizontal:[],vertical:[]},this.multiItemEditBox=null,(0,P.GL)(this.scheme),this.reindexItems()}updateChildTransforms(e){if(e.childItems){let t=w.Z.identityMatrix();if(e.meta&&e.meta.parentId){const n=this.findItemById(e.meta.parentId);n&&(t=W(n))}const n=w.Z.standardTransformWithArea(t,e.area),i=(e,t,n,i)=>{e.meta||(e.meta={}),e.meta.transformMatrix=t};J(e.childItems,i,n,e,e.meta.ancestorIds)}}reindexItems(){N.info("reindexItems()",this),N.time("reindexItems"),this.itemMap={},this._itemArray=[],this.worldItems=[],this._itemTagsToIds={},this.worldItemAreas=new Map,this.relativeSnappers.horizontal=[],this.relativeSnappers.vertical=[],this.spatialIndex=new x,this.pinSpatialIndex=new x,this.dependencyItemMap={},this.itemCloneIds=new Map,this.itemCloneReferenceIds=new Map,this.framePlayers=[],this.componentItems=[],this.componentCyclicIndex=new Map,this.scheme.items&&(this.reindexSpecifiedItems(this.scheme.items),this.reindexComponents(),this.fixComponentCyclicDependencies(),N.timeEnd("reindexItems"))}reindexComponents(){o()(this.componentItems,(e=>this.reindexEmbeddedComponent(e)))}reindexEmbeddedComponent(e){if("embedded"===e.shapeProps.kind&&e.shapeProps.referenceItem){const t=this.findFirstElementBySelector(e.shapeProps.referenceItem);if(t){this.componentCyclicIndex.set(e.id,t.id);const n=B(B({},t),{},{meta:B(B({},t.meta),{},{componentRoot:!0}),shape:"none",opacity:100,selfOpacity:100,visible:!0,shapeProps:{}});this.attachItemsToComponentItem(e,[n]),this.eventBus.emitItemChanged(e.id)}}}fixComponentCyclicDependencies(){const e=new Set,t=e=>{o()(e.childItems,(e=>{"component"===e.shape?n(e):t(e)}))},n=n=>{if(e.has(n.id))return n._childItems=[],n.meta.cyclicComponent=!0,!1;e.add(n.id);const i=this.findItemById(this.componentCyclicIndex.get(n.id));return i&&t(i),!0};this.componentItems.forEach((t=>{e.clear(),n(t)}))}attachItemsToComponentItem(e,t){if(!t)return;const n=this.cloneItems(t,!0,!0),i=this.getBoundingBoxOfItems(t);o()(n,(e=>{e.area.x-=i.x,e.area.y-=i.y,e.opacity=100,e.selfOpacity=100,e.visible=!0,e.tags=[]}));let r=1,s=0,a=0,l=Math.max(i.w,1e-5),c=Math.max(i.h,1e-5),h=e.area.w/l,d=e.area.h/c;"centered"===e.shapeProps.placement&&(r=Math.min(h,d),h=r,d=r,s=(e.area.w-l*h)/2,a=(e.area.h-c*d)/2);const u=function(){const e=C.Z.clone(k.XZ);return e.shape="rect",(0,I.z9)(e),e}();u.id=A().generate(),u.meta={isComponentContainer:!0},u.area.x=s,u.area.y=a,u.area.w=l,u.area.h=c,u.area.px=0,u.area.py=0,u.area.sx=h,u.area.sy=d,u.shapeProps.fill={type:"none"},u.shapeProps.strokeSize=0,u._childItems=n,e._childItems=[u];const p=w.Z.standardTransformWithArea(e.meta.transformMatrix,e.area);this.reindexSpecifiedItems(e._childItems,p,e,e.meta.ancestorIds.concat([e.id]),!1)}readjustComponentContainerRect(e){if(!e._childItems||0===e._childItems.length)return;if(!e._childItems[0]._childItems||0===e._childItems[0]._childItems.length)return;const t=[];e._childItems[0]._childItems.forEach((e=>{const n=this.itemCloneReferenceIds.get(e.id);n&&t.push(this.findItemById(n))}));const n=this.getBoundingBoxOfItems(t);let i=1,r=0,s=0,o=Math.max(n.w,1e-5),a=Math.max(n.h,1e-5),l=e.area.w/o,c=e.area.h/a;"centered"===e.shapeProps.placement&&(i=Math.min(l,c),l=i,c=i,r=(e.area.w-o*l)/2,s=(e.area.h-a*c)/2),e._childItems[0].area.x=r,e._childItems[0].area.y=s,e._childItems[0].area.w=o,e._childItems[0].area.h=a,e._childItems[0].area.sx=l,e._childItems[0].area.sy=c}reindexChildItems(e){const t=w.Z.standardTransformWithArea(e.meta.transformMatrix,e.area);e.childItems&&this.reindexSpecifiedItems(e.childItems,t,e,e.meta.ancestorIds.concat([e.id]))}reindexSpecifiedItems(e,t,n,i,r){void 0===r&&(r=!0);const s={},a=(e,t)=>{let n=s[e]||[];n.push(t),s[e]=n},l=this.revision+1;J(e,((e,t,n,i,r)=>{r&&this._itemArray.push(e),(0,I.z9)(e),this.enrichItemMeta(e,t,n,i),e.tags&&this.indexItemTags(e.id,e.tags),n&&(n.meta.isInHUD||"hud"===n.shape)&&(e.meta.isInHUD=!0),"component"===e.shape&&this.componentItems.push(e),"frame_player"===e.shape&&this.framePlayers.push(e),n||this.worldItems.push(e),"hud"===e.shape&&this.hudItems.push(e),e.id&&(this.itemMap[e.id]=e),"connector"===e.shape&&(e.shapeProps.sourceItem&&a(e.shapeProps.sourceItem,e.id),e.shapeProps.destinationItem&&a(e.shapeProps.destinationItem,e.id));let s=!0;n&&(s=n.meta.calculatedVisibility),e.meta.calculatedVisibility=s&&e.visible&&e.opacity>0;const l=this.generateItemSnappers(e);if(l&&o()(l,(e=>{"horizontal"===e.snapperType?this.relativeSnappers.horizontal.push(e):"vertical"===e.snapperType&&this.relativeSnappers.vertical.push(e)})),r){const t=S.Z.find(e.shape);t&&this.indexItemPins(e,t),this.indexItemOutlinePoints(e)}this.worldItemAreas.set(e.id,this.calculateItemWorldArea(e))}),t,n,i,r),r&&this.buildDependencyItemMapFromElementSelectors(this.dependencyItemMap,s),this.itemTags=h()(this._itemTagsToIds),this.itemTags.sort(),this.revision=l}reindexTags(){this._itemTagsToIds={},J(this.scheme.items,((e,t,n,i)=>{e.tags&&this.indexItemTags(e.id,e.tags)})),this.itemTags=h()(this._itemTagsToIds),this.itemTags.sort()}indexSingleCloneItem(e,t){let n=null;this.itemCloneIds.has(e)?n=this.itemCloneIds.get(e):(n=new Set,this.itemCloneIds.set(e,n)),this.itemCloneReferenceIds.set(t,e),n.add(t)}getItemCloneIds(e){return this.itemCloneIds.get(e)}calculateItemWorldArea(e){const t=[{x:0,y:0},{x:e.area.w,y:0},{x:e.area.w,y:e.area.h},{x:0,y:e.area.h}],n=r()(t,(t=>this.worldPointOnItem(t.x,t.y,e))),i={x:n[0].x,y:n[0].y,w:0,h:0};return o()(n,(e=>{if(i.x>e.x){const t=i.x;i.x=e.x,i.w=t+i.w-e.x}else e.x>i.x+i.w&&(i.w=e.x-i.x);if(i.y>e.y){const t=i.y;i.y=e.y,i.h=t+i.h-e.y}else e.y>i.y+i.h&&(i.h=e.y-i.y)})),i}getItemWorldPinPoint(e,t){const n=S.Z.find(e.shape);if(!n)return null;const i=n.getPins(e);if(t>=0&&t<i.length){const n=i[t],r=this.worldPointOnItem(n.x,n.y,e);if(n.nx||n.ny){const t=this.worldPointOnItem(0,0,e),i=this.worldPointOnItem(n.nx,n.ny,e);r.nx=i.x-t.x,r.ny=i.y-t.y}return r}return null}indexItemPins(e,t){if(!t)return;const n=t.getPins(e);o()(n,((t,n)=>{const i=this.worldPointOnItem(t.x,t.y,e);if(t.hasOwnProperty("nx")){const n=this.worldPointOnItem(0,0,e),r=this.worldPointOnItem(t.nx,t.ny,e);i.nx=r.x-n.x,i.ny=r.y-n.y}this.pinSpatialIndex.addPoint(i.x,i.y,{itemId:e.id,pinIndex:n,worldPinPoint:i})}))}indexItemOutlinePoints(e){let t=this.outlinePointsCache.get(e.id);if(t||(t={revision:-1,points:[]},this.outlinePointsCache.set(e.id,t)),t.revision===e.meta.revision&&t.points.length>0)return void o()(t.points,(t=>{this.spatialIndex.addPoint(t[0],t[1],{itemId:e.id,pathDistance:t[2]})}));t.revision=e.meta.revision;const n=(n,i,r)=>{t.points.push([n,i,r]),this.spatialIndex.addPoint(n,i,{itemId:e.id,pathDistance:r})},i=this.getSvgOutlineOfItem(e);if(!i)return;const r=i.getTotalLength();let s=[[0,Math.max(1,Math.ceil(r/20))]];for(;s.length>0;){const t=[];for(let r=0;r<s.length;r++){const o=s[r][0],a=s[r][1];let l=-1,c=a-o;if(c>=2){const e=Math.floor((o+a)/2);l=20*e,e>o&&t.push([o,e-1]),e<a&&t.push([e+1,a])}else c>=1?(l=20*a,t.push([o,o])):c>=0&&(l=20*o);if(l>=0){const t=i.getPointAtLength(l),r=this.worldPointOnItem(t.x,t.y,e);n(r.x,r.y,l)}}s=t}}buildDependencyItemMapFromElementSelectors(e,t){o()(t,((t,n)=>{const i=this.findFirstElementBySelector(n);i&&((t,n)=>{let i=e[t]||[];i=i.concat(n),e[t]=i})(i.id,t)}))}reindexItemTransforms(e){if(!e.childItems)return;const t=this.findItemById(e.meta.parentId);J(e.childItems,((e,t,n,i)=>{e.meta.transformMatrix=t}),e.meta.transformMatrix,t,e.meta.ancestorIds)}indexItemTags(e,t){o()(t,(t=>{this._itemTagsToIds.hasOwnProperty(t)||(this._itemTagsToIds[t]=[]),this._itemTagsToIds[t].push(e)}))}enrichItemMeta(e,t,n,i){e.meta||(e.meta={collapsed:!1,collapseBitMask:0}),e.meta.transformMatrix=t,e.meta.ancestorIds=i,e.meta.collapseBitMask=n?n.meta.collapseBitMask<<i.length|(n.meta.collapsed?1:0):0,e.meta.parentId=n?n.id:null}worldPointOnItem(e,t,n){return j(e,t,n)}localPointOnItem(e,t,n){return z(e,t,n)}relativePointForItem(e,t,n){return q(e,t,n)}findClosestPointToItems(e,t,n,i,r){let s=null;if(this.pinSpatialIndex.forEachInRange(e-n,t-n,e+n,t+n,(({itemId:n,pinIndex:r,worldPinPoint:o},a)=>{if(n!==i){const i=(e-a.x)*(e-a.x)+(t-a.y)*(t-a.y);(!s||s.distance>i)&&(s={itemId:n,pinIndex:r,point:o,distance:i})}})),s){const e={x:s.point.x,y:s.point.y,distanceOnPath:-s.pinIndex-1,itemId:s.itemId};return s.point.hasOwnProperty("nx")&&(e.nx=s.point.nx,e.ny=s.point.ny),e}const o=new Map,a=Math.max(n,20);this.spatialIndex.forEachInRange(e-a,t-a,e+a,t+a,(({itemId:n,pathDistance:i},r)=>{const s=(e-r.x)*(e-r.x)+(t-r.y)*(t-r.y);o.has(n)?o.get(n).squaredDistanceToPoint>s&&o.set(n,{pathDistance:i,squaredDistanceToPoint:s}):o.set(n,{pathDistance:i,squaredDistanceToPoint:s})}));let l={x:e,y:t},c=null,h=1e5;return o.forEach(((e,t)=>{const s=this.findItemById(t);if(s.id===i)return;if(r&&!s.meta.calculatedVisibility)return;const o=this.closestPointToItemOutline(s,l,{startDistance:Math.max(0,e.pathDistance-a),stopDistance:e.pathDistance+a,precision:Math.min(n/2,.5)});if(!o)return;const d=(o.x-l.x)*(o.x-l.x)+(o.y-l.y)*(o.y-l.y);if(d<n*n){const e={x:o.x,y:o.y,distanceOnPath:o.distanceOnPath,itemId:s.id};(!c||h>d)&&(c=e,h=d)}})),c}getBoundingBoxOfItems(e){if(!e||0===e.length)return{x:0,y:0,w:0,h:0};let t=null;return o()(e,(e=>{const n=[this.worldPointOnItem(0,0,e),this.worldPointOnItem(e.area.w,0,e),this.worldPointOnItem(e.area.w,e.area.h,e),this.worldPointOnItem(0,e.area.h,e)];o()(n,(e=>{t?(t.x1>e.x&&(t.x1=e.x),t.x2<e.x&&(t.x2=e.x),t.y1>e.y&&(t.y1=e.y),t.y2<e.y&&(t.y2=e.y)):t={x1:e.x,x2:e.x,y1:e.y,y2:e.y}}))})),{x:t.x1,y:t.y1,w:t.x2-t.x1,h:t.y2-t.y1}}readjustItemAndDescendants(e,t,n,i){this._readjustItemAndDescendants(e,{},t,n,i)}_readjustItemAndDescendants(e,t,n,i,r){this._readjustItem(e,t,n,i,r);const s=this.findItemById(e);s&&o()(s.childItems,(e=>{this._readjustItemAndDescendants(e.id,t,n,i,r)}))}readjustItem(e,t,n,i){isNaN(i)&&(i=4),this._readjustItem(e,{},t,n,i)}_readjustItem(e,t,n,i,r){if(isNaN(r)&&(r=4),t[e])return;t[e]=!0;const s=this.findItemById(e);if(!s)return;const a=S.Z.find(s.shape);a&&a.readjustItem&&(a.readjustItem(s,this,n,i,r),K(s),this.eventBus&&this.eventBus.emitItemChanged(s.id),this.svgOutlinePathCache.forceUpdate(s)),this.dependencyItemMap[e]&&o()(this.dependencyItemMap[e],(e=>{this._readjustItem(e,t,n,i,r)})),o()(s.childItems,(e=>{this._readjustItem(e.id,t,n,i,r)}))}remountItemToRoot(e){const t=this.scheme.items.length;this.remountItemInsideOtherItem(e,null,t)}remountItemInsideOtherItemAtTheBottom(e,t){if(!t)return;const n=this.findItemById(t);if(!n)return;let i=0;n.childItems&&(i=n.childItems.length),this.remountItemInsideOtherItem(e,t,i)}remountItemInsideOtherItem(e,t,n){const i=this.findItemById(e);if(!i)return;let r=null;if(t&&(r=this.findItemById(t),!r))return;if(isNaN(n)&&(n=0,r.childItems&&(n=r.childItems.length)),r&&u()(r.meta.ancestorIds,i.id)>=0)return;const s=this.worldPointOnItem(0,0,i);let o=0,a=0,l=w.Z.identityMatrix();r&&(l=W(r),a=H(r));let c=null,h=null,d=this.scheme.items;if(i.meta.parentId){if(c=this.findItemById(i.meta.parentId),!c)return;h=c.id,d=c.childItems,o=H(c)}const p=m()(d,(t=>t.id===e));if(p<0)return;d.splice(p,1);let f=this.scheme.items,g=null;r&&(r.childItems||(r.childItems=[]),f=r.childItems,g=r.id);let v=0;h===g&&p<n&&(v=-1),f.splice(n+v,0,i),i.area.r+=o-a;const y=w.Z.findTranslationMatchingWorldPoint(s.x,s.y,0,0,i.area,l);y&&(i.area.x=y.x,i.area.y=y.y),this.eventBus&&(h&&this.eventBus.emitItemChanged(h),g&&this.eventBus.emitItemChanged(g),this.eventBus.emitSchemeChangeCommited()),this.reindexItems(),this.updateMultiItemEditBox()}remountItemAfterOtherItem(e,t){this.remountItemWithOffsetToOtherItem(e,t,1)}remountItemBeforeOtherItem(e,t){this.remountItemWithOffsetToOtherItem(e,t,0)}remountItemWithOffsetToOtherItem(e,t,n){const i=this.findItemById(t);if(!i)return;let r=this.scheme.items,s=null;if(i.meta.parentId){if(s=this.findItemById(i.meta.parentId),!s)return;s.childItems||(s.childItems=[]),r=s.childItems}const o=m()(r,(e=>e.id===t));if(o<0)return;let a=null;s&&(a=s.id),this.remountItemInsideOtherItem(e,a,o+n)}getSvgOutlineOfItem(e){return this.svgOutlinePathCache.get(e)}closestPointToItemOutline(e,t,{withNormal:n,startDistance:i,stopDistance:r,precision:s}){const o=this.localPointOnItem(t.x,t.y,e),a=this.svgOutlinePathCache.get(e);if(!a)return null;const l=w.Z.closestPointOnPath(o.x,o.y,a,{startDistance:i,stopDistance:r,precision:s}),c=this.worldPointOnItem(l.x,l.y,e);if(c.distanceOnPath=l.distance,n){const t=this.calculateNormalOnPointInItemOutline(e,l.distance,a);c.bx=t.x,c.by=t.y}return c}calculateNormalOnPointInItemOutline(e,t,n){if(!n&&!(n=this.svgOutlinePathCache.get(e)))return{x:1,y:0};let i=t-2;i<0&&(i=n.getTotalLength()-i);const r=n.getPointAtLength(i),s=n.getPointAtLength((t+2)%Math.max(1,n.getTotalLength()));let o=s.x-r.x,a=s.y-r.y,l=o;o=a,a=-l;const c=this.worldPointOnItem(0,0,e),h=this.worldPointOnItem(o,a,e);let d=h.x-c.x,u=h.y-c.y;const p=Math.sqrt(d*d+u*u);return p>1e-4&&(d/=p,u/=p),{x:w.Z.roundPrecise(d,4),y:w.Z.roundPrecise(u,4)}}getSelectedItems(){return this.selectedItems}deleteItem(e){this._deleteItem(e),this.reindexItems()}deleteItems(e){o()(e,(e=>{this._deleteItem(e)})),this.reindexItems()}_deleteItem(e){this.outlinePointsCache.has(e.id)&&this.outlinePointsCache.delete(e.id);let t=this.scheme.items,n=null;if(e.meta.parentId){if(n=this.findItemById(e.meta.parentId),!n||!n.childItems)return;t=n.childItems}const i=m()(t,(t=>t.id===e.id));i<0||(t.splice(i,1),n&&this.eventBus.emitItemChanged(n.id))}deleteNonIndexableItems(e){const t=new Set;o()(e,(e=>t.add(e.id)));for(let e=this.scheme.items.length-1;e>=0&&t.size>0;e--){const n=this.scheme.items[e];this.outlinePointsCache.has(n.id)&&this.outlinePointsCache.delete(n.id),t.has(n.id)&&(delete this.itemMap[n.id],this.worldItemAreas.delete(n.id),t.delete(n.id),this.scheme.items.splice(e,1))}}deleteSelectedItems(){this.selectedItems&&this.selectedItems.length>0&&(o()(this.selectedItems,(e=>{delete this.selectedItemsMap[e.id],this._deleteItem(e)})),this.selectedItems=[],this.multiItemEditBox=null,this.reindexItems(),this.eventBus&&this.eventBus.emitAnyItemDeselected())}enrichItem(e){(0,I.z9)(e),e.hasOwnProperty("meta")||(e.meta={}),e.id||(e.id=A().generate())}addItem(e){return this.enrichItem(e),this.scheme.items.push(e),this.reindexSpecifiedItems([e]),"component"===e.shape&&"embedded"===e.shapeProps.kind&&this.reindexEmbeddedComponent(e),e}addNonIndexableItem(e){return this.enrichItem(e),this.scheme.items.push(e),this.reindexSpecifiedItems([e],null,null,[],!1),e}getItems(){return this._itemArray}getTopLevelItems(){return this.worldItems}filterNonHUDItems(e){return l()(e,(e=>"hud"!==e.shape&&!e.meta.isInHUD))}isItemInHUD(e){return"hud"===e.shape||e.meta.isInHUD}setActiveBoundaryBox(e){this.activeBoundaryBox=e}isItemSelected(e){return this.selectedItemsMap[e.id]||!1}selectItem(e,t){if(t)this.selectItemInclusive(e),this.selectedItemsMap[e.id]=!0,this.eventBus&&this.eventBus.emitItemSelected(e.id);else{const t=[];o()(this.selectedItems,(n=>{n.id!==e.id&&t.push(n.id)})),this.selectedItems=[],o()(t,(e=>{this.selectedItemsMap[e]=!1,this.eventBus&&this.eventBus.emitItemDeselected(e)})),this.selectItemInclusive(e),this.eventBus&&this.eventBus.emitItemSelected(e.id)}this.updateMultiItemEditBox()}selectMultipleItems(e,t){t||this.deselectAllItems(),o()(e,(e=>{this.selectedItems.push(e),this.selectedItemsMap[e.id]=!0,this.eventBus&&this.eventBus.emitItemSelected(e.id)})),this.updateMultiItemEditBox()}selectAllItems(){this.selectMultipleItems(this._itemArray)}selectItemInclusive(e){for(var t=!1,n=0;n<this.selectedItems.length;n++)if(this.selectedItems[n]===e){t=!0;break}t||(this.selectedItems.push(e),this.selectedItemsMap[e.id]=!0),this.sortSelectedItemsByAncestors()}sortSelectedItemsByAncestors(){this.selectedItems&&(this.selectedItems=this.selectedItems.sort(((e,t)=>{let n=0,i=0;return e.meta.ancestorIds&&(n=e.meta.ancestorIds.length),t.meta.ancestorIds&&(i=t.meta.ancestorIds.length),n-i})))}deselectAllItems(){const e=r()(this.selectedItems,(e=>e.id));o()(this.selectedItems,(e=>{this.selectedItemsMap[e.id]=!1})),this.selectedItems=[],this.eventBus&&o()(e,(e=>this.eventBus.emitItemDeselected(e))),this.updateMultiItemEditBox()}bringSelectedItemsToBack(e){e||(e=this.scheme.items);let t=0,n=[];for(;t<e.length;)e[t].childItems&&this.bringSelectedItemsToBack(e[t].childItems),this.isItemSelected(e[t])?(n.push(e[t]),e.splice(t,1)):t++;o()(n,(t=>{e.splice(0,0,t)}))}bringSelectedItemsToFront(e){e||(e=this.scheme.items);let t=0,n=[];for(;t<e.length;)e[t].childItems&&this.bringSelectedItemsToFront(e[t].childItems),this.isItemSelected(e[t])?(n.push(e[t]),e.splice(t,1)):t++;o()(n,(t=>{e.push(t)}))}findItemById(e){return this.itemMap[e]}findItemsByTag(e){const t=this._itemTagsToIds[e],n=[];return t&&o()(t,(e=>{const t=this.findItemById(e);t&&n.push(t)})),n}findFirstElementBySelector(e,t){const n=this.findElementsBySelector(e,t);return n.length>0?n[0]:null}findElementsBySelector(e,t){if("self"===e)return[t];if("#"===e.charAt(0)){const t=e.substr(1),n=this.findItemById(t);if(n)return[n]}else{const t=e.indexOf(":");if(t>0&&"tag"===e.substring(0,t))return this.findItemsByTag(e.substr(t+1).trim())}return[]}copySelectedItems(){const e=[];return o()(this.selectedItems,(t=>{e.push(C.Z.clone(t))})),JSON.stringify(e)}decodeItemsFromText(e){let t=null;try{t=JSON.parse(e)}catch(e){return null}if(!Array.isArray(t))return null;for(let e=0;e<t.length;e++){const n=t[e];if("object"!=typeof n.area||null===n.area)return null;if("string"!=typeof n.shape||null===n.shape)return null}return t}setPropertyForItem(e,t){t(e),this.updatePropertyForClones(e,t)}updatePropertyForClones(e,t){const n=this.getItemCloneIds(e.id);n&&n.forEach((e=>{const n=this.findItemById(e);n&&!n.meta.componentRoot&&(this.setPropertyForItem(n,t),this.eventBus.emitItemChanged(n.id))}))}cloneItems(e,t,n){const i={},r=[];o()(e,(e=>{if(!g()(e.meta.ancestorIds,(e=>1===i[e]))){i[e.id]=1;const n=this.worldPointOnItem(0,0,e),s=H(e),o=this.copyItem(e);o.name=t?e.name:this.copyNameAndMakeUnique(e.name),o.area.x=n.x,o.area.y=n.y,o.area.r=s,e.meta.componentRoot&&(o.meta.componentRoot=!0),r.push(o)}}));const s=new Map;o()(r,(e=>{(0,k.Hp)(e,(e=>{s.set(e.meta.oldId,e.id),n&&this.indexSingleCloneItem(e.meta.oldId,e.id)}))}));const a=e=>{if(e&&0===e.indexOf("#")){const t=e.substr(1);if(s.has(t))return"#"+s.get(t)}return e};return o()(r,(e=>{(0,k.Hp)(e,(e=>{"connector"===e.shape&&(e.shapeProps.sourceItem=a(e.shapeProps.sourceItem),e.shapeProps.destinationItem=a(e.shapeProps.destinationItem)),"frame_player"===e.shape&&(o()(e.shapeProps.animations,(e=>{"item"===e.kind&&(e.id=s.get(e.id))})),o()(e.shapeProps.functions,(e=>{const t=D.Z[e.functionId];t&&o()(t.args,((t,n)=>{"element"===t.type&&(e.args[n]=a(e.args[n]))}))}))),o()(e.behavior.events,(e=>{o()(e.actions,(e=>{e.element=a(e.element),T.Z.main[e.method]&&o()(T.Z.main[e.method].args,((t,n)=>{"element"===t.type&&e.args[n]&&(e.args[n]=a(e.args[n]))}))}))}))}))})),r}pasteItems(e,t,n){if(!e||0===e.length)return;this.deselectAllItems();const i=this.cloneItems(e),r=new Set;if(o()(i,(e=>{r.add(e.id),this.scheme.items.push(e)})),o()(i,(e=>{if(this.selectItem(e,!0),"connector"===e.shape){const t=e=>{if("#"===e[0]){const t=e.substring(1);return r.has(t)}return!0};e.shapeProps.sourceItem&&!t(e.shapeProps.sourceItem)&&(e.shapeProps.sourceItem=null),e.shapeProps.destinationItem&&!t(e.shapeProps.destinationItem)&&(e.shapeProps.destinationItem=null)}})),this.multiItemEditBox){const e=this.multiItemEditBox.area,i=t-(e.x+e.w/2),r=n-(e.y+e.h/2);e.x+=i,e.y+=r,this.updateMultiItemEditBoxItems(this.multiItemEditBox,!0,R),this.updateMultiItemEditBoxItems(this.multiItemEditBox,!1,R)}this.reindexItems()}copyItem(e){const t={id:A().generate(),meta:{oldId:e.id}};return o()(e,((e,n)=>{"childItems"===n||"_childItems"===n?t[n]=r()(e,(e=>this.copyItem(e))):"id"!==n&&"meta"!==n&&(t[n]=C.Z.clone(e))})),t}updateMultiItemEditBoxItems(e,t,n,i){void 0===i&&(i=4),n||(n=R);const r=new Set;o()(e.items,(s=>{r.add(s.id);const o=s.meta&&s.meta.ancestorIds&&g()(s.meta.ancestorIds,(e=>r.has(e))),a=o&&(n.moved||n.rotated)&&!n.resized;if(!s.locked&&!a){const r=e.itemProjections[s.id];o||(s.area.r=r.r+e.area.r);const a=t=>w.Z.worldPointInArea(t.x*e.area.w,t.y*e.area.h,e.area);let l=w.Z.identityMatrix();const c=this.findItemById(s.meta.parentId);c&&(l=W(c));const h=a(r.topLeft),d=w.Z.findTranslationMatchingWorldPoint(h.x,h.y,0,0,s.area,l);if(d&&(s.area.x=d.x,s.area.y=d.y),n.resized){const e=a(r.bottomRight),t=z(e.x,e.y,s);s.area.w=Math.max(0,t.x),s.area.h=Math.max(0,t.y)}"component"===s.shape&&"embedded"===s.shapeProps.kind&&this.readjustComponentContainerRect(s),this.updateChildTransforms(s),K(s),this.readjustItemAndDescendants(s.id,t,n,i),this.eventBus&&this.eventBus.emitItemChanged(s.id,"area"),this.updatePropertyForClones(s,(e=>{e.area.x=s.area.x,e.area.y=s.area.y,e.area.w=s.area.w,e.area.h=s.area.h,e.area.r=s.area.r,e.area.px=s.area.px,e.area.py=s.area.py}))}})),this.eventBus&&this.eventBus.$emit(this.eventBus.MULTI_ITEM_EDIT_BOX_ITEMS_UPDATED)}generateUniqueName(e){const t=r()(this.getItems(),(e=>e.name));return b(e,t)}copyNameAndMakeUnique(e){const t=e.trim().split(" ");return t.length>1&&!isNaN(t[t.length-1])?(t.splice(t.length-1,1),this.generateUniqueName(t.join(" ").trim())):this.generateUniqueName(e)}updateMultiItemEditBox(){this.selectedItems.length>0?this.multiItemEditBox=this.generateMultiItemEditBox(this.selectedItems):this.multiItemEditBox=null}updateMultiItemEditBoxAreaOnly(){if(this.multiItemEditBox&&this.selectedItems.length>0){const e=this.generateMultiItemEditBox(this.selectedItems);this.multiItemEditBox.area.x=e.area.x,this.multiItemEditBox.area.y=e.area.y,this.multiItemEditBox.area.w=e.area.w,this.multiItemEditBox.area.h=e.area.h,this.multiItemEditBox.area.r=e.area.r,this.multiItemEditBox.area.sx=e.area.sx,this.multiItemEditBox.area.sy=e.area.sy}}createMultiItemEditBoxAveragedArea(e){let t=null,n=null;const i=[e=>({x:0,y:0}),e=>({x:e.area.w,y:0}),e=>({x:e.area.w,y:e.area.h}),e=>({x:0,y:e.area.h})];return o()(e,(e=>{o()(i,(i=>{const r=i(e),s=this.worldPointOnItem(r.x,r.y,e);t?(t.x=Math.min(t.x,s.x),t.y=Math.min(t.y,s.y)):t={x:s.x,y:s.y},n?(n.x=Math.max(n.x,s.x),n.y=Math.max(n.y,s.y)):n={x:s.x,y:s.y}}))})),{x:t.x,y:t.y,w:n.x-t.x,h:n.y-t.y,r:0,px:0,py:0,sx:1,sy:1}}generateMultiItemEditBox(e){let t=null,n=!0;const i={x:.5,y:.5};if(1===e.length){const n=this.worldPointOnItem(0,0,e[0]),r=this.worldPointOnItem(e[0].area.w,0,e[0]),s=this.worldPointOnItem(0,e[0].area.h,e[0]);let o=0;o=w.Z.tooSmall(e[0].area.w)?180*w.Z.fullAngleForVector(s.x-n.x,s.y-n.y)/Math.PI-90:180*w.Z.fullAngleForVector(r.x-n.x,r.y-n.y)/Math.PI,t={x:n.x,y:n.y,r:o,w:w.Z.distanceBetweenPoints(n.x,n.y,r.x,r.y),h:w.Z.distanceBetweenPoints(n.x,n.y,s.x,s.y),px:0,py:0,sx:1,sy:1},i.x=e[0].area.px,i.y=e[0].area.py}else t=this.createMultiItemEditBoxAveragedArea(e);const r={},s={},a=new Set;return o()(e,(e=>{s[e.id]={originalArea:C.Z.clone(e.area)},a.add(e.id),e.locked||(n=!1);const i=this.worldPointOnItem(0,0,e),o=this.worldPointOnItem(e.area.w,e.area.h,e),l=(e,n)=>{const i=w.Z.localPointInArea(e,n,t);return t.w>0&&(i.x=i.x/t.w),t.h>0&&(i.y=i.y/t.h),i};r[e.id]={topLeft:l(i.x,i.y),bottomRight:l(o.x,o.y),r:e.area.r-t.r},"path"===e.shape&&(s[e.id].originalCurvePaths=C.Z.clone(e.shapeProps.paths))})),{id:A().generate(),locked:n,items:e,itemIds:a,itemData:s,area:t,itemProjections:r,pivotPoint:i,worldPivotPoint:w.Z.worldPointInArea(i.x*t.w,i.y*t.h,t)}}generateItemSnappers(e){const t=S.Z.find(e.shape);return t?t.getSnappers(e):null}findItemSuitableForParent(e,t){const n=this.calculateItemWorldArea(e),i=this.getItems();for(let e=i.length-1;e>=0;e--){const r=i[e];if(r.visible&&"connector"!==r.shape&&(!t||t(r))){const e=this.worldItemAreas.get(r.id);if(e&&n.w+n.h<e.w+e.h){const t=w.Z.overlappingArea(e,n),i=n.w*n.h;if(t&&!w.Z.tooSmall(i)&&t.w*t.h/i>=.5)return r}}}return null}prepareFrameAnimations(){this.prepareFrameAnimationsForItems()}prepareFrameAnimationsForItems(){this.frameAnimations={},o()(this.framePlayers,(e=>{const t=(0,M.yl)(e,this);this.frameAnimations[e.id]=new M._p(e.shapeProps.fps,e.shapeProps.totalFrames,t)}))}getFrameAnimation(e){return this.frameAnimations[e]}getEventBus(){return this.eventBus}alignItemsHorizontally(e){if(e.length<2)return;let t=0;const n=[];o()(e,(e=>{const i=this.getBoundingBoxOfItems([e]);n.push({bbox:i,item:e}),t+=i.y+i.h/2}));const i=t/n.length;n.sort(((e,t)=>e.bbox.x-t.bbox.x));let r=0,s=0;for(let e=0;e<n.length-1;e++){const t=n[e+1].bbox.x-(n[e].bbox.x+n[e].bbox.w);t>0&&(r+=t,s++)}const a=r/Math.max(1,s);let l=n[0].bbox.x;for(let e=0;e<n.length;e++){const t=n[e].item;let r=0;e>0&&(r=l+a-n[e].bbox.x);const s=i-n[e].bbox.y-n[e].bbox.h/2;let o=w.Z.identityMatrix();if(t.meta.parentId){const e=this.findItemById(t.meta.parentId);e&&(o=W(e))}const c=w.Z.transformVector(o,r,s);l=r+n[e].bbox.x+n[e].bbox.w,t.area.x+=c.x,t.area.y+=c.y,this.eventBus.emitItemChanged(t.id,"area")}this.eventBus.emitSchemeChangeCommited(),this.updateMultiItemEditBox()}alignItemsVertically(e){if(e.length<2)return;let t=0;const n=[];o()(e,(e=>{const i=this.getBoundingBoxOfItems([e]);n.push({bbox:i,item:e}),t+=i.x+i.w/2}));const i=t/n.length;n.sort(((e,t)=>e.bbox.y-t.bbox.y));let r=0,s=0;for(let e=0;e<n.length-1;e++){const t=n[e+1].bbox.y-(n[e].bbox.y+n[e].bbox.h);t>0&&(r+=t,s++)}const a=r/Math.max(1,s);let l=n[0].bbox.y;for(let e=0;e<n.length;e++){const t=n[e].item;let r=0;e>0&&(r=l+a-n[e].bbox.y);const s=i-n[e].bbox.x-n[e].bbox.w/2;let o=w.Z.identityMatrix();if(t.meta.parentId){const e=this.findItemById(t.meta.parentId);e&&(o=W(e))}const c=w.Z.transformVector(o,s,r);l=r+n[e].bbox.y+n[e].bbox.h,t.area.x+=c.x,t.area.y+=c.y,this.eventBus.emitItemChanged(t.id,"area")}this.eventBus.emitSchemeChangeCommited(),this.updateMultiItemEditBox()}alignItemsHorizontallyInParent(e){this._alignItemsWith(e,((e,t)=>{e.area.x+=t.x}))}alignItemsVerticallyInParent(e){this._alignItemsWith(e,((e,t)=>{e.area.y+=t.y}))}alignItemsCenteredInParent(e){this._alignItemsWith(e,((e,t)=>{e.area.x+=t.x,e.area.y+=t.y}))}_alignItemsWith(e,t){this._breakItemsByParents(e).forEach(((e,n)=>{const i=this._findCenteringCorrection(e,n);o()(e,(e=>{t(e,i),this.eventBus.emitItemChanged(e.id,"area")}))})),this.eventBus.emitSchemeChangeCommited(),this.updateMultiItemEditBox()}_findCenteringCorrection(e,t){if(0===e.length)return{x:0,y:0};const n=this.findItemById(t);if(!n)return;let i=e[0].area.x,r=e[0].area.x,s=e[0].area.y,a=e[0].area.y;o()(e,(e=>{i=Math.min(i,e.area.x),r=Math.max(r,e.area.x+e.area.w),s=Math.min(s,e.area.y),a=Math.max(a,e.area.y+e.area.h)}));const l=i,c=n.area.w-r,h=s;return{x:(c-l)/2,y:(n.area.h-a-h)/2}}_breakItemsByParents(e){const t=new Map;return o()(e,(e=>{const n=e.meta.parentId;n&&(t.has(n)||t.set(n,[]),t.get(n).push(e))})),t}}},2672:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(4486),r=n.n(i),s=n(6703);class o{compileActions(e,t,n){const i=[];return r()(n,(n=>{if(s.Z.main.hasOwnProperty(n.method)&&n.element){const o=e.findElementsBySelector(n.element,t);if(o){const e=s.Z.main[n.method];if(e){const t=function(e,t){return r()(t.args,((t,n)=>{e.hasOwnProperty(n)||(e[n]=t.value)})),e}(n.args,e);e.multiItem?i.push({func:e,element:o,args:t}):r()(o,(n=>{i.push({func:e,element:n,args:t})}))}}}})),(t,n,r,s)=>{const o=e.findItemById(r);if(i.length<1)return;let a=0,l=()=>{if(a+=1,a>=i.length)return;let r=i[a];t.isActionAllowed(n)&&r.func.execute(r.element,r.args,e,t,l,o,s)};t.isActionAllowed(n)&&i[0].func.execute(i[0].element,i[0].args,e,t,l,o,s)}}}},6085:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={standardEvents:{mousein:{id:"mousein",name:"Mouse In"},mouseout:{id:"mouseout",name:"Mouse Out"},clicked:{id:"clicked",name:"Clicked"},init:{id:"init",name:"Init"}}}},6703:(e,t,n)=>{"use strict";n.d(t,{Z:()=>fe});var i=n(4691),r=n(9737),s=n(3805),o=n(6012),a=n(536),l=n(3363),c=n(7196);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t,n,i){r.Z.play(new s.ZP({durationMillis:1e3*t.animationDuration,animationType:t.transition,update:i,destroy(){n()}}),e.id)}const m={name:"Set",args:{field:{name:"Field",type:"text",value:""},value:{name:"Value",type:"object",value:null},animated:{name:"Animated",type:"boolean",value:!1},animationDuration:{name:"Animation duration (sec)",type:"number",value:.5,depends:{animated:!0}},transition:{name:"Transition",type:"choice",value:"ease-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,depends:{animated:!0},description:"Play animation in background without blocking invokation of other actions"}},execute(e,t,n,r,s){e&&t.hasOwnProperty("field")&&t.hasOwnProperty("value")?t.animated?(t.inBackground&&s(),function(e,t,n){const r=(0,c.u2)(l.Z.find(e.shape),t.field);if(!r)return void n();const s=i.Z.getObjectProperty(e,t.field);if("number"===r.type)p(e,t,n,(n=>{i.Z.setObjectProperty(e,t.field,s*(1-n)+t.value*n),a.Z.emitItemChanged(e.id)}));else if("color"===r.type){const r=(0,o.l)(s),l=(0,o.l)(t.value);p(e,t,n,(n=>{i.Z.setObjectProperty(e,t.field,(0,o.N)({r:r.r*(1-n)+l.r*n,g:r.g*(1-n)+l.g*n,b:r.b*(1-n)+l.b*n,a:r.a*(1-n)+l.a*n})),a.Z.emitItemChanged(e.id)}))}else"advanced-color"===r.type&&(function(e,t,n,r){if("object"!=typeof t.value||"object"!=typeof r)return!1;if("solid"===t.value.type&&"solid"===r.type){const s=(0,o.l)(r.color),l=(0,o.l)(t.value.color);return p(e,t,n,(n=>{i.Z.setObjectProperty(e,t.field,{type:"solid",color:(0,o.N)({r:s.r*(1-n)+l.r*n,g:s.g*(1-n)+l.g*n,b:s.b*(1-n)+l.b*n,a:s.a*(1-n)+l.a*n})}),a.Z.emitItemChanged(e.id)})),!0}return"gradient"===t.value.type&&"gradient"===r.type&&function(e,t,n,r,s){if(r.colors.length!==s.colors.length)return!1;i.Z.setObjectProperty(e,t.field,{type:"gradient",gradient:d(d({},r),{},{type:s.type})});const l=i.Z.getObjectProperty(e,t.field),c=r.direction,h=[];for(let e=0;e<s.colors.length;e++)h[e]={start:(0,o.l)(r.colors[e].c),startPos:r.colors[e].p,end:(0,o.l)(s.colors[e].c),endPos:s.colors[e].p};return p(e,t,n,(t=>{l.gradient.direction=c*(1-t)+s.direction*t,l.gradient.colors.forEach(((e,n)=>{e.c=(0,o.N)({r:h[n].start.r*(1-t)+h[n].end.r*t,g:h[n].start.g*(1-t)+h[n].end.g*t,b:h[n].start.b*(1-t)+h[n].end.b*t,a:h[n].start.a*(1-t)+h[n].end.a*t}),e.p=h[n].startPos*(1-t)+h[n].endPos*t})),a.Z.emitItemChanged(e.id)})),!0}(e,t,n,r.gradient,t.value.gradient)}(e,t,n,s)||(i.Z.setObjectProperty(e,t.field,t.value),a.Z.emitItemChanged(e.id)))}(e,t,(()=>{t.inBackground||s()}))):(i.Z.setObjectProperty(e,t.field,t.value),a.Z.emitItemChanged(e.id),s()):s()}},f={name:"Hide",description:"Hides your item from scene. It also allows to animate this and to perform a slow transition",args:{animated:{name:"Animated",type:"boolean",value:!0},animationDuration:{name:"Animation duration (sec)",type:"number",value:.5,depends:{animated:!0}},transition:{name:"Transition",type:"choice",value:"ease-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,depends:{animated:!0},description:"Play animation in background without blocking invokation of other actions"}},argsToShortString:e=>e.animated?`animated, ${e.animationDuration} sec`:"instant",execute(e,t,n,i,o){if(!e)return void o();const l=e.opacity;t.animated?(r.Z.play(new s.ZP({durationMillis:1e3*t.animationDuration,animationType:t.transition,update(t){e.opacity=l*(1-t),a.Z.emitItemChanged(e.id)},destroy(){e.visible=!1,a.Z.emitItemChanged(e.id),t.inBackground||o()}}),e.id),t.inBackground&&o()):(e.visible=!1,o())}},g={name:"Show",description:"Makes your item visible on scene. You can also make it with a slow transition.",args:{animated:{name:"Animated",type:"boolean",value:!0},animationDuration:{name:"Animation duration (sec)",type:"number",value:.5,depends:{animated:!0}},transition:{name:"Transition",type:"choice",value:"ease-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,depends:{animated:!0},description:"Play animation in background without blocking invokation of other actions"}},argsToShortString:e=>e.animated?`animated, ${e.animationDuration} sec`:"instant",execute(e,t,n,i,o){e&&(t.animated?(r.Z.play(new s.ZP({durationMillis:1e3*t.animationDuration,animationType:t.transition,init(){e.opacity=0,e.visible=!0,a.Z.emitItemChanged(e.id)},update(t){e.opacity=100*t,a.Z.emitItemChanged(e.id)},destroy(){e.visible=!0,e.opacity=100,a.Z.emitItemChanged(e.id),t.inBackground||o()}}),e.id),t.inBackground&&o()):(e.visible=!0,e.opacity<.5&&(e.opacity=100),o()))}},v={name:"Send event",args:{event:{name:"Event",type:"string",value:"Unknown event..."}},argsToShortString:e=>e.event,execute(e,t,n,i,r){i.emitItemEvent(e.id,t.event),r()}};var y=n(3590),x=n(4486),b=n.n(x);function w(e,t,n,i,r,s,o,a,l,c){if(Math.sqrt((a-r)*(a-r)+(l-s)*(l-s))<1)return{x:a,y:l,scale:c};const h=r+(a-r)/2,d=s+(l-s)/2,u=(c+o)/2;return C(e,t,n,i,h,d,u)?w(e,t,n,i,r,s,o,h,d,u):w(e,t,n,i,h,d,u,a,l,c)}function C(e,t,n,i,r,s,o){const a=e.x*o+r,l=e.y*o+s,c=(e.x+e.w)*o+r,h=(e.y+e.h)*o+s;return a>=i&&a<=t-i&&c>=i&&c<=t-i&&l>=i&&l<=n-i&&h>=i&&h<=n-i}function _(e,t){if("hud"===e.shape)return!0;if(e.meta.parentId){const n=t.findItemById(e.meta.parentId);if(n)return _(n,t)}return!1}const A={name:"Zoom To It",description:"Moves scene to bring item into view so that it is centered on the screen",args:{closeEnough:{name:"Close Enough",type:"boolean",value:!1,description:"If checked, then it will only zoom to item just enough for it to appear fully inside the screen. Otherwise it will bring it to the center of the screen"},animated:{name:"Animated",type:"boolean",value:!0},animationDuration:{name:"Animation duration (sec)",type:"number",value:.5,min:0,depends:{animated:!0}},minZoom:{name:"Minimum Zoom(%)",type:"number",value:0,min:0},maxZoom:{name:"Maximum Zoom(%)",type:"number",value:100,min:0},inBackground:{name:"In Background",type:"boolean",value:!1,depends:{animated:!0},description:"Play animation in background without blocking invokation of other actions"}},argsToShortString:e=>e.animated?`animated, ${e.animationDuration} sec`:"instant",execute(e,t,n,i,o){if(!e||!e.area||_(e,n))return void o();const l=function(e,t,n){const i=[{x:0,y:0},{x:e.area.w,y:0},{x:e.area.w,y:e.area.h},{x:0,y:e.area.h}];let r=null,s=null,o=function(e,t){let n=y.Z.identityMatrix();if(e.meta.ancestorIds)for(let i=0;i<e.meta.ancestorIds.length;i++){const r=t.findItemById(e.meta.ancestorIds[i]);r&&(n=y.Z.standardTransformWithArea(n,r.area))}return n}(e,t);return b()(i,(t=>{const n=y.Z.worldPointInArea(t.x,t.y,e.area,o);r?(r.x=Math.min(r.x,n.x),r.y=Math.min(r.y,n.y),s.x=Math.max(s.x,n.x),s.y=Math.max(s.y,n.y)):(r={x:n.x,y:n.y},s={x:n.x,y:n.y})})),{x:r.x-n,y:r.y-n,w:s.x-r.x+2*n,h:s.y-r.y+2*n}}(e,n,10);let c=1;const h=n.screenSettings.width,d=n.screenSettings.height;l.w>0&&l.h>0&&h>0&&d>0&&(c=Math.min(h/l.w,d/l.h),c=Math.max(t.minZoom/100,Math.min(c,t.maxZoom/100)));let u=h/2-(l.x+l.w/2)*c,p=d/2-(l.y+l.h/2)*c;if(t.closeEnough){if(C(l,h,d,0,n.screenTransform.x,n.screenTransform.y,n.screenTransform.scale))return void o();{const e=w(l,h,d,0,n.screenTransform.x,n.screenTransform.y,n.screenTransform.scale,u,p,c);u=e.x,p=e.y,c=e.scale}}if(t.animated){const e=n.screenTransform.x,i=n.screenTransform.y,l=n.screenTransform.scale;r.Z.play(new s.ZP({durationMillis:1e3*t.animationDuration,animationType:"ease-in-out",update:t=>{n.screenTransform.scale=l*(1-t)+c*t,n.screenTransform.x=e*(1-t)+u*t,n.screenTransform.y=i*(1-t)+p*t},destroy:()=>{a.Z.$emit(a.Z.SCREEN_TRANSFORM_UPDATED,n.screenTransform),t.inBackground||o()}})),t.inBackground&&o()}else n.screenTransform.scale=c,n.screenTransform.x=u,n.screenTransform.y=p,a.Z.$emit(a.Z.SCREEN_TRANSFORM_UPDATED,n.screenTransform),o()}};var S=n(2217);class k extends S.Z{constructor(e,t,n){super(),this.item=e,this.args=t,this.resultCallback=n,this.domContainer=null,this.domPath=null,this.time=0,this.backupOpacity=1,this.domAnimationPath=null}init(){this.domContainer=document.getElementById(`animation-container-${this.item.id}`);const e=l.Z.find(this.item.shape);if(e){const t=e.computeOutline(this.item);t&&(this.domPath=document.createElementNS("http://www.w3.org/2000/svg","path"),this.domPath.setAttribute("d",t))}if(!this.domContainer||!this.domPath)return!1;this.domAnimationPath=this.svg("path",{d:this.domPath.getAttribute("d"),"stroke-dasharray":this.args.length,"stroke-dashoffset":0,"stroke-width":this.args.strokeWidth||1,stroke:this.args.color,fill:"none","stroke-linejoin":"round"}),this.domContainer.appendChild(this.domAnimationPath);let t=window.getComputedStyle(this.domPath).opacity;return t&&t>0&&(this.backupOpacity=t),this.domPath.style.opacity=0,!0}play(e){return this.time+=e,this.domAnimationPath.setAttribute("stroke-dashoffset",Math.floor(-this.time*this.args.speed/1e3)),!(this.time>1e3*this.args.duration)}destroy(){this.args.inBackground||this.resultCallback(),this.domAnimationPath&&this.domContainer.removeChild(this.domAnimationPath),this.domPath&&(this.domPath.style.opacity=this.backupOpacity)}}const I={name:"Crawl Effect",description:"Animates outline of the item with a dashed stroke",args:{length:{name:"Length",type:"number",value:10},color:{name:"Color",type:"color",value:"rgba(255,0,0,1.0)"},speed:{name:"Speed",type:"number",value:60},duration:{name:"Duration (sec)",type:"number",value:2},strokeWidth:{name:"Stroke Width",type:"number",value:3},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions"}},execute(e,t,n,i,s){e&&r.Z.play(new k(e,t,s),e.id),t.inBackground&&s()}},P={name:"Stop All Animations",description:"Stops all animations that were either created in the background or generated by another event",args:{},execute(e,t,n,i,s){e&&e.id&&r.Z.stopAllAnimationsForEntity(e.id),s()}};var E=n(8590);const T=2*Math.PI;class M{constructor(){this.lifeTime=0,this.position={x:0,y:0},this.angle=0,this.scale=1,this.opacity=0,this.direction={x:0,y:0},this.floatAngle=0,this.floatAngleDirection=0}update(){}destroy(){}}class O extends M{constructor(e,t){super(),this.domParticle=t,this.domContainer=e,e.appendChild(t)}update(){this.domParticle.setAttribute("style",`opacity: ${this.opacity}`),this.domParticle.setAttribute("transform",`translate(${this.position.x} ${this.position.y}) rotate(${this.angle}) scale(${this.scale} ${this.scale})`)}destroy(){this.domContainer.removeChild(this.domParticle)}}class D{constructor(e){this.items=[],this.schemeContainer=e,this.recycledItems=[]}recycleItem(e){this.recycledItems.push(e)}destroy(){this.schemeContainer.deleteNonIndexableItems(this.items)}borrowItem(e){if(this.recycledItems.length>0)return this.recycledItems.pop();const t=this.schemeContainer.findFirstElementBySelector(e);if(t){const[e]=this.schemeContainer.cloneItems([t]);return this.schemeContainer.addNonIndexableItem(e),this.items.push(e),e}return null}}class $ extends M{constructor(e,t,n,i){super(),this.item=n,this.particleItem=null,this.schemeContainer=e,this.itemRecycler=i,this.particleItem=this.itemRecycler.borrowItem(t)}update(){if(!this.particleItem)return;const e=(0,E.rs)(this.position.x,this.position.y,this.item);this.particleItem.visible=!0,this.particleItem.area.x=e.x-this.particleItem.area.px*this.particleItem.area.w,this.particleItem.area.y=e.y-this.particleItem.area.py*this.particleItem.area.h,this.particleItem.area.sx=this.scale,this.particleItem.area.sy=this.scale,this.particleItem.area.r=this.angle,this.particleItem.opacity=100*this.opacity,a.Z.emitItemChanged(this.particleItem.id)}destroy(){this.particleItem&&this.itemRecycler.recycleItem(this.particleItem)}}class B extends S.Z{constructor(e,t,n,i){super(),this.item=e,this.args=t,this.resultCallback=i,this.domContainer=null,this.domItemPath=null,this.particles=[],this.schemeContainer=n,this.itemRecycler=new D(n),this.generatorCounter=0,this.particlesLeft=this.args.particlesCount,this.cleanupDomElements=[],this.totalPathLength=0,this.singleParticleBirthTime=this.args.birthTime/Math.max(1,this.args.particlesCount)}init(){if(this.domContainer=document.getElementById(`animation-container-${this.item.id}`),!l.Z.find(this.item.shape))return!1;if(this.domItemPath=this.schemeContainer.getSvgOutlineOfItem(this.item),!this.domContainer||!this.domItemPath)return!1;this.totalPathLength=this.domItemPath.getTotalLength(),this.center=function(e){const t=e.getTotalLength();let n=0,i=0;for(let r=0;r<10;r++){const s=e.getPointAtLength(t*r/10);n+=s.x,i+=s.y}return{x:n/10,y:i/10}}(this.domItemPath);const e=this.svg("defs",{});return e.innerHTML=`\n            <radialGradient id="animation-particle-effect-gradient-${this.id}" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">\n            <stop offset="0%" style="stop-color:${this.args.color};stop-opacity:1" />\n            <stop offset="25%" style="stop-color:${this.args.color};stop-opacity:1" />\n            <stop offset="100%" style="stop-color:${this.args.color};stop-opacity:0" />\n            </radialGradient>\n        `,this.domContainer.appendChild(e),this.cleanupDomElements.push(e),!0}play(e){if(0===this.particles.length&&this.particlesLeft<=0)return!1;if(this.particlesLeft>0)if(this.singleParticleBirthTime>1e-4){if(this.generatorCounter+=e/(1e3*this.singleParticleBirthTime),this.generatorCounter>=1){const e=Math.floor(this.generatorCounter),t=Math.min(this.particlesLeft,e);for(let e=0;e<t;e++)this.createParticle();this.generatorCounter-=e}}else for(;this.particlesLeft>0;)this.createParticle();for(let t=0;t<this.particles.length;t++)this.particles[t].lifeTime>this.args.lifeTime?(this.particles[t].destroy(),this.particles.splice(t,1),t-=1):this.playParticle(this.particles[t],e);return!0}createParticle(){let e=0;this.args.travelAlongPath||(e=Math.random()*this.totalPathLength);const t=this.domItemPath.getPointAtLength(e);let n=null;if(n="item"===this.args.particleType?new $(this.schemeContainer,this.args.item,this.item,this.itemRecycler):new O(this.domContainer,this.createParticleDom(this.args.particleType,this.args.particleSize,this.args.color)),n.position=t,this.args.travelAlongPath){this.args.travelFloatRadius>0&&(n.floatAngle=Math.random()*T);let e=1;Math.random()>=.5&&(e=-1),n.floatAngleDirection=e}else{const e={x:0,y:0};e.x=t.x-this.center.x,e.y=t.y-this.center.y;const i=Math.sqrt(e.x*e.x+e.y*e.y);i>1e-4&&(e.x=e.x/i,e.y=e.y/i),n.direction=e}this.particles.push(n),n.update(),this.particlesLeft-=1}playParticle(e,t){if(e.lifeTime+=t/1e3,this.args.travelAlongPath){let n=this.args.lifeTime;n<.1&&(n=1);let i=0;i=this.args.backwards?this.totalPathLength*Math.max(0,1-e.lifeTime/n):this.totalPathLength*e.lifeTime/n;const r=this.domItemPath.getPointAtLength(i);let s=r.x,o=r.y;if(this.args.travelFloatRadius>0&&(e.floatAngle+=e.floatAngleDirection*this.args.travelFloatSpeed*t/(1e3*this.args.lifeTime),e.floatAngle>T&&(e.floatAngle-=T),s=r.x+this.args.travelFloatRadius*Math.cos(e.floatAngle),o=r.y+this.args.travelFloatRadius*Math.sin(e.floatAngle)),e.position.x=s,e.position.y=o,this.args.adjustRotation){const t=this.domItemPath.getPointAtLength(i+2),n=t.x-r.x,s=t.y-r.y,o=n*n+s*s;if(!y.Z.tooSmall(o)){const t=Math.sqrt(o),i=n/t,r=s/t,a=180*y.Z.fullAngleForNormalizedVector(i,r)/Math.PI;e.angle=a,isFinite(this.args.rotationOffset)&&(e.angle+=this.args.rotationOffset)}}}else e.position.x+=e.direction.x*this.args.speed*t/1e3,e.position.y+=e.direction.y*this.args.speed*t/1e3;let n=1,i=1;if(this.args.lifeTime>0){const t=100*e.lifeTime/this.args.lifeTime;t<this.args.fadeIn?i=t/this.args.fadeIn:t>this.args.fadeOut&&this.args.fadeOut<99.999&&(i=(100-t)/(100-this.args.fadeOut)),t<this.args.growth?n=t/this.args.growth:t>this.args.decline&&this.args.decline<99.999&&(n=(100-t)/(100-this.args.decline))}e.scale=n,e.opacity=i,e.update()}destroy(){this.args.inBackground||this.resultCallback(),b()(this.particles,(e=>{e.destroy()})),this.itemRecycler.destroy(),b()(this.cleanupDomElements,(e=>{this.domContainer.removeChild(e)})),this.cleanupDomElements=[]}createParticleDom(e,t,n){return"circle"===e?this.svg("circle",{cx:0,cy:0,r:t/2,fill:n}):"rect"===e?this.svg("rect",{x:-t/2,y:-t/2,width:t,height:t,fill:n,stroke:"none"}):this.svg("circle",{cx:0,cy:0,r:t/2,fill:`url(#animation-particle-effect-gradient-${this.id})`})}}const L={name:"Particle Effect",description:"Generates particles on the outline of the item",args:{particleType:{name:"Particle Type",type:"choice",value:"spot",options:["spot","circle","rect","item"]},item:{name:"Item",type:"element",value:null,depends:{particleType:"item"}},particlesCount:{name:"Particles",type:"number",value:20},particleSize:{name:"Particle size",type:"number",value:20},color:{name:"Color",type:"color",value:"rgba(255,0,0,1.0)"},speed:{name:"Speed",type:"number",value:60,depends:{travelAlongPath:!1}},lifeTime:{name:"Life time (sec)",type:"number",value:2},birthTime:{name:"Birth time (sec)",type:"number",value:.5,description:"Time in which it should generate all particles"},growth:{name:"Growth to (%)",type:"number",value:10},decline:{name:"Decline from (%)",type:"number",value:90},fadeIn:{name:"Fade in (%)",type:"number",value:5},fadeOut:{name:"Fade out (%)",type:"number",value:95},travelAlongPath:{name:"Travel along path",type:"boolean",value:!0,description:"The particle emits in the beggining of the path and travels along the path"},backwards:{name:"Travel backwards",type:"boolean",value:!1,depends:{travelAlongPath:!0}},adjustRotation:{name:"Adjust rotation",type:"boolean",value:!0,description:"Adjust rotation of particles to path",depends:{travelAlongPath:!0}},rotationOffset:{name:"Rotation offset",type:"number",value:0,description:"Rotation angle offset",depends:{adjustRotation:!0,travelAlongPath:!0}},travelFloatRadius:{name:"Travel float radius",type:"number",value:5,depends:{travelAlongPath:!0}},travelFloatSpeed:{name:"Travel float speed",type:"number",value:10,depends:{travelAlongPath:!0}},inBackground:{name:"In background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions"}},execute(e,t,n,i,s){e&&r.Z.play(new B(e,t,n,s),e.id),t.inBackground&&s()}};class N extends S.Z{constructor(e,t,n){super(),this.item=e,this.args=t,this.resultCallback=n,this.elapsedTime=0,this.domContainer=null,this.domBlinker=null,this.opacity=0,this.itemOriginalOpacity=100,this.phase=0,this.pulsatingTime=0,this.phaseOffset=0}init(){this.domContainer=document.getElementById(`animation-container-${this.item.id}`);const e=l.Z.find(this.item.shape);if(!e)return!1;if(this.args.fade){const e=this.args.maxOpacity-this.args.minOpacity;this.phase=1,e>.001&&(this.phaseOffset=Math.asin(2*(this.item.opacity-this.args.minOpacity)/e-2))}else this.domBlinker=this.svg("path",{d:e.computeOutline(this.item),"stroke-width":3,stroke:this.args.color,fill:this.args.color,style:`opacity: ${this.args.minOpacity}`}),this.domContainer.appendChild(this.domBlinker);return!0}play(e){return this.elapsedTime+=e,this.t+=this.args.speed*e/1e4,this.args.fade?this.playFade(e):this.playBlinker(e)}playFade(e){if(1===this.phase){this.pulsatingTime+=e;const t=Math.sin(this.pulsatingTime*this.args.speed/1e4+this.phaseOffset)/2+.5;this.item.opacity=this.args.minOpacity*(1-t)+this.args.maxOpacity*t,1e3*this.args.duration-this.elapsedTime<Math.min(500,1e3*this.args.duration/20)&&(this.phase=2)}return 2===this.phase&&(this.item.opacity+=this.args.speed*e/100,this.item.opacity>=this.itemOriginalOpacity)?(this.item.opacity=this.itemOriginalOpacity,!1):(a.Z.emitItemChanged(this.item.id),this.elapsedTime<1e3*this.args.duration)}playBlinker(e){if(0===this.phase)this.opacity<this.args.minOpacity/100?this.opacity+=this.args.speed*e/1e4:(this.opacity=this.args.minOpacity/100,this.phase=1);else if(1===this.phase)this.pulsatingTime+=e,this.opacity=((Math.sin(this.pulsatingTime*this.args.speed/1e4)/2+.5)*(this.args.maxOpacity-this.args.minOpacity)+this.args.minOpacity)/100,1e3*this.args.duration-this.elapsedTime<Math.min(500,1e3*this.args.duration/20)&&(this.phase=2);else if(this.opacity-=this.args.speed*e/1e4,this.opacity<0)return!1;return this.domBlinker.setAttribute("style",`opacity: ${this.opacity}`),this.elapsedTime<1e3*this.args.duration}destroy(){this.item.opacity=this.itemOriginalOpacity,this.args.inBackground||this.resultCallback(),this.domBlinker&&this.domContainer.removeChild(this.domBlinker)}}const R={name:"Blink Effect",description:"Generates a pulsating effect in which item fades in and out or glows with specified color",args:{fade:{name:"Fade in/out",type:"boolean",value:!0},color:{name:"Color",type:"color",value:"rgba(255,0,0,1.0)",depends:{fade:!1}},speed:{name:"Speed",type:"number",value:50},duration:{name:"Duration (sec)",type:"number",value:5},minOpacity:{name:"Min Opacity (%)",type:"number",value:5},maxOpacity:{name:"Max Opacity (%)",type:"number",value:80},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other acctions"}},execute(e,t,n,i,s){e&&(r.Z.play(new N(e,t,s),e.id),t.inBackground&&s())}};class F extends S.Z{constructor(e,t,n,i){super(),this.item=e,this.args=t,this.schemeContainer=n,this.resultCallback=i,this.elapsedTime=0,this.originalPosition={x:this.item.area.x,y:this.item.area.y},this.destinationPosition={x:parseFloat(t.x),y:parseFloat(t.y)}}init(){return!0}play(e){if(this.args.animate&&this.args.duration>1e-5){this.elapsedTime+=e;const t=Math.min(1,this.elapsedTime/(1e3*this.args.duration));if(t>=1)return this.item.area.x=this.destinationPosition.x,this.item.area.y=this.destinationPosition.y,this.schemeContainer.reindexItemTransforms(this.item),!1;const n=(0,s.rJ)(t,this.args.movement);return this.item.area.x=this.originalPosition.x*(1-n)+this.destinationPosition.x*n,this.item.area.y=this.originalPosition.y*(1-n)+this.destinationPosition.y*n,this.schemeContainer.reindexItemTransforms(this.item),a.Z.emitItemChanged(this.item.id),!0}return this.item.area.x=this.destinationPosition.x,this.item.area.y=this.destinationPosition.y,this.schemeContainer.reindexItemTransforms(this.item),a.Z.emitItemChanged(this.item.id),!1}destroy(){this.args.inBackground||this.resultCallback()}}const Z={name:"Move",description:"Moves item to specified location in local coords",args:{x:{name:"X",type:"number",value:50},y:{name:"Y",type:"number",value:50},animate:{name:"Animate",type:"boolean",value:!1},duration:{name:"Duration (sec)",type:"number",value:2,depends:{animate:!0}},movement:{name:"Movement",type:"choice",value:"linear",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animate:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions",depends:{animate:!0}}},argsToShortString:e=>`x: ${e.x}, y: ${e.y} `+(e.animate?"animated":""),execute(e,t,n,i,s){if(e){if(t.animate)return r.Z.play(new F(e,t,n,s),e.id),void(t.inBackground&&s());e.area.x=t.x,e.area.y=t.y,n.reindexItemTransforms(e)}s()}};class j extends S.Z{constructor(e,t,n,i,r,s,o,a){super(),this.item=e,this.args=t,this.schemeContainer=o,this.resultCallback=a,this.elapsedTime=0,this.originalPosition={x:this.item.area.x,y:this.item.area.y},this.destinationPosition=n,this.originalAngle=e.area.r,this.destinationAngle=i,this.originalWidth=e.area.w,this.destinationWidth=r,this.originalHeight=e.area.h,this.destinationHeight=s}init(){return!0}play(e){if(this.args.animate&&this.args.duration>1e-5){this.elapsedTime+=e;const t=Math.min(1,this.elapsedTime/(1e3*this.args.duration));let n=!0,i=(0,s.rJ)(t,this.args.movement);return t>=1&&(i=1,n=!1),this.item.area.x=this.originalPosition.x*(1-i)+this.destinationPosition.x*i,this.item.area.y=this.originalPosition.y*(1-i)+this.destinationPosition.y*i,this.args.rotate&&(this.item.area.r=this.originalAngle*(1-i)+this.destinationAngle*i),this.args.alignWidth&&(this.item.area.w=this.originalWidth*(1-i)+this.destinationWidth*i),this.args.alignHeight&&(this.item.area.h=this.originalHeight*(1-i)+this.destinationHeight*i),a.Z.emitItemChanged(this.item.id),this.schemeContainer.reindexItemTransforms(this.item),n}return this.item.area.x=this.destinationPosition.x,this.item.area.y=this.destinationPosition.y,a.Z.emitItemChanged(this.item.id),this.schemeContainer.reindexItemTransforms(this.item),!1}destroy(){this.args.inBackground||this.resultCallback()}}const z={name:"Move to Item",description:"Moves item into another item. It also lets rotation and scale align to the destination item with a smooth transition",args:{destinationItem:{name:"Destination Item",type:"element",value:null,description:"Other item to which this item should be moved"},matchPoint:{name:"Match point",type:"choice",value:"center",description:"Match items points",options:["center","pivot","top-left","top-right","bottom-left","bottom-right"]},animate:{name:"Animate",type:"boolean",value:!1},duration:{name:"Duration (sec)",type:"number",value:2,depends:{animate:!0}},movement:{name:"Movement",type:"choice",value:"ease-in-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animate:!0}},rotate:{name:"Rotate",type:"boolean",value:!1,description:"Align rotation of items"},rotationOffset:{name:"Rotation Offset",type:"number",value:0,depends:{rotate:!0},description:"Rotation angle offset"},alignWidth:{name:"Align Width",type:"boolean",value:!1,description:"Adjust items width so that it fits to the width of its destination item"},alignHeight:{name:"Align Height",type:"boolean",value:!1,description:"Adjust items height so that it fits to the height of its destination item"},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions",depends:{animate:!0}}},execute(e,t,n,i,s){if(e){const i=n.findFirstElementBySelector(t.destinationItem,e);let o=e.area.r,l=null,c=e.area.w,h=e.area.h;if(i&&i.id!==e.id){l=function(e,t,n){const i={x:0,y:0},r={x:0,y:0};"pivot"===n?(i.x=t.area.px*t.area.w,i.y=t.area.py*t.area.h,r.x=e.area.px*e.area.w,r.y=e.area.py*e.area.h):"top-right"===n?(i.x=t.area.w,r.x=e.area.w):"bottom-left"===n?(i.y=t.area.h,r.y=e.area.h):"bottom-right"===n?(i.x=t.area.w,r.x=e.area.w,i.y=t.area.h,r.y=e.area.h):"center"===n&&(i.x=t.area.w/2,r.x=e.area.w/2,i.y=t.area.h/2,r.y=e.area.h/2);const s=(0,E.rs)(i.x,i.y,t);return y.Z.findTranslationMatchingWorldPoint(s.x,s.y,r.x,r.y,e.area,e.meta.transformMatrix)||(0,E.Ym)(s.x,s.y,e)}(e,i,t.matchPoint);const n=(0,E.uI)(e.area.w,0,e),r=(0,E.uI)(i.area.w,0,i),s=y.Z.fullAngleForVector(n.x,n.y);o+=180*(y.Z.fullAngleForVector(r.x,r.y)-s)/Math.PI,c=i.area.w,h=i.area.h}if(l){if(t.animate)return r.Z.play(new j(e,t,l,o,c,h,n,s),e.id),void(t.inBackground&&s());e.area.x=l.x,e.area.y=l.y,t.rotate&&(e.area.r=o+t.rotationOffset),t.alignWidth&&(e.area.w=c),t.alignHeight&&(e.area.h=h),a.Z.emitItemChanged(e.id),n.reindexItemTransforms(e)}}s()}},U={name:"Replace Item",description:"Hides destination item and moves your item to it. This is usefull in case you want to design mocked interface",args:{destinationItem:{name:"Destination Item",type:"element",value:null,description:"Other item which this item should replace"}},execute(e,t,n,i,r){if(e){const i=n.findFirstElementBySelector(t.destinationItem,e);let r=null;i&&i.id!==e.id&&(r=function(e,t,n){const i=n.worldPointOnItem(0,0,t);return n.relativePointForItem(i.x,i.y,e)}(e,i,n),i.visible=!1,e.visible=!0,e.area.x=r.x,e.area.y=r.y,n.reindexItemTransforms(e))}r()}};class H extends S.Z{constructor(e,t,n,i){super(),this.item=e,this.args=t,this.schemeContainer=n,this.resultCallback=i,this.elapsedTime=0,this.originalAngle=this.item.area.r,this.destinationAngle=parseFloat(t.angle)}init(){return!0}play(e){if(this.args.animate&&this.args.duration>1e-5){this.elapsedTime+=e;const t=Math.min(1,this.elapsedTime/(1e3*this.args.duration));let n=(0,s.rJ)(t,this.args.movement),i=!0;return t>=1?(i=!1,n=1,!1):(this.item.area.r=this.originalAngle*(1-n)+this.destinationAngle*n,this.schemeContainer.reindexItemTransforms(this.item),a.Z.emitItemChanged(this.item.id),i)}return this.item.area.r=this.destinationAngle,this.schemeContainer.reindexItemTransforms(this.item),a.Z.emitItemChanged(this.item.id),!1}destroy(){this.args.inBackground||this.resultCallback()}}const V={name:"Rotate",description:"Rotates item by specified angle",args:{angle:{name:"Angle",type:"number",value:0},animate:{name:"Animate",type:"boolean",value:!1},duration:{name:"Duration (sec)",type:"number",value:2,depends:{animate:!0}},movement:{name:"Movement",type:"choice",value:"ease-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animate:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions",depends:{animate:!0}}},execute(e,t,n,i,s){if(e){if(t.animate)return r.Z.play(new H(e,t,n,s),e.id),void(t.inBackground&&s());e.area.r=parseFloat(t.angle),n.reindexItemTransforms(e)}s()}};class q extends S.Z{constructor(e,t,n,r){super(),this.item=e,this.args=t,this.schemeContainer=n,this.resultCallback=r,this.elapsedTime=0,this.originalArea=i.Z.clone(e.area),this.destinationScale={sx:parseFloat(t.scaleX),sy:parseFloat(t.scaleY)}}init(){return!0}play(e){if(this.args.animate&&this.args.duration>1e-5){this.elapsedTime+=e;const t=Math.min(1,this.elapsedTime/(1e3*this.args.duration));let n=(0,s.rJ)(t,this.args.movement),i=!0;return t>=1&&(i=!1,n=1),this.item.area.sx=this.originalArea.sx*(1-n)+this.destinationScale.sx*n,this.item.area.sy=this.originalArea.sy*(1-n)+this.destinationScale.sy*n,a.Z.emitItemChanged(this.item.id),this.schemeContainer.reindexItemTransforms(this.item),i}return this.item.area.sx=this.destinationScale.sx,this.item.area.sy=this.destinationScale.sy,a.Z.emitItemChanged(this.item.id),this.schemeContainer.reindexItemTransforms(this.item),!1}destroy(){this.args.inBackground||this.resultCallback()}}const G={name:"Scale",description:"Changes width and height of the item",args:{scaleX:{name:"Scale X",type:"number",value:1.5},scaleY:{name:"Scale Y",type:"number",value:1.5},animate:{name:"Animate",type:"boolean",value:!0},duration:{name:"Duration (sec)",type:"number",value:2,depends:{animate:!0}},movement:{name:"Movement",type:"choice",value:"ease-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animate:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions",depends:{animate:!0}}},argsToShortString:e=>`x: ${e.scaleX}, y: ${e.scaleY}`+(e.animate?", animated":""),execute(e,t,n,i,s){if(e){if(t.animate)return r.Z.play(new q(e,t,n,s),e.id),void(t.inBackground&&s());e.area.sx=parseFloat(t.scaleX),e.area.sy=parseFloat(t.scaleY),a.Z.emitItemChanged(e.id),n.reindexItemTransforms(e)}s()}};var W=n(3277);class K extends S.Z{constructor(e,t,n,i){super(),this.item=e,this.args=t,this.schemeContainer=n,this.resultCallback=i,this.elapsedTime=0,this.originalPosition={x:this.item.area.x,y:this.item.area.y},this.domPath=null,this.pathItem=null,this.pathTotalLength=1}init(){if(this.args.path){const e=this.schemeContainer.findFirstElementBySelector(this.args.path,this.item);if(e){const t=l.Z.find(e.shape);if(t){const n=t.computeOutline(e);n&&(this.domPath=document.createElementNS("http://www.w3.org/2000/svg","path"),this.domPath.setAttribute("d",n),this.pathItem=e)}}this.domPath&&(this.pathTotalLength=this.domPath.getTotalLength())}return!0}play(e){if(this.domPath&&this.args.duration>1e-5){this.elapsedTime+=e;const t=Math.min(1,this.elapsedTime/(1e3*this.args.duration));if(t>=1)return this.moveToPathLength(this.pathTotalLength*this.args.endPosition/100),!1;const n=(0,s.rJ)(t,this.args.movement);return this.moveToPathLength(this.pathTotalLength*(this.args.startPosition*(1-n)+this.args.endPosition*n)/100),a.Z.emitItemChanged(this.item.id),!0}return!1}moveToPathLength(e){W.Z.execute({path:this.domPath,item:this.item,pathItem:this.pathItem,schemeContainer:this.schemeContainer,totalLength:this.pathTotalLength,rotateItem:this.args.rotateItem,rotationOffset:this.args.rotationOffset},{distance:100*e/Math.max(1,this.pathTotalLength),rotation:0})}destroy(){this.args.inBackground||this.resultCallback()}}const J={name:"Move Along Path",description:"Moves item along the outline of the other item. It is best to use this effect when moving item along the custom curve",args:{path:{name:"Path",type:"element",value:null},movement:{name:"Movement",type:"choice",value:"ease-in-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"]},duration:{name:"Duration (sec)",type:"number",value:2,min:0},startPosition:{name:"Start position (%)",type:"number",value:0,description:"Initial position on the path in percentage to its total length"},endPosition:{name:"End position (%)",type:"number",value:100,description:"Final position on the path in percentage to its total length"},rotateItem:{name:"Rotate item",type:"boolean",value:!1,description:"Adjust rotation of the item to path"},rotationOffset:{name:"Rotation offset",type:"number",value:0,description:"Rotation angle offset",depends:{rotateItem:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions"}},execute(e,t,n,i,s){if(e)return r.Z.play(new K(e,t,n,s),e.id),void(t.inBackground&&s());s()}};class Y extends S.Z{constructor(e,t,n,i){super(),this.item=e,this.args=t,this.schemeContainer=n,this.resultCallback=i,this.elapsedTime=0,this.itemInitialPosition={x:this.item.area.x,y:this.item.area.y},this.point1={x:this.item.area.x,y:this.item.area.y},this.point2=this.pickRandomPosition(),this.point3=this.pickRandomPosition(),this._t=0}init(){return!0}pickRandomPosition(){const e=Math.random()*Math.PI*2,t=Math.random()*this.args.radius;return{x:t*Math.cos(e)+this.itemInitialPosition.x,y:t*Math.sin(e)+this.itemInitialPosition.y}}play(e){if(this.args.duration>1e-5&&this.elapsedTime<1e3*this.args.duration){this.elapsedTime+=e,this._t+=e*this.args.speed/1e3,this._t>=1&&(this._t=0,this.point1={x:this.item.area.x,y:this.item.area.y},this.point2=this.pickRandomPosition(),this.point3=this.pickRandomPosition());const t=(0,s.rJ)(this._t,"ease-in-out");return this.item.area.x=Math.pow(1-t,2)*this.point1.x+2*(1-t)*t*this.point2.x+t*t*this.point3.x,this.item.area.y=Math.pow(1-t,2)*this.point1.y+2*(1-t)*t*this.point2.y+t*t*this.point3.y,this.schemeContainer.reindexItemTransforms(this.item),a.Z.emitItemChanged(this.item.id),!0}return this.item.area.x=this.itemInitialPosition.x,this.item.area.y=this.itemInitialPosition.y,this.schemeContainer.reindexItemTransforms(this.item),a.Z.emitItemChanged(this.item.id),!1}destroy(){this.item.area.x=this.itemInitialPosition.x,this.item.area.y=this.itemInitialPosition.y,this.schemeContainer.reindexItemTransforms(this.item),this.args.inBackground||this.resultCallback()}}const Q={name:"Move Randomly",description:"Moves item in a chaotic manner around its original location",args:{radius:{name:"Moving Radius",type:"number",value:20,description:"Radius within which it will perform random movements"},speed:{name:"Moving Speed",type:"number",value:1,description:"Speed of each random movements"},duration:{name:"Duration (sec)",type:"number",value:2},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions"}},execute(e,t,n,i,s){if(e)return r.Z.play(new Y(e,t,n,s),e.id),void(t.inBackground&&s());s()}},X={name:"Wait",description:"Waits for specified amount of time until the next function",args:{time:{type:"number",value:.1,name:"Time (s)",description:"Number of seconds for which it should wait until executing next action in the list"}},argsToShortString:e=>""+e.time,execute(e,t,n,i,r){setTimeout(r,1e3*t.time)}},ee=[],te={name:"Toggle",description:"Hides all other items on screen, leaving only the selected item visible",args:{},execute(e,t,n,i,r){const s={itemId:e.id,allItems:{}};b()(n.getTopLevelItems(),(t=>{s.allItems[t.id]=t.visible,t.id!==e.id&&(t.visible=!1,a.Z.emitItemChanged(t.id))})),0!==ee.length&&ee[ee.length-1].itemId===e.id||ee.push(s),e.visible=!0,a.Z.emitItemChanged(e.id),r()}},ne={name:"Untoggle",description:'Restores previous state of items before using "Toggle" function',args:{},execute(e,t,n,i,r){const s=ee.length>0?ee.pop():null;s&&b()(n.getTopLevelItems(),(e=>{e.visible=s.allItems[e.id],a.Z.emitItemChanged(e.id)})),r()}},ie={name:"Play Frames",description:"Triggers animations in specified frame player",supportedShapes:["frame_player"],args:{startFrame:{type:"number",value:1,min:1,name:"Starting frame"},partial:{type:"boolean",value:!1,name:"Play partial",description:"Play only until specified stop frame"},stopFrame:{type:"number",value:1,min:1,name:"Stop frame",depends:{partial:!0}}},argsToShortString:e=>`from ${e.startFrame} `+(e.partial?`till ${e.stopFrame}`:"till end"),execute(e,t,n,i,s){if(!e)return void s();const o=n.getFrameAnimation(e.id);o?(o.setFrame(t.startFrame),t.partial?o.setStopFrame(t.stopFrame):o.setStopFrame(-1),r.Z.play(o,e.id),s()):s()}},re={name:"Stop Frame Player",description:"Stops currently running animation in specified frame player",supportedShapes:["frame_player"],execute(e,t,n,i,r){if(!e)return void r();const s=n.getFrameAnimation(e.id);s?(s.enabled=!1,r()):r()}},se={name:"Load component",description:'Triggers loading of component. Applicable to "component" shapes only',args:{},supportedShapes:["component"],execute(e,t,n,i,r){setTimeout((()=>{if(!e||"component"===!e.shape)return void r();const t=n.getEventBus();t?(t.emitComponentLoadRequested(e),r()):r()}))}},oe={name:"Destroy component",description:'Removes all the loaded items of the component. Applicable to "component" shapes only',args:{},supportedShapes:["component"],execute(e,t,n,i,r){e._childItems={},n.reindexItems()}};var ae=n(3311),le=n.n(ae);const ce={name:"Toggle in group",description:"Hides all other items of by specified tag, leaving only the specified item visible",args:{group:{name:"Tag",type:"element",description:"Tag representing a group of items that will be hidden instead of the toggled item"}},argsToShortString:e=>e.group?e.group:"...",multiItem:!0,execute(e,t,n,i,r){const s=n.findElementsBySelector(t.group);b()(s,(t=>{le()(e,(e=>e.id===t.id))||(t.visible=!1,a.Z.emitItemChanged(t.id))})),b()(e,(e=>{e.visible=!0,a.Z.emitItemChanged(e.id)})),r()}},he={name:"Send to parent",description:"Sends custom events to parent of this item.\nIt can be used for cross-component communication",args:{event:{name:"Event",type:"string",value:"Unknown event..."}},argsToShortString:e=>e.event,execute(e,t,n,i,r){if(e.meta&&e.meta.parentId){i.emitItemEvent(e.meta.parentId,t.event);const r=n.findItemById(e.meta.parentId);if(!r)return;r.meta.isComponentContainer&&r.meta.parentId&&i.emitItemEvent(r.meta.parentId,t.event)}r()}},de={name:"Send event to children",description:"Sends specified event to all children of an item.\nThis can be used for cross-component communication.\nUsing this function you can send event into dynamic component",args:{event:{name:"Event",type:"string",value:"Unknown event..."}},argsToShortString:e=>e.event,execute(e,t,n,i,r){"component"===e.shape&&Array.isArray(e._childItems)&&e._childItems.forEach((e=>{e.meta.isComponentContainer&&(ue(e.childItems,t.event,i),ue(e._childItems,t.event,i))})),ue(e.childItems,t.event,i),ue(e._childItems,t.event,i),r()}};function ue(e,t,n){Array.isArray(e)&&e.forEach((e=>{n.emitItemEvent(e.id,t)}))}var pe=n(6085);const me=new(n(2672).Z),fe={main:{hide:f,show:g,set:m,zoomToIt:A,particleEffect:L,crawlEffect:I,blinkEffect:R,loadComponent:se,destroyComponent:oe,move:Z,moveAlongPath:J,moveToItem:z,moveRandomly:Q,playFrames:ie,rotate:V,scale:G,replaceItem:U,stopFramePlayer:re,stopAllAnimations:P,sendEvent:v,sendEventToParent:he,sendEventToChildren:de,wait:X,toggle:te,untoggle:ne,toggleGroup:ce,copyEvents:{name:"Copy events",description:"Copies all events except init from the source item to destination items",args:{destination:{name:"Destination",type:"element",value:null,description:"Other item or an item group to which you want to copy events from the source"}},argsToShortString:e=>e.destination?`${e.destination}`:"...",execute(e,t,n,i,r){if(e){try{const r=n.findElementsBySelector(t.destination);e.behavior&&Array.isArray(e.behavior.events)&&r.forEach((t=>{e.behavior.events.forEach((e=>{if(e.event!==pe.Z.standardEvents.init.id){const r=me.compileActions(n,t,e.actions);i.subscribeItemEvent(t.id,e.event,r)}}))}))}catch(e){console.error(e)}r()}else r()}},copyLinks:{name:"Copy links",description:"Copies all links from the source item to destination items. It does not replace exsiting links, but adds new links from the source item",args:{destination:{name:"Destination",type:"element",value:null,description:"Other item or an item group to which you want to copy links from the source"}},argsToShortString:e=>e.destination?`${e.destination}`:"...",execute(e,t,n,i,r){if(e){try{const i=n.findElementsBySelector(t.destination);if(!Array.isArray(e.links)||0===e.links.length)return void r();i.forEach((t=>{Array.isArray(t.links)||(t.links=[]),t.links=t.links.concat(e.links)}))}catch(e){console.error(e)}r()}else r()}},copyDescription:{name:"Copy description",description:"Copies description from the source item to destination items. It does not replace exsiting description, but adds to the existing one",args:{destination:{name:"Destination",type:"element",value:null,description:"Other item or an item group to which you want to copy description from the source"}},argsToShortString:e=>e.destination?`${e.destination}`:"...",execute(e,t,n,i,r){if(e){try{const i=n.findElementsBySelector(t.destination);if(!e.description)return void r();i.forEach((t=>{t.description+=e.description}))}catch(e){console.error(e)}r()}else r()}},repeater:{name:"Repeat",args:{name:{name:"Name",type:"string",value:"",description:'Unique name of the repeater, with which it can be identified in the "Stop repeater" function'},forever:{name:"Run forever",type:"boolean",value:!0},count:{name:"Number of repeatitions",type:"number",value:10,min:0,depends:{forever:!1}}},argsToShortString:e=>e.forever?"forever":`${e.count} times`,execute(e,t,n,i,r,s,o){const a=t.name?t.name:o,l=`repeaterStarted_${a}`,c=`repeaterStopped_${a}`,h=`repeaterCounter_${a}`,d=`repeaterStartTime_${a}`,u=()=>{delete s.meta[h],delete s.meta[d],delete s.meta[l],delete s.meta[c]};if(s.meta.hasOwnProperty(h)||(t.forever?s.meta[h]=-1:s.meta[h]=t.count,s.meta[d]=Date.now()),0===s.meta[h]||s.meta[c])u();else{const e=t.forever?Math.abs(s.meta[h]):Math.abs(t.count-s.meta[h]),n=Date.now()-s.meta[d];if(n>0&&1e3*e/n>30)return u(),void r();s.meta[h]-=1,s.meta[l]=!0,setTimeout((()=>{i.emitItemEvent(s.id,o)}))}r()}},stopRepeater:{name:"Stop repeater",args:{name:{name:"Name",type:"string",value:"",description:"Unique name of the repeater, which should be stopped"}},argsToShortString:e=>e.name?e.name:"...",execute(e,t,n,i,r,s,o){const a=t.name?t.name:o,l=`repeaterStarted_${a}`,c=`repeaterStopped_${a}`;e.meta[l]&&(e.meta[c]=!0),r()}}},scheme:{}}},4691:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(4486),r=n.n(i),s=n(5161),o=n.n(s);function a(e){return e<10?"0"+e:""+e}function l(e){let t={};return r()(e,((e,n)=>{"childItems"===n?t[n]=o()(e,l):"meta"!==n&&"_childItems"!==n&&(t[n]=e)})),t}function c(e){return null==e?null:JSON.parse(JSON.stringify(e))}function h(e,t,n){const i=Math.cos(n*Math.PI/180),r=Math.sin(n*Math.PI/180);return{x:e*i-t*r,y:e*r+t*i}}const d={formatDateAndTime:function(e){var t=new Date(e);return`${a(t.getFullYear())}.${a(t.getMonth())}.${a(t.getDate())} ${a(t.getHours())}:${a(t.getMinutes())}`},clone:c,extendObject:function e(t,n){return r()(n,((n,i)=>{t.hasOwnProperty(i)?"object"==typeof n&&e(t[i],n):t[i]=c(n)})),t},sanitizeScheme:function(e){const t=o()(e.items,l);return{id:e.id,name:e.name,description:e.description,tags:e.tags,modifiedTime:e.modifiedTime,items:t,style:e.style||{}}},getObjectProperty:function(e,t){if(e){let n=null;n=Array.isArray(t)?t:t.split(".");let i=e,r=0;for(;r<n.length;){const e=n[r].trim();if(!e)return;if(r<n.length-1){if(i=i[e],"object"!=typeof i)return}else if(i.hasOwnProperty(e))return i[e];r+=1}}},setObjectProperty:function(e,t,n){let i=null;i=Array.isArray(t)?t:t.split(".");let r=e,s=0;for(;s<i.length;){const e=i[s].trim();if(!e)return;if(!(s<i.length-1))return void(r[e]=n);if(r.hasOwnProperty(e)||(r[e]={}),r=r[e],"object"!=typeof r)return;s+=1}},rotateVector:h,rotatePointAroundCenter:function(e,t,n,i,r){const s=h(e-i,t-r,n);return{x:i+s.x,y:r+s.y}},enumerateConstants:function(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&n===n.toUpperCase()&&t.push(e[n]);return t},domHasParentNode:function e(t,n){return!!n(t)||!!t.parentElement&&e(t.parentElement,n)},domFindAncestorByClassUntil:function e(t,n,i){return t.classList.contains(n)?t:i&&i(t)?null:t.parentElement?e(t.parentElement,n,i):null},forceDownload:function(e,t,n){const i=`data:${t};base64,${btoa(n)}`,r=document.createElement("a");document.body.appendChild(r);try{r.href=i,r.download=e,r.click()}catch(e){console.error(e)}setTimeout((()=>document.body.removeChild(r)),100)},equals:function e(t,n){const i=typeof t;if(i!==typeof n)return!1;if(Array.isArray(t)){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!e(t[i],n[i]))return!1;return!0}if("object"===i){for(let i in t)if(t.hasOwnProperty(i)&&!e(t[i],n[i]))return!1;for(let e in n)if(!t.hasOwnProperty(e))return!1;return!0}return t===n},hashString:function(e){let t=0;if(0==e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}}},9996:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(e,t){return!1!==t.clone&&t.isMergeableObject(e)?a((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function r(e,t,n){return e.concat(t).map((function(e){return i(e,n)}))}function s(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function o(e,t){try{return t in e}catch(e){return!1}}function a(e,n,l){(l=l||{}).arrayMerge=l.arrayMerge||r,l.isMergeableObject=l.isMergeableObject||t,l.cloneUnlessOtherwiseSpecified=i;var c=Array.isArray(n);return c===Array.isArray(e)?c?l.arrayMerge(e,n,l):function(e,t,n){var r={};return n.isMergeableObject(e)&&s(e).forEach((function(t){r[t]=i(e[t],n)})),s(t).forEach((function(s){(function(e,t){return o(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,s)||(o(e,s)&&n.isMergeableObject(t[s])?r[s]=function(e,t){if(!t.customMerge)return a;var n=t.customMerge(e);return"function"==typeof n?n:a}(s,n)(e[s],t[s],n):r[s]=i(t[s],n))})),r}(e,n,l):i(n,l)}a.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return a(e,n,t)}),{})};var l=a;e.exports=l},7837:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attributeNames=t.elementNames=void 0,t.elementNames=new Map([["altglyph","altGlyph"],["altglyphdef","altGlyphDef"],["altglyphitem","altGlyphItem"],["animatecolor","animateColor"],["animatemotion","animateMotion"],["animatetransform","animateTransform"],["clippath","clipPath"],["feblend","feBlend"],["fecolormatrix","feColorMatrix"],["fecomponenttransfer","feComponentTransfer"],["fecomposite","feComposite"],["feconvolvematrix","feConvolveMatrix"],["fediffuselighting","feDiffuseLighting"],["fedisplacementmap","feDisplacementMap"],["fedistantlight","feDistantLight"],["fedropshadow","feDropShadow"],["feflood","feFlood"],["fefunca","feFuncA"],["fefuncb","feFuncB"],["fefuncg","feFuncG"],["fefuncr","feFuncR"],["fegaussianblur","feGaussianBlur"],["feimage","feImage"],["femerge","feMerge"],["femergenode","feMergeNode"],["femorphology","feMorphology"],["feoffset","feOffset"],["fepointlight","fePointLight"],["fespecularlighting","feSpecularLighting"],["fespotlight","feSpotLight"],["fetile","feTile"],["feturbulence","feTurbulence"],["foreignobject","foreignObject"],["glyphref","glyphRef"],["lineargradient","linearGradient"],["radialgradient","radialGradient"],["textpath","textPath"]]),t.attributeNames=new Map([["definitionurl","definitionURL"],["attributename","attributeName"],["attributetype","attributeType"],["basefrequency","baseFrequency"],["baseprofile","baseProfile"],["calcmode","calcMode"],["clippathunits","clipPathUnits"],["diffuseconstant","diffuseConstant"],["edgemode","edgeMode"],["filterunits","filterUnits"],["glyphref","glyphRef"],["gradienttransform","gradientTransform"],["gradientunits","gradientUnits"],["kernelmatrix","kernelMatrix"],["kernelunitlength","kernelUnitLength"],["keypoints","keyPoints"],["keysplines","keySplines"],["keytimes","keyTimes"],["lengthadjust","lengthAdjust"],["limitingconeangle","limitingConeAngle"],["markerheight","markerHeight"],["markerunits","markerUnits"],["markerwidth","markerWidth"],["maskcontentunits","maskContentUnits"],["maskunits","maskUnits"],["numoctaves","numOctaves"],["pathlength","pathLength"],["patterncontentunits","patternContentUnits"],["patterntransform","patternTransform"],["patternunits","patternUnits"],["pointsatx","pointsAtX"],["pointsaty","pointsAtY"],["pointsatz","pointsAtZ"],["preservealpha","preserveAlpha"],["preserveaspectratio","preserveAspectRatio"],["primitiveunits","primitiveUnits"],["refx","refX"],["refy","refY"],["repeatcount","repeatCount"],["repeatdur","repeatDur"],["requiredextensions","requiredExtensions"],["requiredfeatures","requiredFeatures"],["specularconstant","specularConstant"],["specularexponent","specularExponent"],["spreadmethod","spreadMethod"],["startoffset","startOffset"],["stddeviation","stdDeviation"],["stitchtiles","stitchTiles"],["surfacescale","surfaceScale"],["systemlanguage","systemLanguage"],["tablevalues","tableValues"],["targetx","targetX"],["targety","targetY"],["textlength","textLength"],["viewbox","viewBox"],["viewtarget","viewTarget"],["xchannelselector","xChannelSelector"],["ychannelselector","yChannelSelector"],["zoomandpan","zoomAndPan"]])},7220:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(9960)),l=n(5863),c=n(7837),h=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]),d=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function u(e,t){void 0===t&&(t={});for(var n=("length"in e?e:[e]),i="",r=0;r<n.length;r++)i+=p(n[r],t);return i}function p(e,t){switch(e.type){case a.Root:return u(e.children,t);case a.Directive:case a.Doctype:return"<"+e.data+">";case a.Comment:return"\x3c!--"+e.data+"--\x3e";case a.CDATA:return function(e){return"<![CDATA["+e.children[0].data+"]]>"}(e);case a.Script:case a.Style:case a.Tag:return function(e,t){var n;"foreign"===t.xmlMode&&(e.name=null!==(n=c.elementNames.get(e.name))&&void 0!==n?n:e.name,e.parent&&m.has(e.parent.name)&&(t=i(i({},t),{xmlMode:!1}))),!t.xmlMode&&f.has(e.name)&&(t=i(i({},t),{xmlMode:"foreign"}));var r="<"+e.name,s=function(e,t){if(e)return Object.keys(e).map((function(n){var i,r,s=null!==(i=e[n])&&void 0!==i?i:"";return"foreign"===t.xmlMode&&(n=null!==(r=c.attributeNames.get(n))&&void 0!==r?r:n),t.emptyAttrs||t.xmlMode||""!==s?n+'="'+(!1!==t.decodeEntities?l.encodeXML(s):s.replace(/"/g,"&quot;"))+'"':n})).join(" ")}(e.attribs,t);return s&&(r+=" "+s),0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&d.has(e.name))?(t.xmlMode||(r+=" "),r+="/>"):(r+=">",e.children.length>0&&(r+=u(e.children,t)),!t.xmlMode&&d.has(e.name)||(r+="</"+e.name+">")),r}(e,t);case a.Text:return function(e,t){var n=e.data||"";return!1===t.decodeEntities||!t.xmlMode&&e.parent&&h.has(e.parent.name)||(n=l.encodeXML(n)),n}(e,t)}}t.default=u;var m=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),f=new Set(["svg","math"])},9960:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0,function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"}(n=t.ElementType||(t.ElementType={})),t.isTag=function(e){return e.type===n.Tag||e.type===n.Script||e.type===n.Style},t.Root=n.Root,t.Text=n.Text,t.Directive=n.Directive,t.Comment=n.Comment,t.Script=n.Script,t.Style=n.Style,t.Tag=n.Tag,t.CDATA=n.CDATA,t.Doctype=n.Doctype},7915:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var s=n(9960),o=n(7790);r(n(7790),t);var a=/\s+/g,l={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1,xmlMode:!1},c=function(){function e(e,t,n){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(n=t,t=l),"object"==typeof e&&(t=e,e=void 0),this.callback=null!=e?e:null,this.options=null!=t?t:l,this.elementCB=null!=n?n:null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var n=this.options.xmlMode?s.ElementType.Tag:void 0,i=new o.Element(e,t,void 0,n);this.addNode(i),this.tagStack.push(i)},e.prototype.ontext=function(e){var t=this.options.normalizeWhitespace,n=this.lastNode;if(n&&n.type===s.ElementType.Text)t?n.data=(n.data+e).replace(a," "):n.data+=e,this.options.withEndIndices&&(n.endIndex=this.parser.endIndex);else{t&&(e=e.replace(a," "));var i=new o.Text(e);this.addNode(i),this.lastNode=i}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===s.ElementType.Comment)this.lastNode.data+=e;else{var t=new o.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new o.Text(""),t=new o.NodeWithChildren(s.ElementType.CDATA,[e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var n=new o.ProcessingInstruction(e,t);this.addNode(n)},e.prototype.handleCallback=function(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null},e}();t.DomHandler=c,t.default=c},7790:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneNode=t.hasChildren=t.isDocument=t.isDirective=t.isComment=t.isText=t.isCDATA=t.isTag=t.Element=t.Document=t.NodeWithChildren=t.ProcessingInstruction=t.Comment=t.Text=t.DataNode=t.Node=void 0;var o=n(9960),a=new Map([[o.ElementType.Tag,1],[o.ElementType.Script,1],[o.ElementType.Style,1],[o.ElementType.Directive,1],[o.ElementType.Text,3],[o.ElementType.CDATA,4],[o.ElementType.Comment,8],[o.ElementType.Root,9]]),l=function(){function e(e){this.type=e,this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){var e;return null!==(e=a.get(this.type))&&void 0!==e?e:1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),C(this,e)},e}();t.Node=l;var c=function(e){function t(t,n){var i=e.call(this,t)||this;return i.data=n,i}return r(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(l);t.DataNode=c;var h=function(e){function t(t){return e.call(this,o.ElementType.Text,t)||this}return r(t,e),t}(c);t.Text=h;var d=function(e){function t(t){return e.call(this,o.ElementType.Comment,t)||this}return r(t,e),t}(c);t.Comment=d;var u=function(e){function t(t,n){var i=e.call(this,o.ElementType.Directive,n)||this;return i.name=t,i}return r(t,e),t}(c);t.ProcessingInstruction=u;var p=function(e){function t(t,n){var i=e.call(this,t)||this;return i.children=n,i}return r(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(l);t.NodeWithChildren=p;var m=function(e){function t(t){return e.call(this,o.ElementType.Root,t)||this}return r(t,e),t}(p);t.Document=m;var f=function(e){function t(t,n,i,r){void 0===i&&(i=[]),void 0===r&&(r="script"===t?o.ElementType.Script:"style"===t?o.ElementType.Style:o.ElementType.Tag);var s=e.call(this,r,i)||this;return s.name=t,s.attribs=n,s}return r(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map((function(t){var n,i;return{name:t,value:e.attribs[t],namespace:null===(n=e["x-attribsNamespace"])||void 0===n?void 0:n[t],prefix:null===(i=e["x-attribsPrefix"])||void 0===i?void 0:i[t]}}))},enumerable:!1,configurable:!0}),t}(p);function g(e){return(0,o.isTag)(e)}function v(e){return e.type===o.ElementType.CDATA}function y(e){return e.type===o.ElementType.Text}function x(e){return e.type===o.ElementType.Comment}function b(e){return e.type===o.ElementType.Directive}function w(e){return e.type===o.ElementType.Root}function C(e,t){var n;if(void 0===t&&(t=!1),y(e))n=new h(e.data);else if(x(e))n=new d(e.data);else if(g(e)){var i=t?_(e.children):[],r=new f(e.name,s({},e.attribs),i);i.forEach((function(e){return e.parent=r})),e["x-attribsNamespace"]&&(r["x-attribsNamespace"]=s({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(r["x-attribsPrefix"]=s({},e["x-attribsPrefix"])),n=r}else if(v(e)){i=t?_(e.children):[];var a=new p(o.ElementType.CDATA,i);i.forEach((function(e){return e.parent=a})),n=a}else if(w(e)){i=t?_(e.children):[];var l=new m(i);i.forEach((function(e){return e.parent=l})),e["x-mode"]&&(l["x-mode"]=e["x-mode"]),n=l}else{if(!b(e))throw new Error("Not implemented yet: "+e.type);var c=new u(e.name,e.data);null!=e["x-name"]&&(c["x-name"]=e["x-name"],c["x-publicId"]=e["x-publicId"],c["x-systemId"]=e["x-systemId"]),n=c}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,n}function _(e){for(var t=e.map((function(e){return C(e,!0)})),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}t.Element=f,t.isTag=g,t.isCDATA=v,t.isText=y,t.isComment=x,t.isDirective=b,t.isDocument=w,t.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},t.cloneNode=C},6996:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFeed=void 0;var i=n(3346),r=n(3905);t.getFeed=function(e){var t=l(d,e);return t?"feed"===t.name?function(e){var t,n=e.children,i={type:"atom",items:(0,r.getElementsByTagName)("entry",n).map((function(e){var t,n=e.children,i={media:a(n)};h(i,"id","id",n),h(i,"title","title",n);var r=null===(t=l("link",n))||void 0===t?void 0:t.attribs.href;r&&(i.link=r);var s=c("summary",n)||c("content",n);s&&(i.description=s);var o=c("updated",n);return o&&(i.pubDate=new Date(o)),i}))};h(i,"id","id",n),h(i,"title","title",n);var s=null===(t=l("link",n))||void 0===t?void 0:t.attribs.href;s&&(i.link=s),h(i,"description","subtitle",n);var o=c("updated",n);return o&&(i.updated=new Date(o)),h(i,"author","email",n,!0),i}(t):function(e){var t,n,i=null!==(n=null===(t=l("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==n?n:[],s={type:e.name.substr(0,3),id:"",items:(0,r.getElementsByTagName)("item",e.children).map((function(e){var t=e.children,n={media:a(t)};h(n,"id","guid",t),h(n,"title","title",t),h(n,"link","link",t),h(n,"description","description",t);var i=c("pubDate",t);return i&&(n.pubDate=new Date(i)),n}))};h(s,"title","title",i),h(s,"link","link",i),h(s,"description","description",i);var o=c("lastBuildDate",i);return o&&(s.updated=new Date(o)),h(s,"author","managingEditor",i,!0),s}(t):null};var s=["url","type","lang"],o=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function a(e){return(0,r.getElementsByTagName)("media:content",e).map((function(e){for(var t=e.attribs,n={medium:t.medium,isDefault:!!t.isDefault},i=0,r=s;i<r.length;i++)t[c=r[i]]&&(n[c]=t[c]);for(var a=0,l=o;a<l.length;a++){var c;t[c=l[a]]&&(n[c]=parseInt(t[c],10))}return t.expression&&(n.expression=t.expression),n}))}function l(e,t){return(0,r.getElementsByTagName)(e,t,!0,1)[0]}function c(e,t,n){return void 0===n&&(n=!1),(0,i.textContent)((0,r.getElementsByTagName)(e,t,n,1)).trim()}function h(e,t,n,i,r){void 0===r&&(r=!1);var s=c(n,i,r);s&&(e[t]=s)}function d(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}},4975:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueSort=t.compareDocumentPosition=t.removeSubsets=void 0;var i=n(7915);function r(e,t){var n=[],r=[];if(e===t)return 0;for(var s=(0,i.hasChildren)(e)?e:e.parent;s;)n.unshift(s),s=s.parent;for(s=(0,i.hasChildren)(t)?t:t.parent;s;)r.unshift(s),s=s.parent;for(var o=Math.min(n.length,r.length),a=0;a<o&&n[a]===r[a];)a++;if(0===a)return 1;var l=n[a-1],c=l.children,h=n[a],d=r[a];return c.indexOf(h)>c.indexOf(d)?l===t?20:4:l===e?10:2}t.removeSubsets=function(e){for(var t=e.length;--t>=0;){var n=e[t];if(t>0&&e.lastIndexOf(n,t-1)>=0)e.splice(t,1);else for(var i=n.parent;i;i=i.parent)if(e.includes(i)){e.splice(t,1);break}}return e},t.compareDocumentPosition=r,t.uniqueSort=function(e){return(e=e.filter((function(e,t,n){return!n.includes(e,t+1)}))).sort((function(e,t){var n=r(e,t);return 2&n?-1:4&n?1:0})),e}},9432:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasChildren=t.isDocument=t.isComment=t.isText=t.isCDATA=t.isTag=void 0,r(n(3346),t),r(n(5010),t),r(n(6765),t),r(n(8043),t),r(n(3905),t),r(n(4975),t),r(n(6996),t);var s=n(7915);Object.defineProperty(t,"isTag",{enumerable:!0,get:function(){return s.isTag}}),Object.defineProperty(t,"isCDATA",{enumerable:!0,get:function(){return s.isCDATA}}),Object.defineProperty(t,"isText",{enumerable:!0,get:function(){return s.isText}}),Object.defineProperty(t,"isComment",{enumerable:!0,get:function(){return s.isComment}}),Object.defineProperty(t,"isDocument",{enumerable:!0,get:function(){return s.isDocument}}),Object.defineProperty(t,"hasChildren",{enumerable:!0,get:function(){return s.hasChildren}})},3905:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElementsByTagType=t.getElementsByTagName=t.getElementById=t.getElements=t.testElement=void 0;var i=n(7915),r=n(8043),s={tag_name:function(e){return"function"==typeof e?function(t){return(0,i.isTag)(t)&&e(t.name)}:"*"===e?i.isTag:function(t){return(0,i.isTag)(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return(0,i.isText)(t)&&e(t.data)}:function(t){return(0,i.isText)(t)&&t.data===e}}};function o(e,t){return"function"==typeof t?function(n){return(0,i.isTag)(n)&&t(n.attribs[e])}:function(n){return(0,i.isTag)(n)&&n.attribs[e]===t}}function a(e,t){return function(n){return e(n)||t(n)}}function l(e){var t=Object.keys(e).map((function(t){var n=e[t];return Object.prototype.hasOwnProperty.call(s,t)?s[t](n):o(t,n)}));return 0===t.length?null:t.reduce(a)}t.testElement=function(e,t){var n=l(e);return!n||n(t)},t.getElements=function(e,t,n,i){void 0===i&&(i=1/0);var s=l(e);return s?(0,r.filter)(s,t,n,i):[]},t.getElementById=function(e,t,n){return void 0===n&&(n=!0),Array.isArray(t)||(t=[t]),(0,r.findOne)(o("id",e),t,n)},t.getElementsByTagName=function(e,t,n,i){return void 0===n&&(n=!0),void 0===i&&(i=1/0),(0,r.filter)(s.tag_name(e),t,n,i)},t.getElementsByTagType=function(e,t,n,i){return void 0===n&&(n=!0),void 0===i&&(i=1/0),(0,r.filter)(s.tag_type(e),t,n,i)}},6765:(e,t)=>{"use strict";function n(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children;t.splice(t.lastIndexOf(e),1)}}Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=t.prependChild=t.append=t.appendChild=t.replaceElement=t.removeElement=void 0,t.removeElement=n,t.replaceElement=function(e,t){var n=t.prev=e.prev;n&&(n.next=t);var i=t.next=e.next;i&&(i.prev=t);var r=t.parent=e.parent;if(r){var s=r.children;s[s.lastIndexOf(e)]=t}},t.appendChild=function(e,t){if(n(t),t.next=null,t.parent=e,e.children.push(t)>1){var i=e.children[e.children.length-2];i.next=t,t.prev=i}else t.prev=null},t.append=function(e,t){n(t);var i=e.parent,r=e.next;if(t.next=r,t.prev=e,e.next=t,t.parent=i,r){if(r.prev=t,i){var s=i.children;s.splice(s.lastIndexOf(r),0,t)}}else i&&i.children.push(t)},t.prependChild=function(e,t){if(n(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){var i=e.children[1];i.prev=t,t.next=i}else t.next=null},t.prepend=function(e,t){n(t);var i=e.parent;if(i){var r=i.children;r.splice(r.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=i,t.prev=e.prev,t.next=e,e.prev=t}},8043:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAll=t.existsOne=t.findOne=t.findOneChild=t.find=t.filter=void 0;var i=n(7915);function r(e,t,n,s){for(var o=[],a=0,l=t;a<l.length;a++){var c=l[a];if(e(c)&&(o.push(c),--s<=0))break;if(n&&(0,i.hasChildren)(c)&&c.children.length>0){var h=r(e,c.children,n,s);if(o.push.apply(o,h),(s-=h.length)<=0)break}}return o}t.filter=function(e,t,n,i){return void 0===n&&(n=!0),void 0===i&&(i=1/0),Array.isArray(t)||(t=[t]),r(e,t,n,i)},t.find=r,t.findOneChild=function(e,t){return t.find(e)},t.findOne=function e(t,n,r){void 0===r&&(r=!0);for(var s=null,o=0;o<n.length&&!s;o++){var a=n[o];(0,i.isTag)(a)&&(t(a)?s=a:r&&a.children.length>0&&(s=e(t,a.children)))}return s},t.existsOne=function e(t,n){return n.some((function(n){return(0,i.isTag)(n)&&(t(n)||n.children.length>0&&e(t,n.children))}))},t.findAll=function(e,t){for(var n,r,s=[],o=t.filter(i.isTag);r=o.shift();){var a=null===(n=r.children)||void 0===n?void 0:n.filter(i.isTag);a&&a.length>0&&o.unshift.apply(o,a),e(r)&&s.push(r)}return s}},3346:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.innerText=t.textContent=t.getText=t.getInnerHTML=t.getOuterHTML=void 0;var r=n(7915),s=i(n(7220)),o=n(9960);function a(e,t){return(0,s.default)(e,t)}t.getOuterHTML=a,t.getInnerHTML=function(e,t){return(0,r.hasChildren)(e)?e.children.map((function(e){return a(e,t)})).join(""):""},t.getText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,r.isTag)(t)?"br"===t.name?"\n":e(t.children):(0,r.isCDATA)(t)?e(t.children):(0,r.isText)(t)?t.data:""},t.textContent=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,r.hasChildren)(t)&&!(0,r.isComment)(t)?e(t.children):(0,r.isText)(t)?t.data:""},t.innerText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,r.hasChildren)(t)&&(t.type===o.ElementType.Tag||(0,r.isCDATA)(t))?e(t.children):(0,r.isText)(t)?t.data:""}},5010:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prevElementSibling=t.nextElementSibling=t.getName=t.hasAttrib=t.getAttributeValue=t.getSiblings=t.getParent=t.getChildren=void 0;var i=n(7915),r=[];function s(e){var t;return null!==(t=e.children)&&void 0!==t?t:r}function o(e){return e.parent||null}t.getChildren=s,t.getParent=o,t.getSiblings=function(e){var t=o(e);if(null!=t)return s(t);for(var n=[e],i=e.prev,r=e.next;null!=i;)n.unshift(i),i=i.prev;for(;null!=r;)n.push(r),r=r.next;return n},t.getAttributeValue=function(e,t){var n;return null===(n=e.attribs)||void 0===n?void 0:n[t]},t.hasAttrib=function(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},t.getName=function(e){return e.name},t.nextElementSibling=function(e){for(var t=e.next;null!==t&&!(0,i.isTag)(t);)t=t.next;return t},t.prevElementSibling=function(e){for(var t=e.prev;null!==t&&!(0,i.isTag)(t);)t=t.prev;return t}},4076:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHTML=t.decodeHTMLStrict=t.decodeXML=void 0;var r=i(n(9323)),s=i(n(9591)),o=i(n(2586)),a=i(n(26)),l=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function c(e){var t=d(e);return function(e){return String(e).replace(l,t)}}t.decodeXML=c(o.default),t.decodeHTMLStrict=c(r.default);var h=function(e,t){return e<t?1:-1};function d(e){return function(t){if("#"===t.charAt(1)){var n=t.charAt(2);return"X"===n||"x"===n?a.default(parseInt(t.substr(3),16)):a.default(parseInt(t.substr(2),10))}return e[t.slice(1,-1)]||t}}t.decodeHTML=function(){for(var e=Object.keys(s.default).sort(h),t=Object.keys(r.default).sort(h),n=0,i=0;n<t.length;n++)e[i]===t[n]?(t[n]+=";?",i++):t[n]+=";";var o=new RegExp("&(?:"+t.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),a=d(r.default);function l(e){return";"!==e.substr(-1)&&(e+=";"),a(e)}return function(e){return String(e).replace(o,l)}}()},26:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(3600)),s=String.fromCodePoint||function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+String.fromCharCode(e)};t.default=function(e){return e>=55296&&e<=57343||e>1114111?"":(e in r.default&&(e=r.default[e]),s(e))}},7322:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=void 0;var r=h(i(n(2586)).default),s=d(r);t.encodeXML=g(r);var o,a,l=h(i(n(9323)).default),c=d(l);function h(e){return Object.keys(e).sort().reduce((function(t,n){return t[e[n]]="&"+n+";",t}),{})}function d(e){for(var t=[],n=[],i=0,r=Object.keys(e);i<r.length;i++){var s=r[i];1===s.length?t.push("\\"+s):n.push(s)}t.sort();for(var o=0;o<t.length-1;o++){for(var a=o;a<t.length-1&&t[a].charCodeAt(1)+1===t[a+1].charCodeAt(1);)a+=1;var l=1+a-o;l<3||t.splice(o,l,t[o]+"-"+t[a])}return n.unshift("["+t.join("")+"]"),new RegExp(n.join("|"),"g")}t.encodeHTML=(o=l,a=c,function(e){return e.replace(a,(function(e){return o[e]})).replace(u,m)}),t.encodeNonAsciiHTML=g(l);var u=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,p=null!=String.prototype.codePointAt?function(e){return e.codePointAt(0)}:function(e){return 1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536};function m(e){return"&#x"+(e.length>1?p(e):e.charCodeAt(0)).toString(16).toUpperCase()+";"}var f=new RegExp(s.source+"|"+u.source,"g");function g(e){return function(t){return t.replace(f,(function(t){return e[t]||m(t)}))}}t.escape=function(e){return e.replace(f,m)},t.escapeUTF8=function(e){return e.replace(s,m)}},5863:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.encodeHTML5=t.encodeHTML4=t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=t.encode=t.decodeStrict=t.decode=void 0;var i=n(4076),r=n(7322);t.decode=function(e,t){return(!t||t<=0?i.decodeXML:i.decodeHTML)(e)},t.decodeStrict=function(e,t){return(!t||t<=0?i.decodeXML:i.decodeHTMLStrict)(e)},t.encode=function(e,t){return(!t||t<=0?r.encodeXML:r.encodeHTML)(e)};var s=n(7322);Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return s.encodeXML}}),Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return s.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return s.encodeNonAsciiHTML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return s.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return s.escapeUTF8}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return s.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return s.encodeHTML}});var o=n(4076);Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return o.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return o.decodeXML}})},1102:(e,t,n)=>{"use strict";var i=n(6291),r=s(Error);function s(e){return t.displayName=e.displayName||e.name,t;function t(t){return t&&(t=i.apply(null,arguments)),new e(t)}}e.exports=r,r.eval=s(EvalError),r.range=s(RangeError),r.reference=s(ReferenceError),r.syntax=s(SyntaxError),r.type=s(TypeError),r.uri=s(URIError),r.create=s},6291:e=>{!function(){var t;function n(e){for(var t,n,i,r,s=1,o=[].slice.call(arguments),a=0,l=e.length,c="",h=!1,d=!1,u=function(){return o[s++]},p=function(){for(var n="";/\d/.test(e[a]);)n+=e[a++],t=e[a];return n.length>0?parseInt(n):null};a<l;++a)if(t=e[a],h)switch(h=!1,"."==t?(d=!1,t=e[++a]):"0"==t&&"."==e[a+1]?(d=!0,t=e[a+=2]):d=!0,r=p(),t){case"b":c+=parseInt(u(),10).toString(2);break;case"c":c+="string"==typeof(n=u())||n instanceof String?n:String.fromCharCode(parseInt(n,10));break;case"d":c+=parseInt(u(),10);break;case"f":i=String(parseFloat(u()).toFixed(r||6)),c+=d?i:i.replace(/^0/,"");break;case"j":c+=JSON.stringify(u());break;case"o":c+="0"+parseInt(u(),10).toString(8);break;case"s":c+=u();break;case"x":c+="0x"+parseInt(u(),10).toString(16);break;case"X":c+="0x"+parseInt(u(),10).toString(16).toUpperCase();break;default:c+=t}else"%"===t?h=!0:c+=t;return c}(t=e.exports=n).format=n,t.vsprintf=function(e,t){return n.apply(null,[e].concat(t))},"undefined"!=typeof console&&"function"==typeof console.log&&(t.printf=function(){console.log(n.apply(null,arguments))})}()},7802:e=>{function t(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(n){var i=e[n];"object"!=typeof i||Object.isFrozen(i)||t(i)})),e}var n=t,i=t;n.default=i;class r{constructor(e){void 0===e.data&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function s(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function o(e,...t){const n=Object.create(null);for(const t in e)n[t]=e[t];return t.forEach((function(e){for(const t in e)n[t]=e[t]})),n}const a=e=>!!e.kind;class l{constructor(e,t){this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){this.buffer+=s(e)}openNode(e){if(!a(e))return;let t=e.kind;e.sublanguage||(t=`${this.classPrefix}${t}`),this.span(t)}closeNode(e){a(e)&&(this.buffer+="</span>")}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}class c{constructor(){this.rootNode={children:[]},this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const t={kind:e,children:[]};this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){return"string"==typeof t?e.addText(t):t.children&&(e.openNode(t),t.children.forEach((t=>this._walk(e,t))),e.closeNode(t)),e}static _collapse(e){"string"!=typeof e&&e.children&&(e.children.every((e=>"string"==typeof e))?e.children=[e.children.join("")]:e.children.forEach((e=>{c._collapse(e)})))}}class h extends c{constructor(e){super(),this.options=e}addKeyword(e,t){""!==e&&(this.openNode(t),this.addText(e),this.closeNode())}addText(e){""!==e&&this.add(e)}addSublanguage(e,t){const n=e.root;n.kind=t,n.sublanguage=!0,this.add(n)}toHTML(){return new l(this,this.options).value()}finalize(){return!0}}function d(e){return e?"string"==typeof e?e:e.source:null}const u=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,p="[a-zA-Z]\\w*",m="[a-zA-Z_]\\w*",f="\\b\\d+(\\.\\d+)?",g="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",v="\\b(0b[01]+)",y={begin:"\\\\[\\s\\S]",relevance:0},x={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[y]},b={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[y]},w={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},C=function(e,t,n={}){const i=o({className:"comment",begin:e,end:t,contains:[]},n);return i.contains.push(w),i.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):",relevance:0}),i},_=C("//","$"),A=C("/\\*","\\*/"),S=C("#","$"),k={className:"number",begin:f,relevance:0},I={className:"number",begin:g,relevance:0},P={className:"number",begin:v,relevance:0},E={className:"number",begin:f+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},T={begin:/(?=\/[^/\n]*\/)/,contains:[{className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[y,{begin:/\[/,end:/\]/,relevance:0,contains:[y]}]}]},M={className:"title",begin:p,relevance:0},O={className:"title",begin:m,relevance:0};var D=Object.freeze({__proto__:null,MATCH_NOTHING_RE:/\b\B/,IDENT_RE:p,UNDERSCORE_IDENT_RE:m,NUMBER_RE:f,C_NUMBER_RE:g,BINARY_NUMBER_RE:v,RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG:(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=function(...e){return e.map((e=>d(e))).join("")}(t,/.*\b/,e.binary,/\b.*/)),o({className:"meta",begin:t,end:/$/,relevance:0,"on:begin":(e,t)=>{0!==e.index&&t.ignoreMatch()}},e)},BACKSLASH_ESCAPE:y,APOS_STRING_MODE:x,QUOTE_STRING_MODE:b,PHRASAL_WORDS_MODE:w,COMMENT:C,C_LINE_COMMENT_MODE:_,C_BLOCK_COMMENT_MODE:A,HASH_COMMENT_MODE:S,NUMBER_MODE:k,C_NUMBER_MODE:I,BINARY_NUMBER_MODE:P,CSS_NUMBER_MODE:E,REGEXP_MODE:T,TITLE_MODE:M,UNDERSCORE_TITLE_MODE:O,METHOD_GUARD:{begin:"\\.\\s*[a-zA-Z_]\\w*",relevance:0},END_SAME_AS_BEGIN:function(e){return Object.assign(e,{"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}})}});function $(e,t){"."===e.input[e.index-1]&&t.ignoreMatch()}function B(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=$,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,void 0===e.relevance&&(e.relevance=0))}function L(e,t){Array.isArray(e.illegal)&&(e.illegal=function(...e){return"("+e.map((e=>d(e))).join("|")+")"}(...e.illegal))}function N(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function R(e,t){void 0===e.relevance&&(e.relevance=1)}const F=["of","and","for","in","not","or","if","then","parent","list","value"];function Z(e,t,n="keyword"){const i={};return"string"==typeof e?r(n,e.split(" ")):Array.isArray(e)?r(n,e):Object.keys(e).forEach((function(n){Object.assign(i,Z(e[n],t,n))})),i;function r(e,n){t&&(n=n.map((e=>e.toLowerCase()))),n.forEach((function(t){const n=t.split("|");i[n[0]]=[e,j(n[0],n[1])]}))}}function j(e,t){return t?Number(t):function(e){return F.includes(e.toLowerCase())}(e)?0:1}function z(e,{plugins:t}){function n(t,n){return new RegExp(d(t),"m"+(e.case_insensitive?"i":"")+(n?"g":""))}class i{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(e,t){t.position=this.position++,this.matchIndexes[this.matchAt]=t,this.regexes.push([t,e]),this.matchAt+=function(e){return new RegExp(e.toString()+"|").exec("").length-1}(e)+1}compile(){0===this.regexes.length&&(this.exec=()=>null);const e=this.regexes.map((e=>e[1]));this.matcherRe=n(function(e,t="|"){let n=0;return e.map((e=>{n+=1;const t=n;let i=d(e),r="";for(;i.length>0;){const e=u.exec(i);if(!e){r+=i;break}r+=i.substring(0,e.index),i=i.substring(e.index+e[0].length),"\\"===e[0][0]&&e[1]?r+="\\"+String(Number(e[1])+t):(r+=e[0],"("===e[0]&&n++)}return r})).map((e=>`(${e})`)).join(t)}(e),!0),this.lastIndex=0}exec(e){this.matcherRe.lastIndex=this.lastIndex;const t=this.matcherRe.exec(e);if(!t)return null;const n=t.findIndex(((e,t)=>t>0&&void 0!==e)),i=this.matchIndexes[n];return t.splice(0,n),Object.assign(t,i)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(e){if(this.multiRegexes[e])return this.multiRegexes[e];const t=new i;return this.rules.slice(e).forEach((([e,n])=>t.addRule(e,n))),t.compile(),this.multiRegexes[e]=t,t}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(e,t){this.rules.push([e,t]),"begin"===t.type&&this.count++}exec(e){const t=this.getMatcher(this.regexIndex);t.lastIndex=this.lastIndex;let n=t.exec(e);if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{const t=this.getMatcher(0);t.lastIndex=this.lastIndex+1,n=t.exec(e)}return n&&(this.regexIndex+=n.position+1,this.regexIndex===this.count&&this.considerAll()),n}}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=o(e.classNameAliases||{}),function t(i,s){const a=i;if(i.isCompiled)return a;[N].forEach((e=>e(i,s))),e.compilerExtensions.forEach((e=>e(i,s))),i.__beforeBegin=null,[B,L,R].forEach((e=>e(i,s))),i.isCompiled=!0;let l=null;if("object"==typeof i.keywords&&(l=i.keywords.$pattern,delete i.keywords.$pattern),i.keywords&&(i.keywords=Z(i.keywords,e.case_insensitive)),i.lexemes&&l)throw new Error("ERR: Prefer `keywords.$pattern` to `mode.lexemes`, BOTH are not allowed. (see mode reference) ");return l=l||i.lexemes||/\w+/,a.keywordPatternRe=n(l,!0),s&&(i.begin||(i.begin=/\B|\b/),a.beginRe=n(i.begin),i.endSameAsBegin&&(i.end=i.begin),i.end||i.endsWithParent||(i.end=/\B|\b/),i.end&&(a.endRe=n(i.end)),a.terminatorEnd=d(i.end)||"",i.endsWithParent&&s.terminatorEnd&&(a.terminatorEnd+=(i.end?"|":"")+s.terminatorEnd)),i.illegal&&(a.illegalRe=n(i.illegal)),i.contains||(i.contains=[]),i.contains=[].concat(...i.contains.map((function(e){return function(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map((function(t){return o(e,{variants:null},t)}))),e.cachedVariants?e.cachedVariants:U(e)?o(e,{starts:e.starts?o(e.starts):null}):Object.isFrozen(e)?o(e):e}("self"===e?i:e)}))),i.contains.forEach((function(e){t(e,a)})),i.starts&&t(i.starts,s),a.matcher=function(e){const t=new r;return e.contains.forEach((e=>t.addRule(e.begin,{rule:e,type:"begin"}))),e.terminatorEnd&&t.addRule(e.terminatorEnd,{type:"end"}),e.illegal&&t.addRule(e.illegal,{type:"illegal"}),t}(a),a}(e)}function U(e){return!!e&&(e.endsWithParent||U(e.starts))}function H(e){const t={props:["language","code","autodetect"],data:function(){return{detectedLanguage:"",unknownLanguage:!1}},computed:{className(){return this.unknownLanguage?"":"hljs "+this.detectedLanguage},highlighted(){if(!this.autoDetect&&!e.getLanguage(this.language))return console.warn(`The language "${this.language}" you specified could not be found.`),this.unknownLanguage=!0,s(this.code);let t={};return this.autoDetect?(t=e.highlightAuto(this.code),this.detectedLanguage=t.language):(t=e.highlight(this.language,this.code,this.ignoreIllegals),this.detectedLanguage=this.language),t.value},autoDetect(){return!this.language||(e=this.autodetect,Boolean(e||""===e));var e},ignoreIllegals:()=>!0},render(e){return e("pre",{},[e("code",{class:this.className,domProps:{innerHTML:this.highlighted}})])}};return{Component:t,VuePlugin:{install(e){e.component("highlightjs",t)}}}}const V={"after:highlightElement":({el:e,result:t,text:n})=>{const i=G(e);if(!i.length)return;const r=document.createElement("div");r.innerHTML=t.value,t.value=function(e,t,n){let i=0,r="";const o=[];function a(){return e.length&&t.length?e[0].offset!==t[0].offset?e[0].offset<t[0].offset?e:t:"start"===t[0].event?e:t:e.length?e:t}function l(e){r+="<"+q(e)+[].map.call(e.attributes,(function(e){return" "+e.nodeName+'="'+s(e.value)+'"'})).join("")+">"}function c(e){r+="</"+q(e)+">"}function h(e){("start"===e.event?l:c)(e.node)}for(;e.length||t.length;){let t=a();if(r+=s(n.substring(i,t[0].offset)),i=t[0].offset,t===e){o.reverse().forEach(c);do{h(t.splice(0,1)[0]),t=a()}while(t===e&&t.length&&t[0].offset===i);o.reverse().forEach(l)}else"start"===t[0].event?o.push(t[0].node):o.pop(),h(t.splice(0,1)[0])}return r+s(n.substr(i))}(i,G(r),n)}};function q(e){return e.nodeName.toLowerCase()}function G(e){const t=[];return function e(n,i){for(let r=n.firstChild;r;r=r.nextSibling)3===r.nodeType?i+=r.nodeValue.length:1===r.nodeType&&(t.push({event:"start",offset:i,node:r}),i=e(r,i),q(r).match(/br|hr|img|input/)||t.push({event:"stop",offset:i,node:r}));return i}(e,0),t}const W={},K=e=>{console.error(e)},J=(e,...t)=>{console.log(`WARN: ${e}`,...t)},Y=(e,t)=>{W[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),W[`${e}/${t}`]=!0)},Q=s,X=o,ee=Symbol("nomatch");var te=function(e){const t=Object.create(null),i=Object.create(null),s=[];let o=!0;const a=/(^(<[^>]+>|\t|)+|\n)/gm,l="Could not find the language '{}', did you forget to load/include a language module?",c={disableAutodetect:!0,name:"Plain text",contains:[]};let d={noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:null,__emitter:h};function u(e){return d.noHighlightRe.test(e)}function p(e,t,n,i){let r="",s="";"object"==typeof t?(r=e,n=t.ignoreIllegals,s=t.language,i=void 0):(Y("10.7.0","highlight(lang, code, ...args) has been deprecated."),Y("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),s=e,r=t);const o={code:r,language:s};k("before:highlight",o);const a=o.result?o.result:m(o.language,o.code,n,i);return a.code=o.code,k("after:highlight",a),a}function m(e,n,i,a){function c(e,t){const n=b.case_insensitive?t[0].toLowerCase():t[0];return Object.prototype.hasOwnProperty.call(e.keywords,n)&&e.keywords[n]}function h(){null!=A.subLanguage?function(){if(""===I)return;let e=null;if("string"==typeof A.subLanguage){if(!t[A.subLanguage])return void k.addText(I);e=m(A.subLanguage,I,!0,S[A.subLanguage]),S[A.subLanguage]=e.top}else e=f(I,A.subLanguage.length?A.subLanguage:null);A.relevance>0&&(P+=e.relevance),k.addSublanguage(e.emitter,e.language)}():function(){if(!A.keywords)return void k.addText(I);let e=0;A.keywordPatternRe.lastIndex=0;let t=A.keywordPatternRe.exec(I),n="";for(;t;){n+=I.substring(e,t.index);const i=c(A,t);if(i){const[e,r]=i;if(k.addText(n),n="",P+=r,e.startsWith("_"))n+=t[0];else{const n=b.classNameAliases[e]||e;k.addKeyword(t[0],n)}}else n+=t[0];e=A.keywordPatternRe.lastIndex,t=A.keywordPatternRe.exec(I)}n+=I.substr(e),k.addText(n)}(),I=""}function u(e){return e.className&&k.openNode(b.classNameAliases[e.className]||e.className),A=Object.create(e,{parent:{value:A}}),A}function p(e,t,n){let i=function(e,t){const n=e&&e.exec(t);return n&&0===n.index}(e.endRe,n);if(i){if(e["on:end"]){const n=new r(e);e["on:end"](t,n),n.isMatchIgnored&&(i=!1)}if(i){for(;e.endsParent&&e.parent;)e=e.parent;return e}}if(e.endsWithParent)return p(e.parent,t,n)}function g(e){return 0===A.matcher.regexIndex?(I+=e[0],1):(M=!0,0)}function v(e){const t=e[0],i=n.substr(e.index),r=p(A,e,i);if(!r)return ee;const s=A;s.skip?I+=t:(s.returnEnd||s.excludeEnd||(I+=t),h(),s.excludeEnd&&(I=t));do{A.className&&k.closeNode(),A.skip||A.subLanguage||(P+=A.relevance),A=A.parent}while(A!==r.parent);return r.starts&&(r.endSameAsBegin&&(r.starts.endRe=r.endRe),u(r.starts)),s.returnEnd?0:t.length}let y={};function x(t,s){const a=s&&s[0];if(I+=t,null==a)return h(),0;if("begin"===y.type&&"end"===s.type&&y.index===s.index&&""===a){if(I+=n.slice(s.index,s.index+1),!o){const t=new Error("0 width match regex");throw t.languageName=e,t.badRule=y.rule,t}return 1}if(y=s,"begin"===s.type)return function(e){const t=e[0],n=e.rule,i=new r(n),s=[n.__beforeBegin,n["on:begin"]];for(const n of s)if(n&&(n(e,i),i.isMatchIgnored))return g(t);return n&&n.endSameAsBegin&&(n.endRe=new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),n.skip?I+=t:(n.excludeBegin&&(I+=t),h(),n.returnBegin||n.excludeBegin||(I=t)),u(n),n.returnBegin?0:t.length}(s);if("illegal"===s.type&&!i){const e=new Error('Illegal lexeme "'+a+'" for mode "'+(A.className||"<unnamed>")+'"');throw e.mode=A,e}if("end"===s.type){const e=v(s);if(e!==ee)return e}if("illegal"===s.type&&""===a)return 1;if(T>1e5&&T>3*s.index)throw new Error("potential infinite loop, way more iterations than matches");return I+=a,a.length}const b=_(e);if(!b)throw K(l.replace("{}",e)),new Error('Unknown language: "'+e+'"');const w=z(b,{plugins:s});let C="",A=a||w;const S={},k=new d.__emitter(d);!function(){const e=[];for(let t=A;t!==b;t=t.parent)t.className&&e.unshift(t.className);e.forEach((e=>k.openNode(e)))}();let I="",P=0,E=0,T=0,M=!1;try{for(A.matcher.considerAll();;){T++,M?M=!1:A.matcher.considerAll(),A.matcher.lastIndex=E;const e=A.matcher.exec(n);if(!e)break;const t=x(n.substring(E,e.index),e);E=e.index+t}return x(n.substr(E)),k.closeAllNodes(),k.finalize(),C=k.toHTML(),{relevance:Math.floor(P),value:C,language:e,illegal:!1,emitter:k,top:A}}catch(t){if(t.message&&t.message.includes("Illegal"))return{illegal:!0,illegalBy:{msg:t.message,context:n.slice(E-100,E+100),mode:t.mode},sofar:C,relevance:0,value:Q(n),emitter:k};if(o)return{illegal:!1,relevance:0,value:Q(n),emitter:k,language:e,top:A,errorRaised:t};throw t}}function f(e,n){n=n||d.languages||Object.keys(t);const i=function(e){const t={relevance:0,emitter:new d.__emitter(d),value:Q(e),illegal:!1,top:c};return t.emitter.addText(e),t}(e),r=n.filter(_).filter(S).map((t=>m(t,e,!1)));r.unshift(i);const s=r.sort(((e,t)=>{if(e.relevance!==t.relevance)return t.relevance-e.relevance;if(e.language&&t.language){if(_(e.language).supersetOf===t.language)return 1;if(_(t.language).supersetOf===e.language)return-1}return 0})),[o,a]=s,l=o;return l.second_best=a,l}const g={"before:highlightElement":({el:e})=>{d.useBR&&(e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ /]*>/g,"\n"))},"after:highlightElement":({result:e})=>{d.useBR&&(e.value=e.value.replace(/\n/g,"<br>"))}},v=/^(<[^>]+>|\t)+/gm,y={"after:highlightElement":({result:e})=>{d.tabReplace&&(e.value=e.value.replace(v,(e=>e.replace(/\t/g,d.tabReplace))))}};function x(e){let t=null;const n=function(e){let t=e.className+" ";t+=e.parentNode?e.parentNode.className:"";const n=d.languageDetectRe.exec(t);if(n){const t=_(n[1]);return t||(J(l.replace("{}",n[1])),J("Falling back to no-highlight mode for this block.",e)),t?n[1]:"no-highlight"}return t.split(/\s+/).find((e=>u(e)||_(e)))}(e);if(u(n))return;k("before:highlightElement",{el:e,language:n}),t=e;const r=t.textContent,s=n?p(r,{language:n,ignoreIllegals:!0}):f(r);k("after:highlightElement",{el:e,result:s,text:r}),e.innerHTML=s.value,function(e,t,n){const r=t?i[t]:n;e.classList.add("hljs"),r&&e.classList.add(r)}(e,n,s.language),e.result={language:s.language,re:s.relevance,relavance:s.relevance},s.second_best&&(e.second_best={language:s.second_best.language,re:s.second_best.relevance,relavance:s.second_best.relevance})}const b=()=>{b.called||(b.called=!0,Y("10.6.0","initHighlighting() is deprecated.  Use highlightAll() instead."),document.querySelectorAll("pre code").forEach(x))};let w=!1;function C(){"loading"!==document.readyState?document.querySelectorAll("pre code").forEach(x):w=!0}function _(e){return e=(e||"").toLowerCase(),t[e]||t[i[e]]}function A(e,{languageName:t}){"string"==typeof e&&(e=[e]),e.forEach((e=>{i[e.toLowerCase()]=t}))}function S(e){const t=_(e);return t&&!t.disableAutodetect}function k(e,t){const n=e;s.forEach((function(e){e[n]&&e[n](t)}))}"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",(function(){w&&C()}),!1),Object.assign(e,{highlight:p,highlightAuto:f,highlightAll:C,fixMarkup:function(e){return Y("10.2.0","fixMarkup will be removed entirely in v11.0"),Y("10.2.0","Please see https://github.com/highlightjs/highlight.js/issues/2534"),t=e,d.tabReplace||d.useBR?t.replace(a,(e=>"\n"===e?d.useBR?"<br>":e:d.tabReplace?e.replace(/\t/g,d.tabReplace):e)):t;var t},highlightElement:x,highlightBlock:function(e){return Y("10.7.0","highlightBlock will be removed entirely in v12.0"),Y("10.7.0","Please use highlightElement now."),x(e)},configure:function(e){e.useBR&&(Y("10.3.0","'useBR' will be removed entirely in v11.0"),Y("10.3.0","Please see https://github.com/highlightjs/highlight.js/issues/2559")),d=X(d,e)},initHighlighting:b,initHighlightingOnLoad:function(){Y("10.6.0","initHighlightingOnLoad() is deprecated.  Use highlightAll() instead."),w=!0},registerLanguage:function(n,i){let r=null;try{r=i(e)}catch(e){if(K("Language definition for '{}' could not be registered.".replace("{}",n)),!o)throw e;K(e),r=c}r.name||(r.name=n),t[n]=r,r.rawDefinition=i.bind(null,e),r.aliases&&A(r.aliases,{languageName:n})},unregisterLanguage:function(e){delete t[e];for(const t of Object.keys(i))i[t]===e&&delete i[t]},listLanguages:function(){return Object.keys(t)},getLanguage:_,registerAliases:A,requireLanguage:function(e){Y("10.4.0","requireLanguage will be removed entirely in v11."),Y("10.4.0","Please see https://github.com/highlightjs/highlight.js/pull/2844");const t=_(e);if(t)return t;throw new Error("The '{}' language is required, but not loaded.".replace("{}",e))},autoDetection:S,inherit:X,addPlugin:function(e){!function(e){e["before:highlightBlock"]&&!e["before:highlightElement"]&&(e["before:highlightElement"]=t=>{e["before:highlightBlock"](Object.assign({block:t.el},t))}),e["after:highlightBlock"]&&!e["after:highlightElement"]&&(e["after:highlightElement"]=t=>{e["after:highlightBlock"](Object.assign({block:t.el},t))})}(e),s.push(e)},vuePlugin:H(e).VuePlugin}),e.debugMode=function(){o=!1},e.safeMode=function(){o=!0},e.versionString="10.7.3";for(const e in D)"object"==typeof D[e]&&n(D[e]);return Object.assign(e,D),e.addPlugin(g),e.addPlugin(V),e.addPlugin(y),e}({});e.exports=te},3870:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return o(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseFeed=t.FeedHandler=void 0;var c,h,d=l(n(7915)),u=a(n(9432)),p=n(763);!function(e){e[e.image=0]="image",e[e.audio=1]="audio",e[e.video=2]="video",e[e.document=3]="document",e[e.executable=4]="executable"}(c||(c={})),function(e){e[e.sample=0]="sample",e[e.full=1]="full",e[e.nonstop=2]="nonstop"}(h||(h={}));var m=function(e){function t(t,n){return"object"==typeof t&&(n=t=void 0),e.call(this,t,n)||this}return r(t,e),t.prototype.onend=function(){var e,t,n=v(w,this.dom);if(n){var i={};if("feed"===n.name){var r=n.children;i.type="atom",b(i,"id","id",r),b(i,"title","title",r);var s=x("href",v("link",r));s&&(i.link=s),b(i,"description","subtitle",r),(o=y("updated",r))&&(i.updated=new Date(o)),b(i,"author","email",r,!0),i.items=g("entry",r).map((function(e){var t={},n=e.children;b(t,"id","id",n),b(t,"title","title",n);var i=x("href",v("link",n));i&&(t.link=i);var r=y("summary",n)||y("content",n);r&&(t.description=r);var s=y("updated",n);return s&&(t.pubDate=new Date(s)),t.media=f(n),t}))}else{var o;r=null!==(t=null===(e=v("channel",n.children))||void 0===e?void 0:e.children)&&void 0!==t?t:[],i.type=n.name.substr(0,3),i.id="",b(i,"title","title",r),b(i,"link","link",r),b(i,"description","description",r),(o=y("lastBuildDate",r))&&(i.updated=new Date(o)),b(i,"author","managingEditor",r,!0),i.items=g("item",n.children).map((function(e){var t={},n=e.children;b(t,"id","guid",n),b(t,"title","title",n),b(t,"link","link",n),b(t,"description","description",n);var i=y("pubDate",n);return i&&(t.pubDate=new Date(i)),t.media=f(n),t}))}this.feed=i,this.handleCallback(null)}else this.handleCallback(new Error("couldn't find root of feed"))},t}(d.default);function f(e){return g("media:content",e).map((function(e){var t={medium:e.attribs.medium,isDefault:!!e.attribs.isDefault};return e.attribs.url&&(t.url=e.attribs.url),e.attribs.fileSize&&(t.fileSize=parseInt(e.attribs.fileSize,10)),e.attribs.type&&(t.type=e.attribs.type),e.attribs.expression&&(t.expression=e.attribs.expression),e.attribs.bitrate&&(t.bitrate=parseInt(e.attribs.bitrate,10)),e.attribs.framerate&&(t.framerate=parseInt(e.attribs.framerate,10)),e.attribs.samplingrate&&(t.samplingrate=parseInt(e.attribs.samplingrate,10)),e.attribs.channels&&(t.channels=parseInt(e.attribs.channels,10)),e.attribs.duration&&(t.duration=parseInt(e.attribs.duration,10)),e.attribs.height&&(t.height=parseInt(e.attribs.height,10)),e.attribs.width&&(t.width=parseInt(e.attribs.width,10)),e.attribs.lang&&(t.lang=e.attribs.lang),t}))}function g(e,t){return u.getElementsByTagName(e,t,!0)}function v(e,t){return u.getElementsByTagName(e,t,!0,1)[0]}function y(e,t,n){return void 0===n&&(n=!1),u.getText(u.getElementsByTagName(e,t,n,1)).trim()}function x(e,t){return t?t.attribs[e]:null}function b(e,t,n,i,r){void 0===r&&(r=!1);var s=y(n,i,r);s&&(e[t]=s)}function w(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}t.FeedHandler=m,t.parseFeed=function(e,t){void 0===t&&(t={xmlMode:!0});var n=new m(t);return new p.Parser(n,t).end(e),n.feed}},763:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var r=i(n(9889)),s=new Set(["input","option","optgroup","select","button","datalist","textarea"]),o=new Set(["p"]),a={tr:new Set(["tr","th","td"]),th:new Set(["th"]),td:new Set(["thead","th","td"]),body:new Set(["head","link","script"]),li:new Set(["li"]),p:o,h1:o,h2:o,h3:o,h4:o,h5:o,h6:o,select:s,input:s,output:s,button:s,datalist:s,textarea:s,option:new Set(["option"]),optgroup:new Set(["optgroup","option"]),dd:new Set(["dt","dd"]),dt:new Set(["dt","dd"]),address:o,article:o,aside:o,blockquote:o,details:o,div:o,dl:o,fieldset:o,figcaption:o,figure:o,footer:o,form:o,header:o,hr:o,main:o,nav:o,ol:o,pre:o,section:o,table:o,ul:o,rt:new Set(["rt","rp"]),rp:new Set(["rt","rp"]),tbody:new Set(["thead","tbody"]),tfoot:new Set(["thead","tbody"])},l=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),c=new Set(["math","svg"]),h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),d=/\s|\//,u=function(){function e(e,t){var n,i,s,o,a;void 0===t&&(t={}),this.startIndex=0,this.endIndex=null,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.options=t,this.cbs=null!=e?e:{},this.lowerCaseTagNames=null!==(n=t.lowerCaseTags)&&void 0!==n?n:!t.xmlMode,this.lowerCaseAttributeNames=null!==(i=t.lowerCaseAttributeNames)&&void 0!==i?i:!t.xmlMode,this.tokenizer=new(null!==(s=t.Tokenizer)&&void 0!==s?s:r.default)(this.options,this),null===(a=(o=this.cbs).onparserinit)||void 0===a||a.call(o,this)}return e.prototype.updatePosition=function(e){null===this.endIndex?this.tokenizer.sectionStart<=e?this.startIndex=0:this.startIndex=this.tokenizer.sectionStart-e:this.startIndex=this.endIndex+1,this.endIndex=this.tokenizer.getAbsoluteIndex()},e.prototype.ontext=function(e){var t,n;this.updatePosition(1),this.endIndex--,null===(n=(t=this.cbs).ontext)||void 0===n||n.call(t,e)},e.prototype.onopentagname=function(e){var t,n;if(this.lowerCaseTagNames&&(e=e.toLowerCase()),this.tagname=e,!this.options.xmlMode&&Object.prototype.hasOwnProperty.call(a,e))for(var i=void 0;this.stack.length>0&&a[e].has(i=this.stack[this.stack.length-1]);)this.onclosetag(i);!this.options.xmlMode&&l.has(e)||(this.stack.push(e),c.has(e)?this.foreignContext.push(!0):h.has(e)&&this.foreignContext.push(!1)),null===(n=(t=this.cbs).onopentagname)||void 0===n||n.call(t,e),this.cbs.onopentag&&(this.attribs={})},e.prototype.onopentagend=function(){var e,t;this.updatePosition(1),this.attribs&&(null===(t=(e=this.cbs).onopentag)||void 0===t||t.call(e,this.tagname,this.attribs),this.attribs=null),!this.options.xmlMode&&this.cbs.onclosetag&&l.has(this.tagname)&&this.cbs.onclosetag(this.tagname),this.tagname=""},e.prototype.onclosetag=function(e){if(this.updatePosition(1),this.lowerCaseTagNames&&(e=e.toLowerCase()),(c.has(e)||h.has(e))&&this.foreignContext.pop(),!this.stack.length||!this.options.xmlMode&&l.has(e))this.options.xmlMode||"br"!==e&&"p"!==e||(this.onopentagname(e),this.closeCurrentTag());else{var t=this.stack.lastIndexOf(e);if(-1!==t)if(this.cbs.onclosetag)for(t=this.stack.length-t;t--;)this.cbs.onclosetag(this.stack.pop());else this.stack.length=t;else"p"!==e||this.options.xmlMode||(this.onopentagname(e),this.closeCurrentTag())}},e.prototype.onselfclosingtag=function(){this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?this.closeCurrentTag():this.onopentagend()},e.prototype.closeCurrentTag=function(){var e,t,n=this.tagname;this.onopentagend(),this.stack[this.stack.length-1]===n&&(null===(t=(e=this.cbs).onclosetag)||void 0===t||t.call(e,n),this.stack.pop())},e.prototype.onattribname=function(e){this.lowerCaseAttributeNames&&(e=e.toLowerCase()),this.attribname=e},e.prototype.onattribdata=function(e){this.attribvalue+=e},e.prototype.onattribend=function(e){var t,n;null===(n=(t=this.cbs).onattribute)||void 0===n||n.call(t,this.attribname,this.attribvalue,e),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribname="",this.attribvalue=""},e.prototype.getInstructionName=function(e){var t=e.search(d),n=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n},e.prototype.ondeclaration=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("!"+t,"!"+e)}},e.prototype.onprocessinginstruction=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("?"+t,"?"+e)}},e.prototype.oncomment=function(e){var t,n,i,r;this.updatePosition(4),null===(n=(t=this.cbs).oncomment)||void 0===n||n.call(t,e),null===(r=(i=this.cbs).oncommentend)||void 0===r||r.call(i)},e.prototype.oncdata=function(e){var t,n,i,r,s,o;this.updatePosition(1),this.options.xmlMode||this.options.recognizeCDATA?(null===(n=(t=this.cbs).oncdatastart)||void 0===n||n.call(t),null===(r=(i=this.cbs).ontext)||void 0===r||r.call(i,e),null===(o=(s=this.cbs).oncdataend)||void 0===o||o.call(s)):this.oncomment("[CDATA["+e+"]]")},e.prototype.onerror=function(e){var t,n;null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,e)},e.prototype.onend=function(){var e,t;if(this.cbs.onclosetag)for(var n=this.stack.length;n>0;this.cbs.onclosetag(this.stack[--n]));null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)},e.prototype.reset=function(){var e,t,n,i;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack=[],null===(i=(n=this.cbs).onparserinit)||void 0===i||i.call(n,this)},e.prototype.parseComplete=function(e){this.reset(),this.end(e)},e.prototype.write=function(e){this.tokenizer.write(e)},e.prototype.end=function(e){this.tokenizer.end(e)},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){this.tokenizer.resume()},e.prototype.parseChunk=function(e){this.write(e)},e.prototype.done=function(e){this.end(e)},e}();t.Parser=u},9889:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(26)),s=i(n(9323)),o=i(n(9591)),a=i(n(2586));function l(e){return" "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e}function c(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}function h(e,t,n){var i=e.toLowerCase();return e===i?function(e,r){r===i?e._state=t:(e._state=n,e._index--)}:function(r,s){s===i||s===e?r._state=t:(r._state=n,r._index--)}}function d(e,t){var n=e.toLowerCase();return function(i,r){r===n||r===e?i._state=t:(i._state=3,i._index--)}}var u=h("C",24,16),p=h("D",25,16),m=h("A",26,16),f=h("T",27,16),g=h("A",28,16),v=d("R",35),y=d("I",36),x=d("P",37),b=d("T",38),w=h("R",40,1),C=h("I",41,1),_=h("P",42,1),A=h("T",43,1),S=d("Y",45),k=d("L",46),I=d("E",47),P=h("Y",49,1),E=h("L",50,1),T=h("E",51,1),M=d("I",54),O=d("T",55),D=d("L",56),$=d("E",57),B=h("I",58,1),L=h("T",59,1),N=h("L",60,1),R=h("E",61,1),F=h("#",63,64),Z=h("X",66,65),j=function(){function e(e,t){var n;this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1,this.cbs=t,this.xmlMode=!!(null==e?void 0:e.xmlMode),this.decodeEntities=null===(n=null==e?void 0:e.decodeEntities)||void 0===n||n}return e.prototype.reset=function(){this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1},e.prototype.write=function(e){this.ended&&this.cbs.onerror(Error(".write() after done!")),this.buffer+=e,this.parse()},e.prototype.end=function(e){this.ended&&this.cbs.onerror(Error(".end() after done!")),e&&this.write(e),this.ended=!0,this.running&&this.finish()},e.prototype.pause=function(){this.running=!1},e.prototype.resume=function(){this.running=!0,this._index<this.buffer.length&&this.parse(),this.ended&&this.finish()},e.prototype.getAbsoluteIndex=function(){return this.bufferOffset+this._index},e.prototype.stateText=function(e){"<"===e?(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this._state=2,this.sectionStart=this._index):!this.decodeEntities||"&"!==e||1!==this.special&&4!==this.special||(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this.baseState=1,this._state=62,this.sectionStart=this._index)},e.prototype.isTagStartChar=function(e){return c(e)||this.xmlMode&&!l(e)&&"/"!==e&&">"!==e},e.prototype.stateBeforeTagName=function(e){"/"===e?this._state=5:"<"===e?(this.cbs.ontext(this.getSection()),this.sectionStart=this._index):">"===e||1!==this.special||l(e)?this._state=1:"!"===e?(this._state=15,this.sectionStart=this._index+1):"?"===e?(this._state=17,this.sectionStart=this._index+1):this.isTagStartChar(e)?(this._state=this.xmlMode||"s"!==e&&"S"!==e?this.xmlMode||"t"!==e&&"T"!==e?3:52:32,this.sectionStart=this._index):this._state=1},e.prototype.stateInTagName=function(e){("/"===e||">"===e||l(e))&&(this.emitToken("onopentagname"),this._state=8,this._index--)},e.prototype.stateBeforeClosingTagName=function(e){l(e)||(">"===e?this._state=1:1!==this.special?4===this.special||"s"!==e&&"S"!==e?4!==this.special||"t"!==e&&"T"!==e?(this._state=1,this._index--):this._state=53:this._state=33:this.isTagStartChar(e)?(this._state=6,this.sectionStart=this._index):(this._state=20,this.sectionStart=this._index))},e.prototype.stateInClosingTagName=function(e){(">"===e||l(e))&&(this.emitToken("onclosetag"),this._state=7,this._index--)},e.prototype.stateAfterClosingTagName=function(e){">"===e&&(this._state=1,this.sectionStart=this._index+1)},e.prototype.stateBeforeAttributeName=function(e){">"===e?(this.cbs.onopentagend(),this._state=1,this.sectionStart=this._index+1):"/"===e?this._state=4:l(e)||(this._state=9,this.sectionStart=this._index)},e.prototype.stateInSelfClosingTag=function(e){">"===e?(this.cbs.onselfclosingtag(),this._state=1,this.sectionStart=this._index+1,this.special=1):l(e)||(this._state=8,this._index--)},e.prototype.stateInAttributeName=function(e){("="===e||"/"===e||">"===e||l(e))&&(this.cbs.onattribname(this.getSection()),this.sectionStart=-1,this._state=10,this._index--)},e.prototype.stateAfterAttributeName=function(e){"="===e?this._state=11:"/"===e||">"===e?(this.cbs.onattribend(void 0),this._state=8,this._index--):l(e)||(this.cbs.onattribend(void 0),this._state=9,this.sectionStart=this._index)},e.prototype.stateBeforeAttributeValue=function(e){'"'===e?(this._state=12,this.sectionStart=this._index+1):"'"===e?(this._state=13,this.sectionStart=this._index+1):l(e)||(this._state=14,this.sectionStart=this._index,this._index--)},e.prototype.handleInAttributeValue=function(e,t){e===t?(this.emitToken("onattribdata"),this.cbs.onattribend(t),this._state=8):this.decodeEntities&&"&"===e&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},e.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,'"')},e.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,"'")},e.prototype.stateInAttributeValueNoQuotes=function(e){l(e)||">"===e?(this.emitToken("onattribdata"),this.cbs.onattribend(null),this._state=8,this._index--):this.decodeEntities&&"&"===e&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},e.prototype.stateBeforeDeclaration=function(e){this._state="["===e?23:"-"===e?18:16},e.prototype.stateInDeclaration=function(e){">"===e&&(this.cbs.ondeclaration(this.getSection()),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateInProcessingInstruction=function(e){">"===e&&(this.cbs.onprocessinginstruction(this.getSection()),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateBeforeComment=function(e){"-"===e?(this._state=19,this.sectionStart=this._index+1):this._state=16},e.prototype.stateInComment=function(e){"-"===e&&(this._state=21)},e.prototype.stateInSpecialComment=function(e){">"===e&&(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index)),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateAfterComment1=function(e){this._state="-"===e?22:19},e.prototype.stateAfterComment2=function(e){">"===e?(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):"-"!==e&&(this._state=19)},e.prototype.stateBeforeCdata6=function(e){"["===e?(this._state=29,this.sectionStart=this._index+1):(this._state=16,this._index--)},e.prototype.stateInCdata=function(e){"]"===e&&(this._state=30)},e.prototype.stateAfterCdata1=function(e){this._state="]"===e?31:29},e.prototype.stateAfterCdata2=function(e){">"===e?(this.cbs.oncdata(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):"]"!==e&&(this._state=29)},e.prototype.stateBeforeSpecialS=function(e){"c"===e||"C"===e?this._state=34:"t"===e||"T"===e?this._state=44:(this._state=3,this._index--)},e.prototype.stateBeforeSpecialSEnd=function(e){2!==this.special||"c"!==e&&"C"!==e?3!==this.special||"t"!==e&&"T"!==e?this._state=1:this._state=48:this._state=39},e.prototype.stateBeforeSpecialLast=function(e,t){("/"===e||">"===e||l(e))&&(this.special=t),this._state=3,this._index--},e.prototype.stateAfterSpecialLast=function(e,t){">"===e||l(e)?(this.special=1,this._state=6,this.sectionStart=this._index-t,this._index--):this._state=1},e.prototype.parseFixedEntity=function(e){if(void 0===e&&(e=this.xmlMode?a.default:s.default),this.sectionStart+1<this._index){var t=this.buffer.substring(this.sectionStart+1,this._index);Object.prototype.hasOwnProperty.call(e,t)&&(this.emitPartial(e[t]),this.sectionStart=this._index+1)}},e.prototype.parseLegacyEntity=function(){for(var e=this.sectionStart+1,t=Math.min(this._index-e,6);t>=2;){var n=this.buffer.substr(e,t);if(Object.prototype.hasOwnProperty.call(o.default,n))return this.emitPartial(o.default[n]),void(this.sectionStart+=t+1);t--}},e.prototype.stateInNamedEntity=function(e){";"===e?(this.parseFixedEntity(),1===this.baseState&&this.sectionStart+1<this._index&&!this.xmlMode&&this.parseLegacyEntity(),this._state=this.baseState):(e<"0"||e>"9")&&!c(e)&&(this.xmlMode||this.sectionStart+1===this._index||(1!==this.baseState?"="!==e&&this.parseFixedEntity(o.default):this.parseLegacyEntity()),this._state=this.baseState,this._index--)},e.prototype.decodeNumericEntity=function(e,t,n){var i=this.sectionStart+e;if(i!==this._index){var s=this.buffer.substring(i,this._index),o=parseInt(s,t);this.emitPartial(r.default(o)),this.sectionStart=n?this._index+1:this._index}this._state=this.baseState},e.prototype.stateInNumericEntity=function(e){";"===e?this.decodeNumericEntity(2,10,!0):(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(2,10,!1),this._index--)},e.prototype.stateInHexEntity=function(e){";"===e?this.decodeNumericEntity(3,16,!0):(e<"a"||e>"f")&&(e<"A"||e>"F")&&(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(3,16,!1),this._index--)},e.prototype.cleanup=function(){this.sectionStart<0?(this.buffer="",this.bufferOffset+=this._index,this._index=0):this.running&&(1===this._state?(this.sectionStart!==this._index&&this.cbs.ontext(this.buffer.substr(this.sectionStart)),this.buffer="",this.bufferOffset+=this._index,this._index=0):this.sectionStart===this._index?(this.buffer="",this.bufferOffset+=this._index,this._index=0):(this.buffer=this.buffer.substr(this.sectionStart),this._index-=this.sectionStart,this.bufferOffset+=this.sectionStart),this.sectionStart=0)},e.prototype.parse=function(){for(;this._index<this.buffer.length&&this.running;){var e=this.buffer.charAt(this._index);1===this._state?this.stateText(e):12===this._state?this.stateInAttributeValueDoubleQuotes(e):9===this._state?this.stateInAttributeName(e):19===this._state?this.stateInComment(e):20===this._state?this.stateInSpecialComment(e):8===this._state?this.stateBeforeAttributeName(e):3===this._state?this.stateInTagName(e):6===this._state?this.stateInClosingTagName(e):2===this._state?this.stateBeforeTagName(e):10===this._state?this.stateAfterAttributeName(e):13===this._state?this.stateInAttributeValueSingleQuotes(e):11===this._state?this.stateBeforeAttributeValue(e):5===this._state?this.stateBeforeClosingTagName(e):7===this._state?this.stateAfterClosingTagName(e):32===this._state?this.stateBeforeSpecialS(e):21===this._state?this.stateAfterComment1(e):14===this._state?this.stateInAttributeValueNoQuotes(e):4===this._state?this.stateInSelfClosingTag(e):16===this._state?this.stateInDeclaration(e):15===this._state?this.stateBeforeDeclaration(e):22===this._state?this.stateAfterComment2(e):18===this._state?this.stateBeforeComment(e):33===this._state?this.stateBeforeSpecialSEnd(e):53===this._state?B(this,e):39===this._state?w(this,e):40===this._state?C(this,e):41===this._state?_(this,e):34===this._state?v(this,e):35===this._state?y(this,e):36===this._state?x(this,e):37===this._state?b(this,e):38===this._state?this.stateBeforeSpecialLast(e,2):42===this._state?A(this,e):43===this._state?this.stateAfterSpecialLast(e,6):44===this._state?S(this,e):29===this._state?this.stateInCdata(e):45===this._state?k(this,e):46===this._state?I(this,e):47===this._state?this.stateBeforeSpecialLast(e,3):48===this._state?P(this,e):49===this._state?E(this,e):50===this._state?T(this,e):51===this._state?this.stateAfterSpecialLast(e,5):52===this._state?M(this,e):54===this._state?O(this,e):55===this._state?D(this,e):56===this._state?$(this,e):57===this._state?this.stateBeforeSpecialLast(e,4):58===this._state?L(this,e):59===this._state?N(this,e):60===this._state?R(this,e):61===this._state?this.stateAfterSpecialLast(e,5):17===this._state?this.stateInProcessingInstruction(e):64===this._state?this.stateInNamedEntity(e):23===this._state?u(this,e):62===this._state?F(this,e):24===this._state?p(this,e):25===this._state?m(this,e):30===this._state?this.stateAfterCdata1(e):31===this._state?this.stateAfterCdata2(e):26===this._state?f(this,e):27===this._state?g(this,e):28===this._state?this.stateBeforeCdata6(e):66===this._state?this.stateInHexEntity(e):65===this._state?this.stateInNumericEntity(e):63===this._state?Z(this,e):this.cbs.onerror(Error("unknown _state"),this._state),this._index++}this.cleanup()},e.prototype.finish=function(){this.sectionStart<this._index&&this.handleTrailingData(),this.cbs.onend()},e.prototype.handleTrailingData=function(){var e=this.buffer.substr(this.sectionStart);29===this._state||30===this._state||31===this._state?this.cbs.oncdata(e):19===this._state||21===this._state||22===this._state?this.cbs.oncomment(e):64!==this._state||this.xmlMode?65!==this._state||this.xmlMode?66!==this._state||this.xmlMode?3!==this._state&&8!==this._state&&11!==this._state&&10!==this._state&&9!==this._state&&13!==this._state&&12!==this._state&&14!==this._state&&6!==this._state&&this.cbs.ontext(e):(this.decodeNumericEntity(3,16,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):(this.decodeNumericEntity(2,10,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):(this.parseLegacyEntity(),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData()))},e.prototype.getSection=function(){return this.buffer.substring(this.sectionStart,this._index)},e.prototype.emitToken=function(e){this.cbs[e](this.getSection()),this.sectionStart=-1},e.prototype.emitPartial=function(e){1!==this.baseState?this.cbs.onattribdata(e):this.cbs.ontext(e)},e}();t.default=j},3719:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RssHandler=t.DefaultHandler=t.DomUtils=t.ElementType=t.Tokenizer=t.createDomStream=t.parseDOM=t.parseDocument=t.DomHandler=t.Parser=void 0;var l=n(763);Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return l.Parser}});var c=n(7915);function h(e,t){var n=new c.DomHandler(void 0,t);return new l.Parser(n,t).end(e),n.root}Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}}),t.parseDocument=h,t.parseDOM=function(e,t){return h(e,t).children},t.createDomStream=function(e,t,n){var i=new c.DomHandler(e,t,n);return new l.Parser(i,t)};var d=n(9889);Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return a(d).default}});var u=s(n(9960));t.ElementType=u,o(n(3870),t),t.DomUtils=s(n(9432));var p=n(3870);Object.defineProperty(t,"RssHandler",{enumerable:!0,get:function(){return p.FeedHandler}})},5733:(e,t,n)=>{e.exports=function e(t,n,i){function r(o,a){if(!n[o]){if(!t[o]){if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,(function(e){return r(t[o][1][e]||e)}),c,c.exports,e,t,n,i)}return n[o].exports}for(var s=void 0,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){"use strict";var i=e("./utils"),r=e("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,r,o,a,l,c,h=[],d=0,u=e.length,p=u,m="string"!==i.getTypeOf(e);d<e.length;)p=u-d,r=m?(t=e[d++],n=d<u?e[d++]:0,d<u?e[d++]:0):(t=e.charCodeAt(d++),n=d<u?e.charCodeAt(d++):0,d<u?e.charCodeAt(d++):0),o=t>>2,a=(3&t)<<4|n>>4,l=1<p?(15&n)<<2|r>>6:64,c=2<p?63&r:64,h.push(s.charAt(o)+s.charAt(a)+s.charAt(l)+s.charAt(c));return h.join("")},n.decode=function(e){var t,n,i,o,a,l,c=0,h=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var u,p=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===s.charAt(64)&&p--,e.charAt(e.length-2)===s.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(u=r.uint8array?new Uint8Array(0|p):new Array(0|p);c<e.length;)t=s.indexOf(e.charAt(c++))<<2|(o=s.indexOf(e.charAt(c++)))>>4,n=(15&o)<<4|(a=s.indexOf(e.charAt(c++)))>>2,i=(3&a)<<6|(l=s.indexOf(e.charAt(c++))),u[h++]=t,64!==a&&(u[h++]=n),64!==l&&(u[h++]=i);return u}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var i=e("./external"),r=e("./stream/DataWorker"),s=e("./stream/Crc32Probe"),o=e("./stream/DataLengthProbe");function a(e,t,n,i,r){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=i,this.compressedContent=r}a.prototype={getContentWorker:function(){var e=new r(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new r(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(e,t,n){return e.pipe(new s).pipe(new o("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var i=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(e){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var i=e("./utils"),r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==i.getTypeOf(e)?function(e,t,n,i){var s=r,o=0+n;e^=-1;for(var a=0;a<o;a++)e=e>>>8^s[255&(e^t[a])];return-1^e}(0|t,e,e.length):function(e,t,n,i){var s=r,o=0+n;e^=-1;for(var a=0;a<o;a++)e=e>>>8^s[255&(e^t.charCodeAt(a))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var i;i="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:i}},{lie:37}],7:[function(e,t,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=e("pako"),s=e("./utils"),o=e("./stream/GenericWorker"),a=i?"uint8array":"array";function l(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",s.inherits(l,o),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(a,e.data),!1)},l.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new l("Deflate",e)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function i(e,t){var n,i="";for(n=0;n<t;n++)i+=String.fromCharCode(255&e),e>>>=8;return i}function r(e,t,n,r,o,h){var d,u,p=e.file,m=e.compression,f=h!==a.utf8encode,g=s.transformTo("string",h(p.name)),v=s.transformTo("string",a.utf8encode(p.name)),y=p.comment,x=s.transformTo("string",h(y)),b=s.transformTo("string",a.utf8encode(y)),w=v.length!==p.name.length,C=b.length!==y.length,_="",A="",S="",k=p.dir,I=p.date,P={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(P.crc32=e.crc32,P.compressedSize=e.compressedSize,P.uncompressedSize=e.uncompressedSize);var E=0;t&&(E|=8),f||!w&&!C||(E|=2048);var T=0,M=0;k&&(T|=16),"UNIX"===o?(M=798,T|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(p.unixPermissions,k)):(M=20,T|=function(e){return 63&(e||0)}(p.dosPermissions)),d=I.getUTCHours(),d<<=6,d|=I.getUTCMinutes(),d<<=5,d|=I.getUTCSeconds()/2,u=I.getUTCFullYear()-1980,u<<=4,u|=I.getUTCMonth()+1,u<<=5,u|=I.getUTCDate(),w&&(A=i(1,1)+i(l(g),4)+v,_+="up"+i(A.length,2)+A),C&&(S=i(1,1)+i(l(x),4)+b,_+="uc"+i(S.length,2)+S);var O="";return O+="\n\0",O+=i(E,2),O+=m.magic,O+=i(d,2),O+=i(u,2),O+=i(P.crc32,4),O+=i(P.compressedSize,4),O+=i(P.uncompressedSize,4),O+=i(g.length,2),O+=i(_.length,2),{fileRecord:c.LOCAL_FILE_HEADER+O+g+_,dirRecord:c.CENTRAL_FILE_HEADER+i(M,2)+O+i(x.length,2)+"\0\0\0\0"+i(T,4)+i(r,4)+g+_+x}}var s=e("../utils"),o=e("../stream/GenericWorker"),a=e("../utf8"),l=e("../crc32"),c=e("../signature");function h(e,t,n,i){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=i,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(h,o),h.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-i-1))/n:100}}))},h.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=r(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=r(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return c.DATA_DESCRIPTOR+i(e.crc32,4)+i(e.compressedSize,4)+i(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,r=function(e,t,n,r,o){var a=s.transformTo("string",o(r));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(e,2)+i(e,2)+i(t,4)+i(n,4)+i(a.length,2)+a}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},h.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},h.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var i=e("../compressions"),r=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var s=new r(t.streamFiles,n,t.platform,t.encodeFileName),o=0;try{e.forEach((function(e,n){o++;var r=function(e,t){var n=e||t,r=i[n];if(!r)throw new Error(n+" is not a valid compression method !");return r}(n.options.compression,t.compression),a=n.options.compressionOptions||t.compressionOptions||{},l=n.dir,c=n.date;n._compressWorker(r,a).withStreamInfo("file",{name:e,dir:l,date:c,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(s)})),s.entriesCount=o}catch(e){s.error(e)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new i;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(i.prototype=e("./object")).loadAsync=e("./load"),i.support=e("./support"),i.defaults=e("./defaults"),i.version="3.7.1",i.loadAsync=function(e,t){return(new i).loadAsync(e,t)},i.external=e("./external"),t.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var i=e("./utils"),r=e("./external"),s=e("./utf8"),o=e("./zipEntries"),a=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new r.Promise((function(t,n){var i=e.decompressed.getContentWorker().pipe(new a);i.on("error",(function(e){n(e)})).on("end",(function(){i.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=i.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),l.isNode&&l.isStream(e)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new o(t);return n.load(e),n})).then((function(e){var n=[r.Promise.resolve(e)],i=e.files;if(t.checkCRC32)for(var s=0;s<i.length;s++)n.push(c(i[s]));return r.Promise.all(n)})).then((function(e){for(var i=e.shift(),r=i.files,s=0;s<r.length;s++){var o=r[s];n.file(o.fileNameStr,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:t.createFolders})}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var i=e("../utils"),r=e("../stream/GenericWorker");function s(e,t){r.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}i.inherits(s,r),s.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},s.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var i=e("readable-stream").Readable;function r(e,t,n){i.call(this,t),this._helper=e;var r=this;e.on("data",(function(e,t){r.push(e)||r._helper.pause(),n&&n(t)})).on("error",(function(e){r.emit("error",e)})).on("end",(function(){r.push(null)}))}e("../utils").inherits(r,i),r.prototype._read=function(){this._helper.resume()},t.exports=r},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function i(e,t,n){var i,r=s.getTypeOf(t),a=s.extend(n||{},l);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(e=f(e)),a.createFolders&&(i=m(e))&&g.call(this,i,!0);var d="string"===r&&!1===a.binary&&!1===a.base64;n&&void 0!==n.binary||(a.binary=!d),(t instanceof c&&0===t.uncompressedSize||a.dir||!t||0===t.length)&&(a.base64=!1,a.binary=!0,t="",a.compression="STORE",r="string");var v;v=t instanceof c||t instanceof o?t:u.isNode&&u.isStream(t)?new p(e,t):s.prepareContent(e,t,a.binary,a.optimizedBinaryString,a.base64);var y=new h(e,v,a);this.files[e]=y}var r=e("./utf8"),s=e("./utils"),o=e("./stream/GenericWorker"),a=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),h=e("./zipObject"),d=e("./generate"),u=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),m=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},f=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:l.createFolders,e=f(e),this.files[e]||i.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function v(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,i;for(t in this.files)i=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,i)},filter:function(e){var t=[];return this.forEach((function(n,i){e(n,i)&&t.push(i)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,i.call(this,e,t,n),this;if(v(e)){var r=e;return this.filter((function(e,t){return!t.dir&&r.test(e)}))}var s=this.files[this.root+e];return s&&!s.dir?s:null},folder:function(e){if(!e)return this;if(v(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=g.call(this,t),i=this.clone();return i.root=n.name,i},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),i=0;i<n.length;i++)delete this.files[n[i].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=s.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");s.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var i=n.comment||this.comment||"";t=d.generateWorker(this,n,i)}catch(e){(t=new o("error")).error(e)}return new a(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var i=e("./DataReader");function r(e){i.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(r,i),r.prototype.byteAt=function(e){return this.data[this.zero+e]},r.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),i=e.charCodeAt(2),r=e.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===t&&this.data[s+1]===n&&this.data[s+2]===i&&this.data[s+3]===r)return s-this.zero;return-1},r.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),i=e.charCodeAt(2),r=e.charCodeAt(3),s=this.readData(4);return t===s[0]&&n===s[1]&&i===s[2]&&r===s[3]},r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var i=e("../utils");function r(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return i.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=r},{"../utils":32}],19:[function(e,t,n){"use strict";var i=e("./Uint8ArrayReader");function r(e){i.call(this,e)}e("../utils").inherits(r,i),r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var i=e("./DataReader");function r(e){i.call(this,e)}e("../utils").inherits(r,i),r.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},r.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},r.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var i=e("./ArrayReader");function r(e){i.call(this,e)}e("../utils").inherits(r,i),r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var i=e("../utils"),r=e("../support"),s=e("./ArrayReader"),o=e("./StringReader"),a=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=i.getTypeOf(e);return i.checkSupport(t),"string"!==t||r.uint8array?"nodebuffer"===t?new a(e):r.uint8array?new l(i.transformTo("uint8array",e)):new s(i.transformTo("array",e)):new o(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){"use strict";var i=e("./GenericWorker"),r=e("../utils");function s(e){i.call(this,"ConvertWorker to "+e),this.destType=e}r.inherits(s,i),s.prototype.processChunk=function(e){this.push({data:r.transformTo(this.destType,e.data),meta:e.meta})},t.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var i=e("./GenericWorker"),r=e("../crc32");function s(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(s,i),s.prototype.processChunk=function(e){this.streamInfo.crc32=r(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var i=e("../utils"),r=e("./GenericWorker");function s(e){r.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}i.inherits(s,r),s.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}r.prototype.processChunk.call(this,e)},t.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var i=e("../utils"),r=e("./GenericWorker");function s(e){r.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=i.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}i.inherits(s,r),s.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function i(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=i},{}],29:[function(e,t,n){"use strict";var i=e("../utils"),r=e("./ConvertWorker"),s=e("./GenericWorker"),o=e("../base64"),a=e("../support"),l=e("../external"),c=null;if(a.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function h(e,t,n){var o=t;switch(t){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=n,i.checkSupport(o),this._worker=e.pipe(new r(o)),e.lock()}catch(e){this._worker=new s("error"),this._worker.error(e)}}h.prototype={accumulate:function(e){return function(e,t){return new l.Promise((function(n,r){var s=[],a=e._internalType,l=e._outputType,c=e._mimeType;e.on("data",(function(e,n){s.push(e),t&&t(n)})).on("error",(function(e){s=[],r(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return i.newBlob(i.transformTo("arraybuffer",t),n);case"base64":return o.encode(t);default:return i.transformTo(e,t)}}(l,function(e,t){var n,i=0,r=null,s=0;for(n=0;n<t.length;n++)s+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(r=new Uint8Array(s),n=0;n<t.length;n++)r.set(t[n],i),i+=t[n].length;return r;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(a,s),c);n(e)}catch(e){r(e)}s=[]})).resume()}))}(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){i.delay(t,arguments,n)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=0===new Blob([i],{type:"application/zip"}).size}catch(e){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(i),n.blob=0===r.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var i=e("./utils"),r=e("./support"),s=e("./nodejsUtils"),o=e("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){o.call(this,"utf-8 decode"),this.leftOver=null}function h(){o.call(this,"utf-8 encode")}a[254]=a[254]=1,n.utf8encode=function(e){return r.nodebuffer?s.newBufferFrom(e,"utf-8"):function(e){var t,n,i,s,o,a=e.length,l=0;for(s=0;s<a;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=r.uint8array?new Uint8Array(l):new Array(l),s=o=0;o<l;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t}(e)},n.utf8decode=function(e){return r.nodebuffer?i.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,r,s,o=e.length,l=new Array(2*o);for(t=n=0;t<o;)if((r=e[t++])<128)l[n++]=r;else if(4<(s=a[r]))l[n++]=65533,t+=s-1;else{for(r&=2===s?31:3===s?15:7;1<s&&t<o;)r=r<<6|63&e[t++],s--;1<s?l[n++]=65533:r<65536?l[n++]=r:(r-=65536,l[n++]=55296|r>>10&1023,l[n++]=56320|1023&r)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),i.applyFromCharCode(l)}(e=i.transformTo(r.uint8array?"uint8array":"array",e))},i.inherits(c,o),c.prototype.processChunk=function(e){var t=i.transformTo(r.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var s=t;(t=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),t.set(s,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var o=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}(t),l=t;o!==t.length&&(r.uint8array?(l=t.subarray(0,o),this.leftOver=t.subarray(o,t.length)):(l=t.slice(0,o),this.leftOver=t.slice(o,t.length))),this.push({data:n.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,i.inherits(h,o),h.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var i=e("./support"),r=e("./base64"),s=e("./nodejsUtils"),o=e("set-immediate-shim"),a=e("./external");function l(e){return e}function c(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(n){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(e),i.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(e,t,n){var i=[],r=0,s=e.length;if(s<=n)return String.fromCharCode.apply(null,e);for(;r<s;)"array"===t||"nodebuffer"===t?i.push(String.fromCharCode.apply(null,e.slice(r,Math.min(r+n,s)))):i.push(String.fromCharCode.apply(null,e.subarray(r,Math.min(r+n,s)))),r+=n;return i.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(e){return!1}}()}};function d(e){var t=65536,i=n.getTypeOf(e),r=!0;if("uint8array"===i?r=h.applyCanBeUsed.uint8array:"nodebuffer"===i&&(r=h.applyCanBeUsed.nodebuffer),r)for(;1<t;)try{return h.stringifyByChunk(e,i,t)}catch(e){t=Math.floor(t/2)}return h.stringifyByChar(e)}function u(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=d;var p={};p.string={string:l,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return p.string.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:function(e){return c(e,s.allocBuffer(e.length))}},p.array={string:d,array:l,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(e)}},p.arraybuffer={string:function(e){return d(new Uint8Array(e))},array:function(e){return u(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:l,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(new Uint8Array(e))}},p.uint8array={string:d,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:l,nodebuffer:function(e){return s.newBufferFrom(e)}},p.nodebuffer={string:d,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return p.nodebuffer.uint8array(e).buffer},uint8array:function(e){return u(e,new Uint8Array(e.length))},nodebuffer:l},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var i=n.getTypeOf(t);return p[i][e](t)},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":i.nodebuffer&&s.isBuffer(e)?"nodebuffer":i.uint8array&&e instanceof Uint8Array?"uint8array":i.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!i[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,i="";for(n=0;n<(e||"").length;n++)i+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return i},n.delay=function(e,t,n){o((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,s,o,l){return a.Promise.resolve(t).then((function(e){return i.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new a.Promise((function(t,n){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.onerror=function(e){n(e.target.error)},i.readAsArrayBuffer(e)})):e})).then((function(t){var h=n.getTypeOf(t);return h?("arraybuffer"===h?t=n.transformTo("uint8array",t):"string"===h&&(l?t=r.decode(t):s&&!0!==o&&(t=function(e){return c(e,i.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):a.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(e,t,n){"use strict";var i=e("./reader/readerFor"),r=e("./utils"),s=e("./signature"),o=e("./zipEntry"),a=(e("./utf8"),e("./support"));function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(t)+", expected "+r.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var i=this.reader.readString(4)===t;return this.reader.setIndex(n),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=a.uint8array?"uint8array":"array",n=r.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,i=this.zip64EndOfCentralSize-44;0<i;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var i=t-n;if(0<i)this.isSignature(t,s.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(e){this.reader=i(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var i=e("./reader/readerFor"),r=e("./utils"),s=e("./compressedObject"),o=e("./crc32"),a=e("./utf8"),l=e("./compressions"),c=e("./support");function h(e,t){this.options=e,this.loadOptions=t}h.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=i(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,n,i,r=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<r;)t=e.readInt(2),n=e.readInt(2),i=e.readData(n),this.extraFields[t]={id:t,length:n,value:i};e.setIndex(r)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=r.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var s=r.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=i(e.value);return 1!==t.readInt(1)||o(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=i(e.value);return 1!==t.readInt(1)||o(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null}},t.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function i(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var r=e("./stream/StreamHelper"),s=e("./stream/DataWorker"),o=e("./utf8"),a=e("./compressedObject"),l=e("./stream/GenericWorker");i.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var i="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var s=!this._dataBinary;s&&!i&&(t=t.pipe(new o.Utf8EncodeWorker)),!s&&i&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(e){(t=new l("error")).error(e)}return new r(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new s(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)i.prototype[c[d]]=h;t.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,i){(function(e){"use strict";var n,i,r=e.MutationObserver||e.WebKitMutationObserver;if(r){var s=0,o=new r(h),a=e.document.createTextNode("");o.observe(a,{characterData:!0}),n=function(){a.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){h(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(h,0)};else{var l=new e.MessageChannel;l.port1.onmessage=h,n=function(){l.port2.postMessage(0)}}var c=[];function h(){var e,t;i=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}i=!1}t.exports=function(e){1!==c.push(e)||i||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var i=e("immediate");function r(){}var s={},o=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==r&&p(this,e)}function h(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){i((function(){var i;try{i=t(n)}catch(i){return s.reject(e,i)}i===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,i)}))}function u(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function i(t){n||(n=!0,s.reject(e,t))}function r(t){n||(n=!0,s.resolve(e,t))}var o=m((function(){t(r,i)}));"error"===o.status&&i(o.value)}function m(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(r);return this.state!==l?d(n,this.state===a?e:t,this.outcome):this.queue.push(new h(n,e,t)),n},h.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},h.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},h.prototype.callRejected=function(e){s.reject(this.promise,e)},h.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,t){var n=m(u,t);if("error"===n.status)return s.reject(e,n.value);var i=n.value;if(i)p(e,i);else{e.state=a,e.outcome=t;for(var r=-1,o=e.queue.length;++r<o;)e.queue[r].callFulfilled(t)}return e},s.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,i=e.queue.length;++n<i;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:s.resolve(new this(r),e)},c.reject=function(e){var t=new this(r);return s.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var o=new Array(n),a=0,l=-1,c=new this(r);++l<n;)h(e[l],l);return c;function h(e,r){t.resolve(e).then((function(e){o[r]=e,++a!==n||i||(i=!0,s.resolve(c,o))}),(function(e){i||(i=!0,s.reject(c,e))}))}},c.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var i,o=-1,a=new this(r);++o<t;)i=e[o],this.resolve(i).then((function(e){n||(n=!0,s.resolve(a,e))}),(function(e){n||(n=!0,s.reject(a,e))}));return a}},{immediate:36}],38:[function(e,t,n){"use strict";var i={};(0,e("./lib/utils/common").assign)(i,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var i=e("./zlib/deflate"),r=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/messages"),a=e("./zlib/zstream"),l=Object.prototype.toString;function c(e){if(!(this instanceof c))return new c(e);this.options=r.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=i.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(o[n]);if(t.header&&i.deflateSetHeader(this.strm,t.header),t.dictionary){var h;if(h="string"==typeof t.dictionary?s.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=i.deflateSetDictionary(this.strm,h)))throw new Error(o[n]);this._dict_set=!0}}function h(e,t){var n=new c(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}c.prototype.push=function(e,t){var n,o,a=this.strm,c=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?a.input=s.string2buf(e):"[object ArrayBuffer]"===l.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new r.Buf8(c),a.next_out=0,a.avail_out=c),1!==(n=i.deflate(a,o))&&0!==n)return this.onEnd(n),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(s.buf2binstring(r.shrinkBuf(a.output,a.next_out))):this.onData(r.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==n);return 4===o?(n=i.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==o||(this.onEnd(0),!(a.avail_out=0))},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=c,n.deflate=h,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,h(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var i=e("./zlib/inflate"),r=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/constants"),a=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),h=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=i.inflateInit2(this.strm,t.windowBits);if(n!==o.Z_OK)throw new Error(a[n]);this.header=new c,i.inflateGetHeader(this.strm,this.header)}function u(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}d.prototype.push=function(e,t){var n,a,l,c,d,u,p=this.strm,m=this.options.chunkSize,f=this.options.dictionary,g=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?p.input=s.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new r.Buf8(m),p.next_out=0,p.avail_out=m),(n=i.inflate(p,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&f&&(u="string"==typeof f?s.string2buf(f):"[object ArrayBuffer]"===h.call(f)?new Uint8Array(f):f,n=i.inflateSetDictionary(this.strm,u)),n===o.Z_BUF_ERROR&&!0===g&&(n=o.Z_OK,g=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&n!==o.Z_STREAM_END&&(0!==p.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=s.utf8border(p.output,p.next_out),c=p.next_out-l,d=s.buf2string(p.output,l),p.next_out=c,p.avail_out=m-c,c&&r.arraySet(p.output,p.output,l,c,0),this.onData(d)):this.onData(r.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(g=!0)}while((0<p.avail_in||0===p.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(n=i.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(p.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=d,n.inflate=u,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},n.ungzip=u},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,i,r){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+i),r);else for(var s=0;s<i;s++)e[r+s]=t[n+s]},flattenChunks:function(e){var t,n,i,r,s,o;for(t=i=0,n=e.length;t<n;t++)i+=e[t].length;for(o=new Uint8Array(i),t=r=0,n=e.length;t<n;t++)s=e[t],o.set(s,r),r+=s.length;return o}},s={arraySet:function(e,t,n,i,r){for(var s=0;s<i;s++)e[r+s]=t[n+s]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(i)},{}],42:[function(e,t,n){"use strict";var i=e("./common"),r=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var o=new i.Buf8(256),a=0;a<256;a++)o[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(e,t){if(t<65537&&(e.subarray&&s||!e.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n="",o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n}o[254]=o[254]=1,n.string2buf=function(e){var t,n,r,s,o,a=e.length,l=0;for(s=0;s<a;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new i.Buf8(l),s=o=0;o<l;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t},n.buf2binstring=function(e){return l(e,e.length)},n.binstring2buf=function(e){for(var t=new i.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,i,r,s,a=t||e.length,c=new Array(2*a);for(n=i=0;n<a;)if((r=e[n++])<128)c[i++]=r;else if(4<(s=o[r]))c[i++]=65533,n+=s-1;else{for(r&=2===s?31:3===s?15:7;1<s&&n<a;)r=r<<6|63&e[n++],s--;1<s?c[i++]=65533:r<65536?c[i++]=r:(r-=65536,c[i++]=55296|r>>10&1023,c[i++]=56320|1023&r)}return l(c,i)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+o[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,i){for(var r=65535&e|0,s=e>>>16&65535|0,o=0;0!==n;){for(n-=o=2e3<n?2e3:n;s=s+(r=r+t[i++]|0)|0,--o;);r%=65521,s%=65521}return r|s<<16|0}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,r){var s=i,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^s[255&(e^t[a])];return-1^e}},{}],46:[function(e,t,n){"use strict";var i,r=e("../utils/common"),s=e("./trees"),o=e("./adler32"),a=e("./crc32"),l=e("./messages"),c=-2,h=258,d=262,u=113;function p(e,t){return e.msg=l[t],t}function m(e){return(e<<1)-(4<e?9:0)}function f(e){for(var t=e.length;0<=--t;)e[t]=0}function g(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(r.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function v(e,t){s._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,g(e.strm)}function y(e,t){e.pending_buf[e.pending++]=t}function x(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function b(e,t){var n,i,r=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-d?e.strstart-(e.w_size-d):0,c=e.window,u=e.w_mask,p=e.prev,m=e.strstart+h,f=c[s+o-1],g=c[s+o];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(n=t)+o]===g&&c[n+o-1]===f&&c[n]===c[s]&&c[++n]===c[s+1]){s+=2,n++;do{}while(c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&s<m);if(i=h-(m-s),s=m-h,o<i){if(e.match_start=t,a<=(o=i))break;f=c[s+o-1],g=c[s+o]}}}while((t=p[t&u])>l&&0!=--r);return o<=e.lookahead?o:e.lookahead}function w(e){var t,n,i,s,l,c,h,u,p,m,f=e.w_size;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-d)){for(r.arraySet(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=n=e.hash_size;i=e.head[--t],e.head[t]=f<=i?i-f:0,--n;);for(t=n=f;i=e.prev[--t],e.prev[t]=f<=i?i-f:0,--n;);s+=f}if(0===e.strm.avail_in)break;if(c=e.strm,h=e.window,u=e.strstart+e.lookahead,m=void 0,(p=s)<(m=c.avail_in)&&(m=p),n=0===m?0:(c.avail_in-=m,r.arraySet(h,c.input,c.next_in,m,u),1===c.state.wrap?c.adler=o(c.adler,h,m,u):2===c.state.wrap&&(c.adler=a(c.adler,h,m,u)),c.next_in+=m,c.total_in+=m,m),e.lookahead+=n,e.lookahead+e.insert>=3)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+3-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<d&&0!==e.strm.avail_in)}function C(e,t){for(var n,i;;){if(e.lookahead<d){if(w(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-d&&(e.match_length=b(e,n)),e.match_length>=3)if(i=s._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}function _(e,t){for(var n,i,r;;){if(e.lookahead<d){if(w(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-d&&(e.match_length=b(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(r=e.strstart+e.lookahead-3,i=s._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(v(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((i=s._tr_tally(e,0,e.window[e.strstart-1]))&&v(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=s._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}function A(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}function S(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(1146),this.dyn_dtree=new r.Buf16(122),this.bl_tree=new r.Buf16(78),f(this.dyn_ltree),f(this.dyn_dtree),f(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(16),this.heap=new r.Buf16(573),f(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(573),f(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function k(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:u,e.adler=2===t.wrap?0:1,t.last_flush=0,s._tr_init(t),0):p(e,c)}function I(e){var t=k(e);return 0===t&&function(e){e.window_size=2*e.w_size,f(e.head),e.max_lazy_match=i[e.level].max_lazy,e.good_match=i[e.level].good_length,e.nice_match=i[e.level].nice_length,e.max_chain_length=i[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0}(e.state),t}function P(e,t,n,i,s,o){if(!e)return c;var a=1;if(-1===t&&(t=6),i<0?(a=0,i=-i):15<i&&(a=2,i-=16),s<1||9<s||8!==n||i<8||15<i||t<0||9<t||o<0||4<o)return p(e,c);8===i&&(i=9);var l=new S;return(e.state=l).strm=e,l.wrap=a,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=s+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<s+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=n,I(e)}i=[new A(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(w(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,v(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-d&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(v(e,!1),e.strm.avail_out),1)})),new A(4,4,8,4,C),new A(4,5,16,8,C),new A(4,6,32,32,C),new A(4,4,16,16,_),new A(8,16,32,32,_),new A(8,16,128,128,_),new A(8,32,128,256,_),new A(32,128,258,1024,_),new A(32,258,258,4096,_)],n.deflateInit=function(e,t){return P(e,t,8,15,8,0)},n.deflateInit2=P,n.deflateReset=I,n.deflateResetKeep=k,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?c:(e.state.gzhead=t,0):c},n.deflate=function(e,t){var n,r,o,l;if(!e||!e.state||5<t||t<0)return e?p(e,c):c;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||666===r.status&&4!==t)return p(e,0===e.avail_out?-5:c);if(r.strm=e,n=r.last_flush,r.last_flush=t,42===r.status)if(2===r.wrap)e.adler=0,y(r,31),y(r,139),y(r,8),r.gzhead?(y(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),y(r,255&r.gzhead.time),y(r,r.gzhead.time>>8&255),y(r,r.gzhead.time>>16&255),y(r,r.gzhead.time>>24&255),y(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),y(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(y(r,255&r.gzhead.extra.length),y(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=a(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(y(r,0),y(r,0),y(r,0),y(r,0),y(r,0),y(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),y(r,3),r.status=u);else{var d=8+(r.w_bits-8<<4)<<8;d|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(d|=32),d+=31-d%31,r.status=u,x(r,d),0!==r.strstart&&(x(r,e.adler>>>16),x(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(o=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),g(e),o=r.pending,r.pending!==r.pending_buf_size));)y(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),g(e),o=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,y(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),0===l&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),g(e),o=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,y(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),0===l&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&g(e),r.pending+2<=r.pending_buf_size&&(y(r,255&e.adler),y(r,e.adler>>8&255),e.adler=0,r.status=u)):r.status=u),0!==r.pending){if(g(e),0===e.avail_out)return r.last_flush=-1,0}else if(0===e.avail_in&&m(t)<=m(n)&&4!==t)return p(e,-5);if(666===r.status&&0!==e.avail_in)return p(e,-5);if(0!==e.avail_in||0!==r.lookahead||0!==t&&666!==r.status){var b=2===r.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(w(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}(r,t):3===r.strategy?function(e,t){for(var n,i,r,o,a=e.window;;){if(e.lookahead<=h){if(w(e),e.lookahead<=h&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(i=a[r=e.strstart-1])===a[++r]&&i===a[++r]&&i===a[++r]){o=e.strstart+h;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<o);e.match_length=h-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=s._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}(r,t):i[r.level].func(r,t);if(3!==b&&4!==b||(r.status=666),1===b||3===b)return 0===e.avail_out&&(r.last_flush=-1),0;if(2===b&&(1===t?s._tr_align(r):5!==t&&(s._tr_stored_block(r,0,0,!1),3===t&&(f(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),g(e),0===e.avail_out))return r.last_flush=-1,0}return 4!==t?0:r.wrap<=0?1:(2===r.wrap?(y(r,255&e.adler),y(r,e.adler>>8&255),y(r,e.adler>>16&255),y(r,e.adler>>24&255),y(r,255&e.total_in),y(r,e.total_in>>8&255),y(r,e.total_in>>16&255),y(r,e.total_in>>24&255)):(x(r,e.adler>>>16),x(r,65535&e.adler)),g(e),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?0:1)},n.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==u&&666!==t?p(e,c):(e.state=null,t===u?p(e,-3):0):c},n.deflateSetDictionary=function(e,t){var n,i,s,a,l,h,d,u,p=t.length;if(!e||!e.state)return c;if(2===(a=(n=e.state).wrap)||1===a&&42!==n.status||n.lookahead)return c;for(1===a&&(e.adler=o(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===a&&(f(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new r.Buf8(n.w_size),r.arraySet(u,t,p-n.w_size,n.w_size,0),t=u,p=n.w_size),l=e.avail_in,h=e.next_in,d=e.input,e.avail_in=p,e.next_in=0,e.input=t,w(n);n.lookahead>=3;){for(i=n.strstart,s=n.lookahead-2;n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+3-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,--s;);n.strstart=i,n.lookahead=2,w(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=h,e.input=d,e.avail_in=l,n.wrap=a,0},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,i,r,s,o,a,l,c,h,d,u,p,m,f,g,v,y,x,b,w,C,_,A,S,k;n=e.state,i=e.next_in,S=e.input,r=i+(e.avail_in-5),s=e.next_out,k=e.output,o=s-(t-e.avail_out),a=s+(e.avail_out-257),l=n.dmax,c=n.wsize,h=n.whave,d=n.wnext,u=n.window,p=n.hold,m=n.bits,f=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{m<15&&(p+=S[i++]<<m,m+=8,p+=S[i++]<<m,m+=8),x=f[p&v];t:for(;;){if(p>>>=b=x>>>24,m-=b,0==(b=x>>>16&255))k[s++]=65535&x;else{if(!(16&b)){if(0==(64&b)){x=f[(65535&x)+(p&(1<<b)-1)];continue t}if(32&b){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&x,(b&=15)&&(m<b&&(p+=S[i++]<<m,m+=8),w+=p&(1<<b)-1,p>>>=b,m-=b),m<15&&(p+=S[i++]<<m,m+=8,p+=S[i++]<<m,m+=8),x=g[p&y];n:for(;;){if(p>>>=b=x>>>24,m-=b,!(16&(b=x>>>16&255))){if(0==(64&b)){x=g[(65535&x)+(p&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(C=65535&x,m<(b&=15)&&(p+=S[i++]<<m,(m+=8)<b&&(p+=S[i++]<<m,m+=8)),l<(C+=p&(1<<b)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=b,m-=b,(b=s-o)<C){if(h<(b=C-b)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(A=u,(_=0)===d){if(_+=c-b,b<w){for(w-=b;k[s++]=u[_++],--b;);_=s-C,A=k}}else if(d<b){if(_+=c+d-b,(b-=d)<w){for(w-=b;k[s++]=u[_++],--b;);if(_=0,d<w){for(w-=b=d;k[s++]=u[_++],--b;);_=s-C,A=k}}}else if(_+=d-b,b<w){for(w-=b;k[s++]=u[_++],--b;);_=s-C,A=k}for(;2<w;)k[s++]=A[_++],k[s++]=A[_++],k[s++]=A[_++],w-=3;w&&(k[s++]=A[_++],1<w&&(k[s++]=A[_++]))}else{for(_=s-C;k[s++]=k[_++],k[s++]=k[_++],k[s++]=k[_++],2<(w-=3););w&&(k[s++]=k[_++],1<w&&(k[s++]=k[_++]))}break}}break}}while(i<r&&s<a);i-=w=m>>3,p&=(1<<(m-=w<<3))-1,e.next_in=i,e.next_out=s,e.avail_in=i<r?r-i+5:5-(i-r),e.avail_out=s<a?a-s+257:257-(s-a),n.hold=p,n.bits=m}},{}],49:[function(e,t,n){"use strict";var i=e("../utils/common"),r=e("./adler32"),s=e("./crc32"),o=e("./inffast"),a=e("./inftrees"),l=-2;function c(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function h(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function d(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(852),t.distcode=t.distdyn=new i.Buf32(592),t.sane=1,t.back=-1,0):l}function u(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,d(e)):l}function p(e,t){var n,i;return e&&e.state?(i=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?l:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,u(e))):l}function m(e,t){var n,i;return e?(i=new h,(e.state=i).window=null,0!==(n=p(e,t))&&(e.state=null),n):l}var f,g,v=!0;function y(e){if(v){var t;for(f=new i.Buf32(512),g=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(1,e.lens,0,288,f,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(2,e.lens,0,32,g,0,e.work,{bits:5}),v=!1}e.lencode=f,e.lenbits=9,e.distcode=g,e.distbits=5}function x(e,t,n,r){var s,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new i.Buf8(o.wsize)),r>=o.wsize?(i.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(r<(s=o.wsize-o.wnext)&&(s=r),i.arraySet(o.window,t,n-r,s,o.wnext),(r-=s)?(i.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}n.inflateReset=u,n.inflateReset2=p,n.inflateResetKeep=d,n.inflateInit=function(e){return m(e,15)},n.inflateInit2=m,n.inflate=function(e,t){var n,h,d,u,p,m,f,g,v,b,w,C,_,A,S,k,I,P,E,T,M,O,D,$,B=0,L=new i.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return l;12===(n=e.state).mode&&(n.mode=13),p=e.next_out,d=e.output,f=e.avail_out,u=e.next_in,h=e.input,m=e.avail_in,g=n.hold,v=n.bits,b=m,w=f,O=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;v<16;){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}if(2&n.wrap&&35615===g){L[n.check=0]=255&g,L[1]=g>>>8&255,n.check=s(n.check,L,2,0),v=g=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&g)<<8)+(g>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&g)){e.msg="unknown compression method",n.mode=30;break}if(v-=4,M=8+(15&(g>>>=4)),0===n.wbits)n.wbits=M;else if(M>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<M,e.adler=n.check=1,n.mode=512&g?10:12,v=g=0;break;case 2:for(;v<16;){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}if(n.flags=g,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=g>>8&1),512&n.flags&&(L[0]=255&g,L[1]=g>>>8&255,n.check=s(n.check,L,2,0)),v=g=0,n.mode=3;case 3:for(;v<32;){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}n.head&&(n.head.time=g),512&n.flags&&(L[0]=255&g,L[1]=g>>>8&255,L[2]=g>>>16&255,L[3]=g>>>24&255,n.check=s(n.check,L,4,0)),v=g=0,n.mode=4;case 4:for(;v<16;){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}n.head&&(n.head.xflags=255&g,n.head.os=g>>8),512&n.flags&&(L[0]=255&g,L[1]=g>>>8&255,n.check=s(n.check,L,2,0)),v=g=0,n.mode=5;case 5:if(1024&n.flags){for(;v<16;){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}n.length=g,n.head&&(n.head.extra_len=g),512&n.flags&&(L[0]=255&g,L[1]=g>>>8&255,n.check=s(n.check,L,2,0)),v=g=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(m<(C=n.length)&&(C=m),C&&(n.head&&(M=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),i.arraySet(n.head.extra,h,u,C,M)),512&n.flags&&(n.check=s(n.check,h,C,u)),m-=C,u+=C,n.length-=C),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===m)break e;for(C=0;M=h[u+C++],n.head&&M&&n.length<65536&&(n.head.name+=String.fromCharCode(M)),M&&C<m;);if(512&n.flags&&(n.check=s(n.check,h,C,u)),m-=C,u+=C,M)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===m)break e;for(C=0;M=h[u+C++],n.head&&M&&n.length<65536&&(n.head.comment+=String.fromCharCode(M)),M&&C<m;);if(512&n.flags&&(n.check=s(n.check,h,C,u)),m-=C,u+=C,M)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;v<16;){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}if(g!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}v=g=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;v<32;){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}e.adler=n.check=c(g),v=g=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=p,e.avail_out=f,e.next_in=u,e.avail_in=m,n.hold=g,n.bits=v,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){g>>>=7&v,v-=7&v,n.mode=27;break}for(;v<3;){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}switch(n.last=1&g,v-=1,3&(g>>>=1)){case 0:n.mode=14;break;case 1:if(y(n),n.mode=20,6!==t)break;g>>>=2,v-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}g>>>=2,v-=2;break;case 14:for(g>>>=7&v,v-=7&v;v<32;){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}if((65535&g)!=(g>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&g,v=g=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(C=n.length){if(m<C&&(C=m),f<C&&(C=f),0===C)break e;i.arraySet(d,h,u,C,p),m-=C,u+=C,f-=C,p+=C,n.length-=C;break}n.mode=12;break;case 17:for(;v<14;){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}if(n.nlen=257+(31&g),g>>>=5,v-=5,n.ndist=1+(31&g),g>>>=5,v-=5,n.ncode=4+(15&g),g>>>=4,v-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;v<3;){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}n.lens[N[n.have++]]=7&g,g>>>=3,v-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,D={bits:n.lenbits},O=a(0,n.lens,0,19,n.lencode,0,n.work,D),n.lenbits=D.bits,O){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;k=(B=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,I=65535&B,!((S=B>>>24)<=v);){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}if(I<16)g>>>=S,v-=S,n.lens[n.have++]=I;else{if(16===I){for($=S+2;v<$;){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}if(g>>>=S,v-=S,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}M=n.lens[n.have-1],C=3+(3&g),g>>>=2,v-=2}else if(17===I){for($=S+3;v<$;){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}v-=S,M=0,C=3+(7&(g>>>=S)),g>>>=3,v-=3}else{for($=S+7;v<$;){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}v-=S,M=0,C=11+(127&(g>>>=S)),g>>>=7,v-=7}if(n.have+C>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;C--;)n.lens[n.have++]=M}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,D={bits:n.lenbits},O=a(1,n.lens,0,n.nlen,n.lencode,0,n.work,D),n.lenbits=D.bits,O){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,D={bits:n.distbits},O=a(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,D),n.distbits=D.bits,O){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=m&&258<=f){e.next_out=p,e.avail_out=f,e.next_in=u,e.avail_in=m,n.hold=g,n.bits=v,o(e,w),p=e.next_out,d=e.output,f=e.avail_out,u=e.next_in,h=e.input,m=e.avail_in,g=n.hold,v=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;k=(B=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,I=65535&B,!((S=B>>>24)<=v);){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}if(k&&0==(240&k)){for(P=S,E=k,T=I;k=(B=n.lencode[T+((g&(1<<P+E)-1)>>P)])>>>16&255,I=65535&B,!(P+(S=B>>>24)<=v);){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}g>>>=P,v-=P,n.back+=P}if(g>>>=S,v-=S,n.back+=S,n.length=I,0===k){n.mode=26;break}if(32&k){n.back=-1,n.mode=12;break}if(64&k){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&k,n.mode=22;case 22:if(n.extra){for($=n.extra;v<$;){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}n.length+=g&(1<<n.extra)-1,g>>>=n.extra,v-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;k=(B=n.distcode[g&(1<<n.distbits)-1])>>>16&255,I=65535&B,!((S=B>>>24)<=v);){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}if(0==(240&k)){for(P=S,E=k,T=I;k=(B=n.distcode[T+((g&(1<<P+E)-1)>>P)])>>>16&255,I=65535&B,!(P+(S=B>>>24)<=v);){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}g>>>=P,v-=P,n.back+=P}if(g>>>=S,v-=S,n.back+=S,64&k){e.msg="invalid distance code",n.mode=30;break}n.offset=I,n.extra=15&k,n.mode=24;case 24:if(n.extra){for($=n.extra;v<$;){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}n.offset+=g&(1<<n.extra)-1,g>>>=n.extra,v-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===f)break e;if(C=w-f,n.offset>C){if((C=n.offset-C)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}_=C>n.wnext?(C-=n.wnext,n.wsize-C):n.wnext-C,C>n.length&&(C=n.length),A=n.window}else A=d,_=p-n.offset,C=n.length;for(f<C&&(C=f),f-=C,n.length-=C;d[p++]=A[_++],--C;);0===n.length&&(n.mode=21);break;case 26:if(0===f)break e;d[p++]=n.length,f--,n.mode=21;break;case 27:if(n.wrap){for(;v<32;){if(0===m)break e;m--,g|=h[u++]<<v,v+=8}if(w-=f,e.total_out+=w,n.total+=w,w&&(e.adler=n.check=n.flags?s(n.check,d,w,p-w):r(n.check,d,w,p-w)),w=f,(n.flags?g:c(g))!==n.check){e.msg="incorrect data check",n.mode=30;break}v=g=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;v<32;){if(0===m)break e;m--,g+=h[u++]<<v,v+=8}if(g!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}v=g=0}n.mode=29;case 29:O=1;break e;case 30:O=-3;break e;case 31:return-4;default:return l}return e.next_out=p,e.avail_out=f,e.next_in=u,e.avail_in=m,n.hold=g,n.bits=v,(n.wsize||w!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&x(e,e.output,e.next_out,w-e.avail_out)?(n.mode=31,-4):(b-=e.avail_in,w-=e.avail_out,e.total_in+=b,e.total_out+=w,n.total+=w,n.wrap&&w&&(e.adler=n.check=n.flags?s(n.check,d,w,e.next_out-w):r(n.check,d,w,e.next_out-w)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==b&&0===w||4===t)&&0===O&&(O=-5),O)},n.inflateEnd=function(e){if(!e||!e.state)return l;var t=e.state;return t.window&&(t.window=null),e.state=null,0},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?l:((n.head=t).done=!1,0):l},n.inflateSetDictionary=function(e,t){var n,i=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?l:11===n.mode&&r(1,t,i,0)!==n.check?-3:x(e,t,i,i)?(n.mode=31,-4):(n.havedict=1,0):l},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var i=e("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,c,h,d,u){var p,m,f,g,v,y,x,b,w,C=u.bits,_=0,A=0,S=0,k=0,I=0,P=0,E=0,T=0,M=0,O=0,D=null,$=0,B=new i.Buf16(16),L=new i.Buf16(16),N=null,R=0;for(_=0;_<=15;_++)B[_]=0;for(A=0;A<l;A++)B[t[n+A]]++;for(I=C,k=15;1<=k&&0===B[k];k--);if(k<I&&(I=k),0===k)return c[h++]=20971520,c[h++]=20971520,u.bits=1,0;for(S=1;S<k&&0===B[S];S++);for(I<S&&(I=S),_=T=1;_<=15;_++)if(T<<=1,(T-=B[_])<0)return-1;if(0<T&&(0===e||1!==k))return-1;for(L[1]=0,_=1;_<15;_++)L[_+1]=L[_]+B[_];for(A=0;A<l;A++)0!==t[n+A]&&(d[L[t[n+A]]++]=A);if(y=0===e?(D=N=d,19):1===e?(D=r,$-=257,N=s,R-=257,256):(D=o,N=a,-1),_=S,v=h,E=A=O=0,f=-1,g=(M=1<<(P=I))-1,1===e&&852<M||2===e&&592<M)return 1;for(;;){for(x=_-E,w=d[A]<y?(b=0,d[A]):d[A]>y?(b=N[R+d[A]],D[$+d[A]]):(b=96,0),p=1<<_-E,S=m=1<<P;c[v+(O>>E)+(m-=p)]=x<<24|b<<16|w|0,0!==m;);for(p=1<<_-1;O&p;)p>>=1;if(0!==p?(O&=p-1,O+=p):O=0,A++,0==--B[_]){if(_===k)break;_=t[n+d[A]]}if(I<_&&(O&g)!==f){for(0===E&&(E=I),v+=S,T=1<<(P=_-E);P+E<k&&!((T-=B[P+E])<=0);)P++,T<<=1;if(M+=1<<P,1===e&&852<M||2===e&&592<M)return 1;c[f=O&g]=I<<24|P<<16|v-h|0}}return 0!==O&&(c[v+O]=_-E<<24|64<<16|0),u.bits=I,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var i=e("../utils/common");function r(e){for(var t=e.length;0<=--t;)e[t]=0}var s=256,o=286,a=30,l=15,c=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],h=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=new Array(576);r(p);var m=new Array(60);r(m);var f=new Array(512);r(f);var g=new Array(256);r(g);var v=new Array(29);r(v);var y,x,b,w=new Array(a);function C(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}function _(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function A(e){return e<256?f[e]:f[256+(e>>>7)]}function S(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function k(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,S(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function I(e,t,n){k(e,n[2*t],n[2*t+1])}function P(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function E(e,t,n){var i,r,s=new Array(16),o=0;for(i=1;i<=l;i++)s[i]=o=o+n[i-1]<<1;for(r=0;r<=t;r++){var a=e[2*r+1];0!==a&&(e[2*r]=P(s[a]++,a))}}function T(e){var t;for(t=0;t<o;t++)e.dyn_ltree[2*t]=0;for(t=0;t<a;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function M(e){8<e.bi_valid?S(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function O(e,t,n,i){var r=2*t,s=2*n;return e[r]<e[s]||e[r]===e[s]&&i[t]<=i[n]}function D(e,t,n){for(var i=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&O(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!O(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i}function $(e,t,n){var i,r,o,a,l=0;if(0!==e.last_lit)for(;i=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],r=e.pending_buf[e.l_buf+l],l++,0===i?I(e,r,t):(I(e,(o=g[r])+s+1,t),0!==(a=c[o])&&k(e,r-=v[o],a),I(e,o=A(--i),n),0!==(a=h[o])&&k(e,i-=w[o],a)),l<e.last_lit;);I(e,256,t)}function B(e,t){var n,i,r,s=t.dyn_tree,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,c=t.stat_desc.elems,h=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<c;n++)0!==s[2*n]?(e.heap[++e.heap_len]=h=n,e.depth[n]=0):s[2*n+1]=0;for(;e.heap_len<2;)s[2*(r=e.heap[++e.heap_len]=h<2?++h:0)]=1,e.depth[r]=0,e.opt_len--,a&&(e.static_len-=o[2*r+1]);for(t.max_code=h,n=e.heap_len>>1;1<=n;n--)D(e,s,n);for(r=c;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],D(e,s,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,s[2*r]=s[2*n]+s[2*i],e.depth[r]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,s[2*n+1]=s[2*i+1]=r,e.heap[1]=r++,D(e,s,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,i,r,s,o,a,c=t.dyn_tree,h=t.max_code,d=t.stat_desc.static_tree,u=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,f=t.stat_desc.max_length,g=0;for(s=0;s<=l;s++)e.bl_count[s]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)f<(s=c[2*c[2*(i=e.heap[n])+1]+1]+1)&&(s=f,g++),c[2*i+1]=s,h<i||(e.bl_count[s]++,o=0,m<=i&&(o=p[i-m]),a=c[2*i],e.opt_len+=a*(s+o),u&&(e.static_len+=a*(d[2*i+1]+o)));if(0!==g){do{for(s=f-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[f]--,g-=2}while(0<g);for(s=f;0!==s;s--)for(i=e.bl_count[s];0!==i;)h<(r=e.heap[--n])||(c[2*r+1]!==s&&(e.opt_len+=(s-c[2*r+1])*c[2*r],c[2*r+1]=s),i--)}}(e,t),E(s,h,e.bl_count)}function L(e,t,n){var i,r,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=o,o=t[2*(i+1)+1],++a<l&&r===o||(a<c?e.bl_tree[2*r]+=a:0!==r?(r!==s&&e.bl_tree[2*r]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=r,c=(a=0)===o?(l=138,3):r===o?(l=6,3):(l=7,4))}function N(e,t,n){var i,r,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),i=0;i<=n;i++)if(r=o,o=t[2*(i+1)+1],!(++a<l&&r===o)){if(a<c)for(;I(e,r,e.bl_tree),0!=--a;);else 0!==r?(r!==s&&(I(e,r,e.bl_tree),a--),I(e,16,e.bl_tree),k(e,a-3,2)):a<=10?(I(e,17,e.bl_tree),k(e,a-3,3)):(I(e,18,e.bl_tree),k(e,a-11,7));s=r,c=(a=0)===o?(l=138,3):r===o?(l=6,3):(l=7,4)}}r(w);var R=!1;function F(e,t,n,r){k(e,0+(r?1:0),3),function(e,t,n,r){M(e),S(e,n),S(e,~n),i.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}n._tr_init=function(e){R||(function(){var e,t,n,i,r,s=new Array(16);for(i=n=0;i<28;i++)for(v[i]=n,e=0;e<1<<c[i];e++)g[n++]=i;for(g[n-1]=i,i=r=0;i<16;i++)for(w[i]=r,e=0;e<1<<h[i];e++)f[r++]=i;for(r>>=7;i<a;i++)for(w[i]=r<<7,e=0;e<1<<h[i]-7;e++)f[256+r++]=i;for(t=0;t<=l;t++)s[t]=0;for(e=0;e<=143;)p[2*e+1]=8,e++,s[8]++;for(;e<=255;)p[2*e+1]=9,e++,s[9]++;for(;e<=279;)p[2*e+1]=7,e++,s[7]++;for(;e<=287;)p[2*e+1]=8,e++,s[8]++;for(E(p,287,s),e=0;e<a;e++)m[2*e+1]=5,m[2*e]=P(e,5);y=new C(p,c,257,o,l),x=new C(m,h,0,a,l),b=new C(new Array(0),d,0,19,7)}(),R=!0),e.l_desc=new _(e.dyn_ltree,y),e.d_desc=new _(e.dyn_dtree,x),e.bl_desc=new _(e.bl_tree,b),e.bi_buf=0,e.bi_valid=0,T(e)},n._tr_stored_block=F,n._tr_flush_block=function(e,t,n,i){var r,o,a=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<s;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),B(e,e.l_desc),B(e,e.d_desc),a=function(e){var t;for(L(e,e.dyn_ltree,e.l_desc.max_code),L(e,e.dyn_dtree,e.d_desc.max_code),B(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*u[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),r=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==t?F(e,t,n,i):4===e.strategy||o===r?(k(e,2+(i?1:0),3),$(e,p,m)):(k(e,4+(i?1:0),3),function(e,t,n,i){var r;for(k(e,t-257,5),k(e,n-1,5),k(e,i-4,4),r=0;r<i;r++)k(e,e.bl_tree[2*u[r]+1],3);N(e,e.dyn_ltree,t-1),N(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),$(e,e.dyn_ltree,e.dyn_dtree)),T(e),i&&M(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(g[n]+s+1)]++,e.dyn_dtree[2*A(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){k(e,2,3),I(e,256,p),function(e){16===e.bi_valid?(S(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){"use strict";t.exports="function"==typeof setImmediate?setImmediate:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}},{}]},{},[10])(10)},8552:(e,t,n)=>{var i=n(852)(n(5639),"DataView");e.exports=i},1989:(e,t,n)=>{var i=n(1789),r=n(401),s=n(7667),o=n(1327),a=n(1866);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,e.exports=l},8407:(e,t,n)=>{var i=n(7040),r=n(4125),s=n(2117),o=n(7529),a=n(4705);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,e.exports=l},7071:(e,t,n)=>{var i=n(852)(n(5639),"Map");e.exports=i},3369:(e,t,n)=>{var i=n(4785),r=n(1285),s=n(6e3),o=n(9916),a=n(5265);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,e.exports=l},3818:(e,t,n)=>{var i=n(852)(n(5639),"Promise");e.exports=i},8525:(e,t,n)=>{var i=n(852)(n(5639),"Set");e.exports=i},8668:(e,t,n)=>{var i=n(3369),r=n(619),s=n(2385);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new i;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=r,o.prototype.has=s,e.exports=o},6384:(e,t,n)=>{var i=n(8407),r=n(7465),s=n(3779),o=n(7599),a=n(4758),l=n(4309);function c(e){var t=this.__data__=new i(e);this.size=t.size}c.prototype.clear=r,c.prototype.delete=s,c.prototype.get=o,c.prototype.has=a,c.prototype.set=l,e.exports=c},2705:(e,t,n)=>{var i=n(5639).Symbol;e.exports=i},1149:(e,t,n)=>{var i=n(5639).Uint8Array;e.exports=i},577:(e,t,n)=>{var i=n(852)(n(5639),"WeakMap");e.exports=i},6874:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},7412:e=>{e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}},4963:e=>{e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length,r=0,s=[];++n<i;){var o=e[n];t(o,n,e)&&(s[r++]=o)}return s}},7443:(e,t,n)=>{var i=n(2118);e.exports=function(e,t){return!(null==e||!e.length)&&i(e,t,0)>-1}},1196:e=>{e.exports=function(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}},4636:(e,t,n)=>{var i=n(2545),r=n(5694),s=n(1469),o=n(4144),a=n(5776),l=n(6719),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=s(e),h=!n&&r(e),d=!n&&!h&&o(e),u=!n&&!h&&!d&&l(e),p=n||h||d||u,m=p?i(e.length,String):[],f=m.length;for(var g in e)!t&&!c.call(e,g)||p&&("length"==g||d&&("offset"==g||"parent"==g)||u&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,f))||m.push(g);return m}},9932:e=>{e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}},2488:e=>{e.exports=function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}},2908:e=>{e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}},8470:(e,t,n)=>{var i=n(7813);e.exports=function(e,t){for(var n=e.length;n--;)if(i(e[n][0],t))return n;return-1}},9465:(e,t,n)=>{var i=n(8777);e.exports=function(e,t,n){"__proto__"==t&&i?i(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},9881:(e,t,n)=>{var i=n(7816),r=n(9291)(i);e.exports=r},6029:(e,t,n)=>{var i=n(3448);e.exports=function(e,t,n){for(var r=-1,s=e.length;++r<s;){var o=e[r],a=t(o);if(null!=a&&(void 0===l?a==a&&!i(a):n(a,l)))var l=a,c=o}return c}},760:(e,t,n)=>{var i=n(9881);e.exports=function(e,t){var n=[];return i(e,(function(e,i,r){t(e,i,r)&&n.push(e)})),n}},1848:e=>{e.exports=function(e,t,n,i){for(var r=e.length,s=n+(i?1:-1);i?s--:++s<r;)if(t(e[s],s,e))return s;return-1}},5744:e=>{e.exports=function(e,t,n){var i;return n(e,(function(e,n,r){if(t(e,n,r))return i=n,!1})),i}},1078:(e,t,n)=>{var i=n(2488),r=n(7285);e.exports=function e(t,n,s,o,a){var l=-1,c=t.length;for(s||(s=r),a||(a=[]);++l<c;){var h=t[l];n>0&&s(h)?n>1?e(h,n-1,s,o,a):i(a,h):o||(a[a.length]=h)}return a}},8483:(e,t,n)=>{var i=n(5063)();e.exports=i},7816:(e,t,n)=>{var i=n(8483),r=n(3674);e.exports=function(e,t){return e&&i(e,t,r)}},7786:(e,t,n)=>{var i=n(1811),r=n(327);e.exports=function(e,t){for(var n=0,s=(t=i(t,e)).length;null!=e&&n<s;)e=e[r(t[n++])];return n&&n==s?e:void 0}},8866:(e,t,n)=>{var i=n(2488),r=n(1469);e.exports=function(e,t,n){var s=t(e);return r(e)?s:i(s,n(e))}},4239:(e,t,n)=>{var i=n(2705),r=n(9607),s=n(2333),o=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?r(e):s(e)}},3325:e=>{e.exports=function(e,t){return e>t}},13:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},2118:(e,t,n)=>{var i=n(1848),r=n(2722),s=n(2351);e.exports=function(e,t,n){return t==t?s(e,t,n):i(e,r,n)}},9454:(e,t,n)=>{var i=n(4239),r=n(7005);e.exports=function(e){return r(e)&&"[object Arguments]"==i(e)}},939:(e,t,n)=>{var i=n(2492),r=n(7005);e.exports=function e(t,n,s,o,a){return t===n||(null==t||null==n||!r(t)&&!r(n)?t!=t&&n!=n:i(t,n,s,o,e,a))}},2492:(e,t,n)=>{var i=n(6384),r=n(7114),s=n(8351),o=n(6096),a=n(4160),l=n(1469),c=n(4144),h=n(6719),d="[object Arguments]",u="[object Array]",p="[object Object]",m=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,f,g,v){var y=l(e),x=l(t),b=y?u:a(e),w=x?u:a(t),C=(b=b==d?p:b)==p,_=(w=w==d?p:w)==p,A=b==w;if(A&&c(e)){if(!c(t))return!1;y=!0,C=!1}if(A&&!C)return v||(v=new i),y||h(e)?r(e,t,n,f,g,v):s(e,t,b,n,f,g,v);if(!(1&n)){var S=C&&m.call(e,"__wrapped__"),k=_&&m.call(t,"__wrapped__");if(S||k){var I=S?e.value():e,P=k?t.value():t;return v||(v=new i),g(I,P,n,f,v)}}return!!A&&(v||(v=new i),o(e,t,n,f,g,v))}},2958:(e,t,n)=>{var i=n(6384),r=n(939);e.exports=function(e,t,n,s){var o=n.length,a=o,l=!s;if(null==e)return!a;for(e=Object(e);o--;){var c=n[o];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<a;){var h=(c=n[o])[0],d=e[h],u=c[1];if(l&&c[2]){if(void 0===d&&!(h in e))return!1}else{var p=new i;if(s)var m=s(d,u,h,e,t,p);if(!(void 0===m?r(u,d,3,s,p):m))return!1}}return!0}},2722:e=>{e.exports=function(e){return e!=e}},8458:(e,t,n)=>{var i=n(3560),r=n(5346),s=n(3218),o=n(346),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,h=l.toString,d=c.hasOwnProperty,u=RegExp("^"+h.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||r(e))&&(i(e)?u:a).test(o(e))}},8749:(e,t,n)=>{var i=n(4239),r=n(1780),s=n(7005),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return s(e)&&r(e.length)&&!!o[i(e)]}},7206:(e,t,n)=>{var i=n(1573),r=n(6432),s=n(6557),o=n(1469),a=n(9601);e.exports=function(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?o(e)?r(e[0],e[1]):i(e):a(e)}},280:(e,t,n)=>{var i=n(5726),r=n(6916),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!i(e))return r(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}},9199:(e,t,n)=>{var i=n(9881),r=n(8612);e.exports=function(e,t){var n=-1,s=r(e)?Array(e.length):[];return i(e,(function(e,i,r){s[++n]=t(e,i,r)})),s}},1573:(e,t,n)=>{var i=n(2958),r=n(1499),s=n(2634);e.exports=function(e){var t=r(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(n){return n===e||i(n,e,t)}}},6432:(e,t,n)=>{var i=n(939),r=n(7361),s=n(9095),o=n(5403),a=n(9162),l=n(2634),c=n(327);e.exports=function(e,t){return o(e)&&a(t)?l(c(e),t):function(n){var o=r(n,e);return void 0===o&&o===t?s(n,e):i(t,o,3)}}},2689:(e,t,n)=>{var i=n(9932),r=n(7786),s=n(7206),o=n(9199),a=n(1131),l=n(7518),c=n(5022),h=n(6557),d=n(1469);e.exports=function(e,t,n){t=t.length?i(t,(function(e){return d(e)?function(t){return r(t,1===e.length?e[0]:e)}:e})):[h];var u=-1;t=i(t,l(s));var p=o(e,(function(e,n,r){return{criteria:i(t,(function(t){return t(e)})),index:++u,value:e}}));return a(p,(function(e,t){return c(e,t,n)}))}},371:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},9152:(e,t,n)=>{var i=n(7786);e.exports=function(e){return function(t){return i(t,e)}}},5976:(e,t,n)=>{var i=n(6557),r=n(5357),s=n(61);e.exports=function(e,t){return s(r(e,t,i),e+"")}},6560:(e,t,n)=>{var i=n(5703),r=n(8777),s=n(6557),o=r?function(e,t){return r(e,"toString",{configurable:!0,enumerable:!1,value:i(t),writable:!0})}:s;e.exports=o},1131:e=>{e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},2545:e=>{e.exports=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}},531:(e,t,n)=>{var i=n(2705),r=n(9932),s=n(1469),o=n(3448),a=i?i.prototype:void 0,l=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(s(t))return r(t,e)+"";if(o(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},7561:(e,t,n)=>{var i=n(7990),r=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(r,""):e}},7518:e=>{e.exports=function(e){return function(t){return e(t)}}},5652:(e,t,n)=>{var i=n(8668),r=n(7443),s=n(1196),o=n(4757),a=n(3593),l=n(1814);e.exports=function(e,t,n){var c=-1,h=r,d=e.length,u=!0,p=[],m=p;if(n)u=!1,h=s;else if(d>=200){var f=t?null:a(e);if(f)return l(f);u=!1,h=o,m=new i}else m=t?[]:p;e:for(;++c<d;){var g=e[c],v=t?t(g):g;if(g=n||0!==g?g:0,u&&v==v){for(var y=m.length;y--;)if(m[y]===v)continue e;t&&m.push(v),p.push(g)}else h(m,v,n)||(m!==p&&m.push(v),p.push(g))}return p}},7415:(e,t,n)=>{var i=n(9932);e.exports=function(e,t){return i(t,(function(t){return e[t]}))}},4757:e=>{e.exports=function(e,t){return e.has(t)}},4290:(e,t,n)=>{var i=n(6557);e.exports=function(e){return"function"==typeof e?e:i}},1811:(e,t,n)=>{var i=n(1469),r=n(5403),s=n(5514),o=n(9833);e.exports=function(e,t){return i(e)?e:r(e,t)?[e]:s(o(e))}},6393:(e,t,n)=>{var i=n(3448);e.exports=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,s=e==e,o=i(e),a=void 0!==t,l=null===t,c=t==t,h=i(t);if(!l&&!h&&!o&&e>t||o&&a&&c&&!l&&!h||r&&a&&c||!n&&c||!s)return 1;if(!r&&!o&&!h&&e<t||h&&n&&s&&!r&&!o||l&&n&&s||!a&&s||!c)return-1}return 0}},5022:(e,t,n)=>{var i=n(6393);e.exports=function(e,t,n){for(var r=-1,s=e.criteria,o=t.criteria,a=s.length,l=n.length;++r<a;){var c=i(s[r],o[r]);if(c)return r>=l?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}},4429:(e,t,n)=>{var i=n(5639)["__core-js_shared__"];e.exports=i},9291:(e,t,n)=>{var i=n(8612);e.exports=function(e,t){return function(n,r){if(null==n)return n;if(!i(n))return e(n,r);for(var s=n.length,o=t?s:-1,a=Object(n);(t?o--:++o<s)&&!1!==r(a[o],o,a););return n}}},5063:e=>{e.exports=function(e){return function(t,n,i){for(var r=-1,s=Object(t),o=i(t),a=o.length;a--;){var l=o[e?a:++r];if(!1===n(s[l],l,s))break}return t}}},7740:(e,t,n)=>{var i=n(7206),r=n(8612),s=n(3674);e.exports=function(e){return function(t,n,o){var a=Object(t);if(!r(t)){var l=i(n,3);t=s(t),n=function(e){return l(a[e],e,a)}}var c=e(t,n,o);return c>-1?a[l?t[c]:c]:void 0}}},3593:(e,t,n)=>{var i=n(8525),r=n(308),s=n(1814),o=i&&1/s(new i([,-0]))[1]==1/0?function(e){return new i(e)}:r;e.exports=o},8777:(e,t,n)=>{var i=n(852),r=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=r},7114:(e,t,n)=>{var i=n(8668),r=n(2908),s=n(4757);e.exports=function(e,t,n,o,a,l){var c=1&n,h=e.length,d=t.length;if(h!=d&&!(c&&d>h))return!1;var u=l.get(e),p=l.get(t);if(u&&p)return u==t&&p==e;var m=-1,f=!0,g=2&n?new i:void 0;for(l.set(e,t),l.set(t,e);++m<h;){var v=e[m],y=t[m];if(o)var x=c?o(y,v,m,t,e,l):o(v,y,m,e,t,l);if(void 0!==x){if(x)continue;f=!1;break}if(g){if(!r(t,(function(e,t){if(!s(g,t)&&(v===e||a(v,e,n,o,l)))return g.push(t)}))){f=!1;break}}else if(v!==y&&!a(v,y,n,o,l)){f=!1;break}}return l.delete(e),l.delete(t),f}},8351:(e,t,n)=>{var i=n(2705),r=n(1149),s=n(7813),o=n(7114),a=n(8776),l=n(1814),c=i?i.prototype:void 0,h=c?c.valueOf:void 0;e.exports=function(e,t,n,i,c,d,u){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new r(e),new r(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=a;case"[object Set]":var m=1&i;if(p||(p=l),e.size!=t.size&&!m)return!1;var f=u.get(e);if(f)return f==t;i|=2,u.set(e,t);var g=o(p(e),p(t),i,c,d,u);return u.delete(e),g;case"[object Symbol]":if(h)return h.call(e)==h.call(t)}return!1}},6096:(e,t,n)=>{var i=n(8234),r=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,s,o,a){var l=1&n,c=i(e),h=c.length;if(h!=i(t).length&&!l)return!1;for(var d=h;d--;){var u=c[d];if(!(l?u in t:r.call(t,u)))return!1}var p=a.get(e),m=a.get(t);if(p&&m)return p==t&&m==e;var f=!0;a.set(e,t),a.set(t,e);for(var g=l;++d<h;){var v=e[u=c[d]],y=t[u];if(s)var x=l?s(y,v,u,t,e,a):s(v,y,u,e,t,a);if(!(void 0===x?v===y||o(v,y,n,s,a):x)){f=!1;break}g||(g="constructor"==u)}if(f&&!g){var b=e.constructor,w=t.constructor;b==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(f=!1)}return a.delete(e),a.delete(t),f}},1957:(e,t,n)=>{var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=i},8234:(e,t,n)=>{var i=n(8866),r=n(9551),s=n(3674);e.exports=function(e){return i(e,s,r)}},5050:(e,t,n)=>{var i=n(7019);e.exports=function(e,t){var n=e.__data__;return i(t)?n["string"==typeof t?"string":"hash"]:n.map}},1499:(e,t,n)=>{var i=n(9162),r=n(3674);e.exports=function(e){for(var t=r(e),n=t.length;n--;){var s=t[n],o=e[s];t[n]=[s,o,i(o)]}return t}},852:(e,t,n)=>{var i=n(8458),r=n(7801);e.exports=function(e,t){var n=r(e,t);return i(n)?n:void 0}},9607:(e,t,n)=>{var i=n(2705),r=Object.prototype,s=r.hasOwnProperty,o=r.toString,a=i?i.toStringTag:void 0;e.exports=function(e){var t=s.call(e,a),n=e[a];try{e[a]=void 0;var i=!0}catch(e){}var r=o.call(e);return i&&(t?e[a]=n:delete e[a]),r}},9551:(e,t,n)=>{var i=n(4963),r=n(479),s=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(e){return null==e?[]:(e=Object(e),i(o(e),(function(t){return s.call(e,t)})))}:r;e.exports=a},4160:(e,t,n)=>{var i=n(8552),r=n(7071),s=n(3818),o=n(8525),a=n(577),l=n(4239),c=n(346),h="[object Map]",d="[object Promise]",u="[object Set]",p="[object WeakMap]",m="[object DataView]",f=c(i),g=c(r),v=c(s),y=c(o),x=c(a),b=l;(i&&b(new i(new ArrayBuffer(1)))!=m||r&&b(new r)!=h||s&&b(s.resolve())!=d||o&&b(new o)!=u||a&&b(new a)!=p)&&(b=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,i=n?c(n):"";if(i)switch(i){case f:return m;case g:return h;case v:return d;case y:return u;case x:return p}return t}),e.exports=b},7801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},222:(e,t,n)=>{var i=n(1811),r=n(5694),s=n(1469),o=n(5776),a=n(1780),l=n(327);e.exports=function(e,t,n){for(var c=-1,h=(t=i(t,e)).length,d=!1;++c<h;){var u=l(t[c]);if(!(d=null!=e&&n(e,u)))break;e=e[u]}return d||++c!=h?d:!!(h=null==e?0:e.length)&&a(h)&&o(u,h)&&(s(e)||r(e))}},1789:(e,t,n)=>{var i=n(4536);e.exports=function(){this.__data__=i?i(null):{},this.size=0}},401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7667:(e,t,n)=>{var i=n(4536),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(i){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return r.call(t,e)?t[e]:void 0}},1327:(e,t,n)=>{var i=n(4536),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return i?void 0!==t[e]:r.call(t,e)}},1866:(e,t,n)=>{var i=n(4536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?"__lodash_hash_undefined__":t,this}},7285:(e,t,n)=>{var i=n(2705),r=n(5694),s=n(1469),o=i?i.isConcatSpreadable:void 0;e.exports=function(e){return s(e)||r(e)||!!(o&&e&&e[o])}},5776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var i=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==i||"symbol"!=i&&t.test(e))&&e>-1&&e%1==0&&e<n}},6612:(e,t,n)=>{var i=n(7813),r=n(8612),s=n(5776),o=n(3218);e.exports=function(e,t,n){if(!o(n))return!1;var a=typeof t;return!!("number"==a?r(n)&&s(t,n.length):"string"==a&&t in n)&&i(n[t],e)}},5403:(e,t,n)=>{var i=n(1469),r=n(3448),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(i(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!r(e))||o.test(e)||!s.test(e)||null!=t&&e in Object(t)}},7019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5346:(e,t,n)=>{var i,r=n(4429),s=(i=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";e.exports=function(e){return!!s&&s in e}},5726:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},9162:(e,t,n)=>{var i=n(3218);e.exports=function(e){return e==e&&!i(e)}},7040:e=>{e.exports=function(){this.__data__=[],this.size=0}},4125:(e,t,n)=>{var i=n(8470),r=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=i(t,e);return!(n<0||(n==t.length-1?t.pop():r.call(t,n,1),--this.size,0))}},2117:(e,t,n)=>{var i=n(8470);e.exports=function(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]}},7529:(e,t,n)=>{var i=n(8470);e.exports=function(e){return i(this.__data__,e)>-1}},4705:(e,t,n)=>{var i=n(8470);e.exports=function(e,t){var n=this.__data__,r=i(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}},4785:(e,t,n)=>{var i=n(1989),r=n(8407),s=n(7071);e.exports=function(){this.size=0,this.__data__={hash:new i,map:new(s||r),string:new i}}},1285:(e,t,n)=>{var i=n(5050);e.exports=function(e){var t=i(this,e).delete(e);return this.size-=t?1:0,t}},6e3:(e,t,n)=>{var i=n(5050);e.exports=function(e){return i(this,e).get(e)}},9916:(e,t,n)=>{var i=n(5050);e.exports=function(e){return i(this,e).has(e)}},5265:(e,t,n)=>{var i=n(5050);e.exports=function(e,t){var n=i(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}},8776:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}},2634:e=>{e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},4523:(e,t,n)=>{var i=n(8306);e.exports=function(e){var t=i(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},4536:(e,t,n)=>{var i=n(852)(Object,"create");e.exports=i},6916:(e,t,n)=>{var i=n(5569)(Object.keys,Object);e.exports=i},1167:(e,t,n)=>{e=n.nmd(e);var i=n(1957),r=t&&!t.nodeType&&t,s=r&&e&&!e.nodeType&&e,o=s&&s.exports===r&&i.process,a=function(){try{return s&&s.require&&s.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=a},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},5357:(e,t,n)=>{var i=n(6874),r=Math.max;e.exports=function(e,t,n){return t=r(void 0===t?e.length-1:t,0),function(){for(var s=arguments,o=-1,a=r(s.length-t,0),l=Array(a);++o<a;)l[o]=s[t+o];o=-1;for(var c=Array(t+1);++o<t;)c[o]=s[o];return c[t]=n(l),i(e,this,c)}}},5639:(e,t,n)=>{var i=n(1957),r="object"==typeof self&&self&&self.Object===Object&&self,s=i||r||Function("return this")();e.exports=s},619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2385:e=>{e.exports=function(e){return this.__data__.has(e)}},1814:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},61:(e,t,n)=>{var i=n(6560),r=n(1275)(i);e.exports=r},1275:e=>{var t=Date.now;e.exports=function(e){var n=0,i=0;return function(){var r=t(),s=16-(r-i);if(i=r,s>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},7465:(e,t,n)=>{var i=n(8407);e.exports=function(){this.__data__=new i,this.size=0}},3779:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},7599:e=>{e.exports=function(e){return this.__data__.get(e)}},4758:e=>{e.exports=function(e){return this.__data__.has(e)}},4309:(e,t,n)=>{var i=n(8407),r=n(7071),s=n(3369);e.exports=function(e,t){var n=this.__data__;if(n instanceof i){var o=n.__data__;if(!r||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new s(o)}return n.set(e,t),this.size=n.size,this}},2351:e=>{e.exports=function(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}},5514:(e,t,n)=>{var i=n(4523),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,o=i((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,(function(e,n,i,r){t.push(i?r.replace(s,"$1"):n||e)})),t}));e.exports=o},327:(e,t,n)=>{var i=n(3448);e.exports=function(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7990:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},5703:e=>{e.exports=function(e){return function(){return e}}},7813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},3105:(e,t,n)=>{var i=n(4963),r=n(760),s=n(7206),o=n(1469);e.exports=function(e,t){return(o(e)?i:r)(e,s(t,3))}},3311:(e,t,n)=>{var i=n(7740)(n(998));e.exports=i},998:(e,t,n)=>{var i=n(1848),r=n(7206),s=n(554),o=Math.max;e.exports=function(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var l=null==n?0:s(n);return l<0&&(l=o(a+l,0)),i(e,r(t,3),l)}},894:(e,t,n)=>{var i=n(5744),r=n(7816),s=n(7206);e.exports=function(e,t){return i(e,s(t,3),r)}},4486:(e,t,n)=>{var i=n(7412),r=n(9881),s=n(4290),o=n(1469);e.exports=function(e,t){return(o(e)?i:r)(e,s(t))}},7361:(e,t,n)=>{var i=n(7786);e.exports=function(e,t,n){var r=null==e?void 0:i(e,t);return void 0===r?n:r}},9095:(e,t,n)=>{var i=n(13),r=n(222);e.exports=function(e,t){return null!=e&&r(e,t,i)}},6557:e=>{e.exports=function(e){return e}},3651:(e,t,n)=>{var i=n(2118),r=n(554),s=Math.max;e.exports=function(e,t,n){var o=null==e?0:e.length;if(!o)return-1;var a=null==n?0:r(n);return a<0&&(a=s(o+a,0)),i(e,t,a)}},5694:(e,t,n)=>{var i=n(9454),r=n(7005),s=Object.prototype,o=s.hasOwnProperty,a=s.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(e){return r(e)&&o.call(e,"callee")&&!a.call(e,"callee")};e.exports=l},1469:e=>{var t=Array.isArray;e.exports=t},8612:(e,t,n)=>{var i=n(3560),r=n(1780);e.exports=function(e){return null!=e&&r(e.length)&&!i(e)}},4144:(e,t,n)=>{e=n.nmd(e);var i=n(5639),r=n(5062),s=t&&!t.nodeType&&t,o=s&&e&&!e.nodeType&&e,a=o&&o.exports===s?i.Buffer:void 0,l=(a?a.isBuffer:void 0)||r;e.exports=l},3560:(e,t,n)=>{var i=n(4239),r=n(3218);e.exports=function(e){if(!r(e))return!1;var t=i(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},3448:(e,t,n)=>{var i=n(4239),r=n(7005);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==i(e)}},6719:(e,t,n)=>{var i=n(8749),r=n(7518),s=n(1167),o=s&&s.isTypedArray,a=o?r(o):i;e.exports=a},3674:(e,t,n)=>{var i=n(4636),r=n(280),s=n(8612);e.exports=function(e){return s(e)?i(e):r(e)}},6486:function(e,t,n){var i;e=n.nmd(e),function(){var r,s="Expected a function",o="__lodash_hash_undefined__",a="__lodash_placeholder__",l=32,c=128,h=1/0,d=9007199254740991,u=NaN,p=4294967295,m=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",l],["partialRight",64],["rearg",256]],f="[object Arguments]",g="[object Array]",v="[object Boolean]",y="[object Date]",x="[object Error]",b="[object Function]",w="[object GeneratorFunction]",C="[object Map]",_="[object Number]",A="[object Object]",S="[object Promise]",k="[object RegExp]",I="[object Set]",P="[object String]",E="[object Symbol]",T="[object WeakMap]",M="[object ArrayBuffer]",O="[object DataView]",D="[object Float32Array]",$="[object Float64Array]",B="[object Int8Array]",L="[object Int16Array]",N="[object Int32Array]",R="[object Uint8Array]",F="[object Uint8ClampedArray]",Z="[object Uint16Array]",j="[object Uint32Array]",z=/\b__p \+= '';/g,U=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,V=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>"']/g,G=RegExp(V.source),W=RegExp(q.source),K=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,ne=RegExp(te.source),ie=/^\s+/,re=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,oe=/\{\n\/\* \[wrapped with (.+)\] \*/,ae=/,? & /,le=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ce=/[()=,{}\[\]\/\s]/,he=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ue=/\w*$/,pe=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,fe=/^\[object .+?Constructor\]$/,ge=/^0o[0-7]+$/i,ve=/^(?:0|[1-9]\d*)$/,ye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xe=/($^)/,be=/['\n\r\u2028\u2029\\]/g,we="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ce="a-z\\xdf-\\xf6\\xf8-\\xff",_e="A-Z\\xc0-\\xd6\\xd8-\\xde",Ae="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Se="["+Ae+"]",ke="["+we+"]",Ie="\\d+",Pe="["+Ce+"]",Ee="[^\\ud800-\\udfff"+Ae+Ie+"\\u2700-\\u27bf"+Ce+_e+"]",Te="\\ud83c[\\udffb-\\udfff]",Me="[^\\ud800-\\udfff]",Oe="(?:\\ud83c[\\udde6-\\uddff]){2}",De="[\\ud800-\\udbff][\\udc00-\\udfff]",$e="["+_e+"]",Be="(?:"+Pe+"|"+Ee+")",Le="(?:"+$e+"|"+Ee+")",Ne="(?:['](?:d|ll|m|re|s|t|ve))?",Re="(?:['](?:D|LL|M|RE|S|T|VE))?",Fe="(?:"+ke+"|"+Te+")?",Ze="[\\ufe0e\\ufe0f]?",je=Ze+Fe+"(?:\\u200d(?:"+[Me,Oe,De].join("|")+")"+Ze+Fe+")*",ze="(?:"+["[\\u2700-\\u27bf]",Oe,De].join("|")+")"+je,Ue="(?:"+[Me+ke+"?",ke,Oe,De,"[\\ud800-\\udfff]"].join("|")+")",He=RegExp("[']","g"),Ve=RegExp(ke,"g"),qe=RegExp(Te+"(?="+Te+")|"+Ue+je,"g"),Ge=RegExp([$e+"?"+Pe+"+"+Ne+"(?="+[Se,$e,"$"].join("|")+")",Le+"+"+Re+"(?="+[Se,$e+Be,"$"].join("|")+")",$e+"?"+Be+"+"+Ne,$e+"+"+Re,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ie,ze].join("|"),"g"),We=RegExp("[\\u200d\\ud800-\\udfff"+we+"\\ufe0e\\ufe0f]"),Ke=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Je=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ye=-1,Qe={};Qe[D]=Qe[$]=Qe[B]=Qe[L]=Qe[N]=Qe[R]=Qe[F]=Qe[Z]=Qe[j]=!0,Qe[f]=Qe[g]=Qe[M]=Qe[v]=Qe[O]=Qe[y]=Qe[x]=Qe[b]=Qe[C]=Qe[_]=Qe[A]=Qe[k]=Qe[I]=Qe[P]=Qe[T]=!1;var Xe={};Xe[f]=Xe[g]=Xe[M]=Xe[O]=Xe[v]=Xe[y]=Xe[D]=Xe[$]=Xe[B]=Xe[L]=Xe[N]=Xe[C]=Xe[_]=Xe[A]=Xe[k]=Xe[I]=Xe[P]=Xe[E]=Xe[R]=Xe[F]=Xe[Z]=Xe[j]=!0,Xe[x]=Xe[b]=Xe[T]=!1;var et={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tt=parseFloat,nt=parseInt,it="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,rt="object"==typeof self&&self&&self.Object===Object&&self,st=it||rt||Function("return this")(),ot=t&&!t.nodeType&&t,at=ot&&e&&!e.nodeType&&e,lt=at&&at.exports===ot,ct=lt&&it.process,ht=function(){try{return at&&at.require&&at.require("util").types||ct&&ct.binding&&ct.binding("util")}catch(e){}}(),dt=ht&&ht.isArrayBuffer,ut=ht&&ht.isDate,pt=ht&&ht.isMap,mt=ht&&ht.isRegExp,ft=ht&&ht.isSet,gt=ht&&ht.isTypedArray;function vt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function yt(e,t,n,i){for(var r=-1,s=null==e?0:e.length;++r<s;){var o=e[r];t(i,o,n(o),e)}return i}function xt(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function bt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function wt(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function Ct(e,t){for(var n=-1,i=null==e?0:e.length,r=0,s=[];++n<i;){var o=e[n];t(o,n,e)&&(s[r++]=o)}return s}function _t(e,t){return!(null==e||!e.length)&&Dt(e,t,0)>-1}function At(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function St(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function kt(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function It(e,t,n,i){var r=-1,s=null==e?0:e.length;for(i&&s&&(n=e[++r]);++r<s;)n=t(n,e[r],r,e);return n}function Pt(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function Et(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}var Tt=Nt("length");function Mt(e,t,n){var i;return n(e,(function(e,n,r){if(t(e,n,r))return i=n,!1})),i}function Ot(e,t,n,i){for(var r=e.length,s=n+(i?1:-1);i?s--:++s<r;)if(t(e[s],s,e))return s;return-1}function Dt(e,t,n){return t==t?function(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}(e,t,n):Ot(e,Bt,n)}function $t(e,t,n,i){for(var r=n-1,s=e.length;++r<s;)if(i(e[r],t))return r;return-1}function Bt(e){return e!=e}function Lt(e,t){var n=null==e?0:e.length;return n?Zt(e,t)/n:u}function Nt(e){return function(t){return null==t?r:t[e]}}function Rt(e){return function(t){return null==e?r:e[t]}}function Ft(e,t,n,i,r){return r(e,(function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)})),n}function Zt(e,t){for(var n,i=-1,s=e.length;++i<s;){var o=t(e[i]);o!==r&&(n=n===r?o:n+o)}return n}function jt(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function zt(e){return e?e.slice(0,an(e)+1).replace(ie,""):e}function Ut(e){return function(t){return e(t)}}function Ht(e,t){return St(t,(function(t){return e[t]}))}function Vt(e,t){return e.has(t)}function qt(e,t){for(var n=-1,i=e.length;++n<i&&Dt(t,e[n],0)>-1;);return n}function Gt(e,t){for(var n=e.length;n--&&Dt(t,e[n],0)>-1;);return n}function Wt(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}var Kt=Rt({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),Jt=Rt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Yt(e){return"\\"+et[e]}function Qt(e){return We.test(e)}function Xt(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function en(e,t){return function(n){return e(t(n))}}function tn(e,t){for(var n=-1,i=e.length,r=0,s=[];++n<i;){var o=e[n];o!==t&&o!==a||(e[n]=a,s[r++]=n)}return s}function nn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function rn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function sn(e){return Qt(e)?function(e){for(var t=qe.lastIndex=0;qe.test(e);)++t;return t}(e):Tt(e)}function on(e){return Qt(e)?function(e){return e.match(qe)||[]}(e):function(e){return e.split("")}(e)}function an(e){for(var t=e.length;t--&&re.test(e.charAt(t)););return t}var ln=Rt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),cn=function e(t){var n,i=(t=null==t?st:cn.defaults(st.Object(),t,cn.pick(st,Je))).Array,re=t.Date,we=t.Error,Ce=t.Function,_e=t.Math,Ae=t.Object,Se=t.RegExp,ke=t.String,Ie=t.TypeError,Pe=i.prototype,Ee=Ce.prototype,Te=Ae.prototype,Me=t["__core-js_shared__"],Oe=Ee.toString,De=Te.hasOwnProperty,$e=0,Be=(n=/[^.]+$/.exec(Me&&Me.keys&&Me.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Le=Te.toString,Ne=Oe.call(Ae),Re=st._,Fe=Se("^"+Oe.call(De).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ze=lt?t.Buffer:r,je=t.Symbol,ze=t.Uint8Array,Ue=Ze?Ze.allocUnsafe:r,qe=en(Ae.getPrototypeOf,Ae),We=Ae.create,et=Te.propertyIsEnumerable,it=Pe.splice,rt=je?je.isConcatSpreadable:r,ot=je?je.iterator:r,at=je?je.toStringTag:r,ct=function(){try{var e=cs(Ae,"defineProperty");return e({},"",{}),e}catch(e){}}(),ht=t.clearTimeout!==st.clearTimeout&&t.clearTimeout,Tt=re&&re.now!==st.Date.now&&re.now,Rt=t.setTimeout!==st.setTimeout&&t.setTimeout,hn=_e.ceil,dn=_e.floor,un=Ae.getOwnPropertySymbols,pn=Ze?Ze.isBuffer:r,mn=t.isFinite,fn=Pe.join,gn=en(Ae.keys,Ae),vn=_e.max,yn=_e.min,xn=re.now,bn=t.parseInt,wn=_e.random,Cn=Pe.reverse,_n=cs(t,"DataView"),An=cs(t,"Map"),Sn=cs(t,"Promise"),kn=cs(t,"Set"),In=cs(t,"WeakMap"),Pn=cs(Ae,"create"),En=In&&new In,Tn={},Mn=Rs(_n),On=Rs(An),Dn=Rs(Sn),$n=Rs(kn),Bn=Rs(In),Ln=je?je.prototype:r,Nn=Ln?Ln.valueOf:r,Rn=Ln?Ln.toString:r;function Fn(e){if(na(e)&&!Vo(e)&&!(e instanceof Un)){if(e instanceof zn)return e;if(De.call(e,"__wrapped__"))return Fs(e)}return new zn(e)}var Zn=function(){function e(){}return function(t){if(!ta(t))return{};if(We)return We(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function jn(){}function zn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Un(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Vn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Wn(e){var t=this.__data__=new Vn(e);this.size=t.size}function Kn(e,t){var n=Vo(e),i=!n&&Ho(e),r=!n&&!i&&Ko(e),s=!n&&!i&&!r&&ha(e),o=n||i||r||s,a=o?jt(e.length,ke):[],l=a.length;for(var c in e)!t&&!De.call(e,c)||o&&("length"==c||r&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||gs(c,l))||a.push(c);return a}function Jn(e){var t=e.length;return t?e[qi(0,t-1)]:r}function Yn(e,t){return Ds(Ir(e),oi(t,0,e.length))}function Qn(e){return Ds(Ir(e))}function Xn(e,t,n){(n!==r&&!jo(e[t],n)||n===r&&!(t in e))&&ri(e,t,n)}function ei(e,t,n){var i=e[t];De.call(e,t)&&jo(i,n)&&(n!==r||t in e)||ri(e,t,n)}function ti(e,t){for(var n=e.length;n--;)if(jo(e[n][0],t))return n;return-1}function ni(e,t,n,i){return di(e,(function(e,r,s){t(i,e,n(e),s)})),i}function ii(e,t){return e&&Pr(t,Oa(t),e)}function ri(e,t,n){"__proto__"==t&&ct?ct(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function si(e,t){for(var n=-1,s=t.length,o=i(s),a=null==e;++n<s;)o[n]=a?r:Ia(e,t[n]);return o}function oi(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function ai(e,t,n,i,s,o){var a,l=1&t,c=2&t,h=4&t;if(n&&(a=s?n(e,i,s,o):n(e)),a!==r)return a;if(!ta(e))return e;var d=Vo(e);if(d){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&De.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return Ir(e,a)}else{var u=us(e),p=u==b||u==w;if(Ko(e))return wr(e,l);if(u==A||u==f||p&&!s){if(a=c||p?{}:ms(e),!l)return c?function(e,t){return Pr(e,ds(e),t)}(e,function(e,t){return e&&Pr(t,Da(t),e)}(a,e)):function(e,t){return Pr(e,hs(e),t)}(e,ii(a,e))}else{if(!Xe[u])return s?e:{};a=function(e,t,n){var i,r=e.constructor;switch(t){case M:return Cr(e);case v:case y:return new r(+e);case O:return function(e,t){var n=t?Cr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case D:case $:case B:case L:case N:case R:case F:case Z:case j:return _r(e,n);case C:case I:return new r;case _:case P:return new r(e);case k:return function(e){var t=new e.constructor(e.source,ue.exec(e));return t.lastIndex=e.lastIndex,t}(e);case E:return i=e,Nn?Ae(Nn.call(i)):{}}}(e,u,l)}}o||(o=new Wn);var m=o.get(e);if(m)return m;o.set(e,a),aa(e)?e.forEach((function(i){a.add(ai(i,t,n,i,e,o))})):ia(e)&&e.forEach((function(i,r){a.set(r,ai(i,t,n,r,e,o))}));var g=d?r:(h?c?ns:ts:c?Da:Oa)(e);return xt(g||e,(function(i,r){g&&(i=e[r=i]),ei(a,r,ai(i,t,n,r,e,o))})),a}function li(e,t,n){var i=n.length;if(null==e)return!i;for(e=Ae(e);i--;){var s=n[i],o=t[s],a=e[s];if(a===r&&!(s in e)||!o(a))return!1}return!0}function ci(e,t,n){if("function"!=typeof e)throw new Ie(s);return Es((function(){e.apply(r,n)}),t)}function hi(e,t,n,i){var r=-1,s=_t,o=!0,a=e.length,l=[],c=t.length;if(!a)return l;n&&(t=St(t,Ut(n))),i?(s=At,o=!1):t.length>=200&&(s=Vt,o=!1,t=new Gn(t));e:for(;++r<a;){var h=e[r],d=null==n?h:n(h);if(h=i||0!==h?h:0,o&&d==d){for(var u=c;u--;)if(t[u]===d)continue e;l.push(h)}else s(t,d,i)||l.push(h)}return l}Fn.templateSettings={escape:K,evaluate:J,interpolate:Y,variable:"",imports:{_:Fn}},Fn.prototype=jn.prototype,Fn.prototype.constructor=Fn,zn.prototype=Zn(jn.prototype),zn.prototype.constructor=zn,Un.prototype=Zn(jn.prototype),Un.prototype.constructor=Un,Hn.prototype.clear=function(){this.__data__=Pn?Pn(null):{},this.size=0},Hn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hn.prototype.get=function(e){var t=this.__data__;if(Pn){var n=t[e];return n===o?r:n}return De.call(t,e)?t[e]:r},Hn.prototype.has=function(e){var t=this.__data__;return Pn?t[e]!==r:De.call(t,e)},Hn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Pn&&t===r?o:t,this},Vn.prototype.clear=function(){this.__data__=[],this.size=0},Vn.prototype.delete=function(e){var t=this.__data__,n=ti(t,e);return!(n<0||(n==t.length-1?t.pop():it.call(t,n,1),--this.size,0))},Vn.prototype.get=function(e){var t=this.__data__,n=ti(t,e);return n<0?r:t[n][1]},Vn.prototype.has=function(e){return ti(this.__data__,e)>-1},Vn.prototype.set=function(e,t){var n=this.__data__,i=ti(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(An||Vn),string:new Hn}},qn.prototype.delete=function(e){var t=as(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return as(this,e).get(e)},qn.prototype.has=function(e){return as(this,e).has(e)},qn.prototype.set=function(e,t){var n=as(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},Gn.prototype.add=Gn.prototype.push=function(e){return this.__data__.set(e,o),this},Gn.prototype.has=function(e){return this.__data__.has(e)},Wn.prototype.clear=function(){this.__data__=new Vn,this.size=0},Wn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Wn.prototype.get=function(e){return this.__data__.get(e)},Wn.prototype.has=function(e){return this.__data__.has(e)},Wn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Vn){var i=n.__data__;if(!An||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(i)}return n.set(e,t),this.size=n.size,this};var di=Mr(xi),ui=Mr(bi,!0);function pi(e,t){var n=!0;return di(e,(function(e,i,r){return n=!!t(e,i,r)})),n}function mi(e,t,n){for(var i=-1,s=e.length;++i<s;){var o=e[i],a=t(o);if(null!=a&&(l===r?a==a&&!ca(a):n(a,l)))var l=a,c=o}return c}function fi(e,t){var n=[];return di(e,(function(e,i,r){t(e,i,r)&&n.push(e)})),n}function gi(e,t,n,i,r){var s=-1,o=e.length;for(n||(n=fs),r||(r=[]);++s<o;){var a=e[s];t>0&&n(a)?t>1?gi(a,t-1,n,i,r):kt(r,a):i||(r[r.length]=a)}return r}var vi=Or(),yi=Or(!0);function xi(e,t){return e&&vi(e,t,Oa)}function bi(e,t){return e&&yi(e,t,Oa)}function wi(e,t){return Ct(t,(function(t){return Qo(e[t])}))}function Ci(e,t){for(var n=0,i=(t=vr(t,e)).length;null!=e&&n<i;)e=e[Ns(t[n++])];return n&&n==i?e:r}function _i(e,t,n){var i=t(e);return Vo(e)?i:kt(i,n(e))}function Ai(e){return null==e?e===r?"[object Undefined]":"[object Null]":at&&at in Ae(e)?function(e){var t=De.call(e,at),n=e[at];try{e[at]=r;var i=!0}catch(e){}var s=Le.call(e);return i&&(t?e[at]=n:delete e[at]),s}(e):function(e){return Le.call(e)}(e)}function Si(e,t){return e>t}function ki(e,t){return null!=e&&De.call(e,t)}function Ii(e,t){return null!=e&&t in Ae(e)}function Pi(e,t,n){for(var s=n?At:_t,o=e[0].length,a=e.length,l=a,c=i(a),h=1/0,d=[];l--;){var u=e[l];l&&t&&(u=St(u,Ut(t))),h=yn(u.length,h),c[l]=!n&&(t||o>=120&&u.length>=120)?new Gn(l&&u):r}u=e[0];var p=-1,m=c[0];e:for(;++p<o&&d.length<h;){var f=u[p],g=t?t(f):f;if(f=n||0!==f?f:0,!(m?Vt(m,g):s(d,g,n))){for(l=a;--l;){var v=c[l];if(!(v?Vt(v,g):s(e[l],g,n)))continue e}m&&m.push(g),d.push(f)}}return d}function Ei(e,t,n){var i=null==(e=Ss(e,t=vr(t,e)))?e:e[Ns(Js(t))];return null==i?r:vt(i,e,n)}function Ti(e){return na(e)&&Ai(e)==f}function Mi(e,t,n,i,s){return e===t||(null==e||null==t||!na(e)&&!na(t)?e!=e&&t!=t:function(e,t,n,i,s,o){var a=Vo(e),l=Vo(t),c=a?g:us(e),h=l?g:us(t),d=(c=c==f?A:c)==A,u=(h=h==f?A:h)==A,p=c==h;if(p&&Ko(e)){if(!Ko(t))return!1;a=!0,d=!1}if(p&&!d)return o||(o=new Wn),a||ha(e)?Xr(e,t,n,i,s,o):function(e,t,n,i,r,s,o){switch(n){case O:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case M:return!(e.byteLength!=t.byteLength||!s(new ze(e),new ze(t)));case v:case y:case _:return jo(+e,+t);case x:return e.name==t.name&&e.message==t.message;case k:case P:return e==t+"";case C:var a=Xt;case I:var l=1&i;if(a||(a=nn),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;i|=2,o.set(e,t);var h=Xr(a(e),a(t),i,r,s,o);return o.delete(e),h;case E:if(Nn)return Nn.call(e)==Nn.call(t)}return!1}(e,t,c,n,i,s,o);if(!(1&n)){var m=d&&De.call(e,"__wrapped__"),b=u&&De.call(t,"__wrapped__");if(m||b){var w=m?e.value():e,S=b?t.value():t;return o||(o=new Wn),s(w,S,n,i,o)}}return!!p&&(o||(o=new Wn),function(e,t,n,i,s,o){var a=1&n,l=ts(e),c=l.length;if(c!=ts(t).length&&!a)return!1;for(var h=c;h--;){var d=l[h];if(!(a?d in t:De.call(t,d)))return!1}var u=o.get(e),p=o.get(t);if(u&&p)return u==t&&p==e;var m=!0;o.set(e,t),o.set(t,e);for(var f=a;++h<c;){var g=e[d=l[h]],v=t[d];if(i)var y=a?i(v,g,d,t,e,o):i(g,v,d,e,t,o);if(!(y===r?g===v||s(g,v,n,i,o):y)){m=!1;break}f||(f="constructor"==d)}if(m&&!f){var x=e.constructor,b=t.constructor;x==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof b&&b instanceof b||(m=!1)}return o.delete(e),o.delete(t),m}(e,t,n,i,s,o))}(e,t,n,i,Mi,s))}function Oi(e,t,n,i){var s=n.length,o=s,a=!i;if(null==e)return!o;for(e=Ae(e);s--;){var l=n[s];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<o;){var c=(l=n[s])[0],h=e[c],d=l[1];if(a&&l[2]){if(h===r&&!(c in e))return!1}else{var u=new Wn;if(i)var p=i(h,d,c,e,t,u);if(!(p===r?Mi(d,h,3,i,u):p))return!1}}return!0}function Di(e){return!(!ta(e)||(t=e,Be&&Be in t))&&(Qo(e)?Fe:fe).test(Rs(e));var t}function $i(e){return"function"==typeof e?e:null==e?rl:"object"==typeof e?Vo(e)?Fi(e[0],e[1]):Ri(e):pl(e)}function Bi(e){if(!ws(e))return gn(e);var t=[];for(var n in Ae(e))De.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Li(e,t){return e<t}function Ni(e,t){var n=-1,r=Go(e)?i(e.length):[];return di(e,(function(e,i,s){r[++n]=t(e,i,s)})),r}function Ri(e){var t=ls(e);return 1==t.length&&t[0][2]?_s(t[0][0],t[0][1]):function(n){return n===e||Oi(n,e,t)}}function Fi(e,t){return ys(e)&&Cs(t)?_s(Ns(e),t):function(n){var i=Ia(n,e);return i===r&&i===t?Pa(n,e):Mi(t,i,3)}}function Zi(e,t,n,i,s){e!==t&&vi(t,(function(o,a){if(s||(s=new Wn),ta(o))!function(e,t,n,i,s,o,a){var l=Is(e,n),c=Is(t,n),h=a.get(c);if(h)Xn(e,n,h);else{var d=o?o(l,c,n+"",e,t,a):r,u=d===r;if(u){var p=Vo(c),m=!p&&Ko(c),f=!p&&!m&&ha(c);d=c,p||m||f?Vo(l)?d=l:Wo(l)?d=Ir(l):m?(u=!1,d=wr(c,!0)):f?(u=!1,d=_r(c,!0)):d=[]:sa(c)||Ho(c)?(d=l,Ho(l)?d=ya(l):ta(l)&&!Qo(l)||(d=ms(c))):u=!1}u&&(a.set(c,d),s(d,c,i,o,a),a.delete(c)),Xn(e,n,d)}}(e,t,a,n,Zi,i,s);else{var l=i?i(Is(e,a),o,a+"",e,t,s):r;l===r&&(l=o),Xn(e,a,l)}}),Da)}function ji(e,t){var n=e.length;if(n)return gs(t+=t<0?n:0,n)?e[t]:r}function zi(e,t,n){t=t.length?St(t,(function(e){return Vo(e)?function(t){return Ci(t,1===e.length?e[0]:e)}:e})):[rl];var i=-1;t=St(t,Ut(os()));var r=Ni(e,(function(e,n,r){var s=St(t,(function(t){return t(e)}));return{criteria:s,index:++i,value:e}}));return function(e,t){var i=e.length;for(e.sort((function(e,t){return function(e,t,n){for(var i=-1,r=e.criteria,s=t.criteria,o=r.length,a=n.length;++i<o;){var l=Ar(r[i],s[i]);if(l)return i>=a?l:l*("desc"==n[i]?-1:1)}return e.index-t.index}(e,t,n)}));i--;)e[i]=e[i].value;return e}(r)}function Ui(e,t,n){for(var i=-1,r=t.length,s={};++i<r;){var o=t[i],a=Ci(e,o);n(a,o)&&Yi(s,vr(o,e),a)}return s}function Hi(e,t,n,i){var r=i?$t:Dt,s=-1,o=t.length,a=e;for(e===t&&(t=Ir(t)),n&&(a=St(e,Ut(n)));++s<o;)for(var l=0,c=t[s],h=n?n(c):c;(l=r(a,h,l,i))>-1;)a!==e&&it.call(a,l,1),it.call(e,l,1);return e}function Vi(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==s){var s=r;gs(r)?it.call(e,r,1):cr(e,r)}}return e}function qi(e,t){return e+dn(wn()*(t-e+1))}function Gi(e,t){var n="";if(!e||t<1||t>d)return n;do{t%2&&(n+=e),(t=dn(t/2))&&(e+=e)}while(t);return n}function Wi(e,t){return Ts(As(e,t,rl),e+"")}function Ki(e){return Jn(ja(e))}function Ji(e,t){var n=ja(e);return Ds(n,oi(t,0,n.length))}function Yi(e,t,n,i){if(!ta(e))return e;for(var s=-1,o=(t=vr(t,e)).length,a=o-1,l=e;null!=l&&++s<o;){var c=Ns(t[s]),h=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(s!=a){var d=l[c];(h=i?i(d,c,l):r)===r&&(h=ta(d)?d:gs(t[s+1])?[]:{})}ei(l,c,h),l=l[c]}return e}var Qi=En?function(e,t){return En.set(e,t),e}:rl,Xi=ct?function(e,t){return ct(e,"toString",{configurable:!0,enumerable:!1,value:tl(t),writable:!0})}:rl;function er(e){return Ds(ja(e))}function tr(e,t,n){var r=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(n=n>s?s:n)<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var o=i(s);++r<s;)o[r]=e[r+t];return o}function nr(e,t){var n;return di(e,(function(e,i,r){return!(n=t(e,i,r))})),!!n}function ir(e,t,n){var i=0,r=null==e?i:e.length;if("number"==typeof t&&t==t&&r<=2147483647){for(;i<r;){var s=i+r>>>1,o=e[s];null!==o&&!ca(o)&&(n?o<=t:o<t)?i=s+1:r=s}return r}return rr(e,t,rl,n)}function rr(e,t,n,i){var s=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=n(t))!=t,l=null===t,c=ca(t),h=t===r;s<o;){var d=dn((s+o)/2),u=n(e[d]),p=u!==r,m=null===u,f=u==u,g=ca(u);if(a)var v=i||f;else v=h?f&&(i||p):l?f&&p&&(i||!m):c?f&&p&&!m&&(i||!g):!m&&!g&&(i?u<=t:u<t);v?s=d+1:o=d}return yn(o,4294967294)}function sr(e,t){for(var n=-1,i=e.length,r=0,s=[];++n<i;){var o=e[n],a=t?t(o):o;if(!n||!jo(a,l)){var l=a;s[r++]=0===o?0:o}}return s}function or(e){return"number"==typeof e?e:ca(e)?u:+e}function ar(e){if("string"==typeof e)return e;if(Vo(e))return St(e,ar)+"";if(ca(e))return Rn?Rn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function lr(e,t,n){var i=-1,r=_t,s=e.length,o=!0,a=[],l=a;if(n)o=!1,r=At;else if(s>=200){var c=t?null:Gr(e);if(c)return nn(c);o=!1,r=Vt,l=new Gn}else l=t?[]:a;e:for(;++i<s;){var h=e[i],d=t?t(h):h;if(h=n||0!==h?h:0,o&&d==d){for(var u=l.length;u--;)if(l[u]===d)continue e;t&&l.push(d),a.push(h)}else r(l,d,n)||(l!==a&&l.push(d),a.push(h))}return a}function cr(e,t){return null==(e=Ss(e,t=vr(t,e)))||delete e[Ns(Js(t))]}function hr(e,t,n,i){return Yi(e,t,n(Ci(e,t)),i)}function dr(e,t,n,i){for(var r=e.length,s=i?r:-1;(i?s--:++s<r)&&t(e[s],s,e););return n?tr(e,i?0:s,i?s+1:r):tr(e,i?s+1:0,i?r:s)}function ur(e,t){var n=e;return n instanceof Un&&(n=n.value()),It(t,(function(e,t){return t.func.apply(t.thisArg,kt([e],t.args))}),n)}function pr(e,t,n){var r=e.length;if(r<2)return r?lr(e[0]):[];for(var s=-1,o=i(r);++s<r;)for(var a=e[s],l=-1;++l<r;)l!=s&&(o[s]=hi(o[s]||a,e[l],t,n));return lr(gi(o,1),t,n)}function mr(e,t,n){for(var i=-1,s=e.length,o=t.length,a={};++i<s;){var l=i<o?t[i]:r;n(a,e[i],l)}return a}function fr(e){return Wo(e)?e:[]}function gr(e){return"function"==typeof e?e:rl}function vr(e,t){return Vo(e)?e:ys(e,t)?[e]:Ls(xa(e))}var yr=Wi;function xr(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:tr(e,t,n)}var br=ht||function(e){return st.clearTimeout(e)};function wr(e,t){if(t)return e.slice();var n=e.length,i=Ue?Ue(n):new e.constructor(n);return e.copy(i),i}function Cr(e){var t=new e.constructor(e.byteLength);return new ze(t).set(new ze(e)),t}function _r(e,t){var n=t?Cr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ar(e,t){if(e!==t){var n=e!==r,i=null===e,s=e==e,o=ca(e),a=t!==r,l=null===t,c=t==t,h=ca(t);if(!l&&!h&&!o&&e>t||o&&a&&c&&!l&&!h||i&&a&&c||!n&&c||!s)return 1;if(!i&&!o&&!h&&e<t||h&&n&&s&&!i&&!o||l&&n&&s||!a&&s||!c)return-1}return 0}function Sr(e,t,n,r){for(var s=-1,o=e.length,a=n.length,l=-1,c=t.length,h=vn(o-a,0),d=i(c+h),u=!r;++l<c;)d[l]=t[l];for(;++s<a;)(u||s<o)&&(d[n[s]]=e[s]);for(;h--;)d[l++]=e[s++];return d}function kr(e,t,n,r){for(var s=-1,o=e.length,a=-1,l=n.length,c=-1,h=t.length,d=vn(o-l,0),u=i(d+h),p=!r;++s<d;)u[s]=e[s];for(var m=s;++c<h;)u[m+c]=t[c];for(;++a<l;)(p||s<o)&&(u[m+n[a]]=e[s++]);return u}function Ir(e,t){var n=-1,r=e.length;for(t||(t=i(r));++n<r;)t[n]=e[n];return t}function Pr(e,t,n,i){var s=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var l=t[o],c=i?i(n[l],e[l],l,n,e):r;c===r&&(c=e[l]),s?ri(n,l,c):ei(n,l,c)}return n}function Er(e,t){return function(n,i){var r=Vo(n)?yt:ni,s=t?t():{};return r(n,e,os(i,2),s)}}function Tr(e){return Wi((function(t,n){var i=-1,s=n.length,o=s>1?n[s-1]:r,a=s>2?n[2]:r;for(o=e.length>3&&"function"==typeof o?(s--,o):r,a&&vs(n[0],n[1],a)&&(o=s<3?r:o,s=1),t=Ae(t);++i<s;){var l=n[i];l&&e(t,l,i,o)}return t}))}function Mr(e,t){return function(n,i){if(null==n)return n;if(!Go(n))return e(n,i);for(var r=n.length,s=t?r:-1,o=Ae(n);(t?s--:++s<r)&&!1!==i(o[s],s,o););return n}}function Or(e){return function(t,n,i){for(var r=-1,s=Ae(t),o=i(t),a=o.length;a--;){var l=o[e?a:++r];if(!1===n(s[l],l,s))break}return t}}function Dr(e){return function(t){var n=Qt(t=xa(t))?on(t):r,i=n?n[0]:t.charAt(0),s=n?xr(n,1).join(""):t.slice(1);return i[e]()+s}}function $r(e){return function(t){return It(Qa(Ha(t).replace(He,"")),e,"")}}function Br(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Zn(e.prototype),i=e.apply(n,t);return ta(i)?i:n}}function Lr(e){return function(t,n,i){var s=Ae(t);if(!Go(t)){var o=os(n,3);t=Oa(t),n=function(e){return o(s[e],e,s)}}var a=e(t,n,i);return a>-1?s[o?t[a]:a]:r}}function Nr(e){return es((function(t){var n=t.length,i=n,o=zn.prototype.thru;for(e&&t.reverse();i--;){var a=t[i];if("function"!=typeof a)throw new Ie(s);if(o&&!l&&"wrapper"==rs(a))var l=new zn([],!0)}for(i=l?i:n;++i<n;){var c=rs(a=t[i]),h="wrapper"==c?is(a):r;l=h&&xs(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?l[rs(h[0])].apply(l,h[3]):1==a.length&&xs(a)?l[c]():l.thru(a)}return function(){var e=arguments,i=e[0];if(l&&1==e.length&&Vo(i))return l.plant(i).value();for(var r=0,s=n?t[r].apply(this,e):i;++r<n;)s=t[r].call(this,s);return s}}))}function Rr(e,t,n,s,o,a,l,h,d,u){var p=t&c,m=1&t,f=2&t,g=24&t,v=512&t,y=f?r:Br(e);return function r(){for(var c=arguments.length,x=i(c),b=c;b--;)x[b]=arguments[b];if(g)var w=ss(r),C=Wt(x,w);if(s&&(x=Sr(x,s,o,g)),a&&(x=kr(x,a,l,g)),c-=C,g&&c<u){var _=tn(x,w);return Vr(e,t,Rr,r.placeholder,n,x,_,h,d,u-c)}var A=m?n:this,S=f?A[e]:e;return c=x.length,h?x=ks(x,h):v&&c>1&&x.reverse(),p&&d<c&&(x.length=d),this&&this!==st&&this instanceof r&&(S=y||Br(S)),S.apply(A,x)}}function Fr(e,t){return function(n,i){return function(e,t,n,i){return xi(e,(function(e,r,s){t(i,n(e),r,s)})),i}(n,e,t(i),{})}}function Zr(e,t){return function(n,i){var s;if(n===r&&i===r)return t;if(n!==r&&(s=n),i!==r){if(s===r)return i;"string"==typeof n||"string"==typeof i?(n=ar(n),i=ar(i)):(n=or(n),i=or(i)),s=e(n,i)}return s}}function jr(e){return es((function(t){return t=St(t,Ut(os())),Wi((function(n){var i=this;return e(t,(function(e){return vt(e,i,n)}))}))}))}function zr(e,t){var n=(t=t===r?" ":ar(t)).length;if(n<2)return n?Gi(t,e):t;var i=Gi(t,hn(e/sn(t)));return Qt(t)?xr(on(i),0,e).join(""):i.slice(0,e)}function Ur(e){return function(t,n,s){return s&&"number"!=typeof s&&vs(t,n,s)&&(n=s=r),t=ma(t),n===r?(n=t,t=0):n=ma(n),function(e,t,n,r){for(var s=-1,o=vn(hn((t-e)/(n||1)),0),a=i(o);o--;)a[r?o:++s]=e,e+=n;return a}(t,n,s=s===r?t<n?1:-1:ma(s),e)}}function Hr(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=va(t),n=va(n)),e(t,n)}}function Vr(e,t,n,i,s,o,a,c,h,d){var u=8&t;t|=u?l:64,4&(t&=~(u?64:l))||(t&=-4);var p=[e,t,s,u?o:r,u?a:r,u?r:o,u?r:a,c,h,d],m=n.apply(r,p);return xs(e)&&Ps(m,p),m.placeholder=i,Ms(m,e,t)}function qr(e){var t=_e[e];return function(e,n){if(e=va(e),(n=null==n?0:yn(fa(n),292))&&mn(e)){var i=(xa(e)+"e").split("e");return+((i=(xa(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return t(e)}}var Gr=kn&&1/nn(new kn([,-0]))[1]==h?function(e){return new kn(e)}:cl;function Wr(e){return function(t){var n=us(t);return n==C?Xt(t):n==I?rn(t):function(e,t){return St(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Kr(e,t,n,o,h,d,u,p){var m=2&t;if(!m&&"function"!=typeof e)throw new Ie(s);var f=o?o.length:0;if(f||(t&=-97,o=h=r),u=u===r?u:vn(fa(u),0),p=p===r?p:fa(p),f-=h?h.length:0,64&t){var g=o,v=h;o=h=r}var y=m?r:is(e),x=[e,t,n,o,h,g,v,d,u,p];if(y&&function(e,t){var n=e[1],i=t[1],r=n|i,s=r<131,o=i==c&&8==n||i==c&&256==n&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n;if(!s&&!o)return e;1&i&&(e[2]=t[2],r|=1&n?0:4);var l=t[3];if(l){var h=e[3];e[3]=h?Sr(h,l,t[4]):l,e[4]=h?tn(e[3],a):t[4]}(l=t[5])&&(h=e[5],e[5]=h?kr(h,l,t[6]):l,e[6]=h?tn(e[5],a):t[6]),(l=t[7])&&(e[7]=l),i&c&&(e[8]=null==e[8]?t[8]:yn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r}(x,y),e=x[0],t=x[1],n=x[2],o=x[3],h=x[4],!(p=x[9]=x[9]===r?m?0:e.length:vn(x[9]-f,0))&&24&t&&(t&=-25),t&&1!=t)b=8==t||16==t?function(e,t,n){var s=Br(e);return function o(){for(var a=arguments.length,l=i(a),c=a,h=ss(o);c--;)l[c]=arguments[c];var d=a<3&&l[0]!==h&&l[a-1]!==h?[]:tn(l,h);return(a-=d.length)<n?Vr(e,t,Rr,o.placeholder,r,l,d,r,r,n-a):vt(this&&this!==st&&this instanceof o?s:e,this,l)}}(e,t,p):t!=l&&33!=t||h.length?Rr.apply(r,x):function(e,t,n,r){var s=1&t,o=Br(e);return function t(){for(var a=-1,l=arguments.length,c=-1,h=r.length,d=i(h+l),u=this&&this!==st&&this instanceof t?o:e;++c<h;)d[c]=r[c];for(;l--;)d[c++]=arguments[++a];return vt(u,s?n:this,d)}}(e,t,n,o);else var b=function(e,t,n){var i=1&t,r=Br(e);return function t(){return(this&&this!==st&&this instanceof t?r:e).apply(i?n:this,arguments)}}(e,t,n);return Ms((y?Qi:Ps)(b,x),e,t)}function Jr(e,t,n,i){return e===r||jo(e,Te[n])&&!De.call(i,n)?t:e}function Yr(e,t,n,i,s,o){return ta(e)&&ta(t)&&(o.set(t,e),Zi(e,t,r,Yr,o),o.delete(t)),e}function Qr(e){return sa(e)?r:e}function Xr(e,t,n,i,s,o){var a=1&n,l=e.length,c=t.length;if(l!=c&&!(a&&c>l))return!1;var h=o.get(e),d=o.get(t);if(h&&d)return h==t&&d==e;var u=-1,p=!0,m=2&n?new Gn:r;for(o.set(e,t),o.set(t,e);++u<l;){var f=e[u],g=t[u];if(i)var v=a?i(g,f,u,t,e,o):i(f,g,u,e,t,o);if(v!==r){if(v)continue;p=!1;break}if(m){if(!Et(t,(function(e,t){if(!Vt(m,t)&&(f===e||s(f,e,n,i,o)))return m.push(t)}))){p=!1;break}}else if(f!==g&&!s(f,g,n,i,o)){p=!1;break}}return o.delete(e),o.delete(t),p}function es(e){return Ts(As(e,r,Vs),e+"")}function ts(e){return _i(e,Oa,hs)}function ns(e){return _i(e,Da,ds)}var is=En?function(e){return En.get(e)}:cl;function rs(e){for(var t=e.name+"",n=Tn[t],i=De.call(Tn,t)?n.length:0;i--;){var r=n[i],s=r.func;if(null==s||s==e)return r.name}return t}function ss(e){return(De.call(Fn,"placeholder")?Fn:e).placeholder}function os(){var e=Fn.iteratee||sl;return e=e===sl?$i:e,arguments.length?e(arguments[0],arguments[1]):e}function as(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function ls(e){for(var t=Oa(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,Cs(r)]}return t}function cs(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return Di(n)?n:r}var hs=un?function(e){return null==e?[]:(e=Ae(e),Ct(un(e),(function(t){return et.call(e,t)})))}:gl,ds=un?function(e){for(var t=[];e;)kt(t,hs(e)),e=qe(e);return t}:gl,us=Ai;function ps(e,t,n){for(var i=-1,r=(t=vr(t,e)).length,s=!1;++i<r;){var o=Ns(t[i]);if(!(s=null!=e&&n(e,o)))break;e=e[o]}return s||++i!=r?s:!!(r=null==e?0:e.length)&&ea(r)&&gs(o,r)&&(Vo(e)||Ho(e))}function ms(e){return"function"!=typeof e.constructor||ws(e)?{}:Zn(qe(e))}function fs(e){return Vo(e)||Ho(e)||!!(rt&&e&&e[rt])}function gs(e,t){var n=typeof e;return!!(t=null==t?d:t)&&("number"==n||"symbol"!=n&&ve.test(e))&&e>-1&&e%1==0&&e<t}function vs(e,t,n){if(!ta(n))return!1;var i=typeof t;return!!("number"==i?Go(n)&&gs(t,n.length):"string"==i&&t in n)&&jo(n[t],e)}function ys(e,t){if(Vo(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ca(e))||X.test(e)||!Q.test(e)||null!=t&&e in Ae(t)}function xs(e){var t=rs(e),n=Fn[t];if("function"!=typeof n||!(t in Un.prototype))return!1;if(e===n)return!0;var i=is(n);return!!i&&e===i[0]}(_n&&us(new _n(new ArrayBuffer(1)))!=O||An&&us(new An)!=C||Sn&&us(Sn.resolve())!=S||kn&&us(new kn)!=I||In&&us(new In)!=T)&&(us=function(e){var t=Ai(e),n=t==A?e.constructor:r,i=n?Rs(n):"";if(i)switch(i){case Mn:return O;case On:return C;case Dn:return S;case $n:return I;case Bn:return T}return t});var bs=Me?Qo:vl;function ws(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Te)}function Cs(e){return e==e&&!ta(e)}function _s(e,t){return function(n){return null!=n&&n[e]===t&&(t!==r||e in Ae(n))}}function As(e,t,n){return t=vn(t===r?e.length-1:t,0),function(){for(var r=arguments,s=-1,o=vn(r.length-t,0),a=i(o);++s<o;)a[s]=r[t+s];s=-1;for(var l=i(t+1);++s<t;)l[s]=r[s];return l[t]=n(a),vt(e,this,l)}}function Ss(e,t){return t.length<2?e:Ci(e,tr(t,0,-1))}function ks(e,t){for(var n=e.length,i=yn(t.length,n),s=Ir(e);i--;){var o=t[i];e[i]=gs(o,n)?s[o]:r}return e}function Is(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ps=Os(Qi),Es=Rt||function(e,t){return st.setTimeout(e,t)},Ts=Os(Xi);function Ms(e,t,n){var i=t+"";return Ts(e,function(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(se,"{\n/* [wrapped with "+t+"] */\n")}(i,function(e,t){return xt(m,(function(n){var i="_."+n[0];t&n[1]&&!_t(e,i)&&e.push(i)})),e.sort()}(function(e){var t=e.match(oe);return t?t[1].split(ae):[]}(i),n)))}function Os(e){var t=0,n=0;return function(){var i=xn(),s=16-(i-n);if(n=i,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Ds(e,t){var n=-1,i=e.length,s=i-1;for(t=t===r?i:t;++n<t;){var o=qi(n,s),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}var $s,Bs,Ls=($s=Bo((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,(function(e,n,i,r){t.push(i?r.replace(he,"$1"):n||e)})),t}),(function(e){return 500===Bs.size&&Bs.clear(),e})),Bs=$s.cache,$s);function Ns(e){if("string"==typeof e||ca(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Rs(e){if(null!=e){try{return Oe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Fs(e){if(e instanceof Un)return e.clone();var t=new zn(e.__wrapped__,e.__chain__);return t.__actions__=Ir(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Zs=Wi((function(e,t){return Wo(e)?hi(e,gi(t,1,Wo,!0)):[]})),js=Wi((function(e,t){var n=Js(t);return Wo(n)&&(n=r),Wo(e)?hi(e,gi(t,1,Wo,!0),os(n,2)):[]})),zs=Wi((function(e,t){var n=Js(t);return Wo(n)&&(n=r),Wo(e)?hi(e,gi(t,1,Wo,!0),r,n):[]}));function Us(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:fa(n);return r<0&&(r=vn(i+r,0)),Ot(e,os(t,3),r)}function Hs(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var s=i-1;return n!==r&&(s=fa(n),s=n<0?vn(i+s,0):yn(s,i-1)),Ot(e,os(t,3),s,!0)}function Vs(e){return null!=e&&e.length?gi(e,1):[]}function qs(e){return e&&e.length?e[0]:r}var Gs=Wi((function(e){var t=St(e,fr);return t.length&&t[0]===e[0]?Pi(t):[]})),Ws=Wi((function(e){var t=Js(e),n=St(e,fr);return t===Js(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Pi(n,os(t,2)):[]})),Ks=Wi((function(e){var t=Js(e),n=St(e,fr);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?Pi(n,r,t):[]}));function Js(e){var t=null==e?0:e.length;return t?e[t-1]:r}var Ys=Wi(Qs);function Qs(e,t){return e&&e.length&&t&&t.length?Hi(e,t):e}var Xs=es((function(e,t){var n=null==e?0:e.length,i=si(e,t);return Vi(e,St(t,(function(e){return gs(e,n)?+e:e})).sort(Ar)),i}));function eo(e){return null==e?e:Cn.call(e)}var to=Wi((function(e){return lr(gi(e,1,Wo,!0))})),no=Wi((function(e){var t=Js(e);return Wo(t)&&(t=r),lr(gi(e,1,Wo,!0),os(t,2))})),io=Wi((function(e){var t=Js(e);return t="function"==typeof t?t:r,lr(gi(e,1,Wo,!0),r,t)}));function ro(e){if(!e||!e.length)return[];var t=0;return e=Ct(e,(function(e){if(Wo(e))return t=vn(e.length,t),!0})),jt(t,(function(t){return St(e,Nt(t))}))}function so(e,t){if(!e||!e.length)return[];var n=ro(e);return null==t?n:St(n,(function(e){return vt(t,r,e)}))}var oo=Wi((function(e,t){return Wo(e)?hi(e,t):[]})),ao=Wi((function(e){return pr(Ct(e,Wo))})),lo=Wi((function(e){var t=Js(e);return Wo(t)&&(t=r),pr(Ct(e,Wo),os(t,2))})),co=Wi((function(e){var t=Js(e);return t="function"==typeof t?t:r,pr(Ct(e,Wo),r,t)})),ho=Wi(ro),uo=Wi((function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,so(e,n)}));function po(e){var t=Fn(e);return t.__chain__=!0,t}function mo(e,t){return t(e)}var fo=es((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,s=function(t){return si(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Un&&gs(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:mo,args:[s],thisArg:r}),new zn(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(s)})),go=Er((function(e,t,n){De.call(e,n)?++e[n]:ri(e,n,1)})),vo=Lr(Us),yo=Lr(Hs);function xo(e,t){return(Vo(e)?xt:di)(e,os(t,3))}function bo(e,t){return(Vo(e)?bt:ui)(e,os(t,3))}var wo=Er((function(e,t,n){De.call(e,n)?e[n].push(t):ri(e,n,[t])})),Co=Wi((function(e,t,n){var r=-1,s="function"==typeof t,o=Go(e)?i(e.length):[];return di(e,(function(e){o[++r]=s?vt(t,e,n):Ei(e,t,n)})),o})),_o=Er((function(e,t,n){ri(e,n,t)}));function Ao(e,t){return(Vo(e)?St:Ni)(e,os(t,3))}var So=Er((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),ko=Wi((function(e,t){if(null==e)return[];var n=t.length;return n>1&&vs(e,t[0],t[1])?t=[]:n>2&&vs(t[0],t[1],t[2])&&(t=[t[0]]),zi(e,gi(t,1),[])})),Io=Tt||function(){return st.Date.now()};function Po(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Kr(e,c,r,r,r,r,t)}function Eo(e,t){var n;if("function"!=typeof t)throw new Ie(s);return e=fa(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var To=Wi((function(e,t,n){var i=1;if(n.length){var r=tn(n,ss(To));i|=l}return Kr(e,i,t,n,r)})),Mo=Wi((function(e,t,n){var i=3;if(n.length){var r=tn(n,ss(Mo));i|=l}return Kr(t,i,e,n,r)}));function Oo(e,t,n){var i,o,a,l,c,h,d=0,u=!1,p=!1,m=!0;if("function"!=typeof e)throw new Ie(s);function f(t){var n=i,s=o;return i=o=r,d=t,l=e.apply(s,n)}function g(e){return d=e,c=Es(y,t),u?f(e):l}function v(e){var n=e-h;return h===r||n>=t||n<0||p&&e-d>=a}function y(){var e=Io();if(v(e))return x(e);c=Es(y,function(e){var n=t-(e-h);return p?yn(n,a-(e-d)):n}(e))}function x(e){return c=r,m&&i?f(e):(i=o=r,l)}function b(){var e=Io(),n=v(e);if(i=arguments,o=this,h=e,n){if(c===r)return g(h);if(p)return br(c),c=Es(y,t),f(h)}return c===r&&(c=Es(y,t)),l}return t=va(t)||0,ta(n)&&(u=!!n.leading,a=(p="maxWait"in n)?vn(va(n.maxWait)||0,t):a,m="trailing"in n?!!n.trailing:m),b.cancel=function(){c!==r&&br(c),d=0,i=h=o=c=r},b.flush=function(){return c===r?l:x(Io())},b}var Do=Wi((function(e,t){return ci(e,1,t)})),$o=Wi((function(e,t,n){return ci(e,va(t)||0,n)}));function Bo(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ie(s);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=e.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(Bo.Cache||qn),n}function Lo(e){if("function"!=typeof e)throw new Ie(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Bo.Cache=qn;var No=yr((function(e,t){var n=(t=1==t.length&&Vo(t[0])?St(t[0],Ut(os())):St(gi(t,1),Ut(os()))).length;return Wi((function(i){for(var r=-1,s=yn(i.length,n);++r<s;)i[r]=t[r].call(this,i[r]);return vt(e,this,i)}))})),Ro=Wi((function(e,t){var n=tn(t,ss(Ro));return Kr(e,l,r,t,n)})),Fo=Wi((function(e,t){var n=tn(t,ss(Fo));return Kr(e,64,r,t,n)})),Zo=es((function(e,t){return Kr(e,256,r,r,r,t)}));function jo(e,t){return e===t||e!=e&&t!=t}var zo=Hr(Si),Uo=Hr((function(e,t){return e>=t})),Ho=Ti(function(){return arguments}())?Ti:function(e){return na(e)&&De.call(e,"callee")&&!et.call(e,"callee")},Vo=i.isArray,qo=dt?Ut(dt):function(e){return na(e)&&Ai(e)==M};function Go(e){return null!=e&&ea(e.length)&&!Qo(e)}function Wo(e){return na(e)&&Go(e)}var Ko=pn||vl,Jo=ut?Ut(ut):function(e){return na(e)&&Ai(e)==y};function Yo(e){if(!na(e))return!1;var t=Ai(e);return t==x||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!sa(e)}function Qo(e){if(!ta(e))return!1;var t=Ai(e);return t==b||t==w||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Xo(e){return"number"==typeof e&&e==fa(e)}function ea(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function ta(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function na(e){return null!=e&&"object"==typeof e}var ia=pt?Ut(pt):function(e){return na(e)&&us(e)==C};function ra(e){return"number"==typeof e||na(e)&&Ai(e)==_}function sa(e){if(!na(e)||Ai(e)!=A)return!1;var t=qe(e);if(null===t)return!0;var n=De.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Oe.call(n)==Ne}var oa=mt?Ut(mt):function(e){return na(e)&&Ai(e)==k},aa=ft?Ut(ft):function(e){return na(e)&&us(e)==I};function la(e){return"string"==typeof e||!Vo(e)&&na(e)&&Ai(e)==P}function ca(e){return"symbol"==typeof e||na(e)&&Ai(e)==E}var ha=gt?Ut(gt):function(e){return na(e)&&ea(e.length)&&!!Qe[Ai(e)]},da=Hr(Li),ua=Hr((function(e,t){return e<=t}));function pa(e){if(!e)return[];if(Go(e))return la(e)?on(e):Ir(e);if(ot&&e[ot])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[ot]());var t=us(e);return(t==C?Xt:t==I?nn:ja)(e)}function ma(e){return e?(e=va(e))===h||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function fa(e){var t=ma(e),n=t%1;return t==t?n?t-n:t:0}function ga(e){return e?oi(fa(e),0,p):0}function va(e){if("number"==typeof e)return e;if(ca(e))return u;if(ta(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ta(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=zt(e);var n=me.test(e);return n||ge.test(e)?nt(e.slice(2),n?2:8):pe.test(e)?u:+e}function ya(e){return Pr(e,Da(e))}function xa(e){return null==e?"":ar(e)}var ba=Tr((function(e,t){if(ws(t)||Go(t))Pr(t,Oa(t),e);else for(var n in t)De.call(t,n)&&ei(e,n,t[n])})),wa=Tr((function(e,t){Pr(t,Da(t),e)})),Ca=Tr((function(e,t,n,i){Pr(t,Da(t),e,i)})),_a=Tr((function(e,t,n,i){Pr(t,Oa(t),e,i)})),Aa=es(si),Sa=Wi((function(e,t){e=Ae(e);var n=-1,i=t.length,s=i>2?t[2]:r;for(s&&vs(t[0],t[1],s)&&(i=1);++n<i;)for(var o=t[n],a=Da(o),l=-1,c=a.length;++l<c;){var h=a[l],d=e[h];(d===r||jo(d,Te[h])&&!De.call(e,h))&&(e[h]=o[h])}return e})),ka=Wi((function(e){return e.push(r,Yr),vt(Ba,r,e)}));function Ia(e,t,n){var i=null==e?r:Ci(e,t);return i===r?n:i}function Pa(e,t){return null!=e&&ps(e,t,Ii)}var Ea=Fr((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Le.call(t)),e[t]=n}),tl(rl)),Ta=Fr((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Le.call(t)),De.call(e,t)?e[t].push(n):e[t]=[n]}),os),Ma=Wi(Ei);function Oa(e){return Go(e)?Kn(e):Bi(e)}function Da(e){return Go(e)?Kn(e,!0):function(e){if(!ta(e))return function(e){var t=[];if(null!=e)for(var n in Ae(e))t.push(n);return t}(e);var t=ws(e),n=[];for(var i in e)("constructor"!=i||!t&&De.call(e,i))&&n.push(i);return n}(e)}var $a=Tr((function(e,t,n){Zi(e,t,n)})),Ba=Tr((function(e,t,n,i){Zi(e,t,n,i)})),La=es((function(e,t){var n={};if(null==e)return n;var i=!1;t=St(t,(function(t){return t=vr(t,e),i||(i=t.length>1),t})),Pr(e,ns(e),n),i&&(n=ai(n,7,Qr));for(var r=t.length;r--;)cr(n,t[r]);return n})),Na=es((function(e,t){return null==e?{}:function(e,t){return Ui(e,t,(function(t,n){return Pa(e,n)}))}(e,t)}));function Ra(e,t){if(null==e)return{};var n=St(ns(e),(function(e){return[e]}));return t=os(t),Ui(e,n,(function(e,n){return t(e,n[0])}))}var Fa=Wr(Oa),Za=Wr(Da);function ja(e){return null==e?[]:Ht(e,Oa(e))}var za=$r((function(e,t,n){return t=t.toLowerCase(),e+(n?Ua(t):t)}));function Ua(e){return Ya(xa(e).toLowerCase())}function Ha(e){return(e=xa(e))&&e.replace(ye,Kt).replace(Ve,"")}var Va=$r((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),qa=$r((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ga=Dr("toLowerCase"),Wa=$r((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Ka=$r((function(e,t,n){return e+(n?" ":"")+Ya(t)})),Ja=$r((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ya=Dr("toUpperCase");function Qa(e,t,n){return e=xa(e),(t=n?r:t)===r?function(e){return Ke.test(e)}(e)?function(e){return e.match(Ge)||[]}(e):function(e){return e.match(le)||[]}(e):e.match(t)||[]}var Xa=Wi((function(e,t){try{return vt(e,r,t)}catch(e){return Yo(e)?e:new we(e)}})),el=es((function(e,t){return xt(t,(function(t){t=Ns(t),ri(e,t,To(e[t],e))})),e}));function tl(e){return function(){return e}}var nl=Nr(),il=Nr(!0);function rl(e){return e}function sl(e){return $i("function"==typeof e?e:ai(e,1))}var ol=Wi((function(e,t){return function(n){return Ei(n,e,t)}})),al=Wi((function(e,t){return function(n){return Ei(e,n,t)}}));function ll(e,t,n){var i=Oa(t),r=wi(t,i);null!=n||ta(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=wi(t,Oa(t)));var s=!(ta(n)&&"chain"in n&&!n.chain),o=Qo(e);return xt(r,(function(n){var i=t[n];e[n]=i,o&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__),r=n.__actions__=Ir(this.__actions__);return r.push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,kt([this.value()],arguments))})})),e}function cl(){}var hl=jr(St),dl=jr(wt),ul=jr(Et);function pl(e){return ys(e)?Nt(Ns(e)):function(e){return function(t){return Ci(t,e)}}(e)}var ml=Ur(),fl=Ur(!0);function gl(){return[]}function vl(){return!1}var yl,xl=Zr((function(e,t){return e+t}),0),bl=qr("ceil"),wl=Zr((function(e,t){return e/t}),1),Cl=qr("floor"),_l=Zr((function(e,t){return e*t}),1),Al=qr("round"),Sl=Zr((function(e,t){return e-t}),0);return Fn.after=function(e,t){if("function"!=typeof t)throw new Ie(s);return e=fa(e),function(){if(--e<1)return t.apply(this,arguments)}},Fn.ary=Po,Fn.assign=ba,Fn.assignIn=wa,Fn.assignInWith=Ca,Fn.assignWith=_a,Fn.at=Aa,Fn.before=Eo,Fn.bind=To,Fn.bindAll=el,Fn.bindKey=Mo,Fn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Vo(e)?e:[e]},Fn.chain=po,Fn.chunk=function(e,t,n){t=(n?vs(e,t,n):t===r)?1:vn(fa(t),0);var s=null==e?0:e.length;if(!s||t<1)return[];for(var o=0,a=0,l=i(hn(s/t));o<s;)l[a++]=tr(e,o,o+=t);return l},Fn.compact=function(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var s=e[t];s&&(r[i++]=s)}return r},Fn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=i(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return kt(Vo(n)?Ir(n):[n],gi(t,1))},Fn.cond=function(e){var t=null==e?0:e.length,n=os();return e=t?St(e,(function(e){if("function"!=typeof e[1])throw new Ie(s);return[n(e[0]),e[1]]})):[],Wi((function(n){for(var i=-1;++i<t;){var r=e[i];if(vt(r[0],this,n))return vt(r[1],this,n)}}))},Fn.conforms=function(e){return function(e){var t=Oa(e);return function(n){return li(n,e,t)}}(ai(e,1))},Fn.constant=tl,Fn.countBy=go,Fn.create=function(e,t){var n=Zn(e);return null==t?n:ii(n,t)},Fn.curry=function e(t,n,i){var s=Kr(t,8,r,r,r,r,r,n=i?r:n);return s.placeholder=e.placeholder,s},Fn.curryRight=function e(t,n,i){var s=Kr(t,16,r,r,r,r,r,n=i?r:n);return s.placeholder=e.placeholder,s},Fn.debounce=Oo,Fn.defaults=Sa,Fn.defaultsDeep=ka,Fn.defer=Do,Fn.delay=$o,Fn.difference=Zs,Fn.differenceBy=js,Fn.differenceWith=zs,Fn.drop=function(e,t,n){var i=null==e?0:e.length;return i?tr(e,(t=n||t===r?1:fa(t))<0?0:t,i):[]},Fn.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?tr(e,0,(t=i-(t=n||t===r?1:fa(t)))<0?0:t):[]},Fn.dropRightWhile=function(e,t){return e&&e.length?dr(e,os(t,3),!0,!0):[]},Fn.dropWhile=function(e,t){return e&&e.length?dr(e,os(t,3),!0):[]},Fn.fill=function(e,t,n,i){var s=null==e?0:e.length;return s?(n&&"number"!=typeof n&&vs(e,t,n)&&(n=0,i=s),function(e,t,n,i){var s=e.length;for((n=fa(n))<0&&(n=-n>s?0:s+n),(i=i===r||i>s?s:fa(i))<0&&(i+=s),i=n>i?0:ga(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},Fn.filter=function(e,t){return(Vo(e)?Ct:fi)(e,os(t,3))},Fn.flatMap=function(e,t){return gi(Ao(e,t),1)},Fn.flatMapDeep=function(e,t){return gi(Ao(e,t),h)},Fn.flatMapDepth=function(e,t,n){return n=n===r?1:fa(n),gi(Ao(e,t),n)},Fn.flatten=Vs,Fn.flattenDeep=function(e){return null!=e&&e.length?gi(e,h):[]},Fn.flattenDepth=function(e,t){return null!=e&&e.length?gi(e,t=t===r?1:fa(t)):[]},Fn.flip=function(e){return Kr(e,512)},Fn.flow=nl,Fn.flowRight=il,Fn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i},Fn.functions=function(e){return null==e?[]:wi(e,Oa(e))},Fn.functionsIn=function(e){return null==e?[]:wi(e,Da(e))},Fn.groupBy=wo,Fn.initial=function(e){return null!=e&&e.length?tr(e,0,-1):[]},Fn.intersection=Gs,Fn.intersectionBy=Ws,Fn.intersectionWith=Ks,Fn.invert=Ea,Fn.invertBy=Ta,Fn.invokeMap=Co,Fn.iteratee=sl,Fn.keyBy=_o,Fn.keys=Oa,Fn.keysIn=Da,Fn.map=Ao,Fn.mapKeys=function(e,t){var n={};return t=os(t,3),xi(e,(function(e,i,r){ri(n,t(e,i,r),e)})),n},Fn.mapValues=function(e,t){var n={};return t=os(t,3),xi(e,(function(e,i,r){ri(n,i,t(e,i,r))})),n},Fn.matches=function(e){return Ri(ai(e,1))},Fn.matchesProperty=function(e,t){return Fi(e,ai(t,1))},Fn.memoize=Bo,Fn.merge=$a,Fn.mergeWith=Ba,Fn.method=ol,Fn.methodOf=al,Fn.mixin=ll,Fn.negate=Lo,Fn.nthArg=function(e){return e=fa(e),Wi((function(t){return ji(t,e)}))},Fn.omit=La,Fn.omitBy=function(e,t){return Ra(e,Lo(os(t)))},Fn.once=function(e){return Eo(2,e)},Fn.orderBy=function(e,t,n,i){return null==e?[]:(Vo(t)||(t=null==t?[]:[t]),Vo(n=i?r:n)||(n=null==n?[]:[n]),zi(e,t,n))},Fn.over=hl,Fn.overArgs=No,Fn.overEvery=dl,Fn.overSome=ul,Fn.partial=Ro,Fn.partialRight=Fo,Fn.partition=So,Fn.pick=Na,Fn.pickBy=Ra,Fn.property=pl,Fn.propertyOf=function(e){return function(t){return null==e?r:Ci(e,t)}},Fn.pull=Ys,Fn.pullAll=Qs,Fn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Hi(e,t,os(n,2)):e},Fn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Hi(e,t,r,n):e},Fn.pullAt=Xs,Fn.range=ml,Fn.rangeRight=fl,Fn.rearg=Zo,Fn.reject=function(e,t){return(Vo(e)?Ct:fi)(e,Lo(os(t,3)))},Fn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],s=e.length;for(t=os(t,3);++i<s;){var o=e[i];t(o,i,e)&&(n.push(o),r.push(i))}return Vi(e,r),n},Fn.rest=function(e,t){if("function"!=typeof e)throw new Ie(s);return Wi(e,t=t===r?t:fa(t))},Fn.reverse=eo,Fn.sampleSize=function(e,t,n){return t=(n?vs(e,t,n):t===r)?1:fa(t),(Vo(e)?Yn:Ji)(e,t)},Fn.set=function(e,t,n){return null==e?e:Yi(e,t,n)},Fn.setWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:Yi(e,t,n,i)},Fn.shuffle=function(e){return(Vo(e)?Qn:er)(e)},Fn.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&vs(e,t,n)?(t=0,n=i):(t=null==t?0:fa(t),n=n===r?i:fa(n)),tr(e,t,n)):[]},Fn.sortBy=ko,Fn.sortedUniq=function(e){return e&&e.length?sr(e):[]},Fn.sortedUniqBy=function(e,t){return e&&e.length?sr(e,os(t,2)):[]},Fn.split=function(e,t,n){return n&&"number"!=typeof n&&vs(e,t,n)&&(t=n=r),(n=n===r?p:n>>>0)?(e=xa(e))&&("string"==typeof t||null!=t&&!oa(t))&&!(t=ar(t))&&Qt(e)?xr(on(e),0,n):e.split(t,n):[]},Fn.spread=function(e,t){if("function"!=typeof e)throw new Ie(s);return t=null==t?0:vn(fa(t),0),Wi((function(n){var i=n[t],r=xr(n,0,t);return i&&kt(r,i),vt(e,this,r)}))},Fn.tail=function(e){var t=null==e?0:e.length;return t?tr(e,1,t):[]},Fn.take=function(e,t,n){return e&&e.length?tr(e,0,(t=n||t===r?1:fa(t))<0?0:t):[]},Fn.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?tr(e,(t=i-(t=n||t===r?1:fa(t)))<0?0:t,i):[]},Fn.takeRightWhile=function(e,t){return e&&e.length?dr(e,os(t,3),!1,!0):[]},Fn.takeWhile=function(e,t){return e&&e.length?dr(e,os(t,3)):[]},Fn.tap=function(e,t){return t(e),e},Fn.throttle=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new Ie(s);return ta(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Oo(e,t,{leading:i,maxWait:t,trailing:r})},Fn.thru=mo,Fn.toArray=pa,Fn.toPairs=Fa,Fn.toPairsIn=Za,Fn.toPath=function(e){return Vo(e)?St(e,Ns):ca(e)?[e]:Ir(Ls(xa(e)))},Fn.toPlainObject=ya,Fn.transform=function(e,t,n){var i=Vo(e),r=i||Ko(e)||ha(e);if(t=os(t,4),null==n){var s=e&&e.constructor;n=r?i?new s:[]:ta(e)&&Qo(s)?Zn(qe(e)):{}}return(r?xt:xi)(e,(function(e,i,r){return t(n,e,i,r)})),n},Fn.unary=function(e){return Po(e,1)},Fn.union=to,Fn.unionBy=no,Fn.unionWith=io,Fn.uniq=function(e){return e&&e.length?lr(e):[]},Fn.uniqBy=function(e,t){return e&&e.length?lr(e,os(t,2)):[]},Fn.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?lr(e,r,t):[]},Fn.unset=function(e,t){return null==e||cr(e,t)},Fn.unzip=ro,Fn.unzipWith=so,Fn.update=function(e,t,n){return null==e?e:hr(e,t,gr(n))},Fn.updateWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:hr(e,t,gr(n),i)},Fn.values=ja,Fn.valuesIn=function(e){return null==e?[]:Ht(e,Da(e))},Fn.without=oo,Fn.words=Qa,Fn.wrap=function(e,t){return Ro(gr(t),e)},Fn.xor=ao,Fn.xorBy=lo,Fn.xorWith=co,Fn.zip=ho,Fn.zipObject=function(e,t){return mr(e||[],t||[],ei)},Fn.zipObjectDeep=function(e,t){return mr(e||[],t||[],Yi)},Fn.zipWith=uo,Fn.entries=Fa,Fn.entriesIn=Za,Fn.extend=wa,Fn.extendWith=Ca,ll(Fn,Fn),Fn.add=xl,Fn.attempt=Xa,Fn.camelCase=za,Fn.capitalize=Ua,Fn.ceil=bl,Fn.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=va(n))==n?n:0),t!==r&&(t=(t=va(t))==t?t:0),oi(va(e),t,n)},Fn.clone=function(e){return ai(e,4)},Fn.cloneDeep=function(e){return ai(e,5)},Fn.cloneDeepWith=function(e,t){return ai(e,5,t="function"==typeof t?t:r)},Fn.cloneWith=function(e,t){return ai(e,4,t="function"==typeof t?t:r)},Fn.conformsTo=function(e,t){return null==t||li(e,t,Oa(t))},Fn.deburr=Ha,Fn.defaultTo=function(e,t){return null==e||e!=e?t:e},Fn.divide=wl,Fn.endsWith=function(e,t,n){e=xa(e),t=ar(t);var i=e.length,s=n=n===r?i:oi(fa(n),0,i);return(n-=t.length)>=0&&e.slice(n,s)==t},Fn.eq=jo,Fn.escape=function(e){return(e=xa(e))&&W.test(e)?e.replace(q,Jt):e},Fn.escapeRegExp=function(e){return(e=xa(e))&&ne.test(e)?e.replace(te,"\\$&"):e},Fn.every=function(e,t,n){var i=Vo(e)?wt:pi;return n&&vs(e,t,n)&&(t=r),i(e,os(t,3))},Fn.find=vo,Fn.findIndex=Us,Fn.findKey=function(e,t){return Mt(e,os(t,3),xi)},Fn.findLast=yo,Fn.findLastIndex=Hs,Fn.findLastKey=function(e,t){return Mt(e,os(t,3),bi)},Fn.floor=Cl,Fn.forEach=xo,Fn.forEachRight=bo,Fn.forIn=function(e,t){return null==e?e:vi(e,os(t,3),Da)},Fn.forInRight=function(e,t){return null==e?e:yi(e,os(t,3),Da)},Fn.forOwn=function(e,t){return e&&xi(e,os(t,3))},Fn.forOwnRight=function(e,t){return e&&bi(e,os(t,3))},Fn.get=Ia,Fn.gt=zo,Fn.gte=Uo,Fn.has=function(e,t){return null!=e&&ps(e,t,ki)},Fn.hasIn=Pa,Fn.head=qs,Fn.identity=rl,Fn.includes=function(e,t,n,i){e=Go(e)?e:ja(e),n=n&&!i?fa(n):0;var r=e.length;return n<0&&(n=vn(r+n,0)),la(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&Dt(e,t,n)>-1},Fn.indexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:fa(n);return r<0&&(r=vn(i+r,0)),Dt(e,t,r)},Fn.inRange=function(e,t,n){return t=ma(t),n===r?(n=t,t=0):n=ma(n),function(e,t,n){return e>=yn(t,n)&&e<vn(t,n)}(e=va(e),t,n)},Fn.invoke=Ma,Fn.isArguments=Ho,Fn.isArray=Vo,Fn.isArrayBuffer=qo,Fn.isArrayLike=Go,Fn.isArrayLikeObject=Wo,Fn.isBoolean=function(e){return!0===e||!1===e||na(e)&&Ai(e)==v},Fn.isBuffer=Ko,Fn.isDate=Jo,Fn.isElement=function(e){return na(e)&&1===e.nodeType&&!sa(e)},Fn.isEmpty=function(e){if(null==e)return!0;if(Go(e)&&(Vo(e)||"string"==typeof e||"function"==typeof e.splice||Ko(e)||ha(e)||Ho(e)))return!e.length;var t=us(e);if(t==C||t==I)return!e.size;if(ws(e))return!Bi(e).length;for(var n in e)if(De.call(e,n))return!1;return!0},Fn.isEqual=function(e,t){return Mi(e,t)},Fn.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:r)?n(e,t):r;return i===r?Mi(e,t,r,n):!!i},Fn.isError=Yo,Fn.isFinite=function(e){return"number"==typeof e&&mn(e)},Fn.isFunction=Qo,Fn.isInteger=Xo,Fn.isLength=ea,Fn.isMap=ia,Fn.isMatch=function(e,t){return e===t||Oi(e,t,ls(t))},Fn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,Oi(e,t,ls(t),n)},Fn.isNaN=function(e){return ra(e)&&e!=+e},Fn.isNative=function(e){if(bs(e))throw new we("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Di(e)},Fn.isNil=function(e){return null==e},Fn.isNull=function(e){return null===e},Fn.isNumber=ra,Fn.isObject=ta,Fn.isObjectLike=na,Fn.isPlainObject=sa,Fn.isRegExp=oa,Fn.isSafeInteger=function(e){return Xo(e)&&e>=-9007199254740991&&e<=d},Fn.isSet=aa,Fn.isString=la,Fn.isSymbol=ca,Fn.isTypedArray=ha,Fn.isUndefined=function(e){return e===r},Fn.isWeakMap=function(e){return na(e)&&us(e)==T},Fn.isWeakSet=function(e){return na(e)&&"[object WeakSet]"==Ai(e)},Fn.join=function(e,t){return null==e?"":fn.call(e,t)},Fn.kebabCase=Va,Fn.last=Js,Fn.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var s=i;return n!==r&&(s=(s=fa(n))<0?vn(i+s,0):yn(s,i-1)),t==t?function(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}(e,t,s):Ot(e,Bt,s,!0)},Fn.lowerCase=qa,Fn.lowerFirst=Ga,Fn.lt=da,Fn.lte=ua,Fn.max=function(e){return e&&e.length?mi(e,rl,Si):r},Fn.maxBy=function(e,t){return e&&e.length?mi(e,os(t,2),Si):r},Fn.mean=function(e){return Lt(e,rl)},Fn.meanBy=function(e,t){return Lt(e,os(t,2))},Fn.min=function(e){return e&&e.length?mi(e,rl,Li):r},Fn.minBy=function(e,t){return e&&e.length?mi(e,os(t,2),Li):r},Fn.stubArray=gl,Fn.stubFalse=vl,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=_l,Fn.nth=function(e,t){return e&&e.length?ji(e,fa(t)):r},Fn.noConflict=function(){return st._===this&&(st._=Re),this},Fn.noop=cl,Fn.now=Io,Fn.pad=function(e,t,n){e=xa(e);var i=(t=fa(t))?sn(e):0;if(!t||i>=t)return e;var r=(t-i)/2;return zr(dn(r),n)+e+zr(hn(r),n)},Fn.padEnd=function(e,t,n){e=xa(e);var i=(t=fa(t))?sn(e):0;return t&&i<t?e+zr(t-i,n):e},Fn.padStart=function(e,t,n){e=xa(e);var i=(t=fa(t))?sn(e):0;return t&&i<t?zr(t-i,n)+e:e},Fn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),bn(xa(e).replace(ie,""),t||0)},Fn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&vs(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=ma(e),t===r?(t=e,e=0):t=ma(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var s=wn();return yn(e+s*(t-e+tt("1e-"+((s+"").length-1))),t)}return qi(e,t)},Fn.reduce=function(e,t,n){var i=Vo(e)?It:Ft,r=arguments.length<3;return i(e,os(t,4),n,r,di)},Fn.reduceRight=function(e,t,n){var i=Vo(e)?Pt:Ft,r=arguments.length<3;return i(e,os(t,4),n,r,ui)},Fn.repeat=function(e,t,n){return t=(n?vs(e,t,n):t===r)?1:fa(t),Gi(xa(e),t)},Fn.replace=function(){var e=arguments,t=xa(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Fn.result=function(e,t,n){var i=-1,s=(t=vr(t,e)).length;for(s||(s=1,e=r);++i<s;){var o=null==e?r:e[Ns(t[i])];o===r&&(i=s,o=n),e=Qo(o)?o.call(e):o}return e},Fn.round=Al,Fn.runInContext=e,Fn.sample=function(e){return(Vo(e)?Jn:Ki)(e)},Fn.size=function(e){if(null==e)return 0;if(Go(e))return la(e)?sn(e):e.length;var t=us(e);return t==C||t==I?e.size:Bi(e).length},Fn.snakeCase=Wa,Fn.some=function(e,t,n){var i=Vo(e)?Et:nr;return n&&vs(e,t,n)&&(t=r),i(e,os(t,3))},Fn.sortedIndex=function(e,t){return ir(e,t)},Fn.sortedIndexBy=function(e,t,n){return rr(e,t,os(n,2))},Fn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var i=ir(e,t);if(i<n&&jo(e[i],t))return i}return-1},Fn.sortedLastIndex=function(e,t){return ir(e,t,!0)},Fn.sortedLastIndexBy=function(e,t,n){return rr(e,t,os(n,2),!0)},Fn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ir(e,t,!0)-1;if(jo(e[n],t))return n}return-1},Fn.startCase=Ka,Fn.startsWith=function(e,t,n){return e=xa(e),n=null==n?0:oi(fa(n),0,e.length),t=ar(t),e.slice(n,n+t.length)==t},Fn.subtract=Sl,Fn.sum=function(e){return e&&e.length?Zt(e,rl):0},Fn.sumBy=function(e,t){return e&&e.length?Zt(e,os(t,2)):0},Fn.template=function(e,t,n){var i=Fn.templateSettings;n&&vs(e,t,n)&&(t=r),e=xa(e),t=Ca({},t,i,Jr);var s,o,a=Ca({},t.imports,i.imports,Jr),l=Oa(a),c=Ht(a,l),h=0,d=t.interpolate||xe,u="__p += '",p=Se((t.escape||xe).source+"|"+d.source+"|"+(d===Y?de:xe).source+"|"+(t.evaluate||xe).source+"|$","g"),m="//# sourceURL="+(De.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ye+"]")+"\n";e.replace(p,(function(t,n,i,r,a,l){return i||(i=r),u+=e.slice(h,l).replace(be,Yt),n&&(s=!0,u+="' +\n__e("+n+") +\n'"),a&&(o=!0,u+="';\n"+a+";\n__p += '"),i&&(u+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),h=l+t.length,t})),u+="';\n";var f=De.call(t,"variable")&&t.variable;if(f){if(ce.test(f))throw new we("Invalid `variable` option passed into `_.template`")}else u="with (obj) {\n"+u+"\n}\n";u=(o?u.replace(z,""):u).replace(U,"$1").replace(H,"$1;"),u="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+u+"return __p\n}";var g=Xa((function(){return Ce(l,m+"return "+u).apply(r,c)}));if(g.source=u,Yo(g))throw g;return g},Fn.times=function(e,t){if((e=fa(e))<1||e>d)return[];var n=p,i=yn(e,p);t=os(t),e-=p;for(var r=jt(i,t);++n<e;)t(n);return r},Fn.toFinite=ma,Fn.toInteger=fa,Fn.toLength=ga,Fn.toLower=function(e){return xa(e).toLowerCase()},Fn.toNumber=va,Fn.toSafeInteger=function(e){return e?oi(fa(e),-9007199254740991,d):0===e?e:0},Fn.toString=xa,Fn.toUpper=function(e){return xa(e).toUpperCase()},Fn.trim=function(e,t,n){if((e=xa(e))&&(n||t===r))return zt(e);if(!e||!(t=ar(t)))return e;var i=on(e),s=on(t);return xr(i,qt(i,s),Gt(i,s)+1).join("")},Fn.trimEnd=function(e,t,n){if((e=xa(e))&&(n||t===r))return e.slice(0,an(e)+1);if(!e||!(t=ar(t)))return e;var i=on(e);return xr(i,0,Gt(i,on(t))+1).join("")},Fn.trimStart=function(e,t,n){if((e=xa(e))&&(n||t===r))return e.replace(ie,"");if(!e||!(t=ar(t)))return e;var i=on(e);return xr(i,qt(i,on(t))).join("")},Fn.truncate=function(e,t){var n=30,i="...";if(ta(t)){var s="separator"in t?t.separator:s;n="length"in t?fa(t.length):n,i="omission"in t?ar(t.omission):i}var o=(e=xa(e)).length;if(Qt(e)){var a=on(e);o=a.length}if(n>=o)return e;var l=n-sn(i);if(l<1)return i;var c=a?xr(a,0,l).join(""):e.slice(0,l);if(s===r)return c+i;if(a&&(l+=c.length-l),oa(s)){if(e.slice(l).search(s)){var h,d=c;for(s.global||(s=Se(s.source,xa(ue.exec(s))+"g")),s.lastIndex=0;h=s.exec(d);)var u=h.index;c=c.slice(0,u===r?l:u)}}else if(e.indexOf(ar(s),l)!=l){var p=c.lastIndexOf(s);p>-1&&(c=c.slice(0,p))}return c+i},Fn.unescape=function(e){return(e=xa(e))&&G.test(e)?e.replace(V,ln):e},Fn.uniqueId=function(e){var t=++$e;return xa(e)+t},Fn.upperCase=Ja,Fn.upperFirst=Ya,Fn.each=xo,Fn.eachRight=bo,Fn.first=qs,ll(Fn,(yl={},xi(Fn,(function(e,t){De.call(Fn.prototype,t)||(yl[t]=e)})),yl),{chain:!1}),Fn.VERSION="4.17.21",xt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Fn[e].placeholder=Fn})),xt(["drop","take"],(function(e,t){Un.prototype[e]=function(n){n=n===r?1:vn(fa(n),0);var i=this.__filtered__&&!t?new Un(this):this.clone();return i.__filtered__?i.__takeCount__=yn(n,i.__takeCount__):i.__views__.push({size:yn(n,p),type:e+(i.__dir__<0?"Right":"")}),i},Un.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),xt(["filter","map","takeWhile"],(function(e,t){var n=t+1,i=1==n||3==n;Un.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:os(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}})),xt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Un.prototype[e]=function(){return this[n](1).value()[0]}})),xt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Un.prototype[e]=function(){return this.__filtered__?new Un(this):this[n](1)}})),Un.prototype.compact=function(){return this.filter(rl)},Un.prototype.find=function(e){return this.filter(e).head()},Un.prototype.findLast=function(e){return this.reverse().find(e)},Un.prototype.invokeMap=Wi((function(e,t){return"function"==typeof e?new Un(this):this.map((function(n){return Ei(n,e,t)}))})),Un.prototype.reject=function(e){return this.filter(Lo(os(e)))},Un.prototype.slice=function(e,t){e=fa(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Un(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=fa(t))<0?n.dropRight(-t):n.take(t-e)),n)},Un.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Un.prototype.toArray=function(){return this.take(p)},xi(Un.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),s=Fn[i?"take"+("last"==t?"Right":""):t],o=i||/^find/.test(t);s&&(Fn.prototype[t]=function(){var t=this.__wrapped__,a=i?[1]:arguments,l=t instanceof Un,c=a[0],h=l||Vo(t),d=function(e){var t=s.apply(Fn,kt([e],a));return i&&u?t[0]:t};h&&n&&"function"==typeof c&&1!=c.length&&(l=h=!1);var u=this.__chain__,p=!!this.__actions__.length,m=o&&!u,f=l&&!p;if(!o&&h){t=f?t:new Un(this);var g=e.apply(t,a);return g.__actions__.push({func:mo,args:[d],thisArg:r}),new zn(g,u)}return m&&f?e.apply(this,a):(g=this.thru(d),m?i?g.value()[0]:g.value():g)})})),xt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Pe[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);Fn.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var r=this.value();return t.apply(Vo(r)?r:[],e)}return this[n]((function(n){return t.apply(Vo(n)?n:[],e)}))}})),xi(Un.prototype,(function(e,t){var n=Fn[t];if(n){var i=n.name+"";De.call(Tn,i)||(Tn[i]=[]),Tn[i].push({name:t,func:n})}})),Tn[Rr(r,2).name]=[{name:"wrapper",func:r}],Un.prototype.clone=function(){var e=new Un(this.__wrapped__);return e.__actions__=Ir(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ir(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ir(this.__views__),e},Un.prototype.reverse=function(){if(this.__filtered__){var e=new Un(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Un.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Vo(e),i=t<0,r=n?e.length:0,s=function(e,t,n){for(var i=-1,r=n.length;++i<r;){var s=n[i],o=s.size;switch(s.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=yn(t,e+o);break;case"takeRight":e=vn(e,t-o)}}return{start:e,end:t}}(0,r,this.__views__),o=s.start,a=s.end,l=a-o,c=i?a:o-1,h=this.__iteratees__,d=h.length,u=0,p=yn(l,this.__takeCount__);if(!n||!i&&r==l&&p==l)return ur(e,this.__actions__);var m=[];e:for(;l--&&u<p;){for(var f=-1,g=e[c+=t];++f<d;){var v=h[f],y=v.iteratee,x=v.type,b=y(g);if(2==x)g=b;else if(!b){if(1==x)continue e;break e}}m[u++]=g}return m},Fn.prototype.at=fo,Fn.prototype.chain=function(){return po(this)},Fn.prototype.commit=function(){return new zn(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===r&&(this.__values__=pa(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},Fn.prototype.plant=function(e){for(var t,n=this;n instanceof jn;){var i=Fs(n);i.__index__=0,i.__values__=r,t?s.__wrapped__=i:t=i;var s=i;n=n.__wrapped__}return s.__wrapped__=e,t},Fn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Un){var t=e;return this.__actions__.length&&(t=new Un(this)),(t=t.reverse()).__actions__.push({func:mo,args:[eo],thisArg:r}),new zn(t,this.__chain__)}return this.thru(eo)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return ur(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,ot&&(Fn.prototype[ot]=function(){return this}),Fn}();st._=cn,(i=function(){return cn}.call(t,n,t,e))===r||(e.exports=i)}.call(this)},5161:(e,t,n)=>{var i=n(9932),r=n(7206),s=n(9199),o=n(1469);e.exports=function(e,t){return(o(e)?i:s)(e,r(t,3))}},6604:(e,t,n)=>{var i=n(9465),r=n(7816),s=n(7206);e.exports=function(e,t){var n={};return t=s(t,3),r(e,(function(e,r,s){i(n,r,t(e,r,s))})),n}},6162:(e,t,n)=>{var i=n(6029),r=n(3325),s=n(6557);e.exports=function(e){return e&&e.length?i(e,s,r):void 0}},8306:(e,t,n)=>{var i=n(3369);function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=e.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(r.Cache||i),n}r.Cache=i,e.exports=r},308:e=>{e.exports=function(){}},9601:(e,t,n)=>{var i=n(371),r=n(9152),s=n(5403),o=n(327);e.exports=function(e){return s(e)?i(o(e)):r(e)}},9734:(e,t,n)=>{var i=n(1078),r=n(2689),s=n(5976),o=n(6612),a=s((function(e,t){if(null==e)return[];var n=t.length;return n>1&&o(e,t[0],t[1])?t=[]:n>2&&o(t[0],t[1],t[2])&&(t=[t[0]]),r(e,i(t,1),[])}));e.exports=a},479:e=>{e.exports=function(){return[]}},5062:e=>{e.exports=function(){return!1}},8601:(e,t,n)=>{var i=n(4841);e.exports=function(e){return e?Infinity===(e=i(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},554:(e,t,n)=>{var i=n(8601);e.exports=function(e){var t=i(e),n=t%1;return t==t?n?t-n:t:0}},4841:(e,t,n)=>{var i=n(7561),r=n(3218),s=n(3448),o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=a.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):o.test(e)?NaN:+e}},9833:(e,t,n)=>{var i=n(531);e.exports=function(e){return null==e?"":i(e)}},4908:(e,t,n)=>{var i=n(5652);e.exports=function(e){return e&&e.length?i(e):[]}},2628:(e,t,n)=>{var i=n(7415),r=n(3674);e.exports=function(e){return null==e?[]:i(e,r(e))}},6470:(e,t,n)=>{"use strict";n(7802),n(1102);i.prototype.addText=function(e){var t,n,i=this.stack;""!==e&&((n=(t=i[i.length-1]).children[t.children.length-1])&&"text"===n.type?n.value+=e:t.children.push({type:"text",value:e}))},i.prototype.addKeyword=function(e,t){this.openNode(t),this.addText(e),this.closeNode()},i.prototype.addSublanguage=function(e,t){var n=this.stack,i=n[n.length-1],r=e.rootNode.children,s=t?{type:"element",tagName:"span",properties:{className:[t]},children:r}:r;i.children=i.children.concat(s)},i.prototype.openNode=function(e){var t=this.stack,n={type:"element",tagName:"span",properties:{className:[this.options.classPrefix+e]},children:[]};t[t.length-1].children.push(n),t.push(n)},i.prototype.closeNode=function(){this.stack.pop()},i.prototype.closeAllNodes=r,i.prototype.finalize=r,i.prototype.toHTML=function(){return""};function i(e){this.options=e,this.rootNode={children:[]},this.stack=[this.rootNode]}function r(){}},9430:function(e,t){var n,i;void 0===(i="function"==typeof(n=function(){return function(e){function t(e){return" "===e||"\t"===e||"\n"===e||"\f"===e||"\r"===e}function n(t){var n,i=t.exec(e.substring(f));if(i)return n=i[0],f+=n.length,n}for(var i,r,s,o,a,l=e.length,c=/^[ \t\n\r\u000c]+/,h=/^[, \t\n\r\u000c]+/,d=/^[^ \t\n\r\u000c]+/,u=/[,]+$/,p=/^\d+$/,m=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,f=0,g=[];;){if(n(h),f>=l)return g;i=n(d),r=[],","===i.slice(-1)?(i=i.replace(u,""),y()):v()}function v(){for(n(c),s="",o="in descriptor";;){if(a=e.charAt(f),"in descriptor"===o)if(t(a))s&&(r.push(s),s="",o="after descriptor");else{if(","===a)return f+=1,s&&r.push(s),void y();if("("===a)s+=a,o="in parens";else{if(""===a)return s&&r.push(s),void y();s+=a}}else if("in parens"===o)if(")"===a)s+=a,o="in descriptor";else{if(""===a)return r.push(s),void y();s+=a}else if("after descriptor"===o)if(t(a));else{if(""===a)return void y();o="in descriptor",f-=1}f+=1}}function y(){var t,n,s,o,a,l,c,h,d,u=!1,f={};for(o=0;o<r.length;o++)l=(a=r[o])[a.length-1],c=a.substring(0,a.length-1),h=parseInt(c,10),d=parseFloat(c),p.test(c)&&"w"===l?((t||n)&&(u=!0),0===h?u=!0:t=h):m.test(c)&&"x"===l?((t||n||s)&&(u=!0),d<0?u=!0:n=d):p.test(c)&&"h"===l?((s||n)&&(u=!0),0===h?u=!0:s=h):u=!0;u?console&&console.log&&console.log("Invalid srcset descriptor found in '"+e+"' at '"+a+"'."):(f.url=i,t&&(f.w=t),n&&(f.d=n),s&&(f.h=s),g.push(f))}}})?n.apply(t,[]):n)||(e.exports=i)},4241:e=>{var t=String,n=function(){return{isColorSupported:!1,reset:t,bold:t,dim:t,italic:t,underline:t,inverse:t,hidden:t,strikethrough:t,black:t,red:t,green:t,yellow:t,blue:t,magenta:t,cyan:t,white:t,gray:t,bgBlack:t,bgRed:t,bgGreen:t,bgYellow:t,bgBlue:t,bgMagenta:t,bgCyan:t,bgWhite:t}};e.exports=n(),e.exports.createColors=n},1353:(e,t,n)=>{"use strict";let i=n(1019);class r extends i{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}}e.exports=r,r.default=r,i.registerAtRule(r)},7923:(e,t,n)=>{"use strict";let i=n(5631);class r extends i{constructor(e){super(e),this.type="comment"}}e.exports=r,r.default=r},1019:(e,t,n)=>{"use strict";let i,r,s,{isClean:o,my:a}=n(5513),l=n(4258),c=n(7923),h=n(5631);function d(e){return e.map((e=>(e.nodes&&(e.nodes=d(e.nodes)),delete e.source,e)))}function u(e){if(e[o]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)u(t)}class p extends h{push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}each(e){if(!this.proxyOf.nodes)return;let t,n,i=this.getIterator();for(;this.indexes[i]<this.proxyOf.nodes.length&&(t=this.indexes[i],n=e(this.proxyOf.nodes[t],t),!1!==n);)this.indexes[i]+=1;return delete this.indexes[i],n}walk(e){return this.each(((t,n)=>{let i;try{i=e(t,n)}catch(e){throw t.addToError(e)}return!1!==i&&t.walk&&(i=t.walk(e)),i}))}walkDecls(e,t){return t?e instanceof RegExp?this.walk(((n,i)=>{if("decl"===n.type&&e.test(n.prop))return t(n,i)})):this.walk(((n,i)=>{if("decl"===n.type&&n.prop===e)return t(n,i)})):(t=e,this.walk(((e,n)=>{if("decl"===e.type)return t(e,n)})))}walkRules(e,t){return t?e instanceof RegExp?this.walk(((n,i)=>{if("rule"===n.type&&e.test(n.selector))return t(n,i)})):this.walk(((n,i)=>{if("rule"===n.type&&n.selector===e)return t(n,i)})):(t=e,this.walk(((e,n)=>{if("rule"===e.type)return t(e,n)})))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk(((n,i)=>{if("atrule"===n.type&&e.test(n.name))return t(n,i)})):this.walk(((n,i)=>{if("atrule"===n.type&&n.name===e)return t(n,i)})):(t=e,this.walk(((e,n)=>{if("atrule"===e.type)return t(e,n)})))}walkComments(e){return this.walk(((t,n)=>{if("comment"===t.type)return e(t,n)}))}append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}insertBefore(e,t){let n,i=0===(e=this.index(e))&&"prepend",r=this.normalize(t,this.proxyOf.nodes[e],i).reverse();for(let t of r)this.proxyOf.nodes.splice(e,0,t);for(let t in this.indexes)n=this.indexes[t],e<=n&&(this.indexes[t]=n+r.length);return this.markDirty(),this}insertAfter(e,t){e=this.index(e);let n,i=this.normalize(t,this.proxyOf.nodes[e]).reverse();for(let t of i)this.proxyOf.nodes.splice(e+1,0,t);for(let t in this.indexes)n=this.indexes[t],e<n&&(this.indexes[t]=n+i.length);return this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let n in this.indexes)t=this.indexes[n],t>=e&&(this.indexes[n]=t-1);return this.markDirty(),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}replaceValues(e,t,n){return n||(n=t,t={}),this.walkDecls((i=>{t.props&&!t.props.includes(i.prop)||t.fast&&!i.value.includes(t.fast)||(i.value=i.value.replace(e,n))})),this.markDirty(),this}every(e){return this.nodes.every(e)}some(e){return this.nodes.some(e)}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}normalize(e,t){if("string"==typeof e)e=d(i(e).nodes);else if(Array.isArray(e)){e=e.slice(0);for(let t of e)t.parent&&t.parent.removeChild(t,"ignore")}else if("root"===e.type&&"document"!==this.type){e=e.nodes.slice(0);for(let t of e)t.parent&&t.parent.removeChild(t,"ignore")}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new l(e)]}else if(e.selector)e=[new r(e)];else if(e.name)e=[new s(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new c(e)]}return e.map((e=>(e[a]||p.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[o]&&u(e),void 0===e.raws.before&&t&&void 0!==t.raws.before&&(e.raws.before=t.raws.before.replace(/\S/g,"")),e.parent=this,e)))}getProxyProcessor(){return{set:(e,t,n)=>(e[t]===n||(e[t]=n,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0),get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...n)=>e[t](...n.map((e=>"function"==typeof e?(t,n)=>e(t.toProxy(),n):e))):"every"===t||"some"===t?n=>e[t](((e,...t)=>n(e.toProxy(),...t))):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map((e=>e.toProxy())):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t]}}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}}p.registerParse=e=>{i=e},p.registerRule=e=>{r=e},p.registerAtRule=e=>{s=e},e.exports=p,p.default=p,p.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,s.prototype):"rule"===e.type?Object.setPrototypeOf(e,r.prototype):"decl"===e.type?Object.setPrototypeOf(e,l.prototype):"comment"===e.type&&Object.setPrototypeOf(e,c.prototype),e[a]=!0,e.nodes&&e.nodes.forEach((e=>{p.rebuild(e)}))}},2671:(e,t,n)=>{"use strict";let i=n(4241),r=n(2868);class s extends Error{constructor(e,t,n,i,r,o){super(e),this.name="CssSyntaxError",this.reason=e,r&&(this.file=r),i&&(this.source=i),o&&(this.plugin=o),void 0!==t&&void 0!==n&&(this.line=t,this.column=n),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,s)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=i.isColorSupported),r&&e&&(t=r(t));let n,s,o=t.split(/\r?\n/),a=Math.max(this.line-3,0),l=Math.min(this.line+2,o.length),c=String(l).length;if(e){let{bold:e,red:t,gray:r}=i.createColors(!0);n=n=>e(t(n)),s=e=>r(e)}else n=s=e=>e;return o.slice(a,l).map(((e,t)=>{let i=a+1+t,r=" "+(" "+i).slice(-c)+" | ";if(i===this.line){let t=s(r.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return n(">")+s(r)+e+"\n "+t+n("^")}return" "+s(r)+e})).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}e.exports=s,s.default=s},4258:(e,t,n)=>{"use strict";let i=n(5631);class r extends i{constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}}e.exports=r,r.default=r},6461:(e,t,n)=>{"use strict";let i,r,s=n(1019);class o extends s{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new i(new r,this,e).stringify()}}o.registerLazyResult=e=>{i=e},o.registerProcessor=e=>{r=e},e.exports=o,o.default=o},250:(e,t,n)=>{"use strict";let i=n(4258),r=n(7981),s=n(7923),o=n(1353),a=n(5995),l=n(1025),c=n(1675);function h(e,t){if(Array.isArray(e))return e.map((e=>h(e)));let{inputs:n,...d}=e;if(n){t=[];for(let e of n){let n={...e,__proto__:a.prototype};n.map&&(n.map={...n.map,__proto__:r.prototype}),t.push(n)}}if(d.nodes&&(d.nodes=e.nodes.map((e=>h(e,t)))),d.source){let{inputId:e,...n}=d.source;d.source=n,null!=e&&(d.source.input=t[e])}if("root"===d.type)return new l(d);if("decl"===d.type)return new i(d);if("rule"===d.type)return new c(d);if("comment"===d.type)return new s(d);if("atrule"===d.type)return new o(d);throw new Error("Unknown node type: "+e.type)}e.exports=h,h.default=h},5995:(e,t,n)=>{"use strict";let{SourceMapConsumer:i,SourceMapGenerator:r}=n(209),{fileURLToPath:s,pathToFileURL:o}=n(7414),{resolve:a,isAbsolute:l}=n(9830),{nanoid:c}=n(2961),h=n(2868),d=n(2671),u=n(7981),p=Symbol("fromOffsetCache"),m=Boolean(i&&r),f=Boolean(a&&l);class g{constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!f||/^\w+:\/\//.test(t.from)||l(t.from)?this.file=t.from:this.file=a(t.from)),f&&m){let e=new u(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+c(6)+">"),this.map&&(this.map.file=this.from)}fromOffset(e){let t,n;if(this[p])n=this[p];else{let e=this.css.split("\n");n=new Array(e.length);let t=0;for(let i=0,r=e.length;i<r;i++)n[i]=t,t+=e[i].length+1;this[p]=n}t=n[n.length-1];let i=0;if(e>=t)i=n.length-1;else{let t,r=n.length-2;for(;i<r;)if(t=i+(r-i>>1),e<n[t])r=t-1;else{if(!(e>=n[t+1])){i=t;break}i=t+1}}return{line:i+1,col:e-n[i]+1}}error(e,t,n,i={}){let r;if(!n){let e=this.fromOffset(t);t=e.line,n=e.col}let s=this.origin(t,n);return r=s?new d(e,s.line,s.column,s.source,s.file,i.plugin):new d(e,t,n,this.css,this.file,i.plugin),r.input={line:t,column:n,source:this.css},this.file&&(o&&(r.input.url=o(this.file).toString()),r.input.file=this.file),r}origin(e,t){if(!this.map)return!1;let n,i=this.map.consumer(),r=i.originalPositionFor({line:e,column:t});if(!r.source)return!1;n=l(r.source)?o(r.source):new URL(r.source,this.map.consumer().sourceRoot||o(this.map.mapFile));let a={url:n.toString(),line:r.line,column:r.column};if("file:"===n.protocol){if(!s)throw new Error("file: protocol is not available in this PostCSS build");a.file=s(n)}let c=i.sourceContentFor(r.source);return c&&(a.source=c),a}mapResolve(e){return/^\w+:\/\//.test(e)?e:a(this.map.consumer().sourceRoot||this.map.root||".",e)}get from(){return this.file||this.id}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}}e.exports=g,g.default=g,h&&h.registerInput&&h.registerInput(g)},1939:(e,t,n)=>{"use strict";let{isClean:i,my:r}=n(5513),s=n(8505),o=n(7088),a=n(1019),l=n(6461),c=(n(2448),n(3632)),h=n(6939),d=n(1025);const u={document:"Document",root:"Root",atrule:"AtRule",rule:"Rule",decl:"Declaration",comment:"Comment"},p={postcssPlugin:!0,prepare:!0,Once:!0,Document:!0,Root:!0,Declaration:!0,Rule:!0,AtRule:!0,Comment:!0,DeclarationExit:!0,RuleExit:!0,AtRuleExit:!0,CommentExit:!0,RootExit:!0,DocumentExit:!0,OnceExit:!0},m={postcssPlugin:!0,prepare:!0,Once:!0};function f(e){return"object"==typeof e&&"function"==typeof e.then}function g(e){let t=!1,n=u[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[n,n+"-"+t,0,n+"Exit",n+"Exit-"+t]:t?[n,n+"-"+t,n+"Exit",n+"Exit-"+t]:e.append?[n,0,n+"Exit"]:[n,n+"Exit"]}function v(e){let t;return t="document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:g(e),{node:e,events:t,eventIndex:0,visitors:[],visitorIndex:0,iterator:0}}function y(e){return e[i]=!1,e.nodes&&e.nodes.forEach((e=>y(e))),e}let x={};class b{constructor(e,t,n){let i;if(this.stringified=!1,this.processed=!1,"object"!=typeof t||null===t||"root"!==t.type&&"document"!==t.type)if(t instanceof b||t instanceof c)i=y(t.root),t.map&&(void 0===n.map&&(n.map={}),n.map.inline||(n.map.inline=!1),n.map.prev=t.map);else{let e=h;n.syntax&&(e=n.syntax.parse),n.parser&&(e=n.parser),e.parse&&(e=e.parse);try{i=e(t,n)}catch(e){this.processed=!0,this.error=e}i&&!i[r]&&a.rebuild(i)}else i=y(t);this.result=new c(e,i,n),this.helpers={...x,result:this.result,postcss:x},this.plugins=this.processor.plugins.map((e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e))}get[Symbol.toStringTag](){return"LazyResult"}get processor(){return this.result.processor}get opts(){return this.result.opts}get css(){return this.stringify().css}get content(){return this.stringify().content}get map(){return this.stringify().map}get root(){return this.sync().root}get messages(){return this.sync().messages}warnings(){return this.sync().warnings()}toString(){return this.css}then(e,t){return this.async().then(e,t)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins)if(f(this.runOnRoot(e)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[i];)e[i]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=o;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let n=new s(t,this.result.root,this.result.opts).generate();return this.result.css=n[0],this.result.map=n[1],this.result}walkSync(e){e[i]=!0;let t=g(e);for(let n of t)if(0===n)e.nodes&&e.each((e=>{e[i]||this.walkSync(e)}));else{let t=this.listeners[n];if(t&&this.visitSync(t,e.toProxy()))return}}visitSync(e,t){for(let[n,i]of e){let e;this.result.lastPlugin=n;try{e=i(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(f(e))throw this.getAsyncError()}}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map((t=>e.Once(t,this.helpers)));return f(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let n=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?n.postcssVersion:(e.plugin=n.postcssPlugin,e.setMessage())}catch(e){console&&console.error&&console.error(e)}return e}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],n=this.runOnRoot(t);if(f(n))try{await n}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[i];){e[i]=!0;let t=[v(e)];for(;t.length>0;){let e=this.visitTick(t);if(f(e))try{await e}catch(e){let n=t[t.length-1].node;throw this.handleError(e,n)}}}if(this.listeners.OnceExit)for(let[t,n]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if("document"===e.type){let t=e.nodes.map((e=>n(e,this.helpers)));await Promise.all(t)}else await n(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}prepareVisitors(){this.listeners={};let e=(e,t,n)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,n])};for(let t of this.plugins)if("object"==typeof t)for(let n in t){if(!p[n]&&/^[A-Z]/.test(n))throw new Error(`Unknown event ${n} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!m[n])if("object"==typeof t[n])for(let i in t[n])e(t,"*"===i?n:n+"-"+i.toLowerCase(),t[n][i]);else"function"==typeof t[n]&&e(t,n,t[n])}this.hasListener=Object.keys(this.listeners).length>0}visitTick(e){let t=e[e.length-1],{node:n,visitors:r}=t;if("root"!==n.type&&"document"!==n.type&&!n.parent)return void e.pop();if(r.length>0&&t.visitorIndex<r.length){let[e,i]=r[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===r.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return i(n.toProxy(),this.helpers)}catch(e){throw this.handleError(e,n)}}if(0!==t.iterator){let r,s=t.iterator;for(;r=n.nodes[n.indexes[s]];)if(n.indexes[s]+=1,!r[i])return r[i]=!0,void e.push(v(r));t.iterator=0,delete n.indexes[s]}let s=t.events;for(;t.eventIndex<s.length;){let e=s[t.eventIndex];if(t.eventIndex+=1,0===e)return void(n.nodes&&n.nodes.length&&(n[i]=!0,t.iterator=n.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}}b.registerPostcss=e=>{x=e},e.exports=b,b.default=b,d.registerLazyResult(b),l.registerLazyResult(b)},4715:e=>{"use strict";let t={split(e,t,n){let i=[],r="",s=!1,o=0,a=!1,l=!1;for(let n of e)l?l=!1:"\\"===n?l=!0:a?n===a&&(a=!1):'"'===n||"'"===n?a=n:"("===n?o+=1:")"===n?o>0&&(o-=1):0===o&&t.includes(n)&&(s=!0),s?(""!==r&&i.push(r.trim()),r="",s=!1):r+=n;return(n||""!==r)&&i.push(r.trim()),i},space:e=>t.split(e,[" ","\n","\t"]),comma:e=>t.split(e,[","],!0)};e.exports=t,t.default=t},8505:(e,t,n)=>{"use strict";let{SourceMapConsumer:i,SourceMapGenerator:r}=n(209),{dirname:s,resolve:o,relative:a,sep:l}=n(9830),{pathToFileURL:c}=n(7414),h=Boolean(i&&r),d=Boolean(s&&o&&a&&l);e.exports=class{constructor(e,t,n){this.stringify=e,this.mapOpts=n.map||{},this.root=t,this.opts=n}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}previous(){return this.previousMaps||(this.previousMaps=[],this.root.walk((e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}}))),this.previousMaps}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((e=>e.inline)))}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((e=>e.withContent()))}clearAnnotation(){if(!1===this.mapOpts.annotation)return;let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}setSourcesContent(){let e={};this.root.walk((t=>{if(t.source){let n=t.source.input.from;n&&!e[n]&&(e[n]=!0,this.map.setSourceContent(this.toUrl(this.path(n)),t.source.input.css))}}))}applyPrevMaps(){for(let e of this.previous()){let t,n=this.toUrl(this.path(e.file)),r=e.root||s(e.file);!1===this.mapOpts.sourcesContent?(t=new i(e.text),t.sourcesContent&&(t.sourcesContent=t.sourcesContent.map((()=>null)))):t=e.consumer(),this.map.applySourceMap(t,n,this.toUrl(this.path(r)))}}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((e=>e.annotation)))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}generateMap(){return this.generateString(),this.isSourcesContent()&&this.setSourcesContent(),this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}path(e){if(0===e.indexOf("<"))return e;if(/^\w+:\/\//.test(e))return e;if(this.mapOpts.absolute)return e;let t=this.opts.to?s(this.opts.to):".";return"string"==typeof this.mapOpts.annotation&&(t=s(o(t,this.mapOpts.annotation))),a(t,e)}toUrl(e){return"\\"===l&&(e=e.replace(/\\/g,"/")),encodeURI(e).replace(/[#?]/g,encodeURIComponent)}sourcePath(e){if(this.mapOpts.from)return this.toUrl(this.mapOpts.from);if(this.mapOpts.absolute){if(c)return c(e.source.input.from).toString();throw new Error("`map.absolute` option is not available in this PostCSS build")}return this.toUrl(this.path(e.source.input.from))}generateString(){this.css="",this.map=new r({file:this.outputFile()});let e,t,n=1,i=1,s="<no source>",o={source:"",generated:{line:0,column:0},original:{line:0,column:0}};this.stringify(this.root,((r,a,l)=>{if(this.css+=r,a&&"end"!==l&&(o.generated.line=n,o.generated.column=i-1,a.source&&a.source.start?(o.source=this.sourcePath(a),o.original.line=a.source.start.line,o.original.column=a.source.start.column-1,this.map.addMapping(o)):(o.source=s,o.original.line=1,o.original.column=0,this.map.addMapping(o))),e=r.match(/\n/g),e?(n+=e.length,t=r.lastIndexOf("\n"),i=r.length-t):i+=r.length,a&&"start"!==l){let e=a.parent||{raws:{}};("decl"!==a.type||a!==e.last||e.raws.semicolon)&&(a.source&&a.source.end?(o.source=this.sourcePath(a),o.original.line=a.source.end.line,o.original.column=a.source.end.column-1,o.generated.line=n,o.generated.column=i-2,this.map.addMapping(o)):(o.source=s,o.original.line=1,o.original.column=0,o.generated.line=n,o.generated.column=i-1,this.map.addMapping(o)))}}))}generate(){if(this.clearAnnotation(),d&&h&&this.isMap())return this.generateMap();let e="";return this.stringify(this.root,(t=>{e+=t})),[e]}}},5631:(e,t,n)=>{"use strict";let{isClean:i,my:r}=n(5513),s=n(2671),o=n(1062),a=n(7088);function l(e,t){let n=new e.constructor;for(let i in e){if(!Object.prototype.hasOwnProperty.call(e,i))continue;if("proxyCache"===i)continue;let r=e[i],s=typeof r;"parent"===i&&"object"===s?t&&(n[i]=t):"source"===i?n[i]=r:Array.isArray(r)?n[i]=r.map((e=>l(e,n))):("object"===s&&null!==r&&(r=l(r)),n[i]=r)}return n}class c{constructor(e={}){this.raws={},this[i]=!1,this[r]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let n of e[t])"function"==typeof n.clone?this.append(n.clone()):this.append(n)}else this[t]=e[t]}error(e,t={}){if(this.source){let n=this.positionBy(t);return this.source.input.error(e,n.line,n.column,t)}return new s(e)}warn(e,t,n){let i={node:this};for(let e in n)i[e]=n[e];return e.warn(t,i)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}toString(e=a){e.stringify&&(e=e.stringify);let t="";return e(this,(e=>{t+=e})),t}assign(e={}){for(let t in e)this[t]=e[t];return this}clone(e={}){let t=l(this);for(let n in e)t[n]=e[n];return t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}replaceWith(...e){if(this.parent){let t=this,n=!1;for(let i of e)i===this?n=!0:n?(this.parent.insertAfter(t,i),t=i):this.parent.insertBefore(t,i);n||this.remove()}return this}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}before(e){return this.parent.insertBefore(this,e),this}after(e){return this.parent.insertAfter(this,e),this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}raw(e,t){return(new o).raw(this,e,t)}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}toJSON(e,t){let n={},i=null==t;t=t||new Map;let r=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e))continue;if("parent"===e||"proxyCache"===e)continue;let i=this[e];if(Array.isArray(i))n[e]=i.map((e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e));else if("object"==typeof i&&i.toJSON)n[e]=i.toJSON(null,t);else if("source"===e){let s=t.get(i.input);null==s&&(s=r,t.set(i.input,r),r++),n[e]={inputId:s,start:i.start,end:i.end}}else n[e]=i}return i&&(n.inputs=[...t.keys()].map((e=>e.toJSON()))),n}positionInside(e){let t=this.toString(),n=this.source.start.column,i=this.source.start.line;for(let r=0;r<e;r++)"\n"===t[r]?(n=1,i+=1):n+=1;return{line:i,column:n}}positionBy(e){let t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){let n=this.toString().indexOf(e.word);-1!==n&&(t=this.positionInside(n))}return t}getProxyProcessor(){return{set:(e,t,n)=>(e[t]===n||(e[t]=n,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0),get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t]}}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}markDirty(){if(this[i]){this[i]=!1;let e=this;for(;e=e.parent;)e[i]=!1}}get proxyOf(){return this}}e.exports=c,c.default=c},6939:(e,t,n)=>{"use strict";let i=n(1019),r=n(8867),s=n(5995);function o(e,t){let n=new s(e,t),i=new r(n);try{i.parse()}catch(e){throw e}return i.root}e.exports=o,o.default=o,i.registerParse(o)},8867:(e,t,n)=>{"use strict";let i=n(4258),r=n(3852),s=n(7923),o=n(1353),a=n(1025),l=n(1675);e.exports=class{constructor(e){this.input=e,this.root=new a,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:e,start:{offset:0,line:1,column:1}}}createTokenizer(){this.tokenizer=r(this.input)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}comment(e){let t=new s;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]);let n=e[1].slice(2,-2);if(/^\s*$/.test(n))t.text="",t.raws.left=n,t.raws.right="";else{let e=n.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}emptyRule(e){let t=new l;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}other(e){let t=!1,n=null,i=!1,r=null,s=[],o=e[1].startsWith("--"),a=[],l=e;for(;l;){if(n=l[0],a.push(l),"("===n||"["===n)r||(r=l),s.push("("===n?")":"]");else if(o&&i&&"{"===n)r||(r=l),s.push("}");else if(0===s.length){if(";"===n){if(i)return void this.decl(a,o);break}if("{"===n)return void this.rule(a);if("}"===n){this.tokenizer.back(a.pop()),t=!0;break}":"===n&&(i=!0)}else n===s[s.length-1]&&(s.pop(),0===s.length&&(r=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),s.length>0&&this.unclosedBracket(r),t&&i){for(;a.length&&(l=a[a.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,o)}else this.unknownWord(a)}rule(e){e.pop();let t=new l;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}decl(e,t){let n=new i;this.init(n,e[0][2]);let r,s=e[e.length-1];for(";"===s[0]&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(s[3]||s[2]);"word"!==e[0][0];)1===e.length&&this.unknownWord(e),n.raws.before+=e.shift()[1];for(n.source.start=this.getPosition(e[0][2]),n.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;n.prop+=e.shift()[1]}for(n.raws.between="";e.length;){if(r=e.shift(),":"===r[0]){n.raws.between+=r[1];break}"word"===r[0]&&/\w/.test(r[1])&&this.unknownWord([r]),n.raws.between+=r[1]}"_"!==n.prop[0]&&"*"!==n.prop[0]||(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1));let o=this.spacesAndCommentsFromStart(e);this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if(r=e[t],"!important"===r[1].toLowerCase()){n.important=!0;let i=this.stringFrom(e,t);i=this.spacesFromEnd(e)+i," !important"!==i&&(n.raws.important=i);break}if("important"===r[1].toLowerCase()){let i=e.slice(0),r="";for(let e=t;e>0;e--){let t=i[e][0];if(0===r.trim().indexOf("!")&&"space"!==t)break;r=i.pop()[1]+r}0===r.trim().indexOf("!")&&(n.important=!0,n.raws.important=r,e=i)}if("space"!==r[0]&&"comment"!==r[0])break}let a=e.some((e=>"space"!==e[0]&&"comment"!==e[0]));this.raw(n,"value",e),a?n.raws.between+=o:n.value=o+n.value,n.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}atrule(e){let t,n,i,r=new o;r.name=e[1].slice(1),""===r.name&&this.unnamedAtrule(r,e),this.init(r,e[2]);let s=!1,a=!1,l=[],c=[];for(;!this.tokenizer.endOfFile();){if(t=(e=this.tokenizer.nextToken())[0],"("===t||"["===t?c.push("("===t?")":"]"):"{"===t&&c.length>0?c.push("}"):t===c[c.length-1]&&c.pop(),0===c.length){if(";"===t){r.source.end=this.getPosition(e[2]),this.semicolon=!0;break}if("{"===t){a=!0;break}if("}"===t){if(l.length>0){for(i=l.length-1,n=l[i];n&&"space"===n[0];)n=l[--i];n&&(r.source.end=this.getPosition(n[3]||n[2]))}this.end(e);break}l.push(e)}else l.push(e);if(this.tokenizer.endOfFile()){s=!0;break}}r.raws.between=this.spacesAndCommentsFromEnd(l),l.length?(r.raws.afterName=this.spacesAndCommentsFromStart(l),this.raw(r,"params",l),s&&(e=l[l.length-1],r.source.end=this.getPosition(e[3]||e[2]),this.spaces=r.raws.between,r.raws.between="")):(r.raws.afterName="",r.params=""),a&&(r.nodes=[],this.current=r)}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{offset:e,line:t.line,column:t.col}}init(e,t){this.current.push(e),e.source={start:this.getPosition(t),input:this.input},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}raw(e,t,n){let i,r,s,o,a=n.length,l="",c=!0,h=/^([#.|])?(\w)+/i;for(let t=0;t<a;t+=1)i=n[t],r=i[0],"comment"!==r||"rule"!==e.type?"comment"===r||"space"===r&&t===a-1?c=!1:l+=i[1]:(o=n[t-1],s=n[t+1],"space"!==o[0]&&"space"!==s[0]&&h.test(o[1])&&h.test(s[1])?l+=i[1]:c=!1);if(!c){let i=n.reduce(((e,t)=>e+t[1]),"");e.raws[t]={value:l,raw:i}}e[t]=l}spacesAndCommentsFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)n=e.pop()[1]+n;return n}spacesAndCommentsFromStart(e){let t,n="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)n+=e.shift()[1];return n}spacesFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)n=e.pop()[1]+n;return n}stringFrom(e,t){let n="";for(let i=t;i<e.length;i++)n+=e[i][1];return e.splice(t,e.length-t),n}colon(e){let t,n,i,r=0;for(let[s,o]of e.entries()){if(t=o,n=t[0],"("===n&&(r+=1),")"===n&&(r-=1),0===r&&":"===n){if(i){if("word"===i[0]&&"progid"===i[1])continue;return s}this.doubleColon(t)}i=t}return!1}unclosedBracket(e){throw this.input.error("Unclosed bracket",e[2])}unknownWord(e){throw this.input.error("Unknown word",e[0][2])}unexpectedClose(e){throw this.input.error("Unexpected }",e[2])}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}doubleColon(e){throw this.input.error("Double colon",e[2])}unnamedAtrule(e,t){throw this.input.error("At-rule without name",t[2])}precheckMissedSemicolon(){}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let n,i=0;for(let r=t-1;r>=0&&(n=e[r],"space"===n[0]||(i+=1,2!==i));r--);throw this.input.error("Missed semicolon","word"===n[0]?n[3]+1:n[2])}}},20:(e,t,n)=>{"use strict";let i=n(2671),r=n(4258),s=n(1939),o=n(1019),a=n(1723),l=n(7088),c=n(250),h=n(6461),d=n(1728),u=n(7923),p=n(1353),m=n(3632),f=n(5995),g=n(6939),v=n(4715),y=n(1675),x=n(1025),b=n(5631);function w(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new a(e)}w.plugin=function(e,t){function n(...n){let i=t(...n);return i.postcssPlugin=e,i.postcssVersion=(new a).version,i}let i;return console&&console.warn&&(console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+":  postcss.plugin . :\nhttps://www.w3ctech.com/topic/2226")),Object.defineProperty(n,"postcss",{get:()=>(i||(i=n()),i)}),n.process=function(e,t,i){return w([n(i)]).process(e,t)},n},w.stringify=l,w.parse=g,w.fromJSON=c,w.list=v,w.comment=e=>new u(e),w.atRule=e=>new p(e),w.decl=e=>new r(e),w.rule=e=>new y(e),w.root=e=>new x(e),w.document=e=>new h(e),w.CssSyntaxError=i,w.Declaration=r,w.Container=o,w.Document=h,w.Comment=u,w.Warning=d,w.AtRule=p,w.Result=m,w.Input=f,w.Rule=y,w.Root=x,w.Node=b,s.registerPostcss(w),e.exports=w,w.default=w},7981:(e,t,n)=>{"use strict";let{SourceMapConsumer:i,SourceMapGenerator:r}=n(209),{existsSync:s,readFileSync:o}=n(4777),{dirname:a,join:l}=n(9830);class c{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let n=t.map?t.map.prev:void 0,i=this.loadMap(t.from,n);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=a(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new i(this.text)),this.consumerCache}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}startWith(e,t){return!!e&&e.substr(0,t.length)===t}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let n=e.lastIndexOf(t.pop()),i=e.indexOf("*/",n);n>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(n,i)))}decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return t=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(t,"base64").toString():window.atob(t);var t;let n=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+n)}loadFile(e){if(this.root=a(e),s(e))return this.mapFile=e,o(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof i)return r.fromSourceMap(t).toString();if(t instanceof r)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let n=t(e);if(n){let e=this.loadFile(n);if(!e)throw new Error("Unable to load previous source map: "+n.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=l(a(e),t)),this.loadFile(t)}}}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}}e.exports=c,c.default=c},1723:(e,t,n)=>{"use strict";let i=n(1939),r=n(6461),s=n(1025);class o{constructor(e=[]){this.version="8.3.11",this.plugins=this.normalize(e)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}process(e,t={}){return 0!==this.plugins.length||void 0!==t.parser||void 0!==t.stringifier||void 0!==t.syntax||t.hideNothingWarning,new i(this,e,t)}normalize(e){let t=[];for(let n of e)if(!0===n.postcss?n=n():n.postcss&&(n=n.postcss),"object"==typeof n&&Array.isArray(n.plugins))t=t.concat(n.plugins);else if("object"==typeof n&&n.postcssPlugin)t.push(n);else if("function"==typeof n)t.push(n);else if("object"!=typeof n||!n.parse&&!n.stringify)throw new Error(n+" is not a PostCSS plugin");return t}}e.exports=o,o.default=o,s.registerProcessor(o),r.registerProcessor(o)},3632:(e,t,n)=>{"use strict";let i=n(1728);class r{constructor(e,t,n){this.processor=e,this.messages=[],this.root=t,this.opts=n,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let n=new i(e,t);return this.messages.push(n),n}warnings(){return this.messages.filter((e=>"warning"===e.type))}get content(){return this.css}}e.exports=r,r.default=r},1025:(e,t,n)=>{"use strict";let i,r,s=n(1019);class o extends s{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}removeChild(e,t){let n=this.index(e);return!t&&0===n&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[n].raws.before),super.removeChild(e)}normalize(e,t,n){let i=super.normalize(e);if(t)if("prepend"===n)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of i)e.raws.before=t.raws.before;return i}toResult(e={}){return new i(new r,this,e).stringify()}}o.registerLazyResult=e=>{i=e},o.registerProcessor=e=>{r=e},e.exports=o,o.default=o},1675:(e,t,n)=>{"use strict";let i=n(1019),r=n(4715);class s extends i{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return r.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,n=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(n)}}e.exports=s,s.default=s,i.registerRule(s)},1062:e=>{"use strict";const t={colon:": ",indent:"    ",beforeDecl:"\n",beforeRule:"\n",beforeOpen:" ",beforeClose:"\n",beforeComment:"\n",after:"\n",emptyBody:"",commentLeft:" ",commentRight:" ",semicolon:!1};e.exports=class{constructor(e){this.builder=e}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}document(e){this.body(e)}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}comment(e){let t=this.raw(e,"left","commentLeft"),n=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+n+"*/",e)}decl(e,t){let n=this.raw(e,"between","colon"),i=e.prop+n+this.rawValue(e,"value");e.important&&(i+=e.raws.important||" !important"),t&&(i+=";"),this.builder(i,e)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}atrule(e,t){let n="@"+e.name,i=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?n+=e.raws.afterName:i&&(n+=" "),e.nodes)this.block(e,n+i);else{let r=(e.raws.between||"")+(t?";":"");this.builder(n+i+r,e)}}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let n=this.raw(e,"semicolon");for(let i=0;i<e.nodes.length;i++){let r=e.nodes[i],s=this.raw(r,"before");s&&this.builder(s),this.stringify(r,t!==i||n)}}block(e,t){let n,i=this.raw(e,"between","beforeOpen");this.builder(t+i+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),n=this.raw(e,"after")):n=this.raw(e,"after","emptyBody"),n&&this.builder(n),this.builder("}",e,"end")}raw(e,n,i){let r;if(i||(i=n),n&&(r=e.raws[n],void 0!==r))return r;let s=e.parent;if("before"===i){if(!s||"root"===s.type&&s.first===e)return"";if(s&&"document"===s.type)return""}if(!s)return t[i];let o=e.root();if(o.rawCache||(o.rawCache={}),void 0!==o.rawCache[i])return o.rawCache[i];if("before"===i||"after"===i)return this.beforeAfter(e,i);{let t="raw"+((a=i)[0].toUpperCase()+a.slice(1));this[t]?r=this[t](o,e):o.walk((e=>{if(r=e.raws[n],void 0!==r)return!1}))}var a;return void 0===r&&(r=t[i]),o.rawCache[i]=r,r}rawSemicolon(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1})),t}rawEmptyBody(e){let t;return e.walk((e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1})),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk((n=>{let i=n.parent;if(i&&i!==e&&i.parent&&i.parent===e&&void 0!==n.raws.before){let e=n.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}})),t}rawBeforeComment(e,t){let n;return e.walkComments((e=>{if(void 0!==e.raws.before)return n=e.raws.before,n.includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1})),void 0===n?n=this.raw(t,null,"beforeDecl"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeDecl(e,t){let n;return e.walkDecls((e=>{if(void 0!==e.raws.before)return n=e.raws.before,n.includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1})),void 0===n?n=this.raw(t,null,"beforeRule"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeRule(e){let t;return e.walk((n=>{if(n.nodes&&(n.parent!==e||e.first!==n)&&void 0!==n.raws.before)return t=n.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeClose(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeOpen(e){let t;return e.walk((e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1})),t}rawColon(e){let t;return e.walkDecls((e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}beforeAfter(e,t){let n;n="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let i=e.parent,r=0;for(;i&&"root"!==i.type;)r+=1,i=i.parent;if(n.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<r;e++)n+=t}return n}rawValue(e,t){let n=e[t],i=e.raws[t];return i&&i.value===n?i.raw:n}}},7088:(e,t,n)=>{"use strict";let i=n(1062);function r(e,t){new i(t).stringify(e)}e.exports=r,r.default=r},5513:e=>{"use strict";e.exports.isClean=Symbol("isClean"),e.exports.my=Symbol("my")},3852:e=>{"use strict";const t="'".charCodeAt(0),n='"'.charCodeAt(0),i="\\".charCodeAt(0),r="/".charCodeAt(0),s="\n".charCodeAt(0),o=" ".charCodeAt(0),a="\f".charCodeAt(0),l="\t".charCodeAt(0),c="\r".charCodeAt(0),h="[".charCodeAt(0),d="]".charCodeAt(0),u="(".charCodeAt(0),p=")".charCodeAt(0),m="{".charCodeAt(0),f="}".charCodeAt(0),g=";".charCodeAt(0),v="*".charCodeAt(0),y=":".charCodeAt(0),x="@".charCodeAt(0),b=/[\t\n\f\r "#'()/;[\\\]{}]/g,w=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,C=/.[\n"'(/\\]/,_=/[\da-f]/i;e.exports=function(e,A={}){let S,k,I,P,E,T,M,O,D,$,B=e.css.valueOf(),L=A.ignoreErrors,N=B.length,R=0,F=[],Z=[];function j(t){throw e.error("Unclosed "+t,R)}return{back:function(e){Z.push(e)},nextToken:function(e){if(Z.length)return Z.pop();if(R>=N)return;let A=!!e&&e.ignoreUnclosed;switch(S=B.charCodeAt(R),S){case s:case o:case l:case c:case a:k=R;do{k+=1,S=B.charCodeAt(k)}while(S===o||S===s||S===l||S===c||S===a);$=["space",B.slice(R,k)],R=k-1;break;case h:case d:case m:case f:case y:case g:case p:{let e=String.fromCharCode(S);$=[e,e,R];break}case u:if(O=F.length?F.pop()[1]:"",D=B.charCodeAt(R+1),"url"===O&&D!==t&&D!==n&&D!==o&&D!==s&&D!==l&&D!==a&&D!==c){k=R;do{if(T=!1,k=B.indexOf(")",k+1),-1===k){if(L||A){k=R;break}j("bracket")}for(M=k;B.charCodeAt(M-1)===i;)M-=1,T=!T}while(T);$=["brackets",B.slice(R,k+1),R,k],R=k}else k=B.indexOf(")",R+1),P=B.slice(R,k+1),-1===k||C.test(P)?$=["(","(",R]:($=["brackets",P,R,k],R=k);break;case t:case n:I=S===t?"'":'"',k=R;do{if(T=!1,k=B.indexOf(I,k+1),-1===k){if(L||A){k=R+1;break}j("string")}for(M=k;B.charCodeAt(M-1)===i;)M-=1,T=!T}while(T);$=["string",B.slice(R,k+1),R,k],R=k;break;case x:b.lastIndex=R+1,b.test(B),k=0===b.lastIndex?B.length-1:b.lastIndex-2,$=["at-word",B.slice(R,k+1),R,k],R=k;break;case i:for(k=R,E=!0;B.charCodeAt(k+1)===i;)k+=1,E=!E;if(S=B.charCodeAt(k+1),E&&S!==r&&S!==o&&S!==s&&S!==l&&S!==c&&S!==a&&(k+=1,_.test(B.charAt(k)))){for(;_.test(B.charAt(k+1));)k+=1;B.charCodeAt(k+1)===o&&(k+=1)}$=["word",B.slice(R,k+1),R,k],R=k;break;default:S===r&&B.charCodeAt(R+1)===v?(k=B.indexOf("*/",R+2)+1,0===k&&(L||A?k=B.length:j("comment")),$=["comment",B.slice(R,k+1),R,k],R=k):(w.lastIndex=R+1,w.test(B),k=0===w.lastIndex?B.length-1:w.lastIndex-2,$=["word",B.slice(R,k+1),R,k],F.push($),R=k)}return R++,$},endOfFile:function(){return 0===Z.length&&R>=N},position:function(){return R}}}},2448:e=>{"use strict";let t={};e.exports=function(e){t[e]||(t[e]=!0,"undefined"!=typeof console&&console.warn&&console.warn(e))}},1728:e=>{"use strict";class t{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.positionBy(t);this.line=e.line,this.column=e.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{plugin:this.plugin,index:this.index,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}e.exports=t,t.default=t},1036:(e,t,n)=>{const i=n(3719),r=n(2997),{isPlainObject:s}=n(977),o=n(9996),a=n(9430),{parse:l}=n(20),c=["img","audio","video","picture","svg","object","map","iframe","embed"],h=["script","style"];function d(e,t){e&&Object.keys(e).forEach((function(n){t(e[n],n)}))}function u(e,t){return{}.hasOwnProperty.call(e,t)}function p(e,t){const n=[];return d(e,(function(e){t(e)&&n.push(e)})),n}e.exports=f;const m=/^[^\0\t\n\f\r /<=>]+$/;function f(e,t,n){if(null==e)return"";let v="",y="";function x(e,t){const n=this;this.tag=e,this.attribs=t||{},this.tagPosition=v.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){E.length&&(E[E.length-1].text+=n.text)},this.updateParentNodeMediaChildren=function(){E.length&&c.includes(this.tag)&&E[E.length-1].mediaChildren.push(this.tag)}}(t=Object.assign({},f.defaults,t)).parser=Object.assign({},g,t.parser),h.forEach((function(e){t.allowedTags&&t.allowedTags.indexOf(e)>-1&&!t.allowVulnerableTags&&console.warn(`\n\n Your \`allowedTags\` option includes, \`${e}\`, which is inherently\nvulnerable to XSS attacks. Please remove it from \`allowedTags\`.\nOr, to disable this warning, add the \`allowVulnerableTags\` option\nand ensure you are accounting for this risk.\n\n`)}));const b=t.nonTextTags||["script","style","textarea","option"];let w,C;t.allowedAttributes&&(w={},C={},d(t.allowedAttributes,(function(e,t){w[t]=[];const n=[];e.forEach((function(e){"string"==typeof e&&e.indexOf("*")>=0?n.push(r(e).replace(/\\\*/g,".*")):w[t].push(e)})),n.length&&(C[t]=new RegExp("^("+n.join("|")+")$"))})));const _={},A={},S={};d(t.allowedClasses,(function(e,t){w&&(u(w,t)||(w[t]=[]),w[t].push("class")),_[t]=[],S[t]=[];const n=[];e.forEach((function(e){"string"==typeof e&&e.indexOf("*")>=0?n.push(r(e).replace(/\\\*/g,".*")):e instanceof RegExp?S[t].push(e):_[t].push(e)})),n.length&&(A[t]=new RegExp("^("+n.join("|")+")$"))}));const k={};let I,P,E,T,M,O,D;d(t.transformTags,(function(e,t){let n;"function"==typeof e?n=e:"string"==typeof e&&(n=f.simpleTransform(e)),"*"===t?I=n:k[t]=n}));let $=!1;L();const B=new i.Parser({onopentag:function(e,n){if(t.enforceHtmlBoundary&&"html"===e&&L(),O)return void D++;const i=new x(e,n);E.push(i);let r=!1;const c=!!i.text;let h;if(u(k,e)&&(h=k[e](e,n),i.attribs=n=h.attribs,void 0!==h.text&&(i.innerText=h.text),e!==h.tagName&&(i.name=e=h.tagName,M[P]=h.tagName)),I&&(h=I(e,n),i.attribs=n=h.attribs,e!==h.tagName&&(i.name=e=h.tagName,M[P]=h.tagName)),(t.allowedTags&&-1===t.allowedTags.indexOf(e)||"recursiveEscape"===t.disallowedTagsMode&&!function(e){for(const t in e)if(u(e,t))return!1;return!0}(T)||null!=t.nestingLimit&&P>=t.nestingLimit)&&(r=!0,T[P]=!0,"discard"===t.disallowedTagsMode&&-1!==b.indexOf(e)&&(O=!0,D=1),T[P]=!0),P++,r){if("discard"===t.disallowedTagsMode)return;y=v,v=""}v+="<"+e,"script"===e&&(t.allowedScriptHostnames||t.allowedScriptDomains)&&(i.innerText=""),(!w||u(w,e)||w["*"])&&d(n,(function(n,r){if(!m.test(r))return void delete i.attribs[r];let c,h=!1;if(!w||u(w,e)&&-1!==w[e].indexOf(r)||w["*"]&&-1!==w["*"].indexOf(r)||u(C,e)&&C[e].test(r)||C["*"]&&C["*"].test(r))h=!0;else if(w&&w[e])for(const t of w[e])if(s(t)&&t.name&&t.name===r){h=!0;let e="";if(!0===t.multiple){const i=n.split(" ");for(const n of i)-1!==t.values.indexOf(n)&&(""===e?e=n:e+=" "+n)}else t.values.indexOf(n)>=0&&(e=n);n=e}if(h){if(-1!==t.allowedSchemesAppliedToAttributes.indexOf(r)&&R(e,n))return void delete i.attribs[r];if("script"===e&&"src"===r){let e=!0;try{const i=new URL(n);if(t.allowedScriptHostnames||t.allowedScriptDomains){const n=(t.allowedScriptHostnames||[]).find((function(e){return e===i.hostname})),r=(t.allowedScriptDomains||[]).find((function(e){return i.hostname===e||i.hostname.endsWith(`.${e}`)}));e=n||r}}catch(t){e=!1}if(!e)return void delete i.attribs[r]}if("iframe"===e&&"src"===r){let e=!0;try{if((n=n.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//")).startsWith("relative:"))throw new Error("relative: exploit attempt");let i="relative://relative-site";for(let e=0;e<100;e++)i+=`/${e}`;const r=new URL(n,i);if(r&&"relative-site"===r.hostname&&"relative:"===r.protocol)e=u(t,"allowIframeRelativeUrls")?t.allowIframeRelativeUrls:!t.allowedIframeHostnames&&!t.allowedIframeDomains;else if(t.allowedIframeHostnames||t.allowedIframeDomains){const n=(t.allowedIframeHostnames||[]).find((function(e){return e===r.hostname})),i=(t.allowedIframeDomains||[]).find((function(e){return r.hostname===e||r.hostname.endsWith(`.${e}`)}));e=n||i}}catch(t){e=!1}if(!e)return void delete i.attribs[r]}if("srcset"===r)try{if(c=a(n),c.forEach((function(e){R("srcset",e.url)&&(e.evil=!0)})),c=p(c,(function(e){return!e.evil})),!c.length)return void delete i.attribs[r];n=p(c,(function(e){return!e.evil})).map((function(e){if(!e.url)throw new Error("URL missing");return e.url+(e.w?` ${e.w}w`:"")+(e.h?` ${e.h}h`:"")+(e.d?` ${e.d}x`:"")})).join(", "),i.attribs[r]=n}catch(e){return void delete i.attribs[r]}if("class"===r){const t=_[e],s=_["*"],a=A[e],l=S[e],c=[a,A["*"]].concat(l).filter((function(e){return e}));if(!(d=n,f=t&&s?o(t,s):t||s,g=c,n=f?(d=d.split(/\s+/)).filter((function(e){return-1!==f.indexOf(e)||g.some((function(t){return t.test(e)}))})).join(" "):d).length)return void delete i.attribs[r]}if("style"===r)try{if(0===(n=function(e){return e.nodes[0].nodes.reduce((function(e,t){return e.push(t.prop+":"+t.value),e}),[]).join(";")}(function(e,t){if(!t)return e;const n=e.nodes[0];let i;return i=t[n.selector]&&t["*"]?o(t[n.selector],t["*"]):t[n.selector]||t["*"],i&&(e.nodes[0].nodes=n.nodes.reduce(function(e){return function(t,n){return u(e,n.prop)&&e[n.prop].some((function(e){return e.test(n.value)}))&&t.push(n),t}}(i),[])),e}(l(e+" {"+n+"}"),t.allowedStyles))).length)return void delete i.attribs[r]}catch(e){return void delete i.attribs[r]}v+=" "+r,n&&n.length&&(v+='="'+N(n,!0)+'"')}else delete i.attribs[r];var d,f,g})),-1!==t.selfClosing.indexOf(e)?v+=" />":(v+=">",!i.innerText||c||t.textFilter||(v+=N(i.innerText),$=!0)),r&&(v=y+N(v),y="")},ontext:function(e){if(O)return;const n=E[E.length-1];let i;if(n&&(i=n.tag,e=void 0!==n.innerText?n.innerText:e),"discard"!==t.disallowedTagsMode||"script"!==i&&"style"!==i){const n=N(e,!1);t.textFilter&&!$?v+=t.textFilter(n,i):$||(v+=n)}else v+=e;E.length&&(E[E.length-1].text+=e)},onclosetag:function(e){if(O){if(D--,D)return;O=!1}const n=E.pop();if(!n)return;O=!!t.enforceHtmlBoundary&&"html"===e,P--;const i=T[P];if(i){if(delete T[P],"discard"===t.disallowedTagsMode)return void n.updateParentNodeText();y=v,v=""}M[P]&&(e=M[P],delete M[P]),t.exclusiveFilter&&t.exclusiveFilter(n)?v=v.substr(0,n.tagPosition):(n.updateParentNodeMediaChildren(),n.updateParentNodeText(),-1===t.selfClosing.indexOf(e)?(v+="</"+e+">",i&&(v=y+N(v),y="")):i&&(v=y,y=""))}},t.parser);return B.write(e),B.end(),v;function L(){v="",P=0,E=[],T={},M={},O=!1,D=0}function N(e,n){return"string"!=typeof e&&(e+=""),t.parser.decodeEntities&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),n&&(e=e.replace(/"/g,"&quot;"))),e=e.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),n&&(e=e.replace(/"/g,"&quot;")),e}function R(e,n){const i=(n=(n=n.replace(/[\x00-\x20]+/g,"")).replace(/<!--.*?-->/g,"")).match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!i)return!!n.match(/^[/\\]{2}/)&&!t.allowProtocolRelative;const r=i[1].toLowerCase();return u(t.allowedSchemesByTag,e)?-1===t.allowedSchemesByTag[e].indexOf(r):!t.allowedSchemes||-1===t.allowedSchemes.indexOf(r)}}const g={decodeEntities:!0};f.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1},f.simpleTransform=function(e,t,n){return n=void 0===n||n,t=t||{},function(i,r){let s;if(n)for(s in t)r[s]=t[s];else r=t;return{tagName:e,attribs:r}}}},2997:e=>{"use strict";e.exports=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}},977:(e,t)=>{"use strict";function n(e){return"[object Object]"===Object.prototype.toString.call(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isPlainObject=function(e){var t,i;return!1!==n(e)&&(void 0===(t=e.constructor)||!1!==n(i=t.prototype)&&!1!==i.hasOwnProperty("isPrototypeOf"))}},4670:(e,t,n)=>{"use strict";e.exports=n(5607)},9829:(e,t,n)=>{"use strict";var i,r,s,o=n(8946),a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function l(){s=!1}function c(e){if(e){if(e!==i){if(e.length!==a.length)throw new Error("Custom alphabet for shortid must be "+a.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,n){return t!==n.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+a.length+" unique characters. These characters were not unique: "+t.join(", "));i=e,l()}}else i!==a&&(i=a,l())}function h(){return s||(s=function(){i||c(a);for(var e,t=i.split(""),n=[],r=o.nextValue();t.length>0;)r=o.nextValue(),e=Math.floor(r*t.length),n.push(t.splice(e,1)[0]);return n.join("")}())}e.exports={get:function(){return i||a},characters:function(e){return c(e),i},seed:function(e){o.seed(e),r!==e&&(l(),r=e)},lookup:function(e){return h()[e]},shuffled:h}},480:(e,t,n)=>{"use strict";var i,r,s=n(8416);n(9829),e.exports=function(e){var t="",n=Math.floor(.001*(Date.now()-1567752802062));return n===r?i++:(i=0,r=n),t+=s(7),t+=s(e),i>0&&(t+=s(i)),t+s(n)}},8416:(e,t,n)=>{"use strict";var i=n(9829),r=n(3766),s=n(296);e.exports=function(e){for(var t,n=0,o="";!t;)o+=s(r,i.get(),1),t=e<Math.pow(16,n+1),n++;return o}},5607:(e,t,n)=>{"use strict";var i=n(9829),r=n(480),s=n(1082),o=n(5636)||0;function a(){return r(o)}e.exports=a,e.exports.generate=a,e.exports.seed=function(t){return i.seed(t),e.exports},e.exports.worker=function(t){return o=t,e.exports},e.exports.characters=function(e){return void 0!==e&&i.characters(e),i.shuffled()},e.exports.isValid=s},1082:(e,t,n)=>{"use strict";var i=n(9829);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6||new RegExp("[^"+i.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e))}},3766:e=>{"use strict";var t,n="object"==typeof window&&(window.crypto||window.msCrypto);t=n&&n.getRandomValues?function(e){return n.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],n=0;n<e;n++)t.push(Math.floor(256*Math.random()));return t},e.exports=t},8946:e=>{"use strict";var t=1;e.exports={nextValue:function(){return(t=(9301*t+49297)%233280)/233280},seed:function(e){t=e}}},5636:e=>{"use strict";e.exports=0},296:e=>{e.exports=function(e,t,n){for(var i=(2<<Math.log(t.length-1)/Math.LN2)-1,r=-~(1.6*i*n/t.length),s="";;)for(var o=e(r),a=r;a--;)if((s+=t[o[a]&i]||"").length===+n)return s}},4023:function(e){"undefined"!=typeof self&&self,e.exports=function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=22)}([function(e,t){function n(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var r=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(i);return[n].concat(i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}))).concat([r]).join("\n")}return[n].join("\n")}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=n(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var s=this[r][0];"number"==typeof s&&(i[s]=!0)}for(r=0;r<e.length;r++){var o=e[r];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){function i(e){for(var t=0;t<e.length;t++){var n=e[t],i=h[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(s(n.parts[r]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var o=[];for(r=0;r<n.parts.length;r++)o.push(s(n.parts[r]));h[n.id]={id:n.id,refs:1,parts:o}}}}function r(){var e=document.createElement("style");return e.type="text/css",d.appendChild(e),e}function s(e){var t,n,i=document.querySelector("style["+v+'~="'+e.id+'"]');if(i){if(m)return f;i.parentNode.removeChild(i)}if(y){var s=p++;i=u||(u=r()),t=o.bind(null,i,s,!1),n=o.bind(null,i,s,!0)}else i=r(),t=a.bind(null,i),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;t(e=i)}else n()}}function o(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=x(t,r);else{var s=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function a(e,t){var n=t.css,i=t.media,r=t.sourceMap;if(i&&e.setAttribute("media",i),g.ssrId&&e.setAttribute(v,t.id),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=n(26),h={},d=l&&(document.head||document.getElementsByTagName("head")[0]),u=null,p=0,m=!1,f=function(){},g=null,v="data-vue-ssr-id",y="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,n,r){m=n,g=r||{};var s=c(e,t);return i(s),function(t){for(var n=[],r=0;r<s.length;r++){var o=s[r];(a=h[o.id]).refs--,n.push(a)}for(t?i(s=c(e,t)):s=[],r=0;r<n.length;r++){var a;if(0===(a=n[r]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete h[a.id]}}}};var x=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e,t,n,i,r,s){var o,a=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(o=e,a=e.default);var c,h="function"==typeof a?a.options:a;if(t&&(h.render=t.render,h.staticRenderFns=t.staticRenderFns,h._compiled=!0),n&&(h.functional=!0),r&&(h._scopeId=r),s?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},h._ssrRegister=c):i&&(c=i),c){var d=h.functional,u=d?h.render:h.beforeCreate;d?(h._injectStyles=c,h.render=function(e,t){return c.call(t),u(e,t)}):h.beforeCreate=u?[].concat(u,c):[c]}return{esModule:o,exports:a,options:h}}},function(e,t,n){"use strict";function i(e,t){var n,i=e&&e.a;!(n=e&&e.hsl?(0,r.default)(e.hsl):e&&e.hex&&e.hex.length>0?(0,r.default)(e.hex):(0,r.default)(e))||void 0!==n._a&&null!==n._a||n.setAlpha(i||1);var s=n.toHsl(),o=n.toHsv();return 0===s.s&&(o.h=s.h=e.h||e.hsl&&e.hsl.h||t||0),{hsl:s,hex:n.toHexString().toUpperCase(),hex8:n.toHex8String().toUpperCase(),rgba:n.toRgb(),hsv:o,oldHue:e.h||t||s.h,source:e.source,a:e.a||n.getAlpha()}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(27));t.default={props:["value"],data:function(){return{val:i(this.value)}},computed:{colors:{get:function(){return this.val},set:function(e){this.val=e,this.$emit("input",e)}}},watch:{value:function(e){this.val=i(e)}},methods:{colorChange:function(e,t){this.oldHue=this.colors.hsl.h,this.colors=i(e,t||this.oldHue)},isValidHex:function(e){return(0,r.default)(e).isValid()},simpleCheckForValidColor:function(e){for(var t=["r","g","b","a","h","s","l","v"],n=0,i=0,r=0;r<t.length;r++){var s=t[r];e[s]&&(n++,isNaN(e[s])||i++)}if(n===i)return e},paletteUpperCase:function(e){return e.map((function(e){return e.toUpperCase()}))},isTransparent:function(e){return 0===(0,r.default)(e).getAlpha()}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),r=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);var o=n(30),a=!1,l=function(e){a||n(28)},c=n(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/common/EditableInput.vue",t.default=c.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),r=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);var o=n(45),a=!1,l=function(e){a||n(43)},c=n(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/common/Hue.vue",t.default=c.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),r=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);var o=n(60),a=!1,l=function(e){a||n(55)},c=n(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/common/Saturation.vue",t.default=c.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),r=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);var o=n(66),a=!1,l=function(e){a||n(61)},c=n(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/common/Alpha.vue",t.default=c.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(19),r=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);var o=n(65),a=!1,l=function(e){a||n(63)},c=n(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/common/Checkboard.vue",t.default=c.exports},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(3)),s=i(n(4)),o=["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#CCCCCC","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"];t.default={name:"Compact",mixins:[r.default],props:{palette:{type:Array,default:function(){return o}}},components:{"ed-in":s.default},computed:{pick:function(){return this.colors.hex.toUpperCase()}},methods:{handlerClick:function(e){this.colorChange({hex:e,source:"hex"})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"editableInput",props:{label:String,labelText:String,desc:String,value:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get:function(){return this.value},set:function(e){if(!(void 0!==this.max&&+e>this.max))return e;this.$refs.input.value=this.max}},labelId:function(){return"input__label__"+this.label+"__"+Math.random().toString().slice(2,5)},labelSpanText:function(){return this.labelText||this.label}},methods:{update:function(e){this.handleChange(e.target.value)},handleChange:function(e){var t={};t[this.label]=e,(void 0===t.hex&&void 0===t["#"]||e.length>5)&&this.$emit("change",t)},handleKeyDown:function(e){var t=this.val,n=Number(t);if(n){var i=this.arrowOffset||1;38===e.keyCode&&(t=n+i,this.handleChange(t),e.preventDefault()),40===e.keyCode&&(t=n-i,this.handleChange(t),e.preventDefault())}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(3)),r=["#FFFFFF","#F2F2F2","#E6E6E6","#D9D9D9","#CCCCCC","#BFBFBF","#B3B3B3","#A6A6A6","#999999","#8C8C8C","#808080","#737373","#666666","#595959","#4D4D4D","#404040","#333333","#262626","#0D0D0D","#000000"];t.default={name:"Grayscale",mixins:[i.default],props:{palette:{type:Array,default:function(){return r}}},components:{},computed:{pick:function(){return this.colors.hex.toUpperCase()}},methods:{handlerClick:function(e){this.colorChange({hex:e,source:"hex"})}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(4)),s=i(n(3));t.default={name:"Material",mixins:[s.default],components:{"ed-in":r.default},methods:{onChange:function(e){e&&(e.hex?this.isValidHex(e.hex)&&this.colorChange({hex:e.hex,source:"hex"}):(e.r||e.g||e.b)&&this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}))}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(3)),s=i(n(5));t.default={name:"Slider",mixins:[r.default],props:{swatches:{type:Array,default:function(){return[".80",".65",".50",".35",".20"]}}},components:{hue:s.default},computed:{activeOffset:function(){var e=this.swatches.includes("0"),t=this.swatches.includes("1"),n=this.colors.hsl;return Math.round(100*n.s)/100==.5?Math.round(100*n.l)/100:e&&0===n.l?0:t&&1===n.l?1:-1}},methods:{hueChange:function(e){this.colorChange(e)},handleSwClick:function(e,t){this.colorChange({h:this.colors.hsl.h,s:.5,l:t,source:"hsl"})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Hue",props:{value:Object,direction:{type:String,default:"horizontal"}},data:function(){return{oldHue:0,pullDirection:""}},computed:{colors:function(){var e=this.value.hsl.h;return 0!==e&&e-this.oldHue>0&&(this.pullDirection="right"),0!==e&&e-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=e,this.value},directionClass:function(){return{"vc-hue--horizontal":"horizontal"===this.direction,"vc-hue--vertical":"vertical"===this.direction}},pointerTop:function(){return"vertical"===this.direction?0===this.colors.hsl.h&&"right"===this.pullDirection?0:-100*this.colors.hsl.h/360+100+"%":0},pointerLeft:function(){return"vertical"===this.direction?0:0===this.colors.hsl.h&&"right"===this.pullDirection?"100%":100*this.colors.hsl.h/360+"%"}},methods:{handleChange:function(e,t){!t&&e.preventDefault();var n,i=this.$refs.container,r=i.clientWidth,s=i.clientHeight,o=i.getBoundingClientRect().left+window.pageXOffset,a=i.getBoundingClientRect().top+window.pageYOffset,l=(e.pageX||(e.touches?e.touches[0].pageX:0))-o,c=(e.pageY||(e.touches?e.touches[0].pageY:0))-a;"vertical"===this.direction?(n=c<0?360:c>s?0:360*(-100*c/s+100)/100,this.colors.hsl.h!==n&&this.$emit("change",{h:n,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(n=l<0?0:l>r?360:100*l/r*360/100,this.colors.hsl.h!==n&&this.$emit("change",{h:n,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))},handleMouseDown:function(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp:function(e){this.unbindEventListeners()},unbindEventListeners:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(50)),s=i(n(3)),o=["red","pink","purple","deepPurple","indigo","blue","lightBlue","cyan","teal","green","lightGreen","lime","yellow","amber","orange","deepOrange","brown","blueGrey","black"],a=["900","700","500","300","100"],l=function(){var e=[];return o.forEach((function(t){var n=[];"black"===t.toLowerCase()||"white"===t.toLowerCase()?n=n.concat(["#000000","#FFFFFF"]):a.forEach((function(e){var i=r.default[t][e];n.push(i.toUpperCase())})),e.push(n)})),e}();t.default={name:"Swatches",mixins:[s.default],props:{palette:{type:Array,default:function(){return l}}},computed:{pick:function(){return this.colors.hex}},methods:{equal:function(e){return e.toLowerCase()===this.colors.hex.toLowerCase()},handlerClick:function(e){this.colorChange({hex:e,source:"hex"})}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(3)),s=i(n(4)),o=i(n(6)),a=i(n(5)),l=i(n(7));t.default={name:"Photoshop",mixins:[r.default],props:{head:{type:String,default:"Color Picker"},disableFields:{type:Boolean,default:!1},hasResetButton:{type:Boolean,default:!1},acceptLabel:{type:String,default:"OK"},cancelLabel:{type:String,default:"Cancel"},resetLabel:{type:String,default:"Reset"},newLabel:{type:String,default:"new"},currentLabel:{type:String,default:"current"}},components:{saturation:o.default,hue:a.default,alpha:l.default,"ed-in":s.default},data:function(){return{currentColor:"#FFF"}},computed:{hsv:function(){var e=this.colors.hsv;return{h:e.h.toFixed(),s:(100*e.s).toFixed(),v:(100*e.v).toFixed()}},hex:function(){var e=this.colors.hex;return e&&e.replace("#","")}},created:function(){this.currentColor=this.colors.hex},methods:{childChange:function(e){this.colorChange(e)},inputChange:function(e){e&&(e["#"]?this.isValidHex(e["#"])&&this.colorChange({hex:e["#"],source:"hex"}):e.r||e.g||e.b||e.a?this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}):(e.h||e.s||e.v)&&this.colorChange({h:e.h||this.colors.hsv.h,s:e.s/100||this.colors.hsv.s,v:e.v/100||this.colors.hsv.v,source:"hsv"}))},clickCurrentColor:function(){this.colorChange({hex:this.currentColor,source:"hex"})},handleAccept:function(){this.$emit("ok")},handleCancel:function(){this.$emit("cancel")},handleReset:function(){this.$emit("reset")}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(57)),s=i(n(58));t.default={name:"Saturation",props:{value:Object},computed:{colors:function(){return this.value},bgColor:function(){return"hsl("+this.colors.hsv.h+", 100%, 50%)"},pointerTop:function(){return-100*this.colors.hsv.v+1+100+"%"},pointerLeft:function(){return 100*this.colors.hsv.s+"%"}},methods:{throttle:(0,s.default)((function(e,t){e(t)}),20,{leading:!0,trailing:!1}),handleChange:function(e,t){!t&&e.preventDefault();var n=this.$refs.container,i=n.clientWidth,s=n.clientHeight,o=n.getBoundingClientRect().left+window.pageXOffset,a=n.getBoundingClientRect().top+window.pageYOffset,l=e.pageX||(e.touches?e.touches[0].pageX:0),c=e.pageY||(e.touches?e.touches[0].pageY:0),h=(0,r.default)(l-o,0,i),d=(0,r.default)(c-a,0,s),u=h/i,p=(0,r.default)(-d/s+1,0,1);this.throttle(this.onChange,{h:this.colors.hsv.h,s:u,v:p,a:this.colors.hsv.a,source:"hsva"})},onChange:function(e){this.$emit("change",e)},handleMouseDown:function(e){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp:function(e){this.unbindEventListeners()},unbindEventListeners:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(8));t.default={name:"Alpha",props:{value:Object,onChange:Function},components:{checkboard:i.default},computed:{colors:function(){return this.value},gradientColor:function(){var e=this.colors.rgba,t=[e.r,e.g,e.b].join(",");return"linear-gradient(to right, rgba("+t+", 0) 0%, rgba("+t+", 1) 100%)"}},methods:{handleChange:function(e,t){!t&&e.preventDefault();var n,i=this.$refs.container,r=i.clientWidth,s=i.getBoundingClientRect().left+window.pageXOffset,o=(e.pageX||(e.touches?e.touches[0].pageX:0))-s;n=o<0?0:o>r?1:Math.round(100*o/r)/100,this.colors.a!==n&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:n,source:"rgba"})},handleMouseDown:function(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp:function(){this.unbindEventListeners()},unbindEventListeners:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}}},function(e,t,n){"use strict";function i(e,t,n){var i=e+","+t+","+n;if(r[i])return r[i];var s=function(e,t,n){if("undefined"==typeof document)return null;var i=document.createElement("canvas");i.width=i.height=2*n;var r=i.getContext("2d");return r?(r.fillStyle=e,r.fillRect(0,0,i.width,i.height),r.fillStyle=t,r.fillRect(0,0,n,n),r.translate(n,n),r.fillRect(0,0,n,n),i.toDataURL()):null}(e,t,n);return r[i]=s,s}Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default={name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle:function(){return{"background-image":"url("+i(this.white,this.grey,this.size)+")"}}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(3)),s=i(n(4)),o=i(n(6)),a=i(n(5)),l=i(n(7)),c=i(n(8)),h=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF","rgba(0,0,0,0)"];t.default={name:"Sketch",mixins:[r.default],components:{saturation:o.default,hue:a.default,alpha:l.default,"ed-in":s.default,checkboard:c.default},props:{presetColors:{type:Array,default:function(){return h}},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},computed:{hex:function(){return(this.colors.a<1?this.colors.hex8:this.colors.hex).replace("#","")},activeColor:function(){var e=this.colors.rgba;return"rgba("+[e.r,e.g,e.b,e.a].join(",")+")"}},methods:{handlePreset:function(e){this.colorChange({hex:e,source:"hex"})},childChange:function(e){this.colorChange(e)},inputChange:function(e){e&&(e.hex?this.isValidHex(e.hex)&&this.colorChange({hex:e.hex,source:"hex"}):(e.r||e.g||e.b||e.a)&&this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}))}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(3)),s=i(n(4)),o=i(n(6)),a=i(n(5)),l=i(n(7)),c=i(n(8));t.default={name:"Chrome",mixins:[r.default],props:{disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},components:{saturation:o.default,hue:a.default,alpha:l.default,"ed-in":s.default,checkboard:c.default},data:function(){return{fieldsIndex:0,highlight:!1}},computed:{hsl:function(){var e=this.colors.hsl,t=e.h,n=e.s,i=e.l;return{h:t.toFixed(),s:(100*n).toFixed()+"%",l:(100*i).toFixed()+"%"}},activeColor:function(){var e=this.colors.rgba;return"rgba("+[e.r,e.g,e.b,e.a].join(",")+")"},hasAlpha:function(){return this.colors.a<1}},methods:{childChange:function(e){this.colorChange(e)},inputChange:function(e){if(e)if(e.hex)this.isValidHex(e.hex)&&this.colorChange({hex:e.hex,source:"hex"});else if(e.r||e.g||e.b||e.a)this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"});else if(e.h||e.s||e.l){var t=e.s?e.s.replace("%","")/100:this.colors.hsl.s,n=e.l?e.l.replace("%","")/100:this.colors.hsl.l;this.colorChange({h:e.h||this.colors.hsl.h,s:t,l:n,source:"hsl"})}},toggleViews:function(){this.fieldsIndex>=2?this.fieldsIndex=0:this.fieldsIndex++},showHighlight:function(){this.highlight=!0},hideHighlight:function(){this.highlight=!1}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(23)),s=i(n(32)),o=i(n(36)),a=i(n(40)),l=i(n(47)),c=i(n(52)),h=i(n(68)),d=i(n(72)),u=i(n(7)),p=i(n(8)),m=i(n(4)),f=i(n(5)),g=i(n(6)),v=i(n(3)),y={version:"2.7.0",Compact:r.default,Grayscale:s.default,Material:o.default,Slider:a.default,Swatches:l.default,Photoshop:c.default,Sketch:h.default,Chrome:d.default,Alpha:u.default,Checkboard:p.default,EditableInput:m.default,Hue:f.default,Saturation:g.default,ColorMixin:v.default};e.exports=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),r=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);var o=n(31),a=!1,l=function(e){a||n(24)},c=n(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Compact.vue",t.default=c.exports},function(e,t,n){var i=n(25);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),n(1)("6ce8a5a8",i,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-compact {\n  padding-top: 5px;\n  padding-left: 5px;\n  width: 240px;\n  border-radius: 2px;\n  box-shadow: 0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16);\n  background-color: #fff;\n}\n.vc-compact-colors {\n  overflow: hidden;\n  padding: 0;\n  margin: 0;\n}\n.vc-compact-color-item {\n  list-style: none;\n  width: 15px;\n  height: 15px;\n  float: left;\n  margin-right: 5px;\n  margin-bottom: 5px;\n  position: relative;\n  cursor: pointer;\n}\n.vc-compact-color-item--white {\n  box-shadow: inset 0 0 0 1px #ddd;\n}\n.vc-compact-color-item--white .vc-compact-dot {\n  background: #000;\n}\n.vc-compact-dot {\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  bottom: 5px;\n  left: 5px;\n  border-radius: 50%;\n  opacity: 1;\n  background: #fff;\n}\n",""])},function(e,t){e.exports=function(e,t){for(var n=[],i={},r=0;r<t.length;r++){var s=t[r],o=s[0],a={id:e+":"+r,css:s[1],media:s[2],sourceMap:s[3]};i[o]?i[o].parts.push(a):n.push(i[o]={id:o,parts:[a]})}return n}},function(e,t,n){var i;!function(r){function s(e,t){if(t=t||{},(e=e||"")instanceof s)return e;if(!(this instanceof s))return new s(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,i=null,r=null,s=null,o=!1,a=!1;return"string"==typeof e&&(e=function(e){e=e.replace(D,"").replace($,"").toLowerCase();var t,n=!1;if(Z[e])e=Z[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=z.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=z.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=z.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=z.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=z.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=z.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=z.hex8.exec(e))?{r:I(t[1]),g:I(t[2]),b:I(t[3]),a:M(t[4]),format:n?"name":"hex8"}:(t=z.hex6.exec(e))?{r:I(t[1]),g:I(t[2]),b:I(t[3]),format:n?"name":"hex"}:(t=z.hex4.exec(e))?{r:I(t[1]+""+t[1]),g:I(t[2]+""+t[2]),b:I(t[3]+""+t[3]),a:M(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=z.hex3.exec(e))&&{r:I(t[1]+""+t[1]),g:I(t[2]+""+t[2]),b:I(t[3]+""+t[3]),format:n?"name":"hex"}}(e)),"object"==typeof e&&(O(e.r)&&O(e.g)&&O(e.b)?(t=function(e,t,n){return{r:255*S(e,255),g:255*S(t,255),b:255*S(n,255)}}(e.r,e.g,e.b),o=!0,a="%"===String(e.r).substr(-1)?"prgb":"rgb"):O(e.h)&&O(e.s)&&O(e.v)?(i=E(e.s),r=E(e.v),t=l(e.h,i,r),o=!0,a="hsv"):O(e.h)&&O(e.s)&&O(e.l)&&(i=E(e.s),s=E(e.l),t=function(e,t,n){function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var r,s,o;if(e=S(e,360),t=S(t,100),n=S(n,100),0===t)r=s=o=n;else{var a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;r=i(l,a,e+1/3),s=i(l,a,e),o=i(l,a,e-1/3)}return{r:255*r,g:255*s,b:255*o}}(e.h,i,s),o=!0,a="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=A(n),{ok:o,format:e.format||a,r:N(255,R(t.r,0)),g:N(255,R(t.g,0)),b:N(255,R(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=L(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=L(this._r)),this._g<1&&(this._g=L(this._g)),this._b<1&&(this._b=L(this._b)),this._ok=n.ok,this._tc_id=B++}function o(e,t,n){e=S(e,255),t=S(t,255),n=S(n,255);var i,r,s=R(e,t,n),o=N(e,t,n),a=(s+o)/2;if(s==o)i=r=0;else{var l=s-o;switch(r=a>.5?l/(2-s-o):l/(s+o),s){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:r,l:a}}function a(e,t,n){e=S(e,255),t=S(t,255),n=S(n,255);var i,r,s=R(e,t,n),o=N(e,t,n),a=s,l=s-o;if(r=0===s?0:l/s,s==o)i=0;else{switch(s){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:r,v:a}}function l(e,t,n){e=6*S(e,360),t=S(t,100),n=S(n,100);var i=r.floor(e),s=e-i,o=n*(1-t),a=n*(1-s*t),l=n*(1-(1-s)*t),c=i%6;return{r:255*[n,a,o,o,l,n][c],g:255*[l,n,n,a,o,o][c],b:255*[o,o,l,n,n,a][c]}}function c(e,t,n,i){var r=[P(L(e).toString(16)),P(L(t).toString(16)),P(L(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function h(e,t,n,i){return[P(T(i)),P(L(e).toString(16)),P(L(t).toString(16)),P(L(n).toString(16))].join("")}function d(e,t){t=0===t?0:t||10;var n=s(e).toHsl();return n.s-=t/100,n.s=k(n.s),s(n)}function u(e,t){t=0===t?0:t||10;var n=s(e).toHsl();return n.s+=t/100,n.s=k(n.s),s(n)}function p(e){return s(e).desaturate(100)}function m(e,t){t=0===t?0:t||10;var n=s(e).toHsl();return n.l+=t/100,n.l=k(n.l),s(n)}function f(e,t){t=0===t?0:t||10;var n=s(e).toRgb();return n.r=R(0,N(255,n.r-L(-t/100*255))),n.g=R(0,N(255,n.g-L(-t/100*255))),n.b=R(0,N(255,n.b-L(-t/100*255))),s(n)}function g(e,t){t=0===t?0:t||10;var n=s(e).toHsl();return n.l-=t/100,n.l=k(n.l),s(n)}function v(e,t){var n=s(e).toHsl(),i=(n.h+t)%360;return n.h=i<0?360+i:i,s(n)}function y(e){var t=s(e).toHsl();return t.h=(t.h+180)%360,s(t)}function x(e){var t=s(e).toHsl(),n=t.h;return[s(e),s({h:(n+120)%360,s:t.s,l:t.l}),s({h:(n+240)%360,s:t.s,l:t.l})]}function b(e){var t=s(e).toHsl(),n=t.h;return[s(e),s({h:(n+90)%360,s:t.s,l:t.l}),s({h:(n+180)%360,s:t.s,l:t.l}),s({h:(n+270)%360,s:t.s,l:t.l})]}function w(e){var t=s(e).toHsl(),n=t.h;return[s(e),s({h:(n+72)%360,s:t.s,l:t.l}),s({h:(n+216)%360,s:t.s,l:t.l})]}function C(e,t,n){t=t||6,n=n||30;var i=s(e).toHsl(),r=360/n,o=[s(e)];for(i.h=(i.h-(r*t>>1)+720)%360;--t;)i.h=(i.h+r)%360,o.push(s(i));return o}function _(e,t){t=t||6;for(var n=s(e).toHsv(),i=n.h,r=n.s,o=n.v,a=[],l=1/t;t--;)a.push(s({h:i,s:r,v:o})),o=(o+l)%1;return a}function A(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function S(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=N(t,R(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),r.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function k(e){return N(1,R(0,e))}function I(e){return parseInt(e,16)}function P(e){return 1==e.length?"0"+e:""+e}function E(e){return e<=1&&(e=100*e+"%"),e}function T(e){return r.round(255*parseFloat(e)).toString(16)}function M(e){return I(e)/255}function O(e){return!!z.CSS_UNIT.exec(e)}var D=/^\s+/,$=/\s+$/,B=0,L=r.round,N=r.min,R=r.max,F=r.random;s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,i=this.toRgb();return e=i.r/255,t=i.g/255,n=i.b/255,.2126*(e<=.03928?e/12.92:r.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:r.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:r.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=A(e),this._roundA=L(100*this._a)/100,this},toHsv:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=a(this._r,this._g,this._b),t=L(360*e.h),n=L(100*e.s),i=L(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=o(this._r,this._g,this._b),t=L(360*e.h),n=L(100*e.s),i=L(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return c(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,i,r){var s=[P(L(e).toString(16)),P(L(t).toString(16)),P(L(n).toString(16)),P(T(i))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:L(this._r),g:L(this._g),b:L(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+L(this._r)+", "+L(this._g)+", "+L(this._b)+")":"rgba("+L(this._r)+", "+L(this._g)+", "+L(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:L(100*S(this._r,255))+"%",g:L(100*S(this._g,255))+"%",b:L(100*S(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+L(100*S(this._r,255))+"%, "+L(100*S(this._g,255))+"%, "+L(100*S(this._b,255))+"%)":"rgba("+L(100*S(this._r,255))+"%, "+L(100*S(this._g,255))+"%, "+L(100*S(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(j[c(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+h(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var r=s(e);n="#"+h(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0;return t||!i||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return s(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(f,arguments)},darken:function(){return this._applyModification(g,arguments)},desaturate:function(){return this._applyModification(d,arguments)},saturate:function(){return this._applyModification(u,arguments)},greyscale:function(){return this._applyModification(p,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(C,arguments)},complement:function(){return this._applyCombination(y,arguments)},monochromatic:function(){return this._applyCombination(_,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(x,arguments)},tetrad:function(){return this._applyCombination(b,arguments)}},s.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]="a"===i?e[i]:E(e[i]));e=n}return s(e,t)},s.equals=function(e,t){return!(!e||!t)&&s(e).toRgbString()==s(t).toRgbString()},s.random=function(){return s.fromRatio({r:F(),g:F(),b:F()})},s.mix=function(e,t,n){n=0===n?0:n||50;var i=s(e).toRgb(),r=s(t).toRgb(),o=n/100;return s({r:(r.r-i.r)*o+i.r,g:(r.g-i.g)*o+i.g,b:(r.b-i.b)*o+i.b,a:(r.a-i.a)*o+i.a})},s.readability=function(e,t){var n=s(e),i=s(t);return(r.max(n.getLuminance(),i.getLuminance())+.05)/(r.min(n.getLuminance(),i.getLuminance())+.05)},s.isReadable=function(e,t,n){var i,r,o=s.readability(e,t);switch(r=!1,(i=function(e){var t,n;return"AA"!==(t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==t&&(t="AA"),"small"!==(n=(e.size||"small").toLowerCase())&&"large"!==n&&(n="small"),{level:t,size:n}}(n)).level+i.size){case"AAsmall":case"AAAlarge":r=o>=4.5;break;case"AAlarge":r=o>=3;break;case"AAAsmall":r=o>=7}return r},s.mostReadable=function(e,t,n){var i,r,o,a,l=null,c=0;r=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var h=0;h<t.length;h++)(i=s.readability(e,t[h]))>c&&(c=i,l=s(t[h]));return s.isReadable(e,l,{level:o,size:a})||!r?l:(n.includeFallbackColors=!1,s.mostReadable(e,["#fff","#000"],n))};var Z=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},j=s.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(Z),z=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();void 0!==e&&e.exports?e.exports=s:void 0!==(i=function(){return s}.call(t,n,t,e))&&(e.exports=i)}(Math)},function(e,t,n){var i=n(29);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),n(1)("0f73e73c",i,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-editable-input {\n  position: relative;\n}\n.vc-input__input {\n  padding: 0;\n  border: 0;\n  outline: none;\n}\n.vc-input__label {\n  text-transform: capitalize;\n}\n",""])},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vc-editable-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.val,expression:"val"}],ref:"input",staticClass:"vc-input__input",attrs:{"aria-labelledby":e.labelId},domProps:{value:e.val},on:{keydown:e.handleKeyDown,input:[function(t){t.target.composing||(e.val=t.target.value)},e.update]}}),e._v(" "),n("span",{staticClass:"vc-input__label",attrs:{for:e.label,id:e.labelId}},[e._v(e._s(e.labelSpanText))]),e._v(" "),n("span",{staticClass:"vc-input__desc"},[e._v(e._s(e.desc))])])};i._withStripped=!0;var r={render:i,staticRenderFns:[]};t.a=r},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vc-compact",attrs:{role:"application","aria-label":"Compact color picker"}},[n("ul",{staticClass:"vc-compact-colors",attrs:{role:"listbox"}},e._l(e.paletteUpperCase(e.palette),(function(t){return n("li",{key:t,staticClass:"vc-compact-color-item",class:{"vc-compact-color-item--white":"#FFFFFF"===t},style:{background:t},attrs:{role:"option","aria-label":"color:"+t,"aria-selected":t===e.pick},on:{click:function(n){e.handlerClick(t)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t===e.pick,expression:"c === pick"}],staticClass:"vc-compact-dot"})])})))])};i._withStripped=!0;var r={render:i,staticRenderFns:[]};t.a=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),r=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);var o=n(35),a=!1,l=function(e){a||n(33)},c=n(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Grayscale.vue",t.default=c.exports},function(e,t,n){var i=n(34);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),n(1)("21ddbb74",i,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-grayscale {\n  width: 125px;\n  border-radius: 2px;\n  box-shadow: 0 2px 15px rgba(0,0,0,.12), 0 2px 10px rgba(0,0,0,.16);\n  background-color: #fff;\n}\n.vc-grayscale-colors {\n  border-radius: 2px;\n  overflow: hidden;\n  padding: 0;\n  margin: 0;\n}\n.vc-grayscale-color-item {\n  list-style: none;\n  width: 25px;\n  height: 25px;\n  float: left;\n  position: relative;\n  cursor: pointer;\n}\n.vc-grayscale-color-item--white .vc-grayscale-dot {\n  background: #000;\n}\n.vc-grayscale-dot {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 6px;\n  height: 6px;\n  margin: -3px 0 0 -2px;\n  border-radius: 50%;\n  opacity: 1;\n  background: #fff;\n}\n",""])},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vc-grayscale",attrs:{role:"application","aria-label":"Grayscale color picker"}},[n("ul",{staticClass:"vc-grayscale-colors",attrs:{role:"listbox"}},e._l(e.paletteUpperCase(e.palette),(function(t){return n("li",{key:t,staticClass:"vc-grayscale-color-item",class:{"vc-grayscale-color-item--white":"#FFFFFF"==t},style:{background:t},attrs:{role:"option","aria-label":"Color:"+t,"aria-selected":t===e.pick},on:{click:function(n){e.handlerClick(t)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t===e.pick,expression:"c === pick"}],staticClass:"vc-grayscale-dot"})])})))])};i._withStripped=!0;var r={render:i,staticRenderFns:[]};t.a=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),r=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);var o=n(39),a=!1,l=function(e){a||n(37)},c=n(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Material.vue",t.default=c.exports},function(e,t,n){var i=n(38);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),n(1)("1ff3af73",i,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,'\n.vc-material {\n  width: 98px;\n  height: 98px;\n  padding: 16px;\n  font-family: "Roboto";\n  position: relative;\n  border-radius: 2px;\n  box-shadow: 0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16);\n  background-color: #fff;\n}\n.vc-material .vc-input__input {\n  width: 100%;\n  margin-top: 12px;\n  font-size: 15px;\n  color: #333;\n  height: 30px;\n}\n.vc-material .vc-input__label {\n  position: absolute;\n  top: 0;\n  left: 0;\n  font-size: 11px;\n  color: #999;\n  text-transform: capitalize;\n}\n.vc-material-hex {\n  border-bottom-width: 2px;\n  border-bottom-style: solid;\n}\n.vc-material-split {\n  display: flex;\n  margin-right: -10px;\n  padding-top: 11px;\n}\n.vc-material-third {\n  flex: 1;\n  padding-right: 10px;\n}\n',""])},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vc-material",attrs:{role:"application","aria-label":"Material color picker"}},[n("ed-in",{staticClass:"vc-material-hex",style:{borderColor:e.colors.hex},attrs:{label:"hex"},on:{change:e.onChange},model:{value:e.colors.hex,callback:function(t){e.$set(e.colors,"hex",t)},expression:"colors.hex"}}),e._v(" "),n("div",{staticClass:"vc-material-split"},[n("div",{staticClass:"vc-material-third"},[n("ed-in",{attrs:{label:"r"},on:{change:e.onChange},model:{value:e.colors.rgba.r,callback:function(t){e.$set(e.colors.rgba,"r",t)},expression:"colors.rgba.r"}})],1),e._v(" "),n("div",{staticClass:"vc-material-third"},[n("ed-in",{attrs:{label:"g"},on:{change:e.onChange},model:{value:e.colors.rgba.g,callback:function(t){e.$set(e.colors.rgba,"g",t)},expression:"colors.rgba.g"}})],1),e._v(" "),n("div",{staticClass:"vc-material-third"},[n("ed-in",{attrs:{label:"b"},on:{change:e.onChange},model:{value:e.colors.rgba.b,callback:function(t){e.$set(e.colors.rgba,"b",t)},expression:"colors.rgba.b"}})],1)])],1)};i._withStripped=!0;var r={render:i,staticRenderFns:[]};t.a=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),r=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);var o=n(46),a=!1,l=function(e){a||n(41)},c=n(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Slider.vue",t.default=c.exports},function(e,t,n){var i=n(42);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),n(1)("7982aa43",i,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-slider {\n  position: relative;\n  width: 410px;\n}\n.vc-slider-hue-warp {\n  height: 12px;\n  position: relative;\n}\n.vc-slider-hue-warp .vc-hue-picker {\n  width: 14px;\n  height: 14px;\n  border-radius: 6px;\n  transform: translate(-7px, -2px);\n  background-color: rgb(248, 248, 248);\n  box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.37);\n}\n.vc-slider-swatches {\n  display: flex;\n  margin-top: 20px;\n}\n.vc-slider-swatch {\n  margin-right: 1px;\n  flex: 1;\n  width: 20%;\n}\n.vc-slider-swatch:first-child {\n  margin-right: 1px;\n}\n.vc-slider-swatch:first-child .vc-slider-swatch-picker {\n  border-radius: 2px 0px 0px 2px;\n}\n.vc-slider-swatch:last-child {\n  margin-right: 0;\n}\n.vc-slider-swatch:last-child .vc-slider-swatch-picker {\n  border-radius: 0px 2px 2px 0px;\n}\n.vc-slider-swatch-picker {\n  cursor: pointer;\n  height: 12px;\n}\n.vc-slider-swatch-picker--active {\n  transform: scaleY(1.8);\n  border-radius: 3.6px/2px;\n}\n.vc-slider-swatch-picker--white {\n  box-shadow: inset 0 0 0 1px #ddd;\n}\n.vc-slider-swatch-picker--active.vc-slider-swatch-picker--white {\n  box-shadow: inset 0 0 0 0.6px #ddd;\n}\n",""])},function(e,t,n){var i=n(44);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),n(1)("7c5f1a1c",i,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-hue {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  border-radius: 2px;\n}\n.vc-hue--horizontal {\n  background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n}\n.vc-hue--vertical {\n  background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n}\n.vc-hue-container {\n  cursor: pointer;\n  margin: 0 2px;\n  position: relative;\n  height: 100%;\n}\n.vc-hue-pointer {\n  z-index: 2;\n  position: absolute;\n}\n.vc-hue-picker {\n  cursor: pointer;\n  margin-top: 1px;\n  width: 4px;\n  border-radius: 1px;\n  height: 8px;\n  box-shadow: 0 0 2px rgba(0, 0, 0, .6);\n  background: #fff;\n  transform: translateX(-2px) ;\n}\n",""])},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["vc-hue",e.directionClass]},[n("div",{ref:"container",staticClass:"vc-hue-container",attrs:{role:"slider","aria-valuenow":e.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360"},on:{mousedown:e.handleMouseDown,touchmove:e.handleChange,touchstart:e.handleChange}},[n("div",{staticClass:"vc-hue-pointer",style:{top:e.pointerTop,left:e.pointerLeft},attrs:{role:"presentation"}},[n("div",{staticClass:"vc-hue-picker"})])])])};i._withStripped=!0;var r={render:i,staticRenderFns:[]};t.a=r},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vc-slider",attrs:{role:"application","aria-label":"Slider color picker"}},[n("div",{staticClass:"vc-slider-hue-warp"},[n("hue",{on:{change:e.hueChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),n("div",{staticClass:"vc-slider-swatches",attrs:{role:"group"}},e._l(e.swatches,(function(t,i){return n("div",{key:i,staticClass:"vc-slider-swatch",attrs:{"data-index":i,"aria-label":"color:"+e.colors.hex,role:"button"},on:{click:function(n){e.handleSwClick(i,t)}}},[n("div",{staticClass:"vc-slider-swatch-picker",class:{"vc-slider-swatch-picker--active":t==e.activeOffset,"vc-slider-swatch-picker--white":"1"===t},style:{background:"hsl("+e.colors.hsl.h+", 50%, "+100*t+"%)"}})])})))])};i._withStripped=!0;var r={render:i,staticRenderFns:[]};t.a=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),r=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);var o=n(51),a=!1,l=function(e){a||n(48)},c=n(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Swatches.vue",t.default=c.exports},function(e,t,n){var i=n(49);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),n(1)("10f839a2",i,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-swatches {\n  width: 320px;\n  height: 240px;\n  overflow-y: scroll;\n  background-color: #fff;\n  box-shadow: 0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16);\n}\n.vc-swatches-box {\n  padding: 16px 0 6px 16px;\n  overflow: hidden;\n}\n.vc-swatches-color-group {\n  padding-bottom: 10px;\n  width: 40px;\n  float: left;\n  margin-right: 10px;\n}\n.vc-swatches-color-it {\n  box-sizing: border-box;\n  width: 40px;\n  height: 24px;\n  cursor: pointer;\n  background: #880e4f;\n  margin-bottom: 1px;\n  overflow: hidden;\n  -ms-border-radius: 2px 2px 0 0;\n  -moz-border-radius: 2px 2px 0 0;\n  -o-border-radius: 2px 2px 0 0;\n  -webkit-border-radius: 2px 2px 0 0;\n  border-radius: 2px 2px 0 0;\n}\n.vc-swatches-color--white {\n  border: 1px solid #DDD;\n}\n.vc-swatches-pick {\n  fill: rgb(255, 255, 255);\n  margin-left: 8px;\n  display: block;\n}\n.vc-swatches-color--white .vc-swatches-pick {\n  fill: rgb(51, 51, 51);\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"red",(function(){return i})),n.d(t,"pink",(function(){return r})),n.d(t,"purple",(function(){return s})),n.d(t,"deepPurple",(function(){return o})),n.d(t,"indigo",(function(){return a})),n.d(t,"blue",(function(){return l})),n.d(t,"lightBlue",(function(){return c})),n.d(t,"cyan",(function(){return h})),n.d(t,"teal",(function(){return d})),n.d(t,"green",(function(){return u})),n.d(t,"lightGreen",(function(){return p})),n.d(t,"lime",(function(){return m})),n.d(t,"yellow",(function(){return f})),n.d(t,"amber",(function(){return g})),n.d(t,"orange",(function(){return v})),n.d(t,"deepOrange",(function(){return y})),n.d(t,"brown",(function(){return x})),n.d(t,"grey",(function(){return b})),n.d(t,"blueGrey",(function(){return w})),n.d(t,"darkText",(function(){return C})),n.d(t,"lightText",(function(){return _})),n.d(t,"darkIcons",(function(){return A})),n.d(t,"lightIcons",(function(){return S})),n.d(t,"white",(function(){return k})),n.d(t,"black",(function(){return I}));var i={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},r={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},s={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},o={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},a={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},l={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},c={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},h={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},d={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},u={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},p={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},m={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},f={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},g={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},v={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},y={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},x={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},b={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},w={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},C={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},_={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},A={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},S={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},k="#ffffff",I="#000000";t.default={red:i,pink:r,purple:s,deepPurple:o,indigo:a,blue:l,lightBlue:c,cyan:h,teal:d,green:u,lightGreen:p,lime:m,yellow:f,amber:g,orange:v,deepOrange:y,brown:x,grey:b,blueGrey:w,darkText:C,lightText:_,darkIcons:A,lightIcons:S,white:k,black:I}},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vc-swatches",attrs:{role:"application","aria-label":"Swatches color picker","data-pick":e.pick}},[n("div",{staticClass:"vc-swatches-box",attrs:{role:"listbox"}},e._l(e.palette,(function(t,i){return n("div",{key:i,staticClass:"vc-swatches-color-group"},e._l(t,(function(t){return n("div",{key:t,class:["vc-swatches-color-it",{"vc-swatches-color--white":"#FFFFFF"===t}],style:{background:t},attrs:{role:"option","aria-label":"Color:"+t,"aria-selected":e.equal(t),"data-color":t},on:{click:function(n){e.handlerClick(t)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.equal(t),expression:"equal(c)"}],staticClass:"vc-swatches-pick"},[n("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}})])])])})))})))])};i._withStripped=!0;var r={render:i,staticRenderFns:[]};t.a=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(16),r=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);var o=n(67),a=!1,l=function(e){a||n(53)},c=n(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Photoshop.vue",t.default=c.exports},function(e,t,n){var i=n(54);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),n(1)("080365d4",i,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,'\n.vc-photoshop {\n  background: #DCDCDC;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15);\n  box-sizing: initial;\n  width: 513px;\n  font-family: Roboto;\n}\n.vc-photoshop__disable-fields {\n  width: 390px;\n}\n.vc-ps-head {\n  background-image: linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%);\n  border-bottom: 1px solid #B1B1B1;\n  box-shadow: inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02);\n  height: 23px;\n  line-height: 24px;\n  border-radius: 4px 4px 0 0;\n  font-size: 13px;\n  color: #4D4D4D;\n  text-align: center;\n}\n.vc-ps-body {\n  padding: 15px;\n  display: flex;\n}\n.vc-ps-saturation-wrap {\n  width: 256px;\n  height: 256px;\n  position: relative;\n  border: 2px solid #B3B3B3;\n  border-bottom: 2px solid #F0F0F0;\n  overflow: hidden;\n}\n.vc-ps-saturation-wrap .vc-saturation-circle {\n  width: 12px;\n  height: 12px;\n}\n.vc-ps-hue-wrap {\n  position: relative;\n  height: 256px;\n  width: 19px;\n  margin-left: 10px;\n  border: 2px solid #B3B3B3;\n  border-bottom: 2px solid #F0F0F0;\n}\n.vc-ps-hue-pointer {\n  position: relative;\n}\n.vc-ps-hue-pointer--left,\n.vc-ps-hue-pointer--right {\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 5px 0 5px 8px;\n  border-color: transparent transparent transparent #555;\n}\n.vc-ps-hue-pointer--left:after,\n.vc-ps-hue-pointer--right:after {\n  content: "";\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 4px 0 4px 6px;\n  border-color: transparent transparent transparent #fff;\n  position: absolute;\n  top: 1px;\n  left: 1px;\n  transform: translate(-8px, -5px);\n}\n.vc-ps-hue-pointer--left {\n  transform: translate(-13px, -4px);\n}\n.vc-ps-hue-pointer--right {\n  transform: translate(20px, -4px) rotate(180deg);\n}\n.vc-ps-controls {\n  width: 180px;\n  margin-left: 10px;\n  display: flex;\n}\n.vc-ps-controls__disable-fields {\n  width: auto;\n}\n.vc-ps-actions {\n  margin-left: 20px;\n  flex: 1;\n}\n.vc-ps-ac-btn {\n  cursor: pointer;\n  background-image: linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%);\n  border: 1px solid #878787;\n  border-radius: 2px;\n  height: 20px;\n  box-shadow: 0 1px 0 0 #EAEAEA;\n  font-size: 14px;\n  color: #000;\n  line-height: 20px;\n  text-align: center;\n  margin-bottom: 10px;\n}\n.vc-ps-previews {\n  width: 60px;\n}\n.vc-ps-previews__swatches {\n  border: 1px solid #B3B3B3;\n  border-bottom: 1px solid #F0F0F0;\n  margin-bottom: 2px;\n  margin-top: 1px;\n}\n.vc-ps-previews__pr-color {\n  height: 34px;\n  box-shadow: inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000;\n}\n.vc-ps-previews__label {\n  font-size: 14px;\n  color: #000;\n  text-align: center;\n}\n.vc-ps-fields {\n  padding-top: 5px;\n  padding-bottom: 9px;\n  width: 80px;\n  position: relative;\n}\n.vc-ps-fields .vc-input__input {\n  margin-left: 40%;\n  width: 40%;\n  height: 18px;\n  border: 1px solid #888888;\n  box-shadow: inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC;\n  margin-bottom: 5px;\n  font-size: 13px;\n  padding-left: 3px;\n  margin-right: 10px;\n}\n.vc-ps-fields .vc-input__label, .vc-ps-fields .vc-input__desc {\n  top: 0;\n  text-transform: uppercase;\n  font-size: 13px;\n  height: 18px;\n  line-height: 22px;\n  position: absolute;\n}\n.vc-ps-fields .vc-input__label {\n  left: 0;\n  width: 34px;\n}\n.vc-ps-fields .vc-input__desc {\n  right: 0;\n  width: 0;\n}\n.vc-ps-fields__divider {\n  height: 5px;\n}\n.vc-ps-fields__hex .vc-input__input {\n  margin-left: 20%;\n  width: 80%;\n  height: 18px;\n  border: 1px solid #888888;\n  box-shadow: inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC;\n  margin-bottom: 6px;\n  font-size: 13px;\n  padding-left: 3px;\n}\n.vc-ps-fields__hex .vc-input__label {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 14px;\n  text-transform: uppercase;\n  font-size: 13px;\n  height: 18px;\n  line-height: 22px;\n}\n',""])},function(e,t,n){var i=n(56);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),n(1)("b5380e52",i,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-saturation,\n.vc-saturation--white,\n.vc-saturation--black {\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n.vc-saturation--white {\n  background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n}\n.vc-saturation--black {\n  background: linear-gradient(to top, #000, rgba(0,0,0,0));\n}\n.vc-saturation-pointer {\n  cursor: pointer;\n  position: absolute;\n}\n.vc-saturation-circle {\n  cursor: head;\n  width: 4px;\n  height: 4px;\n  box-shadow: 0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3), 0 0 1px 2px rgba(0,0,0,.4);\n  border-radius: 50%;\n  transform: translate(-2px, -2px);\n}\n",""])},function(e,t){e.exports=function(e,t,n){return t<n?e<t?t:e>n?n:e:e<n?n:e>t?t:e}},function(e,t,n){(function(t){function n(e,t,n){function o(t){var n=u,i=p;return u=p=void 0,w=t,f=e.apply(i,n)}function a(e){return w=e,g=setTimeout(c,t),C?o(e):f}function l(e){var n=e-b;return void 0===b||n>=t||n<0||_&&e-w>=m}function c(){var e=x();if(l(e))return h(e);g=setTimeout(c,function(e){var n=t-(e-b);return _?y(n,m-(e-w)):n}(e))}function h(e){return g=void 0,A&&u?o(e):(u=p=void 0,f)}function d(){var e=x(),n=l(e);if(u=arguments,p=this,b=e,n){if(void 0===g)return a(b);if(_)return g=setTimeout(c,t),o(b)}return void 0===g&&(g=setTimeout(c,t)),f}var u,p,m,f,g,b,w=0,C=!1,_=!1,A=!0;if("function"!=typeof e)throw new TypeError(s);return t=r(t)||0,i(n)&&(C=!!n.leading,m=(_="maxWait"in n)?v(r(n.maxWait)||0,t):m,A="trailing"in n?!!n.trailing:A),d.cancel=function(){void 0!==g&&clearTimeout(g),w=0,u=b=p=g=void 0},d.flush=function(){return void 0===g?f:h(x())},d}function i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function r(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&g.call(e)==a}(e))return o;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(l,"");var n=h.test(e);return n||d.test(e)?u(e.slice(2),n?2:8):c.test(e)?o:+e}var s="Expected a function",o=NaN,a="[object Symbol]",l=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,d=/^0o[0-7]+$/i,u=parseInt,p="object"==typeof t&&t&&t.Object===Object&&t,m="object"==typeof self&&self&&self.Object===Object&&self,f=p||m||Function("return this")(),g=Object.prototype.toString,v=Math.max,y=Math.min,x=function(){return f.Date.now()};e.exports=function(e,t,r){var o=!0,a=!0;if("function"!=typeof e)throw new TypeError(s);return i(r)&&(o="leading"in r?!!r.leading:o,a="trailing"in r?!!r.trailing:a),n(e,t,{leading:o,maxWait:t,trailing:a})}}).call(t,n(59))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"container",staticClass:"vc-saturation",style:{background:e.bgColor},on:{mousedown:e.handleMouseDown,touchmove:e.handleChange,touchstart:e.handleChange}},[n("div",{staticClass:"vc-saturation--white"}),e._v(" "),n("div",{staticClass:"vc-saturation--black"}),e._v(" "),n("div",{staticClass:"vc-saturation-pointer",style:{top:e.pointerTop,left:e.pointerLeft}},[n("div",{staticClass:"vc-saturation-circle"})])])};i._withStripped=!0;var r={render:i,staticRenderFns:[]};t.a=r},function(e,t,n){var i=n(62);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),n(1)("4dc1b086",i,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-alpha {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n}\n.vc-alpha-checkboard-wrap {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  overflow: hidden;\n}\n.vc-alpha-gradient {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n}\n.vc-alpha-container {\n  cursor: pointer;\n  position: relative;\n  z-index: 2;\n  height: 100%;\n  margin: 0 3px;\n}\n.vc-alpha-pointer {\n  z-index: 2;\n  position: absolute;\n}\n.vc-alpha-picker {\n  cursor: pointer;\n  width: 4px;\n  border-radius: 1px;\n  height: 8px;\n  box-shadow: 0 0 2px rgba(0, 0, 0, .6);\n  background: #fff;\n  margin-top: 1px;\n  transform: translateX(-2px);\n}\n",""])},function(e,t,n){var i=n(64);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),n(1)("7e15c05b",i,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-checkerboard {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  background-size: contain;\n}\n",""])},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"vc-checkerboard",style:e.bgStyle})};i._withStripped=!0;var r={render:i,staticRenderFns:[]};t.a=r},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vc-alpha"},[n("div",{staticClass:"vc-alpha-checkboard-wrap"},[n("checkboard")],1),e._v(" "),n("div",{staticClass:"vc-alpha-gradient",style:{background:e.gradientColor}}),e._v(" "),n("div",{ref:"container",staticClass:"vc-alpha-container",on:{mousedown:e.handleMouseDown,touchmove:e.handleChange,touchstart:e.handleChange}},[n("div",{staticClass:"vc-alpha-pointer",style:{left:100*e.colors.a+"%"}},[n("div",{staticClass:"vc-alpha-picker"})])])])};i._withStripped=!0;var r={render:i,staticRenderFns:[]};t.a=r},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["vc-photoshop",e.disableFields?"vc-photoshop__disable-fields":""],attrs:{role:"application","aria-label":"PhotoShop color picker"}},[n("div",{staticClass:"vc-ps-head",attrs:{role:"heading"}},[e._v(e._s(e.head))]),e._v(" "),n("div",{staticClass:"vc-ps-body"},[n("div",{staticClass:"vc-ps-saturation-wrap"},[n("saturation",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),n("div",{staticClass:"vc-ps-hue-wrap"},[n("hue",{attrs:{direction:"vertical"},on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}},[n("div",{staticClass:"vc-ps-hue-pointer"},[n("i",{staticClass:"vc-ps-hue-pointer--left"}),n("i",{staticClass:"vc-ps-hue-pointer--right"})])])],1),e._v(" "),n("div",{class:["vc-ps-controls",e.disableFields?"vc-ps-controls__disable-fields":""]},[n("div",{staticClass:"vc-ps-previews"},[n("div",{staticClass:"vc-ps-previews__label"},[e._v(e._s(e.newLabel))]),e._v(" "),n("div",{staticClass:"vc-ps-previews__swatches"},[n("div",{staticClass:"vc-ps-previews__pr-color",style:{background:e.colors.hex},attrs:{"aria-label":"New color is "+e.colors.hex}}),e._v(" "),n("div",{staticClass:"vc-ps-previews__pr-color",style:{background:e.currentColor},attrs:{"aria-label":"Current color is "+e.currentColor},on:{click:e.clickCurrentColor}})]),e._v(" "),n("div",{staticClass:"vc-ps-previews__label"},[e._v(e._s(e.currentLabel))])]),e._v(" "),e.disableFields?e._e():n("div",{staticClass:"vc-ps-actions"},[n("div",{staticClass:"vc-ps-ac-btn",attrs:{role:"button","aria-label":e.acceptLabel},on:{click:e.handleAccept}},[e._v(e._s(e.acceptLabel))]),e._v(" "),n("div",{staticClass:"vc-ps-ac-btn",attrs:{role:"button","aria-label":e.cancelLabel},on:{click:e.handleCancel}},[e._v(e._s(e.cancelLabel))]),e._v(" "),n("div",{staticClass:"vc-ps-fields"},[n("ed-in",{attrs:{label:"h",desc:"",value:e.hsv.h},on:{change:e.inputChange}}),e._v(" "),n("ed-in",{attrs:{label:"s",desc:"%",value:e.hsv.s,max:100},on:{change:e.inputChange}}),e._v(" "),n("ed-in",{attrs:{label:"v",desc:"%",value:e.hsv.v,max:100},on:{change:e.inputChange}}),e._v(" "),n("div",{staticClass:"vc-ps-fields__divider"}),e._v(" "),n("ed-in",{attrs:{label:"r",value:e.colors.rgba.r},on:{change:e.inputChange}}),e._v(" "),n("ed-in",{attrs:{label:"g",value:e.colors.rgba.g},on:{change:e.inputChange}}),e._v(" "),n("ed-in",{attrs:{label:"b",value:e.colors.rgba.b},on:{change:e.inputChange}}),e._v(" "),n("div",{staticClass:"vc-ps-fields__divider"}),e._v(" "),n("ed-in",{staticClass:"vc-ps-fields__hex",attrs:{label:"#",value:e.hex},on:{change:e.inputChange}})],1),e._v(" "),e.hasResetButton?n("div",{staticClass:"vc-ps-ac-btn",attrs:{"aria-label":"reset"},on:{click:e.handleReset}},[e._v(e._s(e.resetLabel))]):e._e()])])])])};i._withStripped=!0;var r={render:i,staticRenderFns:[]};t.a=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(20),r=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);var o=n(71),a=!1,l=function(e){a||n(69)},c=n(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Sketch.vue",t.default=c.exports},function(e,t,n){var i=n(70);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),n(1)("612c6604",i,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-sketch {\n  position: relative;\n  width: 200px;\n  padding: 10px 10px 0;\n  box-sizing: initial;\n  background: #fff;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, .15), 0 8px 16px rgba(0, 0, 0, .15);\n}\n.vc-sketch-saturation-wrap {\n  width: 100%;\n  padding-bottom: 75%;\n  position: relative;\n  overflow: hidden;\n}\n.vc-sketch-controls {\n  display: flex;\n}\n.vc-sketch-sliders {\n  padding: 4px 0;\n  flex: 1;\n}\n.vc-sketch-sliders .vc-hue,\n.vc-sketch-sliders .vc-alpha-gradient {\n  border-radius: 2px;\n}\n.vc-sketch-hue-wrap {\n  position: relative;\n  height: 10px;\n}\n.vc-sketch-alpha-wrap {\n  position: relative;\n  height: 10px;\n  margin-top: 4px;\n  overflow: hidden;\n}\n.vc-sketch-color-wrap {\n  width: 24px;\n  height: 24px;\n  position: relative;\n  margin-top: 4px;\n  margin-left: 4px;\n  border-radius: 3px;\n}\n.vc-sketch-active-color {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  border-radius: 2px;\n  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, .15), inset 0 0 4px rgba(0, 0, 0, .25);\n  z-index: 2;\n}\n.vc-sketch-color-wrap .vc-checkerboard {\n  background-size: auto;\n}\n.vc-sketch-field {\n  display: flex;\n  padding-top: 4px;\n}\n.vc-sketch-field .vc-input__input {\n  width: 90%;\n  padding: 4px 0 3px 10%;\n  border: none;\n  box-shadow: inset 0 0 0 1px #ccc;\n  font-size: 10px;\n}\n.vc-sketch-field .vc-input__label {\n  display: block;\n  text-align: center;\n  font-size: 11px;\n  color: #222;\n  padding-top: 3px;\n  padding-bottom: 4px;\n  text-transform: capitalize;\n}\n.vc-sketch-field--single {\n  flex: 1;\n  padding-left: 6px;\n}\n.vc-sketch-field--double {\n  flex: 2;\n}\n.vc-sketch-presets {\n  margin-right: -10px;\n  margin-left: -10px;\n  padding-left: 10px;\n  padding-top: 10px;\n  border-top: 1px solid #eee;\n}\n.vc-sketch-presets-color {\n  border-radius: 3px;\n  overflow: hidden;\n  position: relative;\n  display: inline-block;\n  margin: 0 10px 10px 0;\n  vertical-align: top;\n  cursor: pointer;\n  width: 16px;\n  height: 16px;\n  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, .15);\n}\n.vc-sketch-presets-color .vc-checkerboard {\n  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, .15);\n  border-radius: 3px;\n}\n.vc-sketch__disable-alpha .vc-sketch-color-wrap {\n  height: 10px;\n}\n",""])},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["vc-sketch",e.disableAlpha?"vc-sketch__disable-alpha":""],attrs:{role:"application","aria-label":"Sketch color picker"}},[n("div",{staticClass:"vc-sketch-saturation-wrap"},[n("saturation",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),n("div",{staticClass:"vc-sketch-controls"},[n("div",{staticClass:"vc-sketch-sliders"},[n("div",{staticClass:"vc-sketch-hue-wrap"},[n("hue",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),e.disableAlpha?e._e():n("div",{staticClass:"vc-sketch-alpha-wrap"},[n("alpha",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1)]),e._v(" "),n("div",{staticClass:"vc-sketch-color-wrap"},[n("div",{staticClass:"vc-sketch-active-color",style:{background:e.activeColor},attrs:{"aria-label":"Current color is "+e.activeColor}}),e._v(" "),n("checkboard")],1)]),e._v(" "),e.disableFields?e._e():n("div",{staticClass:"vc-sketch-field"},[n("div",{staticClass:"vc-sketch-field--double"},[n("ed-in",{attrs:{label:"hex",value:e.hex},on:{change:e.inputChange}})],1),e._v(" "),n("div",{staticClass:"vc-sketch-field--single"},[n("ed-in",{attrs:{label:"r",value:e.colors.rgba.r},on:{change:e.inputChange}})],1),e._v(" "),n("div",{staticClass:"vc-sketch-field--single"},[n("ed-in",{attrs:{label:"g",value:e.colors.rgba.g},on:{change:e.inputChange}})],1),e._v(" "),n("div",{staticClass:"vc-sketch-field--single"},[n("ed-in",{attrs:{label:"b",value:e.colors.rgba.b},on:{change:e.inputChange}})],1),e._v(" "),e.disableAlpha?e._e():n("div",{staticClass:"vc-sketch-field--single"},[n("ed-in",{attrs:{label:"a",value:e.colors.a,"arrow-offset":.01,max:1},on:{change:e.inputChange}})],1)]),e._v(" "),n("div",{staticClass:"vc-sketch-presets",attrs:{role:"group","aria-label":"A color preset, pick one to set as current color"}},[e._l(e.presetColors,(function(t){return[e.isTransparent(t)?n("div",{key:t,staticClass:"vc-sketch-presets-color",attrs:{"aria-label":"Color:"+t},on:{click:function(n){e.handlePreset(t)}}},[n("checkboard")],1):n("div",{key:t,staticClass:"vc-sketch-presets-color",style:{background:t},attrs:{"aria-label":"Color:"+t},on:{click:function(n){e.handlePreset(t)}}})]}))],2)])};i._withStripped=!0;var r={render:i,staticRenderFns:[]};t.a=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(21),r=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);var o=n(75),a=!1,l=function(e){a||n(73)},c=n(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Chrome.vue",t.default=c.exports},function(e,t,n){var i=n(74);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),n(1)("1cd16048",i,!1,{})},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"\n.vc-chrome {\n  background: #fff;\n  border-radius: 2px;\n  box-shadow: 0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3);\n  box-sizing: initial;\n  width: 225px;\n  font-family: Menlo;\n  background-color: #fff;\n}\n.vc-chrome-controls {\n  display: flex;\n}\n.vc-chrome-color-wrap {\n  position: relative;\n  width: 36px;\n}\n.vc-chrome-active-color {\n  position: relative;\n  width: 30px;\n  height: 30px;\n  border-radius: 15px;\n  overflow: hidden;\n  z-index: 1;\n}\n.vc-chrome-color-wrap .vc-checkerboard {\n  width: 30px;\n  height: 30px;\n  border-radius: 15px;\n  background-size: auto;\n}\n.vc-chrome-sliders {\n  flex: 1;\n}\n.vc-chrome-fields-wrap {\n  display: flex;\n  padding-top: 16px;\n}\n.vc-chrome-fields {\n  display: flex;\n  margin-left: -6px;\n  flex: 1;\n}\n.vc-chrome-field {\n  padding-left: 6px;\n  width: 100%;\n}\n.vc-chrome-toggle-btn {\n  width: 32px;\n  text-align: right;\n  position: relative;\n}\n.vc-chrome-toggle-icon {\n  margin-right: -4px;\n  margin-top: 12px;\n  cursor: pointer;\n  position: relative;\n  z-index: 2;\n}\n.vc-chrome-toggle-icon-highlight {\n  position: absolute;\n  width: 24px;\n  height: 28px;\n  background: #eee;\n  border-radius: 4px;\n  top: 10px;\n  left: 12px;\n}\n.vc-chrome-hue-wrap {\n  position: relative;\n  height: 10px;\n  margin-bottom: 8px;\n}\n.vc-chrome-alpha-wrap {\n  position: relative;\n  height: 10px;\n}\n.vc-chrome-hue-wrap .vc-hue {\n  border-radius: 2px;\n}\n.vc-chrome-alpha-wrap .vc-alpha-gradient {\n  border-radius: 2px;\n}\n.vc-chrome-hue-wrap .vc-hue-picker, .vc-chrome-alpha-wrap .vc-alpha-picker {\n  width: 12px;\n  height: 12px;\n  border-radius: 6px;\n  transform: translate(-6px, -2px);\n  background-color: rgb(248, 248, 248);\n  box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.37);\n}\n.vc-chrome-body {\n  padding: 16px 16px 12px;\n  background-color: #fff;\n}\n.vc-chrome-saturation-wrap {\n  width: 100%;\n  padding-bottom: 55%;\n  position: relative;\n  border-radius: 2px 2px 0 0;\n  overflow: hidden;\n}\n.vc-chrome-saturation-wrap .vc-saturation-circle {\n  width: 12px;\n  height: 12px;\n}\n.vc-chrome-fields .vc-input__input {\n  font-size: 11px;\n  color: #333;\n  width: 100%;\n  border-radius: 2px;\n  border: none;\n  box-shadow: inset 0 0 0 1px #dadada;\n  height: 21px;\n  text-align: center;\n}\n.vc-chrome-fields .vc-input__label {\n  text-transform: uppercase;\n  font-size: 11px;\n  line-height: 11px;\n  color: #969696;\n  text-align: center;\n  display: block;\n  margin-top: 12px;\n}\n.vc-chrome__disable-alpha .vc-chrome-active-color {\n  width: 18px;\n  height: 18px;\n}\n.vc-chrome__disable-alpha .vc-chrome-color-wrap {\n  width: 30px;\n}\n.vc-chrome__disable-alpha .vc-chrome-hue-wrap {\n  margin-top: 4px;\n  margin-bottom: 4px;\n}\n",""])},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["vc-chrome",e.disableAlpha?"vc-chrome__disable-alpha":""],attrs:{role:"application","aria-label":"Chrome color picker"}},[n("div",{staticClass:"vc-chrome-saturation-wrap"},[n("saturation",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),n("div",{staticClass:"vc-chrome-body"},[n("div",{staticClass:"vc-chrome-controls"},[n("div",{staticClass:"vc-chrome-color-wrap"},[n("div",{staticClass:"vc-chrome-active-color",style:{background:e.activeColor},attrs:{"aria-label":"current color is "+e.colors.hex}}),e._v(" "),e.disableAlpha?e._e():n("checkboard")],1),e._v(" "),n("div",{staticClass:"vc-chrome-sliders"},[n("div",{staticClass:"vc-chrome-hue-wrap"},[n("hue",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),e.disableAlpha?e._e():n("div",{staticClass:"vc-chrome-alpha-wrap"},[n("alpha",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1)])]),e._v(" "),e.disableFields?e._e():n("div",{staticClass:"vc-chrome-fields-wrap"},[n("div",{directives:[{name:"show",rawName:"v-show",value:0===e.fieldsIndex,expression:"fieldsIndex === 0"}],staticClass:"vc-chrome-fields"},[n("div",{staticClass:"vc-chrome-field"},[e.hasAlpha?e._e():n("ed-in",{attrs:{label:"hex",value:e.colors.hex},on:{change:e.inputChange}}),e._v(" "),e.hasAlpha?n("ed-in",{attrs:{label:"hex",value:e.colors.hex8},on:{change:e.inputChange}}):e._e()],1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:1===e.fieldsIndex,expression:"fieldsIndex === 1"}],staticClass:"vc-chrome-fields"},[n("div",{staticClass:"vc-chrome-field"},[n("ed-in",{attrs:{label:"r",value:e.colors.rgba.r},on:{change:e.inputChange}})],1),e._v(" "),n("div",{staticClass:"vc-chrome-field"},[n("ed-in",{attrs:{label:"g",value:e.colors.rgba.g},on:{change:e.inputChange}})],1),e._v(" "),n("div",{staticClass:"vc-chrome-field"},[n("ed-in",{attrs:{label:"b",value:e.colors.rgba.b},on:{change:e.inputChange}})],1),e._v(" "),e.disableAlpha?e._e():n("div",{staticClass:"vc-chrome-field"},[n("ed-in",{attrs:{label:"a",value:e.colors.a,"arrow-offset":.01,max:1},on:{change:e.inputChange}})],1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:2===e.fieldsIndex,expression:"fieldsIndex === 2"}],staticClass:"vc-chrome-fields"},[n("div",{staticClass:"vc-chrome-field"},[n("ed-in",{attrs:{label:"h",value:e.hsl.h},on:{change:e.inputChange}})],1),e._v(" "),n("div",{staticClass:"vc-chrome-field"},[n("ed-in",{attrs:{label:"s",value:e.hsl.s},on:{change:e.inputChange}})],1),e._v(" "),n("div",{staticClass:"vc-chrome-field"},[n("ed-in",{attrs:{label:"l",value:e.hsl.l},on:{change:e.inputChange}})],1),e._v(" "),e.disableAlpha?e._e():n("div",{staticClass:"vc-chrome-field"},[n("ed-in",{attrs:{label:"a",value:e.colors.a,"arrow-offset":.01,max:1},on:{change:e.inputChange}})],1)]),e._v(" "),n("div",{staticClass:"vc-chrome-toggle-btn",attrs:{role:"button","aria-label":"Change another color definition"},on:{click:e.toggleViews}},[n("div",{staticClass:"vc-chrome-toggle-icon"},[n("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"},on:{mouseover:e.showHighlight,mouseenter:e.showHighlight,mouseout:e.hideHighlight}},[n("path",{attrs:{fill:"#333",d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}})])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.highlight,expression:"highlight"}],staticClass:"vc-chrome-toggle-icon-highlight"})])])])])};i._withStripped=!0;var r={render:i,staticRenderFns:[]};t.a=r}])},9825:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const i={props:["fillId","fill","area"],computeSvgFill:(e,t)=>e?"solid"===e.type?e.color:"image"===e.type&&e.image||"gradient"===e.type&&e.gradient?`url(#${t})`:"none":"none",computeStandardFill(e){return this.computeStandardFillForValue(e.shapeProps.fill,`fill-pattern-${e.id}`)},computeStandardFillForValue(e,t){return this.computeSvgFill(e,t)},computed:{direction(){let e=parseInt(this.fill.gradient.direction);if(isFinite(e)||(e=0),"gradient"===this.fill.type&&this.fill.gradient){const t=50*Math.cos(Math.PI*(e-90)/180),n=50*Math.sin(Math.PI*(e-90)/180);return{x1:50-t,y1:50-n,x2:50+t,y2:50+n}}return{x1:0,y1:0,x2:100,y2:0}},imagePreserveAspectRatio(){return this.fill.stretch?"none":"xMidYMid meet"}}},r=(0,n(1900).Z)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",["image"===e.fill.type&&e.fill.image?n("defs",[n("pattern",{attrs:{id:e.fillId,patternUnits:"userSpaceOnUse",width:e.area.w,height:e.area.h}},[n("image",{attrs:{"xlink:href":e.fill.image,x:"0",y:"0",width:e.area.w,height:e.area.h,preserveAspectRatio:e.imagePreserveAspectRatio}})])]):e._e(),e._v(" "),"gradient"===e.fill.type&&e.fill.gradient?n("defs",["linear"===e.fill.gradient.type?n("linearGradient",{attrs:{id:e.fillId,x1:e.direction.x1+"%",y1:e.direction.y1+"%",x2:e.direction.x2+"%",y2:e.direction.y2+"%"}},e._l(e.fill.gradient.colors,(function(e){return n("stop",{style:{"stop-color":e.c},attrs:{offset:e.p+"%"}})})),1):e._e(),e._v(" "),"radial"===e.fill.gradient.type?n("radialGradient",{attrs:{id:e.fillId,cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"}},e._l(e.fill.gradient.colors,(function(e){return n("stop",{style:{"stop-color":e.c},attrs:{offset:e.p+"%"}})})),1):e._e()],1):e._e()])}),[],!1,null,null,null).exports},5879:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(9498),r=n(9825),s=n(536);const o=e=>{const t=e.area.w,n=e.area.h,i=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4);return`M ${t-i} ${n}  L ${i} ${n} a ${i} ${i} 0 0 1 ${-i} ${-i}  L 0 ${i}  a ${i} ${i} 0 0 1 ${i} ${-i}   L ${t-i} 0   a ${i} ${i} 0 0 1 ${i} ${i}  L ${t} ${n-i}   a ${i} ${i} 0 0 1 ${-i} ${i} Z`},a="rgba(40, 40, 40, 1.0)";function l(e,t,n){const i=c[t.shapeProps.lang];if(!i)return;let r=e.state.assetsPath;"/"===r&&(r="");const s=new Worker(`${r}/syntax-highlight-worker.js`);s.onmessage=e=>{const t=n.querySelector(".item-text-element");t&&(t.innerHTML=e.data)};const o=document.createElement("code");o.appendChild(document.createTextNode(t.textSlots.body.text)),s.postMessage({text:o.innerText,lang:i})}const c={Bash:"bash",C:"c","C++":"cpp","C#":"csharp",CSS:"css",Diff:"diff",GO:"go",GraphQL:"graphql",Ini:"ini",Java:"java",JavaScript:"javascript",JSON:"json",Kotlin:"kotlin",Less:"less",Lua:"lua",Makefile:"makefile",Markdown:"markdown","Objective C":"objectivec",Perl:"perl",PHP:"php","PHP Template":"php-template",Text:"plaintext",Python:"python","Python REPL":"python-repl",R:"r",Ruby:"ruby",Rust:"rust",SCSS:"scss",Shell:"shell",SQL:"sql",Swift:"swift",TypeScript:"typescript","VB.NET":"vbnet",WebAssembly:"wasm",XML:"xml",YAML:"yaml"},h=Object.keys(c),d={props:["item"],components:{AdvancedFill:r.Z},shapeConfig:{shapeType:"vue",id:"code_block",menuItems:[{group:"General",name:"Code Block",iconUrl:"/assets/images/items/code-block.svg",item:{textSlots:{title:{text:"<b>Code</b>",halign:"center",valign:"middle",color:"rgba(245, 245, 245, 1.0)",paddingTop:4,paddingLeft:10,paddingRight:10,paddingBottom:4},body:{font:"Courier New",text:"",color:"rgba(245, 245, 245, 1.0)",halign:"left",valign:"top",whiteSpace:"pre-wrap",paddingTop:10,paddingLeft:10,paddingRight:10,paddingBottom:10}}}}],getPins:e=>(0,i.F)(e),computePath:o,getTextSlots:e=>[{name:"title",area:{x:0,y:0,w:e.area.w,h:Math.max(0,e.shapeProps.headerHeight)}},{name:"body",markupDisabled:!0,cssClass:`syntax-theme-${e.shapeProps.theme}`,area:{x:0,y:e.shapeProps.headerHeight,w:e.area.w,h:Math.max(1,e.area.h-e.shapeProps.headerHeight)}}],editorProps:{},args:{theme:{type:"choice",value:"dark",options:["dark","light"],name:"Theme",onUpdate:function(e,t,n,i){"dark"===n?(t.shapeProps.fill={type:"solid",color:a},t.textSlots.title.color="rgba(245, 245, 245, 1.0)",t.textSlots.body.color="rgba(245, 245, 245, 1.0)"):(t.shapeProps.fill={type:"solid",color:"rgba(240, 240, 240, 1.0)"},t.textSlots.title.color="rgba(0, 0, 0, 1.0)",t.textSlots.body.color="rgba(0, 0, 0, 1.0)"),s.Z.emitItemChanged(t.id)}},lang:{type:"choice",value:"Text",options:h,name:"Language",onUpdate:function(e,t,n,i){const r=document.getElementById(`item-text-slot-${t.id}-body`);r&&l(e,t,r)}},fill:{type:"advanced-color",value:{type:"solid",color:a},name:"Fill"},strokeColor:{type:"color",value:"rgba(80, 80, 80, 1.0)",name:"Stroke color"},strokeSize:{type:"number",value:1,name:"Stroke size"},cornerRadius:{type:"number",value:4,name:"Corner radius"},headerHeight:{type:"number",value:30,name:"Header hight",min:0}},mounted(e,t,n){Array.isArray(n.textSlots)&&n.textSlots.forEach((n=>{"body"===n.getAttribute("data-text-slot-name")&&l(e,t,n)}))}},computed:{shapePath(){return o(this.item)},svgFill(){return r.Z.computeStandardFill(this.item)}}},u=(0,n(1900).Z)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[n("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),n("path",{attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,fill:e.svgFill}}),e._v(" "),n("circle",{attrs:{cx:"15",cy:"15",r:"5",fill:"#EC6762"}}),e._v(" "),n("circle",{attrs:{cx:"30",cy:"15",r:"5",fill:"#F4BE5E"}}),e._v(" "),n("circle",{attrs:{cx:"45",cy:"15",r:"5",fill:"#61C761"}})],1)}),[],!1,null,null,null).exports},8022:(e,t,n)=>{"use strict";n.d(t,{LM:()=>p,lK:()=>u,ZP:()=>f});var i=n(9498),r=n(4502),s=n(9825),o=n(536),a=n(5635),l=n(3762),c=n.n(l);const h=e=>{const t=e.area.w,n=e.area.h;return`M ${t} ${n}  L 0 ${n}   L 0 0   L ${t} 0  L ${t} ${n} Z`};function d(e,t,n){const i=e.area.w-10,r=e.area.h-10,s=Math.min(t,i),o=Math.min(n,r);return{x:(e.area.w-s)/2,y:(e.area.h-o)/2,w:s,h:o}}const u="Component Loaded",p="Component Failed",m={props:["item"],components:{AdvancedFill:s.Z},shapeConfig:{shapeType:"vue",id:"component",menuItems:[{group:"General",name:"Component",iconUrl:"/assets/images/items/component.svg",description:"\n                Lets you embed other schemes into this item. \n            ",item:{textSlots:{button:{text:"Load more",paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0}}}}],getPins:e=>(0,i.F)(e),getTextSlots:e=>[{name:"button",area:d(e,180,40)}],computePath:h,args:{fill:{type:"advanced-color",value:{type:"solid",color:"rgba(255,255,255,1)"},name:"Fill"},strokeColor:{type:"color",value:"#466AAA",name:"Stroke color"},strokeSize:{type:"number",value:2,name:"Stroke size"},strokePattern:{type:"stroke-pattern",value:"solid",name:"Stroke pattern"},kind:{type:"choice",value:"external",name:"Kind",options:["external","embedded"],description:"External - allows to fetch other documents and render them inside the component. Embedded - uses the items in the same document"},schemeId:{type:"scheme-ref",value:"",name:"Scheme ID",depends:{kind:"external"}},referenceItem:{type:"element",name:"Item",depends:{kind:"embedded"}},placement:{type:"choice",value:"centered",options:["centered","stretch"],name:"Placement"},autoZoom:{type:"boolean",value:!0,name:"Auto zoom",description:"Zoom into component when it is loaded",depends:{kind:"external"}},showButton:{type:"boolean",value:!0,name:"Show button",description:"Displays a button which user can click to load component in view mode",depends:{kind:"external"}},buttonFill:{type:"advanced-color",value:{type:"solid",color:"rgba(14,195,255,0.15)"},name:"Button Fill",depends:{showButton:!0,kind:"external"}},buttonStrokeColor:{type:"color",value:"rgba(24,127,191,0.9)",name:"Button stroke color",depends:{showButton:!0,kind:"external"}},buttonHoverFill:{type:"advanced-color",value:{type:"solid",color:"rgba(14,195,255,0.45)"},name:"Hovered button Fill",depends:{showButton:!0,kind:"external"}},buttonHoverStrokeColor:{type:"color",value:"rgba(24,127,191,0.9)",name:"Hovered button stroke color",depends:{showButton:!0,kind:"external"}},buttonStrokeSize:{type:"number",value:2,name:"Button stroke size",depends:{showButton:!0,kind:"external"}},showProgressBar:{type:"boolean",value:!0,name:"Should progress bar"},progressColor1:{type:"color",value:"rgba(24,127,191,1)",name:"Progress bar color 1"},progressColor2:{type:"color",value:"rgba(140,214,219,1)",name:"Progress bar color 2"}},editorProps:{customTextRendering:!0,ignoreEventLayer:!0},getEvents:e=>[{name:u},{name:p}]},beforeMount(){o.Z.subscribeForItemChanged(this.item.id,this.onItemChanged),o.Z.$on(o.Z.ITEM_TEXT_SLOT_EDIT_TRIGGERED,this.onItemTextSlotEditTriggered),o.Z.$on(o.Z.ITEM_TEXT_SLOT_EDIT_CANCELED,this.onItemTextSlotEditCanceled),o.Z.$on(o.Z.COMPONENT_LOAD_REQUESTED,this.onAnyComponentLoadRequested),o.Z.$on(o.Z.COMPONENT_LOAD_FAILED,this.onAnyComponentLoadFailed),o.Z.$on(o.Z.COMPONENT_SCHEME_MOUNTED,this.onAnyComponentMounted)},beforeDestroy(){o.Z.unsubscribeForItemChanged(this.item.id,this.onItemChanged),o.Z.$off(o.Z.ITEM_TEXT_SLOT_EDIT_TRIGGERED,this.onItemTextSlotEditTriggered),o.Z.$off(o.Z.ITEM_TEXT_SLOT_EDIT_CANCELED,this.onItemTextSlotEditCanceled),o.Z.$off(o.Z.COMPONENT_LOAD_REQUESTED,this.onAnyComponentLoadRequested),o.Z.$off(o.Z.COMPONENT_LOAD_FAILED,this.onAnyComponentLoadFailed),o.Z.$off(o.Z.COMPONENT_SCHEME_MOUNTED,this.onAnyComponentMounted)},data(){return{buttonHovered:!1,buttonShown:"external"===this.item.shapeProps.kind&&this.item.shapeProps.showButton&&!(this.item._childItems&&this.item._childItems.length>0),isLoading:!1,hideTextSlot:!1,textStyle:this.createTextStyle()}},methods:{onLoadSchemeClick(){this.isLoading=!0,o.Z.emitComponentLoadRequested(this.item)},onItemChanged(){this.item._childItems&&this.item._childItems.length>0&&(this.buttonShown=!1),this.isLoading=!1,this.buttonHovered=!1,this.textStyle=this.createTextStyle()},createTextStyle(){let e={};if(this.item.textSlots&&this.item.textSlots.button){e=(0,a.A)(this.item.textSlots.button);const t=d(this.item,180,40);e.width=`${t.w}px`,e.height=`${t.h}px`}return e},onItemTextSlotEditTriggered(e,t,n,i){e.id===this.item.id&&(this.hideTextSlot=!0)},onItemTextSlotEditCanceled(e,t){e.id===this.item.id&&(this.hideTextSlot=!1)},onButtonMouseOver(){this.buttonHovered=!0,this.$forceUpdate()},onButtonMouseLeave(){this.buttonHovered=!1,this.$forceUpdate()},onAnyComponentLoadRequested(e){this.item.id===e.id&&(this.isLoading=!0)},onAnyComponentLoadFailed(e){this.item.id===e.id&&(this.isLoading=!1)},onAnyComponentMounted(e){this.item.id===e.id&&(this.isLoading=!1)}},computed:{shapePath(){return h(this.item)},svgFill(){return s.Z.computeSvgFill(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`)},svgButtonFill(){return s.Z.computeSvgFill(this.item.shapeProps.buttonFill,`fill-pattern-button-${this.item.id}`)},svgButtonHoverFill(){return s.Z.computeSvgFill(this.item.shapeProps.buttonHoverFill,`fill-pattern-button-hovered-${this.item.id}`)},strokeDashArray(){return r.Z.createDashArray(this.item.shapeProps.strokePattern,this.item.shapeProps.strokeSize)},buttonArea(){return d(this.item,180,40)},sanitizedButtonText(){if(this.isLoading)return"Loading ...";let e="";return this.item.textSlots&&this.item.textSlots.button&&(e=this.item.textSlots.button.text),c()(e)},failureMessageStyle(){return{color:"rgb(255, 255, 255)","font-size":"14px","font-family":"Arial, Helvetica, sans-serif",padding:"10px","text-align":"center","vertical-align":"middle","white-space":"normal",display:"table-cell","box-sizing":"border-box",width:`${this.item.area.w}px`,height:`${this.item.area.h}px`}},progressBar(){return d(this.item,180,10)},progressBarStyle(){return{background:`linear-gradient(90deg, ${this.item.shapeProps.progressColor1} 0%, ${this.item.shapeProps.progressColor2} 25%, ${this.item.shapeProps.progressColor2} 50%, ${this.item.shapeProps.progressColor1} 75%) 0% 0% / 60% 100%`}},progressBarHeight(){return Math.min(20,this.item.area.h)}}},f=(0,n(1900).Z)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[n("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),n("advanced-fill",{attrs:{fillId:"fill-pattern-button-"+e.item.id,fill:e.item.shapeProps.buttonFill,area:e.item.area}}),e._v(" "),n("advanced-fill",{attrs:{fillId:"fill-pattern-button-hovered-"+e.item.id,fill:e.item.shapeProps.buttonHoverFill,area:e.item.area}}),e._v(" "),n("path",{attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,"stroke-dasharray":e.strokeDashArray,fill:e.svgFill}}),e._v(" "),(!e.isLoading||!e.item.shapeProps.showProgressBar)&&e.buttonShown&&e.buttonArea.w>0&&e.buttonArea.h>0?n("g",{staticStyle:{cursor:"pointer"}},[e.buttonHovered?n("rect",{attrs:{fill:e.svgButtonHoverFill,x:e.buttonArea.x,y:e.buttonArea.y,width:e.buttonArea.w,height:e.buttonArea.h,"stroke-width":e.item.shapeProps.buttonStrokeSize+"px",stroke:e.item.shapeProps.buttonStrokeColor}}):n("rect",{attrs:{fill:e.svgButtonFill,x:e.buttonArea.x,y:e.buttonArea.y,width:e.buttonArea.w,height:e.buttonArea.h,"stroke-width":e.item.shapeProps.buttonStrokeSize+"px",stroke:e.item.shapeProps.buttonHoverStrokeColor}}),e._v(" "),e.hideTextSlot?e._e():n("g",[n("foreignObject",{attrs:{x:e.buttonArea.x,y:e.buttonArea.y,width:e.buttonArea.w,height:e.buttonArea.h}},[n("div",{staticClass:"item-text-container",style:e.textStyle,attrs:{xmlns:"http://www.w3.org/1999/xhtml"},domProps:{innerHTML:e._s(e.sanitizedButtonText)}})])]),e._v(" "),n("rect",{attrs:{"data-preview-ignore":"true",fill:"rgba(255,255,255,0)",x:e.buttonArea.x,y:e.buttonArea.y,width:e.buttonArea.w,height:e.buttonArea.h},on:{click:e.onLoadSchemeClick,mouseover:e.onButtonMouseOver,mouseleave:e.onButtonMouseLeave}})]):e._e(),e._v(" "),e.isLoading&&e.item.shapeProps.showProgressBar&&e.progressBar.w>0&&e.progressBar.h>0?n("foreignObject",{attrs:{x:e.progressBar.x,y:e.progressBar.y,width:e.progressBar.w,height:e.progressBar.h}},[n("div",{staticClass:"progress-bar",style:e.progressBarStyle})]):e._e(),e._v(" "),!e.isLoading&&e.item.meta&&e.item.meta.componentLoadFailed?n("g",[n("rect",{attrs:{x:0,y:0,width:e.item.area.w,height:e.item.area.h,fill:"rgba(250, 70, 70)"}}),e._v(" "),n("foreignObject",{attrs:{x:0,y:0,width:e.item.area.w,height:e.item.area.h}},[n("div",{staticClass:"item-text-container",style:e.failureMessageStyle,attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[n("b",[e._v("Loading failed")])])])]):e._e(),e._v(" "),e.item.meta&&e.item.meta.cyclicComponent?n("g",[n("rect",{attrs:{x:0,y:0,width:e.item.area.w,height:e.item.area.h,fill:"rgba(250, 70, 70)"}}),e._v(" "),n("foreignObject",{attrs:{x:0,y:0,width:e.item.area.w,height:e.item.area.h}},[n("div",{staticClass:"item-text-container",style:e.failureMessageStyle,attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[n("b",[e._v("Cyclic dependency!")])])])]):e._e()],1)}),[],!1,null,null,null).exports},1516:(e,t,n)=>{"use strict";n.d(t,{Z:()=>L});var i=n(4486),r=n.n(i),s=n(4502),o=n(536),a=n(2017),l=n(3590),c=n(125),h=n(4691),d=n(9825);const u=new a.Yd("Connector");function p(e,t,n,i){if(t){const r=t.getPointAtLength(n);return i.worldPointOnItem(r.x,r.y,e)}return i.worldPointOnItem(e.area.w/2,e.area.h/2,e)}function m(e){return l.Z.roundPrecise2(e)}const f=[1,0,3,2,4];function g(e,t){return e<=-.5?2:e>=.5?3:t<=-.5?0:t>=.5?1:void 0}const v=[[0,0,-1,1],[0,0,1,-1],[1,-1,0,0],[-1,1,0,0]];function y(e){return 3===e||2===e?6:0===e||1===e?5:4}function x(e){return f[e]}function b(e,t){return{way:t>e?1:0,value:Math.abs(t-e)}}function w(e,t){return{way:t>e?3:2,value:Math.abs(t-e)}}function C(e,t,n,i,r,s){const o=x(n);let a=[];const c=i-e,h=r-t;l.Z.tooSmall(c)||a.push(i>e?3:2),l.Z.tooSmall(h)||a.push(r>t?1:0),2===a.length&&(a[0]===o||s===a[0]&&a[1]!==o||4===s&&a[1]===n)&&(a=[a[1],a[0]]);const d=y(n),u=y(a[0]),p=y(s);if(u===p||d===p)if(5===p){if(r<t&&1!==n||r>t&&0!==n)return((e,t,n,i)=>{const r=(t+i)/2;return[b(t,r),w(e,n),b(r,i)]})(e,t,i,r)}else if(i<e&&3!==n||i>e&&2!==n)return((e,t,n,i)=>{const r=(e+n)/2;return[w(e,r),b(t,i),w(r,n)]})(e,t,i,r);return 6===u?((e,t,n,i)=>[w(e,n),b(t,i)])(e,t,i,r):((e,t,n,i)=>[b(t,i),w(e,n)])(e,t,i,r)}function _(e,t,n,i){return 3===n?e+=i:2===n?e-=i:0===n?t-=i:1===n&&(t+=i),{x:e,y:t}}function A(e,t,n){const i=h.Z.clone(e.shapeProps.points),s=[];let o=0,a=4;i[0].hasOwnProperty("bx")&&(o=g(i[0].bx,i[0].by));const l=i[i.length-1];if(l.hasOwnProperty("bx")&&(a=g(l.bx,l.by)),e.shapeProps.sourceCap&&"empty"!==e.shapeProps.sourceCap){const t=_(0,0,o,e.shapeProps.sourceCapSize),n=I(i[0].x,i[0].y,i[0].x+t.x,i[0].y+t.y,e.shapeProps.sourceCapSize,e.shapeProps.sourceCap);n&&(n.prolongLine||(i[0].x=n.entryPoint.x,i[0].y=n.entryPoint.y),s.push(n))}const c=[];let d=o,u=i[0];const p=e=>{r()(e,(e=>{c.push(e),u=_(u.x,u.y,e.way,e.value)})),d=e[e.length-1].way};for(let e=1;e<i.length-1;e++)p(C(u.x,u.y,d,i[e].x,i[e].y,4));p(C(u.x,u.y,d,l.x,l.y,x(a)));let m=`M ${i[0].x} ${i[0].y}`;if(u=i[0],!t)return r()(c,((t,n)=>{const i=_(u.x,u.y,t.way,t.value);let r=null;n===c.length-1&&e.shapeProps.destinationCap&&"empty"!==e.shapeProps.destinationCap&&(r=I(i.x,i.y,u.x,u.y,e.shapeProps.destinationCapSize,e.shapeProps.destinationCap)),r?(m+=` L ${r.entryPoint.x} ${r.entryPoint.y}`,s.push(r)):(m+=` L ${i.x} ${i.y}`,u=i)})),{path:m,caps:s};const f=Math.max(0,e.shapeProps.stepSize);let y=0;for(let e=0;e<c.length-1;e++){const t=c[e],i=c[e+1],r=Math.min(t.value,i.value);if(r>1&&i.way!==t.way){const e=Math.min(f,r/2),s=_(u.x,u.y,t.way,t.value-y),o=_(u.x,u.y,t.way,t.value-e-y),a=_(s.x,s.y,i.way,e);if(n){const n=(b=t.way,w=i.way,v[b][w]>0?1:0);m+=` L ${o.x} ${o.y} A ${e} ${e} 0 0 ${n} ${a.x} ${a.y}`}else m+=` L ${o.x} ${o.y} L ${a.x} ${a.y}`;y=e,u=a}else{const e=_(u.x,u.y,t.way,t.value-y);m+=` L ${e.x} ${e.y}`,u=e,y=0}}var b,w;const A=c[c.length-1],S=_(u.x,u.y,A.way,A.value-y);let k=null;return e.shapeProps.destinationCap&&"empty"!==e.shapeProps.destinationCap&&(k=I(S.x,S.y,u.x,u.y,e.shapeProps.destinationCapSize,e.shapeProps.destinationCap)),k?(m+=` L ${k.entryPoint.x} ${k.entryPoint.y}`,k.prolongLine&&(m+=` L ${S.x} ${S.y}`),s.push(k)):m+=` L ${S.x} ${S.y}`,{path:m,caps:s}}function S(e){if(e.shapeProps.points.length<2)return"";let t="";const n=[],i=[],s=[],o=[],a=[],c=[];r()(e.shapeProps.points,((t,r)=>{if(r<e.shapeProps.points.length-1){const l=e.shapeProps.points[r+1];n[r]={x:l.x-t.x,y:l.y-t.y};const h=n[r].x*n[r].x+n[r].y*n[r].y;if(h>.001){const e=Math.sqrt(h);i[r]={x:n[r].x/e,y:n[r].y/e}}else i[r]=n[r];s[r]={x:i[r].y*e.shapeProps.fatWidth,y:-i[r].x*e.shapeProps.fatWidth},o[r]={x:-s[r].x,y:-s[r].y},a[r]={x:t.x+s[r].x,y:t.y+s[r].y},c[r]={x:t.x+o[r].x,y:t.y+o[r].y}}}));const h=[];let d=!1,u=!1;r()(e.shapeProps.points,((r,o)=>{if(0!==o){if(o>0&&o<e.shapeProps.points.length-1)if(h[o]=l.Z.angleBetweenVectors(n[o].x,n[o].y,-n[o-1].x,-n[o-1].y),h[o]<0){const e=l.Z.linesIntersection(l.Z.createLineEquation(a[o-1].x,a[o-1].y,a[o-1].x+n[o-1].x,a[o-1].y+n[o-1].y),l.Z.createLineEquation(a[o].x,a[o].y,a[o].x+n[o].x,a[o].y+n[o].y));e&&h[o]<-.1?t+=` L ${e.x} ${e.y}`:t+=` L ${a[o].x} ${a[o].y}`}else t+=` L ${r.x+s[o-1].x} ${r.y+s[o-1].y}  L ${r.x+s[o].x} ${r.y+s[o].y}`;if(o===e.shapeProps.points.length-1&&o>0){const a=n[o-1].x*n[o-1].x+n[o-1].y*n[o-1].y,l=3*e.shapeProps.fatWidth;if("triangle"===e.shapeProps.destinationCap&&Math.sqrt(a)>l){d=!0;const e=r.x-i[o-1].x*l,n=r.y-i[o-1].y*l;t+=` L ${e+s[o-1].x} ${n+s[o-1].y} L ${e+2*s[o-1].x} ${n+2*s[o-1].y} L ${r.x} ${r.y}`}else t+=` L ${r.x+s[o-1].x} ${r.y+s[o-1].y}`}}else{const l=n[0].x*n[0].x+n[0].y*n[0].y,c=3*e.shapeProps.fatWidth;if("triangle"===e.shapeProps.sourceCap&&Math.sqrt(l)>c){u=!0;const n=r.x+i[0].x*e.shapeProps.fatWidth*3,o=r.y+i[0].y*e.shapeProps.fatWidth*3;t+=` M ${m(r.x)} ${m(r.y)}  L ${n+2*s[0].x} ${o+2*s[0].y} L ${n+s[0].x} ${o+s[0].y}`}else t=`M ${m(a[o].x)} ${m(a[o].y)}`}}));for(let r=e.shapeProps.points.length-1;r>=0;r--){const s=e.shapeProps.points[r];if(r===e.shapeProps.points.length-1)if(d){const n=s.x-i[r-1].x*e.shapeProps.fatWidth*3,a=s.y-i[r-1].y*e.shapeProps.fatWidth*3;t+=` L ${n+2*o[r-1].x} ${a+2*o[r-1].y} L ${n+o[r-1].x} ${a+o[r-1].y}`}else t+=` L ${s.x+o[r-1].x} ${s.y+o[r-1].y}`;else if(r>0)if(h[r]>0){const e=l.Z.linesIntersection(l.Z.createLineEquation(c[r-1].x,c[r-1].y,c[r-1].x+n[r-1].x,c[r-1].y+n[r-1].y),l.Z.createLineEquation(c[r].x,c[r].y,c[r].x+n[r].x,c[r].y+n[r].y));e&&h[r]>.1?t+=` L ${e.x} ${e.y}`:t+=` L ${c[r].x} ${c[r].y}`}else t+=` L ${s.x+o[r].x} ${s.y+o[r].y} L ${s.x+o[r-1].x} ${s.y+o[r-1].y}`;else if(0===r)if(u){const n=s.x+i[0].x*e.shapeProps.fatWidth*3,r=s.y+i[0].y*e.shapeProps.fatWidth*3;t+=` L ${n+o[0].x} ${r+o[0].y} L ${n+2*o[0].x} ${r+2*o[0].y} Z`}else t+=`L ${s.x+o[r].x} ${s.y+o[r].y} z`}return t}function k(e){return e.shapeProps.points.length<2?null:e.shapeProps.fat?{path:S(e),caps:[]}:"smooth"===e.shapeProps.smoothing?function(e){const t=h.Z.clone(e.shapeProps.points);if(t.length<2)return{path:null,caps:[]};let n="";const i=[];let s=null,o=null,a=null;if(e.shapeProps.sourceCap&&"empty"!==e.shapeProps.sourceCap){let n=t[1].x,r=t[1].y;void 0!==t[0].bx&&(n=t[0].x+t[0].bx*e.shapeProps.sourceCapSize,r=t[0].y+t[0].by*e.shapeProps.sourceCapSize),s=I(t[0].x,t[0].y,n,r,e.shapeProps.sourceCapSize,e.shapeProps.sourceCap),s&&(t[0].x=s.entryPoint.x,t[0].y=s.entryPoint.y,i.push(s))}if(e.shapeProps.destinationCap&&"empty"!==e.shapeProps.destinationCap){const n=t.length-1;let r=t[n-1].x,s=t[n-1].y;void 0!==t[n].bx&&(r=t[n].x+t[n].bx*e.shapeProps.destinationCapSize,s=t[n].y+t[n].by*e.shapeProps.destinationCapSize),o=I(t[n].x,t[n].y,r,s,e.shapeProps.destinationCapSize,e.shapeProps.destinationCap,e.shapeProps.fill),o&&(t[n].x=o.entryPoint.x,t[n].y=o.entryPoint.y,i.push(o))}if(2===t.length&&e.shapeProps.sourceItem&&e.shapeProps.destinationItem&&void 0!==t[0].bx&&void 0!==t[1].bx){const n=l.Z.distanceBetweenPoints(t[0].x,t[0].y,t[1].x,t[1].y)/3;let r="";if(r=s&&s.prolongLine?`M ${m(e.shapeProps.points[0].x)} ${m(e.shapeProps.points[0].y)} L ${m(t[0].x)} ${m(t[0].y)} `:`M ${m(t[0].x)} ${m(t[0].y)} `,r+=`C ${m(t[0].x+n*t[0].bx)} ${m(t[0].y+n*t[0].by)} ${m(t[1].x+n*t[1].bx)}  ${m(t[1].y+n*t[1].by)} ${m(t[1].x)} ${m(t[1].y)} `,o&&o.prolongLine){const t=e.shapeProps.points[e.shapeProps.points.length-1];r+=`L ${m(t.x)} ${m(t.y)}`}return{path:r,caps:i}}const c=[];if(r()(t,((e,n)=>{let i=e;n>0&&(i=t[n-1]);let r=e;n<t.length-1&&(r=t[n+1]);let s=r.x-i.x,o=r.y-i.y;const a=Math.sqrt(s*s+o*o);a>1e-5&&(s/=a,o/=a),c[n]={x:s,y:o}})),r()(t,((i,r)=>{if(0===r)n=s&&s.prolongLine?`M ${m(e.shapeProps.points[0].x)} ${m(e.shapeProps.points[0].y)} L ${m(i.x)} ${m(i.y)} `:`M ${m(i.x)} ${m(i.y)} `;else if(1===r&&e.shapeProps.sourceItem&&void 0!==a.bx){const e=l.Z.distanceBetweenPoints(a.x,a.y,i.x,i.y)/3.5;let s=0,o=0;r<t.length-1&&(s=c[r].x,o=c[r].y),n+=` C ${m(a.x+e*a.bx)} ${m(a.y+e*a.by)} ${m(i.x-e*s)} ${m(i.y-e*o)} ${m(i.x)} ${m(i.y)}`}else if(r===t.length-1&&e.shapeProps.destinationItem&&void 0!==i.bx){const e=l.Z.distanceBetweenPoints(a.x,a.y,i.x,i.y)/3.5;let t=0,s=0;r>1&&(t=c[r-1].x,s=c[r-1].y),n+=` C ${m(a.x+e*t)} ${m(a.y+e*s)}  ${m(i.x+e*i.bx)} ${m(i.y+e*i.by)} ${m(i.x)} ${m(i.y)}`}else{const e=l.Z.distanceBetweenPoints(a.x,a.y,i.x,i.y)/3.5;let t=c[r-1].x,s=c[r-1].y,o=c[r].x,h=c[r].y;n+=` C ${m(a.x+e*t)} ${m(a.y+e*s)}  ${m(i.x-e*o)} ${m(i.y-e*h)} ${m(i.x)} ${m(i.y)}`}a=i})),o&&o.prolongLine){const t=e.shapeProps.points[e.shapeProps.points.length-1];n+=`L ${t.x} ${t.y}`}return{path:n,caps:i}}(e):"step"===e.shapeProps.smoothing?A(e,!1,!1):"step-cut"===e.shapeProps.smoothing?A(e,!0,!1):"step-smooth"===e.shapeProps.smoothing?A(e,!0,!0):function(e){let t="";const n=[];return r()(e.shapeProps.points,((i,r)=>{if(0===r){let r=null;if(e.shapeProps.sourceCap&&"empty"!==e.shapeProps.sourceCap){const t=e.shapeProps.points[1];r=I(i.x,i.y,t.x,t.y,e.shapeProps.sourceCapSize,e.shapeProps.sourceCap)}r?(t=r.prolongLine?`M ${i.x} ${i.y} L ${r.entryPoint.x} ${r.entryPoint.y} `:`M ${r.entryPoint.x} ${r.entryPoint.y} `,n.push(r)):t=`M ${i.x} ${i.y} `}else if(r===e.shapeProps.points.length-1){let s=null;if(e.shapeProps.destinationCap&&"empty"!==e.shapeProps.destinationCap){const t=e.shapeProps.points[r-1];s=I(i.x,i.y,t.x,t.y,e.shapeProps.destinationCapSize,e.shapeProps.destinationCap)}s?(t+=`L ${s.entryPoint.x} ${s.entryPoint.y} `,s.prolongLine&&(t+=`L ${i.x} ${i.y} `),n.push(s)):t+=`L ${i.x} ${i.y} `}else t+=` L ${i.x} ${i.y} `})),{path:t,caps:n}}(e)}function I(e,t,n,i,r,s){if("empty"!==s){const o=n-e,a=i-t,l=o*o+a*a;if(l>1e-4){const n=Math.sqrt(l);return(0,c.g)(e,t,o*r/n,a*r/n,s)}}return null}const P=Symbol("dstReadjustCtx"),E=Symbol("srcReadjustCtx");function T(e,t){if(e.hasOwnProperty("bx")&&e.hasOwnProperty("by")&&t){const n=t.x-e.x,i=t.y-e.y;180*l.Z.cosineAngleBetweenVectors(e.bx,e.by,n,i)/Math.PI>90&&(e.bx=-e.bx,e.by=-e.by)}}function M(e,t,n,i,r,s,o,a,c){const h=e.findFirstElementBySelector(r);if(h&&h.id!==t.id&&h.shape){if(s<0){const n=Math.round(-s-1),i=e.getItemWorldPinPoint(h,n);if(i){const n=e.localPointOnItem(i.x,i.y,t),r={t:"L",x:n.x,y:n.y};i.hasOwnProperty("nx")&&(r.bx=i.nx,r.by=i.ny),c(r,s)}return}const i=e.getSvgOutlineOfItem(h);if(!i)return;let r=null,d=null,u=E;a||(u=P),o&&o.id?t.meta[u]&&t.meta[u].id===o.id?(r=t.meta[u].oldPoint,d=t.meta[u].worldOldPoint):(r=n,d=e.worldPointOnItem(r.x,r.y,t),t.meta[u]={id:o.id,oldPoint:r,worldOldPoint:d}):(r=t.shapeProps.points[t.shapeProps.points.length-1],d=e.worldPointOnItem(r.x,r.y,t));let m=null,f=s;if(o&&(o.rotated||o.resized)){const n=e.localPointOnItem(d.x,d.y,h);f=l.Z.closestPointOnPath(n.x,n.y,i).distance;const r=p(h,i,f,e);m=e.localPointOnItem(r.x,r.y,t)}else{const n=p(h,i,s,e);m=e.localPointOnItem(n.x,n.y,t)}const g=e.calculateNormalOnPointInItemOutline(h,f,i);c({t:r.t,x:m.x,y:m.y,bx:g.x,by:g.y},f)}}function O(e,t,n){return l.Z.worldPointInArea(e,t,n.area,n.meta&&n.meta.transformMatrix?n.meta.transformMatrix:null)}const D=[{t:"L",x:4,y:88},{t:"L",x:136,y:4}],$="Connections",B={props:["item"],components:{AdvancedFill:d.Z},shapeConfig:{shapeType:"vue",id:"connector",computePath:function(e){const t=k(e);return t?t.path:null},readjustItem:function(e,t,n,i,s){return u.info("readjustItem",e.id,e.name,{item:e,isSoft:n,context:i},s),n||function(e,t){if(u.info("readjustItemArea",e.id,e.name,{item:e},t),e.shapeProps.points.length<1)return;const n=[];r()(e.shapeProps.points,(t=>{n.push(O(t.x,t.y,e))}));let i=n[0].x,s=n[0].y,o=n[0].x,a=n[0].y;r()(n,(e=>{i=Math.min(i,e.x),s=Math.min(s,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y)}));const c=[];r()(n,(e=>{c.push({x:e.x-i,y:e.y-s})})),e.shapeProps.points=c,e.area.r=0,e.area.w=Math.max(0,o-i),e.area.h=Math.max(0,a-s);const h=l.Z.findTranslationMatchingWorldPoint(i,s,0,0,e.area,e.meta.transformMatrix);e.area.x=h.x,e.area.y=h.y}(e,s),e.shapeProps.sourceItem&&M(t,e,e.shapeProps.points[0],e.shapeProps.points[1],e.shapeProps.sourceItem,e.shapeProps.sourceItemPosition,i,!0,((t,n)=>{e.shapeProps.points[0]=t,e.shapeProps.sourceItemPosition=n})),e.shapeProps.destinationItem&&e.shapeProps.points.length>1&&M(t,e,e.shapeProps.points[e.shapeProps.points.length-1],e.shapeProps.points[e.shapeProps.points.length-2],e.shapeProps.destinationItem,e.shapeProps.destinationItemPosition,i,!1,((t,n)=>{e.shapeProps.points[e.shapeProps.points.length-1]=t,e.shapeProps.destinationItemPosition=n})),e.shapeProps.sourceItem&&e.shapeProps.points.length>1&&T(e.shapeProps.points[0],e.shapeProps.points[1]),e.shapeProps.destinationItem&&e.shapeProps.points.length>1&&T(e.shapeProps.points[e.shapeProps.points.length-1],e.shapeProps.points[e.shapeProps.points.length-2]),!0},getSnappers:function(e){const t=[];return r()(e.shapeProps.points,(n=>{const i=O(n.x,n.y,e);t.push({item:e,snapperType:"horizontal",value:i.y}),t.push({item:e,snapperType:"vertical",value:i.x})})),t},menuItems:[{group:$,name:"Empty Connector",iconUrl:"/assets/images/items/connector-empty.svg",item:{shapeProps:{fat:!1,sourceCap:"empty",destinationCap:"empty",points:D}}},{group:$,name:"Step Connector",iconUrl:"/assets/images/items/connector-step.svg",item:{shapeProps:{fat:!1,sourceCap:"empty",destinationCap:"empty",smoothing:"step",points:[{x:4,y:88},{x:70,y:51},{x:136,y:4}]}}},{group:$,name:"Step Connector",iconUrl:"/assets/images/items/connector-step-smooth.svg",item:{shapeProps:{fat:!1,sourceCap:"empty",destinationCap:"empty",smoothing:"step-smooth",points:[{x:4,y:88},{x:70,y:51},{x:136,y:4}]}}},{group:$,name:"Triangle Connector",iconUrl:"/assets/images/items/connector-triangle.svg",item:{shapeProps:{fat:!1,sourceCap:"empty",destinationCap:"triangle",points:D}}},{group:$,name:"Triangle Connector",iconUrl:"/assets/images/items/connector-triangle-white.svg",item:{shapeProps:{fat:!1,sourceCap:"empty",destinationCap:"triangle-h",points:D}}},{group:$,name:"Arrow Connector",iconUrl:"/assets/images/items/connector-arrow.svg",item:{shapeProps:{fat:!1,sourceCap:"empty",destinationCap:"arrow",points:D}}},{group:$,name:"Triangle Connector (Both Sides)",iconUrl:"/assets/images/items/connector-triangle-both.svg",item:{shapeProps:{fat:!1,sourceCap:"triangle",destinationCap:"triangle",points:D}}},{group:$,name:"Triangle Connector (Both Sides)",iconUrl:"/assets/images/items/connector-triangle-white-both.svg",item:{shapeProps:{fat:!1,sourceCap:"triangle-h",destinationCap:"triangle-h",points:D}}},{group:$,name:"Arrow Connector (Both Sides)",iconUrl:"/assets/images/items/connector-arrow-both.svg",item:{shapeProps:{fat:!1,sourceCap:"arrow",destinationCap:"arrow",points:D}}},{group:$,name:"Fat Connector",iconUrl:"/assets/images/items/connector-arrow-fat.svg",item:{shapeProps:{sourceCap:"empty",destinationCap:"triangle",points:D,fat:!0,fatWidth:10}}},{group:$,name:"Fat Connector (Both Arrows)",iconUrl:"/assets/images/items/connector-arrow-fat-both.svg",item:{shapeProps:{sourceCap:"triangle",destinationCap:"triangle",points:D,fat:!0,fatWidth:10}}}],getTextSlots:()=>[],getPins:e=>r()(e.shapeProps.points,(e=>({x:e.x,y:e.y}))),editorProps:{description:"rich"},controlPoints:{make(e,t){if(!t){const t={};return r()(e.shapeProps.points,((n,i)=>{t[i]={x:n.x,y:n.y,isEdgeStart:0===i,isEdgeEnd:i===e.shapeProps.points.length-1}})),t}{const n=parseInt(t);if(e.shapeProps.points[t])return{x:e.shapeProps.points[t].x,y:e.shapeProps.points[t].y,isEdgeStart:0===n,isEdgeEnd:n===e.shapeProps.points.length-1}}},handleDrag(e,t,n,i,r,s,o,a){}},args:{strokeColor:{type:"color",value:"rgba(30,30,30,1.0)",name:"Stroke color"},strokeSize:{type:"number",value:2,name:"Stroke size"},strokePattern:{type:"stroke-pattern",value:"solid",name:"Stroke pattern"},points:{type:"path-points",value:[],name:"Path points",hidden:!0},sourceCap:{type:"path-cap",value:"empty",name:"Source Cap"},sourceCapSize:{type:"number",value:20,name:"Source Cap Size"},destinationCap:{type:"path-cap",value:"empty",name:"Destination Cap"},destinationCapSize:{type:"number",value:20,name:"Destination Cap Size"},smoothing:{type:"choice",value:"smooth",options:["linear","smooth","step","step-cut","step-smooth"],name:"Smoothing Type"},stepSize:{type:"number",value:10,name:"Step size",depends:{smoothing:["step-cut","step-smooth"]}},fat:{type:"boolean",value:!1,name:"Fat"},fill:{type:"advanced-color",value:{type:"solid",color:"rgba(255,255,255,1.0)"},name:"Fill",depends:{fat:!0}},fatWidth:{type:"number",value:10,name:"Fat Width",min:1,max:1e3,depends:{fat:!0}},sourceItem:{type:"element",value:null,name:"Source Item",description:"Attach this curve to an item as a source",hidden:!0},destinationItem:{type:"element",value:null,name:"Destination Item",description:"Attach this curve to an item as a destination",hidden:!0},sourceItemPosition:{type:"number",value:0,name:"Position On Source Item",description:"Distance on the path of the item where this curve should be attached to",hidden:!0},destinationItemPosition:{type:"number",value:0,name:"Position On Source Item",description:"Distance on the path of the item where this curve should be attached to",hidden:!0}}},mounted(){o.Z.subscribeForItemChanged(this.item.id,this.onItemChange)},beforeDestroy(){o.Z.unsubscribeForItemChanged(this.item.id,this.onItemChange)},data(){const e=k(this.item);return{shapePath:e?e.path:null,caps:e?e.caps:null}},methods:{onItemChange(){u.info("onItemChange",this.item.id,this.item.name,this.item);const e=k(this.item);e&&(this.shapePath=e.path,this.caps=e.caps),u.info("computed path and caps",this.item.id,this.item.name,this.shapePath,this.caps),this.$forceUpdate()}},computed:{strokeDashArray(){return s.Z.createDashArray(this.item.shapeProps.strokePattern,this.item.shapeProps.strokeSize)},svgFill(){return this.item.shapeProps.fat?d.Z.computeSvgFill(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`):"none"}}},L=(0,n(1900).Z)(B,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[n("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),n("path",{staticStyle:{"stroke-linejoin":"round"},attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,"stroke-dasharray":e.strokeDashArray,fill:e.svgFill}}),e._v(" "),e.item.shapeProps.fat?e._e():n("g",e._l(e.caps,(function(t){return n("path",{attrs:{d:t.path,"data-item-id":e.item.id,stroke:e.item.shapeProps.strokeColor,"stroke-width":e.item.shapeProps.strokeSize,fill:t.hollow?"none":e.item.shapeProps.strokeColor,"stroke-linejoin":"round"}})})),0)],1)}),[],!1,null,null,null).exports},3355:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(9825),r=n(4502);function s(e){const t=e.area.w,n=e.area.h,i=Math.min(e.shapeProps.cornerRadius,e.area.w/2,e.area.h/2);return`M ${t-i} ${n}  L ${i} ${n} a ${i} ${i} 0 0 1 ${-i} ${-i}  L 0 ${i}  a ${i} ${i} 0 0 1 ${i} ${-i}   L ${t-i} 0   a ${i} ${i} 0 0 1 ${i} ${i}  L ${t} ${n-i}   a ${i} ${i} 0 0 1 ${-i} ${i} Z`}const o={props:["item"],shapeConfig:{shapeType:"vue",id:"dummy",menuItems:[{group:"General",name:"Dummy",iconUrl:"/assets/images/items/dummy.svg",description:"\n                Dummy item can be used in order to group mulitple items together.\n                It is only visible in the edit mode and completely transparent in view mode.\n            ",item:{shapeProps:{cornerRadius:0}}}],components:{AdvancedFill:i.Z},getTextSlots:e=>[],computePath:s,editorProps:{onlyEditMode:!0},args:{fill:{name:"Fill",type:"advanced-color",value:{type:"solid",color:"rgba(159, 227, 249, 0.1)"}},strokeColor:{name:"Stroke",type:"color",value:"rgba(50, 175, 209, 1)"},strokeSize:{name:"Stroke Size",type:"number",value:1},strokePattern:{type:"stroke-pattern",value:"dashed",name:"Stroke pattern"},cornerRadius:{type:"number",value:0,name:"Corner radius"},showName:{type:"boolean",value:!0,name:"Display Name"}}},computed:{shapePath(){return s(this.item)},strokeDashArray(){return r.Z.createDashArray(this.item.shapeProps.strokePattern,this.item.shapeProps.strokeSize)},fill(){return i.Z.computeStandardFill(this.item)}}},a=(0,n(1900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{attrs:{"data-preview-ignore":"true"}},[n("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),e.item.shapeProps.showName?n("foreignObject",{attrs:{x:0,y:-20,width:e.item.area.w,height:20}},[n("div",{staticStyle:{"font-size":"12px","font-weight":"bold",display:"table-cell",padding:"2px 5px",height:"20px","font-family":"Arial, Helvetica, sans-serif","text-align":"left","vertical-align":"bottom","white-space":"normal"},style:{background:e.item.shapeProps.strokeColor,color:"white"},attrs:{"data-item-id":e.item.id}},[e._v("\n            "+e._s(e.item.name)+"\n        ")])]):e._e(),e._v(" "),n("path",{attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,"stroke-dasharray":e.strokeDashArray,fill:e.fill}})],1)}),[],!1,null,null,null).exports},5530:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(4486),r=n.n(i),s=n(536);const o={props:["item"],shapeConfig:{shapeType:"vue",id:"frame_player",menuItems:[{group:"General",name:"Frame Player",iconUrl:"/assets/images/items/frame-player.svg",size:{w:140,h:100},item:{textSlots:{title:{text:"<b>Frame Player</b>",color:"#000000",fontSize:14}}}}],getPins:e=>[],getTextSlots:e=>[{name:"title",area:{x:0,y:0,w:e.area.w,h:Math.max(0,e.area.h-60)}}],computePath(e){const t=e.area.w,n=e.area.h;return`M 0 0   L ${t} 0  L ${t} ${n}  L 0 ${n} z`},editorProps:{ignoreEventLayer:!0},args:{totalFrames:{type:"number",value:5,name:"Total frames"},fps:{type:"number",value:1,name:"Frames per second"},fillColor:{type:"color",value:"rgba(220, 220, 220, 1.0)",name:"Fill color"},hoverFillColor:{type:"color",value:"rgba(190, 190, 190, 1.0)",name:"Hover fill color"},strokeColor:{type:"color",value:"rgba(30,30,30,1.0)",name:"Stroke color"},animations:{type:"animations",value:[],name:"Animations",hidden:!0},functions:{type:"animation-functions",value:{},name:"Animation Functions",hidden:!0},sections:{type:"animation-sections",value:[],name:"Sections",hidden:!0}}},beforeMount(){s.Z.emitFramePlayerPrepared(this.item,this.createFrameCallbacks())},data(){const e=[],t=new Map,n=new Map;this.item.shapeProps.sections.sort(((e,t)=>e.frame-t.frame)),r()(this.item.shapeProps.sections,((e,i)=>{const r={number:i+1,name:e.value,frame:e.frame};t.set(e.frame,r),n.set(r.number,r)}));let i=null,s=null;for(let n=0;n<this.item.shapeProps.totalFrames;n++){const r=n+1;t.has(r)&&(s=t.get(r),i||(i=s)),e[n]=s}let o=[{icon:"fas fa-play",iconPlaying:"fas fa-pause",click:()=>{this.onClickedTogglePlay()}}];return this.item.shapeProps.sections.length>0&&(o=[{icon:"fas fa-fast-backward",iconPlaying:"fas fa-fast-backward",click:()=>{this.onClickedToBegin()}},{icon:"fas fa-step-backward",iconPlaying:"fas fa-step-backward",click:()=>{this.onClickedLeft()}}].concat(o).concat([{icon:"fas fa-step-forward",iconPlaying:"fas fa-step-forward",click:()=>{this.onClickPlayToNext()}},{icon:"fas fa-fast-forward",iconPlaying:"fas fa-fast-forward",click:()=>{this.onClickFastRight()}}])),o.forEach((e=>{e.fillColor=this.item.shapeProps.fillColor})),{currentFrame:1,isPlaying:!1,intervalId:null,buttonSize:20,buttonSpaceSize:4,buttonFontSize:"10px",sectionsMapping:e,sectionsByNumber:n,currentSection:i,totalSections:this.item.shapeProps.sections.length,buttons:o}},methods:{onClickedButton(e){this.buttons[e].click()},onClickedToBegin(){const e=this.sectionsByNumber.get(1);e&&(this.currentFrame=1,this.currentSection=e,this.emitCurrentFrameEvent())},onClickFastRight(){if(this.currentSection){const e=this.sectionsByNumber.get(this.currentSection.number+1);if(e){const t=e.frame;t>=0&&(this.currentFrame=t,this.currentSection=e,this.emitCurrentFrameEvent())}}},onClickedLeft(){if(this.currentSection){const e=this.sectionsByNumber.get(this.currentSection.number-1);if(e){const t=e.frame;t>=0&&(this.currentFrame=t,this.currentSection=e,this.emitCurrentFrameEvent())}}},createFrameCallbacks(){return{onFrame:e=>{this.currentFrame=e,e<=this.sectionsMapping.length&&e>0&&(this.currentSection=this.sectionsMapping[e-1])},onFinish:()=>{this.isPlaying=!1}}},onClickPlayToNext(){if(this.currentSection){let e=-1;const t=this.sectionsByNumber.get(this.currentSection.number+1);if(t){const n=t.frame;n<=this.item.shapeProps.totalFrames&&(e=n)}this.$emit("frame-animator",{operation:"play",item:this.item,frame:this.currentFrame,stopFrame:e,callbacks:this.createFrameCallbacks()})}},onClickedTogglePlay(){if(this.isPlaying)this.$emit("frame-animator",{operation:"stop",item:this.item});else{this.isPlaying=!0;let e=this.currentFrame;this.currentFrame>=this.item.shapeProps.totalFrames&&(e=1),this.$emit("frame-animator",{operation:"play",item:this.item,frame:e,callbacks:this.createFrameCallbacks()})}},emitCurrentFrameEvent(){this.$emit("frame-animator",{operation:"setFrame",item:this.item,frame:this.currentFrame})},onMouseOverButton(e){r()(this.buttons,((t,n)=>{t.fillColor=n===e?this.item.shapeProps.hoverFillColor:this.item.shapeProps.fillColor}))},onMouseOutButton(e){this.buttons[e].fillColor=this.item.shapeProps.fillColor}},computed:{leftOffset(){return this.item.area.w/2-(this.buttonSize*(this.buttons.length/2)+this.buttonSpaceSize*(this.buttons.length-1)/2)},framesTextStyle(){return{color:this.item.textSlots.title.color,"font-size":`${this.item.textSlots.title.fontSize}px`,"text-align":"center"}},topOffset(){return Math.max(0,this.item.area.h-60)},shoulShowCurrentSectionName(){return!!this.currentSection&&""+this.currentSection.number!==this.currentSection.name}}},a=(0,n(1900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[e._l(e.buttons,(function(t,i){return n("g",{on:{click:function(t){return e.onClickedButton(i)},mouseover:function(t){return e.onMouseOverButton(i)},mouseout:function(t){return e.onMouseOutButton(i)}}},[n("circle",{staticStyle:{"-webkit-transition":"fill 200ms linear","-ms-transition":"fill 200ms linear",transition:"fill 200ms linear"},attrs:{cx:e.leftOffset+i*(e.buttonSize+e.buttonSpaceSize)+e.buttonSize/2,cy:e.buttonSize/2+e.topOffset,r:e.buttonSize/2,fill:t.fillColor,stroke:e.item.shapeProps.strokeColor,"stroke-width":"1"}}),e._v(" "),n("foreignObject",{attrs:{x:e.leftOffset+i*(e.buttonSize+e.buttonSpaceSize),y:e.topOffset,width:e.buttonSize,height:e.buttonSize}},[n("div",{staticStyle:{width:"100%",height:"100%","text-align":"center","vertical-align":"middle"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[n("i",{class:[e.isPlaying?t.iconPlaying:t.icon],style:{"font-size":e.buttonFontSize,color:e.item.shapeProps.strokeColor}})])]),e._v(" "),n("circle",{staticStyle:{cursor:"pointer"},attrs:{cx:e.leftOffset+i*(e.buttonSize+e.buttonSpaceSize)+e.buttonSize/2,cy:e.buttonSize/2+e.topOffset,r:e.buttonSize/2,fill:"rgba(255, 255, 255, 0)",stroke:"rgba(255, 255, 255, 0)","stroke-width":"1"}})])})),e._v(" "),e.currentSection?n("foreignObject",{attrs:{x:"0",y:e.buttonSize+6+e.topOffset,width:e.item.area.w,height:"60",xmlns:"http://www.w3.org/1999/xhtml"}},[n("div",{style:e.framesTextStyle},[n("div",[e._v(e._s(e.currentSection.number)+" / "+e._s(e.totalSections))]),e._v(" "),e.shoulShowCurrentSectionName?n("div",[e._v(e._s(e.currentSection.name))]):e._e()])]):e._e()],2)}),[],!1,null,null,null).exports},9243:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(9825),r=n(4502);function s(e){const t=e.area.w,n=e.area.h;return`M ${t} ${n}  L 0 ${n} L 0 0  L ${t} 0  L ${t} ${n} Z`}const o={props:["item"],shapeConfig:{shapeType:"vue",components:{AdvancedFill:i.Z},id:"hud",menuItems:[{group:"General",name:"HUD",iconUrl:"/assets/images/items/hud.svg",description:"\n                HUD stands for Heads Up Display. \n                When going into view mode, HUD item will always be rendered in the viewport.\n                This lets you design your own menu on top of the scheme which will always stay in the same place even if you drag screen"}],getTextSlots:e=>[],computePath:s,editorProps:{onlyEditMode:!0},args:{fill:{name:"Fill",type:"advanced-color",value:{type:"solid",color:"rgba(159, 227, 249, 0.1)"}},strokeColor:{name:"Stroke",type:"color",value:"rgba(50, 175, 209, 1)"},strokeSize:{name:"Stroke Size",type:"number",value:1},strokePattern:{type:"stroke-pattern",value:"dashed",name:"Stroke pattern"},horizontalPosition:{type:"choice",value:"left",options:["left","right","center"],name:"Horizontal Position"},verticalPosition:{type:"choice",value:"top",options:["top","bottom","center"],name:"Vertical Position"}}},computed:{shapePath(){return s(this.item)},strokeDashArray(){return r.Z.createDashArray(this.item.shapeProps.strokePattern,this.item.shapeProps.strokeSize)},fill(){return i.Z.computeStandardFill(this.item)}}},a=(0,n(1900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{attrs:{"data-preview-ignore":"true"}},[n("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),n("foreignObject",{attrs:{x:0,y:-20,width:e.item.area.w,height:20}},[n("div",{staticStyle:{"font-size":"12px","font-weight":"bold",display:"table-cell",padding:"2px 5px",height:"20px","font-family":"Arial, Helvetica, sans-serif","text-align":"left","vertical-align":"bottom","white-space":"normal"},style:{background:e.item.shapeProps.strokeColor,color:"white"},attrs:{"data-item-id":e.item.id}},[e._v("\n            "+e._s(e.item.name)+"\n        ")])]),e._v(" "),n("path",{attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,"stroke-dasharray":e.strokeDashArray,fill:e.fill}})],1)}),[],!1,null,null,null).exports},3097:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(9498),r=n(9825);const s=e=>{const t=e.area.w,n=e.area.h;return`M 0 0  L ${t} 0  L ${t} ${n} L 0 ${n} Z`},o={props:["item"],components:{AdvancedFill:r.Z},shapeConfig:{shapeType:"vue",id:"image",menuItems:[{group:"General",name:"Image",imageProperty:"shapeProps.image",iconUrl:"/assets/images/items/image.svg",description:"It lets you upload an image or specify a link to external image",item:{shapeProps:{image:"/assets/images/missing-scheme-preview.png"}}}],getPins:e=>(0,i.F)(e),computePath:s,getTextSlots:e=>[{name:"title",area:{x:0,y:0,w:e.area.w,h:Math.max(0,e.shapeProps.titleHeight)}}],editorProps:{},args:{image:{type:"image",name:"Image"},stretch:{type:"boolean",value:!1,name:"Stretch"},strokeColor:{type:"color",value:"rgba(80, 80, 80, 1.0)",name:"Stroke color"},strokeSize:{type:"number",value:0,name:"Stroke size"},showTitle:{type:"boolean",value:!1,name:"Title"},crop:{type:"crop-area",value:{x:0,y:0,w:0,h:0},name:"Crop",hidden:!0},titleHeight:{type:"number",value:36,name:"Title height",min:0,depends:{showTitle:!0}},titleFill:{type:"advanced-color",value:{type:"solid",color:"rgba(240,240,240,1.0)"},name:"Title Background",depends:{showTitle:!0}},fill:{type:"advanced-color",value:{type:"solid",color:"rgba(240,240,240,1.0)"},name:"Background",depends:{showTitle:!0}}}},computed:{shapePath(){return s(this.item)},svgTitleFill(){return r.Z.computeStandardFillForValue(this.item.shapeProps.titleFill,`titlefill-pattern-${this.item.id}`)},svgFill(){return r.Z.computeStandardFill(this.item)},imagePreserveAspectRatio(){return this.item.shapeProps.stretch?"none":"xMidYMid meet"},titleArea(){return{x:0,y:0,w:this.item.area.w,h:this.item.shapeProps.titleHeight}},imageX:()=>0,imageY(){return this.item.shapeProps.showTitle?this.item.shapeProps.titleHeight:0},imageWidth(){return this.item.area.w},imageHeight(){return this.item.shapeProps.showTitle?Math.max(0,this.item.area.h-this.item.shapeProps.titleHeight):this.item.area.h}}},a=(0,n(1900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[n("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.titleArea}}),e._v(" "),n("advanced-fill",{attrs:{fillId:"titlefill-pattern-"+e.item.id,fill:e.item.shapeProps.titleFill,area:e.item.area}}),e._v(" "),e.item.shapeProps.showTitle?n("rect",{attrs:{x:0,y:0,width:e.item.area.w,height:e.item.shapeProps.titleHeight,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,fill:e.svgTitleFill}}):e._e(),e._v(" "),e.item.shapeProps.showTitle?n("rect",{attrs:{x:e.imageX,y:e.imageY,width:e.imageWidth,height:e.imageHeight,"stroke-width":0,stroke:"none",fill:e.svgFill}}):e._e(),e._v(" "),n("g",{attrs:{transform:"translate(0 "+e.imageY+")"}},[e.item.shapeProps.image?n("defs",[n("clipPath",{attrs:{id:"image-crop-clip-path-"+e.item.id}},[n("path",{attrs:{d:"M 0 0  L "+e.item.area.w+" 0   L "+e.item.area.w+" "+e.item.area.h+"  L 0 "+e.item.area.h+" Z","data-item-id":e.item.id,"stroke-width":"0px",stroke:"rgba(255, 255, 255, 0)",fill:"rgba(255, 255, 255, 0)"}})]),e._v(" "),n("pattern",{attrs:{id:"image-fill-"+e.item.id,patternUnits:"userSpaceOnUse",width:e.imageWidth,height:e.imageHeight}},[n("image",{attrs:{"xlink:href":e.item.shapeProps.image,x:-e.item.shapeProps.crop.x*e.imageWidth,y:-e.item.shapeProps.crop.y*e.imageHeight,width:e.imageWidth*(1+e.item.shapeProps.crop.x+e.item.shapeProps.crop.w),height:e.imageHeight*(1+e.item.shapeProps.crop.y+e.item.shapeProps.crop.h),preserveAspectRatio:e.imagePreserveAspectRatio}})])]):e._e(),e._v(" "),n("g",{style:{"clip-path":"url(#image-crop-clip-path-"+e.item.id+")"}},[e.item.shapeProps.image?n("rect",{attrs:{x:0,y:0,width:e.imageWidth,height:e.imageHeight,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,fill:"url(#image-fill-"+e.item.id+")"}}):e._e()])])],1)}),[],!1,null,null,null).exports},6366:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(5161),r=n.n(i),s=n(9874),o=n(3762),a=n.n(o),l=n(536),c=n(5635);const h={props:["item"],shapeConfig:{shapeType:"vue",id:"link",menuItems:[{group:"General",name:"Link",iconUrl:"/assets/images/items/link.svg",item:{textSlots:{link:{text:"Link",fontSize:16,padding:{left:0,top:0,bottom:0,right:0},color:"#047EFB",halign:"left",valign:"top"}}}}],computePath(e){const t=e.area.w,n=e.area.h;return`M 0 0   L ${t} 0  L ${t} ${n}  L 0 ${n} z`},editorProps:{ignoreEventLayer:!0,customTextRendering:!0},getTextSlots:e=>[{name:"link",area:{x:0,y:0,w:e.area.w,h:e.area.h}}],args:{url:{type:"string",value:"",name:"URL"},otherTab:{type:"boolean",value:!1,name:"In Other Tab",description:"Open the link in another tab"},underline:{type:"boolean",value:!0,name:"Underline"},showIcon:{type:"boolean",value:!0,name:"Show Icon"},icon:{type:"choice",value:"default",name:"Icon",options:r()(s.Z.knownTypes,(e=>e.name))},iconColor:{type:"color",value:"#666666",name:"Color",depends:{showIcon:!0}}}},beforeMount(){l.Z.subscribeForItemChanged(this.item.id,this.onItemChanged),l.Z.$on(l.Z.ITEM_TEXT_SLOT_EDIT_TRIGGERED,this.onItemTextSlotEditTriggered),l.Z.$on(l.Z.ITEM_TEXT_SLOT_EDIT_CANCELED,this.onItemTextSlotEditCanceled)},beforeDestroy(){l.Z.unsubscribeForItemChanged(this.item.id,this.onItemChanged),l.Z.$off(l.Z.ITEM_TEXT_SLOT_EDIT_TRIGGERED,this.onItemTextSlotEditTriggered),l.Z.$off(l.Z.ITEM_TEXT_SLOT_EDIT_CANCELED,this.onItemTextSlotEditCanceled)},data(){return{linkStyle:this.createLinkStyle(),hideTextSlot:!1}},methods:{createLinkStyle(){const e=(0,c.A)(this.item.textSlots.link);return e["text-decoration"]=this.item.shapeProps.underline?"underline":"none",e},onLinkClick(e){return this.item.shapeProps.url.startsWith("/")&&(window.location=url,e.preventDefault()),!1},calculateTextOffset(){return this.item.shapeProps.showIcon?1.4*this.item.textSlots.link.fontSize:0},onItemChanged(){this.linkStyle=this.createLinkStyle()},onItemTextSlotEditTriggered(e,t,n,i){e.id===this.item.id&&(this.hideTextSlot=!0)},onItemTextSlotEditCanceled(e,t){e.id===this.item.id&&(this.hideTextSlot=!1)}},computed:{target(){return this.item.shapeProps.otherTab?"_blank":"_self"},iconStyle(){return{color:this.item.shapeProps.iconColor,"padding-top":this.linkStyle["padding-left"],"padding-bottom":this.linkStyle["padding-left"]}},linkHtml(){return a()(this.item.textSlots.link.text)},textOffset(){return this.calculateTextOffset()},textWidth(){return this.item.area.w-this.calculateTextOffset()},iconClass(){return s.Z.findTypeByNameOrDefault(this.item.shapeProps.icon).cssClass}}},d=(0,n(1900).Z)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[e.hideTextSlot?e._e():n("a",{staticClass:"item-link",attrs:{"xlink:href":e.item.shapeProps.url,target:e.target},on:{click:e.onLinkClick}},[e.item.shapeProps.showIcon?n("foreignObject",{style:e.iconStyle,attrs:{x:"0",y:"0",width:e.textOffset,height:e.item.area.h}},[n("div",{attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[n("i",{class:e.iconClass})])]):e._e(),e._v(" "),e.textWidth>0?n("foreignObject",{style:e.linkStyle,attrs:{x:e.textOffset,y:"0",width:e.textWidth,height:e.item.area.h}},[n("div",{attrs:{xmlns:"http://www.w3.org/1999/xhtml"},domProps:{innerHTML:e._s(e.linkHtml)}})]):e._e()])])}),[],!1,null,null,null).exports},9113:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m,T:()=>u});var i=n(9825),r=n(4502),s=n(536),o=n(2017),a=n(3590),l=n(125),c=n(8270);const h=new o.Yd("Path");function d(e){let t="";return e.shapeProps.paths.forEach((n=>{const i=(0,c.FI)(e.area.w,e.area.h,n.points,n.closed);i&&(t+=i+" ")})),t}function u(e,t){t||(t=5);const n=[];let i=[];n.push(i),e.forEach(((e,t)=>{e.break&&(i=[],n.push(i)),i.push(e)}));let r=[];return n.forEach(((e,n)=>{const i=a.Z.smoothPathPoints(a.Z.simplifyPathPointsUsingRDP(e,t));n>0&&e.length>0&&(e[0].break=!0),r=r.concat(i)})),r}const p={props:["item"],components:{AdvancedFill:i.Z},shapeConfig:{shapeType:"vue",id:"path",menuItems:[],computePath:d,readjustItem:function(e,t,n,i,r){return h.info("readjustItem",e.id,e.name,{item:e,isSoft:n,context:i},r),!0},getSnappers:function(e){const t=[];return e.shapeProps.paths.forEach((n=>{n.points.forEach((n=>{const i=function(e,t,n){return a.Z.worldPointInArea(e,t,n.area,n.meta&&n.meta.transformMatrix?n.meta.transformMatrix:null)}(n.x,n.y,e);t.push({item:e,snapperType:"horizontal",value:i.y}),t.push({item:e,snapperType:"vertical",value:i.x})}))})),t},getPins:e=>[],getTextSlots:()=>[],editorProps:{description:"rich"},controlPoints:null,args:{fill:{type:"advanced-color",value:{type:"none"},name:"Fill"},strokeColor:{type:"color",value:"rgba(30,30,30,1.0)",name:"Stroke color"},strokeSize:{type:"number",value:2,name:"Stroke size"},strokePattern:{type:"stroke-pattern",value:"solid",name:"Stroke pattern"},paths:{type:"path-array",value:[],name:"Paths",hidden:!0},sourceCap:{type:"path-cap",value:"empty",name:"Source Cap"},sourceCapSize:{type:"number",value:20,name:"Source Cap Size"},sourceCapFill:{type:"color",value:"rgba(30,30,30,1.0)",name:"Source Cap Fill"},destinationCap:{type:"path-cap",value:"empty",name:"Destination Cap"},destinationCapSize:{type:"number",value:20,name:"Destination Cap Size"},destinationCapFill:{type:"color",value:"rgba(30,30,30,1.0)",name:"Destination Cap Fill"}}},mounted(){s.Z.subscribeForItemChanged(this.item.id,this.onItemChange)},beforeDestroy(){s.Z.unsubscribeForItemChanged(this.item.id,this.onItemChange)},data(){const e=d(this.item);return{shapePath:e,caps:this.computeCaps(e)}},methods:{onItemChange(){h.info("onItemChange",this.item.id,this.item.name,this.item),this.shapePath=d(this.item),this.caps=this.computeCaps(this.shapePath),h.info("computed path and caps",this.item.id,this.item.name,this.shapePath,this.caps),this.$forceUpdate()},computeCaps(e){const t=[];let n=this.item.shapeProps.sourceCap||"empty",i=this.item.shapeProps.destinationCap||"empty";if("empty"===n&&"empty"===i)return t;const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d",e);const s=r.getTotalLength();if(s<3)return t;let o=this.computeCapByPosition(r,0,this.item.shapeProps.sourceCapSize,n,this.item.shapeProps.sourceCapFill);return o&&t.push(o),o=this.computeCapByPosition(r,s,s-this.item.shapeProps.destinationCapSize,i,this.item.shapeProps.destinationCapFill),o&&t.push(o),t},computeCapByPosition(e,t,n,i,r){if("empty"!==i){const s=e.getPointAtLength(t),o=e.getPointAtLength(n);if((o.x-s.x)*(o.x-s.x)+(o.y-s.y)*(o.y-s.y)>.01)return(0,l.g)(s.x,s.y,o.x-s.x,o.y-s.y,i,r)}return null}},computed:{strokeDashArray(){return r.Z.createDashArray(this.item.shapeProps.strokePattern,this.item.shapeProps.strokeSize)},fill(){return i.Z.computeStandardFill(this.item)}}},m=(0,n(1900).Z)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[n("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),n("path",{staticStyle:{"stroke-linejoin":"round"},attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,"stroke-dasharray":e.strokeDashArray,fill:e.fill}}),e._v(" "),e._l(e.caps,(function(t){return n("path",{attrs:{d:t.path,"data-item-id":e.item.id,stroke:e.item.shapeProps.strokeColor,"stroke-width":e.item.shapeProps.strokeSize,fill:t.fill,"stroke-linejoin":"round"}})}))],2)}),[],!1,null,null,null).exports},9739:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(9498),r=n(9825),s=n(5161),o=n.n(s);function a(e){const t=e.area.w,n=e.area.h;return`M ${t} ${n}  L 0 ${n} L 0 0   L ${t} 0 L ${t} ${n} Z`}const l={props:["item"],components:{AdvancedFill:r.Z},shapeConfig:{shapeType:"vue",id:"sticky_note",menuItems:o()([{name:"yellow",color:"rgba(240,234,55,1)"},{name:"red",color:"rgba(255,98,55,1)"},{name:"lime",color:"rgba(175,255,105,1)"},{name:"green",color:"rgba(148,255,112,1)"},{name:"blue",color:"rgba(116,255,255,1)"},{name:"purple",color:"rgba(212,184,255,1)"},{name:"pink",color:"rgba(255,184,235,1)"},{name:"white",color:"rgba(250,250,250,1)"},{name:"grey",color:"rgba(200,200,200,1)"}],(e=>({group:"Sticky Notes",name:`Sticky Note (${e.name})`,iconSVG:`<path fill="${e.color}" d="M 1 1  L 41 1  L 41 31  L 1 31 Z"/>`,item:{shapeProps:{fill:{type:"solid",color:e.color}}},size:{w:180,h:180}}))),getPins:e=>(0,i.F)(e),getTextSlots:e=>[{name:"body",area:{x:0,y:0,w:e.area.w,h:e.area.h}}],computePath:a,args:{fill:{type:"advanced-color",value:{type:"solid",color:"rgba(240, 234, 55, 1.0)"},name:"Fill"}}},data:()=>({}),computed:{shapePath(){return a(this.item)},shadowPath(){const e=.1*this.item.area.w,t=.99*this.item.area.w,n=.1*this.item.area.h,i=.99*this.item.area.h;return`M ${e} ${n}  L ${t} ${n} L ${1.03*this.item.area.w} ${1.03*this.item.area.h}  L ${e} ${i} Z`},svgFill(){return r.Z.computeSvgFill(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`)}}},c=(0,n(1900).Z)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[n("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),n("defs",[n("linearGradient",{attrs:{id:"sticky-note-gradient-"+e.item.id,x1:"50%",y1:"100%",x2:"50%",y2:"0%"}},[n("stop",{staticStyle:{"stop-color":"rgba(196, 196, 196, 0.14)"},attrs:{offset:"0%"}}),e._v(" "),n("stop",{staticStyle:{"stop-color":"rgba(128, 128, 128, 0.4)"},attrs:{offset:"80.56%"}}),e._v(" "),n("stop",{staticStyle:{"stop-color":"rgba(0, 0, 0, 0.23)"},attrs:{offset:"87.22%"}}),e._v(" "),n("stop",{staticStyle:{"stop-color":"rgba(0, 0, 0, 0.3)"},attrs:{offset:"100%"}})],1)],1),e._v(" "),n("defs",[n("filter",{attrs:{id:"sticky-note-shadow-filter-"+e.item.id}},[n("feGaussianBlur",{attrs:{in:"SourceGraphic",stdDeviation:"4"}})],1)]),e._v(" "),n("g",{style:{opacity:.2},attrs:{filter:"url(#sticky-note-shadow-filter-"+e.item.id+")"}},[n("path",{attrs:{d:e.shadowPath,stroke:"none",fill:"rgba(0, 0, 0, 1)"}})]),e._v(" "),n("path",{attrs:{d:e.shapePath,stroke:"none",fill:e.svgFill}}),e._v(" "),n("path",{style:{opacity:.5,"mix-blend-mode":"multiply"},attrs:{d:e.shapePath,stroke:"none",fill:"url(#sticky-note-gradient-"+e.item.id+")"}})],1)}),[],!1,null,null,null).exports},8028:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(9825);const r={props:["item"],shapeConfig:{shapeType:"vue",components:{AdvancedFill:i.Z},id:"uml_actor",menuItems:[{group:"UML",name:"Actor",iconUrl:"/assets/images/items/uml-actor.svg",previewArea:{x:0,y:0,w:30,h:90,r:0}}],computePath:e=>`M 0 0  l ${e.area.w} 0  l 0 ${e.area.h}  l ${-e.area.w} 0 z`,getTextSlots:e=>[],args:{fill:{name:"Fill",type:"advanced-color",value:{type:"solid",color:"rgba(240, 240, 240, 1.0)"}},strokeColor:{name:"Stroke",type:"color",value:"rgba(0, 0, 0, 1)"},strokeSize:{name:"Stroke Size",type:"number",value:1}}},computed:{headRadius(){return Math.min(this.item.area.w/4,this.item.area.h/8)},armY(){return this.item.area.h/4},bodyY(){return this.item.area.h-this.item.area.h/3},fill(){return i.Z.computeStandardFill(this.item)}}},s=(0,n(1900).Z)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[n("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),n("path",{attrs:{d:"M "+e.item.area.w/2+" "+2*e.headRadius+"  L "+e.item.area.w/2+" "+e.bodyY+"  M 0 "+e.armY+" L "+e.item.area.w+" "+e.armY+"  M 0 "+e.item.area.h+" L "+e.item.area.w/2+" "+e.bodyY+" L "+e.item.area.w+" "+e.item.area.h,fill:"none",stroke:e.item.shapeProps.strokeColor,"stroke-width":e.item.shapeProps.strokeSize+"px"}}),e._v(" "),n("circle",{attrs:{cx:e.item.area.w/2,cy:e.headRadius,r:e.headRadius,fill:e.fill,stroke:e.item.shapeProps.strokeColor,"stroke-width":e.item.shapeProps.strokeSize+"px"}})],1)}),[],!1,null,null,null).exports},1900:(e,t,n)=>{"use strict";function i(e,t,n,i,r,s,o,a){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):r&&(l=a?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var h=c.render;c.render=function(e,t){return l.call(t),h(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}n.d(t,{Z:()=>i})},2934:function(e,t,n){e.exports=function(){"use strict";var e=Object.freeze({});function t(e){return null==e}function i(e){return null!=e}function r(e){return!0===e}function s(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function o(e){return null!==e&&"object"==typeof e}var a=Object.prototype.toString;function l(e){return"[object Object]"===a.call(e)}function c(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function h(e){return i(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function d(e){return null==e?"":Array.isArray(e)||l(e)&&e.toString===a?JSON.stringify(e,null,2):String(e)}function u(e){var t=parseFloat(e);return isNaN(t)?e:t}function p(e,t){for(var n=Object.create(null),i=e.split(","),r=0;r<i.length;r++)n[i[r]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}var m=p("slot,component",!0),f=p("key,ref,slot,slot-scope,is");function g(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var v=Object.prototype.hasOwnProperty;function y(e,t){return v.call(e,t)}function x(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}var b=/-(\w)/g,w=x((function(e){return e.replace(b,(function(e,t){return t?t.toUpperCase():""}))})),C=x((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),_=/\B([A-Z])/g,A=x((function(e){return e.replace(_,"-$1").toLowerCase()})),S=Function.prototype.bind?function(e,t){return e.bind(t)}:function(e,t){function n(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n};function k(e,t){t=t||0;for(var n=e.length-t,i=new Array(n);n--;)i[n]=e[n+t];return i}function I(e,t){for(var n in t)e[n]=t[n];return e}function P(e){for(var t={},n=0;n<e.length;n++)e[n]&&I(t,e[n]);return t}function E(e,t,n){}var T=function(e,t,n){return!1},M=function(e){return e};function O(e,t){if(e===t)return!0;var n=o(e),i=o(t);if(!n||!i)return!n&&!i&&String(e)===String(t);try{var r=Array.isArray(e),s=Array.isArray(t);if(r&&s)return e.length===t.length&&e.every((function(e,n){return O(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(r||s)return!1;var a=Object.keys(e),l=Object.keys(t);return a.length===l.length&&a.every((function(n){return O(e[n],t[n])}))}catch(e){return!1}}function D(e,t){for(var n=0;n<e.length;n++)if(O(e[n],t))return n;return-1}function $(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var B="data-server-rendered",L=["component","directive","filter"],N=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],R={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:T,isReservedAttr:T,isUnknownElement:T,getTagNamespace:E,parsePlatformTagName:M,mustUseProp:T,async:!0,_lifecycleHooks:N},F=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function Z(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}var j,z=new RegExp("[^"+F.source+".$_\\d]"),U="__proto__"in{},H="undefined"!=typeof window,V="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,q=V&&WXEnvironment.platform.toLowerCase(),G=H&&window.navigator.userAgent.toLowerCase(),W=G&&/msie|trident/.test(G),K=G&&G.indexOf("msie 9.0")>0,J=G&&G.indexOf("edge/")>0,Y=(G&&G.indexOf("android"),G&&/iphone|ipad|ipod|ios/.test(G)||"ios"===q),Q=(G&&/chrome\/\d+/.test(G),G&&/phantomjs/.test(G),G&&G.match(/firefox\/(\d+)/)),X={}.watch,ee=!1;if(H)try{var te={};Object.defineProperty(te,"passive",{get:function(){ee=!0}}),window.addEventListener("test-passive",null,te)}catch(e){}var ne=function(){return void 0===j&&(j=!H&&!V&&void 0!==n.g&&n.g.process&&"server"===n.g.process.env.VUE_ENV),j},ie=H&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function re(e){return"function"==typeof e&&/native code/.test(e.toString())}var se,oe="undefined"!=typeof Symbol&&re(Symbol)&&"undefined"!=typeof Reflect&&re(Reflect.ownKeys);se="undefined"!=typeof Set&&re(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var ae=E,le=0,ce=function(){this.id=le++,this.subs=[]};ce.prototype.addSub=function(e){this.subs.push(e)},ce.prototype.removeSub=function(e){g(this.subs,e)},ce.prototype.depend=function(){ce.target&&ce.target.addDep(this)},ce.prototype.notify=function(){for(var e=this.subs.slice(),t=0,n=e.length;t<n;t++)e[t].update()},ce.target=null;var he=[];function de(e){he.push(e),ce.target=e}function ue(){he.pop(),ce.target=he[he.length-1]}var pe=function(e,t,n,i,r,s,o,a){this.tag=e,this.data=t,this.children=n,this.text=i,this.elm=r,this.ns=void 0,this.context=s,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=o,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},me={child:{configurable:!0}};me.child.get=function(){return this.componentInstance},Object.defineProperties(pe.prototype,me);var fe=function(e){void 0===e&&(e="");var t=new pe;return t.text=e,t.isComment=!0,t};function ge(e){return new pe(void 0,void 0,void 0,String(e))}function ve(e){var t=new pe(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var ye=Array.prototype,xe=Object.create(ye);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(e){var t=ye[e];Z(xe,e,(function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];var r,s=t.apply(this,n),o=this.__ob__;switch(e){case"push":case"unshift":r=n;break;case"splice":r=n.slice(2)}return r&&o.observeArray(r),o.dep.notify(),s}))}));var be=Object.getOwnPropertyNames(xe),we=!0;function Ce(e){we=e}var _e=function(e){var t;this.value=e,this.dep=new ce,this.vmCount=0,Z(e,"__ob__",this),Array.isArray(e)?(U?(t=xe,e.__proto__=t):function(e,t,n){for(var i=0,r=n.length;i<r;i++){var s=n[i];Z(e,s,t[s])}}(e,xe,be),this.observeArray(e)):this.walk(e)};function Ae(e,t){var n;if(o(e)&&!(e instanceof pe))return y(e,"__ob__")&&e.__ob__ instanceof _e?n=e.__ob__:we&&!ne()&&(Array.isArray(e)||l(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new _e(e)),t&&n&&n.vmCount++,n}function Se(e,t,n,i,r){var s=new ce,o=Object.getOwnPropertyDescriptor(e,t);if(!o||!1!==o.configurable){var a=o&&o.get,l=o&&o.set;a&&!l||2!==arguments.length||(n=e[t]);var c=!r&&Ae(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=a?a.call(e):n;return ce.target&&(s.depend(),c&&(c.dep.depend(),Array.isArray(t)&&function e(t){for(var n=void 0,i=0,r=t.length;i<r;i++)(n=t[i])&&n.__ob__&&n.__ob__.dep.depend(),Array.isArray(n)&&e(n)}(t))),t},set:function(t){var i=a?a.call(e):n;t===i||t!=t&&i!=i||a&&!l||(l?l.call(e,t):n=t,c=!r&&Ae(t),s.notify())}})}}function ke(e,t,n){if(Array.isArray(e)&&c(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var i=e.__ob__;return e._isVue||i&&i.vmCount?n:i?(Se(i.value,t,n),i.dep.notify(),n):(e[t]=n,n)}function Ie(e,t){if(Array.isArray(e)&&c(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||y(e,t)&&(delete e[t],n&&n.dep.notify())}}_e.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)Se(e,t[n])},_e.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Ae(e[t])};var Pe=R.optionMergeStrategies;function Ee(e,t){if(!t)return e;for(var n,i,r,s=oe?Reflect.ownKeys(t):Object.keys(t),o=0;o<s.length;o++)"__ob__"!==(n=s[o])&&(i=e[n],r=t[n],y(e,n)?i!==r&&l(i)&&l(r)&&Ee(i,r):ke(e,n,r));return e}function Te(e,t,n){return n?function(){var i="function"==typeof t?t.call(n,n):t,r="function"==typeof e?e.call(n,n):e;return i?Ee(i,r):r}:t?e?function(){return Ee("function"==typeof t?t.call(this,this):t,"function"==typeof e?e.call(this,this):e)}:t:e}function Me(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(n):n}function Oe(e,t,n,i){var r=Object.create(e||null);return t?I(r,t):r}Pe.data=function(e,t,n){return n?Te(e,t,n):t&&"function"!=typeof t?e:Te(e,t)},N.forEach((function(e){Pe[e]=Me})),L.forEach((function(e){Pe[e+"s"]=Oe})),Pe.watch=function(e,t,n,i){if(e===X&&(e=void 0),t===X&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var r={};for(var s in I(r,e),t){var o=r[s],a=t[s];o&&!Array.isArray(o)&&(o=[o]),r[s]=o?o.concat(a):Array.isArray(a)?a:[a]}return r},Pe.props=Pe.methods=Pe.inject=Pe.computed=function(e,t,n,i){if(!e)return t;var r=Object.create(null);return I(r,e),t&&I(r,t),r},Pe.provide=Te;var De=function(e,t){return void 0===t?e:t};function $e(e,t,n){if("function"==typeof t&&(t=t.options),function(e,t){var n=e.props;if(n){var i,r,s={};if(Array.isArray(n))for(i=n.length;i--;)"string"==typeof(r=n[i])&&(s[w(r)]={type:null});else if(l(n))for(var o in n)r=n[o],s[w(o)]=l(r)?r:{type:r};e.props=s}}(t),function(e,t){var n=e.inject;if(n){var i=e.inject={};if(Array.isArray(n))for(var r=0;r<n.length;r++)i[n[r]]={from:n[r]};else if(l(n))for(var s in n){var o=n[s];i[s]=l(o)?I({from:s},o):{from:o}}}}(t),function(e){var t=e.directives;if(t)for(var n in t){var i=t[n];"function"==typeof i&&(t[n]={bind:i,update:i})}}(t),!t._base&&(t.extends&&(e=$e(e,t.extends,n)),t.mixins))for(var i=0,r=t.mixins.length;i<r;i++)e=$e(e,t.mixins[i],n);var s,o={};for(s in e)a(s);for(s in t)y(e,s)||a(s);function a(i){var r=Pe[i]||De;o[i]=r(e[i],t[i],n,i)}return o}function Be(e,t,n,i){if("string"==typeof n){var r=e[t];if(y(r,n))return r[n];var s=w(n);if(y(r,s))return r[s];var o=C(s);return y(r,o)?r[o]:r[n]||r[s]||r[o]}}function Le(e,t,n,i){var r=t[e],s=!y(n,e),o=n[e],a=Ze(Boolean,r.type);if(a>-1)if(s&&!y(r,"default"))o=!1;else if(""===o||o===A(e)){var l=Ze(String,r.type);(l<0||a<l)&&(o=!0)}if(void 0===o){o=function(e,t,n){if(y(t,"default")){var i=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"==typeof i&&"Function"!==Re(t.type)?i.call(e):i}}(i,r,e);var c=we;Ce(!0),Ae(o),Ce(c)}return o}var Ne=/^\s*function (\w+)/;function Re(e){var t=e&&e.toString().match(Ne);return t?t[1]:""}function Fe(e,t){return Re(e)===Re(t)}function Ze(e,t){if(!Array.isArray(t))return Fe(t,e)?0:-1;for(var n=0,i=t.length;n<i;n++)if(Fe(t[n],e))return n;return-1}function je(e,t,n){de();try{if(t)for(var i=t;i=i.$parent;){var r=i.$options.errorCaptured;if(r)for(var s=0;s<r.length;s++)try{if(!1===r[s].call(i,e,t,n))return}catch(e){Ue(e,i,"errorCaptured hook")}}Ue(e,t,n)}finally{ue()}}function ze(e,t,n,i,r){var s;try{(s=n?e.apply(t,n):e.call(t))&&!s._isVue&&h(s)&&!s._handled&&(s.catch((function(e){return je(e,i,r+" (Promise/async)")})),s._handled=!0)}catch(e){je(e,i,r)}return s}function Ue(e,t,n){if(R.errorHandler)try{return R.errorHandler.call(null,e,t,n)}catch(t){t!==e&&He(t)}He(e)}function He(e,t,n){if(!H&&!V||"undefined"==typeof console)throw e;console.error(e)}var Ve,qe=!1,Ge=[],We=!1;function Ke(){We=!1;var e=Ge.slice(0);Ge.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!=typeof Promise&&re(Promise)){var Je=Promise.resolve();Ve=function(){Je.then(Ke),Y&&setTimeout(E)},qe=!0}else if(W||"undefined"==typeof MutationObserver||!re(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Ve="undefined"!=typeof setImmediate&&re(setImmediate)?function(){setImmediate(Ke)}:function(){setTimeout(Ke,0)};else{var Ye=1,Qe=new MutationObserver(Ke),Xe=document.createTextNode(String(Ye));Qe.observe(Xe,{characterData:!0}),Ve=function(){Ye=(Ye+1)%2,Xe.data=String(Ye)},qe=!0}function et(e,t){var n;if(Ge.push((function(){if(e)try{e.call(t)}catch(e){je(e,t,"nextTick")}else n&&n(t)})),We||(We=!0,Ve()),!e&&"undefined"!=typeof Promise)return new Promise((function(e){n=e}))}var tt=new se;function nt(e){!function e(t,n){var i,r,s=Array.isArray(t);if(!(!s&&!o(t)||Object.isFrozen(t)||t instanceof pe)){if(t.__ob__){var a=t.__ob__.dep.id;if(n.has(a))return;n.add(a)}if(s)for(i=t.length;i--;)e(t[i],n);else for(i=(r=Object.keys(t)).length;i--;)e(t[r[i]],n)}}(e,tt),tt.clear()}var it=x((function(e){var t="&"===e.charAt(0),n="~"===(e=t?e.slice(1):e).charAt(0),i="!"===(e=n?e.slice(1):e).charAt(0);return{name:e=i?e.slice(1):e,once:n,capture:i,passive:t}}));function rt(e,t){function n(){var e=arguments,i=n.fns;if(!Array.isArray(i))return ze(i,null,arguments,t,"v-on handler");for(var r=i.slice(),s=0;s<r.length;s++)ze(r[s],null,e,t,"v-on handler")}return n.fns=e,n}function st(e,n,i,s,o,a){var l,c,h,d;for(l in e)c=e[l],h=n[l],d=it(l),t(c)||(t(h)?(t(c.fns)&&(c=e[l]=rt(c,a)),r(d.once)&&(c=e[l]=o(d.name,c,d.capture)),i(d.name,c,d.capture,d.passive,d.params)):c!==h&&(h.fns=c,e[l]=h));for(l in n)t(e[l])&&s((d=it(l)).name,n[l],d.capture)}function ot(e,n,s){var o;e instanceof pe&&(e=e.data.hook||(e.data.hook={}));var a=e[n];function l(){s.apply(this,arguments),g(o.fns,l)}t(a)?o=rt([l]):i(a.fns)&&r(a.merged)?(o=a).fns.push(l):o=rt([a,l]),o.merged=!0,e[n]=o}function at(e,t,n,r,s){if(i(t)){if(y(t,n))return e[n]=t[n],s||delete t[n],!0;if(y(t,r))return e[n]=t[r],s||delete t[r],!0}return!1}function lt(e){return s(e)?[ge(e)]:Array.isArray(e)?function e(n,o){var a,l,c,h,d=[];for(a=0;a<n.length;a++)t(l=n[a])||"boolean"==typeof l||(h=d[c=d.length-1],Array.isArray(l)?l.length>0&&(ct((l=e(l,(o||"")+"_"+a))[0])&&ct(h)&&(d[c]=ge(h.text+l[0].text),l.shift()),d.push.apply(d,l)):s(l)?ct(h)?d[c]=ge(h.text+l):""!==l&&d.push(ge(l)):ct(l)&&ct(h)?d[c]=ge(h.text+l.text):(r(n._isVList)&&i(l.tag)&&t(l.key)&&i(o)&&(l.key="__vlist"+o+"_"+a+"__"),d.push(l)));return d}(e):void 0}function ct(e){return i(e)&&i(e.text)&&!1===e.isComment}function ht(e,t){if(e){for(var n=Object.create(null),i=oe?Reflect.ownKeys(e):Object.keys(e),r=0;r<i.length;r++){var s=i[r];if("__ob__"!==s){for(var o=e[s].from,a=t;a;){if(a._provided&&y(a._provided,o)){n[s]=a._provided[o];break}a=a.$parent}if(!a&&"default"in e[s]){var l=e[s].default;n[s]="function"==typeof l?l.call(t):l}}}return n}}function dt(e,t){if(!e||!e.length)return{};for(var n={},i=0,r=e.length;i<r;i++){var s=e[i],o=s.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,s.context!==t&&s.fnContext!==t||!o||null==o.slot)(n.default||(n.default=[])).push(s);else{var a=o.slot,l=n[a]||(n[a]=[]);"template"===s.tag?l.push.apply(l,s.children||[]):l.push(s)}}for(var c in n)n[c].every(ut)&&delete n[c];return n}function ut(e){return e.isComment&&!e.asyncFactory||" "===e.text}function pt(e){return e.isComment&&e.asyncFactory}function mt(t,n,i){var r,s=Object.keys(n).length>0,o=t?!!t.$stable:!s,a=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(o&&i&&i!==e&&a===i.$key&&!s&&!i.$hasNormal)return i;for(var l in r={},t)t[l]&&"$"!==l[0]&&(r[l]=ft(n,l,t[l]))}else r={};for(var c in n)c in r||(r[c]=gt(n,c));return t&&Object.isExtensible(t)&&(t._normalized=r),Z(r,"$stable",o),Z(r,"$key",a),Z(r,"$hasNormal",s),r}function ft(e,t,n){var i=function(){var e=arguments.length?n.apply(null,arguments):n({}),t=(e=e&&"object"==typeof e&&!Array.isArray(e)?[e]:lt(e))&&e[0];return e&&(!t||1===e.length&&t.isComment&&!pt(t))?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:i,enumerable:!0,configurable:!0}),i}function gt(e,t){return function(){return e[t]}}function vt(e,t){var n,r,s,a,l;if(Array.isArray(e)||"string"==typeof e)for(n=new Array(e.length),r=0,s=e.length;r<s;r++)n[r]=t(e[r],r);else if("number"==typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r);else if(o(e))if(oe&&e[Symbol.iterator]){n=[];for(var c=e[Symbol.iterator](),h=c.next();!h.done;)n.push(t(h.value,n.length)),h=c.next()}else for(a=Object.keys(e),n=new Array(a.length),r=0,s=a.length;r<s;r++)l=a[r],n[r]=t(e[l],l,r);return i(n)||(n=[]),n._isVList=!0,n}function yt(e,t,n,i){var r,s=this.$scopedSlots[e];s?(n=n||{},i&&(n=I(I({},i),n)),r=s(n)||("function"==typeof t?t():t)):r=this.$slots[e]||("function"==typeof t?t():t);var o=n&&n.slot;return o?this.$createElement("template",{slot:o},r):r}function xt(e){return Be(this.$options,"filters",e)||M}function bt(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function wt(e,t,n,i,r){var s=R.keyCodes[t]||n;return r&&i&&!R.keyCodes[t]?bt(r,i):s?bt(s,e):i?A(i)!==t:void 0===e}function Ct(e,t,n,i,r){if(n&&o(n)){var s;Array.isArray(n)&&(n=P(n));var a=function(o){if("class"===o||"style"===o||f(o))s=e;else{var a=e.attrs&&e.attrs.type;s=i||R.mustUseProp(t,a,o)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var l=w(o),c=A(o);l in s||c in s||(s[o]=n[o],r&&((e.on||(e.on={}))["update:"+o]=function(e){n[o]=e}))};for(var l in n)a(l)}return e}function _t(e,t){var n=this._staticTrees||(this._staticTrees=[]),i=n[e];return i&&!t||St(i=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__"+e,!1),i}function At(e,t,n){return St(e,"__once__"+t+(n?"_"+n:""),!0),e}function St(e,t,n){if(Array.isArray(e))for(var i=0;i<e.length;i++)e[i]&&"string"!=typeof e[i]&&kt(e[i],t+"_"+i,n);else kt(e,t,n)}function kt(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function It(e,t){if(t&&l(t)){var n=e.on=e.on?I({},e.on):{};for(var i in t){var r=n[i],s=t[i];n[i]=r?[].concat(r,s):s}}return e}function Pt(e,t,n,i){t=t||{$stable:!n};for(var r=0;r<e.length;r++){var s=e[r];Array.isArray(s)?Pt(s,t,n):s&&(s.proxy&&(s.fn.proxy=!0),t[s.key]=s.fn)}return i&&(t.$key=i),t}function Et(e,t){for(var n=0;n<t.length;n+=2){var i=t[n];"string"==typeof i&&i&&(e[t[n]]=t[n+1])}return e}function Tt(e,t){return"string"==typeof e?t+e:e}function Mt(e){e._o=At,e._n=u,e._s=d,e._l=vt,e._t=yt,e._q=O,e._i=D,e._m=_t,e._f=xt,e._k=wt,e._b=Ct,e._v=ge,e._e=fe,e._u=Pt,e._g=It,e._d=Et,e._p=Tt}function Ot(t,n,i,s,o){var a,l=this,c=o.options;y(s,"_uid")?(a=Object.create(s))._original=s:(a=s,s=s._original);var h=r(c._compiled),d=!h;this.data=t,this.props=n,this.children=i,this.parent=s,this.listeners=t.on||e,this.injections=ht(c.inject,s),this.slots=function(){return l.$slots||mt(t.scopedSlots,l.$slots=dt(i,s)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return mt(t.scopedSlots,this.slots())}}),h&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=mt(t.scopedSlots,this.$slots)),c._scopeId?this._c=function(e,t,n,i){var r=Ft(a,e,t,n,i,d);return r&&!Array.isArray(r)&&(r.fnScopeId=c._scopeId,r.fnContext=s),r}:this._c=function(e,t,n,i){return Ft(a,e,t,n,i,d)}}function Dt(e,t,n,i,r){var s=ve(e);return s.fnContext=n,s.fnOptions=i,t.slot&&((s.data||(s.data={})).slot=t.slot),s}function $t(e,t){for(var n in t)e[w(n)]=t[n]}Mt(Ot.prototype);var Bt={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;Bt.prepatch(n,n)}else(e.componentInstance=function(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},r=e.data.inlineTemplate;return i(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new e.componentOptions.Ctor(n)}(e,Wt)).$mount(t?e.elm:void 0,t)},prepatch:function(t,n){var i=n.componentOptions;!function(t,n,i,r,s){var o=r.data.scopedSlots,a=t.$scopedSlots,l=!!(o&&!o.$stable||a!==e&&!a.$stable||o&&t.$scopedSlots.$key!==o.$key||!o&&t.$scopedSlots.$key),c=!!(s||t.$options._renderChildren||l);if(t.$options._parentVnode=r,t.$vnode=r,t._vnode&&(t._vnode.parent=r),t.$options._renderChildren=s,t.$attrs=r.data.attrs||e,t.$listeners=i||e,n&&t.$options.props){Ce(!1);for(var h=t._props,d=t.$options._propKeys||[],u=0;u<d.length;u++){var p=d[u],m=t.$options.props;h[p]=Le(p,m,n,t)}Ce(!0),t.$options.propsData=n}i=i||e;var f=t.$options._parentListeners;t.$options._parentListeners=i,Gt(t,i,f),c&&(t.$slots=dt(s,r.context),t.$forceUpdate())}(n.componentInstance=t.componentInstance,i.propsData,i.listeners,n,i.children)},insert:function(e){var t,n=e.context,i=e.componentInstance;i._isMounted||(i._isMounted=!0,Qt(i,"mounted")),e.data.keepAlive&&(n._isMounted?((t=i)._inactive=!1,en.push(t)):Yt(i,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?function e(t,n){if(!(n&&(t._directInactive=!0,Jt(t))||t._inactive)){t._inactive=!0;for(var i=0;i<t.$children.length;i++)e(t.$children[i]);Qt(t,"deactivated")}}(t,!0):t.$destroy())}},Lt=Object.keys(Bt);function Nt(n,s,a,l,c){if(!t(n)){var d=a.$options._base;if(o(n)&&(n=d.extend(n)),"function"==typeof n){var u;if(t(n.cid)&&void 0===(n=function(e,n){if(r(e.error)&&i(e.errorComp))return e.errorComp;if(i(e.resolved))return e.resolved;var s=jt;if(s&&i(e.owners)&&-1===e.owners.indexOf(s)&&e.owners.push(s),r(e.loading)&&i(e.loadingComp))return e.loadingComp;if(s&&!i(e.owners)){var a=e.owners=[s],l=!0,c=null,d=null;s.$on("hook:destroyed",(function(){return g(a,s)}));var u=function(e){for(var t=0,n=a.length;t<n;t++)a[t].$forceUpdate();e&&(a.length=0,null!==c&&(clearTimeout(c),c=null),null!==d&&(clearTimeout(d),d=null))},p=$((function(t){e.resolved=zt(t,n),l?a.length=0:u(!0)})),m=$((function(t){i(e.errorComp)&&(e.error=!0,u(!0))})),f=e(p,m);return o(f)&&(h(f)?t(e.resolved)&&f.then(p,m):h(f.component)&&(f.component.then(p,m),i(f.error)&&(e.errorComp=zt(f.error,n)),i(f.loading)&&(e.loadingComp=zt(f.loading,n),0===f.delay?e.loading=!0:c=setTimeout((function(){c=null,t(e.resolved)&&t(e.error)&&(e.loading=!0,u(!1))}),f.delay||200)),i(f.timeout)&&(d=setTimeout((function(){d=null,t(e.resolved)&&m(null)}),f.timeout)))),l=!1,e.loading?e.loadingComp:e.resolved}}(u=n,d)))return function(e,t,n,i,r){var s=fe();return s.asyncFactory=e,s.asyncMeta={data:t,context:n,children:i,tag:r},s}(u,s,a,l,c);s=s||{},bn(n),i(s.model)&&function(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var s=t.on||(t.on={}),o=s[r],a=t.model.callback;i(o)?(Array.isArray(o)?-1===o.indexOf(a):o!==a)&&(s[r]=[a].concat(o)):s[r]=a}(n.options,s);var p=function(e,n,r){var s=n.options.props;if(!t(s)){var o={},a=e.attrs,l=e.props;if(i(a)||i(l))for(var c in s){var h=A(c);at(o,l,c,h,!0)||at(o,a,c,h,!1)}return o}}(s,n);if(r(n.options.functional))return function(t,n,r,s,o){var a=t.options,l={},c=a.props;if(i(c))for(var h in c)l[h]=Le(h,c,n||e);else i(r.attrs)&&$t(l,r.attrs),i(r.props)&&$t(l,r.props);var d=new Ot(r,l,o,s,t),u=a.render.call(null,d._c,d);if(u instanceof pe)return Dt(u,r,d.parent,a);if(Array.isArray(u)){for(var p=lt(u)||[],m=new Array(p.length),f=0;f<p.length;f++)m[f]=Dt(p[f],r,d.parent,a);return m}}(n,p,s,a,l);var m=s.on;if(s.on=s.nativeOn,r(n.options.abstract)){var f=s.slot;s={},f&&(s.slot=f)}!function(e){for(var t=e.hook||(e.hook={}),n=0;n<Lt.length;n++){var i=Lt[n],r=t[i],s=Bt[i];r===s||r&&r._merged||(t[i]=r?Rt(s,r):s)}}(s);var v=n.options.name||c;return new pe("vue-component-"+n.cid+(v?"-"+v:""),s,void 0,void 0,void 0,a,{Ctor:n,propsData:p,listeners:m,tag:c,children:l},u)}}}function Rt(e,t){var n=function(n,i){e(n,i),t(n,i)};return n._merged=!0,n}function Ft(e,n,a,l,c,h){return(Array.isArray(a)||s(a))&&(c=l,l=a,a=void 0),r(h)&&(c=2),function(e,n,s,a,l){return i(s)&&i(s.__ob__)?fe():(i(s)&&i(s.is)&&(n=s.is),n?(Array.isArray(a)&&"function"==typeof a[0]&&((s=s||{}).scopedSlots={default:a[0]},a.length=0),2===l?a=lt(a):1===l&&(a=function(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}(a)),"string"==typeof n?(h=e.$vnode&&e.$vnode.ns||R.getTagNamespace(n),c=R.isReservedTag(n)?new pe(R.parsePlatformTagName(n),s,a,void 0,void 0,e):s&&s.pre||!i(d=Be(e.$options,"components",n))?new pe(n,s,a,void 0,void 0,e):Nt(d,s,e,a,n)):c=Nt(n,s,e,a),Array.isArray(c)?c:i(c)?(i(h)&&function e(n,s,o){if(n.ns=s,"foreignObject"===n.tag&&(s=void 0,o=!0),i(n.children))for(var a=0,l=n.children.length;a<l;a++){var c=n.children[a];i(c.tag)&&(t(c.ns)||r(o)&&"svg"!==c.tag)&&e(c,s,o)}}(c,h),i(s)&&function(e){o(e.style)&&nt(e.style),o(e.class)&&nt(e.class)}(s),c):fe()):fe());var c,h,d}(e,n,a,l,c)}var Zt,jt=null;function zt(e,t){return(e.__esModule||oe&&"Module"===e[Symbol.toStringTag])&&(e=e.default),o(e)?t.extend(e):e}function Ut(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(i(n)&&(i(n.componentOptions)||pt(n)))return n}}function Ht(e,t){Zt.$on(e,t)}function Vt(e,t){Zt.$off(e,t)}function qt(e,t){var n=Zt;return function i(){null!==t.apply(null,arguments)&&n.$off(e,i)}}function Gt(e,t,n){Zt=e,st(t,n||{},Ht,Vt,qt,e),Zt=void 0}var Wt=null;function Kt(e){var t=Wt;return Wt=e,function(){Wt=t}}function Jt(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function Yt(e,t){if(t){if(e._directInactive=!1,Jt(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Yt(e.$children[n]);Qt(e,"activated")}}function Qt(e,t){de();var n=e.$options[t],i=t+" hook";if(n)for(var r=0,s=n.length;r<s;r++)ze(n[r],e,null,e,i);e._hasHookEvent&&e.$emit("hook:"+t),ue()}var Xt=[],en=[],tn={},nn=!1,rn=!1,sn=0,on=0,an=Date.now;if(H&&!W){var ln=window.performance;ln&&"function"==typeof ln.now&&an()>document.createEvent("Event").timeStamp&&(an=function(){return ln.now()})}function cn(){var e,t;for(on=an(),rn=!0,Xt.sort((function(e,t){return e.id-t.id})),sn=0;sn<Xt.length;sn++)(e=Xt[sn]).before&&e.before(),t=e.id,tn[t]=null,e.run();var n=en.slice(),i=Xt.slice();sn=Xt.length=en.length=0,tn={},nn=rn=!1,function(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Yt(e[t],!0)}(n),function(e){for(var t=e.length;t--;){var n=e[t],i=n.vm;i._watcher===n&&i._isMounted&&!i._isDestroyed&&Qt(i,"updated")}}(i),ie&&R.devtools&&ie.emit("flush")}var hn=0,dn=function(e,t,n,i,r){this.vm=e,r&&(e._watcher=this),e._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++hn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new se,this.newDepIds=new se,this.expression="","function"==typeof t?this.getter=t:(this.getter=function(e){if(!z.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}(t),this.getter||(this.getter=E)),this.value=this.lazy?void 0:this.get()};dn.prototype.get=function(){var e;de(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(e){if(!this.user)throw e;je(e,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&nt(e),ue(),this.cleanupDeps()}return e},dn.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},dn.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},dn.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(e){var t=e.id;if(null==tn[t]){if(tn[t]=!0,rn){for(var n=Xt.length-1;n>sn&&Xt[n].id>e.id;)n--;Xt.splice(n+1,0,e)}else Xt.push(e);nn||(nn=!0,et(cn))}}(this)},dn.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||o(e)||this.deep){var t=this.value;if(this.value=e,this.user){var n='callback for watcher "'+this.expression+'"';ze(this.cb,this.vm,[e,t],this.vm,n)}else this.cb.call(this.vm,e,t)}}},dn.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},dn.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},dn.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||g(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}};var un={enumerable:!0,configurable:!0,get:E,set:E};function pn(e,t,n){un.get=function(){return this[t][n]},un.set=function(e){this[t][n]=e},Object.defineProperty(e,n,un)}var mn={lazy:!0};function fn(e,t,n){var i=!ne();"function"==typeof n?(un.get=i?gn(t):vn(n),un.set=E):(un.get=n.get?i&&!1!==n.cache?gn(t):vn(n.get):E,un.set=n.set||E),Object.defineProperty(e,t,un)}function gn(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),ce.target&&t.depend(),t.value}}function vn(e){return function(){return e.call(this,this)}}function yn(e,t,n,i){return l(n)&&(i=n,n=n.handler),"string"==typeof n&&(n=e[n]),e.$watch(t,n,i)}var xn=0;function bn(e){var t=e.options;if(e.super){var n=bn(e.super);if(n!==e.superOptions){e.superOptions=n;var i=function(e){var t,n=e.options,i=e.sealedOptions;for(var r in n)n[r]!==i[r]&&(t||(t={}),t[r]=n[r]);return t}(e);i&&I(e.extendOptions,i),(t=e.options=$e(n,e.extendOptions)).name&&(t.components[t.name]=e)}}return t}function wn(e){this._init(e)}function Cn(e){return e&&(e.Ctor.options.name||e.tag)}function _n(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"==typeof e?e.split(",").indexOf(t)>-1:(n=e,"[object RegExp]"===a.call(n)&&e.test(t));var n}function An(e,t){var n=e.cache,i=e.keys,r=e._vnode;for(var s in n){var o=n[s];if(o){var a=o.name;a&&!t(a)&&Sn(n,s,i,r)}}}function Sn(e,t,n,i){var r=e[t];!r||i&&r.tag===i.tag||r.componentInstance.$destroy(),e[t]=null,g(n,t)}!function(t){t.prototype._init=function(t){var n=this;n._uid=xn++,n._isVue=!0,t&&t._isComponent?function(e,t){var n=e.$options=Object.create(e.constructor.options),i=t._parentVnode;n.parent=t.parent,n._parentVnode=i;var r=i.componentOptions;n.propsData=r.propsData,n._parentListeners=r.listeners,n._renderChildren=r.children,n._componentTag=r.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}(n,t):n.$options=$e(bn(n.constructor),t||{},n),n._renderProxy=n,n._self=n,function(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(n),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Gt(e,t)}(n),function(t){t._vnode=null,t._staticTrees=null;var n=t.$options,i=t.$vnode=n._parentVnode,r=i&&i.context;t.$slots=dt(n._renderChildren,r),t.$scopedSlots=e,t._c=function(e,n,i,r){return Ft(t,e,n,i,r,!1)},t.$createElement=function(e,n,i,r){return Ft(t,e,n,i,r,!0)};var s=i&&i.data;Se(t,"$attrs",s&&s.attrs||e,null,!0),Se(t,"$listeners",n._parentListeners||e,null,!0)}(n),Qt(n,"beforeCreate"),function(e){var t=ht(e.$options.inject,e);t&&(Ce(!1),Object.keys(t).forEach((function(n){Se(e,n,t[n])})),Ce(!0))}(n),function(e){e._watchers=[];var t=e.$options;t.props&&function(e,t){var n=e.$options.propsData||{},i=e._props={},r=e.$options._propKeys=[];e.$parent&&Ce(!1);var s=function(s){r.push(s);var o=Le(s,t,n,e);Se(i,s,o),s in e||pn(e,"_props",s)};for(var o in t)s(o);Ce(!0)}(e,t.props),t.methods&&function(e,t){for(var n in e.$options.props,t)e[n]="function"!=typeof t[n]?E:S(t[n],e)}(e,t.methods),t.data?function(e){var t=e.$options.data;l(t=e._data="function"==typeof t?function(e,t){de();try{return e.call(t,t)}catch(e){return je(e,t,"data()"),{}}finally{ue()}}(t,e):t||{})||(t={});for(var n,i=Object.keys(t),r=e.$options.props,s=(e.$options.methods,i.length);s--;){var o=i[s];r&&y(r,o)||36!==(n=(o+"").charCodeAt(0))&&95!==n&&pn(e,"_data",o)}Ae(t,!0)}(e):Ae(e._data={},!0),t.computed&&function(e,t){var n=e._computedWatchers=Object.create(null),i=ne();for(var r in t){var s=t[r],o="function"==typeof s?s:s.get;i||(n[r]=new dn(e,o||E,E,mn)),r in e||fn(e,r,s)}}(e,t.computed),t.watch&&t.watch!==X&&function(e,t){for(var n in t){var i=t[n];if(Array.isArray(i))for(var r=0;r<i.length;r++)yn(e,n,i[r]);else yn(e,n,i)}}(e,t.watch)}(n),function(e){var t=e.$options.provide;t&&(e._provided="function"==typeof t?t.call(e):t)}(n),Qt(n,"created"),n.$options.el&&n.$mount(n.$options.el)}}(wn),function(e){Object.defineProperty(e.prototype,"$data",{get:function(){return this._data}}),Object.defineProperty(e.prototype,"$props",{get:function(){return this._props}}),e.prototype.$set=ke,e.prototype.$delete=Ie,e.prototype.$watch=function(e,t,n){if(l(t))return yn(this,e,t,n);(n=n||{}).user=!0;var i=new dn(this,e,t,n);if(n.immediate){var r='callback for immediate watcher "'+i.expression+'"';de(),ze(t,this,[i.value],this,r),ue()}return function(){i.teardown()}}}(wn),function(e){var t=/^hook:/;e.prototype.$on=function(e,n){var i=this;if(Array.isArray(e))for(var r=0,s=e.length;r<s;r++)i.$on(e[r],n);else(i._events[e]||(i._events[e]=[])).push(n),t.test(e)&&(i._hasHookEvent=!0);return i},e.prototype.$once=function(e,t){var n=this;function i(){n.$off(e,i),t.apply(n,arguments)}return i.fn=t,n.$on(e,i),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var i=0,r=e.length;i<r;i++)n.$off(e[i],t);return n}var s,o=n._events[e];if(!o)return n;if(!t)return n._events[e]=null,n;for(var a=o.length;a--;)if((s=o[a])===t||s.fn===t){o.splice(a,1);break}return n},e.prototype.$emit=function(e){var t=this._events[e];if(t){t=t.length>1?k(t):t;for(var n=k(arguments,1),i='event handler for "'+e+'"',r=0,s=t.length;r<s;r++)ze(t[r],this,n,this,i)}return this}}(wn),function(e){e.prototype._update=function(e,t){var n=this,i=n.$el,r=n._vnode,s=Kt(n);n._vnode=e,n.$el=r?n.__patch__(r,e):n.__patch__(n.$el,e,t,!1),s(),i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Qt(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||g(t.$children,e),e._watcher&&e._watcher.teardown();for(var n=e._watchers.length;n--;)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Qt(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}(wn),function(e){Mt(e.prototype),e.prototype.$nextTick=function(e){return et(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,i=n.render,r=n._parentVnode;r&&(t.$scopedSlots=mt(r.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=r;try{jt=t,e=i.call(t._renderProxy,t.$createElement)}catch(n){je(n,t,"render"),e=t._vnode}finally{jt=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof pe||(e=fe()),e.parent=r,e}}(wn);var kn=[String,RegExp,Array],In={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:kn,exclude:kn,max:[String,Number]},methods:{cacheVNode:function(){var e=this.cache,t=this.keys,n=this.vnodeToCache,i=this.keyToCache;if(n){var r=n.tag,s=n.componentInstance,o=n.componentOptions;e[i]={name:Cn(o),tag:r,componentInstance:s},t.push(i),this.max&&t.length>parseInt(this.max)&&Sn(e,t[0],t,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Sn(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",(function(t){An(e,(function(e){return _n(t,e)}))})),this.$watch("exclude",(function(t){An(e,(function(e){return!_n(t,e)}))}))},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,t=Ut(e),n=t&&t.componentOptions;if(n){var i=Cn(n),r=this.include,s=this.exclude;if(r&&(!i||!_n(r,i))||s&&i&&_n(s,i))return t;var o=this.cache,a=this.keys,l=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;o[l]?(t.componentInstance=o[l].componentInstance,g(a,l),a.push(l)):(this.vnodeToCache=t,this.keyToCache=l),t.data.keepAlive=!0}return t||e&&e[0]}}};!function(e){var t={get:function(){return R}};Object.defineProperty(e,"config",t),e.util={warn:ae,extend:I,mergeOptions:$e,defineReactive:Se},e.set=ke,e.delete=Ie,e.nextTick=et,e.observable=function(e){return Ae(e),e},e.options=Object.create(null),L.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,I(e.options.components,In),function(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=k(arguments,1);return n.unshift(this),"function"==typeof e.install?e.install.apply(e,n):"function"==typeof e&&e.apply(null,n),t.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=$e(this.options,e),this}}(e),function(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,i=n.cid,r=e._Ctor||(e._Ctor={});if(r[i])return r[i];var s=e.name||n.options.name,o=function(e){this._init(e)};return(o.prototype=Object.create(n.prototype)).constructor=o,o.cid=t++,o.options=$e(n.options,e),o.super=n,o.options.props&&function(e){var t=e.options.props;for(var n in t)pn(e.prototype,"_props",n)}(o),o.options.computed&&function(e){var t=e.options.computed;for(var n in t)fn(e.prototype,n,t[n])}(o),o.extend=n.extend,o.mixin=n.mixin,o.use=n.use,L.forEach((function(e){o[e]=n[e]})),s&&(o.options.components[s]=o),o.superOptions=n.options,o.extendOptions=e,o.sealedOptions=I({},o.options),r[i]=o,o}}(e),function(e){L.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&l(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"==typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}(e)}(wn),Object.defineProperty(wn.prototype,"$isServer",{get:ne}),Object.defineProperty(wn.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(wn,"FunctionalRenderContext",{value:Ot}),wn.version="2.6.14";var Pn=p("style,class"),En=p("input,textarea,option,select,progress"),Tn=function(e,t,n){return"value"===n&&En(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},Mn=p("contenteditable,draggable,spellcheck"),On=p("events,caret,typing,plaintext-only"),Dn=p("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),$n="http://www.w3.org/1999/xlink",Bn=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Ln=function(e){return Bn(e)?e.slice(6,e.length):""},Nn=function(e){return null==e||!1===e};function Rn(e,t){return{staticClass:Fn(e.staticClass,t.staticClass),class:i(e.class)?[e.class,t.class]:t.class}}function Fn(e,t){return e?t?e+" "+t:e:t||""}function Zn(e){return Array.isArray(e)?function(e){for(var t,n="",r=0,s=e.length;r<s;r++)i(t=Zn(e[r]))&&""!==t&&(n&&(n+=" "),n+=t);return n}(e):o(e)?function(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}(e):"string"==typeof e?e:""}var jn={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},zn=p("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Un=p("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Hn=function(e){return zn(e)||Un(e)};function Vn(e){return Un(e)?"svg":"math"===e?"math":void 0}var qn=Object.create(null),Gn=p("text,number,password,search,email,tel,url");function Wn(e){return"string"==typeof e?document.querySelector(e)||document.createElement("div"):e}var Kn=Object.freeze({createElement:function(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n},createElementNS:function(e,t){return document.createElementNS(jn[e],t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},setStyleScope:function(e,t){e.setAttribute(t,"")}}),Jn={create:function(e,t){Yn(t)},update:function(e,t){e.data.ref!==t.data.ref&&(Yn(e,!0),Yn(t))},destroy:function(e){Yn(e,!0)}};function Yn(e,t){var n=e.data.ref;if(i(n)){var r=e.context,s=e.componentInstance||e.elm,o=r.$refs;t?Array.isArray(o[n])?g(o[n],s):o[n]===s&&(o[n]=void 0):e.data.refInFor?Array.isArray(o[n])?o[n].indexOf(s)<0&&o[n].push(s):o[n]=[s]:o[n]=s}}var Qn=new pe("",{},[]),Xn=["create","activate","update","remove","destroy"];function ei(e,n){return e.key===n.key&&e.asyncFactory===n.asyncFactory&&(e.tag===n.tag&&e.isComment===n.isComment&&i(e.data)===i(n.data)&&function(e,t){if("input"!==e.tag)return!0;var n,r=i(n=e.data)&&i(n=n.attrs)&&n.type,s=i(n=t.data)&&i(n=n.attrs)&&n.type;return r===s||Gn(r)&&Gn(s)}(e,n)||r(e.isAsyncPlaceholder)&&t(n.asyncFactory.error))}function ti(e,t,n){var r,s,o={};for(r=t;r<=n;++r)i(s=e[r].key)&&(o[s]=r);return o}var ni={create:ii,update:ii,destroy:function(e){ii(e,Qn)}};function ii(e,t){(e.data.directives||t.data.directives)&&function(e,t){var n,i,r,s=e===Qn,o=t===Qn,a=si(e.data.directives,e.context),l=si(t.data.directives,t.context),c=[],h=[];for(n in l)i=a[n],r=l[n],i?(r.oldValue=i.value,r.oldArg=i.arg,ai(r,"update",t,e),r.def&&r.def.componentUpdated&&h.push(r)):(ai(r,"bind",t,e),r.def&&r.def.inserted&&c.push(r));if(c.length){var d=function(){for(var n=0;n<c.length;n++)ai(c[n],"inserted",t,e)};s?ot(t,"insert",d):d()}if(h.length&&ot(t,"postpatch",(function(){for(var n=0;n<h.length;n++)ai(h[n],"componentUpdated",t,e)})),!s)for(n in a)l[n]||ai(a[n],"unbind",e,e,o)}(e,t)}var ri=Object.create(null);function si(e,t){var n,i,r=Object.create(null);if(!e)return r;for(n=0;n<e.length;n++)(i=e[n]).modifiers||(i.modifiers=ri),r[oi(i)]=i,i.def=Be(t.$options,"directives",i.name);return r}function oi(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function ai(e,t,n,i,r){var s=e.def&&e.def[t];if(s)try{s(n.elm,e,n,i,r)}catch(i){je(i,n.context,"directive "+e.name+" "+t+" hook")}}var li=[Jn,ni];function ci(e,n){var r=n.componentOptions;if(!(i(r)&&!1===r.Ctor.options.inheritAttrs||t(e.data.attrs)&&t(n.data.attrs))){var s,o,a=n.elm,l=e.data.attrs||{},c=n.data.attrs||{};for(s in i(c.__ob__)&&(c=n.data.attrs=I({},c)),c)o=c[s],l[s]!==o&&hi(a,s,o,n.data.pre);for(s in(W||J)&&c.value!==l.value&&hi(a,"value",c.value),l)t(c[s])&&(Bn(s)?a.removeAttributeNS($n,Ln(s)):Mn(s)||a.removeAttribute(s))}}function hi(e,t,n,i){i||e.tagName.indexOf("-")>-1?di(e,t,n):Dn(t)?Nn(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):Mn(t)?e.setAttribute(t,function(e,t){return Nn(t)||"false"===t?"false":"contenteditable"===e&&On(t)?t:"true"}(t,n)):Bn(t)?Nn(n)?e.removeAttributeNS($n,Ln(t)):e.setAttributeNS($n,t,n):di(e,t,n)}function di(e,t,n){if(Nn(n))e.removeAttribute(t);else{if(W&&!K&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var i=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",i)};e.addEventListener("input",i),e.__ieph=!0}e.setAttribute(t,n)}}var ui={create:ci,update:ci};function pi(e,n){var r=n.elm,s=n.data,o=e.data;if(!(t(s.staticClass)&&t(s.class)&&(t(o)||t(o.staticClass)&&t(o.class)))){var a=function(e){for(var t=e.data,n=e,r=e;i(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(t=Rn(r.data,t));for(;i(n=n.parent);)n&&n.data&&(t=Rn(t,n.data));return function(e,t){return i(e)||i(t)?Fn(e,Zn(t)):""}(t.staticClass,t.class)}(n),l=r._transitionClasses;i(l)&&(a=Fn(a,Zn(l))),a!==r._prevClass&&(r.setAttribute("class",a),r._prevClass=a)}}var mi,fi,gi,vi,yi,xi,bi={create:pi,update:pi},wi=/[\w).+\-_$\]]/;function Ci(e){var t,n,i,r,s,o=!1,a=!1,l=!1,c=!1,h=0,d=0,u=0,p=0;for(i=0;i<e.length;i++)if(n=t,t=e.charCodeAt(i),o)39===t&&92!==n&&(o=!1);else if(a)34===t&&92!==n&&(a=!1);else if(l)96===t&&92!==n&&(l=!1);else if(c)47===t&&92!==n&&(c=!1);else if(124!==t||124===e.charCodeAt(i+1)||124===e.charCodeAt(i-1)||h||d||u){switch(t){case 34:a=!0;break;case 39:o=!0;break;case 96:l=!0;break;case 40:u++;break;case 41:u--;break;case 91:d++;break;case 93:d--;break;case 123:h++;break;case 125:h--}if(47===t){for(var m=i-1,f=void 0;m>=0&&" "===(f=e.charAt(m));m--);f&&wi.test(f)||(c=!0)}}else void 0===r?(p=i+1,r=e.slice(0,i).trim()):g();function g(){(s||(s=[])).push(e.slice(p,i).trim()),p=i+1}if(void 0===r?r=e.slice(0,i).trim():0!==p&&g(),s)for(i=0;i<s.length;i++)r=_i(r,s[i]);return r}function _i(e,t){var n=t.indexOf("(");if(n<0)return'_f("'+t+'")('+e+")";var i=t.slice(0,n),r=t.slice(n+1);return'_f("'+i+'")('+e+(")"!==r?","+r:r)}function Ai(e,t){console.error("[Vue compiler]: "+e)}function Si(e,t){return e?e.map((function(e){return e[t]})).filter((function(e){return e})):[]}function ki(e,t,n,i,r){(e.props||(e.props=[])).push(Bi({name:t,value:n,dynamic:r},i)),e.plain=!1}function Ii(e,t,n,i,r){(r?e.dynamicAttrs||(e.dynamicAttrs=[]):e.attrs||(e.attrs=[])).push(Bi({name:t,value:n,dynamic:r},i)),e.plain=!1}function Pi(e,t,n,i){e.attrsMap[t]=n,e.attrsList.push(Bi({name:t,value:n},i))}function Ei(e,t,n,i,r,s,o,a){(e.directives||(e.directives=[])).push(Bi({name:t,rawName:n,value:i,arg:r,isDynamicArg:s,modifiers:o},a)),e.plain=!1}function Ti(e,t,n){return n?"_p("+t+',"'+e+'")':e+t}function Mi(t,n,i,r,s,o,a,l){var c;(r=r||e).right?l?n="("+n+")==='click'?'contextmenu':("+n+")":"click"===n&&(n="contextmenu",delete r.right):r.middle&&(l?n="("+n+")==='click'?'mouseup':("+n+")":"click"===n&&(n="mouseup")),r.capture&&(delete r.capture,n=Ti("!",n,l)),r.once&&(delete r.once,n=Ti("~",n,l)),r.passive&&(delete r.passive,n=Ti("&",n,l)),r.native?(delete r.native,c=t.nativeEvents||(t.nativeEvents={})):c=t.events||(t.events={});var h=Bi({value:i.trim(),dynamic:l},a);r!==e&&(h.modifiers=r);var d=c[n];Array.isArray(d)?s?d.unshift(h):d.push(h):c[n]=d?s?[h,d]:[d,h]:h,t.plain=!1}function Oi(e,t,n){var i=Di(e,":"+t)||Di(e,"v-bind:"+t);if(null!=i)return Ci(i);if(!1!==n){var r=Di(e,t);if(null!=r)return JSON.stringify(r)}}function Di(e,t,n){var i;if(null!=(i=e.attrsMap[t]))for(var r=e.attrsList,s=0,o=r.length;s<o;s++)if(r[s].name===t){r.splice(s,1);break}return n&&delete e.attrsMap[t],i}function $i(e,t){for(var n=e.attrsList,i=0,r=n.length;i<r;i++){var s=n[i];if(t.test(s.name))return n.splice(i,1),s}}function Bi(e,t){return t&&(null!=t.start&&(e.start=t.start),null!=t.end&&(e.end=t.end)),e}function Li(e,t,n){var i=n||{},r=i.number,s="$$v";i.trim&&(s="(typeof $$v === 'string'? $$v.trim(): $$v)"),r&&(s="_n("+s+")");var o=Ni(t,s);e.model={value:"("+t+")",expression:JSON.stringify(t),callback:"function ($$v) {"+o+"}"}}function Ni(e,t){var n=function(e){if(e=e.trim(),mi=e.length,e.indexOf("[")<0||e.lastIndexOf("]")<mi-1)return(vi=e.lastIndexOf("."))>-1?{exp:e.slice(0,vi),key:'"'+e.slice(vi+1)+'"'}:{exp:e,key:null};for(fi=e,vi=yi=xi=0;!Fi();)Zi(gi=Ri())?zi(gi):91===gi&&ji(gi);return{exp:e.slice(0,yi),key:e.slice(yi+1,xi)}}(e);return null===n.key?e+"="+t:"$set("+n.exp+", "+n.key+", "+t+")"}function Ri(){return fi.charCodeAt(++vi)}function Fi(){return vi>=mi}function Zi(e){return 34===e||39===e}function ji(e){var t=1;for(yi=vi;!Fi();)if(Zi(e=Ri()))zi(e);else if(91===e&&t++,93===e&&t--,0===t){xi=vi;break}}function zi(e){for(var t=e;!Fi()&&(e=Ri())!==t;);}var Ui,Hi="__r";function Vi(e,t,n){var i=Ui;return function r(){null!==t.apply(null,arguments)&&Wi(e,r,n,i)}}var qi=qe&&!(Q&&Number(Q[1])<=53);function Gi(e,t,n,i){if(qi){var r=on,s=t;t=s._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=r||e.timeStamp<=0||e.target.ownerDocument!==document)return s.apply(this,arguments)}}Ui.addEventListener(e,t,ee?{capture:n,passive:i}:n)}function Wi(e,t,n,i){(i||Ui).removeEventListener(e,t._wrapper||t,n)}function Ki(e,n){if(!t(e.data.on)||!t(n.data.on)){var r=n.data.on||{},s=e.data.on||{};Ui=n.elm,function(e){if(i(e.__r)){var t=W?"change":"input";e[t]=[].concat(e.__r,e[t]||[]),delete e.__r}i(e.__c)&&(e.change=[].concat(e.__c,e.change||[]),delete e.__c)}(r),st(r,s,Gi,Wi,Vi,n.context),Ui=void 0}}var Ji,Yi={create:Ki,update:Ki};function Qi(e,n){if(!t(e.data.domProps)||!t(n.data.domProps)){var r,s,o=n.elm,a=e.data.domProps||{},l=n.data.domProps||{};for(r in i(l.__ob__)&&(l=n.data.domProps=I({},l)),a)r in l||(o[r]="");for(r in l){if(s=l[r],"textContent"===r||"innerHTML"===r){if(n.children&&(n.children.length=0),s===a[r])continue;1===o.childNodes.length&&o.removeChild(o.childNodes[0])}if("value"===r&&"PROGRESS"!==o.tagName){o._value=s;var c=t(s)?"":String(s);Xi(o,c)&&(o.value=c)}else if("innerHTML"===r&&Un(o.tagName)&&t(o.innerHTML)){(Ji=Ji||document.createElement("div")).innerHTML="<svg>"+s+"</svg>";for(var h=Ji.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;h.firstChild;)o.appendChild(h.firstChild)}else if(s!==a[r])try{o[r]=s}catch(e){}}}}function Xi(e,t){return!e.composing&&("OPTION"===e.tagName||function(e,t){var n=!0;try{n=document.activeElement!==e}catch(e){}return n&&e.value!==t}(e,t)||function(e,t){var n=e.value,r=e._vModifiers;if(i(r)){if(r.number)return u(n)!==u(t);if(r.trim)return n.trim()!==t.trim()}return n!==t}(e,t))}var er={create:Qi,update:Qi},tr=x((function(e){var t={},n=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach((function(e){if(e){var i=e.split(n);i.length>1&&(t[i[0].trim()]=i[1].trim())}})),t}));function nr(e){var t=ir(e.style);return e.staticStyle?I(e.staticStyle,t):t}function ir(e){return Array.isArray(e)?P(e):"string"==typeof e?tr(e):e}var rr,sr=/^--/,or=/\s*!important$/,ar=function(e,t,n){if(sr.test(t))e.style.setProperty(t,n);else if(or.test(n))e.style.setProperty(A(t),n.replace(or,""),"important");else{var i=cr(t);if(Array.isArray(n))for(var r=0,s=n.length;r<s;r++)e.style[i]=n[r];else e.style[i]=n}},lr=["Webkit","Moz","ms"],cr=x((function(e){if(rr=rr||document.createElement("div").style,"filter"!==(e=w(e))&&e in rr)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<lr.length;n++){var i=lr[n]+t;if(i in rr)return i}}));function hr(e,n){var r=n.data,s=e.data;if(!(t(r.staticStyle)&&t(r.style)&&t(s.staticStyle)&&t(s.style))){var o,a,l=n.elm,c=s.staticStyle,h=s.normalizedStyle||s.style||{},d=c||h,u=ir(n.data.style)||{};n.data.normalizedStyle=i(u.__ob__)?I({},u):u;var p=function(e,t){for(var n,i={},r=e;r.componentInstance;)(r=r.componentInstance._vnode)&&r.data&&(n=nr(r.data))&&I(i,n);(n=nr(e.data))&&I(i,n);for(var s=e;s=s.parent;)s.data&&(n=nr(s.data))&&I(i,n);return i}(n);for(a in d)t(p[a])&&ar(l,a,"");for(a in p)(o=p[a])!==d[a]&&ar(l,a,null==o?"":o)}}var dr={create:hr,update:hr},ur=/\s+/;function pr(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(ur).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function mr(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(ur).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{for(var n=" "+(e.getAttribute("class")||"")+" ",i=" "+t+" ";n.indexOf(i)>=0;)n=n.replace(i," ");(n=n.trim())?e.setAttribute("class",n):e.removeAttribute("class")}}function fr(e){if(e){if("object"==typeof e){var t={};return!1!==e.css&&I(t,gr(e.name||"v")),I(t,e),t}return"string"==typeof e?gr(e):void 0}}var gr=x((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),vr=H&&!K,yr="transition",xr="animation",br="transition",wr="transitionend",Cr="animation",_r="animationend";vr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(br="WebkitTransition",wr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Cr="WebkitAnimation",_r="webkitAnimationEnd"));var Ar=H?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Sr(e){Ar((function(){Ar(e)}))}function kr(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),pr(e,t))}function Ir(e,t){e._transitionClasses&&g(e._transitionClasses,t),mr(e,t)}function Pr(e,t,n){var i=Tr(e,t),r=i.type,s=i.timeout,o=i.propCount;if(!r)return n();var a=r===yr?wr:_r,l=0,c=function(){e.removeEventListener(a,h),n()},h=function(t){t.target===e&&++l>=o&&c()};setTimeout((function(){l<o&&c()}),s+1),e.addEventListener(a,h)}var Er=/\b(transform|all)(,|$)/;function Tr(e,t){var n,i=window.getComputedStyle(e),r=(i[br+"Delay"]||"").split(", "),s=(i[br+"Duration"]||"").split(", "),o=Mr(r,s),a=(i[Cr+"Delay"]||"").split(", "),l=(i[Cr+"Duration"]||"").split(", "),c=Mr(a,l),h=0,d=0;return t===yr?o>0&&(n=yr,h=o,d=s.length):t===xr?c>0&&(n=xr,h=c,d=l.length):d=(n=(h=Math.max(o,c))>0?o>c?yr:xr:null)?n===yr?s.length:l.length:0,{type:n,timeout:h,propCount:d,hasTransform:n===yr&&Er.test(i[br+"Property"])}}function Mr(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return Or(t)+Or(e[n])})))}function Or(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Dr(e,n){var r=e.elm;i(r._leaveCb)&&(r._leaveCb.cancelled=!0,r._leaveCb());var s=fr(e.data.transition);if(!t(s)&&!i(r._enterCb)&&1===r.nodeType){for(var a=s.css,l=s.type,c=s.enterClass,h=s.enterToClass,d=s.enterActiveClass,p=s.appearClass,m=s.appearToClass,f=s.appearActiveClass,g=s.beforeEnter,v=s.enter,y=s.afterEnter,x=s.enterCancelled,b=s.beforeAppear,w=s.appear,C=s.afterAppear,_=s.appearCancelled,A=s.duration,S=Wt,k=Wt.$vnode;k&&k.parent;)S=k.context,k=k.parent;var I=!S._isMounted||!e.isRootInsert;if(!I||w||""===w){var P=I&&p?p:c,E=I&&f?f:d,T=I&&m?m:h,M=I&&b||g,O=I&&"function"==typeof w?w:v,D=I&&C||y,B=I&&_||x,L=u(o(A)?A.enter:A),N=!1!==a&&!K,R=Lr(O),F=r._enterCb=$((function(){N&&(Ir(r,T),Ir(r,E)),F.cancelled?(N&&Ir(r,P),B&&B(r)):D&&D(r),r._enterCb=null}));e.data.show||ot(e,"insert",(function(){var t=r.parentNode,n=t&&t._pending&&t._pending[e.key];n&&n.tag===e.tag&&n.elm._leaveCb&&n.elm._leaveCb(),O&&O(r,F)})),M&&M(r),N&&(kr(r,P),kr(r,E),Sr((function(){Ir(r,P),F.cancelled||(kr(r,T),R||(Br(L)?setTimeout(F,L):Pr(r,l,F)))}))),e.data.show&&(n&&n(),O&&O(r,F)),N||R||F()}}}function $r(e,n){var r=e.elm;i(r._enterCb)&&(r._enterCb.cancelled=!0,r._enterCb());var s=fr(e.data.transition);if(t(s)||1!==r.nodeType)return n();if(!i(r._leaveCb)){var a=s.css,l=s.type,c=s.leaveClass,h=s.leaveToClass,d=s.leaveActiveClass,p=s.beforeLeave,m=s.leave,f=s.afterLeave,g=s.leaveCancelled,v=s.delayLeave,y=s.duration,x=!1!==a&&!K,b=Lr(m),w=u(o(y)?y.leave:y),C=r._leaveCb=$((function(){r.parentNode&&r.parentNode._pending&&(r.parentNode._pending[e.key]=null),x&&(Ir(r,h),Ir(r,d)),C.cancelled?(x&&Ir(r,c),g&&g(r)):(n(),f&&f(r)),r._leaveCb=null}));v?v(_):_()}function _(){C.cancelled||(!e.data.show&&r.parentNode&&((r.parentNode._pending||(r.parentNode._pending={}))[e.key]=e),p&&p(r),x&&(kr(r,c),kr(r,d),Sr((function(){Ir(r,c),C.cancelled||(kr(r,h),b||(Br(w)?setTimeout(C,w):Pr(r,l,C)))}))),m&&m(r,C),x||b||C())}}function Br(e){return"number"==typeof e&&!isNaN(e)}function Lr(e){if(t(e))return!1;var n=e.fns;return i(n)?Lr(Array.isArray(n)?n[0]:n):(e._length||e.length)>1}function Nr(e,t){!0!==t.data.show&&Dr(t)}var Rr=function(e){var n,o,a={},l=e.modules,c=e.nodeOps;for(n=0;n<Xn.length;++n)for(a[Xn[n]]=[],o=0;o<l.length;++o)i(l[o][Xn[n]])&&a[Xn[n]].push(l[o][Xn[n]]);function h(e){var t=c.parentNode(e);i(t)&&c.removeChild(t,e)}function d(e,t,n,s,o,l,h){if(i(e.elm)&&i(l)&&(e=l[h]=ve(e)),e.isRootInsert=!o,!function(e,t,n,s){var o=e.data;if(i(o)){var l=i(e.componentInstance)&&o.keepAlive;if(i(o=o.hook)&&i(o=o.init)&&o(e,!1),i(e.componentInstance))return u(e,t),m(n,e.elm,s),r(l)&&function(e,t,n,r){for(var s,o=e;o.componentInstance;)if(i(s=(o=o.componentInstance._vnode).data)&&i(s=s.transition)){for(s=0;s<a.activate.length;++s)a.activate[s](Qn,o);t.push(o);break}m(n,e.elm,r)}(e,t,n,s),!0}}(e,t,n,s)){var d=e.data,p=e.children,g=e.tag;i(g)?(e.elm=e.ns?c.createElementNS(e.ns,g):c.createElement(g,e),y(e),f(e,p,t),i(d)&&v(e,t),m(n,e.elm,s)):r(e.isComment)?(e.elm=c.createComment(e.text),m(n,e.elm,s)):(e.elm=c.createTextNode(e.text),m(n,e.elm,s))}}function u(e,t){i(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,g(e)?(v(e,t),y(e)):(Yn(e),t.push(e))}function m(e,t,n){i(e)&&(i(n)?c.parentNode(n)===e&&c.insertBefore(e,t,n):c.appendChild(e,t))}function f(e,t,n){if(Array.isArray(t))for(var i=0;i<t.length;++i)d(t[i],n,e.elm,null,!0,t,i);else s(e.text)&&c.appendChild(e.elm,c.createTextNode(String(e.text)))}function g(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return i(e.tag)}function v(e,t){for(var r=0;r<a.create.length;++r)a.create[r](Qn,e);i(n=e.data.hook)&&(i(n.create)&&n.create(Qn,e),i(n.insert)&&t.push(e))}function y(e){var t;if(i(t=e.fnScopeId))c.setStyleScope(e.elm,t);else for(var n=e;n;)i(t=n.context)&&i(t=t.$options._scopeId)&&c.setStyleScope(e.elm,t),n=n.parent;i(t=Wt)&&t!==e.context&&t!==e.fnContext&&i(t=t.$options._scopeId)&&c.setStyleScope(e.elm,t)}function x(e,t,n,i,r,s){for(;i<=r;++i)d(n[i],s,e,t,!1,n,i)}function b(e){var t,n,r=e.data;if(i(r))for(i(t=r.hook)&&i(t=t.destroy)&&t(e),t=0;t<a.destroy.length;++t)a.destroy[t](e);if(i(t=e.children))for(n=0;n<e.children.length;++n)b(e.children[n])}function w(e,t,n){for(;t<=n;++t){var r=e[t];i(r)&&(i(r.tag)?(C(r),b(r)):h(r.elm))}}function C(e,t){if(i(t)||i(e.data)){var n,r=a.remove.length+1;for(i(t)?t.listeners+=r:t=function(e,t){function n(){0==--n.listeners&&h(e)}return n.listeners=t,n}(e.elm,r),i(n=e.componentInstance)&&i(n=n._vnode)&&i(n.data)&&C(n,t),n=0;n<a.remove.length;++n)a.remove[n](e,t);i(n=e.data.hook)&&i(n=n.remove)?n(e,t):t()}else h(e.elm)}function _(e,t,n,r){for(var s=n;s<r;s++){var o=t[s];if(i(o)&&ei(e,o))return s}}function A(e,n,s,o,l,h){if(e!==n){i(n.elm)&&i(o)&&(n=o[l]=ve(n));var u=n.elm=e.elm;if(r(e.isAsyncPlaceholder))i(n.asyncFactory.resolved)?I(e.elm,n,s):n.isAsyncPlaceholder=!0;else if(r(n.isStatic)&&r(e.isStatic)&&n.key===e.key&&(r(n.isCloned)||r(n.isOnce)))n.componentInstance=e.componentInstance;else{var p,m=n.data;i(m)&&i(p=m.hook)&&i(p=p.prepatch)&&p(e,n);var f=e.children,v=n.children;if(i(m)&&g(n)){for(p=0;p<a.update.length;++p)a.update[p](e,n);i(p=m.hook)&&i(p=p.update)&&p(e,n)}t(n.text)?i(f)&&i(v)?f!==v&&function(e,n,r,s,o){for(var a,l,h,u=0,p=0,m=n.length-1,f=n[0],g=n[m],v=r.length-1,y=r[0],b=r[v],C=!o;u<=m&&p<=v;)t(f)?f=n[++u]:t(g)?g=n[--m]:ei(f,y)?(A(f,y,s,r,p),f=n[++u],y=r[++p]):ei(g,b)?(A(g,b,s,r,v),g=n[--m],b=r[--v]):ei(f,b)?(A(f,b,s,r,v),C&&c.insertBefore(e,f.elm,c.nextSibling(g.elm)),f=n[++u],b=r[--v]):ei(g,y)?(A(g,y,s,r,p),C&&c.insertBefore(e,g.elm,f.elm),g=n[--m],y=r[++p]):(t(a)&&(a=ti(n,u,m)),t(l=i(y.key)?a[y.key]:_(y,n,u,m))?d(y,s,e,f.elm,!1,r,p):ei(h=n[l],y)?(A(h,y,s,r,p),n[l]=void 0,C&&c.insertBefore(e,h.elm,f.elm)):d(y,s,e,f.elm,!1,r,p),y=r[++p]);u>m?x(e,t(r[v+1])?null:r[v+1].elm,r,p,v,s):p>v&&w(n,u,m)}(u,f,v,s,h):i(v)?(i(e.text)&&c.setTextContent(u,""),x(u,null,v,0,v.length-1,s)):i(f)?w(f,0,f.length-1):i(e.text)&&c.setTextContent(u,""):e.text!==n.text&&c.setTextContent(u,n.text),i(m)&&i(p=m.hook)&&i(p=p.postpatch)&&p(e,n)}}}function S(e,t,n){if(r(n)&&i(e.parent))e.parent.data.pendingInsert=t;else for(var s=0;s<t.length;++s)t[s].data.hook.insert(t[s])}var k=p("attrs,class,staticClass,staticStyle,key");function I(e,t,n,s){var o,a=t.tag,l=t.data,c=t.children;if(s=s||l&&l.pre,t.elm=e,r(t.isComment)&&i(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(i(l)&&(i(o=l.hook)&&i(o=o.init)&&o(t,!0),i(o=t.componentInstance)))return u(t,n),!0;if(i(a)){if(i(c))if(e.hasChildNodes())if(i(o=l)&&i(o=o.domProps)&&i(o=o.innerHTML)){if(o!==e.innerHTML)return!1}else{for(var h=!0,d=e.firstChild,p=0;p<c.length;p++){if(!d||!I(d,c[p],n,s)){h=!1;break}d=d.nextSibling}if(!h||d)return!1}else f(t,c,n);if(i(l)){var m=!1;for(var g in l)if(!k(g)){m=!0,v(t,n);break}!m&&l.class&&nt(l.class)}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,n,s,o){if(!t(n)){var l,h=!1,u=[];if(t(e))h=!0,d(n,u);else{var p=i(e.nodeType);if(!p&&ei(e,n))A(e,n,u,null,null,o);else{if(p){if(1===e.nodeType&&e.hasAttribute(B)&&(e.removeAttribute(B),s=!0),r(s)&&I(e,n,u))return S(n,u,!0),e;l=e,e=new pe(c.tagName(l).toLowerCase(),{},[],void 0,l)}var m=e.elm,f=c.parentNode(m);if(d(n,u,m._leaveCb?null:f,c.nextSibling(m)),i(n.parent))for(var v=n.parent,y=g(n);v;){for(var x=0;x<a.destroy.length;++x)a.destroy[x](v);if(v.elm=n.elm,y){for(var C=0;C<a.create.length;++C)a.create[C](Qn,v);var _=v.data.hook.insert;if(_.merged)for(var k=1;k<_.fns.length;k++)_.fns[k]()}else Yn(v);v=v.parent}i(f)?w([e],0,0):i(e.tag)&&b(e)}}return S(n,u,h),n.elm}i(e)&&b(e)}}({nodeOps:Kn,modules:[ui,bi,Yi,er,dr,H?{create:Nr,activate:Nr,remove:function(e,t){!0!==e.data.show?$r(e,t):t()}}:{}].concat(li)});K&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&qr(e,"input")}));var Fr={inserted:function(e,t,n,i){"select"===n.tag?(i.elm&&!i.elm._vOptions?ot(n,"postpatch",(function(){Fr.componentUpdated(e,t,n)})):Zr(e,t,n.context),e._vOptions=[].map.call(e.options,Ur)):("textarea"===n.tag||Gn(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",Hr),e.addEventListener("compositionend",Vr),e.addEventListener("change",Vr),K&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Zr(e,t,n.context);var i=e._vOptions,r=e._vOptions=[].map.call(e.options,Ur);r.some((function(e,t){return!O(e,i[t])}))&&(e.multiple?t.value.some((function(e){return zr(e,r)})):t.value!==t.oldValue&&zr(t.value,r))&&qr(e,"change")}}};function Zr(e,t,n){jr(e,t),(W||J)&&setTimeout((function(){jr(e,t)}),0)}function jr(e,t,n){var i=t.value,r=e.multiple;if(!r||Array.isArray(i)){for(var s,o,a=0,l=e.options.length;a<l;a++)if(o=e.options[a],r)s=D(i,Ur(o))>-1,o.selected!==s&&(o.selected=s);else if(O(Ur(o),i))return void(e.selectedIndex!==a&&(e.selectedIndex=a));r||(e.selectedIndex=-1)}}function zr(e,t){return t.every((function(t){return!O(t,e)}))}function Ur(e){return"_value"in e?e._value:e.value}function Hr(e){e.target.composing=!0}function Vr(e){e.target.composing&&(e.target.composing=!1,qr(e.target,"input"))}function qr(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function Gr(e){return!e.componentInstance||e.data&&e.data.transition?e:Gr(e.componentInstance._vnode)}var Wr={model:Fr,show:{bind:function(e,t,n){var i=t.value,r=(n=Gr(n)).data&&n.data.transition,s=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;i&&r?(n.data.show=!0,Dr(n,(function(){e.style.display=s}))):e.style.display=i?s:"none"},update:function(e,t,n){var i=t.value;!i!=!t.oldValue&&((n=Gr(n)).data&&n.data.transition?(n.data.show=!0,i?Dr(n,(function(){e.style.display=e.__vOriginalDisplay})):$r(n,(function(){e.style.display="none"}))):e.style.display=i?e.__vOriginalDisplay:"none")},unbind:function(e,t,n,i,r){r||(e.style.display=e.__vOriginalDisplay)}}},Kr={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Jr(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?Jr(Ut(t.children)):e}function Yr(e){var t={},n=e.$options;for(var i in n.propsData)t[i]=e[i];var r=n._parentListeners;for(var s in r)t[w(s)]=r[s];return t}function Qr(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}var Xr=function(e){return e.tag||pt(e)},es=function(e){return"show"===e.name},ts={name:"transition",props:Kr,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(Xr)).length){var i=this.mode,r=n[0];if(function(e){for(;e=e.parent;)if(e.data.transition)return!0}(this.$vnode))return r;var o=Jr(r);if(!o)return r;if(this._leaving)return Qr(e,r);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:s(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var l=(o.data||(o.data={})).transition=Yr(this),c=this._vnode,h=Jr(c);if(o.data.directives&&o.data.directives.some(es)&&(o.data.show=!0),h&&h.data&&!function(e,t){return t.key===e.key&&t.tag===e.tag}(o,h)&&!pt(h)&&(!h.componentInstance||!h.componentInstance._vnode.isComment)){var d=h.data.transition=I({},l);if("out-in"===i)return this._leaving=!0,ot(d,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),Qr(e,r);if("in-out"===i){if(pt(o))return c;var u,p=function(){u()};ot(l,"afterEnter",p),ot(l,"enterCancelled",p),ot(d,"delayLeave",(function(e){u=e}))}}return r}}},ns=I({tag:String,moveClass:String},Kr);function is(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function rs(e){e.data.newPos=e.elm.getBoundingClientRect()}function ss(e){var t=e.data.pos,n=e.data.newPos,i=t.left-n.left,r=t.top-n.top;if(i||r){e.data.moved=!0;var s=e.elm.style;s.transform=s.WebkitTransform="translate("+i+"px,"+r+"px)",s.transitionDuration="0s"}}delete ns.mode;var os={Transition:ts,TransitionGroup:{props:ns,beforeMount:function(){var e=this,t=this._update;this._update=function(n,i){var r=Kt(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,r(),t.call(e,n,i)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,r=this.$slots.default||[],s=this.children=[],o=Yr(this),a=0;a<r.length;a++){var l=r[a];l.tag&&null!=l.key&&0!==String(l.key).indexOf("__vlist")&&(s.push(l),n[l.key]=l,(l.data||(l.data={})).transition=o)}if(i){for(var c=[],h=[],d=0;d<i.length;d++){var u=i[d];u.data.transition=o,u.data.pos=u.elm.getBoundingClientRect(),n[u.key]?c.push(u):h.push(u)}this.kept=e(t,null,c),this.removed=h}return e(t,null,s)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(is),e.forEach(rs),e.forEach(ss),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,i=n.style;kr(n,t),i.transform=i.WebkitTransform=i.transitionDuration="",n.addEventListener(wr,n._moveCb=function e(i){i&&i.target!==n||i&&!/transform$/.test(i.propertyName)||(n.removeEventListener(wr,e),n._moveCb=null,Ir(n,t))})}})))},methods:{hasMove:function(e,t){if(!vr)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){mr(n,e)})),pr(n,t),n.style.display="none",this.$el.appendChild(n);var i=Tr(n);return this.$el.removeChild(n),this._hasMove=i.hasTransform}}}};wn.config.mustUseProp=Tn,wn.config.isReservedTag=Hn,wn.config.isReservedAttr=Pn,wn.config.getTagNamespace=Vn,wn.config.isUnknownElement=function(e){if(!H)return!0;if(Hn(e))return!1;if(e=e.toLowerCase(),null!=qn[e])return qn[e];var t=document.createElement(e);return e.indexOf("-")>-1?qn[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:qn[e]=/HTMLUnknownElement/.test(t.toString())},I(wn.options.directives,Wr),I(wn.options.components,os),wn.prototype.__patch__=H?Rr:E,wn.prototype.$mount=function(e,t){return function(e,t,n){var i;return e.$el=t,e.$options.render||(e.$options.render=fe),Qt(e,"beforeMount"),i=function(){e._update(e._render(),n)},new dn(e,i,E,{before:function(){e._isMounted&&!e._isDestroyed&&Qt(e,"beforeUpdate")}},!0),n=!1,null==e.$vnode&&(e._isMounted=!0,Qt(e,"mounted")),e}(this,e=e&&H?Wn(e):void 0,t)},H&&setTimeout((function(){R.devtools&&ie&&ie.emit("init",wn)}),0);var as,ls=/\{\{((?:.|\r?\n)+?)\}\}/g,cs=/[-.*+?^${}()|[\]\/\\]/g,hs=x((function(e){var t=e[0].replace(cs,"\\$&"),n=e[1].replace(cs,"\\$&");return new RegExp(t+"((?:.|\\n)+?)"+n,"g")})),ds={staticKeys:["staticClass"],transformNode:function(e,t){t.warn;var n=Di(e,"class");n&&(e.staticClass=JSON.stringify(n));var i=Oi(e,"class",!1);i&&(e.classBinding=i)},genData:function(e){var t="";return e.staticClass&&(t+="staticClass:"+e.staticClass+","),e.classBinding&&(t+="class:"+e.classBinding+","),t}},us={staticKeys:["staticStyle"],transformNode:function(e,t){t.warn;var n=Di(e,"style");n&&(e.staticStyle=JSON.stringify(tr(n)));var i=Oi(e,"style",!1);i&&(e.styleBinding=i)},genData:function(e){var t="";return e.staticStyle&&(t+="staticStyle:"+e.staticStyle+","),e.styleBinding&&(t+="style:("+e.styleBinding+"),"),t}},ps=p("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),ms=p("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),fs=p("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),gs=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,vs=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+?\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,ys="[a-zA-Z_][\\-\\.0-9_a-zA-Z"+F.source+"]*",xs="((?:"+ys+"\\:)?"+ys+")",bs=new RegExp("^<"+xs),ws=/^\s*(\/?)>/,Cs=new RegExp("^<\\/"+xs+"[^>]*>"),_s=/^<!DOCTYPE [^>]+>/i,As=/^<!\--/,Ss=/^<!\[/,ks=p("script,style,textarea",!0),Is={},Ps={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},Es=/&(?:lt|gt|quot|amp|#39);/g,Ts=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,Ms=p("pre,textarea",!0),Os=function(e,t){return e&&Ms(e)&&"\n"===t[0]};function Ds(e,t){var n=t?Ts:Es;return e.replace(n,(function(e){return Ps[e]}))}var $s,Bs,Ls,Ns,Rs,Fs,Zs,js,zs=/^@|^v-on:/,Us=/^v-|^@|^:|^#/,Hs=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Vs=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,qs=/^\(|\)$/g,Gs=/^\[.*\]$/,Ws=/:(.*)$/,Ks=/^:|^\.|^v-bind:/,Js=/\.[^.\]]+(?=[^\]]*$)/g,Ys=/^v-slot(:|$)|^#/,Qs=/[\r\n]/,Xs=/[ \f\t\r\n]+/g,eo=x((function(e){return(as=as||document.createElement("div")).innerHTML=e,as.textContent})),to="_empty_";function no(e,t,n){return{type:1,tag:e,attrsList:t,attrsMap:lo(t),rawAttrsMap:{},parent:n,children:[]}}function io(e,t){var n,i;(i=Oi(n=e,"key"))&&(n.key=i),e.plain=!e.key&&!e.scopedSlots&&!e.attrsList.length,function(e){var t=Oi(e,"ref");t&&(e.ref=t,e.refInFor=function(e){for(var t=e;t;){if(void 0!==t.for)return!0;t=t.parent}return!1}(e))}(e),function(e){var t;"template"===e.tag?(t=Di(e,"scope"),e.slotScope=t||Di(e,"slot-scope")):(t=Di(e,"slot-scope"))&&(e.slotScope=t);var n=Oi(e,"slot");if(n&&(e.slotTarget='""'===n?'"default"':n,e.slotTargetDynamic=!(!e.attrsMap[":slot"]&&!e.attrsMap["v-bind:slot"]),"template"===e.tag||e.slotScope||Ii(e,"slot",n,function(e,t){return e.rawAttrsMap[":"+t]||e.rawAttrsMap["v-bind:"+t]||e.rawAttrsMap[t]}(e,"slot"))),"template"===e.tag){var i=$i(e,Ys);if(i){var r=oo(i),s=r.name,o=r.dynamic;e.slotTarget=s,e.slotTargetDynamic=o,e.slotScope=i.value||to}}else{var a=$i(e,Ys);if(a){var l=e.scopedSlots||(e.scopedSlots={}),c=oo(a),h=c.name,d=c.dynamic,u=l[h]=no("template",[],e);u.slotTarget=h,u.slotTargetDynamic=d,u.children=e.children.filter((function(e){if(!e.slotScope)return e.parent=u,!0})),u.slotScope=a.value||to,e.children=[],e.plain=!1}}}(e),function(e){"slot"===e.tag&&(e.slotName=Oi(e,"name"))}(e),function(e){var t;(t=Oi(e,"is"))&&(e.component=t),null!=Di(e,"inline-template")&&(e.inlineTemplate=!0)}(e);for(var r=0;r<Ls.length;r++)e=Ls[r](e,t)||e;return function(e){var t,n,i,r,s,o,a,l,c=e.attrsList;for(t=0,n=c.length;t<n;t++)if(i=r=c[t].name,s=c[t].value,Us.test(i))if(e.hasBindings=!0,(o=ao(i.replace(Us,"")))&&(i=i.replace(Js,"")),Ks.test(i))i=i.replace(Ks,""),s=Ci(s),(l=Gs.test(i))&&(i=i.slice(1,-1)),o&&(o.prop&&!l&&"innerHtml"===(i=w(i))&&(i="innerHTML"),o.camel&&!l&&(i=w(i)),o.sync&&(a=Ni(s,"$event"),l?Mi(e,'"update:"+('+i+")",a,null,!1,0,c[t],!0):(Mi(e,"update:"+w(i),a,null,!1,0,c[t]),A(i)!==w(i)&&Mi(e,"update:"+A(i),a,null,!1,0,c[t])))),o&&o.prop||!e.component&&Zs(e.tag,e.attrsMap.type,i)?ki(e,i,s,c[t],l):Ii(e,i,s,c[t],l);else if(zs.test(i))i=i.replace(zs,""),(l=Gs.test(i))&&(i=i.slice(1,-1)),Mi(e,i,s,o,!1,0,c[t],l);else{var h=(i=i.replace(Us,"")).match(Ws),d=h&&h[1];l=!1,d&&(i=i.slice(0,-(d.length+1)),Gs.test(d)&&(d=d.slice(1,-1),l=!0)),Ei(e,i,r,s,d,l,o,c[t])}else Ii(e,i,JSON.stringify(s),c[t]),!e.component&&"muted"===i&&Zs(e.tag,e.attrsMap.type,i)&&ki(e,i,"true",c[t])}(e),e}function ro(e){var t;if(t=Di(e,"v-for")){var n=function(e){var t=e.match(Hs);if(t){var n={};n.for=t[2].trim();var i=t[1].trim().replace(qs,""),r=i.match(Vs);return r?(n.alias=i.replace(Vs,"").trim(),n.iterator1=r[1].trim(),r[2]&&(n.iterator2=r[2].trim())):n.alias=i,n}}(t);n&&I(e,n)}}function so(e,t){e.ifConditions||(e.ifConditions=[]),e.ifConditions.push(t)}function oo(e){var t=e.name.replace(Ys,"");return t||"#"!==e.name[0]&&(t="default"),Gs.test(t)?{name:t.slice(1,-1),dynamic:!0}:{name:'"'+t+'"',dynamic:!1}}function ao(e){var t=e.match(Js);if(t){var n={};return t.forEach((function(e){n[e.slice(1)]=!0})),n}}function lo(e){for(var t={},n=0,i=e.length;n<i;n++)t[e[n].name]=e[n].value;return t}var co=/^xmlns:NS\d+/,ho=/^NS\d+:/;function uo(e){return no(e.tag,e.attrsList.slice(),e.parent)}var po,mo,fo=[ds,us,{preTransformNode:function(e,t){if("input"===e.tag){var n,i=e.attrsMap;if(!i["v-model"])return;if((i[":type"]||i["v-bind:type"])&&(n=Oi(e,"type")),i.type||n||!i["v-bind"]||(n="("+i["v-bind"]+").type"),n){var r=Di(e,"v-if",!0),s=r?"&&("+r+")":"",o=null!=Di(e,"v-else",!0),a=Di(e,"v-else-if",!0),l=uo(e);ro(l),Pi(l,"type","checkbox"),io(l,t),l.processed=!0,l.if="("+n+")==='checkbox'"+s,so(l,{exp:l.if,block:l});var c=uo(e);Di(c,"v-for",!0),Pi(c,"type","radio"),io(c,t),so(l,{exp:"("+n+")==='radio'"+s,block:c});var h=uo(e);return Di(h,"v-for",!0),Pi(h,":type",n),io(h,t),so(l,{exp:r,block:h}),o?l.else=!0:a&&(l.elseif=a),l}}}}],go={expectHTML:!0,modules:fo,directives:{model:function(e,t,n){var i=t.value,r=t.modifiers,s=e.tag,o=e.attrsMap.type;if(e.component)return Li(e,i,r),!1;if("select"===s)!function(e,t,n){var i='var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(n&&n.number?"_n(val)":"val")+"});";Mi(e,"change",i=i+" "+Ni(t,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),null,!0)}(e,i,r);else if("input"===s&&"checkbox"===o)!function(e,t,n){var i=n&&n.number,r=Oi(e,"value")||"null",s=Oi(e,"true-value")||"true",o=Oi(e,"false-value")||"false";ki(e,"checked","Array.isArray("+t+")?_i("+t+","+r+")>-1"+("true"===s?":("+t+")":":_q("+t+","+s+")")),Mi(e,"change","var $$a="+t+",$$el=$event.target,$$c=$$el.checked?("+s+"):("+o+");if(Array.isArray($$a)){var $$v="+(i?"_n("+r+")":r)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+Ni(t,"$$a.concat([$$v])")+")}else{$$i>-1&&("+Ni(t,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+Ni(t,"$$c")+"}",null,!0)}(e,i,r);else if("input"===s&&"radio"===o)!function(e,t,n){var i=n&&n.number,r=Oi(e,"value")||"null";ki(e,"checked","_q("+t+","+(r=i?"_n("+r+")":r)+")"),Mi(e,"change",Ni(t,r),null,!0)}(e,i,r);else if("input"===s||"textarea"===s)!function(e,t,n){var i=e.attrsMap.type,r=n||{},s=r.lazy,o=r.number,a=r.trim,l=!s&&"range"!==i,c=s?"change":"range"===i?Hi:"input",h="$event.target.value";a&&(h="$event.target.value.trim()"),o&&(h="_n("+h+")");var d=Ni(t,h);l&&(d="if($event.target.composing)return;"+d),ki(e,"value","("+t+")"),Mi(e,c,d,null,!0),(a||o)&&Mi(e,"blur","$forceUpdate()")}(e,i,r);else if(!R.isReservedTag(s))return Li(e,i,r),!1;return!0},text:function(e,t){t.value&&ki(e,"textContent","_s("+t.value+")",t)},html:function(e,t){t.value&&ki(e,"innerHTML","_s("+t.value+")",t)}},isPreTag:function(e){return"pre"===e},isUnaryTag:ps,mustUseProp:Tn,canBeLeftOpenTag:ms,isReservedTag:Hn,getTagNamespace:Vn,staticKeys:function(e){return e.reduce((function(e,t){return e.concat(t.staticKeys||[])}),[]).join(",")}(fo)},vo=x((function(e){return p("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(e?","+e:""))}));var yo=/^([\w$_]+|\([^)]*?\))\s*=>|^function(?:\s+[\w$]+)?\s*\(/,xo=/\([^)]*?\);*$/,bo=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,wo={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Co={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},_o=function(e){return"if("+e+")return null;"},Ao={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:_o("$event.target !== $event.currentTarget"),ctrl:_o("!$event.ctrlKey"),shift:_o("!$event.shiftKey"),alt:_o("!$event.altKey"),meta:_o("!$event.metaKey"),left:_o("'button' in $event && $event.button !== 0"),middle:_o("'button' in $event && $event.button !== 1"),right:_o("'button' in $event && $event.button !== 2")};function So(e,t){var n=t?"nativeOn:":"on:",i="",r="";for(var s in e){var o=ko(e[s]);e[s]&&e[s].dynamic?r+=s+","+o+",":i+='"'+s+'":'+o+","}return i="{"+i.slice(0,-1)+"}",r?n+"_d("+i+",["+r.slice(0,-1)+"])":n+i}function ko(e){if(!e)return"function(){}";if(Array.isArray(e))return"["+e.map((function(e){return ko(e)})).join(",")+"]";var t=bo.test(e.value),n=yo.test(e.value),i=bo.test(e.value.replace(xo,""));if(e.modifiers){var r="",s="",o=[];for(var a in e.modifiers)if(Ao[a])s+=Ao[a],wo[a]&&o.push(a);else if("exact"===a){var l=e.modifiers;s+=_o(["ctrl","shift","alt","meta"].filter((function(e){return!l[e]})).map((function(e){return"$event."+e+"Key"})).join("||"))}else o.push(a);return o.length&&(r+=function(e){return"if(!$event.type.indexOf('key')&&"+e.map(Io).join("&&")+")return null;"}(o)),s&&(r+=s),"function($event){"+r+(t?"return "+e.value+".apply(null, arguments)":n?"return ("+e.value+").apply(null, arguments)":i?"return "+e.value:e.value)+"}"}return t||n?e.value:"function($event){"+(i?"return "+e.value:e.value)+"}"}function Io(e){var t=parseInt(e,10);if(t)return"$event.keyCode!=="+t;var n=wo[e],i=Co[e];return"_k($event.keyCode,"+JSON.stringify(e)+","+JSON.stringify(n)+",$event.key,"+JSON.stringify(i)+")"}var Po={on:function(e,t){e.wrapListeners=function(e){return"_g("+e+","+t.value+")"}},bind:function(e,t){e.wrapData=function(n){return"_b("+n+",'"+e.tag+"',"+t.value+","+(t.modifiers&&t.modifiers.prop?"true":"false")+(t.modifiers&&t.modifiers.sync?",true":"")+")"}},cloak:E},Eo=function(e){this.options=e,this.warn=e.warn||Ai,this.transforms=Si(e.modules,"transformCode"),this.dataGenFns=Si(e.modules,"genData"),this.directives=I(I({},Po),e.directives);var t=e.isReservedTag||T;this.maybeComponent=function(e){return!!e.component||!t(e.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1};function To(e,t){var n=new Eo(t);return{render:"with(this){return "+(e?"script"===e.tag?"null":Mo(e,n):'_c("div")')+"}",staticRenderFns:n.staticRenderFns}}function Mo(e,t){if(e.parent&&(e.pre=e.pre||e.parent.pre),e.staticRoot&&!e.staticProcessed)return Oo(e,t);if(e.once&&!e.onceProcessed)return Do(e,t);if(e.for&&!e.forProcessed)return Bo(e,t);if(e.if&&!e.ifProcessed)return $o(e,t);if("template"!==e.tag||e.slotTarget||t.pre){if("slot"===e.tag)return function(e,t){var n=e.slotName||'"default"',i=Fo(e,t),r="_t("+n+(i?",function(){return "+i+"}":""),s=e.attrs||e.dynamicAttrs?zo((e.attrs||[]).concat(e.dynamicAttrs||[]).map((function(e){return{name:w(e.name),value:e.value,dynamic:e.dynamic}}))):null,o=e.attrsMap["v-bind"];return!s&&!o||i||(r+=",null"),s&&(r+=","+s),o&&(r+=(s?"":",null")+","+o),r+")"}(e,t);var n;if(e.component)n=function(e,t,n){var i=t.inlineTemplate?null:Fo(t,n,!0);return"_c("+e+","+Lo(t,n)+(i?","+i:"")+")"}(e.component,e,t);else{var i;(!e.plain||e.pre&&t.maybeComponent(e))&&(i=Lo(e,t));var r=e.inlineTemplate?null:Fo(e,t,!0);n="_c('"+e.tag+"'"+(i?","+i:"")+(r?","+r:"")+")"}for(var s=0;s<t.transforms.length;s++)n=t.transforms[s](e,n);return n}return Fo(e,t)||"void 0"}function Oo(e,t){e.staticProcessed=!0;var n=t.pre;return e.pre&&(t.pre=e.pre),t.staticRenderFns.push("with(this){return "+Mo(e,t)+"}"),t.pre=n,"_m("+(t.staticRenderFns.length-1)+(e.staticInFor?",true":"")+")"}function Do(e,t){if(e.onceProcessed=!0,e.if&&!e.ifProcessed)return $o(e,t);if(e.staticInFor){for(var n="",i=e.parent;i;){if(i.for){n=i.key;break}i=i.parent}return n?"_o("+Mo(e,t)+","+t.onceId+++","+n+")":Mo(e,t)}return Oo(e,t)}function $o(e,t,n,i){return e.ifProcessed=!0,function e(t,n,i,r){if(!t.length)return r||"_e()";var s=t.shift();return s.exp?"("+s.exp+")?"+o(s.block)+":"+e(t,n,i,r):""+o(s.block);function o(e){return i?i(e,n):e.once?Do(e,n):Mo(e,n)}}(e.ifConditions.slice(),t,n,i)}function Bo(e,t,n,i){var r=e.for,s=e.alias,o=e.iterator1?","+e.iterator1:"",a=e.iterator2?","+e.iterator2:"";return e.forProcessed=!0,(i||"_l")+"(("+r+"),function("+s+o+a+"){return "+(n||Mo)(e,t)+"})"}function Lo(e,t){var n="{",i=function(e,t){var n=e.directives;if(n){var i,r,s,o,a="directives:[",l=!1;for(i=0,r=n.length;i<r;i++){s=n[i],o=!0;var c=t.directives[s.name];c&&(o=!!c(e,s,t.warn)),o&&(l=!0,a+='{name:"'+s.name+'",rawName:"'+s.rawName+'"'+(s.value?",value:("+s.value+"),expression:"+JSON.stringify(s.value):"")+(s.arg?",arg:"+(s.isDynamicArg?s.arg:'"'+s.arg+'"'):"")+(s.modifiers?",modifiers:"+JSON.stringify(s.modifiers):"")+"},")}return l?a.slice(0,-1)+"]":void 0}}(e,t);i&&(n+=i+","),e.key&&(n+="key:"+e.key+","),e.ref&&(n+="ref:"+e.ref+","),e.refInFor&&(n+="refInFor:true,"),e.pre&&(n+="pre:true,"),e.component&&(n+='tag:"'+e.tag+'",');for(var r=0;r<t.dataGenFns.length;r++)n+=t.dataGenFns[r](e);if(e.attrs&&(n+="attrs:"+zo(e.attrs)+","),e.props&&(n+="domProps:"+zo(e.props)+","),e.events&&(n+=So(e.events,!1)+","),e.nativeEvents&&(n+=So(e.nativeEvents,!0)+","),e.slotTarget&&!e.slotScope&&(n+="slot:"+e.slotTarget+","),e.scopedSlots&&(n+=function(e,t,n){var i=e.for||Object.keys(t).some((function(e){var n=t[e];return n.slotTargetDynamic||n.if||n.for||No(n)})),r=!!e.if;if(!i)for(var s=e.parent;s;){if(s.slotScope&&s.slotScope!==to||s.for){i=!0;break}s.if&&(r=!0),s=s.parent}var o=Object.keys(t).map((function(e){return Ro(t[e],n)})).join(",");return"scopedSlots:_u(["+o+"]"+(i?",null,true":"")+(!i&&r?",null,false,"+function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}(o):"")+")"}(e,e.scopedSlots,t)+","),e.model&&(n+="model:{value:"+e.model.value+",callback:"+e.model.callback+",expression:"+e.model.expression+"},"),e.inlineTemplate){var s=function(e,t){var n=e.children[0];if(n&&1===n.type){var i=To(n,t.options);return"inlineTemplate:{render:function(){"+i.render+"},staticRenderFns:["+i.staticRenderFns.map((function(e){return"function(){"+e+"}"})).join(",")+"]}"}}(e,t);s&&(n+=s+",")}return n=n.replace(/,$/,"")+"}",e.dynamicAttrs&&(n="_b("+n+',"'+e.tag+'",'+zo(e.dynamicAttrs)+")"),e.wrapData&&(n=e.wrapData(n)),e.wrapListeners&&(n=e.wrapListeners(n)),n}function No(e){return 1===e.type&&("slot"===e.tag||e.children.some(No))}function Ro(e,t){var n=e.attrsMap["slot-scope"];if(e.if&&!e.ifProcessed&&!n)return $o(e,t,Ro,"null");if(e.for&&!e.forProcessed)return Bo(e,t,Ro);var i=e.slotScope===to?"":String(e.slotScope),r="function("+i+"){return "+("template"===e.tag?e.if&&n?"("+e.if+")?"+(Fo(e,t)||"undefined")+":undefined":Fo(e,t)||"undefined":Mo(e,t))+"}",s=i?"":",proxy:true";return"{key:"+(e.slotTarget||'"default"')+",fn:"+r+s+"}"}function Fo(e,t,n,i,r){var s=e.children;if(s.length){var o=s[0];if(1===s.length&&o.for&&"template"!==o.tag&&"slot"!==o.tag){var a=n?t.maybeComponent(o)?",1":",0":"";return""+(i||Mo)(o,t)+a}var l=n?function(e,t){for(var n=0,i=0;i<e.length;i++){var r=e[i];if(1===r.type){if(Zo(r)||r.ifConditions&&r.ifConditions.some((function(e){return Zo(e.block)}))){n=2;break}(t(r)||r.ifConditions&&r.ifConditions.some((function(e){return t(e.block)})))&&(n=1)}}return n}(s,t.maybeComponent):0,c=r||jo;return"["+s.map((function(e){return c(e,t)})).join(",")+"]"+(l?","+l:"")}}function Zo(e){return void 0!==e.for||"template"===e.tag||"slot"===e.tag}function jo(e,t){return 1===e.type?Mo(e,t):3===e.type&&e.isComment?(i=e,"_e("+JSON.stringify(i.text)+")"):"_v("+(2===(n=e).type?n.expression:Uo(JSON.stringify(n.text)))+")";var n,i}function zo(e){for(var t="",n="",i=0;i<e.length;i++){var r=e[i],s=Uo(r.value);r.dynamic?n+=r.name+","+s+",":t+='"'+r.name+'":'+s+","}return t="{"+t.slice(0,-1)+"}",n?"_d("+t+",["+n.slice(0,-1)+"])":t}function Uo(e){return e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function Ho(e,t){try{return new Function(e)}catch(n){return t.push({err:n,code:e}),E}}function Vo(e){var t=Object.create(null);return function(n,i,r){(i=I({},i)).warn,delete i.warn;var s=i.delimiters?String(i.delimiters)+n:n;if(t[s])return t[s];var o=e(n,i),a={},l=[];return a.render=Ho(o.render,l),a.staticRenderFns=o.staticRenderFns.map((function(e){return Ho(e,l)})),t[s]=a}}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b");var qo,Go,Wo=(qo=function(e,t){var n=function(e,t){$s=t.warn||Ai,Fs=t.isPreTag||T,Zs=t.mustUseProp||T,js=t.getTagNamespace||T,t.isReservedTag,Ls=Si(t.modules,"transformNode"),Ns=Si(t.modules,"preTransformNode"),Rs=Si(t.modules,"postTransformNode"),Bs=t.delimiters;var n,i,r=[],s=!1!==t.preserveWhitespace,o=t.whitespace,a=!1,l=!1;function c(e){if(h(e),a||e.processed||(e=io(e,t)),r.length||e===n||n.if&&(e.elseif||e.else)&&so(n,{exp:e.elseif,block:e}),i&&!e.forbidden)if(e.elseif||e.else)o=e,(c=function(e){for(var t=e.length;t--;){if(1===e[t].type)return e[t];e.pop()}}(i.children))&&c.if&&so(c,{exp:o.elseif,block:o});else{if(e.slotScope){var s=e.slotTarget||'"default"';(i.scopedSlots||(i.scopedSlots={}))[s]=e}i.children.push(e),e.parent=i}var o,c;e.children=e.children.filter((function(e){return!e.slotScope})),h(e),e.pre&&(a=!1),Fs(e.tag)&&(l=!1);for(var d=0;d<Rs.length;d++)Rs[d](e,t)}function h(e){if(!l)for(var t;(t=e.children[e.children.length-1])&&3===t.type&&" "===t.text;)e.children.pop()}return function(e,t){for(var n,i,r=[],s=t.expectHTML,o=t.isUnaryTag||T,a=t.canBeLeftOpenTag||T,l=0;e;){if(n=e,i&&ks(i)){var c=0,h=i.toLowerCase(),d=Is[h]||(Is[h]=new RegExp("([\\s\\S]*?)(</"+h+"[^>]*>)","i")),u=e.replace(d,(function(e,n,i){return c=i.length,ks(h)||"noscript"===h||(n=n.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),Os(h,n)&&(n=n.slice(1)),t.chars&&t.chars(n),""}));l+=e.length-u.length,e=u,k(h,l-c,l)}else{var p=e.indexOf("<");if(0===p){if(As.test(e)){var m=e.indexOf("--\x3e");if(m>=0){t.shouldKeepComment&&t.comment(e.substring(4,m),l,l+m+3),_(m+3);continue}}if(Ss.test(e)){var f=e.indexOf("]>");if(f>=0){_(f+2);continue}}var g=e.match(_s);if(g){_(g[0].length);continue}var v=e.match(Cs);if(v){var y=l;_(v[0].length),k(v[1],y,l);continue}var x=A();if(x){S(x),Os(x.tagName,e)&&_(1);continue}}var b=void 0,w=void 0,C=void 0;if(p>=0){for(w=e.slice(p);!(Cs.test(w)||bs.test(w)||As.test(w)||Ss.test(w)||(C=w.indexOf("<",1))<0);)p+=C,w=e.slice(p);b=e.substring(0,p)}p<0&&(b=e),b&&_(b.length),t.chars&&b&&t.chars(b,l-b.length,l)}if(e===n){t.chars&&t.chars(e);break}}function _(t){l+=t,e=e.substring(t)}function A(){var t=e.match(bs);if(t){var n,i,r={tagName:t[1],attrs:[],start:l};for(_(t[0].length);!(n=e.match(ws))&&(i=e.match(vs)||e.match(gs));)i.start=l,_(i[0].length),i.end=l,r.attrs.push(i);if(n)return r.unarySlash=n[1],_(n[0].length),r.end=l,r}}function S(e){var n=e.tagName,l=e.unarySlash;s&&("p"===i&&fs(n)&&k(i),a(n)&&i===n&&k(n));for(var c=o(n)||!!l,h=e.attrs.length,d=new Array(h),u=0;u<h;u++){var p=e.attrs[u],m=p[3]||p[4]||p[5]||"",f="a"===n&&"href"===p[1]?t.shouldDecodeNewlinesForHref:t.shouldDecodeNewlines;d[u]={name:p[1],value:Ds(m,f)}}c||(r.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:d,start:e.start,end:e.end}),i=n),t.start&&t.start(n,d,c,e.start,e.end)}function k(e,n,s){var o,a;if(null==n&&(n=l),null==s&&(s=l),e)for(a=e.toLowerCase(),o=r.length-1;o>=0&&r[o].lowerCasedTag!==a;o--);else o=0;if(o>=0){for(var c=r.length-1;c>=o;c--)t.end&&t.end(r[c].tag,n,s);r.length=o,i=o&&r[o-1].tag}else"br"===a?t.start&&t.start(e,[],!0,n,s):"p"===a&&(t.start&&t.start(e,[],!1,n,s),t.end&&t.end(e,n,s))}k()}(e,{warn:$s,expectHTML:t.expectHTML,isUnaryTag:t.isUnaryTag,canBeLeftOpenTag:t.canBeLeftOpenTag,shouldDecodeNewlines:t.shouldDecodeNewlines,shouldDecodeNewlinesForHref:t.shouldDecodeNewlinesForHref,shouldKeepComment:t.comments,outputSourceRange:t.outputSourceRange,start:function(e,s,o,h,d){var u=i&&i.ns||js(e);W&&"svg"===u&&(s=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];co.test(i.name)||(i.name=i.name.replace(ho,""),t.push(i))}return t}(s));var p,m=no(e,s,i);u&&(m.ns=u),"style"!==(p=m).tag&&("script"!==p.tag||p.attrsMap.type&&"text/javascript"!==p.attrsMap.type)||ne()||(m.forbidden=!0);for(var f=0;f<Ns.length;f++)m=Ns[f](m,t)||m;a||(function(e){null!=Di(e,"v-pre")&&(e.pre=!0)}(m),m.pre&&(a=!0)),Fs(m.tag)&&(l=!0),a?function(e){var t=e.attrsList,n=t.length;if(n)for(var i=e.attrs=new Array(n),r=0;r<n;r++)i[r]={name:t[r].name,value:JSON.stringify(t[r].value)},null!=t[r].start&&(i[r].start=t[r].start,i[r].end=t[r].end);else e.pre||(e.plain=!0)}(m):m.processed||(ro(m),function(e){var t=Di(e,"v-if");if(t)e.if=t,so(e,{exp:t,block:e});else{null!=Di(e,"v-else")&&(e.else=!0);var n=Di(e,"v-else-if");n&&(e.elseif=n)}}(m),function(e){null!=Di(e,"v-once")&&(e.once=!0)}(m)),n||(n=m),o?c(m):(i=m,r.push(m))},end:function(e,t,n){var s=r[r.length-1];r.length-=1,i=r[r.length-1],c(s)},chars:function(e,t,n){if(i&&(!W||"textarea"!==i.tag||i.attrsMap.placeholder!==e)){var r,c,h,d=i.children;(e=l||e.trim()?"script"===(r=i).tag||"style"===r.tag?e:eo(e):d.length?o?"condense"===o&&Qs.test(e)?"":" ":s?" ":"":"")&&(l||"condense"!==o||(e=e.replace(Xs," ")),!a&&" "!==e&&(c=function(e,t){var n=t?hs(t):ls;if(n.test(e)){for(var i,r,s,o=[],a=[],l=n.lastIndex=0;i=n.exec(e);){(r=i.index)>l&&(a.push(s=e.slice(l,r)),o.push(JSON.stringify(s)));var c=Ci(i[1].trim());o.push("_s("+c+")"),a.push({"@binding":c}),l=r+i[0].length}return l<e.length&&(a.push(s=e.slice(l)),o.push(JSON.stringify(s))),{expression:o.join("+"),tokens:a}}}(e,Bs))?h={type:2,expression:c.expression,tokens:c.tokens,text:e}:" "===e&&d.length&&" "===d[d.length-1].text||(h={type:3,text:e}),h&&d.push(h))}},comment:function(e,t,n){if(i){var r={type:3,text:e,isComment:!0};i.children.push(r)}}}),n}(e.trim(),t);!1!==t.optimize&&function(e,t){e&&(po=vo(t.staticKeys||""),mo=t.isReservedTag||T,function e(t){if(t.static=function(e){return 2!==e.type&&(3===e.type||!(!e.pre&&(e.hasBindings||e.if||e.for||m(e.tag)||!mo(e.tag)||function(e){for(;e.parent;){if("template"!==(e=e.parent).tag)return!1;if(e.for)return!0}return!1}(e)||!Object.keys(e).every(po))))}(t),1===t.type){if(!mo(t.tag)&&"slot"!==t.tag&&null==t.attrsMap["inline-template"])return;for(var n=0,i=t.children.length;n<i;n++){var r=t.children[n];e(r),r.static||(t.static=!1)}if(t.ifConditions)for(var s=1,o=t.ifConditions.length;s<o;s++){var a=t.ifConditions[s].block;e(a),a.static||(t.static=!1)}}}(e),function e(t,n){if(1===t.type){if((t.static||t.once)&&(t.staticInFor=n),t.static&&t.children.length&&(1!==t.children.length||3!==t.children[0].type))return void(t.staticRoot=!0);if(t.staticRoot=!1,t.children)for(var i=0,r=t.children.length;i<r;i++)e(t.children[i],n||!!t.for);if(t.ifConditions)for(var s=1,o=t.ifConditions.length;s<o;s++)e(t.ifConditions[s].block,n)}}(e,!1))}(n,t);var i=To(n,t);return{ast:n,render:i.render,staticRenderFns:i.staticRenderFns}},function(e){function t(t,n){var i=Object.create(e),r=[],s=[];if(n)for(var o in n.modules&&(i.modules=(e.modules||[]).concat(n.modules)),n.directives&&(i.directives=I(Object.create(e.directives||null),n.directives)),n)"modules"!==o&&"directives"!==o&&(i[o]=n[o]);i.warn=function(e,t,n){(n?s:r).push(e)};var a=qo(t.trim(),i);return a.errors=r,a.tips=s,a}return{compile:t,compileToFunctions:Vo(t)}})(go),Ko=(Wo.compile,Wo.compileToFunctions);function Jo(e){return(Go=Go||document.createElement("div")).innerHTML=e?'<a href="\n"/>':'<div a="\n"/>',Go.innerHTML.indexOf("&#10;")>0}var Yo=!!H&&Jo(!1),Qo=!!H&&Jo(!0),Xo=x((function(e){var t=Wn(e);return t&&t.innerHTML})),ea=wn.prototype.$mount;return wn.prototype.$mount=function(e,t){if((e=e&&Wn(e))===document.body||e===document.documentElement)return this;var n=this.$options;if(!n.render){var i=n.template;if(i)if("string"==typeof i)"#"===i.charAt(0)&&(i=Xo(i));else{if(!i.nodeType)return this;i=i.innerHTML}else e&&(i=function(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}(e));if(i){var r=Ko(i,{outputSourceRange:!1,shouldDecodeNewlines:Yo,shouldDecodeNewlinesForHref:Qo,delimiters:n.delimiters,comments:n.comments},this),s=r.render,o=r.staticRenderFns;n.render=s,n.staticRenderFns=o}}return ea.call(this,e,t)},wn.compile=Ko,wn}()},2868:()=>{},4777:()=>{},9830:()=>{},209:()=>{},7414:()=>{},2961:e=>{e.exports={nanoid:(e=21)=>{let t="",n=e;for(;n--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t)=>()=>{let n="",i=t;for(;i--;)n+=e[Math.random()*e.length|0];return n}}},3600:e=>{"use strict";e.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},9323:e=>{"use strict";e.exports=JSON.parse('{"Aacute":"","aacute":"","Abreve":"","abreve":"","ac":"","acd":"","acE":"","Acirc":"","acirc":"","acute":"","Acy":"","acy":"","AElig":"","aelig":"","af":"","Afr":"","afr":"","Agrave":"","agrave":"","alefsym":"","aleph":"","Alpha":"","alpha":"","Amacr":"","amacr":"","amalg":"","amp":"&","AMP":"&","andand":"","And":"","and":"","andd":"","andslope":"","andv":"","ang":"","ange":"","angle":"","angmsdaa":"","angmsdab":"","angmsdac":"","angmsdad":"","angmsdae":"","angmsdaf":"","angmsdag":"","angmsdah":"","angmsd":"","angrt":"","angrtvb":"","angrtvbd":"","angsph":"","angst":"","angzarr":"","Aogon":"","aogon":"","Aopf":"","aopf":"","apacir":"","ap":"","apE":"","ape":"","apid":"","apos":"\'","ApplyFunction":"","approx":"","approxeq":"","Aring":"","aring":"","Ascr":"","ascr":"","Assign":"","ast":"*","asymp":"","asympeq":"","Atilde":"","atilde":"","Auml":"","auml":"","awconint":"","awint":"","backcong":"","backepsilon":"","backprime":"","backsim":"","backsimeq":"","Backslash":"","Barv":"","barvee":"","barwed":"","Barwed":"","barwedge":"","bbrk":"","bbrktbrk":"","bcong":"","Bcy":"","bcy":"","bdquo":"","becaus":"","because":"","Because":"","bemptyv":"","bepsi":"","bernou":"","Bernoullis":"","Beta":"","beta":"","beth":"","between":"","Bfr":"","bfr":"","bigcap":"","bigcirc":"","bigcup":"","bigodot":"","bigoplus":"","bigotimes":"","bigsqcup":"","bigstar":"","bigtriangledown":"","bigtriangleup":"","biguplus":"","bigvee":"","bigwedge":"","bkarow":"","blacklozenge":"","blacksquare":"","blacktriangle":"","blacktriangledown":"","blacktriangleleft":"","blacktriangleright":"","blank":"","blk12":"","blk14":"","blk34":"","block":"","bne":"=","bnequiv":"","bNot":"","bnot":"","Bopf":"","bopf":"","bot":"","bottom":"","bowtie":"","boxbox":"","boxdl":"","boxdL":"","boxDl":"","boxDL":"","boxdr":"","boxdR":"","boxDr":"","boxDR":"","boxh":"","boxH":"","boxhd":"","boxHd":"","boxhD":"","boxHD":"","boxhu":"","boxHu":"","boxhU":"","boxHU":"","boxminus":"","boxplus":"","boxtimes":"","boxul":"","boxuL":"","boxUl":"","boxUL":"","boxur":"","boxuR":"","boxUr":"","boxUR":"","boxv":"","boxV":"","boxvh":"","boxvH":"","boxVh":"","boxVH":"","boxvl":"","boxvL":"","boxVl":"","boxVL":"","boxvr":"","boxvR":"","boxVr":"","boxVR":"","bprime":"","breve":"","Breve":"","brvbar":"","bscr":"","Bscr":"","bsemi":"","bsim":"","bsime":"","bsolb":"","bsol":"\\\\","bsolhsub":"","bull":"","bullet":"","bump":"","bumpE":"","bumpe":"","Bumpeq":"","bumpeq":"","Cacute":"","cacute":"","capand":"","capbrcup":"","capcap":"","cap":"","Cap":"","capcup":"","capdot":"","CapitalDifferentialD":"","caps":"","caret":"","caron":"","Cayleys":"","ccaps":"","Ccaron":"","ccaron":"","Ccedil":"","ccedil":"","Ccirc":"","ccirc":"","Cconint":"","ccups":"","ccupssm":"","Cdot":"","cdot":"","cedil":"","Cedilla":"","cemptyv":"","cent":"","centerdot":"","CenterDot":"","cfr":"","Cfr":"","CHcy":"","chcy":"","check":"","checkmark":"","Chi":"","chi":"","circ":"","circeq":"","circlearrowleft":"","circlearrowright":"","circledast":"","circledcirc":"","circleddash":"","CircleDot":"","circledR":"","circledS":"","CircleMinus":"","CirclePlus":"","CircleTimes":"","cir":"","cirE":"","cire":"","cirfnint":"","cirmid":"","cirscir":"","ClockwiseContourIntegral":"","CloseCurlyDoubleQuote":"","CloseCurlyQuote":"","clubs":"","clubsuit":"","colon":":","Colon":"","Colone":"","colone":"","coloneq":"","comma":",","commat":"@","comp":"","compfn":"","complement":"","complexes":"","cong":"","congdot":"","Congruent":"","conint":"","Conint":"","ContourIntegral":"","copf":"","Copf":"","coprod":"","Coproduct":"","copy":"","COPY":"","copysr":"","CounterClockwiseContourIntegral":"","crarr":"","cross":"","Cross":"","Cscr":"","cscr":"","csub":"","csube":"","csup":"","csupe":"","ctdot":"","cudarrl":"","cudarrr":"","cuepr":"","cuesc":"","cularr":"","cularrp":"","cupbrcap":"","cupcap":"","CupCap":"","cup":"","Cup":"","cupcup":"","cupdot":"","cupor":"","cups":"","curarr":"","curarrm":"","curlyeqprec":"","curlyeqsucc":"","curlyvee":"","curlywedge":"","curren":"","curvearrowleft":"","curvearrowright":"","cuvee":"","cuwed":"","cwconint":"","cwint":"","cylcty":"","dagger":"","Dagger":"","daleth":"","darr":"","Darr":"","dArr":"","dash":"","Dashv":"","dashv":"","dbkarow":"","dblac":"","Dcaron":"","dcaron":"","Dcy":"","dcy":"","ddagger":"","ddarr":"","DD":"","dd":"","DDotrahd":"","ddotseq":"","deg":"","Del":"","Delta":"","delta":"","demptyv":"","dfisht":"","Dfr":"","dfr":"","dHar":"","dharl":"","dharr":"","DiacriticalAcute":"","DiacriticalDot":"","DiacriticalDoubleAcute":"","DiacriticalGrave":"`","DiacriticalTilde":"","diam":"","diamond":"","Diamond":"","diamondsuit":"","diams":"","die":"","DifferentialD":"","digamma":"","disin":"","div":"","divide":"","divideontimes":"","divonx":"","DJcy":"","djcy":"","dlcorn":"","dlcrop":"","dollar":"$","Dopf":"","dopf":"","Dot":"","dot":"","DotDot":"","doteq":"","doteqdot":"","DotEqual":"","dotminus":"","dotplus":"","dotsquare":"","doublebarwedge":"","DoubleContourIntegral":"","DoubleDot":"","DoubleDownArrow":"","DoubleLeftArrow":"","DoubleLeftRightArrow":"","DoubleLeftTee":"","DoubleLongLeftArrow":"","DoubleLongLeftRightArrow":"","DoubleLongRightArrow":"","DoubleRightArrow":"","DoubleRightTee":"","DoubleUpArrow":"","DoubleUpDownArrow":"","DoubleVerticalBar":"","DownArrowBar":"","downarrow":"","DownArrow":"","Downarrow":"","DownArrowUpArrow":"","DownBreve":"","downdownarrows":"","downharpoonleft":"","downharpoonright":"","DownLeftRightVector":"","DownLeftTeeVector":"","DownLeftVectorBar":"","DownLeftVector":"","DownRightTeeVector":"","DownRightVectorBar":"","DownRightVector":"","DownTeeArrow":"","DownTee":"","drbkarow":"","drcorn":"","drcrop":"","Dscr":"","dscr":"","DScy":"","dscy":"","dsol":"","Dstrok":"","dstrok":"","dtdot":"","dtri":"","dtrif":"","duarr":"","duhar":"","dwangle":"","DZcy":"","dzcy":"","dzigrarr":"","Eacute":"","eacute":"","easter":"","Ecaron":"","ecaron":"","Ecirc":"","ecirc":"","ecir":"","ecolon":"","Ecy":"","ecy":"","eDDot":"","Edot":"","edot":"","eDot":"","ee":"","efDot":"","Efr":"","efr":"","eg":"","Egrave":"","egrave":"","egs":"","egsdot":"","el":"","Element":"","elinters":"","ell":"","els":"","elsdot":"","Emacr":"","emacr":"","empty":"","emptyset":"","EmptySmallSquare":"","emptyv":"","EmptyVerySmallSquare":"","emsp13":"","emsp14":"","emsp":"","ENG":"","eng":"","ensp":"","Eogon":"","eogon":"","Eopf":"","eopf":"","epar":"","eparsl":"","eplus":"","epsi":"","Epsilon":"","epsilon":"","epsiv":"","eqcirc":"","eqcolon":"","eqsim":"","eqslantgtr":"","eqslantless":"","Equal":"","equals":"=","EqualTilde":"","equest":"","Equilibrium":"","equiv":"","equivDD":"","eqvparsl":"","erarr":"","erDot":"","escr":"","Escr":"","esdot":"","Esim":"","esim":"","Eta":"","eta":"","ETH":"","eth":"","Euml":"","euml":"","euro":"","excl":"!","exist":"","Exists":"","expectation":"","exponentiale":"","ExponentialE":"","fallingdotseq":"","Fcy":"","fcy":"","female":"","ffilig":"","fflig":"","ffllig":"","Ffr":"","ffr":"","filig":"","FilledSmallSquare":"","FilledVerySmallSquare":"","fjlig":"fj","flat":"","fllig":"","fltns":"","fnof":"","Fopf":"","fopf":"","forall":"","ForAll":"","fork":"","forkv":"","Fouriertrf":"","fpartint":"","frac12":"","frac13":"","frac14":"","frac15":"","frac16":"","frac18":"","frac23":"","frac25":"","frac34":"","frac35":"","frac38":"","frac45":"","frac56":"","frac58":"","frac78":"","frasl":"","frown":"","fscr":"","Fscr":"","gacute":"","Gamma":"","gamma":"","Gammad":"","gammad":"","gap":"","Gbreve":"","gbreve":"","Gcedil":"","Gcirc":"","gcirc":"","Gcy":"","gcy":"","Gdot":"","gdot":"","ge":"","gE":"","gEl":"","gel":"","geq":"","geqq":"","geqslant":"","gescc":"","ges":"","gesdot":"","gesdoto":"","gesdotol":"","gesl":"","gesles":"","Gfr":"","gfr":"","gg":"","Gg":"","ggg":"","gimel":"","GJcy":"","gjcy":"","gla":"","gl":"","glE":"","glj":"","gnap":"","gnapprox":"","gne":"","gnE":"","gneq":"","gneqq":"","gnsim":"","Gopf":"","gopf":"","grave":"`","GreaterEqual":"","GreaterEqualLess":"","GreaterFullEqual":"","GreaterGreater":"","GreaterLess":"","GreaterSlantEqual":"","GreaterTilde":"","Gscr":"","gscr":"","gsim":"","gsime":"","gsiml":"","gtcc":"","gtcir":"","gt":">","GT":">","Gt":"","gtdot":"","gtlPar":"","gtquest":"","gtrapprox":"","gtrarr":"","gtrdot":"","gtreqless":"","gtreqqless":"","gtrless":"","gtrsim":"","gvertneqq":"","gvnE":"","Hacek":"","hairsp":"","half":"","hamilt":"","HARDcy":"","hardcy":"","harrcir":"","harr":"","hArr":"","harrw":"","Hat":"^","hbar":"","Hcirc":"","hcirc":"","hearts":"","heartsuit":"","hellip":"","hercon":"","hfr":"","Hfr":"","HilbertSpace":"","hksearow":"","hkswarow":"","hoarr":"","homtht":"","hookleftarrow":"","hookrightarrow":"","hopf":"","Hopf":"","horbar":"","HorizontalLine":"","hscr":"","Hscr":"","hslash":"","Hstrok":"","hstrok":"","HumpDownHump":"","HumpEqual":"","hybull":"","hyphen":"","Iacute":"","iacute":"","ic":"","Icirc":"","icirc":"","Icy":"","icy":"","Idot":"","IEcy":"","iecy":"","iexcl":"","iff":"","ifr":"","Ifr":"","Igrave":"","igrave":"","ii":"","iiiint":"","iiint":"","iinfin":"","iiota":"","IJlig":"","ijlig":"","Imacr":"","imacr":"","image":"","ImaginaryI":"","imagline":"","imagpart":"","imath":"","Im":"","imof":"","imped":"","Implies":"","incare":"","in":"","infin":"","infintie":"","inodot":"","intcal":"","int":"","Int":"","integers":"","Integral":"","intercal":"","Intersection":"","intlarhk":"","intprod":"","InvisibleComma":"","InvisibleTimes":"","IOcy":"","iocy":"","Iogon":"","iogon":"","Iopf":"","iopf":"","Iota":"","iota":"","iprod":"","iquest":"","iscr":"","Iscr":"","isin":"","isindot":"","isinE":"","isins":"","isinsv":"","isinv":"","it":"","Itilde":"","itilde":"","Iukcy":"","iukcy":"","Iuml":"","iuml":"","Jcirc":"","jcirc":"","Jcy":"","jcy":"","Jfr":"","jfr":"","jmath":"","Jopf":"","jopf":"","Jscr":"","jscr":"","Jsercy":"","jsercy":"","Jukcy":"","jukcy":"","Kappa":"","kappa":"","kappav":"","Kcedil":"","kcedil":"","Kcy":"","kcy":"","Kfr":"","kfr":"","kgreen":"","KHcy":"","khcy":"","KJcy":"","kjcy":"","Kopf":"","kopf":"","Kscr":"","kscr":"","lAarr":"","Lacute":"","lacute":"","laemptyv":"","lagran":"","Lambda":"","lambda":"","lang":"","Lang":"","langd":"","langle":"","lap":"","Laplacetrf":"","laquo":"","larrb":"","larrbfs":"","larr":"","Larr":"","lArr":"","larrfs":"","larrhk":"","larrlp":"","larrpl":"","larrsim":"","larrtl":"","latail":"","lAtail":"","lat":"","late":"","lates":"","lbarr":"","lBarr":"","lbbrk":"","lbrace":"{","lbrack":"[","lbrke":"","lbrksld":"","lbrkslu":"","Lcaron":"","lcaron":"","Lcedil":"","lcedil":"","lceil":"","lcub":"{","Lcy":"","lcy":"","ldca":"","ldquo":"","ldquor":"","ldrdhar":"","ldrushar":"","ldsh":"","le":"","lE":"","LeftAngleBracket":"","LeftArrowBar":"","leftarrow":"","LeftArrow":"","Leftarrow":"","LeftArrowRightArrow":"","leftarrowtail":"","LeftCeiling":"","LeftDoubleBracket":"","LeftDownTeeVector":"","LeftDownVectorBar":"","LeftDownVector":"","LeftFloor":"","leftharpoondown":"","leftharpoonup":"","leftleftarrows":"","leftrightarrow":"","LeftRightArrow":"","Leftrightarrow":"","leftrightarrows":"","leftrightharpoons":"","leftrightsquigarrow":"","LeftRightVector":"","LeftTeeArrow":"","LeftTee":"","LeftTeeVector":"","leftthreetimes":"","LeftTriangleBar":"","LeftTriangle":"","LeftTriangleEqual":"","LeftUpDownVector":"","LeftUpTeeVector":"","LeftUpVectorBar":"","LeftUpVector":"","LeftVectorBar":"","LeftVector":"","lEg":"","leg":"","leq":"","leqq":"","leqslant":"","lescc":"","les":"","lesdot":"","lesdoto":"","lesdotor":"","lesg":"","lesges":"","lessapprox":"","lessdot":"","lesseqgtr":"","lesseqqgtr":"","LessEqualGreater":"","LessFullEqual":"","LessGreater":"","lessgtr":"","LessLess":"","lesssim":"","LessSlantEqual":"","LessTilde":"","lfisht":"","lfloor":"","Lfr":"","lfr":"","lg":"","lgE":"","lHar":"","lhard":"","lharu":"","lharul":"","lhblk":"","LJcy":"","ljcy":"","llarr":"","ll":"","Ll":"","llcorner":"","Lleftarrow":"","llhard":"","lltri":"","Lmidot":"","lmidot":"","lmoustache":"","lmoust":"","lnap":"","lnapprox":"","lne":"","lnE":"","lneq":"","lneqq":"","lnsim":"","loang":"","loarr":"","lobrk":"","longleftarrow":"","LongLeftArrow":"","Longleftarrow":"","longleftrightarrow":"","LongLeftRightArrow":"","Longleftrightarrow":"","longmapsto":"","longrightarrow":"","LongRightArrow":"","Longrightarrow":"","looparrowleft":"","looparrowright":"","lopar":"","Lopf":"","lopf":"","loplus":"","lotimes":"","lowast":"","lowbar":"_","LowerLeftArrow":"","LowerRightArrow":"","loz":"","lozenge":"","lozf":"","lpar":"(","lparlt":"","lrarr":"","lrcorner":"","lrhar":"","lrhard":"","lrm":"","lrtri":"","lsaquo":"","lscr":"","Lscr":"","lsh":"","Lsh":"","lsim":"","lsime":"","lsimg":"","lsqb":"[","lsquo":"","lsquor":"","Lstrok":"","lstrok":"","ltcc":"","ltcir":"","lt":"<","LT":"<","Lt":"","ltdot":"","lthree":"","ltimes":"","ltlarr":"","ltquest":"","ltri":"","ltrie":"","ltrif":"","ltrPar":"","lurdshar":"","luruhar":"","lvertneqq":"","lvnE":"","macr":"","male":"","malt":"","maltese":"","Map":"","map":"","mapsto":"","mapstodown":"","mapstoleft":"","mapstoup":"","marker":"","mcomma":"","Mcy":"","mcy":"","mdash":"","mDDot":"","measuredangle":"","MediumSpace":"","Mellintrf":"","Mfr":"","mfr":"","mho":"","micro":"","midast":"*","midcir":"","mid":"","middot":"","minusb":"","minus":"","minusd":"","minusdu":"","MinusPlus":"","mlcp":"","mldr":"","mnplus":"","models":"","Mopf":"","mopf":"","mp":"","mscr":"","Mscr":"","mstpos":"","Mu":"","mu":"","multimap":"","mumap":"","nabla":"","Nacute":"","nacute":"","nang":"","nap":"","napE":"","napid":"","napos":"","napprox":"","natural":"","naturals":"","natur":"","nbsp":"","nbump":"","nbumpe":"","ncap":"","Ncaron":"","ncaron":"","Ncedil":"","ncedil":"","ncong":"","ncongdot":"","ncup":"","Ncy":"","ncy":"","ndash":"","nearhk":"","nearr":"","neArr":"","nearrow":"","ne":"","nedot":"","NegativeMediumSpace":"","NegativeThickSpace":"","NegativeThinSpace":"","NegativeVeryThinSpace":"","nequiv":"","nesear":"","nesim":"","NestedGreaterGreater":"","NestedLessLess":"","NewLine":"\\n","nexist":"","nexists":"","Nfr":"","nfr":"","ngE":"","nge":"","ngeq":"","ngeqq":"","ngeqslant":"","nges":"","nGg":"","ngsim":"","nGt":"","ngt":"","ngtr":"","nGtv":"","nharr":"","nhArr":"","nhpar":"","ni":"","nis":"","nisd":"","niv":"","NJcy":"","njcy":"","nlarr":"","nlArr":"","nldr":"","nlE":"","nle":"","nleftarrow":"","nLeftarrow":"","nleftrightarrow":"","nLeftrightarrow":"","nleq":"","nleqq":"","nleqslant":"","nles":"","nless":"","nLl":"","nlsim":"","nLt":"","nlt":"","nltri":"","nltrie":"","nLtv":"","nmid":"","NoBreak":"","NonBreakingSpace":"","nopf":"","Nopf":"","Not":"","not":"","NotCongruent":"","NotCupCap":"","NotDoubleVerticalBar":"","NotElement":"","NotEqual":"","NotEqualTilde":"","NotExists":"","NotGreater":"","NotGreaterEqual":"","NotGreaterFullEqual":"","NotGreaterGreater":"","NotGreaterLess":"","NotGreaterSlantEqual":"","NotGreaterTilde":"","NotHumpDownHump":"","NotHumpEqual":"","notin":"","notindot":"","notinE":"","notinva":"","notinvb":"","notinvc":"","NotLeftTriangleBar":"","NotLeftTriangle":"","NotLeftTriangleEqual":"","NotLess":"","NotLessEqual":"","NotLessGreater":"","NotLessLess":"","NotLessSlantEqual":"","NotLessTilde":"","NotNestedGreaterGreater":"","NotNestedLessLess":"","notni":"","notniva":"","notnivb":"","notnivc":"","NotPrecedes":"","NotPrecedesEqual":"","NotPrecedesSlantEqual":"","NotReverseElement":"","NotRightTriangleBar":"","NotRightTriangle":"","NotRightTriangleEqual":"","NotSquareSubset":"","NotSquareSubsetEqual":"","NotSquareSuperset":"","NotSquareSupersetEqual":"","NotSubset":"","NotSubsetEqual":"","NotSucceeds":"","NotSucceedsEqual":"","NotSucceedsSlantEqual":"","NotSucceedsTilde":"","NotSuperset":"","NotSupersetEqual":"","NotTilde":"","NotTildeEqual":"","NotTildeFullEqual":"","NotTildeTilde":"","NotVerticalBar":"","nparallel":"","npar":"","nparsl":"","npart":"","npolint":"","npr":"","nprcue":"","nprec":"","npreceq":"","npre":"","nrarrc":"","nrarr":"","nrArr":"","nrarrw":"","nrightarrow":"","nRightarrow":"","nrtri":"","nrtrie":"","nsc":"","nsccue":"","nsce":"","Nscr":"","nscr":"","nshortmid":"","nshortparallel":"","nsim":"","nsime":"","nsimeq":"","nsmid":"","nspar":"","nsqsube":"","nsqsupe":"","nsub":"","nsubE":"","nsube":"","nsubset":"","nsubseteq":"","nsubseteqq":"","nsucc":"","nsucceq":"","nsup":"","nsupE":"","nsupe":"","nsupset":"","nsupseteq":"","nsupseteqq":"","ntgl":"","Ntilde":"","ntilde":"","ntlg":"","ntriangleleft":"","ntrianglelefteq":"","ntriangleright":"","ntrianglerighteq":"","Nu":"","nu":"","num":"#","numero":"","numsp":"","nvap":"","nvdash":"","nvDash":"","nVdash":"","nVDash":"","nvge":"","nvgt":">","nvHarr":"","nvinfin":"","nvlArr":"","nvle":"","nvlt":"<","nvltrie":"","nvrArr":"","nvrtrie":"","nvsim":"","nwarhk":"","nwarr":"","nwArr":"","nwarrow":"","nwnear":"","Oacute":"","oacute":"","oast":"","Ocirc":"","ocirc":"","ocir":"","Ocy":"","ocy":"","odash":"","Odblac":"","odblac":"","odiv":"","odot":"","odsold":"","OElig":"","oelig":"","ofcir":"","Ofr":"","ofr":"","ogon":"","Ograve":"","ograve":"","ogt":"","ohbar":"","ohm":"","oint":"","olarr":"","olcir":"","olcross":"","oline":"","olt":"","Omacr":"","omacr":"","Omega":"","omega":"","Omicron":"","omicron":"","omid":"","ominus":"","Oopf":"","oopf":"","opar":"","OpenCurlyDoubleQuote":"","OpenCurlyQuote":"","operp":"","oplus":"","orarr":"","Or":"","or":"","ord":"","order":"","orderof":"","ordf":"","ordm":"","origof":"","oror":"","orslope":"","orv":"","oS":"","Oscr":"","oscr":"","Oslash":"","oslash":"","osol":"","Otilde":"","otilde":"","otimesas":"","Otimes":"","otimes":"","Ouml":"","ouml":"","ovbar":"","OverBar":"","OverBrace":"","OverBracket":"","OverParenthesis":"","para":"","parallel":"","par":"","parsim":"","parsl":"","part":"","PartialD":"","Pcy":"","pcy":"","percnt":"%","period":".","permil":"","perp":"","pertenk":"","Pfr":"","pfr":"","Phi":"","phi":"","phiv":"","phmmat":"","phone":"","Pi":"","pi":"","pitchfork":"","piv":"","planck":"","planckh":"","plankv":"","plusacir":"","plusb":"","pluscir":"","plus":"+","plusdo":"","plusdu":"","pluse":"","PlusMinus":"","plusmn":"","plussim":"","plustwo":"","pm":"","Poincareplane":"","pointint":"","popf":"","Popf":"","pound":"","prap":"","Pr":"","pr":"","prcue":"","precapprox":"","prec":"","preccurlyeq":"","Precedes":"","PrecedesEqual":"","PrecedesSlantEqual":"","PrecedesTilde":"","preceq":"","precnapprox":"","precneqq":"","precnsim":"","pre":"","prE":"","precsim":"","prime":"","Prime":"","primes":"","prnap":"","prnE":"","prnsim":"","prod":"","Product":"","profalar":"","profline":"","profsurf":"","prop":"","Proportional":"","Proportion":"","propto":"","prsim":"","prurel":"","Pscr":"","pscr":"","Psi":"","psi":"","puncsp":"","Qfr":"","qfr":"","qint":"","qopf":"","Qopf":"","qprime":"","Qscr":"","qscr":"","quaternions":"","quatint":"","quest":"?","questeq":"","quot":"\\"","QUOT":"\\"","rAarr":"","race":"","Racute":"","racute":"","radic":"","raemptyv":"","rang":"","Rang":"","rangd":"","range":"","rangle":"","raquo":"","rarrap":"","rarrb":"","rarrbfs":"","rarrc":"","rarr":"","Rarr":"","rArr":"","rarrfs":"","rarrhk":"","rarrlp":"","rarrpl":"","rarrsim":"","Rarrtl":"","rarrtl":"","rarrw":"","ratail":"","rAtail":"","ratio":"","rationals":"","rbarr":"","rBarr":"","RBarr":"","rbbrk":"","rbrace":"}","rbrack":"]","rbrke":"","rbrksld":"","rbrkslu":"","Rcaron":"","rcaron":"","Rcedil":"","rcedil":"","rceil":"","rcub":"}","Rcy":"","rcy":"","rdca":"","rdldhar":"","rdquo":"","rdquor":"","rdsh":"","real":"","realine":"","realpart":"","reals":"","Re":"","rect":"","reg":"","REG":"","ReverseElement":"","ReverseEquilibrium":"","ReverseUpEquilibrium":"","rfisht":"","rfloor":"","rfr":"","Rfr":"","rHar":"","rhard":"","rharu":"","rharul":"","Rho":"","rho":"","rhov":"","RightAngleBracket":"","RightArrowBar":"","rightarrow":"","RightArrow":"","Rightarrow":"","RightArrowLeftArrow":"","rightarrowtail":"","RightCeiling":"","RightDoubleBracket":"","RightDownTeeVector":"","RightDownVectorBar":"","RightDownVector":"","RightFloor":"","rightharpoondown":"","rightharpoonup":"","rightleftarrows":"","rightleftharpoons":"","rightrightarrows":"","rightsquigarrow":"","RightTeeArrow":"","RightTee":"","RightTeeVector":"","rightthreetimes":"","RightTriangleBar":"","RightTriangle":"","RightTriangleEqual":"","RightUpDownVector":"","RightUpTeeVector":"","RightUpVectorBar":"","RightUpVector":"","RightVectorBar":"","RightVector":"","ring":"","risingdotseq":"","rlarr":"","rlhar":"","rlm":"","rmoustache":"","rmoust":"","rnmid":"","roang":"","roarr":"","robrk":"","ropar":"","ropf":"","Ropf":"","roplus":"","rotimes":"","RoundImplies":"","rpar":")","rpargt":"","rppolint":"","rrarr":"","Rrightarrow":"","rsaquo":"","rscr":"","Rscr":"","rsh":"","Rsh":"","rsqb":"]","rsquo":"","rsquor":"","rthree":"","rtimes":"","rtri":"","rtrie":"","rtrif":"","rtriltri":"","RuleDelayed":"","ruluhar":"","rx":"","Sacute":"","sacute":"","sbquo":"","scap":"","Scaron":"","scaron":"","Sc":"","sc":"","sccue":"","sce":"","scE":"","Scedil":"","scedil":"","Scirc":"","scirc":"","scnap":"","scnE":"","scnsim":"","scpolint":"","scsim":"","Scy":"","scy":"","sdotb":"","sdot":"","sdote":"","searhk":"","searr":"","seArr":"","searrow":"","sect":"","semi":";","seswar":"","setminus":"","setmn":"","sext":"","Sfr":"","sfr":"","sfrown":"","sharp":"","SHCHcy":"","shchcy":"","SHcy":"","shcy":"","ShortDownArrow":"","ShortLeftArrow":"","shortmid":"","shortparallel":"","ShortRightArrow":"","ShortUpArrow":"","shy":"","Sigma":"","sigma":"","sigmaf":"","sigmav":"","sim":"","simdot":"","sime":"","simeq":"","simg":"","simgE":"","siml":"","simlE":"","simne":"","simplus":"","simrarr":"","slarr":"","SmallCircle":"","smallsetminus":"","smashp":"","smeparsl":"","smid":"","smile":"","smt":"","smte":"","smtes":"","SOFTcy":"","softcy":"","solbar":"","solb":"","sol":"/","Sopf":"","sopf":"","spades":"","spadesuit":"","spar":"","sqcap":"","sqcaps":"","sqcup":"","sqcups":"","Sqrt":"","sqsub":"","sqsube":"","sqsubset":"","sqsubseteq":"","sqsup":"","sqsupe":"","sqsupset":"","sqsupseteq":"","square":"","Square":"","SquareIntersection":"","SquareSubset":"","SquareSubsetEqual":"","SquareSuperset":"","SquareSupersetEqual":"","SquareUnion":"","squarf":"","squ":"","squf":"","srarr":"","Sscr":"","sscr":"","ssetmn":"","ssmile":"","sstarf":"","Star":"","star":"","starf":"","straightepsilon":"","straightphi":"","strns":"","sub":"","Sub":"","subdot":"","subE":"","sube":"","subedot":"","submult":"","subnE":"","subne":"","subplus":"","subrarr":"","subset":"","Subset":"","subseteq":"","subseteqq":"","SubsetEqual":"","subsetneq":"","subsetneqq":"","subsim":"","subsub":"","subsup":"","succapprox":"","succ":"","succcurlyeq":"","Succeeds":"","SucceedsEqual":"","SucceedsSlantEqual":"","SucceedsTilde":"","succeq":"","succnapprox":"","succneqq":"","succnsim":"","succsim":"","SuchThat":"","sum":"","Sum":"","sung":"","sup1":"","sup2":"","sup3":"","sup":"","Sup":"","supdot":"","supdsub":"","supE":"","supe":"","supedot":"","Superset":"","SupersetEqual":"","suphsol":"","suphsub":"","suplarr":"","supmult":"","supnE":"","supne":"","supplus":"","supset":"","Supset":"","supseteq":"","supseteqq":"","supsetneq":"","supsetneqq":"","supsim":"","supsub":"","supsup":"","swarhk":"","swarr":"","swArr":"","swarrow":"","swnwar":"","szlig":"","Tab":"\\t","target":"","Tau":"","tau":"","tbrk":"","Tcaron":"","tcaron":"","Tcedil":"","tcedil":"","Tcy":"","tcy":"","tdot":"","telrec":"","Tfr":"","tfr":"","there4":"","therefore":"","Therefore":"","Theta":"","theta":"","thetasym":"","thetav":"","thickapprox":"","thicksim":"","ThickSpace":"","ThinSpace":"","thinsp":"","thkap":"","thksim":"","THORN":"","thorn":"","tilde":"","Tilde":"","TildeEqual":"","TildeFullEqual":"","TildeTilde":"","timesbar":"","timesb":"","times":"","timesd":"","tint":"","toea":"","topbot":"","topcir":"","top":"","Topf":"","topf":"","topfork":"","tosa":"","tprime":"","trade":"","TRADE":"","triangle":"","triangledown":"","triangleleft":"","trianglelefteq":"","triangleq":"","triangleright":"","trianglerighteq":"","tridot":"","trie":"","triminus":"","TripleDot":"","triplus":"","trisb":"","tritime":"","trpezium":"","Tscr":"","tscr":"","TScy":"","tscy":"","TSHcy":"","tshcy":"","Tstrok":"","tstrok":"","twixt":"","twoheadleftarrow":"","twoheadrightarrow":"","Uacute":"","uacute":"","uarr":"","Uarr":"","uArr":"","Uarrocir":"","Ubrcy":"","ubrcy":"","Ubreve":"","ubreve":"","Ucirc":"","ucirc":"","Ucy":"","ucy":"","udarr":"","Udblac":"","udblac":"","udhar":"","ufisht":"","Ufr":"","ufr":"","Ugrave":"","ugrave":"","uHar":"","uharl":"","uharr":"","uhblk":"","ulcorn":"","ulcorner":"","ulcrop":"","ultri":"","Umacr":"","umacr":"","uml":"","UnderBar":"_","UnderBrace":"","UnderBracket":"","UnderParenthesis":"","Union":"","UnionPlus":"","Uogon":"","uogon":"","Uopf":"","uopf":"","UpArrowBar":"","uparrow":"","UpArrow":"","Uparrow":"","UpArrowDownArrow":"","updownarrow":"","UpDownArrow":"","Updownarrow":"","UpEquilibrium":"","upharpoonleft":"","upharpoonright":"","uplus":"","UpperLeftArrow":"","UpperRightArrow":"","upsi":"","Upsi":"","upsih":"","Upsilon":"","upsilon":"","UpTeeArrow":"","UpTee":"","upuparrows":"","urcorn":"","urcorner":"","urcrop":"","Uring":"","uring":"","urtri":"","Uscr":"","uscr":"","utdot":"","Utilde":"","utilde":"","utri":"","utrif":"","uuarr":"","Uuml":"","uuml":"","uwangle":"","vangrt":"","varepsilon":"","varkappa":"","varnothing":"","varphi":"","varpi":"","varpropto":"","varr":"","vArr":"","varrho":"","varsigma":"","varsubsetneq":"","varsubsetneqq":"","varsupsetneq":"","varsupsetneqq":"","vartheta":"","vartriangleleft":"","vartriangleright":"","vBar":"","Vbar":"","vBarv":"","Vcy":"","vcy":"","vdash":"","vDash":"","Vdash":"","VDash":"","Vdashl":"","veebar":"","vee":"","Vee":"","veeeq":"","vellip":"","verbar":"|","Verbar":"","vert":"|","Vert":"","VerticalBar":"","VerticalLine":"|","VerticalSeparator":"","VerticalTilde":"","VeryThinSpace":"","Vfr":"","vfr":"","vltri":"","vnsub":"","vnsup":"","Vopf":"","vopf":"","vprop":"","vrtri":"","Vscr":"","vscr":"","vsubnE":"","vsubne":"","vsupnE":"","vsupne":"","Vvdash":"","vzigzag":"","Wcirc":"","wcirc":"","wedbar":"","wedge":"","Wedge":"","wedgeq":"","weierp":"","Wfr":"","wfr":"","Wopf":"","wopf":"","wp":"","wr":"","wreath":"","Wscr":"","wscr":"","xcap":"","xcirc":"","xcup":"","xdtri":"","Xfr":"","xfr":"","xharr":"","xhArr":"","Xi":"","xi":"","xlarr":"","xlArr":"","xmap":"","xnis":"","xodot":"","Xopf":"","xopf":"","xoplus":"","xotime":"","xrarr":"","xrArr":"","Xscr":"","xscr":"","xsqcup":"","xuplus":"","xutri":"","xvee":"","xwedge":"","Yacute":"","yacute":"","YAcy":"","yacy":"","Ycirc":"","ycirc":"","Ycy":"","ycy":"","yen":"","Yfr":"","yfr":"","YIcy":"","yicy":"","Yopf":"","yopf":"","Yscr":"","yscr":"","YUcy":"","yucy":"","yuml":"","Yuml":"","Zacute":"","zacute":"","Zcaron":"","zcaron":"","Zcy":"","zcy":"","Zdot":"","zdot":"","zeetrf":"","ZeroWidthSpace":"","Zeta":"","zeta":"","zfr":"","Zfr":"","ZHcy":"","zhcy":"","zigrarr":"","zopf":"","Zopf":"","Zscr":"","zscr":"","zwj":"","zwnj":""}')},9591:e=>{"use strict";e.exports=JSON.parse('{"Aacute":"","aacute":"","Acirc":"","acirc":"","acute":"","AElig":"","aelig":"","Agrave":"","agrave":"","amp":"&","AMP":"&","Aring":"","aring":"","Atilde":"","atilde":"","Auml":"","auml":"","brvbar":"","Ccedil":"","ccedil":"","cedil":"","cent":"","copy":"","COPY":"","curren":"","deg":"","divide":"","Eacute":"","eacute":"","Ecirc":"","ecirc":"","Egrave":"","egrave":"","ETH":"","eth":"","Euml":"","euml":"","frac12":"","frac14":"","frac34":"","gt":">","GT":">","Iacute":"","iacute":"","Icirc":"","icirc":"","iexcl":"","Igrave":"","igrave":"","iquest":"","Iuml":"","iuml":"","laquo":"","lt":"<","LT":"<","macr":"","micro":"","middot":"","nbsp":"","not":"","Ntilde":"","ntilde":"","Oacute":"","oacute":"","Ocirc":"","ocirc":"","Ograve":"","ograve":"","ordf":"","ordm":"","Oslash":"","oslash":"","Otilde":"","otilde":"","Ouml":"","ouml":"","para":"","plusmn":"","pound":"","quot":"\\"","QUOT":"\\"","raquo":"","reg":"","REG":"","sect":"","shy":"","sup1":"","sup2":"","sup3":"","szlig":"","THORN":"","thorn":"","times":"","Uacute":"","uacute":"","Ucirc":"","ucirc":"","Ugrave":"","ugrave":"","uml":"","Uuml":"","uuml":"","Yacute":"","yacute":"","yen":"","yuml":""}')},2586:e=>{"use strict";e.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e=n(2934),t=n.n(e);function i(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}var r={name:"router-view",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,t){var n=t.props,i=t.children,r=t.parent,s=t.data;s.routerView=!0;for(var o=r.$createElement,a=n.name,l=r.$route,c=r._routerViewCache||(r._routerViewCache={}),h=0,d=!1;r&&r._routerRoot!==r;)r.$vnode&&r.$vnode.data.routerView&&h++,r._inactive&&(d=!0),r=r.$parent;if(s.routerViewDepth=h,d)return o(c[a],s,i);var u=l.matched[h];if(!u)return c[a]=null,o();var p=c[a]=u.components[a];s.registerRouteInstance=function(e,t){var n=u.instances[a];(t&&n!==e||!t&&n===e)&&(u.instances[a]=t)},(s.hook||(s.hook={})).prepatch=function(e,t){u.instances[a]=t.componentInstance};var m=s.props=function(e,t){switch(typeof t){case"undefined":return;case"object":return t;case"function":return t(e);case"boolean":return t?e.params:void 0}}(l,u.props&&u.props[a]);if(m){m=s.props=function(e,t){for(var n in t)e[n]=t[n];return e}({},m);var f=s.attrs=s.attrs||{};for(var g in m)p.props&&g in p.props||(f[g]=m[g],delete m[g])}return o(p,s,i)}},s=/[!'()*]/g,o=function(e){return"%"+e.charCodeAt(0).toString(16)},a=/%2C/g,l=function(e){return encodeURIComponent(e).replace(s,o).replace(a,",")},c=decodeURIComponent;function h(e){var t={};return(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var n=e.replace(/\+/g," ").split("="),i=c(n.shift()),r=n.length>0?c(n.join("=")):null;void 0===t[i]?t[i]=r:Array.isArray(t[i])?t[i].push(r):t[i]=[t[i],r]})),t):t}function d(e){var t=e?Object.keys(e).map((function(t){var n=e[t];if(void 0===n)return"";if(null===n)return l(t);if(Array.isArray(n)){var i=[];return n.forEach((function(e){void 0!==e&&(null===e?i.push(l(t)):i.push(l(t)+"="+l(e)))})),i.join("&")}return l(t)+"="+l(n)})).filter((function(e){return e.length>0})).join("&"):null;return t?"?"+t:""}var u=/\/?$/;function p(e,t,n,i){var r=i&&i.options.stringifyQuery,s=t.query||{};try{s=m(s)}catch(e){}var o={name:t.name||e&&e.name,meta:e&&e.meta||{},path:t.path||"/",hash:t.hash||"",query:s,params:t.params||{},fullPath:v(t,r),matched:e?g(e):[]};return n&&(o.redirectedFrom=v(n,r)),Object.freeze(o)}function m(e){if(Array.isArray(e))return e.map(m);if(e&&"object"==typeof e){var t={};for(var n in e)t[n]=m(e[n]);return t}return e}var f=p(null,{path:"/"});function g(e){for(var t=[];e;)t.unshift(e),e=e.parent;return t}function v(e,t){var n=e.path,i=e.query;void 0===i&&(i={});var r=e.hash;return void 0===r&&(r=""),(n||"/")+(t||d)(i)+r}function y(e,t){return t===f?e===t:!!t&&(e.path&&t.path?e.path.replace(u,"")===t.path.replace(u,"")&&e.hash===t.hash&&x(e.query,t.query):!(!e.name||!t.name)&&e.name===t.name&&e.hash===t.hash&&x(e.query,t.query)&&x(e.params,t.params))}function x(e,t){if(void 0===e&&(e={}),void 0===t&&(t={}),!e||!t)return e===t;var n=Object.keys(e),i=Object.keys(t);return n.length===i.length&&n.every((function(n){var i=e[n],r=t[n];return"object"==typeof i&&"object"==typeof r?x(i,r):String(i)===String(r)}))}var b,w={name:"router-link",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:[String,Array],default:"click"}},render:function(e){var t=this,n=this.$router,i=this.$route,r=n.resolve(this.to,i,this.append),s=r.location,o=r.route,a=r.href,l={},c=n.options.linkActiveClass,h=n.options.linkExactActiveClass,d=null==c?"router-link-active":c,m=null==h?"router-link-exact-active":h,f=null==this.activeClass?d:this.activeClass,g=null==this.exactActiveClass?m:this.exactActiveClass,v=s.path?p(null,s,null,n):o;l[g]=y(i,v),l[f]=this.exact?l[g]:function(e,t){return 0===e.path.replace(u,"/").indexOf(t.path.replace(u,"/"))&&(!t.hash||e.hash===t.hash)&&function(e,t){for(var n in t)if(!(n in e))return!1;return!0}(e.query,t.query)}(i,v);var x=function(e){C(e)&&(t.replace?n.replace(s):n.push(s))},w={click:C};Array.isArray(this.event)?this.event.forEach((function(e){w[e]=x})):w[this.event]=x;var A={class:l};if("a"===this.tag)A.on=w,A.attrs={href:a};else{var S=_(this.$slots.default);if(S){S.isStatic=!1;var k=b.util.extend;(S.data=k({},S.data)).on=w,(S.data.attrs=k({},S.data.attrs)).href=a}else A.on=w}return e(this.tag,A,this.$slots.default)}};function C(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||void 0!==e.button&&0!==e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function _(e){if(e)for(var t,n=0;n<e.length;n++){if("a"===(t=e[n]).tag)return t;if(t.children&&(t=_(t.children)))return t}}var A="undefined"!=typeof window;function S(e,t,n){var i=e.charAt(0);if("/"===i)return e;if("?"===i||"#"===i)return t+e;var r=t.split("/");n&&r[r.length-1]||r.pop();for(var s=e.replace(/^\//,"").split("/"),o=0;o<s.length;o++){var a=s[o];".."===a?r.pop():"."!==a&&r.push(a)}return""!==r[0]&&r.unshift(""),r.join("/")}function k(e){return e.replace(/\/\//g,"/")}var I=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},P=function e(t,n,i){return I(n)||(i=n||i,n=[]),i=i||{},t instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return R(e,t)}(t,n):I(t)?function(t,n,i){for(var r=[],s=0;s<t.length;s++)r.push(e(t[s],n,i).source);return R(new RegExp("(?:"+r.join("|")+")",F(i)),n)}(t,n,i):function(e,t,n){return Z(D(e,n),t,n)}(t,n,i)},E=D,T=B,M=Z,O=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function D(e,t){for(var n,i=[],r=0,s=0,o="",a=t&&t.delimiter||"/";null!=(n=O.exec(e));){var l=n[0],c=n[1],h=n.index;if(o+=e.slice(s,h),s=h+l.length,c)o+=c[1];else{var d=e[s],u=n[2],p=n[3],m=n[4],f=n[5],g=n[6],v=n[7];o&&(i.push(o),o="");var y=null!=u&&null!=d&&d!==u,x="+"===g||"*"===g,b="?"===g||"*"===g,w=n[2]||a,C=m||f;i.push({name:p||r++,prefix:u||"",delimiter:w,optional:b,repeat:x,partial:y,asterisk:!!v,pattern:C?N(C):v?".*":"[^"+L(w)+"]+?"})}}return s<e.length&&(o+=e.substr(s)),o&&i.push(o),i}function $(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function B(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,i){for(var r="",s=n||{},o=(i||{}).pretty?$:encodeURIComponent,a=0;a<e.length;a++){var l=e[a];if("string"!=typeof l){var c,h=s[l.name];if(null==h){if(l.optional){l.partial&&(r+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(I(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(c=o(h[d]),!t[a].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(c)+"`");r+=(0===d?l.prefix:l.delimiter)+c}}else{if(c=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):o(h),!t[a].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+c+'"');r+=l.prefix+c}}else r+=l}return r}}function L(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function N(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function R(e,t){return e.keys=t,e}function F(e){return e.sensitive?"":"i"}function Z(e,t,n){I(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,r=!1!==n.end,s="",o=0;o<e.length;o++){var a=e[o];if("string"==typeof a)s+=L(a);else{var l=L(a.prefix),c="(?:"+a.pattern+")";t.push(a),a.repeat&&(c+="(?:"+l+c+")*"),s+=c=a.optional?a.partial?l+"("+c+")?":"(?:"+l+"("+c+"))?":l+"("+c+")"}}var h=L(n.delimiter||"/"),d=s.slice(-h.length)===h;return i||(s=(d?s.slice(0,-h.length):s)+"(?:"+h+"(?=$))?"),s+=r?"$":i&&d?"":"(?="+h+"|$)",R(new RegExp("^"+s,F(n)),t)}P.parse=E,P.compile=function(e,t){return B(D(e,t))},P.tokensToFunction=T,P.tokensToRegExp=M;var j=Object.create(null);function z(e,t,n){try{return(j[e]||(j[e]=P.compile(e)))(t||{},{pretty:!0})}catch(e){return""}}function U(e,t,n,i){var r=t||[],s=n||Object.create(null),o=i||Object.create(null);e.forEach((function(e){H(r,s,o,e)}));for(var a=0,l=r.length;a<l;a++)"*"===r[a]&&(r.push(r.splice(a,1)[0]),l--,a--);return{pathList:r,pathMap:s,nameMap:o}}function H(e,t,n,i,r,s){var o=i.path,a=i.name,l=i.pathToRegexpOptions||{},c=function(e,t,n){return n||(e=e.replace(/\/$/,"")),"/"===e[0]||null==t?e:k(t.path+"/"+e)}(o,r,l.strict);"boolean"==typeof i.caseSensitive&&(l.sensitive=i.caseSensitive);var h={path:c,regex:V(c,l),components:i.components||{default:i.component},instances:{},name:a,parent:r,matchAs:s,redirect:i.redirect,beforeEnter:i.beforeEnter,meta:i.meta||{},props:null==i.props?{}:i.components?i.props:{default:i.props}};i.children&&i.children.forEach((function(i){var r=s?k(s+"/"+i.path):void 0;H(e,t,n,i,h,r)})),void 0!==i.alias&&(Array.isArray(i.alias)?i.alias:[i.alias]).forEach((function(s){var o={path:s,children:i.children};H(e,t,n,o,r,h.path||"/")})),t[h.path]||(e.push(h.path),t[h.path]=h),a&&(n[a]||(n[a]=h))}function V(e,t){return P(e,[],t)}function q(e,t,n,i){var r="string"==typeof e?{path:e}:e;if(r.name||r._normalized)return r;if(!r.path&&r.params&&t){(r=G({},r))._normalized=!0;var s=G(G({},t.params),r.params);if(t.name)r.name=t.name,r.params=s;else if(t.matched.length){var o=t.matched[t.matched.length-1].path;r.path=z(o,s,t.path)}return r}var a=function(e){var t="",n="",i=e.indexOf("#");i>=0&&(t=e.slice(i),e=e.slice(0,i));var r=e.indexOf("?");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{path:e,query:n,hash:t}}(r.path||""),l=t&&t.path||"/",c=a.path?S(a.path,l,n||r.append):l,d=function(e,t,n){void 0===t&&(t={});var i,r=n||h;try{i=r(e||"")}catch(e){i={}}for(var s in t)i[s]=t[s];return i}(a.query,r.query,i&&i.options.parseQuery),u=r.hash||a.hash;return u&&"#"!==u.charAt(0)&&(u="#"+u),{_normalized:!0,path:c,query:d,hash:u}}function G(e,t){for(var n in t)e[n]=t[n];return e}function W(e,t){var n=U(e),i=n.pathList,r=n.pathMap,s=n.nameMap;function o(e,n,o){var l=q(e,n,!1,t),c=l.name;if(c){var h=s[c];if(!h)return a(null,l);var d=h.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!=typeof l.params&&(l.params={}),n&&"object"==typeof n.params)for(var u in n.params)!(u in l.params)&&d.indexOf(u)>-1&&(l.params[u]=n.params[u]);if(h)return l.path=z(h.path,l.params),a(h,l,o)}else if(l.path){l.params={};for(var p=0;p<i.length;p++){var m=i[p],f=r[m];if(K(f.regex,l.path,l.params))return a(f,l,o)}}return a(null,l)}function a(e,n,i){return e&&e.redirect?function(e,n){var i=e.redirect,r="function"==typeof i?i(p(e,n,null,t)):i;if("string"==typeof r&&(r={path:r}),!r||"object"!=typeof r)return a(null,n);var l=r,c=l.name,h=l.path,d=n.query,u=n.hash,m=n.params;if(d=l.hasOwnProperty("query")?l.query:d,u=l.hasOwnProperty("hash")?l.hash:u,m=l.hasOwnProperty("params")?l.params:m,c)return s[c],o({_normalized:!0,name:c,query:d,hash:u,params:m},void 0,n);if(h){var f=function(e,t){return S(e,t.parent?t.parent.path:"/",!0)}(h,e);return o({_normalized:!0,path:z(f,m),query:d,hash:u},void 0,n)}return a(null,n)}(e,i||n):e&&e.matchAs?function(e,t,n){var i=o({_normalized:!0,path:z(n,t.params)});if(i){var r=i.matched,s=r[r.length-1];return t.params=i.params,a(s,t)}return a(null,t)}(0,n,e.matchAs):p(e,n,i,t)}return{match:o,addRoutes:function(e){U(e,i,r,s)}}}function K(e,t,n){var i=t.match(e);if(!i)return!1;if(!n)return!0;for(var r=1,s=i.length;r<s;++r){var o=e.keys[r-1],a="string"==typeof i[r]?decodeURIComponent(i[r]):i[r];o&&(n[o.name]=a)}return!0}var J=Object.create(null);function Y(){window.history.replaceState({key:ce()},""),window.addEventListener("popstate",(function(e){X(),e.state&&e.state.key&&function(e){ae=e}(e.state.key)}))}function Q(e,t,n,i){if(e.app){var r=e.options.scrollBehavior;r&&e.app.$nextTick((function(){var e=function(){var e=ce();if(e)return J[e]}(),s=r(t,n,i?e:null);s&&("function"==typeof s.then?s.then((function(t){ie(t,e)})).catch((function(e){})):ie(s,e))}))}}function X(){var e=ce();e&&(J[e]={x:window.pageXOffset,y:window.pageYOffset})}function ee(e){return ne(e.x)||ne(e.y)}function te(e){return{x:ne(e.x)?e.x:window.pageXOffset,y:ne(e.y)?e.y:window.pageYOffset}}function ne(e){return"number"==typeof e}function ie(e,t){var n,i="object"==typeof e;if(i&&"string"==typeof e.selector){var r=document.querySelector(e.selector);if(r){var s=e.offset&&"object"==typeof e.offset?e.offset:{};t=function(e,t){var n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{x:i.left-n.left-t.x,y:i.top-n.top-t.y}}(r,s={x:ne((n=s).x)?n.x:0,y:ne(n.y)?n.y:0})}else ee(e)&&(t=te(e))}else i&&ee(e)&&(t=te(e));t&&window.scrollTo(t.x,t.y)}var re,se=A&&(-1===(re=window.navigator.userAgent).indexOf("Android 2.")&&-1===re.indexOf("Android 4.0")||-1===re.indexOf("Mobile Safari")||-1!==re.indexOf("Chrome")||-1!==re.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,oe=A&&window.performance&&window.performance.now?window.performance:Date,ae=le();function le(){return oe.now().toFixed(3)}function ce(){return ae}function he(e,t){X();var n=window.history;try{t?n.replaceState({key:ae},"",e):(ae=le(),n.pushState({key:ae},"",e))}catch(n){window.location[t?"replace":"assign"](e)}}function de(e){he(e,!0)}function ue(e,t,n){var i=function(r){r>=e.length?n():e[r]?t(e[r],(function(){i(r+1)})):i(r+1)};i(0)}function pe(e,t){return me(e.map((function(e){return Object.keys(e.components).map((function(n){return t(e.components[n],e.instances[n],e,n)}))})))}function me(e){return Array.prototype.concat.apply([],e)}var fe="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function ge(e){var t=!1;return function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];if(!t)return t=!0,e.apply(this,n)}}var ve=function(e,t){this.router=e,this.base=function(e){if(!e)if(A){var t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else e="/";return"/"!==e.charAt(0)&&(e="/"+e),e.replace(/\/$/,"")}(t),this.current=f,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};function ye(e,t,n,i){var r=pe(e,(function(e,i,r,s){var o=function(e,t){return"function"!=typeof e&&(e=b.extend(e)),e.options[t]}(e,t);if(o)return Array.isArray(o)?o.map((function(e){return n(e,i,r,s)})):n(o,i,r,s)}));return me(i?r.reverse():r)}function xe(e,t){if(t)return function(){return e.apply(t,arguments)}}function be(e,t,n,i){t[n]?e(t[n]):i()&&setTimeout((function(){be(e,t,n,i)}),16)}ve.prototype.listen=function(e){this.cb=e},ve.prototype.onReady=function(e,t){this.ready?e():(this.readyCbs.push(e),t&&this.readyErrorCbs.push(t))},ve.prototype.onError=function(e){this.errorCbs.push(e)},ve.prototype.transitionTo=function(e,t,n){var i=this,r=this.router.match(e,this.current);this.confirmTransition(r,(function(){i.updateRoute(r),t&&t(r),i.ensureURL(),i.ready||(i.ready=!0,i.readyCbs.forEach((function(e){e(r)})))}),(function(e){n&&n(e),e&&!i.ready&&(i.ready=!0,i.readyErrorCbs.forEach((function(t){t(e)})))}))},ve.prototype.confirmTransition=function(e,t,n){var r=this,s=this.current,o=function(e){i(e)&&(r.errorCbs.length?r.errorCbs.forEach((function(t){t(e)})):console.error(e)),n&&n(e)};if(y(e,s)&&e.matched.length===s.matched.length)return this.ensureURL(),o();var a,l=function(e,t){var n,i=Math.max(e.length,t.length);for(n=0;n<i&&e[n]===t[n];n++);return{updated:t.slice(0,n),activated:t.slice(n),deactivated:e.slice(n)}}(this.current.matched,e.matched),c=l.updated,h=l.deactivated,d=l.activated,u=[].concat(function(e){return ye(e,"beforeRouteLeave",xe,!0)}(h),this.router.beforeHooks,function(e){return ye(e,"beforeRouteUpdate",xe)}(c),d.map((function(e){return e.beforeEnter})),(a=d,function(e,t,n){var r=!1,s=0,o=null;pe(a,(function(e,t,a,l){if("function"==typeof e&&void 0===e.cid){r=!0,s++;var c,h=ge((function(t){var i;((i=t).__esModule||fe&&"Module"===i[Symbol.toStringTag])&&(t=t.default),e.resolved="function"==typeof t?t:b.extend(t),a.components[l]=t,--s<=0&&n()})),d=ge((function(e){var t="Failed to resolve async component "+l+": "+e;o||(o=i(e)?e:new Error(t),n(o))}));try{c=e(h,d)}catch(e){d(e)}if(c)if("function"==typeof c.then)c.then(h,d);else{var u=c.component;u&&"function"==typeof u.then&&u.then(h,d)}}})),r||n()}));this.pending=e;var p=function(t,n){if(r.pending!==e)return o();try{t(e,s,(function(e){!1===e||i(e)?(r.ensureURL(!0),o(e)):"string"==typeof e||"object"==typeof e&&("string"==typeof e.path||"string"==typeof e.name)?(o(),"object"==typeof e&&e.replace?r.replace(e):r.push(e)):n(e)}))}catch(e){o(e)}};ue(u,p,(function(){var n=[],i=function(e,t,n){return ye(e,"beforeRouteEnter",(function(e,i,r,s){return function(e,t,n,i,r){return function(s,o,a){return e(s,o,(function(e){a(e),"function"==typeof e&&i.push((function(){be(e,t.instances,n,r)}))}))}}(e,r,s,t,n)}))}(d,n,(function(){return r.current===e}));ue(i.concat(r.router.resolveHooks),p,(function(){if(r.pending!==e)return o();r.pending=null,t(e),r.router.app&&r.router.app.$nextTick((function(){n.forEach((function(e){e()}))}))}))}))},ve.prototype.updateRoute=function(e){var t=this.current;this.current=e,this.cb&&this.cb(e),this.router.afterHooks.forEach((function(n){n&&n(e,t)}))};var we=function(e){function t(t,n){var i=this;e.call(this,t,n);var r=t.options.scrollBehavior;r&&Y();var s=Ce(this.base);window.addEventListener("popstate",(function(e){var n=i.current,o=Ce(i.base);i.current===f&&o===s||i.transitionTo(o,(function(e){r&&Q(t,e,n,!0)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.go=function(e){window.history.go(e)},t.prototype.push=function(e,t,n){var i=this,r=this.current;this.transitionTo(e,(function(e){he(k(i.base+e.fullPath)),Q(i.router,e,r,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var i=this,r=this.current;this.transitionTo(e,(function(e){de(k(i.base+e.fullPath)),Q(i.router,e,r,!1),t&&t(e)}),n)},t.prototype.ensureURL=function(e){if(Ce(this.base)!==this.current.fullPath){var t=k(this.base+this.current.fullPath);e?he(t):de(t)}},t.prototype.getCurrentLocation=function(){return Ce(this.base)},t}(ve);function Ce(e){var t=window.location.pathname;return e&&0===t.indexOf(e)&&(t=t.slice(e.length)),(t||"/")+window.location.search+window.location.hash}var _e=function(e){function t(t,n,i){e.call(this,t,n),i&&function(e){var t=Ce(e);if(!/^\/#/.test(t))return window.location.replace(k(e+"/#"+t)),!0}(this.base)||Ae()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this,t=this.router.options.scrollBehavior,n=se&&t;n&&Y(),window.addEventListener(se?"popstate":"hashchange",(function(){var t=e.current;Ae()&&e.transitionTo(Se(),(function(i){n&&Q(e.router,i,t,!0),se||Pe(i.fullPath)}))}))},t.prototype.push=function(e,t,n){var i=this,r=this.current;this.transitionTo(e,(function(e){Ie(e.fullPath),Q(i.router,e,r,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var i=this,r=this.current;this.transitionTo(e,(function(e){Pe(e.fullPath),Q(i.router,e,r,!1),t&&t(e)}),n)},t.prototype.go=function(e){window.history.go(e)},t.prototype.ensureURL=function(e){var t=this.current.fullPath;Se()!==t&&(e?Ie(t):Pe(t))},t.prototype.getCurrentLocation=function(){return Se()},t}(ve);function Ae(){var e=Se();return"/"===e.charAt(0)||(Pe("/"+e),!1)}function Se(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.slice(t+1)}function ke(e){var t=window.location.href,n=t.indexOf("#");return(n>=0?t.slice(0,n):t)+"#"+e}function Ie(e){se?he(ke(e)):window.location.hash=e}function Pe(e){se?de(ke(e)):window.location.replace(ke(e))}var Ee=function(e){function t(t,n){e.call(this,t,n),this.stack=[],this.index=-1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.push=function(e,t,n){var i=this;this.transitionTo(e,(function(e){i.stack=i.stack.slice(0,i.index+1).concat(e),i.index++,t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var i=this;this.transitionTo(e,(function(e){i.stack=i.stack.slice(0,i.index).concat(e),t&&t(e)}),n)},t.prototype.go=function(e){var t=this,n=this.index+e;if(!(n<0||n>=this.stack.length)){var i=this.stack[n];this.confirmTransition(i,(function(){t.index=n,t.updateRoute(i)}))}},t.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},t.prototype.ensureURL=function(){},t}(ve),Te=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=W(e.routes||[],this);var t=e.mode||"hash";switch(this.fallback="history"===t&&!se&&!1!==e.fallback,this.fallback&&(t="hash"),A||(t="abstract"),this.mode=t,t){case"history":this.history=new we(this,e.base);break;case"hash":this.history=new _e(this,e.base,this.fallback);break;case"abstract":this.history=new Ee(this,e.base)}},Me={currentRoute:{configurable:!0}};function Oe(e,t){return e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}Te.prototype.match=function(e,t,n){return this.matcher.match(e,t,n)},Me.currentRoute.get=function(){return this.history&&this.history.current},Te.prototype.init=function(e){var t=this;if(this.apps.push(e),!this.app){this.app=e;var n=this.history;if(n instanceof we)n.transitionTo(n.getCurrentLocation());else if(n instanceof _e){var i=function(){n.setupListeners()};n.transitionTo(n.getCurrentLocation(),i,i)}n.listen((function(e){t.apps.forEach((function(t){t._route=e}))}))}},Te.prototype.beforeEach=function(e){return Oe(this.beforeHooks,e)},Te.prototype.beforeResolve=function(e){return Oe(this.resolveHooks,e)},Te.prototype.afterEach=function(e){return Oe(this.afterHooks,e)},Te.prototype.onReady=function(e,t){this.history.onReady(e,t)},Te.prototype.onError=function(e){this.history.onError(e)},Te.prototype.push=function(e,t,n){this.history.push(e,t,n)},Te.prototype.replace=function(e,t,n){this.history.replace(e,t,n)},Te.prototype.go=function(e){this.history.go(e)},Te.prototype.back=function(){this.go(-1)},Te.prototype.forward=function(){this.go(1)},Te.prototype.getMatchedComponents=function(e){var t=e?e.matched?e:this.resolve(e).route:this.currentRoute;return t?[].concat.apply([],t.matched.map((function(e){return Object.keys(e.components).map((function(t){return e.components[t]}))}))):[]},Te.prototype.resolve=function(e,t,n){var i=q(e,t||this.history.current,n,this),r=this.match(i,t),s=r.redirectedFrom||r.fullPath,o=function(e,t,n){var i="hash"===n?"#"+t:t;return e?k(e+"/"+i):i}(this.history.base,s,this.mode);return{location:i,route:r,href:o,normalizedTo:i,resolved:r}},Te.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==f&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(Te.prototype,Me),Te.install=function e(t){if(!e.installed||b!==t){e.installed=!0,b=t;var n=function(e){return void 0!==e},i=function(e,t){var i=e.$options._parentVnode;n(i)&&n(i=i.data)&&n(i=i.registerRouteInstance)&&i(e,t)};t.mixin({beforeCreate:function(){n(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,i(this,this)},destroyed:function(){i(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("router-view",r),t.component("router-link",w);var s=t.config.optionMergeStrategies;s.beforeRouteEnter=s.beforeRouteLeave=s.beforeRouteUpdate=s.created}},Te.version="2.8.1",A&&window.Vue&&window.Vue.use(Te);const De=Te;function $e(e){return"SchemeEditorView"!==e.name&&"OfflineSchemeEditorView"!==e.name}const Be={data(){return{footerShown:$e(this.$route)}},watch:{$route(e,t){this.footerShown=$e(this.$route)}}};var Le=n(1900);const Ne=(0,Le.Z)(Be,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("router-view",{key:e.$route.fullPath}),e._v(" "),e.footerShown?n("schemio-footer"):e._e()],1)}),[],!1,null,null,null).exports;var Re=n(9669),Fe=n.n(Re),Ze=n(6486),je=n(4486),ze=n.n(je);function Ue(e){return e.data}function He(){const e=1666206338e3;return Promise.all([Fe().get(`/assets/schemio-standalone.css?v=${e}`),Fe().get(`/assets/schemio-standalone.html?v=${e}`),Fe().get(`/assets/schemio-standalone.js?v=${e}`),Fe().get(`/assets/syntax-highlight-worker.js?v=${e}`),Fe().get(`/assets/syntax-highlight.css?v=${e}`)]).then((e=>({css:e[0].data,html:e[1].data,js:e[2].data,syntaxHighlightWorker:e[3].data,syntaxHighlightCSS:e[4].data})))}function Ve(){const e=(new Date).getTime();let t=null;function n(e,t,i){for(let r=0;r<e.length;r++)t(e[r],i),e[r]&&"dir"===e[r].kind&&".."!==e[r].name&&e[r].entries&&n(e[r].entries,t,e[r])}function i(e){const i=new Map;return i.set("",{path:"",viewOnly:!0,entries:e.entries||[]}),n(e.entries,((e,t)=>{"dir"===e.kind&&i.set(e.path,{path:e.path,viewOnly:!0,entries:e.entries||[],parentPath:t?t.path:""})})),e.dirLookup=i,t=e,e}function r(){return t?Promise.resolve(t):Fe().get(`data/fs.index.json?v=${e}`).then(Ue).then(i).catch((e=>{throw console.error("Failed to build index",e),e}))}return{listEntries:e=>r().then((t=>{const n=t.dirLookup.get(e);if(n){let t=[];return n.hasOwnProperty("parentPath")&&null!==n.parentPath&&t.push({kind:"dir",name:"..",path:n.parentPath}),{path:e,viewOnly:!0,entries:t.concat(n.entries)}}return Promise.reject({message:"Not found",path:e})})),getScheme:e=>r().then((t=>{const n=t.schemeIndex[e];if(!n)throw new Error("Scheme was not found");return Fe().get(`data/${n.path}?v=${encodeURIComponent(n.modifiedTime)}`).then(Ue).then((e=>[e,n]))})).then((e=>{const t=e[0],n=e[1],i=n.path;let r=i.lastIndexOf("/");r<0&&(r=0);const s=i.substring(0,r);return{viewOnly:n.viewOnly||!1,folderPath:s,scheme:t}})),getExportHTMLResources:He}}function qe(){const e=".schemio.json";function t(e){return e.replace(/[\']/g,"\\'").replace(/[\"]/g,'\\"')}function n(t){return t.endsWith(e)?t.substring(0,t.length-e.length):t}return window.getGoogleAuth().then((()=>{function i(e,t,n){return n||(n=0),n>10?Promise.resolve(t):(t||(t=[]),e?gapi.client.drive.files.get({fileId:e,fields:"id, title, parents(id,isRoot)"}).then((e=>{if(t.splice(0,0,{path:e.result.id,name:e.result.title}),e.result.parents.length>0){if(!e.result.parents[0].isRoot)return i(e.result.parents[0].id,t,n+1);t.splice(0,0,{path:"",name:"Home"})}return Promise.resolve(t)})):Promise.resolve(t))}return{listEntries(r,s){let o="trashed = false";o+=r?` and '${t(r)}' in parents`:" and 'root' in parents";const a={q:o,fields:"nextPageToken, items(id, title, mimeType, modifiedDate)"};return s&&s.nextPageToken&&(a.pageToken=s.nextPageToken),i(r).then((t=>gapi.client.drive.files.list(a).then((i=>{const s=[];return t.length>1&&s.push({kind:"dir",path:t[t.length-2].path,name:".."}),ze()(i.result.items,(t=>{"application/vnd.google-apps.folder"===t.mimeType?s.push({kind:"dir",path:t.id,name:t.title,modifiedTime:t.modifiedDate}):"application/json"===t.mimeType&&t.title.endsWith(e)&&s.push({kind:"scheme",id:t.id,name:n(t.title),modifiedTime:t.modifiedDate})})),{breadcrumbs:t,path:r,viewOnly:!1,entries:s,nextPageToken:i.result.nextPageToken}}))))},createDirectory(e,t){const n={title:t,mimeType:"application/vnd.google-apps.folder"};return e&&(n.parents=[{id:e}]),gapi.client.drive.files.insert({resource:n}).then((()=>({kind:"dir",name:t,path:e})))},moveDir(e,t){return this.moveGoogleFile(e,t)},moveGoogleFile(e,t){const n=[];return t&&t.length>0?n.push({id:t}):n.push({id:"root"}),gapi.client.drive.files.patch({fileId:e,resource:{parents:n}})},deleteDir(e,t){return this.deleteGoogleFile(e)},renameDirectory(e,t){return this.renameGoogleFile(e,t)},renameGoogleFile:(e,t)=>gapi.client.drive.files.patch({fileId:e,resource:{title:t}}).then((()=>({kind:"dir",path:e,name:t}))),deleteGoogleFile:e=>gapi.client.drive.files.delete({fileId:e}).then((()=>({status:"ok"}))),renameScheme(e,t){return this.renameGoogleFile(e,t)},deleteScheme(e){return this.deleteGoogleFile(e)},moveScheme(e,t){return this.moveGoogleFile(e,t)},createNewScheme(e,t){const n="-------314159265358979323846",i="\r\n--"+n+"\r\n",r={title:`${t.name}.schemio.json`,mimeType:"application/json"};e&&(r.parents=[{id:e}]);const s=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),o=i+"Content-Type: application/json\r\n\r\n"+JSON.stringify(r)+i+"Content-Type: application/json\r\nContent-Transfer-Encoding: base64\r\n\r\n"+s+"\r\n---------314159265358979323846--";return gapi.client.request({path:"/upload/drive/v2/files",method:"POST",params:{uploadType:"multipart"},headers:{"Content-Type":'multipart/mixed; boundary="'+n+'"'},body:o}).then((e=>(t.id=e.result.id,t)))},getScheme:e=>gapi.client.drive.files.get({fileId:e}).then((e=>{const t=e.result;if(t.downloadUrl){var n=gapi.auth.getToken().access_token,i=new XMLHttpRequest;return i.open("GET",t.downloadUrl.replace("https://content.googleapis.com","https://www.googleapis.com")),i.setRequestHeader("Authorization","Bearer "+n),new Promise(((e,t)=>{i.onload=function(){e(i.responseText)},i.onerror=function(){t()},i.send()}))}throw new Error("File is missing downloadUrl")})).then((t=>{const n=JSON.parse(t);return n.id=e,{scheme:n,folderPath:"",viewOnly:!1}})),saveScheme(e){const t="-------314159265358979323846",n="\r\n--"+t+"\r\n";var i=btoa(unescape(encodeURIComponent(JSON.stringify(e))));const r={title:`${e.name}.schemio.json`,mimeType:"application/json"};var s=n+"Content-Type: application/json\r\n\r\n"+JSON.stringify(r)+n+"Content-Type: application/json\r\nContent-Transfer-Encoding: base64\r\n\r\n"+i+"\r\n---------314159265358979323846--";return gapi.client.request({path:"/upload/drive/v2/files/"+e.id,method:"PUT",params:{uploadType:"multipart",alt:"json"},headers:{"Content-Type":'multipart/mixed; boundary="'+t+'"'},body:s}).then((()=>e))},findSchemes(e){let i="trashed = false and mimeType = 'application/json'";e.query&&(i+=` and title contains '${t(e.query)}'`);const r={q:i,maxResults:100,fields:"nextPageToken, items(mimeType, title, id, modifiedDate)"};return e.nextPageToken&&(r.pageToken=e.nextPageToken),gapi.client.drive.files.list(r).then((e=>({kind:"chunk",nextPageToken:e.result.nextPageToken,results:(0,Ze.map)(e.result.items,(e=>({id:e.id,name:n(e.title),modifiedTime:e.modifiedDate,publicLink:`/docs/${e.id}`})))})))},getExportHTMLResources:He}})).catch((e=>{throw console.error("Failed to build api client",e),e}))}function Ge(e){return"fs"===e?Promise.resolve({_getSchemeUrl:e=>`/v1/fs/docs/${e}?_v=${(new Date).getTime()}`,listEntries(e){let t="/v1/fs/list";return e&&(t=t+"/"+e),Fe().get(t).then(Ue)},moveDir:(e,t)=>Fe().post(`/v1/fs/movedir?src=${encodeURIComponent(e)}&dst=${encodeURIComponent(t)}`).then(Ue),deleteDir:e=>Fe().delete(`/v1/fs/dir?path=${encodeURIComponent(e)}`).then(Ue),createDirectory:(e,t)=>Fe().post("/v1/fs/dir",{name:t,path:e}).then(Ue),renameDirectory:(e,t)=>Fe().patch(`/v1/fs/dir?path=${encodeURIComponent(e)}`,{name:t}).then(Ue),getScheme(e){return Fe().get(this._getSchemeUrl(e)).then(Ue)},renameScheme(e,t){return Fe().patch(this._getSchemeUrl(e),{name:t}).then(Ue)},moveScheme:(e,t)=>Fe().post(`/v1/fs/movescheme?id=${encodeURIComponent(e)}&dst=${encodeURIComponent(t)}`).then(Ue),createNewScheme:(e,t)=>Fe().post(`/v1/fs/docs?path=${encodeURIComponent(e)}`,t).then(Ue),createArt:e=>Fe().post("/v1/fs/art",e).then(Ue),getAllArt:()=>Fe().get("/v1/fs/art").then(Ue),saveArt:(e,t)=>Fe().put(`/v1/fs/art/${e}`,t).then(Ue),deleteArt:e=>Fe().delete(`/v1/fs/art/${e}`).then(Ue),saveScheme(e){return Fe().put(this._getSchemeUrl(e.id),e).then(Ue)},deleteScheme(e){return Fe().delete(this._getSchemeUrl(e)).then(Ue)},findSchemes(e){let t="/v1/fs/docs",n={};e.query&&(n.q=e.query),e.page&&(n.page=e.page);let i=!0;return ze()(n,((e,n)=>{t+=i?"?":"&",t+=n+"=",t+=encodeURIComponent(e),i=!1})),Fe().get(t).then(Ue)},getTags:()=>Promise.resolve([]),uploadSchemeSvgPreview(e,t){let n="/v1/fs/doc-preview?id="+encodeURIComponent(e);return Fe().post(n,{svg:t}).then(Ue)},uploadFile(e){const t=new FormData;return t.append("file",e,e.name),Fe().post("/v1/media",t).then(Ue).then((e=>e.url))},saveStyle:(e,t,n)=>Fe().post("/v1/fs/styles",{fill:e,strokeColor:t,textColor:n}).then(Ue),getStyles:()=>Fe().get("/v1/fs/styles").then(Ue),deleteStyle:e=>Fe().delete(`/v1/fs/styles/${e}`).then(Ue),getExportHTMLResources:He,submitStaticExport:()=>Fe().post("/v1/static-export/start").then(Ue),getStaticExportStatus:()=>Fe().get("/v1/static-export/status").then(Ue)}):"static"===e?Promise.resolve(Ve()):"drive"===e?qe():"offline"===e?Promise.resolve({getExportHTMLResources:He}):Promise.reject(new Error("Unknown api client type: "+e))}var We=n(5161),Ke=n.n(We);function Je(e,t,n,i){return e+t<i?i-t:n-e<i?n-i:e}const Ye={},Qe={props:{title:String,width:{type:Number,default:600},maxWidth:{type:Number,default:0},maxHeight:{type:Number,default:0},stretchWidth:{type:Boolean,default:!1},primaryButton:{type:String,default:null},primaryButtonDisabled:{type:Boolean,default:!1},secondaryButton:{type:String,default:null},secondaryButtonStyle:{type:String,default:"btn-secondary"},useMask:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},showFooter:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},closeName:{type:String,default:"Close"}},beforeMount(){this.stretchWidth&&(this.actualWidth=window.innerWidth-80,this.maxWidth>0&&(this.actualWidth=Math.min(this.actualWidth,this.maxWidth))),document.addEventListener("keydown",this.onKeyPress),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.cancleModalDrag)},mounted(){const e=this.$refs.modalContainer.getBoundingClientRect();let t=(window.innerWidth-e.width)/2,n=(window.innerHeight-e.height)/2;const i=Ye[this.title];i&&(t=i.x,n=i.y),this.x=Je(t,e.width,window.innerWidth,50),this.y=Je(n,40,window.innerHeight,50)},beforeDestroy(){document.removeEventListener("keydown",this.onKeyPress),document.removeEventListener("mouseup",this.cancleModalDrag)},data(){return{x:100,y:100,actualWidth:this.width,originalPoint:{x:0,y:0},clickPoint:{x:0,y:0},dragging:!1}},methods:{onKeyPress(e){"Escape"===e.key&&this.$emit("close")},initModalDrag(e){this.originalPoint.x=this.x,this.originalPoint.y=this.y,this.clickPoint.x=e.clientX,this.clickPoint.y=e.clientY,this.dragging=!0},cancleModalDrag(e){this.dragging=!1},onMouseMove(e){if(this.dragging){const t=this.$refs.modalContainer.getBoundingClientRect();if(0===e.buttons)return void(this.dragging=!1);this.x=Je(this.originalPoint.x+e.clientX-this.clickPoint.x,t.width,window.innerWidth,50),this.y=Je(this.originalPoint.y+e.clientY-this.clickPoint.y,40,window.innerHeight,50),Ye[this.title]={x:this.x,y:this.y}}}},computed:{modalBodyStyles(){const e={};return this.maxHeight>0?e["max-height"]=this.maxHeight+"px":e["max-height"]=window.innerHeight-80,e}}},Xe=(0,Le.Z)(Qe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.useMask?n("div",{staticClass:"modal-mask"}):e._e(),e._v(" "),n("div",{ref:"modalContainer",staticClass:"modal-container text-nonselectable",style:{width:e.actualWidth+"px",top:e.y+"px",left:e.x+"px"}},[e.showHeader?n("div",{staticClass:"modal-header",class:{dragging:e.dragging},on:{mousedown:e.initModalDrag}},[n("h3",[e._v(e._s(e.title))]),e._v(" "),e.closable?n("span",{staticClass:"modal-close",on:{click:function(t){return e.$emit("close")}}},[n("i",{staticClass:"fas fa-times"})]):e._e()]):e._e(),e._v(" "),n("div",{staticClass:"modal-body"},[n("div",{style:e.modalBodyStyles},[e._t("default")],2)]),e._v(" "),e.showFooter?n("div",{staticClass:"modal-footer"},[n("div",{staticClass:"modal-controls"},[e.primaryButton?n("span",{staticClass:"btn btn-primary",class:{disabled:e.primaryButtonDisabled},on:{click:function(t){return e.$emit("primary-submit")}}},[e._v(e._s(e.primaryButton))]):e._e(),e._v(" "),e.secondaryButton?n("span",{class:"btn "+e.secondaryButtonStyle,on:{click:function(t){return e.$emit("secondary-submit")}}},[e._v(e._s(e.secondaryButton))]):e.closable?n("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.$emit("close")}}},[e._v(e._s(e.closeName))]):e._e()])]):e._e()])])}),[],!1,null,null,null).exports;function et(e){this.content=e}et.prototype={constructor:et,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var i=n&&n!=e?this.remove(n):this,r=i.find(e),s=i.content.slice();return-1==r?s.push(n||e,t):(s[r+1]=t,n&&(s[r]=n)),new et(s)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new et(n)},addToStart:function(e,t){return new et([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new et(n)},addBefore:function(e,t,n){var i=this.remove(t),r=i.content.slice(),s=i.find(e);return r.splice(-1==s?r.length:s,0,t,n),new et(r)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=et.from(e)).size?new et(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=et.from(e)).size?new et(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=et.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}},et.from=function(e){if(e instanceof et)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new et(t)};const tt=et;function nt(e,t,n){for(var i=0;;i++){if(i==e.childCount||i==t.childCount)return e.childCount==t.childCount?null:n;var r=e.child(i),s=t.child(i);if(r!=s){if(!r.sameMarkup(s))return n;if(r.isText&&r.text!=s.text){for(var o=0;r.text[o]==s.text[o];o++)n++;return n}if(r.content.size||s.content.size){var a=nt(r.content,s.content,n+1);if(null!=a)return a}n+=r.nodeSize}else n+=r.nodeSize}}function it(e,t,n,i){for(var r=e.childCount,s=t.childCount;;){if(0==r||0==s)return r==s?null:{a:n,b:i};var o=e.child(--r),a=t.child(--s),l=o.nodeSize;if(o!=a){if(!o.sameMarkup(a))return{a:n,b:i};if(o.isText&&o.text!=a.text){for(var c=0,h=Math.min(o.text.length,a.text.length);c<h&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,i--;return{a:n,b:i}}if(o.content.size||a.content.size){var d=it(o.content,a.content,n-1,i-1);if(d)return d}n-=l,i-=l}else n-=l,i-=l}}var rt=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize},st={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};rt.prototype.nodesBetween=function(e,t,n,i,r){void 0===i&&(i=0);for(var s=0,o=0;o<t;s++){var a=this.content[s],l=o+a.nodeSize;if(l>e&&!1!==n(a,i+o,r,s)&&a.content.size){var c=o+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,t-c),n,i+c)}o=l}},rt.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},rt.prototype.textBetween=function(e,t,n,i){var r="",s=!0;return this.nodesBetween(e,t,(function(o,a){o.isText?(r+=o.text.slice(Math.max(e,a)-a,t-a),s=!n):o.isLeaf&&i?(r+="function"==typeof i?i(o):i,s=!n):!s&&o.isBlock&&(r+=n,s=!0)}),0),r},rt.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,i=this.content.slice(),r=0;for(t.isText&&t.sameMarkup(n)&&(i[i.length-1]=t.withText(t.text+n.text),r=1);r<e.content.length;r++)i.push(e.content[r]);return new rt(i,this.size+e.size)},rt.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var n=[],i=0;if(t>e)for(var r=0,s=0;s<t;r++){var o=this.content[r],a=s+o.nodeSize;a>e&&((s<e||a>t)&&(o=o.isText?o.cut(Math.max(0,e-s),Math.min(o.text.length,t-s)):o.cut(Math.max(0,e-s-1),Math.min(o.content.size,t-s-1))),n.push(o),i+=o.nodeSize),s=a}return new rt(n,i)},rt.prototype.cutByIndex=function(e,t){return e==t?rt.empty:0==e&&t==this.content.length?this:new rt(this.content.slice(e,t))},rt.prototype.replaceChild=function(e,t){var n=this.content[e];if(n==t)return this;var i=this.content.slice(),r=this.size+t.nodeSize-n.nodeSize;return i[e]=t,new rt(i,r)},rt.prototype.addToStart=function(e){return new rt([e].concat(this.content),this.size+e.nodeSize)},rt.prototype.addToEnd=function(e){return new rt(this.content.concat(e),this.size+e.nodeSize)},rt.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},st.firstChild.get=function(){return this.content.length?this.content[0]:null},st.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},st.childCount.get=function(){return this.content.length},rt.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},rt.prototype.maybeChild=function(e){return this.content[e]},rt.prototype.forEach=function(e){for(var t=0,n=0;t<this.content.length;t++){var i=this.content[t];e(i,n,t),n+=i.nodeSize}},rt.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),nt(this,e,t)},rt.prototype.findDiffEnd=function(e,t,n){return void 0===t&&(t=this.size),void 0===n&&(n=e.size),it(this,e,t,n)},rt.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return at(0,e);if(e==this.size)return at(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var n=0,i=0;;n++){var r=i+this.child(n).nodeSize;if(r>=e)return r==e||t>0?at(n+1,r):at(n,i);i=r}},rt.prototype.toString=function(){return"<"+this.toStringInner()+">"},rt.prototype.toStringInner=function(){return this.content.join(", ")},rt.prototype.toJSON=function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null},rt.fromJSON=function(e,t){if(!t)return rt.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new rt(t.map(e.nodeFromJSON))},rt.fromArray=function(e){if(!e.length)return rt.empty;for(var t,n=0,i=0;i<e.length;i++){var r=e[i];n+=r.nodeSize,i&&r.isText&&e[i-1].sameMarkup(r)?(t||(t=e.slice(0,i)),t[t.length-1]=r.withText(t[t.length-1].text+r.text)):t&&t.push(r)}return new rt(t||e,n)},rt.from=function(e){if(!e)return rt.empty;if(e instanceof rt)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new rt([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(rt.prototype,st);var ot={index:0,offset:0};function at(e,t){return ot.index=e,ot.offset=t,ot}function lt(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!lt(e[i],t[i]))return!1}else{for(var r in e)if(!(r in t)||!lt(e[r],t[r]))return!1;for(var s in t)if(!(s in e))return!1}return!0}rt.empty=new rt([],0);var ct=function(e,t){this.type=e,this.attrs=t};function ht(e){var t=Error.call(this,e);return t.__proto__=ht.prototype,t}ct.prototype.addToSet=function(e){for(var t,n=!1,i=0;i<e.length;i++){var r=e[i];if(this.eq(r))return e;if(this.type.excludes(r.type))t||(t=e.slice(0,i));else{if(r.type.excludes(this.type))return e;!n&&r.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),n=!0),t&&t.push(r)}}return t||(t=e.slice()),n||t.push(this),t},ct.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},ct.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},ct.prototype.eq=function(e){return this==e||this.type==e.type&&lt(this.attrs,e.attrs)},ct.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},ct.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type "+t.type+" in this schema");return n.create(t.attrs)},ct.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0},ct.setFrom=function(e){if(!e||0==e.length)return ct.none;if(e instanceof ct)return[e];var t=e.slice();return t.sort((function(e,t){return e.type.rank-t.type.rank})),t},ct.none=[],ht.prototype=Object.create(Error.prototype),ht.prototype.constructor=ht,ht.prototype.name="ReplaceError";var dt=function(e,t,n){this.content=e,this.openStart=t,this.openEnd=n},ut={size:{configurable:!0}};function pt(e,t,n){var i=e.findIndex(t),r=i.index,s=i.offset,o=e.maybeChild(r),a=e.findIndex(n),l=a.index,c=a.offset;if(s==t||o.isText){if(c!=n&&!e.child(l).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=l)throw new RangeError("Removing non-flat range");return e.replaceChild(r,o.copy(pt(o.content,t-s-1,n-s-1)))}function mt(e,t,n,i){var r=e.findIndex(t),s=r.index,o=r.offset,a=e.maybeChild(s);if(o==t||a.isText)return i&&!i.canReplace(s,s,n)?null:e.cut(0,t).append(n).append(e.cut(t));var l=mt(a.content,t-o-1,n);return l&&e.replaceChild(s,a.copy(l))}function ft(e,t,n){if(n.openStart>e.depth)throw new ht("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new ht("Inconsistent open depths");return gt(e,t,n,0)}function gt(e,t,n,i){var r=e.index(i),s=e.node(i);if(r==t.index(i)&&i<e.depth-n.openStart){var o=gt(e,t,n,i+1);return s.copy(s.content.replaceChild(r,o))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=i||t.depth!=i){var a=function(e,t){for(var n=t.depth-e.openStart,i=t.node(n).copy(e.content),r=n-1;r>=0;r--)i=t.node(r).copy(rt.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}(n,e);return wt(s,Ct(e,a.start,a.end,t,i))}var l=e.parent,c=l.content;return wt(l,c.cut(0,e.parentOffset).append(n.content).append(c.cut(t.parentOffset)))}return wt(s,_t(e,t,i))}function vt(e,t){if(!t.type.compatibleContent(e.type))throw new ht("Cannot join "+t.type.name+" onto "+e.type.name)}function yt(e,t,n){var i=e.node(n);return vt(i,t.node(n)),i}function xt(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function bt(e,t,n,i){var r=(t||e).node(n),s=0,o=t?t.index(n):r.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(xt(e.nodeAfter,i),s++));for(var a=s;a<o;a++)xt(r.child(a),i);t&&t.depth==n&&t.textOffset&&xt(t.nodeBefore,i)}function wt(e,t){if(!e.type.validContent(t))throw new ht("Invalid content for node "+e.type.name);return e.copy(t)}function Ct(e,t,n,i,r){var s=e.depth>r&&yt(e,t,r+1),o=i.depth>r&&yt(n,i,r+1),a=[];return bt(null,e,r,a),s&&o&&t.index(r)==n.index(r)?(vt(s,o),xt(wt(s,Ct(e,t,n,i,r+1)),a)):(s&&xt(wt(s,_t(e,t,r+1)),a),bt(t,n,r,a),o&&xt(wt(o,_t(n,i,r+1)),a)),bt(i,null,r,a),new rt(a)}function _t(e,t,n){var i=[];return bt(null,e,n,i),e.depth>n&&xt(wt(yt(e,t,n+1),_t(e,t,n+1)),i),bt(t,null,n,i),new rt(i)}ut.size.get=function(){return this.content.size-this.openStart-this.openEnd},dt.prototype.insertAt=function(e,t){var n=mt(this.content,e+this.openStart,t,null);return n&&new dt(n,this.openStart,this.openEnd)},dt.prototype.removeBetween=function(e,t){return new dt(pt(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},dt.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},dt.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},dt.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},dt.fromJSON=function(e,t){if(!t)return dt.empty;var n=t.openStart||0,i=t.openEnd||0;if("number"!=typeof n||"number"!=typeof i)throw new RangeError("Invalid input for Slice.fromJSON");return new dt(rt.fromJSON(e,t.content),n,i)},dt.maxOpen=function(e,t){void 0===t&&(t=!0);for(var n=0,i=0,r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(var s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new dt(e,n,i)},Object.defineProperties(dt.prototype,ut),dt.empty=new dt(rt.empty,0,0);var At=function(e,t,n){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=n},St={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};At.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},St.parent.get=function(){return this.node(this.depth)},St.doc.get=function(){return this.node(0)},At.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},At.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},At.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},At.prototype.start=function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1},At.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},At.prototype.before=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},At.prototype.after=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},St.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},St.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],i=e.child(t);return n?e.child(t).cut(n):i},St.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},At.prototype.posAtIndex=function(e,t){t=this.resolveDepth(t);for(var n=this.path[3*t],i=0==t?0:this.path[3*t-1]+1,r=0;r<e;r++)i+=n.child(r).nodeSize;return i},At.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return ct.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),i=e.maybeChild(t);if(!n){var r=n;n=i,i=r}for(var s=n.marks,o=0;o<s.length;o++)!1!==s[o].type.spec.inclusive||i&&s[o].isInSet(i.marks)||(s=s[o--].removeFromSet(s));return s},At.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,i=e.parent.maybeChild(e.index()),r=0;r<n.length;r++)!1!==n[r].type.spec.inclusive||i&&n[r].isInSet(i.marks)||(n=n[r--].removeFromSet(n));return n},At.prototype.sharedDepth=function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},At.prototype.blockRange=function(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new Et(this,e,n)},At.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},At.prototype.max=function(e){return e.pos>this.pos?e:this},At.prototype.min=function(e){return e.pos<this.pos?e:this},At.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},At.resolve=function(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var n=[],i=0,r=t,s=e;;){var o=s.content.findIndex(r),a=o.index,l=o.offset,c=r-l;if(n.push(s,a,i+l),!c)break;if((s=s.child(a)).isText)break;r=c-1,i+=l+1}return new At(t,n,r)},At.resolveCached=function(e,t){for(var n=0;n<kt.length;n++){var i=kt[n];if(i.pos==t&&i.doc==e)return i}var r=kt[It]=At.resolve(e,t);return It=(It+1)%Pt,r},Object.defineProperties(At.prototype,St);var kt=[],It=0,Pt=12,Et=function(e,t,n){this.$from=e,this.$to=t,this.depth=n},Tt={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};Tt.start.get=function(){return this.$from.before(this.depth+1)},Tt.end.get=function(){return this.$to.after(this.depth+1)},Tt.parent.get=function(){return this.$from.node(this.depth)},Tt.startIndex.get=function(){return this.$from.index(this.depth)},Tt.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(Et.prototype,Tt);var Mt=Object.create(null),Ot=function(e,t,n,i){this.type=e,this.attrs=t,this.content=n||rt.empty,this.marks=i||ct.none},Dt={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Dt.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},Dt.childCount.get=function(){return this.content.childCount},Ot.prototype.child=function(e){return this.content.child(e)},Ot.prototype.maybeChild=function(e){return this.content.maybeChild(e)},Ot.prototype.forEach=function(e){this.content.forEach(e)},Ot.prototype.nodesBetween=function(e,t,n,i){void 0===i&&(i=0),this.content.nodesBetween(e,t,n,i,this)},Ot.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},Dt.textContent.get=function(){return this.textBetween(0,this.content.size,"")},Ot.prototype.textBetween=function(e,t,n,i){return this.content.textBetween(e,t,n,i)},Dt.firstChild.get=function(){return this.content.firstChild},Dt.lastChild.get=function(){return this.content.lastChild},Ot.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},Ot.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},Ot.prototype.hasMarkup=function(e,t,n){return this.type==e&&lt(this.attrs,t||e.defaultAttrs||Mt)&&ct.sameSet(this.marks,n||ct.none)},Ot.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},Ot.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},Ot.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},Ot.prototype.slice=function(e,t,n){if(void 0===t&&(t=this.content.size),void 0===n&&(n=!1),e==t)return dt.empty;var i=this.resolve(e),r=this.resolve(t),s=n?0:i.sharedDepth(t),o=i.start(s),a=i.node(s).content.cut(i.pos-o,r.pos-o);return new dt(a,i.depth-s,r.depth-s)},Ot.prototype.replace=function(e,t,n){return ft(this.resolve(e),this.resolve(t),n)},Ot.prototype.nodeAt=function(e){for(var t=this;;){var n=t.content.findIndex(e),i=n.index,r=n.offset;if(!(t=t.maybeChild(i)))return null;if(r==e||t.isText)return t;e-=r+1}},Ot.prototype.childAfter=function(e){var t=this.content.findIndex(e),n=t.index,i=t.offset;return{node:this.content.maybeChild(n),index:n,offset:i}},Ot.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,i=t.offset;if(i<e)return{node:this.content.child(n),index:n,offset:i};var r=this.content.child(n-1);return{node:r,index:n-1,offset:i-r.nodeSize}},Ot.prototype.resolve=function(e){return At.resolveCached(this,e)},Ot.prototype.resolveNoCache=function(e){return At.resolve(this,e)},Ot.prototype.rangeHasMark=function(e,t,n){var i=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(i=!0),!i})),i},Dt.isBlock.get=function(){return this.type.isBlock},Dt.isTextblock.get=function(){return this.type.isTextblock},Dt.inlineContent.get=function(){return this.type.inlineContent},Dt.isInline.get=function(){return this.type.isInline},Dt.isText.get=function(){return this.type.isText},Dt.isLeaf.get=function(){return this.type.isLeaf},Dt.isAtom.get=function(){return this.type.isAtom},Ot.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Bt(this.marks,e)},Ot.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},Ot.prototype.canReplace=function(e,t,n,i,r){void 0===n&&(n=rt.empty),void 0===i&&(i=0),void 0===r&&(r=n.childCount);var s=this.contentMatchAt(e).matchFragment(n,i,r),o=s&&s.matchFragment(this.content,t);if(!o||!o.validEnd)return!1;for(var a=i;a<r;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},Ot.prototype.canReplaceWith=function(e,t,n,i){if(i&&!this.type.allowsMarks(i))return!1;var r=this.contentMatchAt(e).matchType(n),s=r&&r.matchFragment(this.content,t);return!!s&&s.validEnd},Ot.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},Ot.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var e=ct.none,t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!ct.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(e){return e.type.name})));this.content.forEach((function(e){return e.check()}))},Ot.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e},Ot.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var i=rt.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,i,n)},Object.defineProperties(Ot.prototype,Dt);var $t=function(e){function t(t,n,i,r){if(e.call(this,t,n,null,r),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Bt(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},t.prototype.textBetween=function(e,t){return this.text.slice(e,t)},n.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)},t.prototype.withText=function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)},t.prototype.cut=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},t.prototype.eq=function(e){return this.sameMarkup(e)&&this.text==e.text},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.text=this.text,t},Object.defineProperties(t.prototype,n),t}(Ot);function Bt(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var Lt=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},Nt={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};Lt.parse=function(e,t){var n=new Rt(e,t);if(null==n.next)return Lt.empty;var i=Zt(n);n.next&&n.err("Unexpected trailing text");var r,s,o=(r=function(e){var t=[[]];return r(function e(t,s){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(e(n,s))}),[]);if("seq"==t.type)for(var o=0;;o++){var a=e(t.exprs[o],s);if(o==t.exprs.length-1)return a;r(a,s=n())}else{if("star"==t.type){var l=n();return i(s,l),r(e(t.expr,l),l),[i(l)]}if("plus"==t.type){var c=n();return r(e(t.expr,s),c),r(e(t.expr,c),c),[i(c)]}if("opt"==t.type)return[i(s)].concat(e(t.expr,s));if("range"==t.type){for(var h=s,d=0;d<t.min;d++){var u=n();r(e(t.expr,h),u),h=u}if(-1==t.max)r(e(t.expr,h),h);else for(var p=t.min;p<t.max;p++){var m=n();i(h,m),r(e(t.expr,h),m),h=m}return[i(h)]}if("name"==t.type)return[i(s,null,t.value)]}}(e,0),n()),t;function n(){return t.push([])-1}function i(e,n,i){var r={term:i,to:n};return t[e].push(r),r}function r(e,t){e.forEach((function(e){return e.to=t}))}}(i),s=Object.create(null),function e(t){var n=[];t.forEach((function(e){r[e].forEach((function(e){var t=e.term,i=e.to;if(t){var s=n.indexOf(t),o=s>-1&&n[s+1];qt(r,i).forEach((function(e){o||n.push(t,o=[]),-1==o.indexOf(e)&&o.push(e)}))}}))}));for(var i=s[t.join(",")]=new Lt(t.indexOf(r.length-1)>-1),o=0;o<n.length;o+=2){var a=n[o+1].sort(Vt);i.next.push(n[o],s[a.join(",")]||e(a))}return i}(qt(r,0)));return function(e,t){for(var n=0,i=[e];n<i.length;n++){for(var r=i[n],s=!r.validEnd,o=[],a=0;a<r.next.length;a+=2){var l=r.next[a],c=r.next[a+1];o.push(l.name),!s||l.isText||l.hasRequiredAttrs()||(s=!1),-1==i.indexOf(c)&&i.push(c)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o},Lt.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},Lt.prototype.matchFragment=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.childCount);for(var i=this,r=t;i&&r<n;r++)i=i.matchType(e.child(r).type);return i},Nt.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},Nt.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},Lt.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1},Lt.prototype.fillBefore=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var i=[this];return function r(s,o){var a=s.matchFragment(e,n);if(a&&(!t||a.validEnd))return rt.from(o.map((function(e){return e.createAndFill()})));for(var l=0;l<s.next.length;l+=2){var c=s.next[l],h=s.next[l+1];if(!c.isText&&!c.hasRequiredAttrs()&&-1==i.indexOf(h)){i.push(h);var d=r(h,o.concat(c));if(d)return d}}}(this,[])},Lt.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n},Lt.prototype.computeWrapping=function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var i=n.shift(),r=i.match;if(r.matchType(e)){for(var s=[],o=i;o.type;o=o.via)s.push(o.type);return s.reverse()}for(var a=0;a<r.next.length;a+=2){var l=r.next[a];l.isLeaf||l.hasRequiredAttrs()||l.name in t||i.type&&!r.next[a+1].validEnd||(n.push({match:l.contentMatch,type:l,via:i}),t[l.name]=!0)}}},Nt.edgeCount.get=function(){return this.next.length>>1},Lt.prototype.edge=function(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},Lt.prototype.toString=function(){var e=[];return function t(n){e.push(n);for(var i=1;i<n.next.length;i+=2)-1==e.indexOf(n.next[i])&&t(n.next[i])}(this),e.map((function(t,n){for(var i=n+(t.validEnd?"*":" ")+" ",r=0;r<t.next.length;r+=2)i+=(r?", ":"")+t.next[r].name+"->"+e.indexOf(t.next[r+1]);return i})).join("\n")},Object.defineProperties(Lt.prototype,Nt),Lt.empty=new Lt(!0);var Rt=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},Ft={next:{configurable:!0}};function Zt(e){var t=[];do{t.push(jt(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function jt(e){var t=[];do{t.push(zt(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function zt(e){for(var t=function(e){if(e.eat("(")){var t=Zt(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=function(e,t){var n=e.nodeTypes,i=n[t];if(i)return[i];var r=[];for(var s in n){var o=n[s];o.groups.indexOf(t)>-1&&r.push(o)}return 0==r.length&&e.err("No node type or group '"+t+"' found"),r}(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=Ht(e,t)}return t}function Ut(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function Ht(e,t){var n=Ut(e),i=n;return e.eat(",")&&(i="}"!=e.next?Ut(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:i,expr:t}}function Vt(e,t){return t-e}function qt(e,t){var n=[];return function t(i){var r=e[i];if(1==r.length&&!r[0].term)return t(r[0].to);n.push(i);for(var s=0;s<r.length;s++){var o=r[s],a=o.term,l=o.to;a||-1!=n.indexOf(l)||t(l)}}(t),n.sort(Vt)}function Gt(e){var t=Object.create(null);for(var n in e){var i=e[n];if(!i.hasDefault)return null;t[n]=i.default}return t}function Wt(e,t){var n=Object.create(null);for(var i in e){var r=t&&t[i];if(void 0===r){var s=e[i];if(!s.hasDefault)throw new RangeError("No value supplied for attribute "+i);r=s.default}n[i]=r}return n}function Kt(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new Qt(e[n]);return t}Ft.next.get=function(){return this.tokens[this.pos]},Rt.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},Rt.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(Rt.prototype,Ft);var Jt=function(e,t,n){this.name=e,this.schema=t,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=Kt(n.attrs),this.defaultAttrs=Gt(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e},Yt={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Yt.isInline.get=function(){return!this.isBlock},Yt.isTextblock.get=function(){return this.isBlock&&this.inlineContent},Yt.isLeaf.get=function(){return this.contentMatch==Lt.empty},Yt.isAtom.get=function(){return this.isLeaf||this.spec.atom},Jt.prototype.hasRequiredAttrs=function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1},Jt.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},Jt.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:Wt(this.attrs,e)},Jt.prototype.create=function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ot(this,this.computeAttrs(e),rt.from(t),ct.setFrom(n))},Jt.prototype.createChecked=function(e,t,n){if(t=rt.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new Ot(this,this.computeAttrs(e),t,ct.setFrom(n))},Jt.prototype.createAndFill=function(e,t,n){if(e=this.computeAttrs(e),(t=rt.from(t)).size){var i=this.contentMatch.fillBefore(t);if(!i)return null;t=i.append(t)}var r=this.contentMatch.matchFragment(t).fillBefore(rt.empty,!0);return r?new Ot(this,e,t.append(r),ct.setFrom(n)):null},Jt.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0},Jt.prototype.allowsMarkType=function(e){return null==this.markSet||this.markSet.indexOf(e)>-1},Jt.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},Jt.prototype.allowedMarks=function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:ct.empty:e},Jt.compile=function(e,t){var n=Object.create(null);e.forEach((function(e,i){return n[e]=new Jt(e,t,i)}));var i=t.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var r in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(Jt.prototype,Yt);var Qt=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},Xt={isRequired:{configurable:!0}};Xt.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(Qt.prototype,Xt);var en=function(e,t,n,i){this.name=e,this.schema=n,this.spec=i,this.attrs=Kt(i.attrs),this.rank=t,this.excluded=null;var r=Gt(this.attrs);this.instance=r&&new ct(this,r)};en.prototype.create=function(e){return!e&&this.instance?this.instance:new ct(this,Wt(this.attrs,e))},en.compile=function(e,t){var n=Object.create(null),i=0;return e.forEach((function(e,r){return n[e]=new en(e,i++,t,r)})),n},en.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e},en.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},en.prototype.excludes=function(e){return this.excluded.indexOf(e)>-1};var tn=function(e){for(var t in this.spec={},e)this.spec[t]=e[t];this.spec.nodes=tt.from(e.nodes),this.spec.marks=tt.from(e.marks),this.nodes=Jt.compile(this.spec.nodes,this),this.marks=en.compile(this.spec.marks,this);var n=Object.create(null);for(var i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");var r=this.nodes[i],s=r.spec.content||"",o=r.spec.marks;r.contentMatch=n[s]||(n[s]=Lt.parse(s,this.nodes)),r.inlineContent=r.contentMatch.inlineContent,r.markSet="_"==o?null:o?nn(this,o.split(" ")):""!=o&&r.inlineContent?null:[]}for(var a in this.marks){var l=this.marks[a],c=l.spec.excludes;l.excluded=null==c?[l]:""==c?[]:nn(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function nn(e,t){for(var n=[],i=0;i<t.length;i++){var r=t[i],s=e.marks[r],o=s;if(s)n.push(s);else for(var a in e.marks){var l=e.marks[a];("_"==r||l.spec.group&&l.spec.group.split(" ").indexOf(r)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[i]+"'")}return n}tn.prototype.node=function(e,t,n,i){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof Jt))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,i)},tn.prototype.text=function(e,t){var n=this.nodes.text;return new $t(n,n.defaultAttrs,e,ct.setFrom(t))},tn.prototype.mark=function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},tn.prototype.nodeFromJSON=function(e){return Ot.fromJSON(this,e)},tn.prototype.markFromJSON=function(e){return ct.fromJSON(this,e)},tn.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var rn=function(e,t){var n=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((function(e){e.tag?n.tags.push(e):e.style&&n.styles.push(e)})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var n=e.nodes[t.node];return n.contentMatch.matchType(n)}))};rn.prototype.parse=function(e,t){void 0===t&&(t={});var n=new hn(this,t,!1);return n.addAll(e,null,t.from,t.to),n.finish()},rn.prototype.parseSlice=function(e,t){void 0===t&&(t={});var n=new hn(this,t,!0);return n.addAll(e,null,t.from,t.to),dt.maxOpen(n.finish())},rn.prototype.matchTag=function(e,t,n){for(var i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){var r=this.tags[i];if(un(e,r.tag)&&(void 0===r.namespace||e.namespaceURI==r.namespace)&&(!r.context||t.matchesContext(r.context))){if(r.getAttrs){var s=r.getAttrs(e);if(!1===s)continue;r.attrs=s}return r}}},rn.prototype.matchStyle=function(e,t,n,i){for(var r=i?this.styles.indexOf(i)+1:0;r<this.styles.length;r++){var s=this.styles[r];if(!(0!=s.style.indexOf(e)||s.context&&!n.matchesContext(s.context)||s.style.length>e.length&&(61!=s.style.charCodeAt(e.length)||s.style.slice(e.length+1)!=t))){if(s.getAttrs){var o=s.getAttrs(t);if(!1===o)continue;s.attrs=o}return s}}},rn.schemaRules=function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,i=0;i<t.length;i++){var r=t[i];if((null==r.priority?50:r.priority)<n)break}t.splice(i,0,e)}var i,r=function(t){var i=e.marks[t].spec.parseDOM;i&&i.forEach((function(e){n(e=pn(e)),e.mark=t}))};for(var s in e.marks)r(s);for(var o in e.nodes)i=void 0,(i=e.nodes[o].spec.parseDOM)&&i.forEach((function(e){n(e=pn(e)),e.node=o}));return t},rn.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new rn(e,rn.schemaRules(e)))};var sn={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},on={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},an={ol:!0,ul:!0};function ln(e){return(e?1:0)|("full"===e?2:0)}var cn=function(e,t,n,i,r,s,o){this.type=e,this.attrs=t,this.solid=r,this.match=s||(4&o?null:e.contentMatch),this.options=o,this.content=[],this.marks=n,this.activeMarks=ct.none,this.pendingMarks=i,this.stashMarks=[]};cn.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(rt.from(e));if(!t){var n,i=this.type.contentMatch;return(n=i.findWrapping(e.type))?(this.match=i,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},cn.prototype.finish=function(e){if(!(1&this.options)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var i=rt.from(this.content);return!e&&this.match&&(i=i.append(this.match.fillBefore(rt.empty,!0))),this.type?this.type.create(this.attrs,i,this.marks):i},cn.prototype.popFromStashMark=function(e){for(var t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]},cn.prototype.applyPending=function(e){for(var t=0,n=this.pendingMarks;t<n.length;t++){var i=n[t];(this.type?this.type.allowsMarkType(i.type):mn(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}},cn.prototype.inlineContext=function(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!sn.hasOwnProperty(e.parentNode.nodeName.toLowerCase())};var hn=function(e,t,n){this.parser=e,this.options=t,this.isOpen=n;var i,r=t.topNode,s=ln(t.preserveWhitespace)|(n?4:0);i=r?new cn(r.type,r.attrs,ct.none,ct.none,!0,t.topMatch||r.type.contentMatch,s):new cn(n?null:e.schema.topNodeType,null,ct.none,ct.none,!0,null,s),this.nodes=[i],this.open=0,this.find=t.findPositions,this.needsBlock=!1},dn={top:{configurable:!0},currentPos:{configurable:!0}};function un(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function pn(e){var t={};for(var n in e)t[n]=e[n];return t}function mn(e,t){var n=t.schema.nodes,i=function(i){var r=n[i];if(r.allowsMarkType(e)){var s=[],o=function(e){s.push(e);for(var n=0;n<e.edgeCount;n++){var i=e.edge(n),r=i.type,a=i.next;if(r==t)return!0;if(s.indexOf(a)<0&&o(a))return!0}};return o(r.contentMatch)?{v:!0}:void 0}};for(var r in n){var s=i(r);if(s)return s.v}}dn.top.get=function(){return this.nodes[this.open]},hn.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(function(e){for(var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,i=[];t=n.exec(e);)i.push(t[1],t[2].trim());return i}(t)):null,i=this.top;if(null!=n)for(var r=0;r<n.length;r++)this.addPendingMark(n[r]);if(this.addElement(e),null!=n)for(var s=0;s<n.length;s++)this.removePendingMark(n[s],i)}},hn.prototype.addTextNode=function(e){var t=e.nodeValue,n=this.top;if(2&n.options||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)t=2&n.options?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var i=n.content[n.content.length-1],r=e.previousSibling;(!i||r&&"BR"==r.nodeName||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},hn.prototype.addElement=function(e,t){var n,i=e.nodeName.toLowerCase();an.hasOwnProperty(i)&&this.parser.normalizeLists&&function(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var i=1==t.nodeType?t.nodeName.toLowerCase():null;i&&an.hasOwnProperty(i)&&n?(n.appendChild(t),t=n):"li"==i?n=t:i&&(n=null)}}(e);var r=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(r?r.ignore:on.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e);else if(!r||r.skip||r.closeParent){r&&r.closeParent?this.open=Math.max(0,this.open-1):r&&r.skip.nodeType&&(e=r.skip);var s,o=this.top,a=this.needsBlock;if(sn.hasOwnProperty(i))s=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),s&&this.sync(o),this.needsBlock=a}else this.addElementByRule(e,r,!1===r.consuming?n:null)},hn.prototype.leafFallback=function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))},hn.prototype.ignoreFallback=function(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},hn.prototype.readStyles=function(e){var t=ct.none;e:for(var n=0;n<e.length;n+=2)for(var i=null;;){var r=this.parser.matchStyle(e[n],e[n+1],this,i);if(!r)continue e;if(r.ignore)return null;if(t=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(t),!1!==r.consuming)break;i=r}return t},hn.prototype.addElementByRule=function(e,t,n){var i,r,s,o=this;t.node?(r=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(r.create(t.attrs))||this.leafFallback(e):i=this.enter(r,t.attrs,t.preserveWhitespace):(s=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(s));var a=this.top;if(r&&r.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return o.insertNode(e)}));else{var l=t.contentElement;"string"==typeof l?l=e.querySelector(l):"function"==typeof l&&(l=l(e)),l||(l=e),this.findAround(e,l,!0),this.addAll(l,i)}i&&(this.sync(a),this.open--),s&&this.removePendingMark(s,a)},hn.prototype.addAll=function(e,t,n,i){for(var r=n||0,s=n?e.childNodes[n]:e.firstChild,o=null==i?null:e.childNodes[i];s!=o;s=s.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(s),t&&sn.hasOwnProperty(s.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,r)},hn.prototype.findPlace=function(e){for(var t,n,i=this.open;i>=0;i--){var r=this.nodes[i],s=r.findWrapping(e);if(s&&(!t||t.length>s.length)&&(t=s,n=r,!s.length))break;if(r.solid)break}if(!t)return!1;this.sync(n);for(var o=0;o<t.length;o++)this.enterInner(t[o],null,!1);return!0},hn.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));for(var i=n.activeMarks,r=0;r<e.marks.length;r++)n.type&&!n.type.allowsMarkType(e.marks[r].type)||(i=e.marks[r].addToSet(i));return n.content.push(e.mark(i)),!0}return!1},hn.prototype.enter=function(e,t,n){var i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,n),i},hn.prototype.enterInner=function(e,t,n,i){this.closeExtra();var r=this.top;r.applyPending(e),r.match=r.match&&r.match.matchType(e,t);var s=null==i?-5&r.options:ln(i);4&r.options&&0==r.content.length&&(s|=4),this.nodes.push(new cn(e,t,r.activeMarks,r.pendingMarks,n,null,s)),this.open++},hn.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},hn.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},hn.prototype.sync=function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)},dn.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,i=n.length-1;i>=0;i--)e+=n[i].nodeSize;t&&e++}return e},hn.prototype.findAtPoint=function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)},hn.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},hn.prototype.findAround=function(e,t,n){if(e!=t&&this.find)for(var i=0;i<this.find.length;i++)null==this.find[i].pos&&1==e.nodeType&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)},hn.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},hn.prototype.matchesContext=function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),i=this.options.context,r=!(this.isOpen||i&&i.parent.type!=this.nodes[0].type),s=-(i?i.depth+1:0)+(r?0:1),o=function(e,a){for(;e>=0;e--){var l=n[e];if(""==l){if(e==n.length-1||0==e)continue;for(;a>=s;a--)if(o(e-1,a))return!0;return!1}var c=a>0||0==a&&r?t.nodes[a].type:i&&a>=s?i.node(a-s).type:null;if(!c||c.name!=l&&-1==c.groups.indexOf(l))return!1;a--}return!0};return o(n.length-1,this.open)},hn.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var i in this.parser.schema.nodes){var r=this.parser.schema.nodes[i];if(r.isTextblock&&r.defaultAttrs)return r}},hn.prototype.addPendingMark=function(e){var t=function(e,t){for(var n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)},hn.prototype.removePendingMark=function(e,t){for(var n=this.open;n>=0;n--){var i=this.nodes[n];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);var r=i.popFromStashMark(e);r&&i.type&&i.type.allowsMarkType(r.type)&&(i.activeMarks=r.addToSet(i.activeMarks))}if(i==t)break}},Object.defineProperties(hn.prototype,dn);var fn=function(e,t){this.nodes=e||{},this.marks=t||{}};function gn(e){var t={};for(var n in e){var i=e[n].spec.toDOM;i&&(t[n]=i)}return t}function vn(e){return e.document||window.document}fn.prototype.serializeFragment=function(e,t,n){var i=this;void 0===t&&(t={}),n||(n=vn(t).createDocumentFragment());var r=n,s=null;return e.forEach((function(e){if(s||e.marks.length){s||(s=[]);for(var n=0,o=0;n<s.length&&o<e.marks.length;){var a=e.marks[o];if(i.marks[a.type.name]){if(!a.eq(s[n])||!1===a.type.spec.spanning)break;n+=2,o++}else o++}for(;n<s.length;)r=s.pop(),s.pop();for(;o<e.marks.length;){var l=e.marks[o++],c=i.serializeMark(l,e.isInline,t);c&&(s.push(l,r),r.appendChild(c.dom),r=c.contentDOM||c.dom)}}r.appendChild(i.serializeNodeInner(e,t))})),n},fn.prototype.serializeNodeInner=function(e,t){void 0===t&&(t={});var n=fn.renderSpec(vn(t),this.nodes[e.type.name](e)),i=n.dom,r=n.contentDOM;if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,r,t):this.serializeFragment(e.content,t,r)}return i},fn.prototype.serializeNode=function(e,t){void 0===t&&(t={});for(var n=this.serializeNodeInner(e,t),i=e.marks.length-1;i>=0;i--){var r=this.serializeMark(e.marks[i],e.isInline,t);r&&((r.contentDOM||r.dom).appendChild(n),n=r.dom)}return n},fn.prototype.serializeMark=function(e,t,n){void 0===n&&(n={});var i=this.marks[e.type.name];return i&&fn.renderSpec(vn(n),i(e,t))},fn.renderSpec=function(e,t,n){if(void 0===n&&(n=null),"string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;var i=t[0],r=i.indexOf(" ");r>0&&(n=i.slice(0,r),i=i.slice(r+1));var s=null,o=n?e.createElementNS(n,i):e.createElement(i),a=t[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var c in l=2,a)if(null!=a[c]){var h=c.indexOf(" ");h>0?o.setAttributeNS(c.slice(0,h),c.slice(h+1),a[c]):o.setAttribute(c,a[c])}for(var d=l;d<t.length;d++){var u=t[d];if(0===u){if(d<t.length-1||d>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:o,contentDOM:o}}var p=fn.renderSpec(e,u,n),m=p.dom,f=p.contentDOM;if(o.appendChild(m),f){if(s)throw new RangeError("Multiple content holes");s=f}}return{dom:o,contentDOM:s}},fn.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new fn(this.nodesFromSchema(e),this.marksFromSchema(e)))},fn.nodesFromSchema=function(e){var t=gn(e.nodes);return t.text||(t.text=function(e){return e.text}),t},fn.marksFromSchema=function(e){return gn(e.marks)};var yn=Math.pow(2,16);function xn(e,t){return e+t*yn}function bn(e){return 65535&e}var wn=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},Cn=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};Cn.prototype.recover=function(e){var t=0,n=bn(e);if(!this.inverted)for(var i=0;i<n;i++)t+=this.ranges[3*i+2]-this.ranges[3*i+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/yn}(e)},Cn.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},Cn.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},Cn.prototype._map=function(e,t,n){for(var i=0,r=this.inverted?2:1,s=this.inverted?1:2,o=0;o<this.ranges.length;o+=3){var a=this.ranges[o]-(this.inverted?i:0);if(a>e)break;var l=this.ranges[o+r],c=this.ranges[o+s],h=a+l;if(e<=h){var d=a+i+((l?e==a?-1:e==h?1:t:t)<0?0:c);if(n)return d;var u=e==(t<0?a:h)?null:xn(o/3,e-a);return new wn(d,t<0?e!=a:e!=h,u)}i+=c-l}return n?e+i:new wn(e+i)},Cn.prototype.touches=function(e,t){for(var n=0,i=bn(t),r=this.inverted?2:1,s=this.inverted?1:2,o=0;o<this.ranges.length;o+=3){var a=this.ranges[o]-(this.inverted?n:0);if(a>e)break;var l=this.ranges[o+r];if(e<=a+l&&o==3*i)return!0;n+=this.ranges[o+s]-l}return!1},Cn.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,i=0,r=0;i<this.ranges.length;i+=3){var s=this.ranges[i],o=s-(this.inverted?r:0),a=s+(this.inverted?0:r),l=this.ranges[i+t],c=this.ranges[i+n];e(o,o+l,a,a+c),r+=c-l}},Cn.prototype.invert=function(){return new Cn(this.ranges,!this.inverted)},Cn.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},Cn.offset=function(e){return 0==e?Cn.empty:new Cn(e<0?[0,-e,0]:[0,0,e])},Cn.empty=new Cn([]);var _n=function(e,t,n,i){this.maps=e||[],this.from=n||0,this.to=null==i?this.maps.length:i,this.mirror=t};function An(e){var t=Error.call(this,e);return t.__proto__=An.prototype,t}_n.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new _n(this.maps,this.mirror,e,t)},_n.prototype.copy=function(){return new _n(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},_n.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},_n.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var i=e.getMirror(t);this.appendMap(e.maps[t],null!=i&&i<t?n+i:null)}},_n.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},_n.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},_n.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var i=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=i&&i>t?n-i-1:null)}},_n.prototype.invert=function(){var e=new _n;return e.appendMappingInverted(this),e},_n.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},_n.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},_n.prototype._map=function(e,t,n){for(var i=!1,r=this.from;r<this.to;r++){var s=this.maps[r].mapResult(e,t);if(null!=s.recover){var o=this.getMirror(r);if(null!=o&&o>r&&o<this.to){r=o,e=this.maps[o].recover(s.recover);continue}}s.deleted&&(i=!0),e=s.pos}return n?e:new wn(e,i)},An.prototype=Object.create(Error.prototype),An.prototype.constructor=An,An.prototype.name="TransformError";var Sn=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new _n},kn={before:{configurable:!0},docChanged:{configurable:!0}};function In(){throw new Error("Override me")}kn.before.get=function(){return this.docs.length?this.docs[0]:this.doc},Sn.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new An(t.failed);return this},Sn.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},kn.docChanged.get=function(){return this.steps.length>0},Sn.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(Sn.prototype,kn);var Pn=Object.create(null),En=function(){};En.prototype.apply=function(e){return In()},En.prototype.getMap=function(){return Cn.empty},En.prototype.invert=function(e){return In()},En.prototype.map=function(e){return In()},En.prototype.merge=function(e){return null},En.prototype.toJSON=function(){return In()},En.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=Pn[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},En.jsonID=function(e,t){if(e in Pn)throw new RangeError("Duplicate use of step JSON ID "+e);return Pn[e]=t,t.prototype.jsonID=e,t};var Tn=function(e,t){this.doc=e,this.failed=t};Tn.ok=function(e){return new Tn(e,null)},Tn.fail=function(e){return new Tn(null,e)},Tn.fromReplace=function(e,t,n,i){try{return Tn.ok(e.replace(t,n,i))}catch(e){if(e instanceof ht)return Tn.fail(e.message);throw e}};var Mn=function(e){function t(t,n,i,r){e.call(this),this.from=t,this.to=n,this.slice=i,this.structure=!!r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&Dn(e,this.from,this.to)?Tn.fail("Structure replace would overwrite content"):Tn.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new Cn([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted?null:new t(n.pos,Math.max(n.pos,i.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?dt.empty:new dt(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var i=this.slice.size+e.slice.size==0?dt.empty:new dt(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),i,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,dt.fromJSON(e,n.slice),!!n.structure)},t}(En);En.jsonID("replace",Mn);var On=function(e){function t(t,n,i,r,s,o,a){e.call(this),this.from=t,this.to=n,this.gapFrom=i,this.gapTo=r,this.slice=s,this.insert=o,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(Dn(e,this.from,this.gapFrom)||Dn(e,this.gapTo,this.to)))return Tn.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Tn.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?Tn.fromReplace(e,this.from,this.to,n):Tn.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new Cn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return n.deleted&&i.deleted||r<n.pos||s>i.pos?null:new t(n.pos,i.pos,r,s,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,dt.fromJSON(e,n.slice),n.insert,!!n.structure)},t}(En);function Dn(e,t,n){for(var i=e.resolve(t),r=n-t,s=i.depth;r>0&&s>0&&i.indexAfter(s)==i.node(s).childCount;)s--,r--;if(r>0)for(var o=i.node(s).maybeChild(i.indexAfter(s));r>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,r--}return!1}function $n(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Bn(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var i=e.$from.node(n),r=e.$from.index(n),s=e.$to.indexAfter(n);if(n<e.depth&&i.canReplace(r,s,t))return n;if(0==n||i.type.spec.isolating||!$n(i,r,s))break}}function Ln(e,t,n,i){void 0===i&&(i=e);var r=function(e,t){var n=e.parent,i=e.startIndex,r=e.endIndex,s=n.contentMatchAt(i).findWrapping(t);if(!s)return null;var o=s.length?s[0]:t;return n.canReplaceWith(i,r,o)?s:null}(e,t),s=r&&function(e,t){var n=e.parent,i=e.startIndex,r=e.endIndex,s=n.child(i),o=t.contentMatch.findWrapping(s.type);if(!o)return null;for(var a=(o.length?o[o.length-1]:t).contentMatch,l=i;a&&l<r;l++)a=a.matchType(n.child(l).type);return a&&a.validEnd?o:null}(i,t);return s?r.map(Nn).concat({type:t,attrs:n}).concat(s.map(Nn)):null}function Nn(e){return{type:e,attrs:null}}function Rn(e,t,n,i){void 0===n&&(n=1);var r=e.resolve(t),s=r.depth-n,o=i&&i[i.length-1]||r.parent;if(s<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!o.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(var a=r.depth-1,l=n-2;a>s;a--,l--){var c=r.node(a),h=r.index(a);if(c.type.spec.isolating)return!1;var d=c.content.cutByIndex(h,c.childCount),u=i&&i[l]||c;if(u!=c&&(d=d.replaceChild(0,u.type.create(u.attrs))),!c.canReplace(h+1,c.childCount)||!u.type.validContent(d))return!1}var p=r.indexAfter(s),m=i&&i[0];return r.node(s).canReplaceWith(p,p,m?m.type:r.node(s+1).type)}function Fn(e,t){var n,i,r=e.resolve(t),s=r.index();return n=r.nodeBefore,i=r.nodeAfter,n&&i&&!n.isLeaf&&n.canAppend(i)&&r.parent.canReplace(s,s+1)}function Zn(e,t,n){var i=e.resolve(t);if(!n.content.size)return t;for(var r=n.content,s=0;s<n.openStart;s++)r=r.firstChild.content;for(var o=1;o<=(0==n.openStart&&n.size?2:1);o++)for(var a=i.depth;a>=0;a--){var l=a==i.depth?0:i.pos<=(i.start(a+1)+i.end(a+1))/2?-1:1,c=i.index(a)+(l>0?1:0),h=i.node(a),d=!1;if(1==o)d=h.canReplace(c,c,r);else{var u=h.contentMatchAt(c).findWrapping(r.firstChild.type);d=u&&h.canReplaceWith(c,c,u[0])}if(d)return 0==l?i.pos:l<0?i.before(a+1):i.after(a+1)}return null}function jn(e,t,n){for(var i=[],r=0;r<e.childCount;r++){var s=e.child(r);s.content.size&&(s=s.copy(jn(s.content,t,s))),s.isInline&&(s=t(s,n,r)),i.push(s)}return rt.fromArray(i)}En.jsonID("replaceAround",On),Sn.prototype.lift=function(e,t){for(var n=e.$from,i=e.$to,r=e.depth,s=n.before(r+1),o=i.after(r+1),a=s,l=o,c=rt.empty,h=0,d=r,u=!1;d>t;d--)u||n.index(d)>0?(u=!0,c=rt.from(n.node(d).copy(c)),h++):a--;for(var p=rt.empty,m=0,f=r,g=!1;f>t;f--)g||i.after(f+1)<i.end(f)?(g=!0,p=rt.from(i.node(f).copy(p)),m++):l++;return this.step(new On(a,l,s,o,new dt(c.append(p),h,m),c.size-h,!0))},Sn.prototype.wrap=function(e,t){for(var n=rt.empty,i=t.length-1;i>=0;i--)n=rt.from(t[i].type.create(t[i].attrs,n));var r=e.start,s=e.end;return this.step(new On(r,s,r,s,new dt(n,0,0),t.length,!0))},Sn.prototype.setBlockType=function(e,t,n,i){var r=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,i)&&function(e,t,n){var i=e.resolve(t),r=i.index();return i.parent.canReplaceWith(r,r+1,n)}(r.doc,r.mapping.slice(s).map(t),n)){r.clearIncompatible(r.mapping.slice(s).map(t,1),n);var o=r.mapping.slice(s),a=o.map(t,1),l=o.map(t+e.nodeSize,1);return r.step(new On(a,l,a+1,l-1,new dt(rt.from(n.create(i,null,e.marks)),0,0),1,!0)),!1}})),this},Sn.prototype.setNodeMarkup=function(e,t,n,i){var r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at given position");t||(t=r.type);var s=t.create(n,null,i||r.marks);if(r.isLeaf)return this.replaceWith(e,e+r.nodeSize,s);if(!t.validContent(r.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new On(e,e+r.nodeSize,e+1,e+r.nodeSize-1,new dt(rt.from(s),0,0),1,!0))},Sn.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var i=this.doc.resolve(e),r=rt.empty,s=rt.empty,o=i.depth,a=i.depth-t,l=t-1;o>a;o--,l--){r=rt.from(i.node(o).copy(r));var c=n&&n[l];s=rt.from(c?c.type.create(c.attrs,s):i.node(o).copy(s))}return this.step(new Mn(e,e,new dt(r.append(s),t,t),!0))},Sn.prototype.join=function(e,t){void 0===t&&(t=1);var n=new Mn(e-t,e+t,dt.empty,!0);return this.step(n)};var zn=function(e){function t(t,n,i){e.call(this),this.from=t,this.to=n,this.mark=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),i=e.resolve(this.from),r=i.node(i.sharedDepth(this.to)),s=new dt(jn(n.content,(function(e,n){return e.isAtom&&n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),r),n.openStart,n.openEnd);return Tn.fromReplace(e,this.from,this.to,s)},t.prototype.invert=function(){return new Un(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new t(n.pos,i.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(En);En.jsonID("addMark",zn);var Un=function(e){function t(t,n,i){e.call(this),this.from=t,this.to=n,this.mark=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),i=new dt(jn(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return Tn.fromReplace(e,this.from,this.to,i)},t.prototype.invert=function(){return new zn(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new t(n.pos,i.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(En);function Hn(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}En.jsonID("removeMark",Un),Sn.prototype.addMark=function(e,t,n){var i=this,r=[],s=[],o=null,a=null;return this.doc.nodesBetween(e,t,(function(i,l,c){if(i.isInline){var h=i.marks;if(!n.isInSet(h)&&c.type.allowsMarkType(n.type)){for(var d=Math.max(l,e),u=Math.min(l+i.nodeSize,t),p=n.addToSet(h),m=0;m<h.length;m++)h[m].isInSet(p)||(o&&o.to==d&&o.mark.eq(h[m])?o.to=u:r.push(o=new Un(d,u,h[m])));a&&a.to==d?a.to=u:s.push(a=new zn(d,u,n))}}})),r.forEach((function(e){return i.step(e)})),s.forEach((function(e){return i.step(e)})),this},Sn.prototype.removeMark=function(e,t,n){var i=this;void 0===n&&(n=null);var r=[],s=0;return this.doc.nodesBetween(e,t,(function(i,o){if(i.isInline){s++;var a=null;if(n instanceof en)for(var l,c=i.marks;l=n.isInSet(c);)(a||(a=[])).push(l),c=l.removeFromSet(c);else n?n.isInSet(i.marks)&&(a=[n]):a=i.marks;if(a&&a.length)for(var h=Math.min(o+i.nodeSize,t),d=0;d<a.length;d++){for(var u=a[d],p=void 0,m=0;m<r.length;m++){var f=r[m];f.step==s-1&&u.eq(r[m].style)&&(p=f)}p?(p.to=h,p.step=s):r.push({style:u,from:Math.max(o,e),to:h,step:s})}}})),r.forEach((function(e){return i.step(new Un(e.from,e.to,e.style))})),this},Sn.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var i=this.doc.nodeAt(e),r=[],s=e+1,o=0;o<i.childCount;o++){var a=i.child(o),l=s+a.nodeSize,c=n.matchType(a.type,a.attrs);if(c){n=c;for(var h=0;h<a.marks.length;h++)t.allowsMarkType(a.marks[h].type)||this.step(new Un(s,l,a.marks[h]))}else r.push(new Mn(s,l,dt.empty));s=l}if(!n.validEnd){var d=n.fillBefore(rt.empty,!0);this.replace(s,s,new dt(d,0,0))}for(var u=r.length-1;u>=0;u--)this.step(r[u]);return this},Sn.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=dt.empty);var i=function(e,t,n,i){if(void 0===n&&(n=t),void 0===i&&(i=dt.empty),t==n&&!i.size)return null;var r=e.resolve(t),s=e.resolve(n);return Hn(r,s,i)?new Mn(t,n,i):new Vn(r,s,i).fit()}(this.doc,e,t,n);return i&&this.step(i),this},Sn.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new dt(rt.from(n),0,0))},Sn.prototype.delete=function(e,t){return this.replace(e,t,dt.empty)},Sn.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var Vn=function(e,t,n){this.$to=t,this.$from=e,this.unplaced=n,this.frontier=[];for(var i=0;i<=e.depth;i++){var r=e.node(i);this.frontier.push({type:r.type,match:r.contentMatchAt(e.indexAfter(i))})}this.placed=rt.empty;for(var s=e.depth;s>0;s--)this.placed=rt.from(e.node(s).copy(this.placed))},qn={depth:{configurable:!0}};function Gn(e,t,n){return 0==t?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(Gn(e.firstChild.content,t-1,n)))}function Wn(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Wn(e.lastChild.content,t-1,n)))}function Kn(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function Jn(e,t,n){if(t<=0)return e;var i=e.content;return t>1&&(i=i.replaceChild(0,Jn(i.firstChild,t-1,1==i.childCount?n-1:0))),t>0&&(i=e.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(e.type.contentMatch.matchFragment(i).fillBefore(rt.empty,!0)))),e.copy(i)}function Yn(e,t,n,i,r){var s=e.node(t),o=r?e.indexAfter(t):e.index(t);if(o==s.childCount&&!n.compatibleContent(s.type))return null;var a=i.fillBefore(s.content,!0,o);return a&&!function(e,t,n){for(var i=n;i<t.childCount;i++)if(!e.allowsMarks(t.child(i).marks))return!0;return!1}(n,s.content,o)?a:null}function Qn(e,t,n,i,r){if(t<n){var s=e.firstChild;e=e.replaceChild(0,s.copy(Qn(s.content,t+1,n,i,s)))}if(t>i){var o=r.contentMatchAt(0),a=o.fillBefore(e).append(e);e=a.append(o.matchFragment(a).fillBefore(rt.empty,!0))}return e}function Xn(e,t){for(var n=[],i=Math.min(e.depth,t.depth);i>=0;i--){var r=e.start(i);if(r<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(r==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==r-1)&&n.push(i)}return n}qn.depth.get=function(){return this.frontier.length-1},Vn.prototype.fit=function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(t<0?this.$to:i.doc.resolve(t));if(!r)return null;for(var s=this.placed,o=i.depth,a=r.depth;o&&a&&1==s.childCount;)s=s.firstChild.content,o--,a--;var l=new dt(s,o,a);return t>-1?new On(i.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||i.pos!=this.$to.pos?new Mn(i.pos,r.pos,l):void 0},Vn.prototype.findFittable=function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--)for(var n=void 0,i=(t?(n=Kn(this.unplaced.content,t-1).firstChild).content:this.unplaced.content).firstChild,r=this.depth;r>=0;r--){var s=this.frontier[r],o=s.type,a=s.match,l=void 0,c=void 0;if(1==e&&(i?a.matchType(i.type)||(c=a.fillBefore(rt.from(i),!1)):o.compatibleContent(n.type)))return{sliceDepth:t,frontierDepth:r,parent:n,inject:c};if(2==e&&i&&(l=a.findWrapping(i.type)))return{sliceDepth:t,frontierDepth:r,parent:n,wrap:l};if(n&&a.matchType(n.type))break}},Vn.prototype.openMore=function(){var e=this.unplaced,t=e.content,n=e.openStart,i=e.openEnd,r=Kn(t,n);return!(!r.childCount||r.firstChild.isLeaf||(this.unplaced=new dt(t,n+1,Math.max(i,r.size+n>=t.size-i?n+1:0)),0))},Vn.prototype.dropNode=function(){var e=this.unplaced,t=e.content,n=e.openStart,i=e.openEnd,r=Kn(t,n);if(r.childCount<=1&&n>0){var s=t.size-n<=n+r.size;this.unplaced=new dt(Gn(t,n-1,1),n-1,s?n-1:i)}else this.unplaced=new dt(Gn(t,n,1),n,i)},Vn.prototype.placeNodes=function(e){for(var t=e.sliceDepth,n=e.frontierDepth,i=e.parent,r=e.inject,s=e.wrap;this.depth>n;)this.closeFrontierNode();if(s)for(var o=0;o<s.length;o++)this.openFrontierNode(s[o]);var a=this.unplaced,l=i?i.content:a.content,c=a.openStart-t,h=0,d=[],u=this.frontier[n],p=u.match,m=u.type;if(r){for(var f=0;f<r.childCount;f++)d.push(r.child(f));p=p.matchFragment(r)}for(var g=l.size+t-(a.content.size-a.openEnd);h<l.childCount;){var v=l.child(h),y=p.matchType(v.type);if(!y)break;(++h>1||0==c||v.content.size)&&(p=y,d.push(Jn(v.mark(m.allowedMarks(v.marks)),1==h?c:0,h==l.childCount?g:-1)))}var x=h==l.childCount;x||(g=-1),this.placed=Wn(this.placed,n,rt.from(d)),this.frontier[n].match=p,x&&g<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var b=0,w=l;b<g;b++){var C=w.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),w=C.content}this.unplaced=x?0==t?dt.empty:new dt(Gn(a.content,t-1,1),t-1,g<0?a.openEnd:t-1):new dt(Gn(a.content,t,h),a.openStart,a.openEnd)},Vn.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!Yn(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to.depth,i=this.$to.after(n);n>1&&i==this.$to.end(--n);)++i;return i},Vn.prototype.findCloseLevel=function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],i=n.match,r=n.type,s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=Yn(e,t,r,i,s);if(o){for(var a=t-1;a>=0;a--){var l=this.frontier[a],c=l.match,h=Yn(e,a,l.type,c,!0);if(!h||h.childCount)continue e}return{depth:t,fit:o,move:s?e.doc.resolve(e.after(t+1)):e}}}},Vn.prototype.close=function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Wn(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var i=e.node(n),r=i.type.contentMatch.fillBefore(i.content,!0,e.index(n));this.openFrontierNode(i.type,i.attrs,r)}return e},Vn.prototype.openFrontierNode=function(e,t,n){var i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Wn(this.placed,this.depth,rt.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})},Vn.prototype.closeFrontierNode=function(){var e=this.frontier.pop().match.fillBefore(rt.empty,!0);e.childCount&&(this.placed=Wn(this.placed,this.frontier.length,e))},Object.defineProperties(Vn.prototype,qn),Sn.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var i=this.doc.resolve(e),r=this.doc.resolve(t);if(Hn(i,r,n))return this.step(new Mn(e,t,n));var s=Xn(i,this.doc.resolve(t));0==s[s.length-1]&&s.pop();var o=-(i.depth+1);s.unshift(o);for(var a=i.depth,l=i.pos-1;a>0;a--,l--){var c=i.node(a).type.spec;if(c.defining||c.isolating)break;s.indexOf(a)>-1?o=a:i.before(a)==l&&s.splice(1,0,-a)}for(var h=s.indexOf(o),d=[],u=n.openStart,p=n.content,m=0;;m++){var f=p.firstChild;if(d.push(f),m==n.openStart)break;p=f.content}u>0&&d[u-1].type.spec.defining&&i.node(h).type!=d[u-1].type?u-=1:u>=2&&d[u-1].isTextblock&&d[u-2].type.spec.defining&&i.node(h).type!=d[u-2].type&&(u-=2);for(var g=n.openStart;g>=0;g--){var v=(g+u+1)%(n.openStart+1),y=d[v];if(y)for(var x=0;x<s.length;x++){var b=s[(x+h)%s.length],w=!0;b<0&&(w=!1,b=-b);var C=i.node(b-1),_=i.index(b-1);if(C.canReplaceWith(_,_,y.type,y.marks))return this.replace(i.before(b),w?r.after(b):t,new dt(Qn(n.content,0,n.openStart,v),v,n.openEnd))}}for(var A=this.steps.length,S=s.length-1;S>=0&&(this.replace(e,t,n),!(this.steps.length>A));S--){var k=s[S];k<0||(e=i.before(k),t=r.after(k))}return this},Sn.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var i=function(e,t,n){var i=e.resolve(t);if(i.parent.canReplaceWith(i.index(),i.index(),n))return t;if(0==i.parentOffset)for(var r=i.depth-1;r>=0;r--){var s=i.index(r);if(i.node(r).canReplaceWith(s,s,n))return i.before(r+1);if(s>0)return null}if(i.parentOffset==i.parent.content.size)for(var o=i.depth-1;o>=0;o--){var a=i.indexAfter(o);if(i.node(o).canReplaceWith(a,a,n))return i.after(o+1);if(a<i.node(o).childCount)return null}}(this.doc,e,n.type);null!=i&&(e=t=i)}return this.replaceRange(e,t,new dt(rt.from(n),0,0))},Sn.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),i=this.doc.resolve(t),r=Xn(n,i),s=0;s<r.length;s++){var o=r[s],a=s==r.length-1;if(a&&0==o||n.node(o).type.contentMatch.validEnd)return this.delete(n.start(o),i.end(o));if(o>0&&(a||n.node(o-1).canReplace(n.index(o-1),i.indexAfter(o-1))))return this.delete(n.before(o),i.after(o))}for(var l=1;l<=n.depth&&l<=i.depth;l++)if(e-n.start(l)==n.depth-l&&t>n.end(l)&&i.end(l)-t!=i.depth-l)return this.delete(n.before(l),t);return this.delete(e,t)};var ei=Object.create(null),ti=function(e,t,n){this.ranges=n||[new ii(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},ni={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};ni.anchor.get=function(){return this.$anchor.pos},ni.head.get=function(){return this.$head.pos},ni.from.get=function(){return this.$from.pos},ni.to.get=function(){return this.$to.pos},ni.$from.get=function(){return this.ranges[0].$from},ni.$to.get=function(){return this.ranges[0].$to},ni.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},ti.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},ti.prototype.replace=function(e,t){void 0===t&&(t=dt.empty);for(var n=t.content.lastChild,i=null,r=0;r<t.openEnd;r++)i=n,n=n.lastChild;for(var s=e.steps.length,o=this.ranges,a=0;a<o.length;a++){var l=o[a],c=l.$from,h=l.$to,d=e.mapping.slice(s);e.replaceRange(d.map(c.pos),d.map(h.pos),a?dt.empty:t),0==a&&di(e,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}},ti.prototype.replaceWith=function(e,t){for(var n=e.steps.length,i=this.ranges,r=0;r<i.length;r++){var s=i[r],o=s.$from,a=s.$to,l=e.mapping.slice(n),c=l.map(o.pos),h=l.map(a.pos);r?e.deleteRange(c,h):(e.replaceRangeWith(c,h,t),di(e,n,t.isInline?-1:1))}},ti.findFrom=function(e,t,n){var i=e.parent.inlineContent?new ri(e):hi(e.node(0),e.parent,e.pos,e.index(),t,n);if(i)return i;for(var r=e.depth-1;r>=0;r--){var s=t<0?hi(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):hi(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(s)return s}},ti.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new li(e.node(0))},ti.atStart=function(e){return hi(e,e,0,0,1)||new li(e)},ti.atEnd=function(e){return hi(e,e,e.content.size,e.childCount,-1)||new li(e)},ti.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=ei[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)},ti.jsonID=function(e,t){if(e in ei)throw new RangeError("Duplicate use of selection JSON ID "+e);return ei[e]=t,t.prototype.jsonID=e,t},ti.prototype.getBookmark=function(){return ri.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(ti.prototype,ni),ti.prototype.visible=!0;var ii=function(e,t){this.$from=e,this.$to=t},ri=function(e){function t(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(n,i){var r=n.resolve(i.map(this.head));if(!r.parent.inlineContent)return e.near(r);var s=n.resolve(i.map(this.anchor));return new t(s.parent.inlineContent?s:r,r)},t.prototype.replace=function(t,n){if(void 0===n&&(n=dt.empty),e.prototype.replace.call(this,t,n),n==dt.empty){var i=this.$from.marksAcross(this.$to);i&&t.ensureMarks(i)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new si(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,t,n){void 0===n&&(n=t);var i=e.resolve(t);return new this(i,n==t?i:e.resolve(n))},t.between=function(n,i,r){var s=n.pos-i.pos;if(r&&!s||(r=s>=0?1:-1),!i.parent.inlineContent){var o=e.findFrom(i,r,!0)||e.findFrom(i,-r,!0);if(!o)return e.near(i,r);i=o.$head}return n.parent.inlineContent||(0==s||(n=(e.findFrom(n,-r,!0)||e.findFrom(n,r,!0)).$anchor).pos<i.pos!=s<0)&&(n=i),new t(n,i)},Object.defineProperties(t.prototype,n),t}(ti);ti.jsonID("text",ri);var si=function(e,t){this.anchor=e,this.head=t};si.prototype.map=function(e){return new si(e.map(this.anchor),e.map(this.head))},si.prototype.resolve=function(e){return ri.between(e.resolve(this.anchor),e.resolve(this.head))};var oi=function(e){function t(t){var n=t.nodeAfter,i=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,i),this.node=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,i){var r=i.mapResult(this.anchor),s=r.deleted,o=r.pos,a=n.resolve(o);return s?e.near(a):new t(a)},t.prototype.content=function(){return new dt(rt.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new ai(this.anchor)},t.fromJSON=function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(ti);oi.prototype.visible=!1,ti.jsonID("node",oi);var ai=function(e){this.anchor=e};ai.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.deleted,i=t.pos;return n?new si(i,i):new ai(i)},ai.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&oi.isSelectable(n)?new oi(t):ti.near(t)};var li=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(t,n){if(void 0===n&&(n=dt.empty),n==dt.empty){t.delete(0,t.doc.content.size);var i=e.atStart(t.doc);i.eq(t.selection)||t.setSelection(i)}else e.prototype.replace.call(this,t,n)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return ci},t}(ti);ti.jsonID("all",li);var ci={map:function(){return this},resolve:function(e){return new li(e)}};function hi(e,t,n,i,r,s){if(t.inlineContent)return ri.create(e,n);for(var o=i-(r>0?0:1);r>0?o<t.childCount:o>=0;o+=r){var a=t.child(o);if(a.isAtom){if(!s&&oi.isSelectable(a))return oi.create(e,n-(r<0?a.nodeSize:0))}else{var l=hi(e,a,n+r,r<0?a.childCount:0,r,s);if(l)return l}n+=a.nodeSize*r}}function di(e,t,n){var i=e.steps.length-1;if(!(i<t)){var r,s=e.steps[i];(s instanceof Mn||s instanceof On)&&(e.mapping.maps[i].forEach((function(e,t,n,i){null==r&&(r=i)})),e.setSelection(ti.near(e.doc.resolve(r),n)))}}var ui=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=2,this},t.prototype.ensureMarks=function(e){return ct.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},t.prototype.addStep=function(t,n){e.prototype.addStep.call(this,t,n),this.updated=-3&this.updated,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||ct.none))),n.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,n){void 0===n&&(n=t);var i=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var r=this.storedMarks;if(!r){var s=this.doc.resolve(t);r=n==t?s.marks():s.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,i.text(e,r)),this.selection.empty||this.setSelection(ti.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},n.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(t.prototype,n),t}(Sn);function pi(e,t){return t&&e?e.bind(t):e}var mi=function(e,t,n){this.name=e,this.init=pi(t.init,n),this.apply=pi(t.apply,n)},fi=[new mi("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new mi("selection",{init:function(e,t){return e.selection||ti.atStart(t.doc)},apply:function(e){return e.selection}}),new mi("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,i){return i.selection.$cursor?e.storedMarks:null}}),new mi("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],gi=function(e,t){var n=this;this.schema=e,this.fields=fi.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),n.pluginsByKey[e.key]=e,e.spec.state&&n.fields.push(new mi(e.key,e.spec.state,e))}))},vi=function(e){this.config=e},yi={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};yi.schema.get=function(){return this.config.schema},yi.plugins.get=function(){return this.config.plugins},vi.prototype.apply=function(e){return this.applyTransaction(e).state},vi.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0},vi.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),i=null;;){for(var r=!1,s=0;s<this.config.plugins.length;s++){var o=this.config.plugins[s];if(o.spec.appendTransaction){var a=i?i[s].n:0,l=i?i[s].state:this,c=a<t.length&&o.spec.appendTransaction.call(o,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(var h=0;h<this.config.plugins.length;h++)i.push(h<s?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),r=!0}i&&(i[s]={state:n,n:t.length})}}if(!r)return{state:n,transactions:t}}},vi.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new vi(this.config),n=this.config.fields,i=0;i<n.length;i++){var r=n[i];t[r.name]=r.apply(e,this[r.name],this,t)}for(var s=0;s<xi.length;s++)xi[s](this,e,t);return t},yi.tr.get=function(){return new ui(this)},vi.create=function(e){for(var t=new gi(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new vi(t),i=0;i<t.fields.length;i++)n[t.fields[i].name]=t.fields[i].init(e,n);return n},vi.prototype.reconfigure=function(e){for(var t=new gi(this.schema,e.plugins),n=t.fields,i=new vi(t),r=0;r<n.length;r++){var s=n[r].name;i[s]=this.hasOwnProperty(s)?this[s]:n[r].init(e,i)}return i},vi.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var i=e[n],r=i.spec.state;r&&r.toJSON&&(t[n]=r.toJSON.call(i,this[i.key]))}return t},vi.fromJSON=function(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var i=new gi(e.schema,e.plugins),r=new vi(i);return i.fields.forEach((function(i){if("doc"==i.name)r.doc=Ot.fromJSON(e.schema,t.doc);else if("selection"==i.name)r.selection=ti.fromJSON(r.doc,t.selection);else if("storedMarks"==i.name)t.storedMarks&&(r.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var s in n){var o=n[s],a=o.spec.state;if(o.key==i.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,s))return void(r[i.name]=a.fromJSON.call(o,e,t[s],r))}r[i.name]=i.init(e,r)}})),r},vi.addApplyListener=function(e){xi.push(e)},vi.removeApplyListener=function(e){var t=xi.indexOf(e);t>-1&&xi.splice(t,1)},Object.defineProperties(vi.prototype,yi);var xi=[];function bi(e,t,n){for(var i in e){var r=e[i];r instanceof Function?r=r.bind(t):"handleDOMEvents"==i&&(r=bi(r,t,{})),n[i]=r}return n}var wi=function(e){this.props={},e.props&&bi(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:_i("plugin")};wi.prototype.getState=function(e){return e[this.key]};var Ci=Object.create(null);function _i(e){return e in Ci?e+"$"+ ++Ci[e]:(Ci[e]=0,e+"$")}var Ai=function(e){void 0===e&&(e="key"),this.key=_i(e)};Ai.prototype.get=function(e){return e.config.pluginsByKey[this.key]},Ai.prototype.getState=function(e){return e[this.key]};var Si={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var ki=/Edge\/(\d+)/.exec(navigator.userAgent),Ii=/MSIE \d/.test(navigator.userAgent),Pi=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Ei=Si.ie=!!(Ii||Pi||ki);Si.ie_version=Ii?document.documentMode||6:Pi?+Pi[1]:ki?+ki[1]:null,Si.gecko=!Ei&&/gecko\/(\d+)/i.test(navigator.userAgent),Si.gecko_version=Si.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var Ti=!Ei&&/Chrome\/(\d+)/.exec(navigator.userAgent);Si.chrome=!!Ti,Si.chrome_version=Ti&&+Ti[1],Si.safari=!Ei&&/Apple Computer/.test(navigator.vendor),Si.ios=Si.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),Si.mac=Si.ios||/Mac/.test(navigator.platform),Si.android=/Android \d/.test(navigator.userAgent),Si.webkit="webkitFontSmoothing"in document.documentElement.style,Si.webkit_version=Si.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var Mi=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},Oi=function(e){var t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},Di=null,$i=function(e,t,n){var i=Di||(Di=document.createRange());return i.setEnd(e,null==n?e.nodeValue.length:n),i.setStart(e,t||0),i},Bi=function(e,t,n,i){return n&&(Ni(e,t,n,i,-1)||Ni(e,t,n,i,1))},Li=/^(img|br|input|textarea|hr)$/i;function Ni(e,t,n,i,r){for(;;){if(e==n&&t==i)return!0;if(t==(r<0?0:Ri(e))){var s=e.parentNode;if(1!=s.nodeType||Fi(e)||Li.test(e.nodeName)||"false"==e.contentEditable)return!1;t=Mi(e)+(r<0?0:1),e=s}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(r<0?-1:0)]).contentEditable)return!1;t=r<0?Ri(e):0}}}function Ri(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Fi(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var Zi=function(e){var t=e.isCollapsed;return t&&Si.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function ji(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function zi(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Ui(e,t){return"number"==typeof e?e:e[t]}function Hi(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,i=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*i}}function Vi(e,t,n){for(var i=e.someProp("scrollThreshold")||0,r=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument,o=n||e.dom;o;o=Oi(o))if(1==o.nodeType){var a=o==s.body||1!=o.nodeType,l=a?zi(s):Hi(o),c=0,h=0;if(t.top<l.top+Ui(i,"top")?h=-(l.top-t.top+Ui(r,"top")):t.bottom>l.bottom-Ui(i,"bottom")&&(h=t.bottom-l.bottom+Ui(r,"bottom")),t.left<l.left+Ui(i,"left")?c=-(l.left-t.left+Ui(r,"left")):t.right>l.right-Ui(i,"right")&&(c=t.right-l.right+Ui(r,"right")),c||h)if(a)s.defaultView.scrollBy(c,h);else{var d=o.scrollLeft,u=o.scrollTop;h&&(o.scrollTop+=h),c&&(o.scrollLeft+=c);var p=o.scrollLeft-d,m=o.scrollTop-u;t={left:t.left-p,top:t.top-m,right:t.right-p,bottom:t.bottom-m}}if(a)break}}function qi(e){for(var t=[],n=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=n);e=Oi(e));return t}function Gi(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=i.dom,s=i.top,o=i.left;r.scrollTop!=s+t&&(r.scrollTop=s+t),r.scrollLeft!=o&&(r.scrollLeft=o)}}var Wi=null;function Ki(e,t){for(var n,i,r=2e8,s=0,o=t.top,a=t.top,l=e.firstChild,c=0;l;l=l.nextSibling,c++){var h=void 0;if(1==l.nodeType)h=l.getClientRects();else{if(3!=l.nodeType)continue;h=$i(l).getClientRects()}for(var d=0;d<h.length;d++){var u=h[d];if(u.top<=o&&u.bottom>=a){o=Math.max(u.bottom,o),a=Math.min(u.top,a);var p=u.left>t.left?u.left-t.left:u.right<t.left?t.left-u.right:0;if(p<r){n=l,r=p,i=p&&3==n.nodeType?{left:u.right<t.left?u.right:u.left,top:t.top}:t,1==l.nodeType&&p&&(s=c+(t.left>=(u.left+u.right)/2?1:0));continue}}!n&&(t.left>=u.right&&t.top>=u.top||t.left>=u.left&&t.top>=u.bottom)&&(s=c+1)}}return n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,i=document.createRange(),r=0;r<n;r++){i.setEnd(e,r+1),i.setStart(e,r);var s=Xi(i,1);if(s.top!=s.bottom&&Ji(t,s))return{node:e,offset:r+(t.left>=(s.left+s.right)/2?1:0)}}return{node:e,offset:0}}(n,i):!n||r&&1==n.nodeType?{node:e,offset:s}:Ki(n,i)}function Ji(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Yi(e,t,n){var i=e.childNodes.length;if(i&&n.top<n.bottom)for(var r=Math.max(0,Math.min(i-1,Math.floor(i*(t.top-n.top)/(n.bottom-n.top))-2)),s=r;;){var o=e.childNodes[s];if(1==o.nodeType)for(var a=o.getClientRects(),l=0;l<a.length;l++){var c=a[l];if(Ji(t,c))return Yi(o,t,c)}if((s=(s+1)%i)==r)break}return e}function Qi(e,t){var n,i,r,s,o=e.dom.ownerDocument;if(o.caretPositionFromPoint)try{var a=o.caretPositionFromPoint(t.left,t.top);a&&(r=(n=a).offsetNode,s=n.offset)}catch(e){}if(!r&&o.caretRangeFromPoint){var l=o.caretRangeFromPoint(t.left,t.top);l&&(r=(i=l).startContainer,s=i.startOffset)}var c,h=(e.root.elementFromPoint?e.root:o).elementFromPoint(t.left,t.top+1);if(!h||!e.dom.contains(1!=h.nodeType?h.parentNode:h)){var d=e.dom.getBoundingClientRect();if(!Ji(t,d))return null;if(!(h=Yi(e.dom,t,d)))return null}if(Si.safari)for(var u=h;r&&u;u=Oi(u))u.draggable&&(r=s=null);if(h=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(h,t),r){if(Si.gecko&&1==r.nodeType&&(s=Math.min(s,r.childNodes.length))<r.childNodes.length){var p,m=r.childNodes[s];"IMG"==m.nodeName&&(p=m.getBoundingClientRect()).right<=t.left&&p.bottom>t.top&&s++}r==e.dom&&s==r.childNodes.length-1&&1==r.lastChild.nodeType&&t.top>r.lastChild.getBoundingClientRect().bottom?c=e.state.doc.content.size:0!=s&&1==r.nodeType&&"BR"==r.childNodes[s-1].nodeName||(c=function(e,t,n,i){for(var r=-1,s=t;s!=e.dom;){var o=e.docView.nearestDesc(s,!0);if(!o)return null;if(o.node.isBlock&&o.parent){var a=o.dom.getBoundingClientRect();if(a.left>i.left||a.top>i.top)r=o.posBefore;else{if(!(a.right<i.left||a.bottom<i.top))break;r=o.posAfter}}s=o.dom.parentNode}return r>-1?r:e.docView.posFromDOM(t,n)}(e,r,s,t))}null==c&&(c=function(e,t,n){var i=Ki(t,n),r=i.node,s=i.offset,o=-1;if(1==r.nodeType&&!r.firstChild){var a=r.getBoundingClientRect();o=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(r,s,o)}(e,h,t));var f=e.docView.nearestDesc(h,!0);return{pos:c,inside:f?f.posAtStart-f.border:-1}}function Xi(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}var er=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function tr(e,t,n){var i=e.docView.domFromPos(t,n<0?-1:1),r=i.node,s=i.offset,o=Si.webkit||Si.gecko;if(3==r.nodeType){if(!o||!er.test(r.nodeValue)&&(n<0?s:s!=r.nodeValue.length)){var a=s,l=s,c=n<0?1:-1;return n<0&&!s?(l++,c=-1):n>=0&&s==r.nodeValue.length?(a--,c=1):n<0?a--:l++,nr(Xi($i(r,a,l),c),c<0)}var h=Xi($i(r,s,s),n);if(Si.gecko&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){var d=Xi($i(r,s-1,s-1),-1);if(d.top==h.top){var u=Xi($i(r,s,s+1),-1);if(u.top!=h.top)return nr(u,u.left<d.left)}}return h}if(!e.state.doc.resolve(t).parent.inlineContent){if(s&&(n<0||s==Ri(r))){var p=r.childNodes[s-1];if(1==p.nodeType)return ir(p.getBoundingClientRect(),!1)}if(s<Ri(r)){var m=r.childNodes[s];if(1==m.nodeType)return ir(m.getBoundingClientRect(),!0)}return ir(r.getBoundingClientRect(),n>=0)}if(s&&(n<0||s==Ri(r))){var f=r.childNodes[s-1],g=3==f.nodeType?$i(f,Ri(f)-(o?0:1)):1!=f.nodeType||"BR"==f.nodeName&&f.nextSibling?null:f;if(g)return nr(Xi(g,1),!1)}if(s<Ri(r)){for(var v=r.childNodes[s];v.pmViewDesc&&v.pmViewDesc.ignoreForCoords;)v=v.nextSibling;var y=v?3==v.nodeType?$i(v,0,o?0:1):1==v.nodeType?v:null:null;if(y)return nr(Xi(y,-1),!0)}return nr(Xi(3==r.nodeType?$i(r):r,-n),n>=0)}function nr(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function ir(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function rr(e,t,n){var i=e.state,r=e.root.activeElement;i!=t&&e.updateState(t),r!=e.dom&&e.focus();try{return n()}finally{i!=t&&e.updateState(i),r!=e.dom&&r&&r.focus()}}var sr=/[\u0590-\u08ac]/,or=null,ar=null,lr=!1;var cr=function(e,t,n,i){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=i,this.dirty=0},hr={size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};cr.prototype.matchesWidget=function(){return!1},cr.prototype.matchesMark=function(){return!1},cr.prototype.matchesNode=function(){return!1},cr.prototype.matchesHack=function(e){return!1},cr.prototype.parseRule=function(){return null},cr.prototype.stopEvent=function(){return!1},hr.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},hr.border.get=function(){return 0},cr.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},cr.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var i=this.children[t];if(i==e)return n;n+=i.size}},hr.posBefore.get=function(){return this.parent.posBeforeChild(this)},hr.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},hr.posAfter.get=function(){return this.posBefore+this.size},hr.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},cr.prototype.localPosFromDOM=function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var i,r;if(e==this.contentDOM)i=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&(!(r=i.pmViewDesc)||r.parent!=this);)i=i.previousSibling;return i?this.posBeforeChild(r)+r.size:this.posAtStart}var s,o;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&(!(o=s.pmViewDesc)||o.parent!=this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}var a;if(e==this.dom&&this.contentDOM)a=t>Mi(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var l=e;;l=l.parentNode){if(l==this.dom){a=!1;break}if(l.parentNode.firstChild!=l)break}if(null==a&&t==e.childNodes.length)for(var c=e;;c=c.parentNode){if(c==this.dom){a=!0;break}if(c.parentNode.lastChild!=c)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},cr.prototype.nearestDesc=function(e,t){for(var n=!0,i=e;i;i=i.parentNode){var r=this.getDesc(i);if(r&&(!t||r.node)){if(!n||!r.nodeDOM||(1==r.nodeDOM.nodeType?r.nodeDOM.contains(1==e.nodeType?e:e.parentNode):r.nodeDOM==e))return r;n=!1}}},cr.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},cr.prototype.posFromDOM=function(e,t,n){for(var i=e;i;i=i.parentNode){var r=this.getDesc(i);if(r)return r.localPosFromDOM(e,t,n)}return-1},cr.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var i=this.children[t],r=n+i.size;if(n==e&&r!=n){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<r)return i.descAt(e-n-i.border);n=r}},cr.prototype.domFromPos=function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,i=0,r=0;n<this.children.length;n++){var s=this.children[n],o=r+s.size;if(o>e||s instanceof yr){i=e-r;break}r=o}if(i)return this.children[n].domFromPos(i-this.children[n].border,t);for(var a=void 0;n&&!(a=this.children[n-1]).size&&a instanceof ur&&a.widget.type.side>=0;n--);if(t<=0){for(var l,c=!0;(l=n?this.children[n-1]:null)&&l.dom.parentNode!=this.contentDOM;n--,c=!1);return l&&t&&c&&!l.border&&!l.domAtom?l.domFromPos(l.size,t):{node:this.contentDOM,offset:l?Mi(l.dom)+1:0}}for(var h,d=!0;(h=n<this.children.length?this.children[n]:null)&&h.dom.parentNode!=this.contentDOM;n++,d=!1);return h&&d&&!h.border&&!h.domAtom?h.domFromPos(0,t):{node:this.contentDOM,offset:h?Mi(h.dom):this.contentDOM.childNodes.length}},cr.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var i=-1,r=-1,s=n,o=0;;o++){var a=this.children[o],l=s+a.size;if(-1==i&&e<=l){var c=s+a.border;if(e>=c&&t<=l-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,c);e=s;for(var h=o;h>0;h--){var d=this.children[h-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=Mi(d.dom)+1;break}e-=d.size}-1==i&&(i=0)}if(i>-1&&(l>t||o==this.children.length-1)){t=l;for(var u=o+1;u<this.children.length;u++){var p=this.children[u];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){r=Mi(p.dom);break}t+=p.size}-1==r&&(r=this.contentDOM.childNodes.length);break}s=l}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:r}},cr.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},cr.prototype.domAfterPos=function(e){var t=this.domFromPos(e,0),n=t.node,i=t.offset;if(1!=n.nodeType||i==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[i]},cr.prototype.setSelection=function(e,t,n,i){for(var r=Math.min(e,t),s=Math.max(e,t),o=0,a=0;o<this.children.length;o++){var l=this.children[o],c=a+l.size;if(r>a&&s<c)return l.setSelection(e-a-l.border,t-a-l.border,n,i);a=c}var h=this.domFromPos(e,e?-1:1),d=t==e?h:this.domFromPos(t,t?-1:1),u=n.getSelection(),p=!1;if((Si.gecko||Si.safari)&&e==t){var m=h.node,f=h.offset;if(3==m.nodeType){if((p=f&&"\n"==m.nodeValue[f-1])&&f==m.nodeValue.length)for(var g=m,v=void 0;g;g=g.parentNode){if(v=g.nextSibling){"BR"==v.nodeName&&(h=d={node:v.parentNode,offset:Mi(v)+1});break}var y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{var x=m.childNodes[f-1];p=x&&("BR"==x.nodeName||"false"==x.contentEditable)}}if(Si.gecko&&u.focusNode&&u.focusNode!=d.node&&1==u.focusNode.nodeType){var b=u.focusNode.childNodes[u.focusOffset];b&&"false"==b.contentEditable&&(i=!0)}if(i||p&&Si.safari||!Bi(h.node,h.offset,u.anchorNode,u.anchorOffset)||!Bi(d.node,d.offset,u.focusNode,u.focusOffset)){var w=!1;if((u.extend||e==t)&&!p){u.collapse(h.node,h.offset);try{e!=t&&u.extend(d.node,d.offset),w=!0}catch(e){if(!(e instanceof DOMException))throw e}}if(!w){if(e>t){var C=h;h=d,d=C}var _=document.createRange();_.setEnd(d.node,d.offset),_.setStart(h.node,h.offset),u.removeAllRanges(),u.addRange(_)}}},cr.prototype.ignoreMutation=function(e){return!this.contentDOM&&"selection"!=e.type},hr.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},cr.prototype.markDirty=function(e,t){for(var n=0,i=0;i<this.children.length;i++){var r=this.children[i],s=n+r.size;if(n==s?e<=s&&t>=n:e<s&&t>n){var o=n+r.border,a=s-r.border;if(e>=o&&t<=a)return this.dirty=e==n||t==s?2:1,void(e!=o||t!=a||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(e-o,t-o):r.dirty=3);r.dirty=r.dom==r.contentDOM&&r.dom.parentNode==this.contentDOM?2:3}n=s}this.dirty=2},cr.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?2:1;t.dirty<n&&(t.dirty=n)}},hr.domAtom.get=function(){return!1},hr.ignoreForCoords.get=function(){return!1},Object.defineProperties(cr.prototype,hr);var dr=[],ur=function(e){function t(t,n,i,r){var s,o=n.type.toDOM;if("function"==typeof o&&(o=o(i,(function(){return s?s.parent?s.parent.posBeforeChild(s):void 0:r}))),!n.type.spec.raw){if(1!=o.nodeType){var a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable=!1,o.classList.add("ProseMirror-widget")}e.call(this,t,dr,o,null),this.widget=n,s=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},t.prototype.ignoreMutation=function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},t.prototype.destroy=function(){this.widget.type.destroy(this.dom),e.prototype.destroy.call(this)},n.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,n),t}(cr),pr=function(e){function t(t,n,i,r){e.call(this,t,dr,n,null),this.textDOM=i,this.text=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,n),t}(cr),mr=function(e){function t(t,n,i,r){e.call(this,t,[],i,r),this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,n,i,r){var s=r.nodeViews[n.type.name],o=s&&s(n,r,i);return o&&o.dom||(o=fn.renderSpec(document,n.type.spec.toDOM(n,i))),new t(e,n,o.dom,o.contentDOM||o.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),0!=this.dirty){for(var i=this.parent;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=0}},t.prototype.slice=function(e,n,i){var r=t.create(this.parent,this.mark,!0,i),s=this.children,o=this.size;n<o&&(s=Mr(s,n,o,i)),e>0&&(s=Mr(s,0,e,i));for(var a=0;a<s.length;a++)s[a].parent=r;return r.children=s,r},t}(cr),fr=function(e){function t(t,n,i,r,s,o,a,l,c){e.call(this,t,n.isLeaf?dr:[],s,o),this.nodeDOM=a,this.node=n,this.outerDeco=i,this.innerDeco=r,o&&this.updateChildren(l,c)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(e,n,i,r,s,o){var a,l,c=s.nodeViews[n.type.name],h=c&&c(n,s,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:o}),i,r),d=h&&h.dom,u=h&&h.contentDOM;if(n.isText)if(d){if(3!=d.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else d=document.createTextNode(n.text);else d||(d=(a=fn.renderSpec(document,n.type.spec.toDOM(n))).dom,u=a.contentDOM);u||n.isText||"BR"==d.nodeName||(d.hasAttribute("contenteditable")||(d.contentEditable=!1),n.type.spec.draggable&&(d.draggable=!0));var p=d;return d=kr(d,i,n),h?l=new xr(e,n,i,r,d,u,p,h,s,o+1):n.isText?new vr(e,n,i,r,d,p,s):new t(e,n,i,r,d,u,p,s,o+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?rt.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&Ir(t,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,i=this.node.inlineContent,r=t,s=e.composing&&this.localCompositionInfo(e,t),o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new Er(this,o&&o.node);!function(e,t,n,i){var r=t.locals(e),s=0;if(0!=r.length)for(var o=0,a=[],l=null,c=0;;){if(o<r.length&&r[o].to==s){for(var h=r[o++],d=void 0;o<r.length&&r[o].to==s;)(d||(d=[h])).push(r[o++]);if(d){d.sort(Tr);for(var u=0;u<d.length;u++)n(d[u],c,!!l)}else n(h,c,!!l)}var p=void 0,m=void 0;if(l)m=-1,p=l,l=null;else{if(!(c<e.childCount))break;m=c,p=e.child(c++)}for(var f=0;f<a.length;f++)a[f].to<=s&&a.splice(f--,1);for(;o<r.length&&r[o].from<=s&&r[o].to>s;)a.push(r[o++]);var g=s+p.nodeSize;if(p.isText){var v=g;o<r.length&&r[o].from<v&&(v=r[o].from);for(var y=0;y<a.length;y++)a[y].to<v&&(v=a[y].to);v<g&&(l=p.cut(v-s),p=p.cut(0,v-s),g=v,m=-1)}i(p,a.length?p.isInline&&!p.isLeaf?a.filter((function(e){return!e.inline})):a.slice():dr,t.forChild(s,p),m),s=g}else for(var x=0;x<e.childCount;x++){var b=e.child(x);i(b,r,t.forChild(s,b),x),s+=b.nodeSize}}(this.node,this.innerDeco,(function(t,s,o){t.spec.marks?l.syncToMarks(t.spec.marks,i,e):t.type.side>=0&&!o&&l.syncToMarks(s==n.node.childCount?ct.none:n.node.child(s).marks,i,e),l.placeWidget(t,e,r)}),(function(t,n,o,c){var h;l.syncToMarks(t.marks,i,e),l.findNodeMatch(t,n,o,c)||a&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(h=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(t,n,o,h,e)||l.updateNextNode(t,n,o,e,c)||l.addNode(t,n,o,e,r),r+=t.nodeSize})),l.syncToMarks(dr,i,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||2==this.dirty)&&(o&&this.protectLocalComposition(e,o),br(this.contentDOM,this.children,e),Si.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))},t.prototype.localCompositionInfo=function(e,t){var n=e.state.selection,i=n.from,r=n.to;if(!(!(e.state.selection instanceof ri)||i<t||r>t+this.node.content.size)){var s=e.root.getSelection(),o=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=Ri(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(s.focusNode,s.focusOffset);if(o&&this.dom.contains(o.parentNode)){if(this.node.inlineContent){var a=o.nodeValue,l=function(e,t,n,i){for(var r=0,s=0;r<e.childCount&&s<=i;){var o=e.child(r++),a=s;if(s+=o.nodeSize,o.isText){for(var l=o.text;r<e.childCount;){var c=e.child(r++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){var h=l.lastIndexOf(t,i-a);if(h>=0&&h+t.length+a>=n)return a+h}}}return-1}(this.node.content,a,i-t,r-t);return l<0?null:{node:o,pos:l,text:a}}return{node:o,pos:-1}}}},t.prototype.protectLocalComposition=function(e,t){var n=t.node,i=t.pos,r=t.text;if(!this.getDesc(n)){for(var s=n;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=null)}var o=new pr(this,s,n,r);e.compositionNodes.push(o),this.children=Mr(this.children,i,i+r.length,e,o)}},t.prototype.update=function(e,t,n,i){return!(3==this.dirty||!e.sameMarkup(this.node)||(this.updateInner(e,t,n,i),0))},t.prototype.updateInner=function(e,t,n,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!Ir(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Ar(this.dom,this.nodeDOM,_r(this.outerDeco,this.node,t),_r(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,n),t}(cr);function gr(e,t,n,i,r){return kr(i,t,e),new fr(null,e,t,n,i,i,i,r,0)}var vr=function(e){function t(t,n,i,r,s,o,a){e.call(this,t,n,i,r,s,null,o,a)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}},t.prototype.update=function(e,t,n,i){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node)||(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=0,0))},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,i){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,i)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,n,i){var r=this.node.cut(e,n),s=document.createTextNode(r.text);return new t(this.parent,r,this.outerDeco,this.innerDeco,s,s,i)},t.prototype.markDirty=function(t,n){e.prototype.markDirty.call(this,t,n),this.dom==this.nodeDOM||0!=t&&n!=this.nodeDOM.nodeValue.length||(this.dirty=3)},n.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,n),t}(fr),yr=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(e){return 0==this.dirty&&this.dom.nodeName==e},n.domAtom.get=function(){return!0},n.ignoreForCoords.get=function(){return"IMG"==this.dom.nodeName},Object.defineProperties(t.prototype,n),t}(cr),xr=function(e){function t(t,n,i,r,s,o,a,l,c,h){e.call(this,t,n,i,r,s,o,a,c,h),this.spec=l}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,n,i,r){if(3==this.dirty)return!1;if(this.spec.update){var s=this.spec.update(t,n,i);return s&&this.updateInner(t,n,i,r),s}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,i,r)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,i,r){this.spec.setSelection?this.spec.setSelection(t,n,i):e.prototype.setSelection.call(this,t,n,i,r)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(fr);function br(e,t,n){for(var i=e.firstChild,r=!1,s=0;s<t.length;s++){var o=t[s],a=o.dom;if(a.parentNode==e){for(;a!=i;)i=Pr(i),r=!0;i=i.nextSibling}else r=!0,e.insertBefore(a,i);if(o instanceof mr){var l=i?i.previousSibling:e.lastChild;br(o.contentDOM,o.children,n),i=l?l.nextSibling:e.firstChild}}for(;i;)i=Pr(i),r=!0;r&&n.trackWrites==e&&(n.trackWrites=null)}function wr(e){e&&(this.nodeName=e)}wr.prototype=Object.create(null);var Cr=[new wr];function _r(e,t,n){if(0==e.length)return Cr;for(var i=n?Cr[0]:new wr,r=[i],s=0;s<e.length;s++){var o=e[s].type.attrs;if(o)for(var a in o.nodeName&&r.push(i=new wr(o.nodeName)),o){var l=o[a];null!=l&&(n&&1==r.length&&r.push(i=new wr(t.isInline?"span":"div")),"class"==a?i.class=(i.class?i.class+" ":"")+l:"style"==a?i.style=(i.style?i.style+";":"")+l:"nodeName"!=a&&(i[a]=l))}}return r}function Ar(e,t,n,i){if(n==Cr&&i==Cr)return t;for(var r=t,s=0;s<i.length;s++){var o=i[s],a=n[s];if(s){var l=void 0;a&&a.nodeName==o.nodeName&&r!=e&&(l=r.parentNode)&&l.tagName.toLowerCase()==o.nodeName||((l=document.createElement(o.nodeName)).pmIsDeco=!0,l.appendChild(r),a=Cr[0]),r=l}Sr(r,a||Cr[0],o)}return r}function Sr(e,t,n){for(var i in t)"class"==i||"style"==i||"nodeName"==i||i in n||e.removeAttribute(i);for(var r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){for(var s=t.class?t.class.split(" ").filter(Boolean):dr,o=n.class?n.class.split(" ").filter(Boolean):dr,a=0;a<s.length;a++)-1==o.indexOf(s[a])&&e.classList.remove(s[a]);for(var l=0;l<o.length;l++)-1==s.indexOf(o[l])&&e.classList.add(o[l]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style)for(var c,h=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=h.exec(t.style);)e.style.removeProperty(c[1]);n.style&&(e.style.cssText+=n.style)}}function kr(e,t,n){return Ar(e,e,Cr,_r(t,n,1!=e.nodeType))}function Ir(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function Pr(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var Er=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1,this.preMatch=function(e,t){for(var n=e.childCount,i=t.length,r=new Map;n>0&&i>0;i--){var s=t[i-1],o=s.node;if(o){if(o!=e.child(n-1))break;--n,r.set(s,n)}}return{index:n,matched:r}}(e.node.content,e.children)};function Tr(e,t){return e.type.side-t.type.side}function Mr(e,t,n,i,r){for(var s=[],o=0,a=0;o<e.length;o++){var l=e[o],c=a,h=a+=l.size;c>=n||h<=t?s.push(l):(c<t&&s.push(l.slice(0,t-c,i)),r&&(s.push(r),r=null),h>n&&s.push(l.slice(n-c,l.size,i)))}return s}function Or(e,t){var n=e.root.getSelection(),i=e.state.doc;if(!n.focusNode)return null;var r=e.docView.nearestDesc(n.focusNode),s=r&&0==r.size,o=e.docView.posFromDOM(n.focusNode,n.focusOffset);if(o<0)return null;var a,l,c=i.resolve(o);if(Zi(n)){for(a=c;r&&!r.node;)r=r.parent;if(r&&r.node.isAtom&&oi.isSelectable(r.node)&&r.parent&&(!r.node.isInline||!function(e,t,n){for(var i=0==t,r=t==Ri(e);i||r;){if(e==n)return!0;var s=Mi(e);if(!(e=e.parentNode))return!1;i=i&&0==s,r=r&&s==Ri(e)}}(n.focusNode,n.focusOffset,r.dom))){var h=r.posBefore;l=new oi(o==h?c:i.resolve(h))}}else{var d=e.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(d<0)return null;a=i.resolve(d)}return l||(l=jr(e,a,c,"pointer"==t||e.state.selection.head<c.pos&&!s?1:-1)),l}function Dr(e){return e.editable?e.hasFocus():zr(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function $r(e,t){var n=e.state.selection;if(Fr(e,n),Dr(e)){if(!t&&e.mouseDown&&e.mouseDown.allowDefault)return e.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection();if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.root.getSelection(),n=document.createRange(),i=e.cursorWrapper.dom,r="IMG"==i.nodeName;r?n.setEnd(i.parentNode,Mi(i)+1):n.setEnd(i,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!r&&!e.state.selection.visible&&Si.ie&&Si.ie_version<=11&&(i.disabled=!0,i.disabled=!1)}(e);else{var i,r,s=n.anchor,o=n.head;!Br||n instanceof ri||(n.$from.parent.inlineContent||(i=Lr(e,n.from)),n.empty||n.$from.parent.inlineContent||(r=Lr(e,n.to))),e.docView.setSelection(s,o,e.root,t),Br&&(i&&Rr(i),r&&Rr(r)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),i=n.anchorNode,r=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==i&&n.anchorOffset==r||(t.removeEventListener("selectionchange",e.hideSelectionGuard),setTimeout((function(){Dr(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}Er.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},Er.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},Er.prototype.syncToMarks=function(e,t,n){for(var i=0,r=this.stack.length>>1,s=Math.min(r,e.length);i<s&&(i==r-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&!1!==e[i].type.spec.spanning;)i++;for(;i<r;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<e.length;){this.stack.push(this.top,this.index+1);for(var o=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[r])){o=a;break}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{var l=mr.create(this.top,e[r],t,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,r++}},Er.prototype.findNodeMatch=function(e,t,n,i){var r=this.top.children,s=-1;if(i>=this.preMatch.index){for(var o=this.index;o<r.length;o++)if(this.preMatch.matched.get(r[o])==i){r[o].matchesNode(e,t,n)&&(s=o);break}}else for(var a=this.index,l=Math.min(r.length,a+5);a<l;a++){var c=r[a];if(c.matchesNode(e,t,n)&&!this.preMatch.matched.has(c)){s=a;break}}return!(s<0||(this.destroyBetween(this.index,s),this.index++,0))},Er.prototype.updateNodeAt=function(e,t,n,i,r){return!!this.top.children[i].update(e,t,n,r)&&(this.destroyBetween(this.index,i),this.index=i+1,!0)},Er.prototype.findIndexWithChild=function(e){for(;;){var t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){var n=e.pmViewDesc;if(n)for(var i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i;return-1}e=t}},Er.prototype.updateNextNode=function(e,t,n,i,r){for(var s=this.index;s<this.top.children.length;s++){var o=this.top.children[s];if(o instanceof fr){var a=this.preMatch.matched.get(o);if(null!=a&&a!=r)return!1;var l=o.dom;if((!this.lock||!(l==this.lock||1==l.nodeType&&l.contains(this.lock.parentNode))||e.isText&&o.node&&o.node.isText&&o.nodeDOM.nodeValue==e.text&&3!=o.dirty&&Ir(t,o.outerDeco))&&o.update(e,t,n,i))return this.destroyBetween(this.index,s),o.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1},Er.prototype.addNode=function(e,t,n,i,r){this.top.children.splice(this.index++,0,fr.create(this.top,e,t,n,i,r)),this.changed=!0},Er.prototype.placeWidget=function(e,t,n){var i=this.index<this.top.children.length?this.top.children[this.index]:null;if(!i||!i.matchesWidget(e)||e!=i.widget&&i.widget.type.toDOM.parentNode){var r=new ur(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++},Er.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof mr;)e=e.children[e.children.length-1];e&&e instanceof vr&&!/\n$/.test(e.node.text)||((Si.safari||Si.chrome)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG"),this.addHackNode("BR"))},Er.prototype.addHackNode=function(e){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(e))this.index++;else{var t=document.createElement(e);"IMG"==e&&(t.className="ProseMirror-separator"),"BR"==e&&(t.className="ProseMirror-trailingBreak"),this.top.children.splice(this.index++,0,new yr(this.top,dr,t,null)),this.changed=!0}};var Br=Si.safari||Si.chrome&&Si.chrome_version<63;function Lr(e,t){var n=e.docView.domFromPos(t,0),i=n.node,r=n.offset,s=r<i.childNodes.length?i.childNodes[r]:null,o=r?i.childNodes[r-1]:null;if(Si.safari&&s&&"false"==s.contentEditable)return Nr(s);if(!(s&&"false"!=s.contentEditable||o&&"false"!=o.contentEditable)){if(s)return Nr(s);if(o)return Nr(o)}}function Nr(e){return e.contentEditable="true",Si.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Rr(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Fr(e,t){if(t instanceof oi){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Zr(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Zr(e)}function Zr(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function jr(e,t,n,i){return e.someProp("createSelectionBetween",(function(i){return i(e,t,n)}))||ri.between(t,n,i)}function zr(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Ur(e,t){var n=e.selection,i=n.$anchor,r=n.$head,s=t>0?i.max(r):i.min(r),o=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return o&&ti.findFrom(o,t)}function Hr(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Vr(e,t,n){var i=e.state.selection;if(!(i instanceof ri)){if(i instanceof oi&&i.node.isInline)return Hr(e,new ri(t>0?i.$to:i.$from));var r=Ur(e.state,t);return!!r&&Hr(e,r)}if(!i.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var s=Ur(e.state,t);return!!(s&&s instanceof oi)&&Hr(e,s)}if(!(Si.mac&&n.indexOf("m")>-1)){var o,a=i.$head,l=a.textOffset?null:t<0?a.nodeBefore:a.nodeAfter;if(!l||l.isText)return!1;var c=t<0?a.pos-l.nodeSize:a.pos;return!!(l.isAtom||(o=e.docView.descAt(c))&&!o.contentDOM)&&(oi.isSelectable(l)?Hr(e,new oi(t<0?e.state.doc.resolve(a.pos-l.nodeSize):a)):!!Si.webkit&&Hr(e,new ri(e.state.doc.resolve(t<0?c:c+l.nodeSize))))}}function qr(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Gr(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function Wr(e){var t=e.root.getSelection(),n=t.focusNode,i=t.focusOffset;if(n){var r,s,o=!1;for(Si.gecko&&1==n.nodeType&&i<qr(n)&&Gr(n.childNodes[i])&&(o=!0);;)if(i>0){if(1!=n.nodeType)break;var a=n.childNodes[i-1];if(Gr(a))r=n,s=--i;else{if(3!=a.nodeType)break;i=(n=a).nodeValue.length}}else{if(Jr(n))break;for(var l=n.previousSibling;l&&Gr(l);)r=n.parentNode,s=Mi(l),l=l.previousSibling;if(l)i=qr(n=l);else{if((n=n.parentNode)==e.dom)break;i=0}}o?Yr(e,t,n,i):r&&Yr(e,t,r,s)}}function Kr(e){var t=e.root.getSelection(),n=t.focusNode,i=t.focusOffset;if(n){for(var r,s,o=qr(n);;)if(i<o){if(1!=n.nodeType)break;if(!Gr(n.childNodes[i]))break;r=n,s=++i}else{if(Jr(n))break;for(var a=n.nextSibling;a&&Gr(a);)r=a.parentNode,s=Mi(a)+1,a=a.nextSibling;if(a)i=0,o=qr(n=a);else{if((n=n.parentNode)==e.dom)break;i=o=0}}r&&Yr(e,t,r,s)}}function Jr(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Yr(e,t,n,i){if(Zi(t)){var r=document.createRange();r.setEnd(n,i),r.setStart(n,i),t.removeAllRanges(),t.addRange(r)}else t.extend&&t.extend(n,i);e.domObserver.setCurSelection();var s=e.state;setTimeout((function(){e.state==s&&$r(e)}),50)}function Qr(e,t,n){var i=e.state.selection;if(i instanceof ri&&!i.empty||n.indexOf("s")>-1)return!1;if(Si.mac&&n.indexOf("m")>-1)return!1;var r=i.$from,s=i.$to;if(!r.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var o=Ur(e.state,t);if(o&&o instanceof oi)return Hr(e,o)}if(!r.parent.inlineContent){var a=t<0?r:s,l=i instanceof li?ti.near(a,t):ti.findFrom(a,t);return!!l&&Hr(e,l)}return!1}function Xr(e,t){if(!(e.state.selection instanceof ri))return!0;var n=e.state.selection,i=n.$head,r=n.$anchor,s=n.empty;if(!i.sameParent(r))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var o=!i.textOffset&&(t<0?i.nodeBefore:i.nodeAfter);if(o&&!o.isText){var a=e.state.tr;return t<0?a.delete(i.pos-o.nodeSize,i.pos):a.delete(i.pos,i.pos+o.nodeSize),e.dispatch(a),!0}return!1}function es(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function ts(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(Si.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||Si.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function ns(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:jr(e,t.resolve(n.anchor),t.resolve(n.head))}function is(e,t,n){for(var i=e.depth,r=t?e.end():e.pos;i>0&&(t||e.indexAfter(i)==e.node(i).childCount);)i--,r++,t=!1;if(n)for(var s=e.node(i).maybeChild(e.indexAfter(i));s&&!s.isLeaf;)s=s.firstChild,r++;return r}function rs(e,t){for(var n=[],i=t.content,r=t.openStart,s=t.openEnd;r>1&&s>1&&1==i.childCount&&1==i.firstChild.childCount;){r--,s--;var o=i.firstChild;n.push(o.type.name,o.attrs!=o.type.defaultAttrs?o.attrs:null),i=o.content}var a=e.someProp("clipboardSerializer")||fn.fromSchema(e.state.schema),l=ms(),c=l.createElement("div");c.appendChild(a.serializeFragment(i,{document:l}));for(var h,d=c.firstChild;d&&1==d.nodeType&&(h=us[d.nodeName.toLowerCase()]);){for(var u=h.length-1;u>=0;u--){for(var p=l.createElement(h[u]);c.firstChild;)p.appendChild(c.firstChild);c.appendChild(p),"tbody"!=h[u]&&(r++,s++)}d=c.firstChild}return d&&1==d.nodeType&&d.setAttribute("data-pm-slice",r+" "+s+" "+JSON.stringify(n)),{dom:c,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function ss(e,t,n,i,r){var s,o,a=r.parent.type.spec.code;if(!n&&!t)return null;var l=t&&(i||a||!n);if(l){if(e.someProp("transformPastedText",(function(e){t=e(t,a||i)})),a)return t?new dt(rt.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):dt.empty;var c=e.someProp("clipboardTextParser",(function(e){return e(t,r,i)}));if(c)o=c;else{var h=r.marks(),d=e.state.schema,u=fn.fromSchema(d);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((function(e){var t=s.appendChild(document.createElement("p"));e&&t.appendChild(u.serializeNode(d.text(e,h)))}))}}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),s=function(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,i=ms().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e);if((n=r&&us[r[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join("")),i.innerHTML=e,n)for(var s=0;s<n.length;s++)i=i.querySelector(n[s])||i;return i}(n),Si.webkit&&function(e){for(var t=e.querySelectorAll(Si.chrome?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<t.length;n++){var i=t[n];1==i.childNodes.length&&""==i.textContent&&i.parentNode&&i.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),i)}}(s);var p=s&&s.querySelector("[data-pm-slice]"),m=p&&/^(\d+) (\d+) (.*)/.exec(p.getAttribute("data-pm-slice"));if(!o){var f=e.someProp("clipboardParser")||e.someProp("domParser")||rn.fromSchema(e.state.schema);o=f.parseSlice(s,{preserveWhitespace:!(!l&&!m),context:r,ruleFromNode:function(e){if("BR"==e.nodeName&&!e.nextSibling)return{ignore:!0}}})}if(m)o=function(e,t){if(!e.size)return e;var n,i=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var r=e.content,s=e.openStart,o=e.openEnd,a=n.length-2;a>=0;a-=2){var l=i.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;r=rt.from(l.create(n[a+1],r)),s++,o++}return new dt(r,s,o)}(ds(o,+m[1],+m[2]),m[3]);else if(o=dt.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var i=t.node(n).contentMatchAt(t.index(n)),r=void 0,s=[];if(e.forEach((function(e){if(s){var t,n=i.findWrapping(e.type);if(!n)return s=null;if(t=s.length&&r.length&&ls(n,r,e,s[s.length-1],0))s[s.length-1]=t;else{s.length&&(s[s.length-1]=cs(s[s.length-1],r.length));var o=as(e,n);s.push(o),i=i.matchType(o.type,o.attrs),r=n}}})),s)return{v:rt.from(s)}},i=t.depth;i>=0;i--){var r=n(i);if(r)return r.v}return e}(o.content,r),!0),o.openStart||o.openEnd){for(var g=0,v=0,y=o.content.firstChild;g<o.openStart&&!y.type.spec.isolating;g++,y=y.firstChild);for(var x=o.content.lastChild;v<o.openEnd&&!x.type.spec.isolating;v++,x=x.lastChild);o=ds(o,g,v)}return e.someProp("transformPasted",(function(e){o=e(o)})),o}function as(e,t,n){void 0===n&&(n=0);for(var i=t.length-1;i>=n;i--)e=t[i].create(null,rt.from(e));return e}function ls(e,t,n,i,r){if(r<e.length&&r<t.length&&e[r]==t[r]){var s=ls(e,t,n,i.lastChild,r+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(r==e.length-1?n.type:e[r+1]))return i.copy(i.content.append(rt.from(as(n,e,r+1))))}}function cs(e,t){if(0==t)return e;var n=e.content.replaceChild(e.childCount-1,cs(e.lastChild,t-1)),i=e.contentMatchAt(e.childCount).fillBefore(rt.empty,!0);return e.copy(n.append(i))}function hs(e,t,n,i,r,s){var o=t<0?e.firstChild:e.lastChild,a=o.content;return r<i-1&&(a=hs(a,t,n,i,r+1,s)),r>=n&&(a=t<0?o.contentMatchAt(0).fillBefore(a,e.childCount>1||s<=r).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(rt.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(a))}function ds(e,t,n){return t<e.openStart&&(e=new dt(hs(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new dt(hs(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}var us={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},ps=null;function ms(){return ps||(ps=document.implementation.createHTMLDocument("title"))}var fs={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},gs=Si.ie&&Si.ie_version<=11,vs=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};vs.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},vs.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var ys=function(e,t){var n=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)n.queue.push(e[t]);Si.ie&&Si.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new vs,gs&&(this.onCharData=function(e){n.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};ys.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))},ys.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},ys.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,fs),gs&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},ys.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}gs&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},ys.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},ys.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},ys.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},ys.prototype.onSelectionChange=function(){if((!(e=this.view).editable||e.root.activeElement==e.dom)&&zr(e)){var e;if(this.suppressingSelectionUpdates)return $r(this.view);if(Si.ie&&Si.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&Bi(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},ys.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},ys.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},ys.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&zr(this.view)&&!this.ignoreSelectionChange(t),i=-1,r=-1,s=!1,o=[];if(this.view.editable)for(var a=0;a<e.length;a++){var l=this.registerMutation(e[a],o);l&&(i=i<0?l.from:Math.min(l.from,i),r=r<0?l.to:Math.max(l.to,r),l.typeOver&&(s=!0))}if(Si.gecko&&o.length>1){var c=o.filter((function(e){return"BR"==e.nodeName}));if(2==c.length){var h=c[0],d=c[1];h.parentNode&&h.parentNode.parentNode==d.parentNode?d.remove():h.remove()}}(i>-1||n)&&(i>-1&&(this.view.docView.markDirty(i,r),u=this.view,xs||(xs=!0,"normal"==getComputedStyle(u.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))),this.handleDOMChange(i,r,s,o),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||$r(this.view),this.currentSelection.set(t))}var u},ys.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(var i=0;i<e.addedNodes.length;i++)t.push(e.addedNodes[i]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};var r=e.previousSibling,s=e.nextSibling;if(Si.ie&&Si.ie_version<=11&&e.addedNodes.length)for(var o=0;o<e.addedNodes.length;o++){var a=e.addedNodes[o],l=a.previousSibling,c=a.nextSibling;(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(r=l),(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(s=c)}var h=r&&r.parentNode==e.target?Mi(r)+1:0,d=n.localPosFromDOM(e.target,h,-1),u=s&&s.parentNode==e.target?Mi(s):e.target.childNodes.length;return{from:d,to:n.localPosFromDOM(e.target,u,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var xs=!1,bs={},ws={};function Cs(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function _s(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return As(e,t)})}))}function As(e,t){return e.someProp("handleDOMEvents",(function(n){var i=n[t.type];return!!i&&(i(e,t)||t.defaultPrevented)}))}function Ss(e){return{left:e.clientX,top:e.clientY}}function ks(e,t,n,i,r){if(-1==i)return!1;for(var s=e.state.doc.resolve(i),o=function(i){if(e.someProp(t,(function(t){return i>s.depth?t(e,n,s.nodeAfter,s.before(i),r,!0):t(e,n,s.node(i),s.before(i),r,!1)})))return{v:!0}},a=s.depth+1;a>0;a--){var l=o(a);if(l)return l.v}return!1}function Is(e,t,n){e.focused||e.focus();var i=e.state.tr.setSelection(t);"pointer"==n&&i.setMeta("pointer",!0),e.dispatch(i)}function Ps(e,t,n,i){return ks(e,"handleDoubleClickOn",t,n,i)||e.someProp("handleDoubleClick",(function(n){return n(e,t,i)}))}function Es(e,t,n,i){return ks(e,"handleTripleClickOn",t,n,i)||e.someProp("handleTripleClick",(function(n){return n(e,t,i)}))||function(e,t,n){if(0!=n.button)return!1;var i=e.state.doc;if(-1==t)return!!i.inlineContent&&(Is(e,ri.create(i,0,i.content.size),"pointer"),!0);for(var r=i.resolve(t),s=r.depth+1;s>0;s--){var o=s>r.depth?r.nodeAfter:r.node(s),a=r.before(s);if(o.inlineContent)Is(e,ri.create(i,a+1,a+1+o.content.size),"pointer");else{if(!oi.isSelectable(o))continue;Is(e,oi.create(i,a),"pointer")}return!0}}(e,n,i)}function Ts(e){return Ns(e)}ws.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!Ds(e,t))if(229!=t.keyCode&&e.domObserver.forceFlush(),e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!Si.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",(function(n){return n(e,t)}))||function(e,t){var n=t.keyCode,i=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||Si.mac&&72==n&&"c"==i?Xr(e,-1)||Wr(e):46==n||Si.mac&&68==n&&"c"==i?Xr(e,1)||Kr(e):13==n||27==n||(37==n?Vr(e,-1,i)||Wr(e):39==n?Vr(e,1,i)||Kr(e):38==n?Qr(e,-1,i)||Wr(e):40==n?function(e){if(Si.safari&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,i=t.focusOffset;if(n&&1==n.nodeType&&0==i&&n.firstChild&&"false"==n.firstChild.contentEditable){var r=n.firstChild;es(e,r,!0),setTimeout((function(){return es(e,r,!1)}),20)}}}(e)||Qr(e,1,i)||Kr(e):i==(Si.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}(e,t)?t.preventDefault():Cs(e,"key");else{var n=Date.now();e.lastIOSEnter=n,e.lastIOSEnterFallbackTimeout=setTimeout((function(){e.lastIOSEnter==n&&(e.someProp("handleKeyDown",(function(t){return t(e,ji(13,"Enter"))})),e.lastIOSEnter=0)}),200)}},ws.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},ws.keypress=function(e,t){if(!(Ds(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||Si.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof ri&&n.$from.sameParent(n.$to))){var i=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,i)}))||e.dispatch(e.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}}};var Ms=Si.mac?"metaKey":"ctrlKey";bs.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=Ts(e),i=Date.now(),r="singleClick";i-e.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,i=t.y-e.clientY;return n*n+i*i<100}(t,e.lastClick)&&!t[Ms]&&("singleClick"==e.lastClick.type?r="doubleClick":"doubleClick"==e.lastClick.type&&(r="tripleClick")),e.lastClick={time:i,x:t.clientX,y:t.clientY,type:r};var s=e.posAtCoords(Ss(t));s&&("singleClick"==r?(e.mouseDown&&e.mouseDown.done(),e.mouseDown=new Os(e,s,t,n)):("doubleClick"==r?Ps:Es)(e,s.pos,s.inside,t)?t.preventDefault():Cs(e,"pointer"))};var Os=function(e,t,n,i){var r,s,o=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=n,this.flushed=i,this.selectNode=n[Ms],this.allowDefault=n.shiftKey,this.delayedSelectionSync=!1,t.inside>-1)r=e.state.doc.nodeAt(t.inside),s=t.inside;else{var a=e.state.doc.resolve(t.pos);r=a.parent,s=a.depth?a.before():0}this.mightDrag=null;var l=i?null:n.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c?c.dom:null;var h=e.state.selection;(0==n.button&&r.type.spec.draggable&&!1!==r.type.spec.selectable||h instanceof oi&&h.from<=s&&h.to>s)&&(this.mightDrag={node:r,pos:s,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&Si.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){o.view.mouseDown==o&&o.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Cs(e,"pointer")};function Ds(e,t){return!!e.composing||!!(Si.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}Os.prototype.done=function(){var e=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((function(){return $r(e.view)})),this.view.mouseDown=null},Os.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Ss(e))),this.allowDefault||!t?Cs(this.view,"pointer"):function(e,t,n,i,r){return ks(e,"handleClickOn",t,n,i)||e.someProp("handleClick",(function(n){return n(e,t,i)}))||(r?function(e,t){if(-1==t)return!1;var n,i,r=e.state.selection;r instanceof oi&&(n=r.node);for(var s=e.state.doc.resolve(t),o=s.depth+1;o>0;o--){var a=o>s.depth?s.nodeAfter:s.node(o);if(oi.isSelectable(a)){i=n&&r.$from.depth>0&&o>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?s.before(r.$from.depth):s.before(o);break}}return null!=i&&(Is(e,oi.create(e.state.doc,i),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),i=n.nodeAfter;return!!(i&&i.isAtom&&oi.isSelectable(i))&&(Is(e,new oi(n),"pointer"),!0)}(e,n))}(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||Si.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||Si.chrome&&!(this.view.state.selection instanceof ri)&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Is(this.view,ti.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Cs(this.view,"pointer")}},Os.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),Cs(this.view,"pointer"),0==e.buttons&&this.done()},bs.touchdown=function(e){Ts(e),Cs(e,"pointer")},bs.contextmenu=function(e){return Ts(e)};var $s=Si.android?5e3:-1;function Bs(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return Ns(e)}),t))}function Ls(e){var t;for(e.composing&&(e.composing=!1,e.compositionEndedAt=((t=document.createEvent("Event")).initEvent("event",!0,!0),t.timeStamp));e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function Ns(e,t){if(e.domObserver.forceFlush(),Ls(e),t||e.docView.dirty){var n=Or(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}ws.compositionstart=ws.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),Ns(e,!0),e.markCursor=null;else if(Ns(e),Si.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var i=e.root.getSelection(),r=i.focusNode,s=i.focusOffset;r&&1==r.nodeType&&0!=s;){var o=s<0?r.lastChild:r.childNodes[s-1];if(!o)break;if(3==o.nodeType){i.collapse(o,o.nodeValue.length);break}r=o,s=-1}e.composing=!0}Bs(e,$s)},ws.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,Bs(e,20))};var Rs=Si.ie&&Si.ie_version<15||Si.ios&&Si.webkit_version<604;function Fs(e,t,n,i){var r=ss(e,t,n,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,i,r||dt.empty)})))return!0;if(!r)return!1;var s=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(r),o=s?e.state.tr.replaceSelectionWith(s,e.shiftKey):e.state.tr.replaceSelection(r);return e.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}bs.copy=ws.cut=function(e,t){var n=e.state.selection,i="cut"==t.type;if(!n.empty){var r=Rs?null:t.clipboardData,s=rs(e,n.content()),o=s.dom,a=s.text;r?(t.preventDefault(),r.clearData(),r.setData("text/html",o.innerHTML),r.setData("text/plain",a)):function(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var i=getSelection(),r=document.createRange();r.selectNodeContents(t),e.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}(e,o),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},ws.paste=function(e,t){var n=Rs?null:t.clipboardData;n&&Fs(e,n.getData("text/plain"),n.getData("text/html"),t)?t.preventDefault():function(e,t){if(e.dom.parentNode){var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,i=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout((function(){e.focus(),i.parentNode&&i.parentNode.removeChild(i),n?Fs(e,i.value,null,t):Fs(e,i.textContent,i.innerHTML,t)}),50)}}(e,t)};var Zs=function(e,t){this.slice=e,this.move=t},js=Si.mac?"altKey":"ctrlKey";for(var zs in bs.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var i=e.state.selection,r=i.empty?null:e.posAtCoords(Ss(t));if(r&&r.pos>=i.from&&r.pos<=(i instanceof oi?i.to-1:i.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(oi.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var s=e.docView.nearestDesc(t.target,!0);s&&s.node.type.spec.draggable&&s!=e.docView&&e.dispatch(e.state.tr.setSelection(oi.create(e.state.doc,s.posBefore)))}var o=e.state.selection.content(),a=rs(e,o),l=a.dom,c=a.text;t.dataTransfer.clearData(),t.dataTransfer.setData(Rs?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",Rs||t.dataTransfer.setData("text/plain",c),e.dragging=new Zs(o,!t[js])}},bs.dragend=function(e){var t=e.dragging;window.setTimeout((function(){e.dragging==t&&(e.dragging=null)}),50)},ws.dragover=ws.dragenter=function(e,t){return t.preventDefault()},ws.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var i=e.posAtCoords(Ss(t));if(i){var r=e.state.doc.resolve(i.pos);if(r){var s=n&&n.slice;s?e.someProp("transformPasted",(function(e){s=e(s)})):s=ss(e,t.dataTransfer.getData(Rs?"Text":"text/plain"),Rs?null:t.dataTransfer.getData("text/html"),!1,r);var o=n&&!t[js];if(e.someProp("handleDrop",(function(n){return n(e,t,s||dt.empty,o)})))t.preventDefault();else if(s){t.preventDefault();var a=s?Zn(e.state.doc,r.pos,s):r.pos;null==a&&(a=r.pos);var l=e.state.tr;o&&l.deleteSelection();var c=l.mapping.map(a),h=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,d=l.doc;if(h?l.replaceRangeWith(c,c,s.content.firstChild):l.replaceRange(c,c,s),!l.doc.eq(d)){var u=l.doc.resolve(c);if(h&&oi.isSelectable(s.content.firstChild)&&u.nodeAfter&&u.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new oi(u));else{var p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((function(e,t,n,i){return p=i})),l.setSelection(jr(e,u,l.doc.resolve(p)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}}}}}},bs.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&$r(e)}),20))},bs.blur=function(e,t){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),t.relatedTarget&&e.dom.contains(t.relatedTarget)&&e.domObserver.currentSelection.set({}),e.focused=!1)},bs.beforeinput=function(e,t){if(Si.chrome&&Si.android&&"deleteContentBackward"==t.inputType){var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,ji(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},ws)bs[zs]=ws[zs];function Us(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var i in t)if(!(i in e))return!1;return!0}var Hs=function(e,t){this.spec=t||Js,this.side=this.spec.side||0,this.toDOM=e};Hs.prototype.map=function(e,t,n,i){var r=e.mapResult(t.from+i,this.side<0?-1:1),s=r.pos;return r.deleted?null:new Gs(s-n,s-n,this)},Hs.prototype.valid=function(){return!0},Hs.prototype.eq=function(e){return this==e||e instanceof Hs&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Us(this.spec,e.spec))},Hs.prototype.destroy=function(e){this.spec.destroy&&this.spec.destroy(e)};var Vs=function(e,t){this.spec=t||Js,this.attrs=e};Vs.prototype.map=function(e,t,n,i){var r=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-n,s=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-n;return r>=s?null:new Gs(r,s,this)},Vs.prototype.valid=function(e,t){return t.from<t.to},Vs.prototype.eq=function(e){return this==e||e instanceof Vs&&Us(this.attrs,e.attrs)&&Us(this.spec,e.spec)},Vs.is=function(e){return e.type instanceof Vs};var qs=function(e,t){this.spec=t||Js,this.attrs=e};qs.prototype.map=function(e,t,n,i){var r=e.mapResult(t.from+i,1);if(r.deleted)return null;var s=e.mapResult(t.to+i,-1);return s.deleted||s.pos<=r.pos?null:new Gs(r.pos-n,s.pos-n,this)},qs.prototype.valid=function(e,t){var n,i=e.content.findIndex(t.from),r=i.index,s=i.offset;return s==t.from&&!(n=e.child(r)).isText&&s+n.nodeSize==t.to},qs.prototype.eq=function(e){return this==e||e instanceof qs&&Us(this.attrs,e.attrs)&&Us(this.spec,e.spec)};var Gs=function(e,t,n){this.from=e,this.to=t,this.type=n},Ws={spec:{configurable:!0},inline:{configurable:!0}};Gs.prototype.copy=function(e,t){return new Gs(e,t,this.type)},Gs.prototype.eq=function(e,t){return void 0===t&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to},Gs.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},Gs.widget=function(e,t,n){return new Gs(e,e,new Hs(t,n))},Gs.inline=function(e,t,n,i){return new Gs(e,t,new Vs(n,i))},Gs.node=function(e,t,n,i){return new Gs(e,t,new qs(n,i))},Ws.spec.get=function(){return this.type.spec},Ws.inline.get=function(){return this.type instanceof Vs},Object.defineProperties(Gs.prototype,Ws);var Ks=[],Js={},Ys=function(e,t){this.local=e&&e.length?e:Ks,this.children=t&&t.length?t:Ks};Ys.create=function(e,t){return t.length?io(t,e,0,Js):Qs},Ys.prototype.find=function(e,t,n){var i=[];return this.findInner(null==e?0:e,null==t?1e9:t,i,0,n),i},Ys.prototype.findInner=function(e,t,n,i,r){for(var s=0;s<this.local.length;s++){var o=this.local[s];o.from<=t&&o.to>=e&&(!r||r(o.spec))&&n.push(o.copy(o.from+i,o.to+i))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var l=this.children[a]+1;this.children[a+2].findInner(e-l,t-l,n,i+l,r)}},Ys.prototype.map=function(e,t,n){return this==Qs||0==e.maps.length?this:this.mapInner(e,t,0,0,n||Js)},Ys.prototype.mapInner=function(e,t,n,i,r){for(var s,o=0;o<this.local.length;o++){var a=this.local[o].map(e,n,i);a&&a.type.valid(t,a)?(s||(s=[])).push(a):r.onRemove&&r.onRemove(this.local[o].spec)}return this.children.length?function(e,t,n,i,r,s,o){for(var a=e.slice(),l=function(e,t,n,i){for(var o=0;o<a.length;o+=3){var l=a[o+1],c=void 0;-1==l||e>l+s||(t>=a[o]+s?a[o+1]=-1:n>=r&&(c=i-n-(t-e))&&(a[o]+=c,a[o+1]+=c))}},c=0;c<n.maps.length;c++)n.maps[c].forEach(l);for(var h=!1,d=0;d<a.length;d+=3)if(-1==a[d+1]){var u=n.map(e[d]+s),p=u-r;if(p<0||p>=i.content.size){h=!0;continue}var m=n.map(e[d+1]+s,-1)-r,f=i.content.findIndex(p),g=f.index,v=f.offset,y=i.maybeChild(g);if(y&&v==p&&v+y.nodeSize==m){var x=a[d+2].mapInner(n,y,u+1,e[d]+s+1,o);x!=Qs?(a[d]=p,a[d+1]=m,a[d+2]=x):(a[d+1]=-2,h=!0)}else h=!0}if(h){var b=function(e,t,n,i,r,s,o){function a(e,t){for(var s=0;s<e.local.length;s++){var l=e.local[s].map(i,r,t);l?n.push(l):o.onRemove&&o.onRemove(e.local[s].spec)}for(var c=0;c<e.children.length;c+=3)a(e.children[c+2],e.children[c]+t+1)}for(var l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+s+1);return n}(a,e,t||[],n,r,s,o),w=io(b,i,0,o);t=w.local;for(var C=0;C<a.length;C+=3)a[C+1]<0&&(a.splice(C,3),C-=3);for(var _=0,A=0;_<w.children.length;_+=3){for(var S=w.children[_];A<a.length&&a[A]<S;)A+=3;a.splice(A,0,w.children[_],w.children[_+1],w.children[_+2])}}return new Ys(t&&t.sort(ro),a)}(this.children,s,e,t,n,i,r):s?new Ys(s.sort(ro)):Qs},Ys.prototype.add=function(e,t){return t.length?this==Qs?Ys.create(e,t):this.addInner(e,t,0):this},Ys.prototype.addInner=function(e,t,n){var i,r=this,s=0;e.forEach((function(e,o){var a,l=o+n;if(a=to(t,e,l)){for(i||(i=r.children.slice());s<i.length&&i[s]<o;)s+=3;i[s]==o?i[s+2]=i[s+2].addInner(e,a,l+1):i.splice(s,0,o,o+e.nodeSize,io(a,e,l+1,Js)),s+=3}}));for(var o=eo(s?no(t):t,-n),a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Ys(o.length?this.local.concat(o).sort(ro):this.local,i||this.children)},Ys.prototype.remove=function(e){return 0==e.length||this==Qs?this:this.removeInner(e,0)},Ys.prototype.removeInner=function(e,t){for(var n=this.children,i=this.local,r=0;r<n.length;r+=3){for(var s=void 0,o=n[r]+t,a=n[r+1]+t,l=0,c=void 0;l<e.length;l++)(c=e[l])&&c.from>o&&c.to<a&&(e[l]=null,(s||(s=[])).push(c));if(s){n==this.children&&(n=this.children.slice());var h=n[r+2].removeInner(s,o+1);h!=Qs?n[r+2]=h:(n.splice(r,3),r-=3)}}if(i.length)for(var d=0,u=void 0;d<e.length;d++)if(u=e[d])for(var p=0;p<i.length;p++)i[p].eq(u,t)&&(i==this.local&&(i=this.local.slice()),i.splice(p--,1));return n==this.children&&i==this.local?this:i.length||n.length?new Ys(i,n):Qs},Ys.prototype.forChild=function(e,t){if(this==Qs)return this;if(t.isLeaf)return Ys.empty;for(var n,i,r=0;r<this.children.length;r+=3)if(this.children[r]>=e){this.children[r]==e&&(n=this.children[r+2]);break}for(var s=e+1,o=s+t.content.size,a=0;a<this.local.length;a++){var l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Vs){var c=Math.max(s,l.from)-s,h=Math.min(o,l.to)-s;c<h&&(i||(i=[])).push(l.copy(c,h))}}if(i){var d=new Ys(i.sort(ro));return n?new Xs([d,n]):d}return n||Qs},Ys.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof Ys)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0},Ys.prototype.locals=function(e){return so(this.localsInner(e))},Ys.prototype.localsInner=function(e){if(this==Qs)return Ks;if(e.inlineContent||!this.local.some(Vs.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Vs||t.push(this.local[n]);return t};var Qs=new Ys;Ys.empty=Qs,Ys.removeOverlap=so;var Xs=function(e){this.members=e};function eo(e,t){if(!t||!e.length)return e;for(var n=[],i=0;i<e.length;i++){var r=e[i];n.push(new Gs(r.from+t,r.to+t,r.type))}return n}function to(e,t,n){if(t.isLeaf)return null;for(var i=n+t.nodeSize,r=null,s=0,o=void 0;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<i&&((r||(r=[])).push(o),e[s]=null);return r}function no(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function io(e,t,n,i){var r=[],s=!1;t.forEach((function(t,o){var a=to(e,t,o+n);if(a){s=!0;var l=io(a,t,n+o+1,i);l!=Qs&&r.push(o,o+t.nodeSize,l)}}));for(var o=eo(s?no(e):e,-n).sort(ro),a=0;a<o.length;a++)o[a].type.valid(t,o[a])||(i.onRemove&&i.onRemove(o[a].spec),o.splice(a--,1));return o.length||r.length?new Ys(o,r):Qs}function ro(e,t){return e.from-t.from||e.to-t.to}function so(e){for(var t=e,n=0;n<t.length-1;n++){var i=t[n];if(i.from!=i.to)for(var r=n+1;r<t.length;r++){var s=t[r];if(s.from!=i.from){s.from<i.to&&(t==e&&(t=e.slice()),t[n]=i.copy(i.from,s.from),oo(t,r,i.copy(s.from,i.to)));break}s.to!=i.to&&(t==e&&(t=e.slice()),t[r]=s.copy(s.from,i.to),oo(t,r+1,s.copy(i.to,s.to)))}}return t}function oo(e,t,n){for(;t<e.length&&ro(n,e[t])>0;)t++;e.splice(t,0,n)}function ao(e){var t=[];return e.someProp("decorations",(function(n){var i=n(e.state);i&&i!=Qs&&t.push(i)})),e.cursorWrapper&&t.push(Ys.create(e.state.doc,[e.cursorWrapper.deco])),Xs.from(t)}Xs.prototype.map=function(e,t){var n=this.members.map((function(n){return n.map(e,t,Js)}));return Xs.from(n)},Xs.prototype.forChild=function(e,t){if(t.isLeaf)return Ys.empty;for(var n=[],i=0;i<this.members.length;i++){var r=this.members[i].forChild(e,t);r!=Qs&&(r instanceof Xs?n=n.concat(r.members):n.push(r))}return Xs.from(n)},Xs.prototype.eq=function(e){if(!(e instanceof Xs)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},Xs.prototype.locals=function(e){for(var t,n=!0,i=0;i<this.members.length;i++){var r=this.members[i].localsInner(e);if(r.length)if(t){n&&(t=t.slice(),n=!1);for(var s=0;s<r.length;s++)t.push(r[s])}else t=r}return t?so(n?t:t.sort(ro)):Ks},Xs.from=function(e){switch(e.length){case 0:return Qs;case 1:return e[0];default:return new Xs(e)}};var lo=function(e,t){this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(fo),this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=po(this),this.markCursor=null,this.cursorWrapper=null,uo(this),this.nodeViews=mo(this),this.docView=gr(this.state.doc,ho(this),ao(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.lastAndroidDelete=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new ys(e,(function(t,n,i,r){return function(e,t,n,i,r){if(t<0){var s=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,o=Or(e,s);if(o&&!e.state.selection.eq(o)){var a=e.state.tr.setSelection(o);"pointer"==s?a.setMeta("pointer",!0):"key"==s&&a.scrollIntoView(),e.dispatch(a)}}else{var l=e.state.doc.resolve(t),c=l.sharedDepth(n);t=l.before(c+1),n=e.state.doc.resolve(n).after(c+1);var h=e.state.selection,d=function(e,t,n){var i=e.docView.parseRange(t,n),r=i.node,s=i.fromOffset,o=i.toOffset,a=i.from,l=i.to,c=e.root.getSelection(),h=null,d=c.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(h=[{node:d,offset:c.anchorOffset}],Zi(c)||h.push({node:c.focusNode,offset:c.focusOffset})),Si.chrome&&8===e.lastKeyCode)for(var u=o;u>s;u--){var p=r.childNodes[u-1],m=p.pmViewDesc;if("BR"==p.nodeName&&!m){o=u;break}if(!m||m.size)break}var f=e.state.doc,g=e.someProp("domParser")||rn.fromSchema(e.state.schema),v=f.resolve(a),y=null,x=g.parse(r,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:s,to:o,preserveWhitespace:!v.parent.type.spec.code||"full",editableContent:!0,findPositions:h,ruleFromNode:ts,context:v});if(h&&null!=h[0].pos){var b=h[0].pos,w=h[1]&&h[1].pos;null==w&&(w=b),y={anchor:b+a,head:w+a}}return{doc:x,sel:y,from:a,to:l}}(e,t,n);if(Si.chrome&&e.cursorWrapper&&d.sel&&d.sel.anchor==e.cursorWrapper.deco.from){var u=e.cursorWrapper.deco.type.toDOM.nextSibling,p=u&&u.nodeValue?u.nodeValue.length:1;d.sel={anchor:d.sel.anchor+p,head:d.sel.anchor+p}}var m,f,g=e.state.doc,v=g.slice(d.from,d.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(m=e.state.selection.to,f="end"):(m=e.state.selection.from,f="start"),e.lastKeyCode=null;var y=function(e,t,n,i,r){var s=e.findDiffStart(t,n);if(null==s)return null;var o=e.findDiffEnd(t,n+e.size,n+t.size),a=o.a,l=o.b;return"end"==r&&(i-=a+Math.max(0,s-Math.min(a,l))-s),a<s&&e.size<t.size?(l=(s-=i<=s&&i>=a?s-i:0)+(l-a),a=s):l<s&&(a=(s-=i<=s&&i>=l?s-i:0)+(a-l),l=s),{start:s,endA:a,endB:l}}(v.content,d.doc.content,d.from,m,f);if(!y){if(!(i&&h instanceof ri&&!h.empty&&h.$head.sameParent(h.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if((Si.ios&&e.lastIOSEnter>Date.now()-225||Si.android)&&r.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName}))&&e.someProp("handleKeyDown",(function(t){return t(e,ji(13,"Enter"))})))return void(e.lastIOSEnter=0);if(d.sel){var x=ns(e,e.state.doc,d.sel);x&&!x.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(x))}return}y={start:h.from,endA:h.to,endB:h.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&y.start==y.endB&&e.state.selection instanceof ri&&(y.start>e.state.selection.from&&y.start<=e.state.selection.from+2?y.start=e.state.selection.from:y.endA<e.state.selection.to&&y.endA>=e.state.selection.to-2&&(y.endB+=e.state.selection.to-y.endA,y.endA=e.state.selection.to)),Si.ie&&Si.ie_version<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>d.from&&" "==d.doc.textBetween(y.start-d.from-1,y.start-d.from+1)&&(y.start--,y.endA--,y.endB--);var b,w=d.doc.resolveNoCache(y.start-d.from),C=d.doc.resolveNoCache(y.endB-d.from),_=w.sameParent(C)&&w.parent.inlineContent;if((Si.ios&&e.lastIOSEnter>Date.now()-225&&(!_||r.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!_&&w.pos<d.doc.content.size&&(b=ti.findFrom(d.doc.resolve(w.pos+1),1,!0))&&b.head==C.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,ji(13,"Enter"))})))e.lastIOSEnter=0;else if(e.state.selection.anchor>y.start&&function(e,t,n,i,r){if(!i.parent.isTextblock||n-t<=r.pos-i.pos||is(i,!0,!1)<r.pos)return!1;var s=e.resolve(t);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;var o=e.resolve(is(s,!0,!0));return!(!o.parent.isTextblock||o.pos>n||is(o,!0,!1)<n)&&i.parent.content.cut(i.parentOffset).eq(o.parent.content)}(g,y.start,y.endA,w,C)&&e.someProp("handleKeyDown",(function(t){return t(e,ji(8,"Backspace"))})))Si.android&&Si.chrome&&e.domObserver.suppressSelectionUpdates();else{Si.chrome&&Si.android&&y.toB==y.from&&(e.lastAndroidDelete=Date.now()),Si.android&&!_&&w.start()!=C.start()&&0==C.parentOffset&&w.depth==C.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==y.endA&&(y.endB-=2,C=d.doc.resolveNoCache(y.endB-d.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,ji(13,"Enter"))}))}),20));var A,S,k,I,P=y.start,E=y.endA;if(_)if(w.pos==C.pos)Si.ie&&Si.ie_version<=11&&0==w.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return $r(e)}),20)),A=e.state.tr.delete(P,E),S=g.resolve(y.start).marksAcross(g.resolve(y.endA));else if(y.endA==y.endB&&(I=g.resolve(y.start))&&(k=function(e,t){for(var n,i,r,s=e.firstChild.marks,o=t.firstChild.marks,a=s,l=o,c=0;c<o.length;c++)a=o[c].removeFromSet(a);for(var h=0;h<s.length;h++)l=s[h].removeFromSet(l);if(1==a.length&&0==l.length)i=a[0],n="add",r=function(e){return e.mark(i.addToSet(e.marks))};else{if(0!=a.length||1!=l.length)return null;i=l[0],n="remove",r=function(e){return e.mark(i.removeFromSet(e.marks))}}for(var d=[],u=0;u<t.childCount;u++)d.push(r(t.child(u)));if(rt.from(d).eq(e))return{mark:i,type:n}}(w.parent.content.cut(w.parentOffset,C.parentOffset),I.parent.content.cut(I.parentOffset,y.endA-I.start()))))A=e.state.tr,"add"==k.type?A.addMark(P,E,k.mark):A.removeMark(P,E,k.mark);else if(w.parent.child(w.index()).isText&&w.index()==C.index()-(C.textOffset?0:1)){var T=w.parent.textBetween(w.parentOffset,C.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,P,E,T)})))return;A=e.state.tr.insertText(T,P,E)}if(A||(A=e.state.tr.replace(P,E,d.doc.slice(y.start-d.from,y.endB-d.from))),d.sel){var M=ns(e,A.doc,d.sel);M&&!(Si.chrome&&Si.android&&e.composing&&M.empty&&(y.start!=y.endB||e.lastAndroidDelete<Date.now()-100)&&(M.head==P||M.head==A.mapping.map(E)-1)||Si.ie&&M.empty&&M.head==P)&&A.setSelection(M)}S&&A.ensureMarks(S),e.dispatch(A.scrollIntoView())}}}(e,t,n,i,r)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var n=bs[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||As(e,t)||!e.editable&&t.type in ws||n(e,t)})};for(var n in bs)t(n);Si.safari&&e.dom.addEventListener("input",(function(){return null})),_s(e)}(this),this.prevDirectPlugins=[],this.pluginViews=[],this.updatePluginViews()},co={props:{configurable:!0},root:{configurable:!0},isDestroyed:{configurable:!0}};function ho(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),t.translate="no",e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var i in n)"class"==i&&(t.class+=" "+n[i]),"style"==i?t.style=(t.style?t.style+";":"")+n[i]:t[i]||"contenteditable"==i||"nodeName"==i||(t[i]=String(n[i]))})),[Gs.node(0,e.state.doc.content.size,t)]}function uo(e){if(e.markCursor){var t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:Gs.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function po(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function mo(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}function fo(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}co.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},lo.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&_s(this),this._props=e,e.plugins&&(e.plugins.forEach(fo),this.directPlugins=e.plugins),this.updateStateInner(e.state,!0)},lo.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var i in t.state=this.state,e)t[i]=e[i];this.update(t)},lo.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},lo.prototype.updateStateInner=function(e,t){var n=this,i=this.state,r=!1,s=!1;if(e.storedMarks&&this.composing&&(Ls(this),s=!0),this.state=e,t){var o=mo(this);(function(e,t){var n=0,i=0;for(var r in e){if(e[r]!=t[r])return!0;n++}for(var s in t)i++;return n!=i})(o,this.nodeViews)&&(this.nodeViews=o,r=!0),_s(this)}this.editable=po(this),uo(this);var a=ao(this),l=ho(this),c=t?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=r||!this.docView.matchesNode(e.doc,l,a);!h&&e.selection.eq(i.selection)||(s=!0);var d,u,p,m,f,g,v,y,x,b,w="preserve"==c&&s&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,i=e.dom.getBoundingClientRect(),r=Math.max(0,i.top),s=(i.left+i.right)/2,o=r+1;o<Math.min(innerHeight,i.bottom);o+=5){var a=e.root.elementFromPoint(s,o);if(a!=e.dom&&e.dom.contains(a)){var l=a.getBoundingClientRect();if(l.top>=r-20){t=a,n=l.top;break}}}return{refDOM:t,refTop:n,stack:qi(e.dom)}}(this);if(s){this.domObserver.stop();var C=h&&(Si.ie||Si.chrome)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&(m=i.selection,f=e.selection,g=Math.min(m.$anchor.sharedDepth(m.head),f.$anchor.sharedDepth(f.head)),m.$anchor.start(g)!=f.$anchor.start(g));if(h){var _=Si.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!r&&this.docView.update(e.doc,l,a,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=gr(e.doc,l,a,this.dom,this)),_&&!this.trackWrites&&(C=!0)}C||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(d=this,u=d.docView.domFromPos(d.state.selection.anchor,0),p=d.root.getSelection(),Bi(u.node,u.offset,p.anchorNode,p.anchorOffset)))?$r(this,C):(Fr(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(i),"reset"==c)this.dom.scrollTop=0;else if("to selection"==c){var A=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||(e.selection instanceof oi?Vi(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),A):Vi(this,this.coordsAtPos(e.selection.head,1),A))}else w&&(y=(v=w).refDOM,x=v.refTop,Gi(v.stack,0==(b=y?y.getBoundingClientRect().top:0)?0:b-x))},lo.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},lo.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var i=0;i<this.directPlugins.length;i++){var r=this.directPlugins[i];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(var s=0;s<this.state.plugins.length;s++){var o=this.state.plugins[s];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},lo.prototype.someProp=function(e,t){var n,i=this._props&&this._props[e];if(null!=i&&(n=t?t(i):i))return n;for(var r=0;r<this.directPlugins.length;r++){var s=this.directPlugins[r].props[e];if(null!=s&&(n=t?t(s):s))return n}var o=this.state.plugins;if(o)for(var a=0;a<o.length;a++){var l=o[a].props[e];if(null!=l&&(n=t?t(l):l))return n}},lo.prototype.hasFocus=function(){return this.root.activeElement==this.dom},lo.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(Wi)return e.focus(Wi);var t=qi(e);e.focus(null==Wi?{get preventScroll(){return Wi={preventScroll:!0},!0}}:void 0),Wi||(Wi=!1,Gi(t,0))}(this.dom),$r(this),this.domObserver.start()},co.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},lo.prototype.posAtCoords=function(e){return Qi(this,e)},lo.prototype.coordsAtPos=function(e,t){return void 0===t&&(t=1),tr(this,e,t)},lo.prototype.domAtPos=function(e,t){return void 0===t&&(t=0),this.docView.domFromPos(e,t)},lo.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},lo.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var i=this.docView.posFromDOM(e,t,n);if(null==i)throw new RangeError("DOM position not inside the editor");return i},lo.prototype.endOfTextblock=function(e,t){return function(e,t,n){return or==t&&ar==n?lr:(or=t,ar=n,lr="up"==n||"down"==n?function(e,t,n){var i=t.selection,r="up"==n?i.$from:i.$to;return rr(e,t,(function(){for(var t=e.docView.domFromPos(r.pos,"up"==n?-1:1).node;;){var i=e.docView.nearestDesc(t,!0);if(!i)break;if(i.node.isBlock){t=i.dom;break}t=i.dom.parentNode}for(var s=tr(e,r.pos,1),o=t.firstChild;o;o=o.nextSibling){var a=void 0;if(1==o.nodeType)a=o.getClientRects();else{if(3!=o.nodeType)continue;a=$i(o,0,o.nodeValue.length).getClientRects()}for(var l=0;l<a.length;l++){var c=a[l];if(c.bottom>c.top+1&&("up"==n?s.top-c.top>2*(c.bottom-s.top):c.bottom-s.bottom>2*(s.bottom-c.top)))return!1}}return!0}))}(e,t,n):function(e,t,n){var i=t.selection.$head;if(!i.parent.isTextblock)return!1;var r=i.parentOffset,s=!r,o=r==i.parent.content.size,a=e.root.getSelection();return sr.test(i.parent.textContent)&&a.modify?rr(e,t,(function(){var t=a.getRangeAt(0),r=a.focusNode,s=a.focusOffset,o=a.caretBidiLevel;a.modify("move",n,"character");var l=!(i.depth?e.docView.domAfterPos(i.before()):e.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||r==a.focusNode&&s==a.focusOffset;return a.removeAllRanges(),a.addRange(t),null!=o&&(a.caretBidiLevel=o),l})):"left"==n||"backward"==n?s:o}(e,t,n))}(this,t||this.state,e)},lo.prototype.destroy=function(){this.docView&&(function(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ao(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},co.isDestroyed.get=function(){return null==this.docView},lo.prototype.dispatchEvent=function(e){return function(e,t){As(e,t)||!bs[t.type]||!e.editable&&t.type in ws||bs[t.type](e,t)}(this,e)},lo.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(lo.prototype,co);var go=function(e,t){var n=this;this.editorView=e,this.width=t.width||1,this.color=t.color||"black",this.class=t.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(t){var i=function(e){return n[t](e)};return e.dom.addEventListener(t,i),{name:t,handler:i}}))};go.prototype.destroy=function(){var e=this;this.handlers.forEach((function(t){var n=t.name,i=t.handler;return e.editorView.dom.removeEventListener(n,i)}))},go.prototype.update=function(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())},go.prototype.setCursor=function(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},go.prototype.updateOverlay=function(){var e,t=this.editorView.state.doc.resolve(this.cursorPos);if(!t.parent.inlineContent){var n=t.nodeBefore,i=t.nodeAfter;if(n||i){var r=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),s=n?r.bottom:r.top;n&&i&&(s=(s+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:r.left,right:r.right,top:s-this.width/2,bottom:s+this.width/2}}}if(!e){var o=this.editorView.coordsAtPos(this.cursorPos);e={left:o.left-this.width/2,right:o.left+this.width/2,top:o.top,bottom:o.bottom}}var a,l,c=this.editorView.dom.offsetParent;if(this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!c||c==document.body&&"static"==getComputedStyle(c).position)a=-pageXOffset,l=-pageYOffset;else{var h=c.getBoundingClientRect();a=h.left-c.scrollLeft,l=h.top-c.scrollTop}this.element.style.left=e.left-a+"px",this.element.style.top=e.top-l+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"},go.prototype.scheduleRemoval=function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return t.setCursor(null)}),e)},go.prototype.dragover=function(e){if(this.editorView.editable){var t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=n&&n.type.spec.disableDropCursor,r="function"==typeof i?i(this.editorView,t):i;if(t&&!r){var s=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&null==(s=Zn(this.editorView.state.doc,s,this.editorView.dragging.slice)))return this.setCursor(null);this.setCursor(s),this.scheduleRemoval(5e3)}}},go.prototype.dragend=function(){this.scheduleRemoval(20)},go.prototype.drop=function(){this.scheduleRemoval(20)},go.prototype.dragleave=function(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)};for(var vo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},yo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},xo="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),bo="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),wo="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),Co="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),_o="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Ao=xo&&(Co||+xo[1]<57)||wo&&Co,So=0;So<10;So++)vo[48+So]=vo[96+So]=String(So);for(So=1;So<=24;So++)vo[So+111]="F"+So;for(So=65;So<=90;So++)vo[So]=String.fromCharCode(So+32),yo[So]=String.fromCharCode(So);for(var ko in vo)yo.hasOwnProperty(ko)||(yo[ko]=vo[ko]);var Io="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function Po(e){var t,n,i,r,s=e.split(/-(?!$)/),o=s[s.length-1];"Space"==o&&(o=" ");for(var a=0;a<s.length-1;a++){var l=s[a];if(/^(cmd|meta|m)$/i.test(l))r=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else if(/^s(hift)?$/i.test(l))i=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);Io?r=!0:n=!0}}return t&&(o="Alt-"+o),n&&(o="Ctrl-"+o),r&&(o="Meta-"+o),i&&(o="Shift-"+o),o}function Eo(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function To(e){return new wi({props:{handleKeyDown:Mo(e)}})}function Mo(e){var t=function(e){var t=Object.create(null);for(var n in e)t[Po(n)]=e[n];return t}(e);return function(e,n){var i,r=function(e){var t=!(Ao&&(e.ctrlKey||e.altKey||e.metaKey)||(bo||_o)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?yo:vo)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),s=1==r.length&&" "!=r,o=t[Eo(r,n,!s)];if(o&&o(e.state,e.dispatch,e))return!0;if(s&&(n.shiftKey||n.altKey||n.metaKey||r.charCodeAt(0)>127)&&(i=vo[n.keyCode])&&i!=r){var a=t[Eo(i,n,!0)];if(a&&a(e.state,e.dispatch,e))return!0}else if(s&&n.shiftKey){var l=t[Eo(r,n,!0)];if(l&&l(e.state,e.dispatch,e))return!0}return!1}}var Oo=function(e){function t(t){e.call(this,t,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,i){var r=n.resolve(i.map(this.head));return t.valid(r)?new t(r):e.near(r)},t.prototype.content=function(){return dt.empty},t.prototype.eq=function(e){return e instanceof t&&e.head==this.head},t.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(e.resolve(n.pos))},t.prototype.getBookmark=function(){return new Do(this.anchor)},t.valid=function(e){var t=e.parent;if(t.isTextblock||!function(e){for(var t=e.depth;t>=0;t--){var n=e.index(t);if(0!=n)for(var i=e.node(t).child(n-1);;i=i.lastChild){if(0==i.childCount&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}(e)||!function(e){for(var t=e.depth;t>=0;t--){var n=e.indexAfter(t),i=e.node(t);if(n!=i.childCount)for(var r=i.child(n);;r=r.firstChild){if(0==r.childCount&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}(e))return!1;var n=t.type.spec.allowGapCursor;if(null!=n)return n;var i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock},t.findFrom=function(e,n,i){e:for(;;){if(!i&&t.valid(e))return e;for(var r=e.pos,s=null,o=e.depth;;o--){var a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}if(0==o)return null;r+=n;var l=e.doc.resolve(r);if(t.valid(l))return l}for(;;){var c=n>0?s.firstChild:s.lastChild;if(!c){if(s.isAtom&&!s.isText&&!oi.isSelectable(s)){e=e.doc.resolve(r+s.nodeSize*n),i=!1;continue e}break}s=c,r+=n;var h=e.doc.resolve(r);if(t.valid(h))return h}return null}},t}(ti);Oo.prototype.visible=!1,ti.jsonID("gapcursor",Oo);var Do=function(e){this.pos=e};Do.prototype.map=function(e){return new Do(e.map(this.pos))},Do.prototype.resolve=function(e){var t=e.resolve(this.pos);return Oo.valid(t)?new Oo(t):ti.near(t)};var $o=Mo({ArrowLeft:Bo("horiz",-1),ArrowRight:Bo("horiz",1),ArrowUp:Bo("vert",-1),ArrowDown:Bo("vert",1)});function Bo(e,t){var n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,i,r){var s=e.selection,o=t>0?s.$to:s.$from,a=s.empty;if(s instanceof ri){if(!r.endOfTextblock(n)||0==o.depth)return!1;a=!1,o=e.doc.resolve(t>0?o.after():o.before())}var l=Oo.findFrom(o,t,a);return!!l&&(i&&i(e.tr.setSelection(new Oo(l))),!0)}}function Lo(e,t,n){if(!e.editable)return!1;var i=e.state.doc.resolve(t);if(!Oo.valid(i))return!1;var r=e.posAtCoords({left:n.clientX,top:n.clientY}).inside;return!(r>-1&&oi.isSelectable(e.state.doc.nodeAt(r))||(e.dispatch(e.state.tr.setSelection(new Oo(i))),0))}function No(e){if(!(e.selection instanceof Oo))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",Ys.create(e.doc,[Gs.widget(e.selection.head,t,{key:"gapcursor"})])}function Ro(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function Fo(e,t,n){for(;e;e="start"==t?e.firstChild:e.lastChild){if(e.isTextblock)return!0;if(n&&1!=e.childCount)return!1}return!1}function Zo(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function jo(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function zo(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Uo(e,t){var n=e.selection,i=n.$head,r=n.$anchor;if(!i.parent.type.spec.code||!i.sameParent(r))return!1;var s=i.node(-1),o=i.indexAfter(-1),a=zo(s.contentMatchAt(o));if(!s.canReplaceWith(o,o,a))return!1;if(t){var l=i.after(),c=e.tr.replaceWith(l,l,a.createAndFill());c.setSelection(ti.near(c.doc.resolve(l),1)),t(c.scrollIntoView())}return!0}function Ho(e,t,n){var i,r,s=t.nodeBefore,o=t.nodeAfter;if(s.type.spec.isolating||o.type.spec.isolating)return!1;if(function(e,t,n){var i=t.nodeBefore,r=t.nodeAfter,s=t.index();return!(!(i&&r&&i.type.compatibleContent(r.type))||(!i.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(s,s+1)||!r.isTextblock&&!Fn(e.doc,t.pos)||(n&&n(e.tr.clearIncompatible(t.pos,i.type,i.contentMatchAt(i.childCount)).join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;var a=t.parent.canReplace(t.index(),t.index()+1);if(a&&(i=(r=s.contentMatchAt(s.childCount)).findWrapping(o.type))&&r.matchType(i[0]||o.type).validEnd){if(n){for(var l=t.pos+o.nodeSize,c=rt.empty,h=i.length-1;h>=0;h--)c=rt.from(i[h].create(null,c));c=rt.from(s.copy(c));var d=e.tr.step(new On(t.pos-1,l,t.pos,l,new dt(c,1,0),i.length,!0)),u=l+2*i.length;Fn(d.doc,u)&&d.join(u),n(d.scrollIntoView())}return!0}var p=ti.findFrom(t,1),m=p&&p.$from.blockRange(p.$to),f=m&&Bn(m);if(null!=f&&f>=t.depth)return n&&n(e.tr.lift(m,f).scrollIntoView()),!0;if(a&&Fo(o,"start",!0)&&Fo(s,"end")){for(var g=s,v=[];v.push(g),!g.isTextblock;)g=g.lastChild;for(var y=o,x=1;!y.isTextblock;y=y.firstChild)x++;if(g.canReplace(g.childCount,g.childCount,y.content)){if(n){for(var b=rt.empty,w=v.length-1;w>=0;w--)b=rt.from(v[w].copy(b));n(e.tr.step(new On(t.pos-v.length,t.pos+o.nodeSize,t.pos+x,t.pos+o.nodeSize-x,new dt(b,v.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function Vo(e,t){return function(n,i){var r=n.selection,s=r.from,o=r.to,a=!1;return n.doc.nodesBetween(s,o,(function(i,r){if(a)return!1;if(i.isTextblock&&!i.hasMarkup(e,t))if(i.type==e)a=!0;else{var s=n.doc.resolve(r),o=s.index();a=s.parent.canReplaceWith(o,o+1,e)}})),!!a&&(i&&i(n.tr.setBlockType(s,o,e,t).scrollIntoView()),!0)}}function qo(e,t){return function(n,i){var r=n.selection,s=r.empty,o=r.$cursor,a=r.ranges;if(s&&!o||!function(e,t,n){for(var i=function(i){var r=t[i],s=r.$from,o=r.$to,a=0==s.depth&&e.type.allowsMarkType(n);if(e.nodesBetween(s.pos,o.pos,(function(e){if(a)return!1;a=e.inlineContent&&e.type.allowsMarkType(n)})),a)return{v:!0}},r=0;r<t.length;r++){var s=i(r);if(s)return s.v}return!1}(n.doc,a,e))return!1;if(i)if(o)e.isInSet(n.storedMarks||o.marks())?i(n.tr.removeStoredMark(e)):i(n.tr.addStoredMark(e.create(t)));else{for(var l=!1,c=n.tr,h=0;!l&&h<a.length;h++){var d=a[h],u=d.$from,p=d.$to;l=n.doc.rangeHasMark(u.pos,p.pos,e)}for(var m=0;m<a.length;m++){var f=a[m],g=f.$from,v=f.$to;if(l)c.removeMark(g.pos,v.pos,e);else{var y=g.pos,x=v.pos,b=g.nodeAfter,w=v.nodeBefore,C=b&&b.isText?/^\s*/.exec(b.text)[0].length:0,_=w&&w.isText?/\s*$/.exec(w.text)[0].length:0;y+C<x&&(y+=C,x-=_),c.addMark(y,x,e.create(t))}}i(c.scrollIntoView())}return!0}}function Go(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,n,i){for(var r=0;r<e.length;r++)if(e[r](t,n,i))return!0;return!1}}var Wo=Go(Ro,(function(e,t,n){var i=e.selection.$cursor;if(!i||(n?!n.endOfTextblock("backward",e):i.parentOffset>0))return!1;var r=Zo(i);if(!r){var s=i.blockRange(),o=s&&Bn(s);return null!=o&&(t&&t(e.tr.lift(s,o).scrollIntoView()),!0)}var a=r.nodeBefore;if(!a.type.spec.isolating&&Ho(e,r,t))return!0;if(0==i.parent.content.size&&(Fo(a,"end")||oi.isSelectable(a))){if(t){var l=e.tr.deleteRange(i.before(),i.after());l.setSelection(Fo(a,"end")?ti.findFrom(l.doc.resolve(l.mapping.map(r.pos,-1)),-1):oi.create(l.doc,r.pos-a.nodeSize)),t(l.scrollIntoView())}return!0}return!(!a.isAtom||r.depth!=i.depth-1||(t&&t(e.tr.delete(r.pos-a.nodeSize,r.pos).scrollIntoView()),0))}),(function(e,t,n){var i=e.selection,r=i.$head,s=r;if(!i.empty)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=Zo(r)}var o=s&&s.nodeBefore;return!(!o||!oi.isSelectable(o)||(t&&t(e.tr.setSelection(oi.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),0))})),Ko=Go(Ro,(function(e,t,n){var i=e.selection.$cursor;if(!i||(n?!n.endOfTextblock("forward",e):i.parentOffset<i.parent.content.size))return!1;var r=jo(i);if(!r)return!1;var s=r.nodeAfter;if(Ho(e,r,t))return!0;if(0==i.parent.content.size&&(Fo(s,"start")||oi.isSelectable(s))){if(t){var o=e.tr.deleteRange(i.before(),i.after());o.setSelection(Fo(s,"start")?ti.findFrom(o.doc.resolve(o.mapping.map(r.pos)),1):oi.create(o.doc,o.mapping.map(r.pos))),t(o.scrollIntoView())}return!0}return!(!s.isAtom||r.depth!=i.depth-1||(t&&t(e.tr.delete(r.pos,r.pos+s.nodeSize).scrollIntoView()),0))}),(function(e,t,n){var i=e.selection,r=i.$head,s=r;if(!i.empty)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=jo(r)}var o=s&&s.nodeAfter;return!(!o||!oi.isSelectable(o)||(t&&t(e.tr.setSelection(oi.create(e.doc,s.pos)).scrollIntoView()),0))})),Jo={Enter:Go((function(e,t){var n=e.selection,i=n.$head,r=n.$anchor;return!(!i.parent.type.spec.code||!i.sameParent(r)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))}),(function(e,t){var n=e.selection,i=n.$from,r=n.$to;if(n instanceof li||i.parent.inlineContent||r.parent.inlineContent)return!1;var s=zo(r.parent.contentMatchAt(r.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){var o=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,a=e.tr.insert(o,s.createAndFill());a.setSelection(ri.create(a.doc,o+1)),t(a.scrollIntoView())}return!0}),(function(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var i=n.before();if(Rn(e.doc,i))return t&&t(e.tr.split(i).scrollIntoView()),!0}var r=n.blockRange(),s=r&&Bn(r);return null!=s&&(t&&t(e.tr.lift(r,s).scrollIntoView()),!0)}),(function(e,t){var n=e.selection,i=n.$from,r=n.$to;if(e.selection instanceof oi&&e.selection.node.isBlock)return!(!i.parentOffset||!Rn(e.doc,i.pos)||(t&&t(e.tr.split(i.pos).scrollIntoView()),0));if(!i.parent.isBlock)return!1;if(t){var s=r.parentOffset==r.parent.content.size,o=e.tr;(e.selection instanceof ri||e.selection instanceof li)&&o.deleteSelection();var a=0==i.depth?null:zo(i.node(-1).contentMatchAt(i.indexAfter(-1))),l=s&&a?[{type:a}]:null,c=Rn(o.doc,o.mapping.map(i.pos),1,l);if(l||c||!Rn(o.doc,o.mapping.map(i.pos),1,a&&[{type:a}])||(l=[{type:a}],c=!0),c&&(o.split(o.mapping.map(i.pos),1,l),!s&&!i.parentOffset&&i.parent.type!=a)){var h=o.mapping.map(i.before()),d=o.doc.resolve(h);i.node(-1).canReplaceWith(d.index(),d.index()+1,a)&&o.setNodeMarkup(o.mapping.map(i.before()),a)}t(o.scrollIntoView())}return!0})),"Mod-Enter":Uo,Backspace:Wo,"Mod-Backspace":Wo,"Shift-Backspace":Wo,Delete:Ko,"Mod-Delete":Ko,"Mod-a":function(e,t){return t&&t(e.tr.setSelection(new li(e.doc))),!0}},Yo={"Ctrl-h":Jo.Backspace,"Alt-Backspace":Jo["Mod-Backspace"],"Ctrl-d":Jo.Delete,"Ctrl-Alt-Backspace":Jo["Mod-Delete"],"Alt-Delete":Jo["Mod-Delete"],"Alt-d":Jo["Mod-Delete"]};for(var Qo in Jo)Yo[Qo]=Jo[Qo];var Xo=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?Yo:Jo,ea=function(e,t){var n;this.match=e,this.handler="string"==typeof t?(n=t,function(e,t,i,r){var s=n;if(t[1]){var o=t[0].lastIndexOf(t[1]);s+=t[0].slice(o+t[1].length);var a=(i+=o)-r;a>0&&(s=t[0].slice(o-a,o)+s,i=r)}return e.tr.insertText(s,i,r)}):t};function ta(e,t,n,i,r,s){if(e.composing)return!1;var o=e.state,a=o.doc.resolve(t);if(a.parent.type.spec.code)return!1;for(var l=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,null,"")+i,c=0;c<r.length;c++){var h=r[c].match.exec(l),d=h&&r[c].handler(o,h,t-(h[0].length-i.length),n);if(d)return e.dispatch(d.setMeta(s,{transform:d,from:t,to:n,text:i})),!0}return!1}function na(e,t){for(var n=e.plugins,i=0;i<n.length;i++){var r=n[i],s=void 0;if(r.spec.isInputRules&&(s=r.getState(e))){if(t){for(var o=e.tr,a=s.transform,l=a.steps.length-1;l>=0;l--)o.step(a.steps[l].invert(a.docs[l]));if(s.text){var c=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,e.schema.text(s.text,c))}else o.delete(s.from,s.to);t(o)}return!0}}return!1}function ia(e,t,n,i){return new ea(e,(function(e,r,s,o){var a=n instanceof Function?n(r):n,l=e.tr.delete(s,o),c=l.doc.resolve(s).blockRange(),h=c&&Ln(c,t,a);if(!h)return null;l.wrap(c,h);var d=l.doc.resolve(s-1).nodeBefore;return d&&d.type==t&&Fn(l.doc,s-1)&&(!i||i(r,d))&&l.join(s-1),l}))}function ra(e,t,n){return new ea(e,(function(e,i,r,s){var o=e.doc.resolve(r),a=n instanceof Function?n(i):n;return o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t)?e.tr.delete(r,s).setBlockType(r,r,t,a):null}))}function sa(e){return t=>function(e,t){for(let n=e.depth;n>0;n-=1){const i=e.node(n);if(t(i))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:i}}}(t.$from,e)}function oa(e,t){const{from:n,to:i}=e.selection;let r=[];e.doc.nodesBetween(n,i,(e=>{r=[...r,...e.marks]}));const s=r.find((e=>e.type.name===t.name));return s?s.attrs:{}}function aa(e=null,t=null){if(!e||!t)return!1;const n=e.parent.childAfter(e.parentOffset);if(!n.node)return!1;const i=n.node.marks.find((e=>e.type===t));if(!i)return!1;let r=e.index(),s=e.start()+n.offset,o=r+1,a=s+n.node.nodeSize;for(;r>0&&i.isInSet(e.parent.child(r-1).marks);)r-=1,s-=e.parent.child(r).nodeSize;for(;o<e.parent.childCount&&i.isInSet(e.parent.child(o).marks);)a+=e.parent.child(o).nodeSize,o+=1;return{from:s,to:a}}function la(e,t){const{from:n,to:i}=e.selection;let r=[];e.doc.nodesBetween(n,i,(e=>{r=[...r,e]}));const s=r.reverse().find((e=>e.type.name===t.name));return s?s.attrs:{}}function ca(e,t,n={}){const i=(r=t,function(e){if(function(e){return e instanceof oi}(e)){const{node:t}=e,{$from:n}=e;if(function(e,t){return Array.isArray(e)&&e.indexOf(t.type)>-1||t.type===e}(r,t))return{node:t,pos:n.pos,depth:n.depth}}})(e.selection)||sa((e=>e.type===t))(e.selection);var r;return Object.keys(n).length&&i?i.node.hasMarkup(t,{...i.node.attrs,...n}):!!i}function ha(e){return function(t,n){var i=t.selection,r=i.$from,s=i.$to,o=r.blockRange(s,(function(t){return t.childCount&&t.firstChild.type==e}));return!!o&&(!n||(r.node(o.depth-1).type==e?function(e,t,n,i){var r=e.tr,s=i.end,o=i.$to.end(i.depth);return s<o&&(r.step(new On(s-1,o,s,o,new dt(rt.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new Et(r.doc.resolve(i.$from.pos),r.doc.resolve(o),i.depth)),t(r.lift(i,Bn(i)).scrollIntoView()),!0}(t,n,e,o):function(e,t,n){for(var i=e.tr,r=n.parent,s=n.end,o=n.endIndex-1,a=n.startIndex;o>a;o--)s-=r.child(o).nodeSize,i.delete(s-1,s+1);var l=i.doc.resolve(n.start),c=l.nodeAfter;if(i.mapping.map(n.end)!=n.start+l.nodeAfter.nodeSize)return!1;var h=0==n.startIndex,d=n.endIndex==r.childCount,u=l.node(-1),p=l.index(-1);if(!u.canReplace(p+(h?0:1),p+1,c.content.append(d?rt.empty:rt.from(r))))return!1;var m=l.pos,f=m+c.nodeSize;return i.step(new On(m-(h?1:0),f+(d?1:0),m+1,f-1,new dt((h?rt.empty:rt.from(r.copy(rt.empty))).append(d?rt.empty:rt.from(r.copy(rt.empty))),h?0:1,d?0:1),h?0:1)),t(i.scrollIntoView()),!0}(t,n,o)))}}function da(e){return function(t,n){var i=t.selection,r=i.$from,s=i.$to,o=r.blockRange(s,(function(t){return t.childCount&&t.firstChild.type==e}));if(!o)return!1;var a=o.startIndex;if(0==a)return!1;var l=o.parent,c=l.child(a-1);if(c.type!=e)return!1;if(n){var h=c.lastChild&&c.lastChild.type==l.type,d=rt.from(h?e.create():null),u=new dt(rt.from(e.create(null,rt.from(l.type.create(null,d)))),h?3:1,0),p=o.start,m=o.end;n(t.tr.step(new On(p-(h?3:1),m,p,m,u,1,!0)).scrollIntoView())}return!0}}function ua(e,t,n){return new ea(e,((e,i,r,s)=>{const o=n instanceof Function?n(i):n,{tr:a}=e,l=i.length-1;let c=s,h=r;if(i[l]){const n=r+i[0].indexOf(i[l-1]),o=n+i[l-1].length-1,d=n+i[l-1].lastIndexOf(i[l]),u=d+i[l].length,p=function(e,t,n){let i=[];return n.doc.nodesBetween(e,t,((e,t)=>{i=[...i,...e.marks.map((n=>({start:t,end:t+e.nodeSize,mark:n})))]})),i}(r,s,e).filter((e=>{const{excluded:n}=e.mark.type;return n.find((e=>e.name===t.name))})).filter((e=>e.end>n));if(p.length)return!1;u<o&&a.delete(u,o),d>n&&a.delete(n,d),h=n,c=h+i[l].length}return a.addMark(h,c,t.create(o)),a.removeStoredMark(t),a}))}function pa(e,t,n){const i=r=>{const s=[];return r.forEach((r=>{if(r.isText){const{text:i}=r;let o,a=0;do{if(o=e.exec(i),o){const e=o.index,i=e+o[0].length,l=n instanceof Function?n(o[0]):n;e>0&&s.push(r.cut(a,e)),s.push(r.cut(e,i).mark(t.create(l).addToSet(r.marks))),a=i}}while(o);a<i.length&&s.push(r.cut(a))}else s.push(r.copy(i(r.content)))})),rt.fromArray(s)};return new wi({props:{transformPasted:e=>new dt(i(e.content),e.openStart,e.openEnd)}})}function ma(e,t,n){const i=(r,s)=>{const o=[];return r.forEach((r=>{if(r.isText){const{text:i,marks:a}=r;let l,c=0;const h=!!a.filter((e=>"link"===e.type.name))[0];for(;!h&&null!==(l=e.exec(i));)if(s&&s.type.allowsMarkType(t)&&l[1]){const e=l.index,i=e+l[0].length,s=e+l[0].indexOf(l[1]),a=s+l[1].length,h=n instanceof Function?n(l):n;e>0&&o.push(r.cut(c,e)),o.push(r.cut(s,a).mark(t.create(h).addToSet(r.marks))),c=i}c<i.length&&o.push(r.cut(c))}else o.push(r.copy(i(r.content,r)))})),rt.fromArray(o)};return new wi({props:{transformPasted:e=>new dt(i(e.content),e.openStart,e.openEnd)}})}function fa(e,t,n={}){return(i,r,s)=>ca(i,e,n)?Vo(t)(i,r,s):Vo(e,n)(i,r,s)}function ga(e,t){return e.type===t.nodes.bullet_list||e.type===t.nodes.ordered_list||e.type===t.nodes.todo_list}function va(e,t){return(n,i,r)=>{const{schema:s,selection:o}=n,{$from:a,$to:l}=o,c=a.blockRange(l);if(!c)return!1;const h=sa((e=>ga(e,s)))(o);if(c.depth>=1&&h&&c.depth-h.depth<=1){if(h.node.type===e)return ha(t)(n,i,r);if(ga(h.node,s)&&e.validContent(h.node.content)){const{tr:t}=n;return t.setNodeMarkup(h.pos,e),i&&i(t),!1}}return function(e,t){return function(n,i){var r=n.selection,s=r.$from,o=r.$to,a=s.blockRange(o),l=!1,c=a;if(!a)return!1;if(a.depth>=2&&s.node(a.depth-1).type.compatibleContent(e)&&0==a.startIndex){if(0==s.index(a.depth-1))return!1;var h=n.doc.resolve(a.start-2);c=new Et(h,h,a.depth),a.endIndex<a.parent.childCount&&(a=new Et(s,n.doc.resolve(o.end(a.depth)),a.depth)),l=!0}var d=Ln(c,e,t,a);return!!d&&(i&&i(function(e,t,n,i,r){for(var s=rt.empty,o=n.length-1;o>=0;o--)s=rt.from(n[o].type.create(n[o].attrs,s));e.step(new On(t.start-(i?2:0),t.end,t.start,t.end,new dt(s,0,0),n.length,!0));for(var a=0,l=0;l<n.length;l++)n[l].type==r&&(a=l+1);for(var c=n.length-a,h=t.start+n.length-(i?2:0),d=t.parent,u=t.startIndex,p=t.endIndex,m=!0;u<p;u++,m=!1)!m&&Rn(e.doc,h,c)&&(e.split(h,c),h+=2*c),h+=d.child(u).nodeSize;return e}(n.tr,a,d,l,e).scrollIntoView()),!0)}}(e)(n,i,r)}}function ya(e,t={}){return(n,i,r)=>ca(n,e,t)?function(e,t){var n=e.selection,i=n.$from,r=n.$to,s=i.blockRange(r),o=s&&Bn(s);return null!=o&&(t&&t(e.tr.lift(s,o).scrollIntoView()),!0)}(n,i):function(e,t){return function(n,i){var r=n.selection,s=r.$from,o=r.$to,a=s.blockRange(o),l=a&&Ln(a,e,t);return!!l&&(i&&i(n.tr.wrap(a,l).scrollIntoView()),!0)}}(e,t)(n,i,r)}new ea(/--$/,""),new ea(/\.\.\.$/,""),new ea(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,""),new ea(/"$/,""),new ea(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,""),new ea(/'$/,"");class xa{constructor(e,{editor:t,extension:n,parent:i,node:r,view:s,decorations:o,getPos:a}){this.component=e,this.editor=t,this.extension=n,this.parent=i,this.node=r,this.view=s,this.decorations=o,this.isNode=!!this.node.marks,this.isMark=!this.isNode,this.getPos=this.isMark?this.getMarkPos:a,this.captureEvents=!0,this.dom=this.createDOM(),this.contentDOM=this.vm.$refs.content}createDOM(){const e=t().extend(this.component),n={editor:this.editor,node:this.node,view:this.view,getPos:()=>this.getPos(),decorations:this.decorations,selected:!1,options:this.extension.options,updateAttrs:e=>this.updateAttrs(e)};return"function"==typeof this.extension.setSelection&&(this.setSelection=this.extension.setSelection),"function"==typeof this.extension.update&&(this.update=this.extension.update),this.vm=new e({parent:this.parent,propsData:n}).$mount(),this.vm.$el}update(e,t){return e.type===this.node.type&&(e===this.node&&this.decorations===t||(this.node=e,this.decorations=t,this.updateComponentProps({node:e,decorations:t})),!0)}updateComponentProps(e){if(!this.vm._props)return;const n=t().config.silent;t().config.silent=!0,Object.entries(e).forEach((([e,t])=>{this.vm._props[e]=t})),t().config.silent=n}updateAttrs(e){if(!this.view.editable)return;const{state:t}=this.view,{type:n}=this.node,i=this.getPos(),r={...this.node.attrs,...e},s=this.isMark?t.tr.removeMark(i.from,i.to,n).addMark(i.from,i.to,n.create(r)):t.tr.setNodeMarkup(i,null,r);this.view.dispatch(s)}ignoreMutation(e){return!("selection"===e.type||this.contentDOM&&this.contentDOM.contains(e.target))}stopEvent(e){if("function"==typeof this.extension.stopEvent)return this.extension.stopEvent(e);const t=!!this.extension.schema.draggable;if(t&&"mousedown"===e.type){const t=e.target.closest&&e.target.closest("[data-drag-handle]");t&&(this.dom===t||this.dom.contains(t))&&(this.captureEvents=!1,document.addEventListener("dragend",(()=>{this.captureEvents=!0}),{once:!0}))}const n="copy"===e.type,i="paste"===e.type,r="cut"===e.type,s=e.type.startsWith("drag")||"drop"===e.type;return!(t&&s||n||i||r)&&this.captureEvents}selectNode(){this.updateComponentProps({selected:!0})}deselectNode(){this.updateComponentProps({selected:!1})}getMarkPos(){const e=this.view.posAtDOM(this.dom);return aa(this.view.state.doc.resolve(e),this.node.type)}destroy(){this.vm.$destroy()}}class ba{constructor(e={}){this.options={...this.defaultOptions,...e}}init(){return null}bindEditor(e=null){this.editor=e}get name(){return null}get type(){return"extension"}get defaultOptions(){return{}}get plugins(){return[]}inputRules(){return[]}pasteRules(){return[]}keys(){return{}}}class wa{constructor(e=[],t){e.forEach((e=>{e.bindEditor(t),e.init()})),this.extensions=e}get nodes(){return this.extensions.filter((e=>"node"===e.type)).reduce(((e,{name:t,schema:n})=>({...e,[t]:n})),{})}get options(){const{view:e}=this;return this.extensions.reduce(((t,n)=>({...t,[n.name]:new Proxy(n.options,{set(t,n,i){const r=t[n]!==i;return Object.assign(t,{[n]:i}),r&&e.updateState(e.state),!0}})})),{})}get marks(){return this.extensions.filter((e=>"mark"===e.type)).reduce(((e,{name:t,schema:n})=>({...e,[t]:n})),{})}get plugins(){return this.extensions.filter((e=>e.plugins)).reduce(((e,{plugins:t})=>[...e,...t]),[])}keymaps({schema:e}){return[...this.extensions.filter((e=>["extension"].includes(e.type))).filter((e=>e.keys)).map((t=>t.keys({schema:e}))),...this.extensions.filter((e=>["node","mark"].includes(e.type))).filter((e=>e.keys)).map((t=>t.keys({type:e[`${t.type}s`][t.name],schema:e})))].map((e=>To(e)))}inputRules({schema:e,excludedExtensions:t}){if(!(t instanceof Array)&&t)return[];const n=t instanceof Array?this.extensions.filter((e=>!t.includes(e.name))):this.extensions;return[...n.filter((e=>["extension"].includes(e.type))).filter((e=>e.inputRules)).map((t=>t.inputRules({schema:e}))),...n.filter((e=>["node","mark"].includes(e.type))).filter((e=>e.inputRules)).map((t=>t.inputRules({type:e[`${t.type}s`][t.name],schema:e})))].reduce(((e,t)=>[...e,...t]),[])}pasteRules({schema:e,excludedExtensions:t}){if(!(t instanceof Array)&&t)return[];const n=t instanceof Array?this.extensions.filter((e=>!t.includes(e.name))):this.extensions;return[...n.filter((e=>["extension"].includes(e.type))).filter((e=>e.pasteRules)).map((t=>t.pasteRules({schema:e}))),...n.filter((e=>["node","mark"].includes(e.type))).filter((e=>e.pasteRules)).map((t=>t.pasteRules({type:e[`${t.type}s`][t.name],schema:e})))].reduce(((e,t)=>[...e,...t]),[])}commands({schema:e,view:t}){return this.extensions.filter((e=>e.commands)).reduce(((n,i)=>{const{name:r,type:s}=i,o={},a=i.commands({schema:e,...["node","mark"].includes(s)?{type:e[`${s}s`][r]}:{}}),l=(e,n)=>!!t.editable&&(t.focus(),e(n)(t.state,t.dispatch,t)),c=(e,t)=>{Array.isArray(t)?o[e]=e=>t.forEach((t=>l(t,e))):"function"==typeof t&&(o[e]=e=>l(t,e))};return"object"==typeof a?Object.entries(a).forEach((([e,t])=>{c(e,t)})):c(r,a),{...n,...o}}),{})}}class Ca extends ba{constructor(e={}){super(e)}get type(){return"mark"}get view(){return null}get schema(){return null}command(){return()=>{}}}function _a(e=0,t=0,n=0){return Math.min(Math.max(parseInt(e,10),t),n)}class Aa extends ba{constructor(e={}){super(e)}get type(){return"node"}get view(){return null}get schema(){return null}command(){return()=>{}}}class Sa extends Aa{get name(){return"doc"}get schema(){return{content:"block+"}}}class ka extends Aa{get name(){return"paragraph"}get schema(){return{content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"p"}],toDOM:()=>["p",0]}}commands({type:e}){return()=>Vo(e)}}class Ia extends Aa{get name(){return"text"}get schema(){return{group:"inline"}}}class Pa extends class{on(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}emit(e,...t){this._callbacks=this._callbacks||{};const n=this._callbacks[e];return n&&n.forEach((e=>e.apply(this,t))),this}off(e,t){if(arguments.length){const n=this._callbacks?this._callbacks[e]:null;n&&(t?this._callbacks[e]=n.filter((e=>e!==t)):delete this._callbacks[e])}else this._callbacks={};return this}}{constructor(e={}){super(),this.defaultOptions={editorProps:{},editable:!0,autoFocus:null,extensions:[],content:"",topNode:"doc",emptyDocument:{type:"doc",content:[{type:"paragraph"}]},useBuiltInExtensions:!0,disableInputRules:!1,disablePasteRules:!1,dropCursor:{},enableDropCursor:!0,enableGapCursor:!0,parseOptions:{},injectCSS:!0,onInit:()=>{},onTransaction:()=>{},onUpdate:()=>{},onFocus:()=>{},onBlur:()=>{},onPaste:()=>{},onDrop:()=>{}},this.events=["init","transaction","update","focus","blur","paste","drop"],this.init(e)}init(e={}){this.setOptions({...this.defaultOptions,...e}),this.focused=!1,this.selection={from:0,to:0},this.element=document.createElement("div"),this.extensions=this.createExtensions(),this.nodes=this.createNodes(),this.marks=this.createMarks(),this.schema=this.createSchema(),this.plugins=this.createPlugins(),this.keymaps=this.createKeymaps(),this.inputRules=this.createInputRules(),this.pasteRules=this.createPasteRules(),this.view=this.createView(),this.commands=this.createCommands(),this.setActiveNodesAndMarks(),this.options.injectCSS&&function(e){{const e=document.createElement("style");e.type="text/css",e.textContent='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n';const{head:t}=document,{firstChild:n}=t;n?t.insertBefore(e,n):t.appendChild(e)}}(),null!==this.options.autoFocus&&this.focus(this.options.autoFocus),this.events.forEach((e=>{var t;this.on(e,this.options[(t=`on ${e}`,t.replace(/(?:^\w|[A-Z]|\b\w)/g,((e,t)=>0===t?e.toLowerCase():e.toUpperCase())).replace(/\s+/g,""))]||(()=>{}))})),this.emit("init",{view:this.view,state:this.state}),this.extensions.view=this.view}setOptions(e){this.options={...this.options,...e},this.view&&this.state&&this.view.updateState(this.state)}get builtInExtensions(){return this.options.useBuiltInExtensions?[new Sa,new Ia,new ka]:[]}get state(){return this.view?this.view.state:null}createExtensions(){return new wa([...this.builtInExtensions,...this.options.extensions],this)}createPlugins(){return this.extensions.plugins}createKeymaps(){return this.extensions.keymaps({schema:this.schema})}createInputRules(){return this.extensions.inputRules({schema:this.schema,excludedExtensions:this.options.disableInputRules})}createPasteRules(){return this.extensions.pasteRules({schema:this.schema,excludedExtensions:this.options.disablePasteRules})}createCommands(){return this.extensions.commands({schema:this.schema,view:this.view})}createNodes(){return this.extensions.nodes}createMarks(){return this.extensions.marks}createSchema(){return new tn({topNode:this.options.topNode,nodes:this.nodes,marks:this.marks})}createState(){return vi.create({schema:this.schema,doc:this.createDocument(this.options.content),plugins:[...this.plugins,(t={rules:this.inputRules},n=t.rules,i=new wi({state:{init:function(){return null},apply:function(e,t){return e.getMeta(this)||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:function(e,t,r,s){return ta(e,t,r,s,n,i)},handleDOMEvents:{compositionend:function(e){setTimeout((function(){var t=e.state.selection.$cursor;t&&ta(e,t.pos,t.pos,"",n,i)}))}}},isInputRules:!0}),i),...this.pasteRules,...this.keymaps,To({Backspace:na}),To(Xo),...this.options.enableDropCursor?[(e=this.options.dropCursor,void 0===e&&(e={}),new wi({view:function(t){return new go(t,e)}}))]:[],...this.options.enableGapCursor?[new wi({props:{decorations:No,createSelectionBetween:function(e,t,n){if(t.pos==n.pos&&Oo.valid(n))return new Oo(n)},handleClick:Lo,handleKeyDown:$o}})]:[],new wi({key:new Ai("editable"),props:{editable:()=>this.options.editable}}),new wi({props:{attributes:{tabindex:0},handleDOMEvents:{focus:(e,t)=>{this.focused=!0,this.emit("focus",{event:t,state:e.state,view:e});const n=this.state.tr.setMeta("focused",!0);this.view.dispatch(n)},blur:(e,t)=>{this.focused=!1,this.emit("blur",{event:t,state:e.state,view:e});const n=this.state.tr.setMeta("focused",!1);this.view.dispatch(n)}}}}),new wi({props:this.options.editorProps})]});var e,t,n,i}createDocument(e,t=this.options.parseOptions){if(null===e)return this.schema.nodeFromJSON(this.options.emptyDocument);if("object"==typeof e)try{return this.schema.nodeFromJSON(e)}catch(t){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",t),this.schema.nodeFromJSON(this.options.emptyDocument)}if("string"==typeof e){const n=`<div>${e}</div>`,i=(new window.DOMParser).parseFromString(n,"text/html").body.firstElementChild;return rn.fromSchema(this.schema).parse(i,t)}return!1}createView(){return new lo(this.element,{state:this.createState(),handlePaste:(...e)=>{this.emit("paste",...e)},handleDrop:(...e)=>{this.emit("drop",...e)},dispatchTransaction:this.dispatchTransaction.bind(this)})}setParentComponent(e=null){e&&this.view.setProps({nodeViews:this.initNodeViews({parent:e,extensions:[...this.builtInExtensions,...this.options.extensions]})})}initNodeViews({parent:e,extensions:t}){return t.filter((e=>["node","mark"].includes(e.type))).filter((e=>e.view)).reduce(((t,n)=>({...t,[n.name]:(t,i,r,s)=>{const o=n.view;return new xa(o,{editor:this,extension:n,parent:e,node:t,view:i,getPos:r,decorations:s})}})),{})}dispatchTransaction(e){const t=this.state.apply(e);this.view.updateState(t),this.selection={from:this.state.selection.from,to:this.state.selection.to},this.setActiveNodesAndMarks(),this.emit("transaction",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emitUpdate(e)}emitUpdate(e){this.emit("update",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:e})}resolveSelection(e=null){if(this.selection&&null===e)return this.selection;if("start"===e||!0===e)return{from:0,to:0};if("end"===e){const{doc:e}=this.state;return{from:e.content.size,to:e.content.size}}return{from:e,to:e}}focus(e=null){if(this.view.focused&&null===e||!1===e)return;const{from:t,to:n}=this.resolveSelection(e);this.setSelection(t,n),setTimeout((()=>this.view.focus()),10)}setSelection(e=0,t=0){const{doc:n,tr:i}=this.state,r=_a(e,0,n.content.size),s=_a(t,0,n.content.size),o=ri.create(n,r,s),a=i.setSelection(o);this.view.dispatch(a)}blur(){this.view.dom.blur()}getSchemaJSON(){return JSON.parse(JSON.stringify({nodes:this.extensions.nodes,marks:this.extensions.marks}))}getHTML(){const e=document.createElement("div"),t=fn.fromSchema(this.schema).serializeFragment(this.state.doc.content);return e.appendChild(t),e.innerHTML}getJSON(){return this.state.doc.toJSON()}setContent(e={},t=!1,n){const{doc:i,tr:r}=this.state,s=this.createDocument(e,n),o=ri.create(i,0,i.content.size),a=r.setSelection(o).replaceSelectionWith(s,!1).setMeta("preventUpdate",!t);this.view.dispatch(a)}clearContent(e=!1){this.setContent(this.options.emptyDocument,e)}setActiveNodesAndMarks(){this.activeMarks=Object.entries(this.schema.marks).reduce(((e,[t,n])=>({...e,[t]:(e={})=>function(e,t){const{from:n,$from:i,to:r,empty:s}=e.selection;return s?!!t.isInSet(e.storedMarks||i.marks()):!!e.doc.rangeHasMark(n,r,t)}(this.state,n)})),{}),this.activeMarkAttrs=Object.entries(this.schema.marks).reduce(((e,[t,n])=>({...e,[t]:oa(this.state,n)})),{}),this.activeNodes=Object.entries(this.schema.nodes).reduce(((e,[t,n])=>({...e,[t]:(e={})=>ca(this.state,n,e)})),{})}getMarkAttrs(e=null){return this.activeMarkAttrs[e]}getNodeAttrs(e=null){return{...la(this.state,this.schema.nodes[e])}}get isActive(){return Object.entries({...this.activeMarks,...this.activeNodes}).reduce(((e,[t,n])=>({...e,[t]:(e={})=>n(e)})),{})}registerPlugin(e=null,t){const n="function"==typeof t?t(e,this.state.plugins):[e,...this.state.plugins],i=this.state.reconfigure({plugins:n});this.view.updateState(i)}unregisterPlugin(e=null){if(!e||!this.view.docView)return;const t=this.state.reconfigure({plugins:this.state.plugins.filter((t=>!t.key.startsWith(`${e}$`)))});this.view.updateState(t)}destroy(){this.view&&this.view.destroy()}}var Ea={props:{editor:{default:null,type:Object}},watch:{editor:{immediate:!0,handler(e){e&&e.element&&this.$nextTick((()=>{this.$el.appendChild(e.element.firstChild),e.setParentComponent(this)}))}}},render:e=>e("div"),beforeDestroy(){this.editor.element=this.$el}};class Ta{constructor({options:e}){this.options=e,this.preventHide=!1,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.blurHandler=()=>{this.preventHide?this.preventHide=!1:this.options.editor.emit("menubar:focusUpdate",!1)},this.options.editor.on("blur",this.blurHandler)}handleClick(){this.preventHide=!0}destroy(){this.options.element.removeEventListener("mousedown",this.mousedownHandler),this.options.editor.off("blur",this.blurHandler)}}var Ma,Oa,Da={props:{editor:{default:null,type:Object}},data:()=>({focused:!1}),watch:{editor:{immediate:!0,handler(e){e&&this.$nextTick((()=>{var t;e.registerPlugin((t={editor:e,element:this.$el},new wi({key:new Ai("menu_bar"),view:e=>new Ta({editorView:e,options:t})}))),this.focused=e.focused,e.on("focus",(()=>{this.focused=!0})),e.on("menubar:focusUpdate",(e=>{this.focused=e}))}))}}},render(){return this.editor?this.$scopedSlots.default({focused:this.focused,focus:this.editor.focus,commands:this.editor.commands,isActive:this.editor.isActive,getMarkAttrs:this.editor.getMarkAttrs.bind(this.editor),getNodeAttrs:this.editor.getNodeAttrs.bind(this.editor)}):null}};if(Boolean,n(6470),"undefined"!=typeof WeakMap){var $a=new WeakMap;Ma=function(e){return $a.get(e)},Oa=function(e,t){return $a.set(e,t),t}}else{var Ba=[],La=0;Ma=function(e){for(var t=0;t<Ba.length;t+=2)if(Ba[t]==e)return Ba[t+1]},Oa=function(e,t){return 10==La&&(La=0),Ba[La++]=e,Ba[La++]=t}}var Na=function(e,t,n,i){this.left=e,this.top=t,this.right=n,this.bottom=i},Ra=function(e,t,n,i){this.width=e,this.height=t,this.map=n,this.problems=i};function Fa(e){if(e.colwidth)return e.colwidth.slice();for(var t=[],n=0;n<e.colspan;n++)t.push(0);return t}function Za(e){var t=e.cached.tableNodeTypes;if(!t)for(var n in t=e.cached.tableNodeTypes={},e.nodes){var i=e.nodes[n],r=i.spec.tableRole;r&&(t[r]=i)}return t}function ja(e){for(var t=e.selection.$head,n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function za(e){return"row"==e.parent.type.spec.tableRole&&e.nodeAfter}function Ua(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function Ha(e,t,n){var i=e.start(-1),r=Ra.get(e.node(-1)).nextCell(e.pos-i,t,n);return null==r?null:e.node(0).resolve(i+r)}function Va(e,t,n){var i={};for(var r in e)i[r]=e[r];return i[t]=n,i}function qa(e,t,n){void 0===n&&(n=1);var i=Va(e,"colspan",e.colspan-n);return i.colwidth&&(i.colwidth=i.colwidth.slice(),i.colwidth.splice(t,n),i.colwidth.some((function(e){return e>0}))||(i.colwidth=null)),i}Ra.prototype.findCell=function(e){for(var t=0;t<this.map.length;t++){var n=this.map[t];if(n==e){for(var i=t%this.width,r=t/this.width|0,s=i+1,o=r+1,a=1;s<this.width&&this.map[t+a]==n;a++)s++;for(var l=1;o<this.height&&this.map[t+this.width*l]==n;l++)o++;return new Na(i,r,s,o)}}throw new RangeError("No cell with offset "+e+" found")},Ra.prototype.colCount=function(e){for(var t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset "+e+" found")},Ra.prototype.nextCell=function(e,t,n){var i=this.findCell(e),r=i.left,s=i.right,o=i.top,a=i.bottom;return"horiz"==t?(n<0?0==r:s==this.width)?null:this.map[o*this.width+(n<0?r-1:s)]:(n<0?0==o:a==this.height)?null:this.map[r+this.width*(n<0?o-1:a)]},Ra.prototype.rectBetween=function(e,t){var n=this.findCell(e),i=n.left,r=n.right,s=n.top,o=n.bottom,a=this.findCell(t),l=a.left,c=a.right,h=a.top,d=a.bottom;return new Na(Math.min(i,l),Math.min(s,h),Math.max(r,c),Math.max(o,d))},Ra.prototype.cellsInRect=function(e){for(var t=[],n={},i=e.top;i<e.bottom;i++)for(var r=e.left;r<e.right;r++){var s=i*this.width+r,o=this.map[s];n[o]||(n[o]=!0,r==e.left&&r&&this.map[s-1]==o||i==e.top&&i&&this.map[s-this.width]==o||t.push(o))}return t},Ra.prototype.positionAt=function(e,t,n){for(var i=0,r=0;;i++){var s=r+n.child(i).nodeSize;if(i==e){for(var o=t+e*this.width,a=(e+1)*this.width;o<a&&this.map[o]<r;)o++;return o==a?s-1:this.map[o]}r=s}},Ra.get=function(e){return Ma(e)||Oa(e,function(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);for(var t=function(e){for(var t=-1,n=!1,i=0;i<e.childCount;i++){var r=e.child(i),s=0;if(n)for(var o=0;o<i;o++)for(var a=e.child(o),l=0;l<a.childCount;l++){var c=a.child(l);o+c.attrs.rowspan>i&&(s+=c.attrs.colspan)}for(var h=0;h<r.childCount;h++){var d=r.child(h);s+=d.attrs.colspan,d.attrs.rowspan>1&&(n=!0)}-1==t?t=s:t!=s&&(t=Math.max(t,s))}return t}(e),n=e.childCount,i=[],r=0,s=null,o=[],a=0,l=t*n;a<l;a++)i[a]=0;for(var c=0,h=0;c<n;c++){var d=e.child(c);h++;for(var u=0;;u++){for(;r<i.length&&0!=i[r];)r++;if(u==d.childCount)break;for(var p=d.child(u),m=p.attrs,f=m.colspan,g=m.rowspan,v=m.colwidth,y=0;y<g;y++){if(y+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:h,n:g-y});break}for(var x=r+y*t,b=0;b<f;b++){0==i[x+b]?i[x+b]=h:(s||(s=[])).push({type:"collision",row:c,pos:h,n:f-b});var w=v&&v[b];if(w){var C=(x+b)%t*2,_=o[C];null==_||_!=w&&1==o[C+1]?(o[C]=w,o[C+1]=1):_==w&&o[C+1]++}}}r+=f,h+=p.nodeSize}for(var A=(c+1)*t,S=0;r<A;)0==i[r++]&&S++;S&&(s||(s=[])).push({type:"missing",row:c,n:S}),h++}for(var k=new Ra(t,n,i,s),I=!1,P=0;!I&&P<o.length;P+=2)null!=o[P]&&o[P+1]<n&&(I=!0);return I&&function(e,t,n){e.problems||(e.problems=[]);for(var i=0,r={};i<e.map.length;i++){var s=e.map[i];if(!r[s]){r[s]=!0;for(var o=n.nodeAt(s),a=null,l=0;l<o.attrs.colspan;l++){var c=t[(i+l)%e.width*2];null==c||o.attrs.colwidth&&o.attrs.colwidth[l]==c||((a||(a=Fa(o.attrs)))[l]=c)}a&&e.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}}(k,o,e),k}(e))},new Ai("selectingCells");var Ga=function(e){function t(t,n){void 0===n&&(n=t);var i=t.node(-1),r=Ra.get(i),s=t.start(-1),o=r.rectBetween(t.pos-s,n.pos-s),a=t.node(0),l=r.cellsInRect(o).filter((function(e){return e!=n.pos-s}));l.unshift(n.pos-s);var c=l.map((function(e){var t=i.nodeAt(e),n=e+s+1;return new ii(a.resolve(n),a.resolve(n+t.content.size))}));e.call(this,c[0].$from,c[0].$to,c),this.$anchorCell=t,this.$headCell=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(e,n){var i=e.resolve(n.map(this.$anchorCell.pos)),r=e.resolve(n.map(this.$headCell.pos));if(za(i)&&za(r)&&Ua(i,r)){var s=this.$anchorCell.node(-1)!=i.node(-1);return s&&this.isRowSelection()?t.rowSelection(i,r):s&&this.isColSelection()?t.colSelection(i,r):new t(i,r)}return ri.between(i,r)},t.prototype.content=function(){for(var e=this.$anchorCell.node(-1),t=Ra.get(e),n=this.$anchorCell.start(-1),i=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),r={},s=[],o=i.top;o<i.bottom;o++){for(var a=[],l=o*t.width+i.left,c=i.left;c<i.right;c++,l++){var h=t.map[l];if(!r[h]){r[h]=!0;var d=t.findCell(h),u=e.nodeAt(h),p=i.left-d.left,m=d.right-i.right;if(p>0||m>0){var f=u.attrs;p>0&&(f=qa(f,0,p)),m>0&&(f=qa(f,f.colspan-m,m)),u=d.left<i.left?u.type.createAndFill(f):u.type.create(f,u.content)}if(d.top<i.top||d.bottom>i.bottom){var g=Va(u.attrs,"rowspan",Math.min(d.bottom,i.bottom)-Math.max(d.top,i.top));u=d.top<i.top?u.type.createAndFill(g):u.type.create(g,u.content)}a.push(u)}}s.push(e.child(o).copy(rt.from(a)))}var v=this.isColSelection()&&this.isRowSelection()?e:s;return new dt(rt.from(v),1,1)},t.prototype.replace=function(t,n){void 0===n&&(n=dt.empty);for(var i=t.steps.length,r=this.ranges,s=0;s<r.length;s++){var o=r[s],a=o.$from,l=o.$to,c=t.mapping.slice(i);t.replace(c.map(a.pos),c.map(l.pos),s?dt.empty:n)}var h=e.findFrom(t.doc.resolve(t.mapping.slice(i).map(this.to)),-1);h&&t.setSelection(h)},t.prototype.replaceWith=function(e,t){this.replace(e,new dt(rt.from(t),0,0))},t.prototype.forEachCell=function(e){for(var t=this.$anchorCell.node(-1),n=Ra.get(t),i=this.$anchorCell.start(-1),r=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i)),s=0;s<r.length;s++)e(t.nodeAt(r[s]),i+r[s])},t.prototype.isColSelection=function(){var e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;var n=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,i)==this.$headCell.node(-1).childCount},t.colSelection=function(e,n){void 0===n&&(n=e);var i=Ra.get(e.node(-1)),r=e.start(-1),s=i.findCell(e.pos-r),o=i.findCell(n.pos-r),a=e.node(0);return s.top<=o.top?(s.top>0&&(e=a.resolve(r+i.map[s.left])),o.bottom<i.height&&(n=a.resolve(r+i.map[i.width*(i.height-1)+o.right-1]))):(o.top>0&&(n=a.resolve(r+i.map[o.left])),s.bottom<i.height&&(e=a.resolve(r+i.map[i.width*(i.height-1)+s.right-1]))),new t(e,n)},t.prototype.isRowSelection=function(){var e=Ra.get(this.$anchorCell.node(-1)),t=this.$anchorCell.start(-1),n=e.colCount(this.$anchorCell.pos-t),i=e.colCount(this.$headCell.pos-t);if(Math.min(n,i)>0)return!1;var r=n+this.$anchorCell.nodeAfter.attrs.colspan,s=i+this.$headCell.nodeAfter.attrs.colspan;return Math.max(r,s)==e.width},t.prototype.eq=function(e){return e instanceof t&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos},t.rowSelection=function(e,n){void 0===n&&(n=e);var i=Ra.get(e.node(-1)),r=e.start(-1),s=i.findCell(e.pos-r),o=i.findCell(n.pos-r),a=e.node(0);return s.left<=o.left?(s.left>0&&(e=a.resolve(r+i.map[s.top*i.width])),o.right<i.width&&(n=a.resolve(r+i.map[i.width*(o.top+1)-1]))):(o.left>0&&(n=a.resolve(r+i.map[o.top*i.width])),s.right<i.width&&(e=a.resolve(r+i.map[i.width*(s.top+1)-1]))),new t(e,n)},t.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},t.fromJSON=function(e,n){return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,n,i){return void 0===i&&(i=n),new t(e.resolve(n),e.resolve(i))},t.prototype.getBookmark=function(){return new Wa(this.$anchorCell.pos,this.$headCell.pos)},t}(ti);Ga.prototype.visible=!1,ti.jsonID("cell",Ga);var Wa=function(e,t){this.anchor=e,this.head=t};function Ka(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function Ja(e,t){return function(n,i,r){var s=n.selection;if(s instanceof Ga)return Ka(n,i,ti.near(s.$headCell,t));if("horiz"!=e&&!s.empty)return!1;var o=Xa(r,e,t);if(null==o)return!1;if("horiz"==e)return Ka(n,i,ti.near(n.doc.resolve(s.head+t),t));var a,l=n.doc.resolve(o),c=Ha(l,e,t);return a=c?ti.near(c,1):t<0?ti.near(n.doc.resolve(l.before(-1)),-1):ti.near(n.doc.resolve(l.after(-1)),1),Ka(n,i,a)}}function Ya(e,t){return function(n,i,r){var s=n.selection;if(!(s instanceof Ga)){var o=Xa(r,e,t);if(null==o)return!1;s=new Ga(n.doc.resolve(o))}var a=Ha(s.$headCell,e,t);return!!a&&Ka(n,i,new Ga(s.$anchorCell,a))}}function Qa(e,t){var n=e.selection;if(!(n instanceof Ga))return!1;if(t){var i=e.tr,r=Za(e.schema).cell.createAndFill().content;n.forEachCell((function(e,t){e.content.eq(r)||i.replace(i.mapping.map(t+1),i.mapping.map(t+e.nodeSize-1),new dt(r,0,0))})),i.docChanged&&t(i)}return!0}function Xa(e,t,n){if(!(e.state.selection instanceof ri))return null;for(var i=e.state.selection.$head,r=i.depth-1;r>=0;r--){var s=i.node(r);if((n<0?i.index(r):i.indexAfter(r))!=(n<0?0:s.childCount))return null;if("cell"==s.type.spec.tableRole||"header_cell"==s.type.spec.tableRole){var o=i.before(r),a="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(a)?o:null}}return null}function el(e){var t,n=e.selection,i=function(e){var t=e.selection;return t.$anchorCell?t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell:t.node&&"cell"==t.node.type.spec.tableRole?t.$anchor:function(e){for(var t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}(t.$head)||function(e){for(var t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){var i=t.type.spec.tableRole;if("cell"==i||"header_cell"==i)return e.doc.resolve(n)}for(var r=e.nodeBefore,s=e.pos;r;r=r.lastChild,s--){var o=r.type.spec.tableRole;if("cell"==o||"header_cell"==o)return e.doc.resolve(s-r.nodeSize)}}(t.$head)}(e),r=i.node(-1),s=i.start(-1),o=Ra.get(r);return(t=n instanceof Ga?o.rectBetween(n.$anchorCell.pos-s,n.$headCell.pos-s):o.findCell(i.pos-s)).tableStart=s,t.map=o,t.table=r,t}function tl(e,t,n){for(var i=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1}),r=0;r<i.length;r++){var s=t.table.nodeAt(i[r]);if(s&&s.type!==n.header_cell)return!1}return!0}function nl(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(e){return function(t,n){if(!ja(t))return!1;if(n){for(var i=Za(t.schema),r=el(t),s=t.tr,o=r.map.cellsInRect("column"==e?new Na(r.left,0,r.right,r.map.height):"row"==e?new Na(0,r.top,r.map.width,r.bottom):r),a=o.map((function(e){return r.table.nodeAt(e)})),l=0;l<o.length;l++)a[l].type==i.header_cell&&s.setNodeMarkup(r.tableStart+o[l],i.cell,a[l].attrs);if(0==s.steps.length)for(var c=0;c<o.length;c++)s.setNodeMarkup(r.tableStart+o[c],i.header_cell,a[c].attrs);n(s)}return!0}}(e):function(t,n){if(!ja(t))return!1;if(n){var i=Za(t.schema),r=el(t),s=t.tr,o=tl("row",r,i),a=tl("column",r,i),l=("column"===e?o:"row"===e&&a)?1:0,c="column"==e?new Na(0,l,1,r.map.height):"row"==e?new Na(l,0,r.map.width,1):r,h="column"==e?a?i.cell:i.header_cell:"row"==e?o?i.cell:i.header_cell:i.cell;r.map.cellsInRect(c).forEach((function(e){var t=e+r.tableStart,n=s.doc.nodeAt(t);n&&s.setNodeMarkup(t,h,n.attrs)})),n(s)}return!0}}Wa.prototype.map=function(e){return new Wa(e.map(this.anchor),e.map(this.head))},Wa.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&Ua(t,n)?new Ga(t,n):ti.near(n,1)},Mo({ArrowLeft:Ja("horiz",-1),ArrowRight:Ja("horiz",1),ArrowUp:Ja("vert",-1),ArrowDown:Ja("vert",1),"Shift-ArrowLeft":Ya("horiz",-1),"Shift-ArrowRight":Ya("horiz",1),"Shift-ArrowUp":Ya("vert",-1),"Shift-ArrowDown":Ya("vert",1),Backspace:Qa,"Mod-Backspace":Qa,Delete:Qa,"Mod-Delete":Qa}),new Ai("fix-tables"),nl("row",{useDeprecatedLogic:!0}),nl("column",{useDeprecatedLogic:!0}),nl("cell",{useDeprecatedLogic:!0});var il=function(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),rl(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function rl(e,t,n,i,r,s){for(var o=0,a=!0,l=t.firstChild,c=e.firstChild,h=0,d=0;h<c.childCount;h++)for(var u=c.child(h).attrs,p=u.colspan,m=u.colwidth,f=0;f<p;f++,d++){var g=r==d?s:m&&m[f],v=g?g+"px":"";o+=g||i,g||(a=!1),l?(l.style.width!=v&&(l.style.width=v),l=l.nextSibling):t.appendChild(document.createElement("col")).style.width=v}for(;l;){var y=l.nextSibling;l.parentNode.removeChild(l),l=y}a?(n.style.width=o+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=o+"px")}il.prototype.update=function(e){return e.type==this.node.type&&(this.node=e,rl(e,this.colgroup,this.table,this.cellMinWidth),!0)},il.prototype.ignoreMutation=function(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))};var sl=new Ai("tableColumnResizing"),ol=function(e,t){this.activeHandle=e,this.dragging=t};ol.prototype.apply=function(e){var t=this,n=e.getMeta(sl);if(n&&null!=n.setHandle)return new ol(n.setHandle,null);if(n&&void 0!==n.setDragging)return new ol(t.activeHandle,n.setDragging);if(t.activeHandle>-1&&e.docChanged){var i=e.mapping.map(t.activeHandle,-1);za(e.doc.resolve(i))||(i=null),t=new ol(i,t.dragging)}return t},new Ai("collab");var al=200,ll=function(){};ll.prototype.append=function(e){return e.length?(e=ll.from(e),!this.length&&e||e.length<al&&this.leafAppend(e)||this.length<al&&e.leafPrepend(this)||this.appendInner(e)):this},ll.prototype.prepend=function(e){return e.length?ll.from(e).append(this):this},ll.prototype.appendInner=function(e){return new hl(this,e)},ll.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?ll.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},ll.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},ll.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},ll.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var i=[];return this.forEach((function(t,n){return i.push(e(t,n))}),t,n),i},ll.from=function(e){return e instanceof ll?e:e&&e.length?new cl(e):ll.empty};var cl=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,i){for(var r=t;r<n;r++)if(!1===e(this.values[r],i+r))return!1},t.prototype.forEachInvertedInner=function(e,t,n,i){for(var r=t-1;r>=n;r--)if(!1===e(this.values[r],i+r))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=al)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=al)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(ll);ll.empty=new cl([]);var hl=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,i){var r=this.left.length;return!(t<r&&!1===this.left.forEachInner(e,t,Math.min(n,r),i))&&!(n>r&&!1===this.right.forEachInner(e,Math.max(t-r,0),Math.min(this.length,n)-r,i+r))&&void 0},t.prototype.forEachInvertedInner=function(e,t,n,i){var r=this.left.length;return!(t>r&&!1===this.right.forEachInvertedInner(e,t-r,Math.max(n,r)-r,i+r))&&!(n<r&&!1===this.left.forEachInvertedInner(e,Math.min(t,r),n,i))&&void 0},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(ll);const dl=ll;var ul=function(e,t){this.items=e,this.eventCount=t};ul.prototype.popEvent=function(e,t){var n=this;if(0==this.eventCount)return null;for(var i,r,s=this.items.length;;s--)if(this.items.get(s-1).selection){--s;break}t&&(i=this.remapping(s,this.items.length),r=i.maps.length);var o,a,l=e.tr,c=[],h=[];return this.items.forEach((function(e,t){if(!e.step)return i||(i=n.remapping(s,t+1),r=i.maps.length),r--,void h.push(e);if(i){h.push(new pl(e.map));var d,u=e.step.map(i.slice(r));u&&l.maybeStep(u).doc&&(d=l.mapping.maps[l.mapping.maps.length-1],c.push(new pl(d,null,null,c.length+h.length))),r--,d&&i.appendMap(d,r)}else l.maybeStep(e.step);return e.selection?(o=i?e.selection.map(i.slice(r)):e.selection,a=new ul(n.items.slice(0,s).append(h.reverse().concat(c)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:a,transform:l,selection:o}},ul.prototype.addTransform=function(e,t,n,i){for(var r=[],s=this.eventCount,o=this.items,a=!i&&o.length?o.get(o.length-1):null,l=0;l<e.steps.length;l++){var c,h=e.steps[l].invert(e.docs[l]),d=new pl(e.mapping.maps[l],h,t);(c=a&&a.merge(d))&&(d=c,l?r.pop():o=o.slice(0,o.length-1)),r.push(d),t&&(s++,t=null),i||(a=d)}var u,p,m,f=s-n.depth;return f>fl&&(p=f,(u=o).forEach((function(e,t){if(e.selection&&0==p--)return m=t,!1})),o=u.slice(m),s-=f),new ul(o.append(r),s)},ul.prototype.remapping=function(e,t){var n=new _n;return this.items.forEach((function(t,i){var r=null!=t.mirrorOffset&&i-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:null;n.appendMap(t.map,r)}),e,t),n},ul.prototype.addMaps=function(e){return 0==this.eventCount?this:new ul(this.items.append(e.map((function(e){return new pl(e)}))),this.eventCount)},ul.prototype.rebased=function(e,t){if(!this.eventCount)return this;var n=[],i=Math.max(0,this.items.length-t),r=e.mapping,s=e.steps.length,o=this.eventCount;this.items.forEach((function(e){e.selection&&o--}),i);var a=t;this.items.forEach((function(t){var i=r.getMirror(--a);if(null!=i){s=Math.min(s,i);var l=r.maps[i];if(t.step){var c=e.steps[i].invert(e.docs[i]),h=t.selection&&t.selection.map(r.slice(a+1,i));h&&o++,n.push(new pl(l,c,h))}else n.push(new pl(l))}}),i);for(var l=[],c=t;c<s;c++)l.push(new pl(r.maps[c]));var h=this.items.slice(0,i).append(l).append(n),d=new ul(h,o);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-n.length)),d},ul.prototype.emptyItemCount=function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e},ul.prototype.compress=function(e){void 0===e&&(e=this.items.length);var t=this.remapping(0,e),n=t.maps.length,i=[],r=0;return this.items.forEach((function(s,o){if(o>=e)i.push(s),s.selection&&r++;else if(s.step){var a=s.step.map(t.slice(n)),l=a&&a.getMap();if(n--,l&&t.appendMap(l,n),a){var c=s.selection&&s.selection.map(t.slice(n));c&&r++;var h,d=new pl(l.invert(),a,c),u=i.length-1;(h=i.length&&i[u].merge(d))?i[u]=h:i.push(d)}}else s.map&&n--}),this.items.length,0),new ul(dl.from(i.reverse()),r)},ul.empty=new ul(dl.empty,0);var pl=function(e,t,n,i){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=i};pl.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new pl(t.getMap().invert(),t,this.selection)}};var ml=function(e,t,n,i){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=i},fl=20;function gl(e){var t=[];return e.forEach((function(e,n,i,r){return t.push(i,r)})),t}function vl(e,t){if(!e)return null;for(var n=[],i=0;i<e.length;i+=2){var r=t.map(e[i],1),s=t.map(e[i+1],-1);r<=s&&n.push(r,s)}return n}function yl(e,t,n,i){var r=wl(t),s=Cl.get(t).spec.config,o=(i?e.undone:e.done).popEvent(t,r);if(o){var a=o.selection.resolve(o.transform.doc),l=(i?e.done:e.undone).addTransform(o.transform,t.selection.getBookmark(),s,r),c=new ml(i?l:o.remaining,i?o.remaining:l,null,0);n(o.transform.setSelection(a).setMeta(Cl,{redo:i,historyState:c}).scrollIntoView())}}var xl=!1,bl=null;function wl(e){var t=e.plugins;if(bl!=t){xl=!1,bl=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){xl=!0;break}}return xl}var Cl=new Ai("history"),_l=new Ai("closeHistory");function Al(e,t){var n=Cl.getState(e);return!(!n||0==n.done.eventCount||(t&&yl(n,e,t,!1),0))}function Sl(e,t){var n=Cl.getState(e);return!(!n||0==n.undone.eventCount||(t&&yl(n,e,t,!0),0))}function kl(e){var t=Cl.getState(e);return t?t.done.eventCount:0}function Il(e){var t=Cl.getState(e);return t?t.undone.eventCount:0}class Pl extends Aa{get name(){return"blockquote"}get schema(){return{content:"block*",group:"block",defining:!0,draggable:!1,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]}}commands({type:e}){return()=>ya(e)}keys({type:e}){return{"Ctrl->":ya(e)}}inputRules({type:e}){return[ia(/^\s*>\s$/,e)]}}class El extends Aa{get name(){return"bullet_list"}get schema(){return{content:"list_item+",group:"block",parseDOM:[{tag:"ul"}],toDOM:()=>["ul",0]}}commands({type:e,schema:t}){return()=>va(e,t.nodes.list_item)}keys({type:e,schema:t}){return{"Shift-Ctrl-8":va(e,t.nodes.list_item)}}inputRules({type:e}){return[ia(/^\s*([-+*])\s$/,e)]}}class Tl extends Aa{get name(){return"code_block"}get schema(){return{content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]}}commands({type:e,schema:t}){return()=>fa(e,t.nodes.paragraph)}keys({type:e}){return{"Shift-Ctrl-\\":Vo(e)}}inputRules({type:e}){return[ra(/^```$/,e)]}}class Ml extends Aa{get name(){return"hard_break"}get schema(){return{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]}}commands({type:e}){return()=>Go(Uo,((t,n)=>(n(t.tr.replaceSelectionWith(e.create()).scrollIntoView()),!0)))}keys({type:e}){const t=Go(Uo,((t,n)=>(n(t.tr.replaceSelectionWith(e.create()).scrollIntoView()),!0)));return{"Mod-Enter":t,"Shift-Enter":t}}}class Ol extends Aa{get name(){return"heading"}get defaultOptions(){return{levels:[1,2,3,4,5,6]}}get schema(){return{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:this.options.levels.map((e=>({tag:`h${e}`,attrs:{level:e}}))),toDOM:e=>[`h${e.attrs.level}`,0]}}commands({type:e,schema:t}){return n=>fa(e,t.nodes.paragraph,n)}keys({type:e}){return this.options.levels.reduce(((t,n)=>({...t,[`Shift-Ctrl-${n}`]:Vo(e,{level:n})})),{})}inputRules({type:e}){return this.options.levels.map((t=>ra(new RegExp(`^(#{1,${t}})\\s$`),e,(()=>({level:t})))))}}class Dl extends Aa{get name(){return"list_item"}get schema(){return{content:"paragraph block*",defining:!0,draggable:!1,parseDOM:[{tag:"li"}],toDOM:()=>["li",0]}}keys({type:e}){return{Enter:(t=e,function(e,n){var i=e.selection,r=i.$from,s=i.$to,o=i.node;if(o&&o.isBlock||r.depth<2||!r.sameParent(s))return!1;var a=r.node(-1);if(a.type!=t)return!1;if(0==r.parent.content.size&&r.node(-1).childCount==r.indexAfter(-1)){if(2==r.depth||r.node(-3).type!=t||r.index(-2)!=r.node(-2).childCount-1)return!1;if(n){for(var l=rt.empty,c=r.index(-1)?1:r.index(-2)?2:3,h=r.depth-c;h>=r.depth-3;h--)l=rt.from(r.node(h).copy(l));var d=r.indexAfter(-1)<r.node(-2).childCount?1:r.indexAfter(-2)<r.node(-3).childCount?2:3;l=l.append(rt.from(t.createAndFill()));var u=r.before(r.depth-(c-1)),p=e.tr.replace(u,r.after(-d),new dt(l,4-c,0)),m=-1;p.doc.nodesBetween(u,p.doc.content.size,(function(e,t){if(m>-1)return!1;e.isTextblock&&0==e.content.size&&(m=t+1)})),m>-1&&p.setSelection(e.selection.constructor.near(p.doc.resolve(m))),n(p.scrollIntoView())}return!0}var f=s.pos==r.end()?a.contentMatchAt(0).defaultType:null,g=e.tr.delete(r.pos,s.pos),v=f&&[null,{type:f}];return!!Rn(g.doc,r.pos,2,v)&&(n&&n(g.split(r.pos,2,v).scrollIntoView()),!0)}),Tab:da(e),"Shift-Tab":ha(e)};var t}}class $l extends Aa{get name(){return"ordered_list"}get schema(){return{attrs:{order:{default:1}},content:"list_item+",group:"block",parseDOM:[{tag:"ol",getAttrs:e=>({order:e.hasAttribute("start")?+e.getAttribute("start"):1})}],toDOM:e=>1===e.attrs.order?["ol",0]:["ol",{start:e.attrs.order},0]}}commands({type:e,schema:t}){return()=>va(e,t.nodes.list_item)}keys({type:e,schema:t}){return{"Shift-Ctrl-9":va(e,t.nodes.list_item)}}inputRules({type:e}){return[ia(/^(\d+)\.\s$/,e,(e=>({order:+e[1]})),((e,t)=>t.childCount+t.attrs.order===+e[1]))]}}!function(e){var t=e.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var i in t)n[i]={default:t[i].default}}({tableGroup:"block",cellContent:"block+",cellAttributes:{background:{default:null,getFromDOM:e=>e.style.backgroundColor||null,setDOMAttr(e,t){if(e){const n={style:`${t.style||""}background-color: ${e};`};Object.assign(t,n)}}}}});class Bl extends Aa{get name(){return"todo_item"}get defaultOptions(){return{nested:!1}}get view(){return{props:["node","updateAttrs","view"],methods:{onChange(){this.updateAttrs({done:!this.node.attrs.done})}},template:'\n        <li :data-type="node.type.name" :data-done="node.attrs.done.toString()" data-drag-handle>\n          <span class="todo-checkbox" contenteditable="false" @click="onChange"></span>\n          <div class="todo-content" ref="content" :contenteditable="view.editable.toString()"></div>\n        </li>\n      '}}get schema(){return{attrs:{done:{default:!1}},draggable:!0,content:this.options.nested?"(paragraph|todo_list)+":"paragraph+",toDOM:e=>{const{done:t}=e.attrs;return["li",{"data-type":this.name,"data-done":t.toString()},["span",{class:"todo-checkbox",contenteditable:"false"}],["div",{class:"todo-content"},0]]},parseDOM:[{priority:51,tag:`[data-type="${this.name}"]`,getAttrs:e=>({done:"true"===e.getAttribute("data-done")})}]}}keys({type:e}){return{Enter:(t=e,function(e,n){const{$from:i,$to:r,node:s}=e.selection;if(s&&s.isBlock||i.depth<2||!i.sameParent(r))return!1;const o=i.node(-1);if(o.type!=t)return!1;if(0==i.parent.content.size){if(2==i.depth||i.node(-3).type!=t||i.index(-2)!=i.node(-2).childCount-1)return!1;if(n){let r=rt.empty;const s=i.index(-1)>0;for(let e=i.depth-(s?1:2);e>=i.depth-3;e--)r=rt.from(i.node(e).copy(r));r=r.append(rt.from(t.createAndFill()));const o=e.tr.replace(i.before(s?null:-1),i.after(-3),new dt(r,s?3:2,2));o.setSelection(e.selection.constructor.near(o.doc.resolve(i.pos+(s?3:2)))),n(o.scrollIntoView())}return!0}const a=r.pos==i.end()?o.contentMatchAt(i.indexAfter(-1)).defaultType:null,l=e.tr.delete(i.pos,r.pos);let c=a&&[{type:t},{type:a}];return c||(c=[{type:t},null]),!!function(e,t,n=1,i){const r=e.resolve(t),s=r.depth-n,o=i&&i[i.length-1]||r.parent;if(s<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!o.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let e=r.depth-1,t=n-2;e>s;e--,t--){const n=r.node(e),s=r.index(e);if(n.type.spec.isolating)return!1;let o=n.content.cutByIndex(s,n.childCount);const a=i&&i[t]||n;if(a!=n&&(o=o.replaceChild(0,a.type.create(a.attrs))),!n.canReplace(s+1,n.childCount))return!1}const a=r.indexAfter(s),l=i&&i[0];return r.node(s).canReplaceWith(a,a,l?l.type:r.node(s+1).type)}(l.doc,i.pos,2,c)&&(n&&n(l.split(i.pos,2,c).scrollIntoView()),!0)}),Tab:this.options.nested?da(e):()=>{},"Shift-Tab":ha(e)};var t}}class Ll extends Aa{get name(){return"todo_list"}get schema(){return{group:"block",content:"todo_item+",toDOM:()=>["ul",{"data-type":this.name},0],parseDOM:[{priority:51,tag:`[data-type="${this.name}"]`}]}}commands({type:e,schema:t}){return()=>va(e,t.nodes.todo_item)}inputRules({type:e}){return[ia(/^\s*(\[ \])\s$/,e)]}}class Nl extends Ca{get name(){return"bold"}get schema(){return{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:()=>["strong",0]}}keys({type:e}){return{"Mod-b":qo(e)}}commands({type:e}){return()=>qo(e)}inputRules({type:e}){return[ua(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,e)]}pasteRules({type:e}){return[ma(/(?:\*\*|__)([^*_]+)(?:\*\*|__)/g,e)]}}class Rl extends Ca{get name(){return"code"}get schema(){return{excludes:"_",parseDOM:[{tag:"code"}],toDOM:()=>["code",0]}}keys({type:e}){return{"Mod-`":qo(e)}}commands({type:e}){return()=>qo(e)}inputRules({type:e}){return[ua(/(?:`)([^`]+)(?:`)$/,e)]}pasteRules({type:e}){return[ma(/(?:`)([^`]+)(?:`)/g,e)]}}class Fl extends Ca{get name(){return"italic"}get schema(){return{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]}}keys({type:e}){return{"Mod-i":qo(e)}}commands({type:e}){return()=>qo(e)}inputRules({type:e}){return[ua(/(?:^|[^_])(_([^_]+)_)$/,e),ua(/(?:^|[^*])(\*([^*]+)\*)$/,e)]}pasteRules({type:e}){return[ma(/_([^_]+)_/g,e),ma(/\*([^*]+)\*/g,e)]}}class Zl extends Ca{get name(){return"link"}get defaultOptions(){return{openOnClick:!0,target:null}}get schema(){return{attrs:{href:{default:null},target:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:e=>({href:e.getAttribute("href"),target:e.getAttribute("target")})}],toDOM:e=>["a",{...e.attrs,rel:"noopener noreferrer nofollow",target:e.attrs.target||this.options.target},0]}}commands({type:e}){return t=>t.href?function(e,t){return(n,i)=>{const{tr:r,selection:s,doc:o}=n,{ranges:a,empty:l}=s;if(l){const{from:n,to:i}=aa(s.$from,e);o.rangeHasMark(n,i,e)&&r.removeMark(n,i,e),r.addMark(n,i,e.create(t))}else a.forEach((n=>{const{$to:i,$from:s}=n;o.rangeHasMark(s.pos,i.pos,e)&&r.removeMark(s.pos,i.pos,e),r.addMark(s.pos,i.pos,e.create(t))}));return i(r)}}(e,t):function(e){return(t,n)=>{const{tr:i,selection:r}=t;let{from:s,to:o}=r;const{$from:a,empty:l}=r;if(l){const t=aa(a,e);s=t.from,o=t.to}return i.removeMark(s,o,e),n(i)}}(e)}pasteRules({type:e}){return[pa(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=,()!]*)/gi,e,(e=>({href:e})))]}get plugins(){return this.options.openOnClick?[new wi({props:{handleClick:(e,t,n)=>{const{schema:i}=e.state,r=oa(e.state,i.marks.link);r.href&&n.target instanceof HTMLAnchorElement&&(n.stopPropagation(),window.open(r.href,r.target))}}})]:[]}}class jl extends Ca{get name(){return"strike"}get schema(){return{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:e=>"line-through"===e}],toDOM:()=>["s",0]}}keys({type:e}){return{"Mod-d":qo(e)}}commands({type:e}){return()=>qo(e)}inputRules({type:e}){return[ua(/~([^~]+)~$/,e)]}pasteRules({type:e}){return[ma(/~([^~]+)~/g,e)]}}class zl extends Ca{get name(){return"underline"}get schema(){return{parseDOM:[{tag:"u"},{style:"text-decoration",getAttrs:e=>"underline"===e}],toDOM:()=>["u",0]}}keys({type:e}){return{"Mod-u":qo(e)}}commands({type:e}){return()=>qo(e)}}class Ul extends ba{get name(){return"history"}get defaultOptions(){return{depth:"",newGroupDelay:""}}keys(){return{"Mod-z":Al,"Mod-y":Sl,"Shift-Mod-z":Sl,"Mod-":Al,"Shift-Mod-":Sl}}get plugins(){return[(e={depth:this.options.depth,newGroupDelay:this.options.newGroupDelay},e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new wi({key:Cl,state:{init:function(){return new ml(ul.empty,ul.empty,null,0)},apply:function(t,n,i){return function(e,t,n,i){var r,s=n.getMeta(Cl);if(s)return s.historyState;n.getMeta(_l)&&(e=new ml(e.done,e.undone,null,0));var o=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(o&&o.getMeta(Cl))return o.getMeta(Cl).redo?new ml(e.done.addTransform(n,null,i,wl(t)),e.undone,gl(n.mapping.maps[n.steps.length-1]),e.prevTime):new ml(e.done,e.undone.addTransform(n,null,i,wl(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||o&&!1===o.getMeta("addToHistory"))return(r=n.getMeta("rebased"))?new ml(e.done.rebased(n,r),e.undone.rebased(n,r),vl(e.prevRanges,n.mapping),e.prevTime):new ml(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),vl(e.prevRanges,n.mapping),e.prevTime);var a=0==e.prevTime||!o&&(e.prevTime<(n.time||0)-i.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach((function(e,i){for(var r=0;r<t.length;r+=2)e<=t[r+1]&&i>=t[r]&&(n=!0)})),n}(n,e.prevRanges)),l=o?vl(e.prevRanges,n.mapping):gl(n.mapping.maps[n.steps.length-1]);return new ml(e.done.addTransform(n,a?t.selection.getBookmark():null,i,wl(t)),ul.empty,l,n.time)}(n,i,t,e)}},config:e,props:{handleDOMEvents:{beforeinput:function(e,t){var n="historyUndo"==t.inputType?Al(e.state,e.dispatch):"historyRedo"==t.inputType&&Sl(e.state,e.dispatch);return n&&t.preventDefault(),n}}}}))];var e}commands(){return{undo:()=>Al,redo:()=>Sl,undoDepth:()=>kl,redoDepth:()=>Il}}}const Hl={props:{value:{type:String},id:{type:String},width:{type:String,default:"100%"},height:{type:String,default:"150px"}},components:{Modal:Xe,EditorContent:Ea,EditorMenuBar:Da},beforeMount(){this.editor=new Pa({disablePasteRules:!0,disableInputRules:!0,extensions:[new Pl,new Tl,new Ml,new Ol({levels:[1,2,3]}),new El,new $l,new Dl,new Bl,new Ll,new Nl,new Rl,new Fl,new Zl,new jl,new zl,new Ul],content:this.value,onUpdate:e=>{const t=e.getHTML();this.$emit("changed",t),this.editorLarge.setContent(t,!1)},onFocus:()=>{this.focused=!0},onBlur:()=>{this.focused=!1}}),this.editorLarge=new Pa({disablePasteRules:!0,disableInputRules:!0,extensions:[new Pl,new Tl,new Ml,new Ol({levels:[1,2,3]}),new El,new $l,new Dl,new Bl,new Ll,new Nl,new Rl,new Fl,new Zl,new jl,new zl,new Ul],content:this.value,onUpdate:e=>{const t=e.getHTML();this.$emit("changed",t),this.editor.setContent(t,!1)}})},beforeDestroy(){this.editor.destroy(),this.editorLarge.destroy()},data:()=>({editor:null,focused:!1,enlarged:!1,editorLarge:null,enlargedWidth:window.innerWidth-100,enlargedHeight:window.innerHeight-340,linkModal:{shown:!1,url:"",linkCommand:null}}),methods:{onEditorClick(e){e.target.className.indexOf("editor-content")>=0&&this.editor.view.dom.focus()},onLargeEditorClick(e){e.target.className.indexOf("editor-content")>=0&&this.editorLarge.view.dom.focus()},toggleLink(e,t){this.linkModal.linkCommand=e,t.href&&(this.linkModal.url=t.href.trim()),this.linkModal.shown=!0},onLinkModalSubmit(){const e=this.linkModal.url.trim();e?this.linkModal.linkCommand({href:e}):this.linkModal.linkCommand({href:null}),this.linkModal.shown=!1}},watch:{id(e){this.editorLarge.setContent(this.value),this.editor.setContent(this.value)}}};var Vl=(0,Le.Z)(Hl,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rich-text-editor-container"},[n("editor-menu-bar",{attrs:{editor:e.editor},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.commands,r=t.isActive,s=t.getMarkAttrs;return[n("div",{staticClass:"rich-text-editor-menubar"},[n("span",{staticClass:"editor-icon",class:{"is-active":r.bold()},on:{click:i.bold}},[n("i",{staticClass:"fas fa-bold"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.italic()},on:{click:i.italic}},[n("i",{staticClass:"fas fa-italic"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.strike()},on:{click:i.strike}},[n("i",{staticClass:"fas fa-strikethrough"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.underline()},on:{click:i.underline}},[n("i",{staticClass:"fas fa-underline"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.link()},on:{click:function(t){e.toggleLink(i.link,s("link"))}}},[n("i",{staticClass:"fas fa-link"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.code()},on:{click:i.code}},[n("i",{staticClass:"fas fa-code"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.heading({level:1})},on:{click:function(e){return i.heading({level:1})}}},[e._v("\n                H1\n            ")]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.heading({level:2})},on:{click:function(e){return i.heading({level:2})}}},[e._v("\n                H2\n            ")]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.heading({level:3})},on:{click:function(e){return i.heading({level:3})}}},[e._v("\n                H3\n            ")]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.bullet_list()},on:{click:i.bullet_list}},[n("i",{staticClass:"fas fa-list-ul"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.ordered_list()},on:{click:i.ordered_list}},[n("i",{staticClass:"fas fa-list-ol"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.blockquote()},on:{click:i.blockquote}},[n("i",{staticClass:"fas fa-quote-left"})])])]}}])}),e._v(" "),n("div",{staticClass:"editor-frame",class:{focused:e.focused},style:{width:e.width,height:e.height}},[n("div",{staticClass:"editor-content",style:{width:e.width,height:e.height},on:{click:e.onEditorClick}},[n("editor-content",{attrs:{editor:e.editor}})],1),e._v(" "),n("span",{staticClass:"editor-enlarge",on:{click:function(t){e.enlarged=!0}}},[n("i",{staticClass:"fas fa-expand"})])]),e._v(" "),e.enlarged?n("div",{staticClass:"textarea-enlarged-container"},[n("div",{staticClass:"textarea-enlarged-top-panel"},[n("editor-menu-bar",{attrs:{editor:e.editorLarge},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.commands,r=t.isActive,s=t.getMarkAttrs;return[n("div",{staticClass:"editor-menubar"},[n("span",{staticClass:"editor-icon",class:{"is-active":r.bold()},on:{click:i.bold}},[n("i",{staticClass:"fas fa-bold"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.italic()},on:{click:i.italic}},[n("i",{staticClass:"fas fa-italic"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.strike()},on:{click:i.strike}},[n("i",{staticClass:"fas fa-strikethrough"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.underline()},on:{click:i.underline}},[n("i",{staticClass:"fas fa-underline"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.link()},on:{click:function(t){e.toggleLink(i.link,s("link"))}}},[n("i",{staticClass:"fas fa-link"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.code()},on:{click:i.code}},[n("i",{staticClass:"fas fa-code"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.heading({level:1})},on:{click:function(e){return i.heading({level:1})}}},[e._v("\n                        H1\n                    ")]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.heading({level:2})},on:{click:function(e){return i.heading({level:2})}}},[e._v("\n                        H2\n                    ")]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.heading({level:3})},on:{click:function(e){return i.heading({level:3})}}},[e._v("\n                        H3\n                    ")]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.bullet_list()},on:{click:i.bullet_list}},[n("i",{staticClass:"fas fa-list-ul"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.ordered_list()},on:{click:i.ordered_list}},[n("i",{staticClass:"fas fa-list-ol"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.blockquote()},on:{click:i.blockquote}},[n("i",{staticClass:"fas fa-quote-left"})])])]}}],null,!1,24630616)}),e._v(" "),n("span",{staticClass:"btn btn-secondary action-close",on:{click:function(t){e.enlarged=!1}}},[e._v("Close")])],1),e._v(" "),n("div",{staticClass:"editor-frame"},[n("div",{staticClass:"editor-content",on:{click:e.onEditorClick}},[n("editor-content",{attrs:{editor:e.editorLarge}})],1)])]):e._e(),e._v(" "),e.linkModal.shown?n("modal",{attrs:{title:"Add Link","primary-button":"Save"},on:{close:function(t){e.linkModal.shown=!1},"primary-submit":e.onLinkModalSubmit}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.linkModal.url,expression:"linkModal.url"}],staticClass:"textfield",attrs:{placeholder:"https://"},domProps:{value:e.linkModal.url},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onLinkModalSubmit.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.linkModal,"url",t.target.value)}}})]):e._e()],1)}),[],!1,null,null,null);const ql=Vl.exports;var Gl=n(1377),Wl=n(3363),Kl=n(8590);const Jl={setItemControlPoints(e,t){const n=Wl.Z.find(t.shape);if(n&&n.controlPoints){const i=n.controlPoints.make(t),r=(0,Kl.pD)(t);ze()(i,(e=>{e.x=e.x*r.x,e.y=e.y*r.y})),e.dispatch("setItemControlPoints",i)}else this.clearItemControlPoints(e)},clearItemControlPoints(e){e.dispatch("clearItemControlPoints")},updateAllCurveEditPoints(e,t){e.dispatch("setCurveEditItem",t)},updateCurveEditPoint(e,t,n,i,r){e.dispatch("updateCurveEditPoint",{item:t,pathId:n,pointId:i,point:r})},toggleCurveEditPointSelection(e,t,n,i){e.dispatch("toggleCurveEditPointSelection",{pathId:t,pointId:n,inclusive:i})},resetCurveEditPointSelection(e){e.dispatch("resetCurveEditPointSelection")},selectCurveEditPoint(e,t,n,i){e.dispatch("selectCurveEditPoint",{pathId:t,pointId:n,inclusive:i})},getCurveEditPaths:e=>e.state.curveEditing.paths,setMultiSelectBox(e,t){e.dispatch("setMultiSelectBox",t)},setSelectedConnectorPath(e,t){e.dispatch("setSelectedConnectorPath",t)},setItemSnapper(e,t){e.dispatch("setItemSnapper",t)},clearItemSnappers(e){e.dispatch("clearItemSnappers")},setAutoRemount(e,t){e.dispatch("setAutoRemount",t)},setShowPivot(e,t){e.dispatch("setShowPivot",t)},setShowClickableMarkers(e,t){e.dispatch("setShowClickableMarkers",t)},proposeConnectorDestinationItems(e,t,n,i){e.dispatch("proposeConnectorDestinationItems",{connectorItemId:t,mx:n,my:i})},disableProposeConnectorDestinationItems(e){e.dispatch("disableProposeConnectorDestinationItems")},addInfoSystemMessage(e,t,n){e.dispatch("addSystemMessage",{status:"info",message:t,id:n})},addErrorSystemMessage(e,t,n){e.dispatch("addSystemMessage",{status:"error",message:t,id:n})},removeSystemMessage(e,t){e.dispatch("removeSystemMessage",t)},startAnimationEditor(e,t){e.dispatch("startAnimationEditor",t)},setAnimationEditorRecording(e,t){e.dispatch("setAnimationEditorRecording",t)},setDefaultConnectorSmoothing(e,t){e.dispatch("setDefaultConnectorSmoothing",t)},copyItemStyle(e,t){e.dispatch("copyItemStyle",t)},setCurrentConnector(e,t){e.dispatch("setCurrentConnector",t)},addArtPack(e,t,n){e.dispatch("addArtPack",{artPack:n,artPackId:t})},removeArtPack(e,t){e.dispatch("removeArtPack",t)},registerShapeGroupId(e,t){e.dispatch("registerShapeGroupId",t)}},Yl={components:{Modal:Xe,RichTextEditor:ql},props:{name:{type:String,default:""},description:{type:String,default:""},apiClient:{type:Object,default:()=>null},uploadEnabled:{type:Boolean,default:!0}},mounted(){this.$refs.schemeNameInput.focus()},data(){return{schemeName:this.name,schemeDescription:this.description,imageUrl:"",showLoading:!1,mandatoryFields:{name:{highlight:!1}},errorMessage:null}},methods:{submitNewScheme(){const e=this.schemeName.trim();if(e){const t=[],n=this.imageUrl.trim();if(n.length>0){const e={shape:"rect",area:{x:0,y:0,w:1e3,h:1e3},shapeProps:{fill:{type:"image",image:n}},name:"background-image",description:"",behavior:{events:[]}};(0,Gl.z9)(e),t.push(e)}this.$emit("scheme-submitted",{name:e,description:this.schemeDescription,tags:[],items:t})}else this.mandatoryFields.name.highlight=!0,this.errorMessage="Diagram name should not be empty"},uploadImage(e){if(this.apiClient&&this.apiClient.uploadFile){const t=e.target.files[0];t&&((new FormData).append("image",t,t.name),this.apiClient.uploadFile(t).then((e=>{this.imageUrl=e})).catch((e=>{e.data&&e.data.message&&Jl.addErrorSystemMessage(this.$store,e.data.message)})))}}}},Ql=(0,Le.Z)(Yl,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{title:"New Diagram",primaryButton:"Create"},on:{"primary-submit":function(t){return e.submitNewScheme()},close:function(t){return e.$emit("close")}}},[n("h5",[e._v("Name")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.schemeName,expression:"schemeName"}],ref:"schemeNameInput",staticClass:"textfield",class:{"missing-field-error":e.mandatoryFields.name.highlight},attrs:{type:"text",placeholder:"Name..."},domProps:{value:e.schemeName},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitNewScheme()},input:function(t){t.target.composing||(e.schemeName=t.target.value)}}}),e._v(" "),n("h5",[e._v("Description")]),e._v(" "),n("rich-text-editor",{attrs:{value:e.schemeDescription},on:{changed:function(t){e.schemeDescription=arguments[0]}}}),e._v(" "),e.apiClient&&e.apiClient.uploadFile?n("div",[n("h5",[e._v("Diagram Image URL")]),e._v(" "),n("div",{staticClass:"image-control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.imageUrl,expression:"imageUrl"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Image URL..."},domProps:{value:e.imageUrl},on:{input:function(t){t.target.composing||(e.imageUrl=t.target.value)}}}),e._v(" "),e.uploadEnabled?n("div",{staticClass:"file-upload-button"},[n("i",{staticClass:"fas fa-file-upload icon"}),e._v(" "),n("input",{attrs:{type:"file",accept:"image/*"},on:{change:e.uploadImage}})]):e._e()])]):e._e(),e._v(" "),e.errorMessage?n("div",{staticClass:"msg msg-error"},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),e.showLoading?n("modal",{attrs:{title:"Loading",width:300},on:{close:function(t){e.showLoading=!1}}},[n("i",{staticClass:"fas fa-spinner fa-spin fa-1x"}),e._v("\n        Loading...\n    ")]):e._e()],1)}),[],!1,null,null,null).exports;var Xl=n(4670),ec=n.n(Xl);const tc={props:["name","iconClass","options"],mounted(){document.body.addEventListener("click",this.onBodyClick)},beforeDestroy(){document.body.removeEventListener("click",this.onBodyClick)},data:()=>({uid:`menu-dropdown-${ec().generate()}`,menuDisplayed:!1,x:0,y:0}),methods:{toggleMenu(){this.menuDisplayed?this.menuDisplayed=!1:(this.menuDisplayed=!0,this.$nextTick((()=>this.readjustDropdownOnScreen())))},readjustDropdownOnScreen(){const e=this.$refs.menuTitle.getBoundingClientRect(),t=this.$refs.menuList.getBoundingClientRect(),n=t.width,i=t.height;let r=Math.max(0,e.x),s=Math.max(0,e.bottom),o=r+n,a=s+i+this.searchTextfieldHeight;o>window.innerWidth?this.x=r+window.innerWidth-o:this.x=r,a>window.innerHeight?this.y=e.top-i:this.y=s},onOptionClicked(e){e.disabled||(this.menuDisplayed=!1,e.event&&this.$emit(e.event),e.callback&&e.callback())},onBodyClick(e){if(!0===this.menuDisplayed){if(e.srcElement&&e.srcElement.closest(`#${this.uid}`))return;this.menuDisplayed=!1}}}},nc=(0,Le.Z)(tc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"menu-dropdown",attrs:{id:e.uid}},[n("div",{ref:"menuTitle",staticClass:"menu-dropdown-title"},[e.iconClass?n("span",{staticClass:"icon-button",on:{click:e.toggleMenu}},[n("i",{class:e.iconClass}),e._v(" "+e._s(e.name))]):n("span",{staticClass:"link",on:{click:e.toggleMenu}},[e._v(e._s(e.name)+" "),n("i",{staticClass:"fas fa-caret-down"})])]),e._v(" "),e.menuDisplayed?n("ul",{ref:"menuList",style:{top:e.y+"px",left:e.x+"px"}},e._l(e.options,(function(t){return n("li",{class:{disabled:t.disabled}},[t.link?n("a",{attrs:{href:t.link}},[e._v(e._s(t.name))]):n("span",{on:{click:function(n){return e.onOptionClicked(t)}}},[t.iconClass?n("i",{class:t.iconClass}):e._e(),e._v(" "+e._s(t.name))])])})),0):e._e()])}),[],!1,null,null,null).exports;var ic=n(3105),rc=n.n(ic);const sc={components:{Modal:Xe},props:{apiClient:{type:Object},path:{type:String,default:""},source:{type:Object,required:!0}},beforeMount(){this.selectNewPath(this.path)},data(){return{selectedPath:this.path,breadcrumbs:[],isLoading:!0,entries:[],cachedEntries:new Map,errorMessage:null}},methods:{loadEntries(){if(this.cachedEntries.has(this.selectedPath))return this.entries=this.cachedEntries.get(this.selectedPath),this.isLoading=!1,void this.$forceUpdate();this.isLoading=!0,this.apiClient.listEntries(this.selectedPath).then((e=>{this.breadcrumbs=e.breadcrumbs;const t=Ke()(rc()(e.entries,(e=>"dir"===e.kind)),(e=>(e.disabled="dir"===this.source.kind&&this.source.path===e.path,e)));this.cachedEntries.set(this.selectedPath,t),this.entries=t,this.isLoading=!1,this.$forceUpdate()})).catch((e=>{console.error(e),this.isLoading=!1,this.errorMessage="Failed to load directories"}))},selectNewPath(e){"dir"===this.source.kind&&this.source.path===e||(this.selectedPath=e,this.$forceUpdate(),this.loadEntries())},moveTo(e){"dir"===this.source.kind?this.apiClient.moveDir(this.source.path,e).then((()=>{this.$emit("moved")})):"scheme"===this.source.kind&&this.apiClient.moveScheme(this.source.id,e).then((()=>{this.$emit("moved")}))},moveToCurrentLocation(){this.moveTo(this.selectedPath)}},computed:{primaryButton(){return this.selectedPath!==this.path?"Move here":null}}},oc=sc;function ac(e){return e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||32===e||e>=39&&e<=46}const lc={components:{Modal:Xe,CreateNewSchemeModal:Ql,MenuDropdown:nc,MoveToFolderModal:(0,Le.Z)(oc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{attrs:{title:"Move to folder",primaryButton:e.primaryButton},on:{close:function(t){return e.$emit("close")},"primary-submit":e.moveToCurrentLocation}},[e.errorMessage?n("div",{staticClass:"msg msg-error"},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),n("ul",{staticClass:"breadcrumbs"},e._l(e.breadcrumbs,(function(t,i){return n("li",[n("span",{staticClass:"breadcrumb-link",on:{click:function(n){return e.selectNewPath(t.path)}}},[e._v(e._s(t.name))]),e._v(" "),i<e.breadcrumbs.length-1?n("i",{staticClass:"fas fa-caret-right breadcrumb-separator"}):e._e()])})),0),e._v(" "),n("div",{staticClass:"entries-container"},[e.isLoading?n("div",[n("i",{staticClass:"fas fa-spinner fa-spin fa-1x"}),e._v(" "),n("span",[e._v("Loading...")])]):n("ul",{staticClass:"entries"},e._l(e.entries,(function(t){return n("li",[n("div",{staticClass:"entry",class:{disabled:t.disabled},on:{click:function(n){return e.selectNewPath(t.path)}}},[n("i",{staticClass:"icon fas fa-folder fa-2x"}),e._v(" "),n("span",{staticClass:"entry-link-text"},[e._v(e._s(t.name))])]),e._v(" "),t.disabled?e._e():n("span",{staticClass:"entry-move-button btn btn-secondary",on:{click:function(n){return e.moveTo(t.path)}}},[e._v("Move here")])])})),0)])])}),[],!1,null,null,null).exports},props:{apiClientType:{type:String,default:"fs"},toolbarShown:{type:Boolean,default:!0}},beforeMount(){this.loadNextPage()},data(){let e=this.$route.fullPath.trim();return"/"===e&&(e=""),0===e.indexOf("/f/")&&(e=decodeURI(e.substring(3))),{path:e,breadcrumbs:[],entries:[],errorMessage:null,viewOnly:!0,searchKeyword:"",nextPageToken:null,isLoading:!0,is404:!1,newDirectoryModal:{name:"",shown:!1,errorMessage:null},newSchemeModal:{shown:!1},deleteEntryModal:{entry:null,shown:!1,errorMessage:null},renameEntryModal:{entryIdx:-1,name:"",kind:null,shown:!1,errorMessage:null},moveEntryModal:{entryIdx:-1,shown:!1,errorMessage:null,source:null},apiClient:null}},methods:{showNewSchemeModel(){this.newSchemeModal.shown=!0},showNewDirectoryModel(){this.newDirectoryModal.name="",this.newDirectoryModal.err=null,this.newDirectoryModal.shown=!0,this.$nextTick((()=>{this.$refs.newDirectoryModalInput.focus()}))},submitNewDirectory(){this.newDirectoryModal.errorMessage=null;const e=this.newDirectoryModal.name.trim();if(e){for(let t=0;t<e.length;t++)if(!ac(e.charCodeAt(t)))return void(this.newDirectoryModal.errorMessage="Unsupported symbol: "+e.charAt(t));this.apiClient.createDirectory(this.path,e).then((()=>{window.location.reload()})).catch((e=>{this.newDirectoryModal.errorMessage="Failed to create new directory"}))}else this.newDirectoryModal.errorMessage="Directory name should not be empty"},onSchemeSubmitted(e){this.apiClient.createNewScheme(this.path,e).then((e=>{"history"===this.$router.mode?this.$router.push({path:`/docs/${e.id}#m=edit`}):this.$router.push({path:`/docs/${e.id}?m=edit`})})).catch((e=>{console.error("Failed to create diagram",e),this.errorMessage="Failed to create diagram"}))},onDeleteEntry(e){this.deleteEntryModal.entry=e,this.deleteEntryModal.errorMessage=null,this.deleteEntryModal.shown=!0},confirmDeleteEntry(e){"dir"===e.kind?this.apiClient.deleteDir(e.path,e.name).then((()=>{window.location.reload()})).catch((e=>{this.deleteEntryModal.errorMessage="Failed to delete directory"})):"scheme"===e.kind&&this.apiClient.deleteScheme(e.id).then((()=>{window.location.reload()})).catch((e=>{this.deleteEntryModal.errorMessage="Failed to delete diagram"}))},onRenameEntry(e,t){this.renameEntryModal.name=e.name,this.renameEntryModal.entryIdx=t,this.renameEntryModal.kind=e.kind,this.renameEntryModal.shown=!0,this.$nextTick((()=>{const e=this.$refs.renameEntryModalInput;e&&e.focus()}))},confirmEntryRename(){if(0===this.renameEntryModal.name.trim().length)return void(this.renameEntryModal.errorMessage="Name should not be empty");const e=this.entries[this.renameEntryModal.entryIdx].path;this.entries[this.renameEntryModal.entryIdx].name!==this.renameEntryModal.name&&("dir"===this.renameEntryModal.kind?this.apiClient.renameDirectory(e,this.renameEntryModal.name).then((e=>{this.entries[this.renameEntryModal.entryIdx].name=e.name,this.entries[this.renameEntryModal.entryIdx].path=e.path,this.renameEntryModal.shown=!1})).catch((e=>{e.response&&400===e.response.status?this.renameEntryModal.errorMessage="Such directory name is not allowed":this.renameEntryModal.errorMessage="Sorry, something went wrong. Was not able to rename this directory"})):"scheme"===this.renameEntryModal.kind&&this.apiClient.renameScheme(this.entries[this.renameEntryModal.entryIdx].id,this.renameEntryModal.name).then((()=>{this.entries[this.renameEntryModal.entryIdx].name=this.renameEntryModal.name,this.renameEntryModal.shown=!1})).catch((e=>{e.response&&400===e.response.status?this.renameEntryModal.errorMessage="Such scheme name is not allowed":this.renameEntryModal.errorMessage="Sorry, something went wrong. Was not able to rename this scheme"})))},onMoveEntry(e,t){this.moveEntryModal.entryIdx=t,this.moveEntryModal.errorMessage=null,this.moveEntryModal.shown=!0,this.moveEntryModal.source=e},onEntryMoved(){this.entries.splice(this.moveEntryModal.entryIdx,1),this.moveEntryModal.shown=!1,this.$forceUpdate()},searchSchemes(){this.$router.push({path:`/search?q=${encodeURIComponent(this.searchKeyword)}`})},loadNextPage(){this.isLoading=!0,Ge(this.apiClientType).then((e=>{this.$store.dispatch("setApiClient",e),this.apiClient=e})).then((()=>{const e={};return this.nextPageToken&&(e.nextPageToken=this.nextPageToken),this.apiClient.listEntries(this.path,e)})).then((e=>{this.nextPageToken=e.nextPageToken,this.breadcrumbs=Ke()(e.breadcrumbs,(e=>({kind:"dir",path:e.path,name:e.name})));const t=e=>"dir"===e?"a":"b";e.entries.sort(((e,n)=>t(e.kind)+e.name.toLowerCase()<t(n.kind)+n.name.toLowerCase()?-1:1)),ze()(e.entries,(e=>{e.menuOptions=[{name:"Delete",iconClass:"fas fa-trash",event:"delete"},{name:"Rename",iconClass:"fas fa-edit",event:"rename"},{name:"Move",iconClass:"fas fa-share",event:"move"}],"scheme"===e.kind&&(e.encodedTime=encodeURIComponent(new Date(e.modifiedTime).getTime()))})),this.entries=this.entries.concat(e.entries),this.viewOnly=e.viewOnly,this.isLoading=!1})).catch((e=>{console.error(e),this.isLoading=!1,e.response&&404===e.response.status?this.is404=!0:this.errorMessage="Oops, something went wrong"}))}},computed:{renameEntryModalTitle(){return"dir"===this.renameEntryModal.kind?"Rename directory":"scheme"===this.renameEntryModal.kind?"Rename scheme":"Rename"}}},cc=lc,hc=(0,Le.Z)(cc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("schemio-header",[n("div",{attrs:{slot:"loader"},slot:"loader"},[e.isLoading?n("div",{staticClass:"loader"},[n("div",{staticClass:"loader-element"})]):e._e()])]),e._v(" "),n("div",{staticClass:"middle-content"},[e.errorMessage?n("div",{staticClass:"msg msg-error"},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),e.is404?n("div",[n("h4",[e._v("Sorry, specfied path does not exist")])]):n("div",[!e.viewOnly&&e.toolbarShown?n("div",{staticClass:"fs-toolbar"},[n("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.showNewDirectoryModel()}}},[n("i",{staticClass:"fas fa-folder-plus"}),e._v(" New directory\n                ")]),e._v(" "),n("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.showNewSchemeModel()}}},[n("i",{staticClass:"fas fa-file"}),e._v(" New Diagram\n                ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyword,expression:"searchKeyword"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Search ..."},domProps:{value:e.searchKeyword},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchSchemes.apply(null,arguments)},input:function(t){t.target.composing||(e.searchKeyword=t.target.value)}}}),e._v(" "),n("span",{staticClass:"btn btn-primary",on:{click:e.searchSchemes}},[n("i",{staticClass:"fas fa-search"}),e._v(" Search\n                ")])]):e._e(),e._v(" "),n("ul",{staticClass:"breadcrumbs"},e._l(e.breadcrumbs,(function(t,i){return n("li",[n("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/f/"+t.path}},[e._v(e._s(t.name))]),e._v(" "),i<e.breadcrumbs.length-1?n("i",{staticClass:"fas fa-caret-right breadcrumb-separator"}):e._e()],1)})),0),e._v(" "),n("table",{staticClass:"entries-table"},[e._m(0),e._v(" "),n("tbody",e._l(e.entries,(function(t,i){return n("tr",[n("td",["dir"===t.kind?n("router-link",{staticClass:"entry-link",attrs:{to:"/f/"+t.path}},[n("i",{staticClass:"icon fas fa-folder fa-2x"}),e._v(" "),n("span",{staticClass:"entry-link-text"},[e._v(e._s(t.name))])]):"scheme"===t.kind?n("router-link",{staticClass:"entry-link",attrs:{to:"/docs/"+t.id}},[t.previewURL?n("img",{staticClass:"scheme-preview",attrs:{src:t.previewURL+"?v="+t.encodedTime}}):n("i",{staticClass:"icon far fa-file fa-2x"}),e._v(" "),n("span",{staticClass:"entry-link-text"},[e._v(e._s(t.name))])]):e._e()],1),e._v(" "),n("td",{staticClass:"time-column"},[t.modifiedTime?n("span",[e._v(e._s(e._f("formatDateTime")(t.modifiedTime)))]):e._e()]),e._v(" "),n("td",{staticClass:"operation-column"},[".."===t.name||e.viewOnly?e._e():n("menu-dropdown",{attrs:{name:"",iconClass:"fas fa-ellipsis-v",options:t.menuOptions},on:{delete:function(n){return e.onDeleteEntry(t)},rename:function(n){return e.onRenameEntry(t,i)},move:function(n){return e.onMoveEntry(t,i)}}})],1)])})),0)]),e._v(" "),e.nextPageToken&&!e.isLoading?n("p",{staticStyle:{"text-align":"center"}},[n("span",{staticClass:"btn btn-primary",on:{click:e.loadNextPage}},[e._v("Load more")])]):e._e()]),e._v(" "),e.newDirectoryModal.shown?n("modal",{attrs:{title:"New Directory",primaryButton:"Create"},on:{close:function(t){e.newDirectoryModal.shown=!1},"primary-submit":function(t){return e.submitNewDirectory()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newDirectoryModal.name,expression:"newDirectoryModal.name"}],ref:"newDirectoryModalInput",staticClass:"textfield",attrs:{type:"text",placeholder:"Type name of new directory..."},domProps:{value:e.newDirectoryModal.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitNewDirectory()},input:function(t){t.target.composing||e.$set(e.newDirectoryModal,"name",t.target.value)}}}),e._v(" "),e.newDirectoryModal.errorMessage?n("div",{staticClass:"msg msg-error"},[e._v(e._s(e.newDirectoryModal.errorMessage))]):e._e()]):e._e(),e._v(" "),e.deleteEntryModal.shown?n("modal",{attrs:{title:"Confirm delete",primaryButton:"Delete"},on:{close:function(t){e.deleteEntryModal.shown=!1},"primary-submit":function(t){return e.confirmDeleteEntry(e.deleteEntryModal.entry)}}},[e._v("\n            Are you sure you want to delete\n            "),"dir"===e.deleteEntryModal.entry.kind?n("span",[n("b",[e._v(e._s(e.deleteEntryModal.entry.name))]),e._v(" and all of its documents?\n            ")]):n("span",[e._v("\n                scheme "),n("b",[e._v(e._s(e.deleteEntryModal.entry.name))]),e._v("?\n            ")]),e._v(" "),e.deleteEntryModal.errorMessage?n("div",{staticClass:"msg msg-error"},[e._v(e._s(e.deleteEntryModal.errorMessage))]):e._e()]):e._e(),e._v(" "),e.renameEntryModal.shown?n("modal",{attrs:{title:e.renameEntryModalTitle,primaryButton:"Rename"},on:{close:function(t){e.renameEntryModal.shown=!1},"primary-submit":function(t){return e.confirmEntryRename()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.renameEntryModal.name,expression:"renameEntryModal.name"}],ref:"renameEntryModalInput",staticClass:"textfield",attrs:{type:"text"},domProps:{value:e.renameEntryModal.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmEntryRename()},input:function(t){t.target.composing||e.$set(e.renameEntryModal,"name",t.target.value)}}}),e._v(" "),e.renameEntryModal.errorMessage?n("div",{staticClass:"msg msg-error"},[e._v(e._s(e.renameEntryModal.errorMessage))]):e._e()]):e._e(),e._v(" "),e.newSchemeModal.shown?n("CreateNewSchemeModal",{attrs:{apiClient:e.apiClient},on:{"scheme-submitted":e.onSchemeSubmitted,close:function(t){e.newSchemeModal.shown=!1}}}):e._e(),e._v(" "),e.moveEntryModal.shown?n("MoveToFolderModal",{attrs:{apiClient:e.apiClient,source:e.moveEntryModal.source,path:e.path},on:{close:function(t){e.moveEntryModal.shown=!1},moved:e.onEntryMoved}}):e._e()],1)],1)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("Name")]),e._v(" "),n("th",[e._v("Modified")]),e._v(" "),n("th")])])}],!1,null,null,null).exports,dc=(0,Le.Z)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("schemio-header"),e._v(" "),e._m(0)],1)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"middle-content page-content"},[n("h1",[e._v("About")]),e._v(" "),n("p",[n("a",{attrs:{href:"/"}},[e._v("Schemio")]),e._v(" is a web based diagramming app that allows you to build interactive diagrams.\n            Although originally Schemio was not designed for this, but it is also possible to use it as a prototyping app.\n        ")]),e._v(" "),n("p",[e._v("\n            If you want to host Schemio yourself, you can get it from "),n("a",{attrs:{href:"https://github.com/ishubin/schemio"}},[e._v("GitHub")])]),e._v(" "),n("h2",[e._v("Features")]),e._v(" "),n("ul",[n("li",[e._v("Creating interactive diagrams")]),e._v(" "),n("li",[e._v("Documenting individual items in your diagrams")]),e._v(" "),n("li",[e._v("Linking diagrams. You can add links to other diagrams or to external documents")]),e._v(" "),n("li",[e._v("Component based diagrams: you can load diagrams dynamically inside of each other. This allows you to manage your digrams better and lets the user discover more and more while staying in original document")]),e._v(" "),n("li",[e._v("Frame animation editor: it is possible to use frame based animations for any property.")]),e._v(" "),n("li",[e._v("Draw free-form shapes")]),e._v(" "),n("li",[e._v("Relative transformations: you can attach items to other items in your diagrams and tweak rotation, pivot point and scale")]),e._v(" "),n("li",[e._v("Behavior editor: you can assign event handlers to any item (events like: init, click, mouse in, mouse out)")]),e._v(" "),n("li",[e._v("Various animation functions: you can have smooth transitions like fade in or fade out, move items, render particle effect etc.")]),e._v(" "),n("li",[e._v("Export entire diagram or only selected objects as SVG")]),e._v(" "),n("li",[e._v("Generate static version of all of your diagrams so that you can host it anywhere, even on GitHub pages")])]),e._v(" "),n("h2",[e._v("License")]),e._v(" "),n("p",[n("a",{attrs:{href:"/"}},[e._v("Schemio")]),e._v(" is subject to the terms of the Mozilla Public License, v. 2.0. You can obtain a copy of license at "),n("a",{attrs:{href:"https://mozilla.org/MPL/2.0/"}},[e._v("https://mozilla.org/MPL/2.0/")]),e._v(".\n        ")])])}],!1,null,null,null).exports;var uc=("undefined"!=typeof window?window:void 0!==n.g?n.g:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function pc(e,t){if(void 0===t&&(t=[]),null===e||"object"!=typeof e)return e;var n,i=(n=function(t){return t.original===e},t.filter(n)[0]);if(i)return i.copy;var r=Array.isArray(e)?[]:{};return t.push({original:e,copy:r}),Object.keys(e).forEach((function(n){r[n]=pc(e[n],t)})),r}function mc(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function fc(e){return null!==e&&"object"==typeof e}var gc=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"==typeof n?n():n)||{}},vc={namespaced:{configurable:!0}};vc.namespaced.get=function(){return!!this._rawModule.namespaced},gc.prototype.addChild=function(e,t){this._children[e]=t},gc.prototype.removeChild=function(e){delete this._children[e]},gc.prototype.getChild=function(e){return this._children[e]},gc.prototype.hasChild=function(e){return e in this._children},gc.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},gc.prototype.forEachChild=function(e){mc(this._children,e)},gc.prototype.forEachGetter=function(e){this._rawModule.getters&&mc(this._rawModule.getters,e)},gc.prototype.forEachAction=function(e){this._rawModule.actions&&mc(this._rawModule.actions,e)},gc.prototype.forEachMutation=function(e){this._rawModule.mutations&&mc(this._rawModule.mutations,e)},Object.defineProperties(gc.prototype,vc);var yc,xc=function(e){this.register([],e,!1)};function bc(e,t,n){if(t.update(n),n.modules)for(var i in n.modules){if(!t.getChild(i))return;bc(e.concat(i),t.getChild(i),n.modules[i])}}xc.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},xc.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return e+((t=t.getChild(n)).namespaced?n+"/":"")}),"")},xc.prototype.update=function(e){bc([],this.root,e)},xc.prototype.register=function(e,t,n){var i=this;void 0===n&&(n=!0);var r=new gc(t,n);0===e.length?this.root=r:this.get(e.slice(0,-1)).addChild(e[e.length-1],r),t.modules&&mc(t.modules,(function(t,r){i.register(e.concat(r),t,n)}))},xc.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],i=t.getChild(n);i&&i.runtime&&t.removeChild(n)},xc.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};var wc=function(e){var t=this;void 0===e&&(e={}),!yc&&"undefined"!=typeof window&&window.Vue&&Ec(window.Vue);var n=e.plugins;void 0===n&&(n=[]);var i=e.strict;void 0===i&&(i=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new xc(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new yc,this._makeLocalGettersCache=Object.create(null);var r=this,s=this.dispatch,o=this.commit;this.dispatch=function(e,t){return s.call(r,e,t)},this.commit=function(e,t,n){return o.call(r,e,t,n)},this.strict=i;var a=this._modules.root.state;kc(this,a,[],this._modules.root),Sc(this,a),n.forEach((function(e){return e(t)})),(void 0!==e.devtools?e.devtools:yc.config.devtools)&&function(e){uc&&(e._devtoolHook=uc,uc.emit("vuex:init",e),uc.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){uc.emit("vuex:mutation",e,t)}),{prepend:!0}),e.subscribeAction((function(e,t){uc.emit("vuex:action",e,t)}),{prepend:!0}))}(this)},Cc={state:{configurable:!0}};function _c(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function Ac(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;kc(e,n,[],e._modules.root,!0),Sc(e,n,t)}function Sc(e,t,n){var i=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var r=e._wrappedGetters,s={};mc(r,(function(t,n){s[n]=function(e,t){return function(){return e(t)}}(t,e),Object.defineProperty(e.getters,n,{get:function(){return e._vm[n]},enumerable:!0})}));var o=yc.config.silent;yc.config.silent=!0,e._vm=new yc({data:{$$state:t},computed:s}),yc.config.silent=o,e.strict&&function(e){e._vm.$watch((function(){return this._data.$$state}),(function(){}),{deep:!0,sync:!0})}(e),i&&(n&&e._withCommit((function(){i._data.$$state=null})),yc.nextTick((function(){return i.$destroy()})))}function kc(e,t,n,i,r){var s=!n.length,o=e._modules.getNamespace(n);if(i.namespaced&&(e._modulesNamespaceMap[o],e._modulesNamespaceMap[o]=i),!s&&!r){var a=Ic(t,n.slice(0,-1)),l=n[n.length-1];e._withCommit((function(){yc.set(a,l,i.state)}))}var c=i.context=function(e,t,n){var i=""===t,r={dispatch:i?e.dispatch:function(n,i,r){var s=Pc(n,i,r),o=s.payload,a=s.options,l=s.type;return a&&a.root||(l=t+l),e.dispatch(l,o)},commit:i?e.commit:function(n,i,r){var s=Pc(n,i,r),o=s.payload,a=s.options,l=s.type;a&&a.root||(l=t+l),e.commit(l,o,a)}};return Object.defineProperties(r,{getters:{get:i?function(){return e.getters}:function(){return function(e,t){if(!e._makeLocalGettersCache[t]){var n={},i=t.length;Object.keys(e.getters).forEach((function(r){if(r.slice(0,i)===t){var s=r.slice(i);Object.defineProperty(n,s,{get:function(){return e.getters[r]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}(e,t)}},state:{get:function(){return Ic(e.state,n)}}}),r}(e,o,n);i.forEachMutation((function(t,n){!function(e,t,n,i){(e._mutations[t]||(e._mutations[t]=[])).push((function(t){n.call(e,i.state,t)}))}(e,o+n,t,c)})),i.forEachAction((function(t,n){var i=t.root?n:o+n,r=t.handler||t;!function(e,t,n,i){(e._actions[t]||(e._actions[t]=[])).push((function(t){var r,s=n.call(e,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:e.getters,rootState:e.state},t);return(r=s)&&"function"==typeof r.then||(s=Promise.resolve(s)),e._devtoolHook?s.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):s}))}(e,i,r,c)})),i.forEachGetter((function(t,n){!function(e,t,n,i){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return n(i.state,i.getters,e.state,e.getters)})}(e,o+n,t,c)})),i.forEachChild((function(i,s){kc(e,t,n.concat(s),i,r)}))}function Ic(e,t){return t.reduce((function(e,t){return e[t]}),e)}function Pc(e,t,n){return fc(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}function Ec(e){yc&&e===yc||function(e){if(Number(e.version.split(".")[0])>=2)e.mixin({beforeCreate:n});else{var t=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[n].concat(e.init):n,t.call(this,e)}}function n(){var e=this.$options;e.store?this.$store="function"==typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}(yc=e)}Cc.state.get=function(){return this._vm._data.$$state},Cc.state.set=function(e){},wc.prototype.commit=function(e,t,n){var i=this,r=Pc(e,t,n),s=r.type,o=r.payload,a=(r.options,{type:s,payload:o}),l=this._mutations[s];l&&(this._withCommit((function(){l.forEach((function(e){e(o)}))})),this._subscribers.slice().forEach((function(e){return e(a,i.state)})))},wc.prototype.dispatch=function(e,t){var n=this,i=Pc(e,t),r=i.type,s=i.payload,o={type:r,payload:s},a=this._actions[r];if(a){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(o,n.state)}))}catch(e){}var l=a.length>1?Promise.all(a.map((function(e){return e(s)}))):a[0](s);return new Promise((function(e,t){l.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(o,n.state)}))}catch(e){}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(o,n.state,e)}))}catch(e){}t(e)}))}))}},wc.prototype.subscribe=function(e,t){return _c(e,this._subscribers,t)},wc.prototype.subscribeAction=function(e,t){return _c("function"==typeof e?{before:e}:e,this._actionSubscribers,t)},wc.prototype.watch=function(e,t,n){var i=this;return this._watcherVM.$watch((function(){return e(i.state,i.getters)}),t,n)},wc.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._vm._data.$$state=e}))},wc.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),kc(this,this.state,e,this._modules.get(e),n.preserveState),Sc(this,this.state)},wc.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var n=Ic(t.state,e.slice(0,-1));yc.delete(n,e[e.length-1])})),Ac(this)},wc.prototype.hasModule=function(e){return"string"==typeof e&&(e=[e]),this._modules.isRegistered(e)},wc.prototype.hotUpdate=function(e){this._modules.update(e),Ac(this,!0)},wc.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(wc.prototype,Cc);var Tc=Bc((function(e,t){var n={};return $c(t).forEach((function(t){var i=t.key,r=t.val;n[i]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var i=Lc(this.$store,0,e);if(!i)return;t=i.context.state,n=i.context.getters}return"function"==typeof r?r.call(this,t,n):t[r]},n[i].vuex=!0})),n})),Mc=Bc((function(e,t){var n={};return $c(t).forEach((function(t){var i=t.key,r=t.val;n[i]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var i=this.$store.commit;if(e){var s=Lc(this.$store,0,e);if(!s)return;i=s.context.commit}return"function"==typeof r?r.apply(this,[i].concat(t)):i.apply(this.$store,[r].concat(t))}})),n})),Oc=Bc((function(e,t){var n={};return $c(t).forEach((function(t){var i=t.key,r=t.val;r=e+r,n[i]=function(){if(!e||Lc(this.$store,0,e))return this.$store.getters[r]},n[i].vuex=!0})),n})),Dc=Bc((function(e,t){var n={};return $c(t).forEach((function(t){var i=t.key,r=t.val;n[i]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var i=this.$store.dispatch;if(e){var s=Lc(this.$store,0,e);if(!s)return;i=s.context.dispatch}return"function"==typeof r?r.apply(this,[i].concat(t)):i.apply(this.$store,[r].concat(t))}})),n}));function $c(e){return function(e){return Array.isArray(e)||fc(e)}(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function Bc(e){return function(t,n){return"string"!=typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function Lc(e,t,n){return e._modulesNamespaceMap[n]}function Nc(e,t,n){var i=n?e.groupCollapsed:e.group;try{i.call(e,t)}catch(n){e.log(t)}}function Rc(e){try{e.groupEnd()}catch(t){e.log(" log end ")}}function Fc(){var e=new Date;return" @ "+Zc(e.getHours(),2)+":"+Zc(e.getMinutes(),2)+":"+Zc(e.getSeconds(),2)+"."+Zc(e.getMilliseconds(),3)}function Zc(e,t){return"0",n=t-e.toString().length,new Array(n+1).join("0")+e;var n}var jc={Store:wc,install:Ec,version:"3.6.2",mapState:Tc,mapMutations:Mc,mapGetters:Oc,mapActions:Dc,createNamespacedHelpers:function(e){return{mapState:Tc.bind(null,e),mapGetters:Oc.bind(null,e),mapMutations:Mc.bind(null,e),mapActions:Dc.bind(null,e)}},createLogger:function(e){void 0===e&&(e={});var t=e.collapsed;void 0===t&&(t=!0);var n=e.filter;void 0===n&&(n=function(e,t,n){return!0});var i=e.transformer;void 0===i&&(i=function(e){return e});var r=e.mutationTransformer;void 0===r&&(r=function(e){return e});var s=e.actionFilter;void 0===s&&(s=function(e,t){return!0});var o=e.actionTransformer;void 0===o&&(o=function(e){return e});var a=e.logMutations;void 0===a&&(a=!0);var l=e.logActions;void 0===l&&(l=!0);var c=e.logger;return void 0===c&&(c=console),function(e){var h=pc(e.state);void 0!==c&&(a&&e.subscribe((function(e,s){var o=pc(s);if(n(e,h,o)){var a=Fc(),l=r(e),d="mutation "+e.type+a;Nc(c,d,t),c.log("%c prev state","color: #9E9E9E; font-weight: bold",i(h)),c.log("%c mutation","color: #03A9F4; font-weight: bold",l),c.log("%c next state","color: #4CAF50; font-weight: bold",i(o)),Rc(c)}h=o})),l&&e.subscribeAction((function(e,n){if(s(e,n)){var i=Fc(),r=o(e),a="action "+e.type+i;Nc(c,a,t),c.log("%c action","color: #03A9F4; font-weight: bold",r),Rc(c)}})))}}};const zc=jc;var Uc=n(4691);class Hc{constructor(e,t,n){this.storage=e,this.name=t,this.limit=n,this.items={},this.amountOfElements=0,this.revision=0,this.loadFromSettingsStorage()}_saveItem(e,t){this.storage.setItem(e,JSON.stringify(t))}_getItem(e,t){const n=this.storage.getItem(e);return n?JSON.parse(n):t}loadFromSettingsStorage(){const e=this._getItem(`LSS-${this.name}`);e&&e.items&&e.amountOfElements&&e.revision&&(this.items=e.items,this.amountOfElements=e.amountOfElements,this.revision=e.revision)}saveToSettingsStorage(){this._saveItem(`LSS-${this.name}`,{items:this.items,amountOfElements:this.amountOfElements,revision:this.revision})}save(e,t){if(this.items.hasOwnProperty(e))return this.makeMostRecent(this.items[e]),this.items[e].v=t,void this.saveToSettingsStorage();this.amountOfElements>=this.limit&&this.evict(),this.items[e]={r:this.getNewRevision(),v:t},this.amountOfElements+=1,this.saveToSettingsStorage()}get(e,t){const n=this.items[e];return n?n.v:t}makeMostRecent(e){e.r=this.getNewRevision()}evict(){let e=null,t=0;ze()(this.items,((n,i)=>{(!e||t>n.r)&&(e=i,t=n.r)})),e&&(delete this.items[e],this.amountOfElements-=1)}getElementsCount(){return this.amountOfElements}getNewRevision(){return this.revision+=1,this.revision}}const Vc={getItem:e=>window.localStorage.getItem(e),setItem(e,t){window.localStorage.setItem(e,t)}};function qc(e,t){return new Hc(Vc,e,t)}var Gc=n(8270);function Wc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Kc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wc(Object(n),!0).forEach((function(t){Jc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t().use(zc);const Yc="defaultConnectorSmoothing",Qc=qc("store",100);function Xc(e){return t=>{const n=Uc.Z.clone(t),i=(0,Kl.rs)(t.x,t.y,e);if(n.x=i.x,n.y=i.y,"B"===t.t){const r=(0,Kl.rs)(t.x+t.x1,t.y+t.y1,e);n.x1=r.x-i.x,n.y1=r.y-i.y}if("B"===t.t){const r=(0,Kl.rs)(t.x+t.x2,t.y+t.y2,e);n.x2=r.x-i.x,n.y2=r.y-i.y}return n}}function eh(e){if("B"===e.t){let t=Math.sqrt(e.x1*e.x1+e.y1*e.y1),n=1,i=0;t>1e-6&&(n=e.x1/t,i=e.y1/t),t=Math.sqrt(e.x2*e.x2+e.y2*e.y2);let r=1,s=0;t>1e-6&&(r=e.x2/t,s=e.y2/t),e.vx1=n,e.vy1=i,e.vx2=r,e.vy2=s}}function th(e,t,n){return e>=0&&e<n.paths.length&&t>=0&&t<n.paths[e].points.length}function nh(e){for(let t=0;t<e.length;t++)for(let n=0;n<e[t].points.length;n++)if(e[t].points[n].selected)return e[t].points[n];return null}const ih=new zc.Store({state:{assetsPath:"/assets",apiClient:null,schemeModified:!1,editorStateName:"interact",editorSubStateName:null,itemMenu:{artPackIds:new Set,artPacks:[],shapeGroupIds:new Set},curveEditing:{item:null,paths:[],firstSelectedPoint:null},connecting:{connectorItem:null},patch:{settings:{additionsColor:"rgba(90, 255, 90, 0.4)",deletionsColor:"rgba(255, 90, 90, 0.4)",modificationsColor:"rgba(90, 90, 255, 0.4)"},diffColoringEnabled:!0},defaultConnectorSmoothing:Qc.get(Yc,"linear"),autoRemount:!0,showPivot:!1,showClickableMarkers:!1,history:{undoable:!1,redoable:!1},copiedStyleItem:null,snap:{grid:Qc.get("snap.grid",!1),items:Qc.get("snap.items",!0)},itemSurround:{padding:40},itemControlPoints:[],selectedConnectorPath:null,multiSelectBox:null,snappers:{horizontal:null,vertical:null},connectorProposedDestination:{shown:!1,connectorItemId:null,mx:0,my:0},imageUpload:{images:new Map},statusMessage:{message:null,isError:!1},systemMessages:[],draw:{epsilon:5},animationEditor:{currentFramePlayer:null,isRecording:!1}},mutations:{SET_ASSESTS_PATH(e,t){e.assetsPath=t},SET_API_CLIENT(e,t){e.apiClient=t},SET_SCHEME_MODIFIED(e,t){e.schemeModified=t},SET_AUTO_REMOUNT(e,t){e.autoRemount=t},SET_SHOW_PIVOT(e,t){e.showPivot=t},SET_SHOW_CLICKABLE_MARKERS(e,t){e.showClickableMarkers=t},SET_CURVE_EDIT_ITEM(e,{item:t,paths:n}){if(e.curveEditing.item=t,e.curveEditing.paths.length=0,t){const i=Xc(t);n.forEach(((t,n)=>{e.curveEditing.paths[n]={id:t.id,points:t.points.map(i)}}))}},UPDATE_CURVE_EDIT_POINT(e,{item:t,pathId:n,pointId:i,point:r}){if(!th(n,i,e.curveEditing))return;const s=Xc(t)((0,Gc.oJ)(r,t.area.w,t.area.h));ze()(s,((t,r)=>{e.curveEditing.paths[n].points[i][r]=t,eh(e.curveEditing.paths[n].points[i])}))},TOGGLE_CURVE_EDIT_POINT_SELECTION(e,{pathId:t,pointId:n,inclusive:i}){th(t,n,e.curveEditing)&&(i?(e.curveEditing.paths[t].points[n].selected=!e.curveEditing.paths[t].points[n].selected,e.curveEditing.firstSelectedPoint=nh(e.curveEditing.paths)):(e.curveEditing.paths.forEach(((e,i)=>{e.points.forEach(((e,r)=>{e.selected=i===t&&r===n}))})),e.curveEditing.firstSelectedPoint=e.curveEditing.paths[t].points[n]))},RESET_CURVE_EDIT_POINT_SELECTION(e){e.curveEditing.paths.forEach((e=>{e.points.forEach((e=>{e.selected=!1}))})),e.curveEditing.firstSelectedPoint=null},SELECT_CURVE_EDIT_POINT(e,{pathId:t,pointId:n,inclusive:i}){th(t,n,e.curveEditing)&&(i?(e.curveEditing.paths[t].points[n].selected=!0,e.curveEditing.firstSelectedPoint=nh(e.curveEditing.paths)):(e.curveEditing.paths.forEach(((e,i)=>{e.points.forEach(((e,r)=>{e.selected=i===t&&r===n}))})),e.curveEditing.firstSelectedPoint=e.curveEditing.paths[t].points[n]))},SET_HISTORY_UNDOABLE(e,t){e.history.undoable=t},SET_HISTORY_REDOABLE(e,t){e.history.redoable=t},SET_DEFAULT_CONNECTOR_SMOOTHING(e,t){e.defaultConnectorSmoothing=t,Qc.save(Yc,t)},SET_GRID_SNAP(e,t){e.snap.grid=t,Qc.save("snap.grid",t)},SET_ITEM_SNAP(e,t){e.snap.items=t,Qc.save("snap.items",t)},SET_EDITOR_STATE_NAME(e,t){e.editorStateName=t},SET_EDITOR_SUB_STATE_NAME(e,t){e.editorSubStateName=t},SET_ITEM_SURROUND_PADDING(e,t){e.itemSurround.padding=t},SET_ITEM_CONTROL_POINTS(e,t){e.itemControlPoints=t},CLEAR_ITEM_CONTROL_POINTS(e){e.itemControlPoints.length=0},SET_MULTI_SELECT_BOX(e,t){e.multiSelectBox=t},SET_SELECTED_CONNECTOR_PATH(e,t){e.selectedConnectorPath=t},SET_ITEM_SNAPPER(e,t){"horizontal"===t.snapperType?e.snappers.horizontal=t:"vertical"===t.snapperType&&(e.snappers.vertical=t)},CLEAR_ITEM_SNAPPERS(e){e.snappers.horizontal=null,e.snappers.vertical=null},PROPOSE_CONNECTOR_DESTINATION_ITEMS(e,{connectorItemId:t,mx:n,my:i}){e.connectorProposedDestination.connectorItemId=t,e.connectorProposedDestination.mx=n,e.connectorProposedDestination.my=i,e.connectorProposedDestination.shown=!0},DISABLE_PROPOSE_CONNECTOR_DESTINATION_ITEMS(e){e.connectorProposedDestination.shown=!1},UPDATE_IMAGE_UPLOAD_STATUS(e,{imageId:t,uploading:n,uploadFailed:i}){i&&(e.statusMessage.message="Failed to upload image",e.statusMessage.isError=!0),n&&!i||!e.imageUpload.images.has(t)?e.imageUpload.images.set(t,{uploading:n,date:new Date}):e.imageUpload.images.delete(t);let r=0;if(e.imageUpload.images.forEach((e=>{e.uploading&&(r+=1)})),!e.statusMessage.isError||!e.statusMessage.message)if(r>0){let t="";r>1&&(t="s"),e.statusMessage.message=`Uploading ${r} image${t}`,e.statusMessage.isError=!1}else e.statusMessage.message=null,e.statusMessage.isError=!1},RESET_IMAGE_UPLOAD_STATUS(e){const t=new Date,n=[];e.imageUpload.images.forEach(((e,i)=>{t.getTime()-e.date.getTime()>45e3&&n.push(i)})),ze()(n,(t=>{e.imageUpload.images.delete(t)}))},CLEAR_STATUS_MESSAGE(e){e.statusMessage.message=null,e.statusMessage.isError=!1},SET_STATUS_MESSAGE(e,{message:t,isError:n}){e.statusMessage.message=t,e.statusMessage.isError=n},ADD_SYSTEM_MESSAGE(e,{message:t,status:n,id:i}){if(i){for(let t=0;t<e.systemMessages.length;t++)if(e.systemMessages[t].id===i)return}else i=ec().generate();e.systemMessages.push({id:i,message:t,status:n}),setTimeout((()=>{for(let t=0;t<e.systemMessages.length;t++)if(e.systemMessages[t].id===i)return void e.systemMessages.splice(t,1)}),5e3)},REMOVE_SYSTEM_MESSAGE(e,t){for(let n=0;n<e.systemMessages.length;n++)if(e.systemMessages[n].id===t)return void e.systemMessages.splice(n,1)},UPDATE_DRAW_EPSILON(e,t){isNaN(t)||(e.draw.epsilon=t)},START_ANIMATION_EDITOR(e,t){e.animationEditor.currentFramePlayer=t},SET_ANIMATION_EDITOR_RECORDING(e,t){e.animationEditor.isRecording=t},COPY_ITEM_STYLE(e,t){e.copiedStyleItem=Uc.Z.clone(t)},SET_PATCH_DIFF_COLORING_ENABLED(e,t){e.patch.diffColoringEnabled=t},UPDATE_PATCH_DIFF_COLOR(e,{changeType:t,color:n}){console.log("UPDATE_PATCH_DIFF_COLOR",t,n),"additions"===t?e.patch.settings.additionsColor=n:"deletions"===t?e.patch.settings.deletionsColor=n:"modifications"===t&&(e.patch.settings.modificationsColor=n)},SET_CURRENT_CONNECTOR(e,{item:t}){e.connecting.connectorItem=t},ADD_ART_PACK(e,{artPack:t,artPackId:n}){e.itemMenu.artPackIds.has(n)||(e.itemMenu.artPacks.push(Kc(Kc({},t),{},{id:n})),e.itemMenu.artPackIds.add(n))},REMOVE_ART_PACK(e,t){if(e.itemMenu.artPackIds.has(t)){e.itemMenu.artPackIds.delete(t);for(let n=0;n<e.itemMenu.artPacks.length;n++)if(e.itemMenu.artPacks[n].id===t)return void e.itemMenu.artPacks.splice(n,1)}},REGISTER_SHAPE_GROUP_ID(e,t){e.itemMenu.shapeGroupIds.add(t)}},actions:{setAssetsPath({commit:e},t){e("SET_ASSESTS_PATH",t)},setApiClient({commit:e},t){e("SET_API_CLIENT",t)},markSchemeAsModified({commit:e}){e("SET_SCHEME_MODIFIED",!0)},markSchemeAsUnmodified({commit:e}){e("SET_SCHEME_MODIFIED",!1)},setCurveEditItem({commit:e},t){const n=[];t&&t.shapeProps.paths.forEach(((e,i)=>{const r=[];e.points.forEach(((e,n)=>{const i=(0,Gc.oJ)(e,t.area.w,t.area.h);i.id=n,i.selected=!1,eh(i),r.push(i)})),n.push({id:i,points:r})})),e("SET_CURVE_EDIT_ITEM",{item:t,paths:n})},updateCurveEditPoint({commit:e},{item:t,pathId:n,pointId:i,point:r}){e("UPDATE_CURVE_EDIT_POINT",{item:t,pathId:n,pointId:i,point:r})},toggleCurveEditPointSelection({commit:e},{pathId:t,pointId:n,inclusive:i}){e("TOGGLE_CURVE_EDIT_POINT_SELECTION",{pathId:t,pointId:n,inclusive:i})},resetCurveEditPointSelection({commit:e}){e("RESET_CURVE_EDIT_POINT_SELECTION")},selectCurveEditPoint({commit:e},{pathId:t,pointId:n,inclusive:i}){e("SELECT_CURVE_EDIT_POINT",{pathId:t,pointId:n,inclusive:i})},setHistoryUndoable({commit:e},t){e("SET_HISTORY_UNDOABLE",t)},setHistoryRedoable({commit:e},t){e("SET_HISTORY_REDOABLE",t)},setDefaultConnectorSmoothing({commit:e},t){e("SET_DEFAULT_CONNECTOR_SMOOTHING",t)},setGridSnap({commit:e},t){e("SET_GRID_SNAP",t)},setItemSnap({commit:e},t){e("SET_ITEM_SNAP",t)},setEditorStateName({commit:e},t){e("SET_EDITOR_STATE_NAME",t)},setEditorSubStateName({commit:e},t){e("SET_EDITOR_SUB_STATE_NAME",t)},setItemSurroundPadding({commit:e},t){e("SET_ITEM_SURROUND_PADDING",t)},setItemControlPoints({commit:e},t){const n=[];ze()(t,((e,t)=>{n.push({id:t,point:e})})),e("SET_ITEM_CONTROL_POINTS",n)},clearItemControlPoints({commit:e}){e("CLEAR_ITEM_CONTROL_POINTS")},setMultiSelectBox({commit:e},t){e("SET_MULTI_SELECT_BOX",t)},setSelectedConnectorPath({commit:e},t){e("SET_SELECTED_CONNECTOR_PATH",t)},setItemSnapper({commit:e},t){e("SET_ITEM_SNAPPER",t)},clearItemSnappers({commit:e}){e("CLEAR_ITEM_SNAPPERS")},setAutoRemount({commit:e},t){e("SET_AUTO_REMOUNT",t)},setShowPivot({commit:e},t){e("SET_SHOW_PIVOT",t)},setShowClickableMarkers({commit:e},t){e("SET_SHOW_CLICKABLE_MARKERS",t)},proposeConnectorDestinationItems({commit:e},t){e("PROPOSE_CONNECTOR_DESTINATION_ITEMS",t)},disableProposeConnectorDestinationItems({commit:e}){e("DISABLE_PROPOSE_CONNECTOR_DESTINATION_ITEMS")},updateImageUploadStatus({commit:e},{imageId:t,uploading:n,uploadFailed:i}){e("UPDATE_IMAGE_UPLOAD_STATUS",{imageId:t,uploading:n,uploadFailed:i}),setTimeout((()=>{e("RESET_IMAGE_UPLOAD_STATUS")}),6e4)},clearStatusMessage({commit:e}){e("CLEAR_STATUS_MESSAGE")},setErrorStatusMessage({commit:e},t){e("SET_STATUS_MESSAGE",{message:t,isError:!0})},addSystemMessage({commit:e},{message:t,status:n,id:i}){e("ADD_SYSTEM_MESSAGE",{message:t,status:n,id:i})},removeSystemMessage({commit:e},t){e("REMOVE_SYSTEM_MESSAGE",t)},updateDrawEpsilon({commit:e},t){e("UPDATE_DRAW_EPSILON",t)},startAnimationEditor({commit:e},t){e("START_ANIMATION_EDITOR",t)},setAnimationEditorRecording({commit:e},t){e("SET_ANIMATION_EDITOR_RECORDING",t)},copyItemStyle({commit:e},t){e("COPY_ITEM_STYLE",t)},setPatchDiffColoringEnabled({commit:e},t){e("SET_PATCH_DIFF_COLORING_ENABLED",t)},updatePatchDiffColor({commit:e},{changeType:t,color:n}){e("UPDATE_PATCH_DIFF_COLOR",{changeType:t,color:n})},setCurrentConnector({commit:e},t){e("SET_CURRENT_CONNECTOR",{item:t})},addArtPack({commit:e},{artPack:t,artPackId:n}){e("ADD_ART_PACK",{artPack:t,artPackId:n})},removeArtPack({commit:e},t){e("REMOVE_ART_PACK",t)},registerShapeGroupId({commit:e},t){e("REGISTER_SHAPE_GROUP_ID",t)}},getters:{apiClient:e=>e.apiClient,schemeModified:e=>e.schemeModified,itemControlPointsList:e=>e.itemControlPoints,curveEditPaths:e=>e.curveEditing.paths,firstSelectedCurveEditPoint:e=>e.curveEditing.firstSelectedPoint,multiSelectBox:e=>e.multiSelectBox,horizontalSnapper:e=>e.snappers.horizontal,verticalSnapper:e=>e.snappers.vertical,shouldSnapToGrid:e=>e.snap.grid,shouldSnapToItems:e=>e.snap.items,autoRemount:e=>e.autoRemount,showPivot:e=>e.showPivot,showClickableMarkers:e=>e.showClickableMarkers,connectorProposedDestination:e=>e.connectorProposedDestination,statusMessage:e=>e.statusMessage,selectedConnectorPath:e=>e.selectedConnectorPath,systemMessages:e=>e.systemMessages,drawEpsilon:e=>e.draw.epsilon,editorStateName:e=>e.editorStateName,editorSubStateName:e=>e.editorSubStateName,animationEditorCurrentFramePlayer:e=>e.animationEditor.currentFramePlayer,animationEditorIsRecording:e=>e.animationEditor.isRecording,patchAdditionsColor:e=>e.patch.settings.additionsColor,patchDeletionsColor:e=>e.patch.settings.deletionsColor,patchModificationsColor:e=>e.patch.settings.modificationsColor,patchIsDiffColoringEnabled:e=>e.patch.diffColoringEnabled,staticExportAllowed:e=>!(!e.apiClient||!e.apiClient.submitStaticExport)}}),rh=ih;var sh=n(2017);const oh={components:{Modal:Xe},data(){const e=[];let t=!0;return ze()(sh.c7.loggers,((n,i)=>{n.enabled||(t=!1),e.push({name:i,enabled:n.enabled,color:n.background})})),{loggers:e,allLoggersEnabled:t,filter:sh.c7.filterRegex||""}},methods:{toggleLogger(e,t){t?sh.c7.enable(e):sh.c7.disable(e)},toggleAllLoggers(e){ze()(this.loggers,(t=>{t.enabled=e,this.toggleLogger(t.name,e)}))}},watch:{filter(e){sh.c7.filter(e)}}};var ah=(0,Le.Z)(oh,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{title:"Debugger"},on:{close:function(t){return e.$emit("close")}}},[e._v("\n    This is Schemio Debugger\n    "),n("p",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.filter,expression:"filter"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Filter (regex)"},domProps:{value:e.filter},on:{input:function(t){t.target.composing||(e.filter=t.target.value)}}})]),e._v(" "),n("div",{staticStyle:{"max-heigh":"500px",overflow:"auto"}},[n("table",[n("thead",[n("tr",[n("th",[e._v("\n                        Logger\n                    ")]),e._v(" "),n("th",[n("input",{attrs:{type:"checkbox"},domProps:{checked:e.allLoggersEnabled},on:{input:function(t){return e.toggleAllLoggers(arguments[0].target.checked)}}})])])]),e._v(" "),n("tbody",e._l(e.loggers,(function(t){return n("tr",[n("td",[e._v(e._s(t.name))]),e._v(" "),n("td",[n("input",{attrs:{type:"checkbox"},domProps:{checked:t.enabled},on:{input:function(n){return e.toggleLogger(t.name,arguments[0].target.checked)}}})])])})),0)])])])}),[],!1,null,null,null);const lh=ah.exports,ch={methods:{closeMessage(e){Jl.removeSystemMessage(this.$store,e)}},computed:{systemMessages(){return this.$store.getters.systemMessages}}},hh=(0,Le.Z)(ch,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"system-message-panel"},[n("div",{staticClass:"messages"},e._l(e.systemMessages,(function(t){return n("transition",{key:"system-message-"+t.id,attrs:{name:"system-message"}},[n("div",{staticClass:"message",class:["message-"+t.status]},[n("span",{staticClass:"close-button",on:{click:function(n){return e.closeMessage(t.id)}}},[n("i",{staticClass:"fas fa-times"})]),e._v(" "),n("span",[e._v(e._s(t.message))])])])})),1)])}),[],!1,null,null,null).exports;function dh(e){return{originalEvent:e,originalPageX:e.pageX,originalPageY:e.pageY,draggedElement:null,droppableClass:null,scrollableElemet:null,callbacks:{onDrag:()=>{},onDragOver:()=>{},onDrop:()=>{},onDragStart:()=>{},onSimpleClick:()=>{},onDone:()=>{}},withScrollableElement(e){return this.scrollableElemet=e,this},withDraggedElement(e){return this.draggedElement=e,this},withDroppableClass(e){return this.droppableClass=e,this},onDragStart(e){return this.callbacks.onDragStart=e,this},onDrag(e){return this.callbacks.onDrag=e,this},onDragOver(e){return this.callbacks.onDragOver=e,this},onDrop(e){return this.callbacks.onDrop=e,this},onSimpleClick(e){return this.callbacks.onSimpleClick=e,this},onDone(e){return this.callbacks.onDone=e,this},build(){let e=0,t=!1;const n=e=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",c),t||this.callbacks.onSimpleClick(e),t=!1,this.callbacks.onDone()},i=(e,t)=>{if(this.droppableClass){const n=e.target.closest(`.${this.droppableClass}`);n&&t(n)}};let r=null,s=0;const o=e=>{r&&s===e||(a(),s=e,r=setInterval((()=>{this.scrollableElemet.scrollTop+=e}),10))},a=()=>{r&&(clearInterval(r),r=null,s=0)},l=r=>{if(0!==r.buttons)if(e+=Math.abs(r.pageX-this.originalPageX)+Math.abs(r.pageY-this.originalPageY),t){if(this.draggedElement&&(this.draggedElement.style.left=`${r.pageX+4}px`,this.draggedElement.style.top=`${r.pageY+4}px`),this.callbacks.onDrag(r),i(r,(e=>this.callbacks.onDragOver(r,e))),this.scrollableElemet){const e=this.scrollableElemet.getBoundingClientRect();e.bottom-r.pageY<20?o(2):e.top-r.pageY>-20?o(-2):a()}}else e>5&&(t=!0,this.callbacks.onDragStart(r));else n(r)},c=e=>{a();try{t&&i(e,(t=>this.callbacks.onDrop(e,t)))}catch(e){console.error(e)}n(e)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",c)}}}var uh=n(3590),ph=n(8442),mh=n(7196),fh=n(8537),gh=n(5635),vh=n(3311),yh=n.n(vh);const xh={props:{options:{type:Array,required:!0},value:{type:String,default:null},hoverEffect:{type:Boolean,default:!0},searchEnabled:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},autoFocusSearch:{type:Boolean,default:!0},inline:{type:Boolean,default:!1},borderless:{type:Boolean,default:!1}},mounted(){document.body.addEventListener("click",this.onBodyClick),document.body.addEventListener("keydown",this.onGlobalKeydown)},beforeDestroy(){document.body.removeEventListener("click",this.onBodyClick),document.body.removeEventListener("keydown",this.onGlobalKeydown)},data(){let e=null;return this.value&&(e=yh()(this.options,(e=>e.name===this.value))),{shown:!1,lastTimeClicked:0,searchKeyword:"",x:0,y:0,maxHeight:300,searchTextfieldHeight:30,maxWidth:400,elementRect:null,selectedOption:e,hoveredOption:{shown:!1,title:"",text:"",x:0,y:0,w:200,h:200}}},methods:{toggleDropdown(e){if(this.disabled)return;const t=e.target.getBoundingClientRect();this.elementRect=t,this.lastTimeClicked=(new Date).getTime(),this.shown=!this.shown,this.shown?(this.emitToggled(),this.$nextTick((()=>{this.readjustDropdownPopup(),this.$refs.searchTextfield&&this.autoFocusSearch&&this.$refs.searchTextfield.focus()}))):this.emitHidden()},emitToggled(){this.$emit("dropdown-toggled")},emitHidden(){this.$emit("dropdown-hidden")},readjustDropdownPopup(){const e=this.$refs.dropdownPopup;if(!e||!this.elementRect)return;const t=e.getBoundingClientRect().width,n=e.getBoundingClientRect().height;let i=Math.max(0,this.elementRect.x),r=Math.max(0,this.elementRect.bottom),s=i+t,o=r+n+this.searchTextfieldHeight;s>window.innerWidth?this.x=i+window.innerWidth-s:this.x=i,o>window.innerHeight?this.y=this.elementRect.top-n:this.y=r},onOptionClicked(e){this.$emit("selected",e)},onBodyClick(e){if(!0===this.shown&&(new Date).getTime()-this.lastTimeClicked>200){if(e.srcElement&&"dropdown-search"===e.srcElement.getAttribute("data-input-type"))return;this.cancelPopup()}},onGlobalKeydown(e){if(!0===this.shown&&(new Date).getTime()-this.lastTimeClicked>200){if(e.srcElement&&"dropdown-search"===e.srcElement.getAttribute("data-input-type"))return;this.cancelPopup()}},cancelPopup(){this.shown&&this.emitHidden(),this.shown=!1},pickFirstOption(e){e.length>0&&this.onOptionClicked(e[0]),this.cancelPopup()},onOptionMouseOver(e){if(e.description){if(this.hoveredOption.title!==e.name||!this.hoveredOption.shown){this.hoveredOption.shown=!0,this.hoveredOption.title=e.name,this.hoveredOption.iconClass=e.iconClass,this.hoveredOption.text=e.description;const t=this.$refs.dropdownPopup;if(t){const e=t.getBoundingClientRect();let n=e.left-this.hoveredOption.w,i=e.top;n<0&&(n=e.right);let r=i+this.hoveredOption.h-window.innerHeight;r>0&&(i-=r),this.hoveredOption.x=n,this.hoveredOption.y=i}}}else this.hoveredOption.shown=!1},onOptionMouseLeave(){this.hoveredOption.shown=!1}},computed:{filteredOptions(){return rc()(this.options,(e=>e.name.toLowerCase().indexOf(this.searchKeyword.toLowerCase())>=0))}},watch:{value(e){this.selectedOption=yh()(this.options,(t=>t.name===e))}}},bh=(0,Le.Z)(xh,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dropdown-container",class:{inline:e.inline,borderless:e.borderless}},[n("div",{staticClass:"dropdown-click-area",class:{"hover-effect":e.hoverEffect&&!e.disabled},on:{click:e.toggleDropdown}},[null===e.value?e._t("default"):n("div",[e.selectedOption?n("div",[e.selectedOption.iconClass?n("i",{class:e.selectedOption.iconClass}):e._e(),e._v(" "),n("span",{style:e.selectedOption.style||{}},[e._v(" "+e._s(e.selectedOption.name)+" ")])]):n("span",[e._v("Unknown Value")])])],2),e._v(" "),e.shown?n("div",{ref:"dropdownPopup",staticClass:"dropdown-popup",style:{top:e.y+"px",left:e.x+"px","max-width":e.maxWidth+"px"}},[e.searchEnabled?n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyword,expression:"searchKeyword"}],ref:"searchTextfield",staticClass:"dropdown-search",attrs:{placeholder:"Search...","data-input-type":"dropdown-search"},domProps:{value:e.searchKeyword},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancelPopup()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.pickFirstOption(e.filteredOptions)}],input:function(t){t.target.composing||(e.searchKeyword=t.target.value)}}}):e._e(),e._v(" "),n("div",{style:{"max-width":e.maxWidth+"px",height:e.maxHeight+"px",overflow:"auto"}},[n("ul",e._l(e.filteredOptions,(function(t){return n("li",{on:{click:function(n){return e.onOptionClicked(t)},mouseover:function(n){return e.onOptionMouseOver(t)},mouseleave:function(t){return e.onOptionMouseLeave()}}},[t.iconClass?n("i",{class:t.iconClass}):e._e(),e._v(" "),t.html?n("div",{domProps:{innerHTML:e._s(t.html)}}):n("span",{style:t.style||{}},[e._v(" "+e._s(t.name)+" ")])])})),0)])]):e._e(),e._v(" "),e.shown&&e.hoveredOption.shown?n("div",{staticClass:"dropdown-option-tooltip",style:{top:e.hoveredOption.y+"px",left:e.hoveredOption.x+"px",width:e.hoveredOption.w+"px",height:e.hoveredOption.h+"px"}},[n("h3",[e.hoveredOption.iconClass?n("i",{class:e.hoveredOption.iconClass}):e._e(),e._v("\n            "+e._s(e.hoveredOption.title)+"\n        ")]),e._v("\n        "+e._s(e.hoveredOption.text)+"\n    ")]):e._e()])}),[],!1,null,null,null).exports;var wh=n(6162),Ch=n.n(wh),_h=n(536),Ah=n(9825),Sh=n(4502),kh=n(3762),Ih=n.n(kh);function Ph(e,t,n){const i=document.createElementNS("http://www.w3.org/2000/svg",e);return t&&ze()(t,((e,t)=>{i.setAttribute(t,e)})),n&&ze()(n,(e=>{i.appendChild(e)})),i}const Eh=Ph,Th={"drop-shadow":{name:"Drop Shadow",args:{color:{type:"color",value:"rgba(0,0,0,1.0)",name:"Color"},dx:{type:"number",value:10,name:"Offset X"},dy:{type:"number",value:10,name:"Offset Y"},blur:{type:"number",value:5,name:"Blur",min:0,max:100},opacity:{type:"number",value:50,name:"Opacity (%)",min:0,max:100},inside:{type:"boolean",value:!1,name:"Inside"}},applyEffect(e,t,n){const i=Wl.Z.find(e.shape);if(!i)return null;const r=i.computeOutline(e);if(!r)return null;const s=`item-effect-drop-shadow-${e.id}-${t}`;return n.inside?{kind:"svg-filter",html:Eh("g",{},[Eh("feComponentTransfer",{in:"SourceAlpha"},[Eh("feFuncA",{type:"table",tableValues:"1 0"})]),Eh("feGaussianBlur",{stdDeviation:n.blur}),Eh("feOffset",{dx:n.dx,dy:n.dy,result:"offsetblur"}),Eh("feFlood",{"flood-color":n.color,result:"color","flood-opacity":n.opacity/100}),Eh("feComposite",{in2:"offsetblur",operator:"in"}),Eh("feComposite",{in2:"SourceAlpha",operator:"in"}),Eh("feMerge",{},[Eh("feMergeNode",{in:"SourceGraphic"}),Eh("feMergeNode")])]).innerHTML}:{kind:"back",html:Eh("g",{},[Eh("defs",{},[Eh("filter",{id:s,x:"-500%",y:"-500%",width:"2000%",height:"2000%"},[Eh("feGaussianBlur",{in:"SourceGraphic",stdDeviation:n.blur})])]),Eh("path",{d:r,stroke:"none",fill:n.color,transform:`translate(${n.dx} ${n.dy})`,style:"opacity: "+n.opacity/100,filter:`url(#${s})`})]).innerHTML}}},blur:{name:"Blur",args:{size:{type:"number",value:5,name:"Size"}},applyEffect:(e,t,n)=>({kind:"svg-filter",html:Eh("feGaussianBlur",{in:"SourceGraphic",stdDeviation:n.size}).outerHTML})},glow:{name:"Glow",args:{color:{type:"color",value:"rgba(126,237,255,1.0)",name:"Color"},size:{type:"number",value:3,name:"Size",min:0,max:100},blur:{type:"number",value:5,name:"Blur",min:0,max:100},opacity:{type:"number",value:50,name:"Opacity (%)",min:0,max:100}},applyEffect(e,t,n){const i=Wl.Z.find(e.shape);if(!i)return null;const r=i.computeOutline(e);if(!r)return null;const s=`item-effect-glow-${e.id}-${t}`;let o=n.size;const a=Wl.Z.getShapePropDescriptor(i,"strokeSize");return a&&"number"===a.type&&(o=n.size+e.shapeProps.strokeSize),{kind:"front",html:Eh("g",{},[Eh("defs",{},[Eh("filter",{id:s,x:"-500%",y:"-500%",width:"2000%",height:"2000%"},[Eh("feGaussianBlur",{in:"SourceGraphic",stdDeviation:n.blur})])]),Eh("path",{d:r,"data-item-id":e.id,stroke:n.color,"stroke-width":`${o}px`,fill:"none",style:"opacity: "+n.opacity/100,filter:`url(#${s})`})]).innerHTML}}},repeat:{name:"Repeat",args:{repeat:{type:"number",value:3,name:"Repeat",min:1,max:20},dx:{type:"number",value:10,name:"Offset X"},dy:{type:"number",value:-10,name:"Offset Y"},fade:{type:"number",value:0,name:"Fade (%)",min:0,max:100}},applyEffect(e,t,n){const i=Wl.Z.find(e.shape);if(!i)return null;const r=Wl.Z.computeStandardCurves(e,i);if(!r)return null;const s=Ph("g",{});for(let t=0;t<n.repeat;t++){const o=(n.repeat-t)*n.dx,a=(n.repeat-t)*n.dy;let l=100,c=100-n.fade,h=(t+1)/n.repeat;const d=Ph("g",{transform:`translate(${o}, ${a})`,style:"opacity: "+(l*h+c*(1-h))/100});let u="";"standard"===i.shapeType&&(u=Sh.Z.createDashArray(e.shapeProps.strokePattern,e.shapeProps.strokeSize)),ze()(r,(e=>{d.appendChild(Ph("path",{d:e.path,fill:e.fill,stroke:e.strokeColor,"stroke-width":`${e.strokeSize}px`,"stroke-dasharray":u,"stroke-linejoin":"round"}))})),s.appendChild(d)}return{kind:"back",html:s.innerHTML}}},"adjust-color":{name:"Adjust Color",args:{matrix:{type:"color-matrix",name:"Color matrix",value:[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0]]}},applyEffect(e,t,n){let i="1 0 0 0 00 1 0 0 00 0 1 0 00 0 0 1 0";return Array.isArray(n.matrix)&&(i="",n.matrix.forEach((e=>{Array.isArray(e)?i+=e.join(" "):i+="0 0 0 0 0",i+=" "}))),{kind:"svg-filter",html:Eh("feColorMatrix",{type:"matrix",values:i}).outerHTML}}}};function Mh(e){if(!e)return{};const t={};return ze()(e.args,((e,n)=>{t[n]=Uc.Z.clone(e.value)})),t}function Oh(){return Th}function Dh(e){return Th[e]}function $h(e){const t=[];let n="";const i=[],r=[];return ze()(e.effects,((s,o)=>{const a=Dh(s.effect);if(a){const l=a.applyEffect(e,o,s.args);if("svg-filter"===l.kind){const i=`item-svg-filter-effect-${e.id}-${o}`;t.push({id:i,html:l.html}),n+=`url(#${i}) `}else"back"===l.kind?i.push(l.html):"front"===l.kind&&r.push(l.html)}})),{svgFilters:t,filterUrl:n,backgroundEffects:i,foregroundEffects:r}}function Bh(e){const t=Wl.Z.getShapePropDescriptor(e,"strokeSize");return t&&"number"===t.type}const Lh={name:"ItemSvg",props:{item:{type:Object},mode:{type:String},patchIndex:{type:Object,default:null},mode:{type:String,default:"edit"},textSelectionEnabled:{type:Boolean,default:!1}},components:{AdvancedFill:Ah.Z},mounted(){this.switchShape(this.item.shape),_h.Z.subscribeForItemChanged(this.item.id,this.onItemChanged),_h.Z.$on(_h.Z.ITEM_TEXT_SLOT_EDIT_TRIGGERED,this.onItemTextSlotEditTriggered),_h.Z.$on(_h.Z.ITEM_TEXT_SLOT_EDIT_CANCELED,this.onItemTextSlotEditCanceled);const e=Wl.Z.find(this.item.shape);e&&e.shapeEvents.mounted&&e.shapeEvents.mounted(this.$store,this.item,{textSlots:this.$refs.textSlots})},beforeDestroy(){_h.Z.unsubscribeForItemChanged(this.item.id,this.onItemChanged),_h.Z.$off(_h.Z.ITEM_TEXT_SLOT_EDIT_TRIGGERED,this.onItemTextSlotEditTriggered),_h.Z.$off(_h.Z.ITEM_TEXT_SLOT_EDIT_CANCELED,this.onItemTextSlotEditCanceled)},data(){const e=Wl.Z.find(this.item.shape),t={shapeType:e?e.shapeType:"missing",shapeComponent:null,oldShape:this.item.shape,itemStandardCurves:[],itemSvgOutlinePath:null,shouldDrawEventLayer:!0,shouldRenderText:!0,revision:0,textSlots:[],hiddenTextSlotName:null,strokeDashArray:"",supportsStrokeSize:!!e&&Bh(e),svgFilters:[],filterUrl:"",backgroundEffects:[],foregroundEffects:[],svgItemTransform:this.calculateSVGItemTransform()};e&&(e.editorProps&&e.editorProps.customTextRendering?t.shouldRenderText=!1:t.textSlots=this.generateTextSlots());const{svgFilters:n,filterUrl:i,backgroundEffects:r,foregroundEffects:s}=$h(this.item);return t.svgFilters=n,t.filterUrl=i,t.backgroundEffects=r,t.foregroundEffects=s,t},methods:{calculateSVGItemTransform(){const e=uh.Z.standardTransformWithArea(uh.Z.identityMatrix(),this.item.area);return`matrix(${e[0][0]},${e[1][0]},${e[0][1]},${e[1][1]},${e[0][2]},${e[1][2]})`},switchShape(e){this.oldShape=this.item.shape;const t=Wl.Z.find(e);t&&(this.shapeType=t.shapeType,this.supportsStrokeSize=Bh(t),(t.editorProps&&t.editorProps.ignoreEventLayer&&"view"===this.mode||"view"===this.mode&&this.textSelectionEnabled)&&(this.shouldDrawEventLayer=!1),t.vueComponent?this.shapeComponent=t.vueComponent:this.shapeComponent=null,"standard"===t.shapeType&&(this.strokeDashArray=Sh.Z.createDashArray(this.item.shapeProps.strokePattern,this.item.shapeProps.strokeSize),this.itemStandardCurves=Wl.Z.computeStandardCurves(this.item,t)),this.itemSvgOutlinePath=t.computeOutline(this.item))},onItemChanged(e){this.svgItemTransform=this.calculateSVGItemTransform();const t=Wl.Z.find(this.item.shape);if(!t)return void(this.revision+=1);this.oldShape!==this.item.shape?this.switchShape(this.item.shape):t&&("standard"===t.shapeType&&(this.strokeDashArray=Sh.Z.createDashArray(this.item.shapeProps.strokePattern,this.item.shapeProps.strokeSize),this.itemStandardCurves=Wl.Z.computeStandardCurves(this.item,t)),this.itemSvgOutlinePath=t.computeOutline(this.item)),t.editorProps&&t.editorProps.customTextRendering||(this.textSlots=this.generateTextSlots());const{svgFilters:n,filterUrl:i,backgroundEffects:r,foregroundEffects:s}=$h(this.item);this.svgFilters=n,this.filterUrl=i,this.backgroundEffects=r,this.foregroundEffects=s,this.revision+=1,this.$forceUpdate()},onShapeCustomEvent(e,...t){this.$emit("custom-event",{itemId:this.item.id,eventName:e,args:arguments})},onFrameAnimatorEvent(e){this.$emit("frame-animator",e)},generateTextSlots(){const e=Wl.Z.find(this.item.shape);if(!e)return[];const t=Uc.Z.clone(e.getTextSlots(this.item)),n=[];return ze()(t,(e=>{const t=this.item.textSlots[e.name];t&&(e.text=t.text||"",e.sanitizedText=Ih()(e.text),e.cssClass||(e.cssClass=""),e.style=(0,gh.A)(t),e.style.width=`${e.area.w}px`,e.style.height=`${e.area.h}px`,n.push(e))})),n},onItemTextSlotEditTriggered(e,t,n,i){e.id===this.item.id&&(this.hiddenTextSlotName=t)},onItemTextSlotEditCanceled(e,t){e.id===this.item.id&&this.hiddenTextSlotName===t&&(this.hiddenTextSlotName=null)}},computed:{hoverPathStrokeWidth(){return this.supportsStrokeSize?parseInt(this.item.shapeProps.strokeSize)+2+"px":"0px"},hoverPathFill(){return"path"===this.item.shape&&this.item.shapeProps.fill&&"none"===this.item.shapeProps.fill.type?"none":"connector"!==this.item.shape||this.item.shapeProps.fat?"rgba(255, 255, 255, 0)":"none"},shouldBeDrawn(){return!(!this.shapeComponent||!this.item.visible||"view"===this.mode&&this.shapeComponent.shapeConfig.editorProps&&this.shapeComponent.shapeConfig.editorProps.onlyEditMode)},childrenLayerStyle(){return this.item.clip?{"clip-path":`url(#item-clip-path-${this.item.id})`}:{}},patchOutline(){if(this.patchIndex){if(this.patchIndex.addedItems.has(this.item.id))return this.$store.getters.patchAdditionsColor;if(this.patchIndex.deletedItems.has(this.item.id))return this.$store.getters.patchDeletionsColor;if(this.patchIndex.modifiedItems.has(this.item.id))return this.$store.getters.patchModificationsColor}return null},patchIsDiffColoringEnabled(){return this.$store.getters.patchIsDiffColoringEnabled},patchOutlineStrokeSize(){return this.supportsStrokeSize?parseInt(this.item.shapeProps.strokeSize)+10+"px":"8px"},missingShapeTextStyle(){return{"font-size":Math.min(this.item.area.w,this.item.area.h)/6+"px",display:"inline-block"}}}},Nh=(0,Le.Z)(Lh,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{style:{opacity:e.item.opacity/100,"mix-blend-mode":e.item.blendMode},attrs:{transform:e.svgItemTransform,"data-svg-item-container-id":e.item.id,"data-item-id":e.item.id}},[e._l(e.backgroundEffects,(function(t){return n("g",{domProps:{innerHTML:e._s(t)}})})),e._v(" "),n("defs",e._l(e.svgFilters,(function(t){return n("filter",{attrs:{id:t.id,x:"-50%",y:"-50%",width:"200%",height:"200%"},domProps:{innerHTML:e._s(t.html)}})})),0),e._v(" "),n("g",{attrs:{filter:e.filterUrl}},[e.shouldBeDrawn&&e.shapeComponent&&e.item.visible?n(e.shapeComponent,{key:"item-component-"+e.item.id+"-"+e.item.shape+"-"+e.revision,tag:"component",style:{opacity:e.item.selfOpacity/100},attrs:{item:e.item,mode:e.mode},on:{"custom-event":e.onShapeCustomEvent,"frame-animator":e.onFrameAnimatorEvent}}):e._e(),e._v(" "),!e.shapeComponent&&e.item.visible&&"standard"===e.shapeType&&e.itemStandardCurves?n("g",{style:{opacity:e.item.selfOpacity/100}},[n("advanced-fill",{key:"advanced-fill-"+e.item.id+"-"+e.revision,attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),e._l(e.itemStandardCurves,(function(t){return n("path",{attrs:{d:t.path,"stroke-width":t.strokeSize+"px",stroke:t.strokeColor,"stroke-dasharray":e.strokeDashArray,"data-item-id":e.item.id,"stroke-linejoin":"round",fill:t.fill}})}))],2):e._e(),e._v(" "),"missing"===e.shapeType&&e.item.visible?n("g",{staticClass:"missing-shape"},[n("rect",{attrs:{x:"0",y:"0",width:e.item.area.w,height:e.item.area.h}}),e._v(" "),n("foreignObject",{attrs:{x:"0",y:"0",width:e.item.area.w,height:e.item.area.h}},[n("div",{style:{width:e.item.area.w+"px",height:e.item.area.h+"px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[n("div",{style:e.missingShapeTextStyle},[e._v("Missing Shape")])])])]):e._e(),e._v(" "),e._l(e.textSlots,(function(t){return t.name!==e.hiddenTextSlotName?n("g",[n("foreignObject",{ref:"textSlots",refInFor:!0,attrs:{"data-text-slot-name":t.name,id:"item-text-slot-"+e.item.id+"-"+t.name,x:t.area.x,y:t.area.y,width:t.area.w,height:t.area.h}},[n("div",{staticClass:"item-text-container",class:t.cssClass,style:t.style,attrs:{xmlns:"http://www.w3.org/1999/xhtml","data-item-id":e.item.id}},[n("div",{staticClass:"item-text-element",staticStyle:{display:"inline-block"},attrs:{"data-item-text-element-item-id":e.item.id},domProps:{innerHTML:e._s(t.sanitizedText)}})])])]):e._e()}))],2),e._v(" "),e._l(e.foregroundEffects,(function(t){return n("g",{domProps:{innerHTML:e._s(t)}})})),e._v(" "),n("g",{attrs:{id:"animation-container-"+e.item.id,"data-preview-ignore":"true"}}),e._v(" "),e.item._childItems&&e.item.visible&&"edit"===e.mode?n("g",{style:e.childrenLayerStyle},e._l(e.item._childItems,(function(t){return t.visible?n("ItemSvg",{key:t.id+"-"+t.shape+"-"+e.item.meta.revision,attrs:{item:t,patchIndex:e.patchIndex,mode:e.mode},on:{"custom-event":function(t){return e.$emit("custom-event",arguments[0])},"frame-animator":e.onFrameAnimatorEvent}}):e._e()})),1):e._e(),e._v(" "),e.itemSvgOutlinePath&&e.shouldDrawEventLayer&&!e.textSelectionEnabled?n("path",{staticClass:"svg-event-layer",style:{cursor:e.item.cursor},attrs:{"data-preview-ignore":"true",id:"item-svg-path-"+e.item.id,d:e.itemSvgOutlinePath,"data-item-id":e.item.id,"stroke-width":e.hoverPathStrokeWidth,stroke:"rgba(255, 255, 255, 0)",fill:e.hoverPathFill}}):e._e(),e._v(" "),"missing"===e.shapeType?n("rect",{staticClass:"svg-event-layer",attrs:{"data-preview-ignore":"true","data-item-id":e.item.id,x:"0",y:"0",width:e.item.area.w,height:e.item.area.h,stroke:"rgba(255, 255, 255, 0)",fill:e.hoverPathFill}}):e._e(),e._v(" "),e.item.clip?n("defs",[n("clipPath",{attrs:{id:"item-clip-path-"+e.item.id}},[e.itemSvgOutlinePath?n("path",{staticClass:"svg-event-layer",attrs:{d:e.itemSvgOutlinePath,"data-item-id":e.item.id,"stroke-width":"0px",stroke:"rgba(255, 255, 255, 0)",fill:"rgba(255, 255, 255, 0)"}}):e._e()])]):e._e(),e._v(" "),e.itemSvgOutlinePath&&e.patchOutline&&e.patchIsDiffColoringEnabled?n("path",{attrs:{"data-preview-ignore":"true",d:e.itemSvgOutlinePath,"data-item-id":e.item.id,"stroke-width":e.patchOutlineStrokeSize,stroke:e.patchOutline,fill:"none"}}):e._e(),e._v(" "),e.item.childItems&&e.item.visible?n("g",{style:e.childrenLayerStyle},e._l(e.item.childItems,(function(t){return t.visible&&("hud"!==t.shape&&"view"===e.mode||"edit"===e.mode)?n("ItemSvg",{key:t.id+"-"+t.shape+"-"+e.textSelectionEnabled,attrs:{item:t,textSelectionEnabled:e.textSelectionEnabled,patchIndex:e.patchIndex,mode:e.mode},on:{"custom-event":function(t){return e.$emit("custom-event",arguments[0])},"frame-animator":e.onFrameAnimatorEvent}}):e._e()})),1):e._e(),e._v(" "),e.item._childItems&&e.item.visible&&"view"===e.mode?n("g",{style:e.childrenLayerStyle},e._l(e.item._childItems,(function(t){return t.visible&&"hud"!==t.shape?n("ItemSvg",{key:t.id+"-"+t.shape+"-"+e.textSelectionEnabled,attrs:{item:t,textSelectionEnabled:e.textSelectionEnabled,mode:e.mode},on:{"custom-event":function(t){return e.$emit("custom-event",arguments[0])},"frame-animator":e.onFrameAnimatorEvent}}):e._e()})),1):e._e()],2)}),[],!1,null,null,null).exports;var Rh=n(9874),Fh=n(2672),Zh=n(9737),jh=n(3805),zh=n(6085),Uh=n(8022);const Hh={type:"void"},Vh=new Fh.Z,qh={x:0,y:0},Gh={props:{offline:{type:Boolean,default:!1},mode:{type:String,default:"edit"},textSelectionEnabled:{type:Boolean,default:!1},stateLayerShown:{type:Boolean,default:!1},userEventBus:{type:Object,default:null},patchIndex:{type:Object,default:null},schemeContainer:{default:null,type:Object},zoom:{default:1,type:Number},useMouseWheel:{default:!0,type:Boolean}},components:{ItemSvg:Nh},beforeMount(){"view"===this.mode&&(Jl.setShowClickableMarkers(this.$store,this.schemeContainer.scheme.style.itemMarkerToggled),this.buildClickableItemMarkers(),this.reindexUserEvents(),this.prepareFrameAnimations()),_h.Z.$on(_h.Z.BRING_TO_VIEW,this.onBringToView),_h.Z.$on(_h.Z.ITEM_LINKS_SHOW_REQUESTED,this.onShowItemLinks),_h.Z.$on(_h.Z.ANY_ITEM_CLICKED,this.onAnyItemClicked),_h.Z.$on(_h.Z.ANY_ITEM_SELECTED,this.onAnyItemSelected),_h.Z.$on(_h.Z.VOID_CLICKED,this.onVoidClicked),_h.Z.$on(_h.Z.VOID_DOUBLE_CLICKED,this.onVoidDoubleClicked),_h.Z.$on(_h.Z.ITEMS_HIGHLIGHTED,this.highlightItems),_h.Z.$on(_h.Z.COMPONENT_SCHEME_MOUNTED,this.onComponentSchemeMounted),_h.Z.$on(_h.Z.COMPONENT_LOAD_FAILED,this.onComponentLoadFailed),_h.Z.$on(_h.Z.FRAME_PLAYER_PREPARED,this.onFramePlayerPrepared),_h.Z.$on(_h.Z.CLICKABLE_MARKERS_TOGGLED,this.updateClickableMarkers)},mounted(){if(this.updateSvgSize(),window.addEventListener("resize",this.updateSvgSize),this.useMouseWheel){var e=this.$refs.svgDomElement;e&&e.addEventListener("wheel",this.mouseWheel)}"view"===this.mode&&ze()(this.itemsForInit,((e,t)=>{this.userEventBus.emitItemEvent(t,zh.Z.standardEvents.init.id)}))},beforeDestroy(){if(window.removeEventListener("resize",this.updateSvgSize),this.mouseEventsEnabled=!1,_h.Z.$off(_h.Z.BRING_TO_VIEW,this.onBringToView),_h.Z.$off(_h.Z.ITEM_LINKS_SHOW_REQUESTED,this.onShowItemLinks),_h.Z.$off(_h.Z.ANY_ITEM_CLICKED,this.onAnyItemClicked),_h.Z.$off(_h.Z.ANY_ITEM_SELECTED,this.onAnyItemSelected),_h.Z.$off(_h.Z.VOID_CLICKED,this.onVoidClicked),_h.Z.$off(_h.Z.VOID_DOUBLE_CLICKED,this.onVoidDoubleClicked),_h.Z.$off(_h.Z.ITEMS_HIGHLIGHTED,this.highlightItems),_h.Z.$off(_h.Z.COMPONENT_SCHEME_MOUNTED,this.onComponentSchemeMounted),_h.Z.$off(_h.Z.COMPONENT_LOAD_FAILED,this.onComponentLoadFailed),_h.Z.$off(_h.Z.FRAME_PLAYER_PREPARED,this.onFramePlayerPrepared),_h.Z.$off(_h.Z.CLICKABLE_MARKERS_TOGGLED,this.updateClickableMarkers),this.useMouseWheel){var e=this.$refs.svgDomElement;e&&e.removeEventListener("wheel",this.mouseWheel)}},data(){return{mouseEventsEnabled:!("view"===this.mode&&this.textSelectionEnabled),linkPalette:["#ec4b4b","#bd4bec","#4badec","#5dec4b","#cba502","#02cbcb"],width:window.innerWidth,height:window.innerHeight,selectedItemLinks:[],lastHoveredItem:null,itemsForInit:{},clickableItemMarkers:[],worldHighlightedItems:[]}},methods:{updateSvgSize(){const e=this.$refs.svgDomElement.getBoundingClientRect();this.width=e.width,this.height=e.height,this.schemeContainer.screenSettings.width=e.width,this.schemeContainer.screenSettings.height=e.height,this.$emit("svg-size-updated",{width:this.width,height:this.height})},mouseCoordsFromEvent(e){return this.mouseCoordsFromPageCoords(e.pageX,e.pageY)},mouseCoordsFromPageCoords(e,t){var n=this.$refs.svgDomElement.getBoundingClientRect(),i=e-n.left,r=t-n.top;return{x:Math.round(i),y:Math.round(r)}},identifyElement(e,t){if(e){const n=e.getAttribute("data-type");if("path-segment"===n)return{type:n,pathIndex:parseInt(e.getAttribute("data-path-index")),segmentIndex:parseInt(e.getAttribute("data-path-segment-index"))};if("path-point"===n)return{type:n,pointIndex:parseInt(e.getAttribute("data-path-point-index")),pathIndex:parseInt(e.getAttribute("data-path-index"))};if("path-control-point"===n)return{type:n,pointIndex:parseInt(e.getAttribute("data-path-point-index")),pathIndex:parseInt(e.getAttribute("data-path-index")),controlPointIndex:parseInt(e.getAttribute("data-path-control-point-index"))};if("multi-item-edit-box"===n||"multi-item-edit-box-rotational-dragger"===n||"multi-item-edit-box-pivot-dragger"===n||"multi-item-edit-box-reset-image-crop-link"===n)return{type:n,multiItemEditBox:this.schemeContainer.multiItemEditBox};if("multi-item-edit-box-resize-dragger"===n)return{type:n,multiItemEditBox:this.schemeContainer.multiItemEditBox,draggerEdges:Ke()(e.getAttribute("data-dragger-edges").split(","),(e=>e.trim()))};const i=e.getAttribute("data-item-id");if(i)return{type:"item",item:this.schemeContainer.findItemById(i)};const r=e.getAttribute("data-connector-starter-item-id");if(r){const e=this.schemeContainer.findItemById(r);if(e)return{type:"connection-starter",connectorStarter:{item:e,point:t}}}const s=e.getAttribute("data-control-point-id");if(s){const t=this.schemeContainer.findItemById(e.getAttribute("data-control-point-item-id"));if(t)return{type:"control-point",controlPoint:{pointId:s,item:t}}}const o=e.closest(".item-text-element");if(o){const e=this.schemeContainer.findItemById(o.getAttribute("data-item-text-element-item-id"));if(e)return{type:"item-text-element",itemTextElement:{item:e}}}}return Hh},mouseWheel(e){var t=this.mouseCoordsFromEvent(e),n=this.toLocalPoint(t.x,t.y);this.$emit("mouse-wheel",n.x,n.y,t.x,t.y,e)},mouseMove(e){if(this.mouseEventsEnabled){const t=this.mouseCoordsFromEvent(e),n=this.toLocalPoint(t.x,t.y);qh.x=t.x,qh.y=t.y,this.$emit("mouse-move",n.x,n.y,t.x,t.y,this.identifyElement(e.srcElement,n),e)}},mouseDown(e){if(this.mouseEventsEnabled){var t=this.mouseCoordsFromEvent(e),n=this.toLocalPoint(t.x,t.y);qh.x=t.x,qh.y=t.y,this.$emit("mouse-down",n.x,n.y,t.x,t.y,this.identifyElement(e.srcElement,n),e)}},mouseUp(e){if(this.mouseEventsEnabled){var t=this.mouseCoordsFromEvent(e),n=this.toLocalPoint(t.x,t.y);this.$emit("mouse-up",n.x,n.y,t.x,t.y,this.identifyElement(e.srcElement,n),e)}},mouseDoubleClick(e){if(this.mouseEventsEnabled){var t=this.mouseCoordsFromEvent(e),n=this.toLocalPoint(t.x,t.y);this.$emit("mouse-double-click",n.x,n.y,t.x,t.y,this.identifyElement(e.srcElement,n),e)}},buildClickableItemMarkers(){const e=[],t=(e,n)=>{e&&Array.isArray(e)&&e.forEach((e=>{e.visible&&e.opacity>0&&e.selfOpacity>0&&(n(e),t(e.childItems,n),t(e._childItems,n))}))};t(this.schemeContainer.worldItems,(t=>{const n=t.links&&t.links.length>0,i=yh()(t.behavior.events,(e=>e.event===zh.Z.standardEvents.clicked.id));if((0,mh.U3)(t)||n||i){const n=this.schemeContainer.getBoundingBoxOfItems([t]);e.push({x:n.x+n.w,y:n.y,itemId:t.id,visible:!0})}})),this.clickableItemMarkers=e},updateClickableMarkers(){"view"===this.mode&&(this.buildClickableItemMarkers(),this.$forceUpdate())},highlightItems(e,t){const n=!!t&&t.highlightPins;this.worldHighlightedItems=[],ze()(e,(e=>{const t=this.schemeContainer.findItemById(e);if(!t)return;const i=Wl.Z.find(t.shape);if(!i)return;const r=i.computeOutline(t);if(!r)return;const s=(0,Kl.aR)(t),o=(0,Kl.pD)(t);let a=Math.max(o.x,o.y);uh.Z.tooSmall(a)&&(a=1);let l=this.schemeContainer.scheme.style.boundaryBoxColor,c=6;if("path"===t.shape)c=t.shapeProps.strokeSize,"none"!==t.shapeProps.fill.type||t.shapeProps.closed||(l="none");else{const e=Wl.Z.find(t.shape);Wl.Z.getShapePropDescriptor(e,"strokeSize")&&(c=t.shapeProps.strokeSize)}const h={id:e,transform:`matrix(${s[0][0]},${s[1][0]},${s[0][1]},${s[1][1]},${s[0][2]},${s[1][2]})`,path:r,fill:l,strokeSize:c,stroke:this.schemeContainer.scheme.style.boundaryBoxColor,pins:[],scalingFactor:a};n&&(h.pins=i.getPins(t)),this.worldHighlightedItems.push(h)}))},reindexUserEvents(){this.userEventBus&&(this.userEventBus.clear(),this.indexUserEventsInItems(this.schemeContainer.scheme.items,this.itemsForInit))},indexUserEventsInItems(e,t){ze()(e,(e=>{(0,mh.Hp)(e,(e=>{e.behavior&&e.behavior.events&&ze()(e.behavior.events,(n=>{const i=Vh.compileActions(this.schemeContainer,e,n.actions);n.event===zh.Z.standardEvents.init.id&&(t[e.id]=1),this.userEventBus.subscribeItemEvent(e.id,n.event,i)}))}))}))},onComponentSchemeMounted(e){if(e._childItems){const t={};this.indexUserEventsInItems(e._childItems,t),ze()(t,((e,t)=>{this.userEventBus.emitItemEvent(t,zh.Z.standardEvents.init.id)}))}"component"===e.shape&&this.userEventBus&&this.userEventBus.emitItemEvent(e.id,Uh.lK)},onComponentLoadFailed(e){"component"===e.shape&&this.userEventBus&&this.userEventBus.emitItemEvent(e.id,Uh.LM)},prepareFrameAnimations(){this.schemeContainer.prepareFrameAnimations()},onFramePlayerPrepared(e,t){if("view"!==this.mode)return;const n=this.schemeContainer.getFrameAnimation(e.id);n&&n.setCallbacks(t)},onFrameAnimatorEvent(e){if("view"!==this.mode)return;const t=e.item.id,n=this.schemeContainer.getFrameAnimation(t);n&&("play"===e.operation?(n.setCallbacks(e.callbacks),n.setFrame(e.frame),e.stopFrame?n.setStopFrame(e.stopFrame):n.setStopFrame(-1),Zh.Z.play(n,t)):"setFrame"===e.operation?n.toggleFrame(e.frame):"stop"===e.operation&&n.stop())},onSvgItemLinkClick:(e,t)=>(e.startsWith("/")&&(window.location=e,t.preventDefault()),!1),onShowItemLinks(e){"view"===this.mode&&(this.selectedItemLinks=this.generateItemLinks(e),this.$nextTick((()=>{ze()(this.selectedItemLinks,((e,t)=>{const n=document.querySelector(`#item-link-${t} span.item-link-title`);if(n){const t=n.getBoundingClientRect();e.width=t.width,e.height=t.height}}))})),this.startLinksAnimation())},onAnyItemClicked(e){this.removeDrawnLinks(),this.resetHighlightedItems()},onAnyItemSelected(){this.resetHighlightedItems()},resetHighlightedItems(){this.worldHighlightedItems.length>0&&(this.worldHighlightedItems=[])},onVoidClicked(){this.removeDrawnLinks()},onVoidDoubleClicked(e,t,n,i){if("edit"===this.mode){const n=Uc.Z.clone(mh.XZ);n.name=this.schemeContainer.copyNameAndMakeUnique("Label"),n.textSlots={body:{text:"",halign:"left",valign:"top",paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0}},n.shape="none",n.area={x:e,y:t,w:40,h:40},(0,Gl.z9)(n),this.schemeContainer.addItem(n),this.$nextTick((()=>{_h.Z.emitItemTextSlotEditTriggered(n,"body",{x:0,y:0,w:n.area.w,h:n.area.h},!1,!0)}))}},removeDrawnLinks(){this.selectedItemLinks.length>0&&(this.selectedItemLinks=[])},onBringToView(e,t){let n=1;e.w>0&&e.h>0&&this.width-400>0&&this.height>0&&(n=Math.floor(100*Math.min(this.width/e.w,this.height/e.h))/100,n=Math.max(1e-4,n)),n>.7&&n<1&&(n=1);const i=this.schemeContainer.screenTransform.x,r=this.schemeContainer.screenTransform.y,s=this.schemeContainer.screenTransform.scale,o=this.width/2-(e.x+e.w/2)*n,a=this.height/2-(e.y+e.h/2)*n;t?Zh.Z.play(new jh.ZP({durationMillis:400,animationType:"ease-out",update:e=>{this.schemeContainer.screenTransform.scale=s*(1-e)+n*e,this.schemeContainer.screenTransform.x=i*(1-e)+o*e,this.schemeContainer.screenTransform.y=r*(1-e)+a*e},destroy:()=>{this.informUpdateOfScreenTransform(this.schemeContainer.screenTransform)}})):(this.schemeContainer.screenTransform.scale=n,this.schemeContainer.screenTransform.x=o,this.schemeContainer.screenTransform.y=a,this.informUpdateOfScreenTransform(this.schemeContainer.screenTransform))},startLinksAnimation(){Zh.Z.play(new jh.ZP({durationMillis:300,update:e=>{ze()(this.selectedItemLinks,(t=>{t.x=t.startX*(1-e)+t.destinationX*e,t.y=t.startY*(1-e)+t.destinationY*e}))}}))},generateItemLinks(e){if(e.links&&e.links.length>0){const t=this.schemeContainer.worldPointOnItem(e.area.w/2,e.area.h/2,e);let n=this._x(t.x),i=this._y(t.y),r=n,s=i;(i>this.height-100||i<100)&&(i=this.height/4);let o=40,a=i-e.links.length*o/2;const l=this.schemeContainer.worldPointOnItem(e.area.w,0,e);let c=this._x(l.x)+10;if(c>this.width-500){let t=Ch()(Ke()(e.links,(e=>e.title?e.title.length:e.url.length)));const n=this._x(this.schemeContainer.worldPointOnItem(0,0,e).x);c=n-10*t}const h=e=>"doc"===e.type&&e.url&&e.url.startsWith("/docs/")&&this.$router&&"history"!==this.$router.mode?"#"+e.url:e.url;return Ke()(e.links,((e,t)=>({url:h(e),type:e.type,shortTitle:this.getFontAwesomeSymbolForLink(e),title:e.title,x:n,y:i,startX:r,startY:s,destinationX:c,destinationY:a+o*t,width:1e3,height:30})))}return[]},informUpdateOfScreenTransform(e){_h.Z.$emit(_h.Z.SCREEN_TRANSFORM_UPDATED,e)},calculateLinkBackgroundRectWidth:e=>e.title?10*e.title.length:10*e.url.length,getFontAwesomeSymbolForLink:e=>Rh.Z.findTypeByNameOrDefault(e.type).fontAwesomeSymbol,toLocalPoint(e,t){return{x:(e-this.schemeContainer.screenTransform.x)/this.schemeContainer.screenTransform.scale,y:(t-this.schemeContainer.screenTransform.y)/this.schemeContainer.screenTransform.scale}},onItemCustomEvent(e){if("clicked"===e.eventName){const t=this.schemeContainer.findItemById(e.itemId);t.links&&t.links.length>0&&this.onShowItemLinks(t),t.description.trim().length>8&&(t.interactionMode===mh.pp.SIDE_PANEL?_h.Z.$emit(_h.Z.ITEM_SIDE_PANEL_TRIGGERED,t):t.interactionMode===mh.pp.TOOLTIP&&_h.Z.$emit(_h.Z.ITEM_TOOLTIP_TRIGGERED,t,qh.x,qh.y))}this.userEventBus&&this.userEventBus.emitItemEvent(e.itemId,e.eventName)},createHUDTransform(e){let t=0,n=0;return"left"===e.shapeProps.horizontalPosition?t=0:"right"===e.shapeProps.horizontalPosition?t=this.width-e.area.w:"center"===e.shapeProps.horizontalPosition&&(t=(this.width-e.area.w)/2),"top"===e.shapeProps.verticalPosition?n=0:"bottom"===e.shapeProps.verticalPosition?n=this.height-e.area.h:"center"===e.shapeProps.verticalPosition&&(n=(this.height-e.area.h)/2),`translate(${t} ${n})`},onDragEnter(e){e.preventDefault(),e.stopPropagation()},onDragOver(e){e.preventDefault(),e.stopPropagation()},onDragLeave(e){e.preventDefault(),e.stopPropagation()},_x(e){return e*this.schemeContainer.screenTransform.scale+this.schemeContainer.screenTransform.x},_y(e){return e*this.schemeContainer.screenTransform.scale+this.schemeContainer.screenTransform.y},_z(e){return e*this.schemeContainer.screenTransform.scale},x_(e){return e*this.schemeContainer.screenTransform.scale+this.schemeContainer.screenTransform.x},y_(e){return e*this.schemeContainer.screenTransform.scale+this.schemeContainer.screenTransform.y},z_(e){return e*this.schemeContainer.screenTransform.scale}},computed:{cssClass(){const e=["mode-"+this.mode];return"view"===this.mode&&this.textSelectionEnabled||e.push("text-nonselectable"),e},safeZoom(){return this.schemeContainer.screenTransform.scale>1e-5?this.schemeContainer.screenTransform.scale:1},transformSvg(){const e=Math.floor(this.schemeContainer.screenTransform.x||0),t=Math.floor(this.schemeContainer.screenTransform.y||0),n=this.schemeContainer.screenTransform.scale||1;return`translate(${e} ${t}) scale(${n} ${n})`},gridStep(){return uh.Z.getSnappingWidthForScale(this.schemeContainer.screenTransform.scale)*this.schemeContainer.screenTransform.scale},gridCount(){const e=uh.Z.getSnappingWidthForScale(this.schemeContainer.screenTransform.scale),t=e*this.schemeContainer.screenTransform.scale;if(t<4)return{x:0,y:0,x0:0,y0:0};const n=Math.ceil(this.width/t)+1,i=Math.ceil(this.height/t)+1,r=e*this.schemeContainer.screenTransform.scale;let s=Math.ceil(this.schemeContainer.screenTransform.x%r)-r,o=Math.ceil(this.schemeContainer.screenTransform.y%r)-r;return{x:n,y:i,x0:Math.ceil((this._x(0)-s)/t),y0:Math.ceil((this._y(0)-o)/t)}},gridTransform(){const e=uh.Z.getSnappingWidthForScale(this.schemeContainer.screenTransform.scale)*this.schemeContainer.screenTransform.scale;return`translate(${Math.ceil(this.schemeContainer.screenTransform.x%e)-e} ${Math.ceil(this.schemeContainer.screenTransform.y%e)-e})`},multiSelectBox(){return this.$store.getters.multiSelectBox},horizontalSnapper(){return this.$store.getters.horizontalSnapper},verticalSnapper(){return this.$store.getters.verticalSnapper},shouldShowDropMask(){return this.$store.getters.isDraggingItemCreation},showClickableMarkers(){return this.$store.getters.showClickableMarkers}},filters:{formatLinkTitle:e=>e.title?e.title:e.url},watch:{textSelectionEnabled(e){this.mouseEventsEnabled=!("view"===this.mode&&e),this.$forceUpdate()}}},Wh=Gh;var Kh=(0,Le.Z)(Wh,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"svg-editor",attrs:{id:"svg-editor"}},[n("svg",{ref:"svgDomElement",class:e.cssClass,style:{background:e.schemeContainer.scheme.style.backgroundColor},attrs:{id:"svg_plot","data-void":"true"},on:{mousemove:e.mouseMove,mousedown:e.mouseDown,mouseup:e.mouseUp,dblclick:e.mouseDoubleClick,dragenter:e.onDragEnter,dragover:e.onDragOver,dragleave:e.onDragLeave}},["view"===e.mode&&e.schemeContainer?n("g",[n("g",{attrs:{"data-type":"scene-transform",transform:e.transformSvg}},[e._l(e.schemeContainer.worldItems,(function(t){return t.visible&&"hud"!==t.shape?n("g",{staticClass:"item-container",class:"item-cursor-"+t.cursor},[n("ItemSvg",{key:t.id+"-"+t.shape+"-"+e.textSelectionEnabled,attrs:{item:t,mode:e.mode,textSelectionEnabled:e.textSelectionEnabled,patchIndex:e.patchIndex},on:{"custom-event":e.onItemCustomEvent,"frame-animator":e.onFrameAnimatorEvent}})],1):e._e()})),e._v(" "),e._l(e.worldHighlightedItems,(function(t){return n("g",{attrs:{transform:t.transform}},[n("path",{staticStyle:{opacity:"0.5"},attrs:{d:t.path,fill:"none",stroke:t.stroke,"stroke-width":t.strokeSize+6/(t.scalingFactor*e.safeZoom)+"px","data-item-id":t.id,"data-preview-ignore":"true"}})])})),e._v(" "),e.showClickableMarkers?n("g",{attrs:{"data-preview-ignore":"true"}},e._l(e.clickableItemMarkers,(function(t){return t.visible?n("circle",{staticClass:"clickable-item-marker",attrs:{cx:t.x,cy:t.y,r:5/e.safeZoom,"data-item-id":t.itemId,stroke:e.schemeContainer.scheme.style.itemMarkerColor,fill:e.schemeContainer.scheme.style.itemMarkerColor}}):e._e()})),0):e._e()],2),e._v(" "),e._l(e.selectedItemLinks,(function(t,i){return n("g",{attrs:{"data-preview-ignore":"true"}},[n("a",{staticClass:"item-link",attrs:{id:"item-link-"+i,"xlink:href":t.url},on:{click:function(n){return e.onSvgItemLinkClick(t.url,arguments[0])}}},[n("circle",{attrs:{cx:t.x,cy:t.y,r:12,stroke:e.linkPalette[i%e.linkPalette.length],fill:e.linkPalette[i%e.linkPalette.length]}}),e._v(" "),n("text",{staticClass:"item-link-icon",class:["link-icon-"+t.type],attrs:{x:t.x-6,y:t.y+5,"font-size":"13px",title:t.title}},[e._v(e._s(t.shortTitle))]),e._v(" "),n("foreignObject",{attrs:{x:t.x+16,y:t.y-11,width:t.width,height:t.height}},[n("span",{staticClass:"item-link-title"},[e._v(e._s(e._f("formatLinkTitle")(t)))])])])])})),e._v(" "),n("g",e._l(e.schemeContainer.hudItems,(function(t){return t.visible?n("g",{style:{opacity:t.opacity/100,"mix-blend-mode":t.blendMode},attrs:{transform:e.createHUDTransform(t)}},e._l(t.childItems,(function(t){return t.visible?n("ItemSvg",{key:t.id+"-"+t.shape+"-"+e.textSelectionEnabled,attrs:{item:t,textSelectionEnabled:e.textSelectionEnabled,patchIndex:e.patchIndex,mode:e.mode},on:{"custom-event":e.onItemCustomEvent,"frame-animator":e.onFrameAnimatorEvent}}):e._e()})),1):e._e()})),0)],2):e._e(),e._v(" "),"edit"===e.mode?n("g",[n("g",{staticClass:"grid",attrs:{"data-preview-ignore":"true",transform:e.gridTransform,"data-void":"true"}},[e._l(e.gridCount.x,(function(t){return n("line",{class:{"grid-line-zero":t===e.gridCount.x0},attrs:{x1:t*e.gridStep,y1:"0",x2:t*e.gridStep,y2:e.height+2*e.gridStep,stroke:e.schemeContainer.scheme.style.gridColor,"data-void":"true"}})})),e._v(" "),e._l(e.gridCount.y,(function(t){return n("line",{class:{"grid-line-zero":t===e.gridCount.y0},attrs:{x1:"0",y1:t*e.gridStep,x2:e.width+2*e.gridStep,y2:t*e.gridStep,stroke:e.schemeContainer.scheme.style.gridColor,"data-void":"true"}})}))],2),e._v(" "),n("g",{attrs:{"data-type":"scene-transform",transform:e.transformSvg}},[e._l(e.schemeContainer.worldItems,(function(t){return t.visible?n("g",{staticClass:"item-container",class:"item-cursor-"+t.cursor},[n("ItemSvg",{key:t.id+"-"+t.shape,attrs:{item:t,patchIndex:e.patchIndex,mode:e.mode}})],1):e._e()})),e._v(" "),e.schemeContainer.activeBoundaryBox?n("g",{attrs:{"data-preview-ignore":"true"}},[n("rect",{staticClass:"boundary-box",attrs:{stroke:e.schemeContainer.scheme.style.boundaryBoxColor,x:e.schemeContainer.activeBoundaryBox.x,y:e.schemeContainer.activeBoundaryBox.y,width:e.schemeContainer.activeBoundaryBox.w,height:e.schemeContainer.activeBoundaryBox.h}})]):e._e(),e._v(" "),e._t("scene-transform"),e._v(" "),e._l(e.worldHighlightedItems,(function(t){return n("g",{attrs:{transform:t.transform}},[n("path",{staticStyle:{opacity:"0.5"},attrs:{d:t.path,fill:"none",stroke:t.stroke,"stroke-width":t.strokeSize+6/(t.scalingFactor*e.safeZoom)+"px","data-item-id":t.id,"stroke-linejoin":"round","data-preview-ignore":"true"}}),e._v(" "),e._l(t.pins,(function(i){return n("circle",{staticStyle:{opacity:"0.5"},attrs:{cx:i.x,cy:i.y,r:8/(t.scalingFactor*e.safeZoom),"data-preview-ignore":"true",fill:t.stroke}})}))],2)}))],2),e._v(" "),e.multiSelectBox?n("g",[n("rect",{staticClass:"multi-select-box",attrs:{x:e._x(e.multiSelectBox.x),y:e._y(e.multiSelectBox.y),width:e._z(e.multiSelectBox.w),height:e._z(e.multiSelectBox.h)}})]):e._e(),e._v(" "),e.horizontalSnapper?n("line",{staticStyle:{stroke:"red",opacity:"0.4","stroke-width":"1px"},attrs:{x1:0,y1:e._y(e.horizontalSnapper.value),x2:e.width,y2:e._y(e.horizontalSnapper.value)}}):e._e(),e._v(" "),e.verticalSnapper?n("line",{staticStyle:{stroke:"red",opacity:"0.4","stroke-width":"1px"},attrs:{x1:e._x(e.verticalSnapper.value),y1:0,x2:e._x(e.verticalSnapper.value),y2:e.height}}):e._e(),e._v(" "),e.stateLayerShown?n("rect",{staticClass:"state-hover-layer",attrs:{x:"0",y:"0",width:e.width,height:e.height,fill:"rgba(255, 255, 255, 0.0)"}}):e._e()]):e._e()]),e._v(" "),e._t("overlay")],2)}),[],!1,null,null,null);const Jh=Kh.exports,Yh={props:{editBox:{type:Object,required:!0},zoom:{type:Number},boundaryBoxColor:{type:String},controlPointsColor:{type:String},kind:{type:String,default:"regular"}},beforeMount(){if(Jl.setSelectedConnectorPath(this.$store,null),1===this.editBox.items.length){const e=this.editBox.items[0];if("connector"===e.shape){const t=Wl.Z.find(e.shape);Jl.setSelectedConnectorPath(this.$store,t.computeOutline(e))}Jl.setItemControlPoints(this.$store,e)}else Jl.clearItemControlPoints(this.$store)},data:()=>({draggerSize:5}),methods:{createStrokeDashArray:(e,t)=>Sh.Z.createDashArray(e,t)},computed:{svgItemCompleteTransform(){const e=(0,Kl.aR)(this.editBox.items[0]);return`matrix(${e[0][0]},${e[1][0]},${e[0][1]},${e[1][1]},${e[0][2]},${e[1][2]})`},svgEditBoxTransform(){const e=uh.Z.standardTransformWithArea(uh.Z.identityMatrix(),this.editBox.area);return`matrix(${e[0][0]},${e[1][0]},${e[0][1]},${e[1][1]},${e[0][2]},${e[1][2]})`},safeZoom(){return this.zoom>.001?this.zoom:1},cds(){return this.zoom>.001?.7*this.draggerSize/this.zoom:.7*this.draggerSize},cdsB(){return this.zoom>.001?3*this.draggerSize/this.zoom:3*this.draggerSize},controlPoints(){return this.$store.getters.itemControlPointsList},isItemConnector(){return 1===(e=this.editBox.items).length&&"connector"===e[0].shape;var e},shouldShowControlPoints(){return 1===this.editBox.items.length&&"path"!==this.editBox.items[0].shape},selectedConnectorPath(){return this.$store.getters.selectedConnectorPath},showPivot(){return this.$store.getters.showPivot}}},Qh=(0,Le.Z)(Yh,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{attrs:{"data-preview-ignore":"true"}},[1===e.editBox.items.length&&"regular"===e.kind?n("g",["connector"===e.editBox.items[0].shape&&e.selectedConnectorPath?n("g",{attrs:{transform:e.svgItemCompleteTransform}},[n("path",{staticStyle:{"stroke-linejoin":"round",opacity:"0.6"},attrs:{d:e.selectedConnectorPath,"stroke-width":e.editBox.items[0].shapeProps.strokeSize+3+"px",stroke:e.boundaryBoxColor,"data-preview-ignore":"true","data-item-id":e.editBox.items[0].id,fill:"none"}}),e._v(" "),n("path",{staticStyle:{"stroke-linejoin":"round"},attrs:{d:e.selectedConnectorPath,"stroke-width":e.editBox.items[0].shapeProps.strokeSize+"px",stroke:e.editBox.items[0].shapeProps.strokeColor,"data-preview-ignore":"true","data-item-id":e.editBox.items[0].id,"stroke-dasharray":e.createStrokeDashArray(e.editBox.items[0].shapeProps.strokePattern,e.editBox.items[0].shapeProps.strokeSize),fill:"none"}})]):e._e(),e._v(" "),n("g",{attrs:{transform:e.svgEditBoxTransform}},e._l(e.controlPoints,(function(t){return e.shouldShowControlPoints?n("circle",{key:"item-control-point-"+t.id,staticClass:"item-control-point",attrs:{"data-control-point-item-id":e.editBox.items[0].id,"data-control-point-id":t.id,cx:t.point.x,cy:t.point.y,fill:e.controlPointsColor,r:6/e.safeZoom}}):e._e()})),0)]):e._e(),e._v(" "),e.isItemConnector?e._e():n("g",{attrs:{transform:e.svgEditBoxTransform}},[n("path",{staticStyle:{opacity:"0.8"},attrs:{d:"M 0 0 L "+e.editBox.area.w+" 0  L "+e.editBox.area.w+" "+e.editBox.area.h+" L 0 "+e.editBox.area.h+" Z","data-type":"multi-item-edit-box","stroke-width":1/e.safeZoom,fill:"none",stroke:e.boundaryBoxColor}}),e._v(" "),"regular"===e.kind?n("ellipse",{staticClass:"boundary-box-dragger",attrs:{"data-type":"multi-item-edit-box-rotational-dragger",fill:e.boundaryBoxColor,cx:e.editBox.area.w/2,cy:-60/e.safeZoom,rx:5/e.safeZoom,ry:5/e.safeZoom}}):e._e(),e._v(" "),1===e.editBox.items.length&&"regular"===e.kind?n("g",[n("path",{staticClass:"boundary-box-connector-starter",attrs:{transform:"translate("+(e.editBox.area.w/2+3/e.safeZoom)+"  "+(e.editBox.area.h+30/e.safeZoom)+") scale("+1/e.safeZoom+") rotate(90)","data-connector-starter-item-id":e.editBox.items[0].id,fill:e.boundaryBoxColor,d:"M 0 0  L 10 0  L 10 -3  L 20 3  L 10 9  L 10 6  L 0 6 Z"}}),e._v(" "),n("path",{staticClass:"boundary-box-connector-starter",attrs:{transform:"translate("+(e.editBox.area.w/2-3/e.safeZoom)+"  "+-30/e.safeZoom+") scale("+1/e.safeZoom+") rotate(270)","data-connector-starter-item-id":e.editBox.items[0].id,fill:e.boundaryBoxColor,d:"M 0 0  L 10 0  L 10 -3  L 20 3  L 10 9  L 10 6  L 0 6 Z"}}),e._v(" "),n("path",{staticClass:"boundary-box-connector-starter",attrs:{transform:"translate("+(e.editBox.area.w+30/e.safeZoom)+"  "+(e.editBox.area.h/2-3/e.safeZoom)+") scale("+1/e.safeZoom+")","data-connector-starter-item-id":e.editBox.items[0].id,fill:e.boundaryBoxColor,d:"M 0 0  L 10 0  L 10 -3  L 20 3  L 10 9  L 10 6  L 0 6 Z"}}),e._v(" "),n("path",{staticClass:"boundary-box-connector-starter",attrs:{transform:"translate("+-30/e.safeZoom+"  "+(e.editBox.area.h/2+3/e.safeZoom)+") scale("+1/e.safeZoom+") rotate(180)","data-connector-starter-item-id":e.editBox.items[0].id,fill:e.boundaryBoxColor,d:"M 0 0  L 10 0  L 10 -3  L 20 3  L 10 9  L 10 6  L 0 6 Z"}})]):e._e(),e._v(" "),"regular"===e.kind?n("g",[n("rect",{staticClass:"boundary-box-dragger",attrs:{"data-type":"multi-item-edit-box-resize-dragger","data-dragger-edges":"top,left",fill:e.boundaryBoxColor,x:-4*e.draggerSize/e.safeZoom,y:-4*e.draggerSize/e.safeZoom,width:2*e.draggerSize/e.safeZoom,height:2*e.draggerSize/e.safeZoom}}),e._v(" "),n("rect",{staticClass:"boundary-box-dragger",attrs:{"data-type":"multi-item-edit-box-resize-dragger","data-dragger-edges":"top",fill:e.boundaryBoxColor,x:e.editBox.area.w/2-e.draggerSize/e.safeZoom,y:-4*e.draggerSize/e.safeZoom,width:2*e.draggerSize/e.safeZoom,height:2*e.draggerSize/e.safeZoom}}),e._v(" "),n("rect",{staticClass:"boundary-box-dragger",attrs:{"data-type":"multi-item-edit-box-resize-dragger","data-dragger-edges":"top,right",fill:e.boundaryBoxColor,x:e.editBox.area.w+2*e.draggerSize/e.safeZoom,y:-4*e.draggerSize/e.safeZoom,width:2*e.draggerSize/e.safeZoom,height:2*e.draggerSize/e.safeZoom}}),e._v(" "),n("rect",{staticClass:"boundary-box-dragger",attrs:{"data-type":"multi-item-edit-box-resize-dragger","data-dragger-edges":"left",fill:e.boundaryBoxColor,x:-4*e.draggerSize/e.safeZoom,y:e.editBox.area.h/2-e.draggerSize/e.safeZoom,width:2*e.draggerSize/e.safeZoom,height:2*e.draggerSize/e.safeZoom}}),e._v(" "),n("rect",{staticClass:"boundary-box-dragger",attrs:{"data-type":"multi-item-edit-box-resize-dragger","data-dragger-edges":"right",fill:e.boundaryBoxColor,x:e.editBox.area.w+2*e.draggerSize/e.safeZoom,y:e.editBox.area.h/2-e.draggerSize/e.safeZoom,width:2*e.draggerSize/e.safeZoom,height:2*e.draggerSize/e.safeZoom}}),e._v(" "),n("rect",{staticClass:"boundary-box-dragger",attrs:{"data-type":"multi-item-edit-box-resize-dragger","data-dragger-edges":"bottom,left",fill:e.boundaryBoxColor,x:-4*e.draggerSize/e.safeZoom,y:e.editBox.area.h+2*e.draggerSize/e.safeZoom,width:2*e.draggerSize/e.safeZoom,height:2*e.draggerSize/e.safeZoom}}),e._v(" "),n("rect",{staticClass:"boundary-box-dragger",attrs:{"data-type":"multi-item-edit-box-resize-dragger","data-dragger-edges":"bottom",fill:e.boundaryBoxColor,x:e.editBox.area.w/2-e.draggerSize/e.safeZoom,y:e.editBox.area.h+2*e.draggerSize/e.safeZoom,width:2*e.draggerSize/e.safeZoom,height:2*e.draggerSize/e.safeZoom}}),e._v(" "),n("rect",{staticClass:"boundary-box-dragger",attrs:{"data-type":"multi-item-edit-box-resize-dragger","data-dragger-edges":"bottom,right",fill:e.boundaryBoxColor,x:e.editBox.area.w+2*e.draggerSize/e.safeZoom,y:e.editBox.area.h+2*e.draggerSize/e.safeZoom,width:2*e.draggerSize/e.safeZoom,height:2*e.draggerSize/e.safeZoom}}),e._v(" "),e.showPivot?n("g",{staticClass:"boundary-box-pivot-dragger"},[n("line",{attrs:{x1:e.editBox.area.w*e.editBox.pivotPoint.x,y1:e.editBox.area.h*e.editBox.pivotPoint.y-10/e.safeZoom,x2:e.editBox.area.w*e.editBox.pivotPoint.x,y2:e.editBox.area.h*e.editBox.pivotPoint.y+10/e.safeZoom,stroke:e.boundaryBoxColor,"stroke-width":1/e.safeZoom}}),e._v(" "),n("line",{attrs:{x1:e.editBox.area.w*e.editBox.pivotPoint.x-10/e.safeZoom,y1:e.editBox.area.h*e.editBox.pivotPoint.y,x2:e.editBox.area.w*e.editBox.pivotPoint.x+10/e.safeZoom,y2:e.editBox.area.h*e.editBox.pivotPoint.y,stroke:e.boundaryBoxColor,"stroke-width":1/e.safeZoom}}),e._v(" "),n("circle",{attrs:{"data-type":"multi-item-edit-box-pivot-dragger",fill:"rgba(255,255,255,0.0)",stroke:e.boundaryBoxColor,"stroke-width":1/e.safeZoom,cx:e.editBox.area.w*e.editBox.pivotPoint.x,cy:e.editBox.area.h*e.editBox.pivotPoint.y,r:10/e.safeZoom}})]):e._e()]):"crop-image"===e.kind?n("g",[n("g",{attrs:{transform:"translate("+10/e.safeZoom+", "+-20/e.safeZoom+") scale("+1/e.safeZoom+")"}},[n("foreignObject",{attrs:{x:0,y:0,width:"100",height:"20"}},[n("div",[n("span",{staticClass:"link",attrs:{"data-type":"multi-item-edit-box-reset-image-crop-link"}},[e._v("Reset")])])])]),e._v(" "),n("path",{staticClass:"boundary-box-dragger",attrs:{transform:"translate("+e.editBox.area.w/2+", 0) rotate(0)",d:"M "+-e.cdsB+" "+-e.cds+" L "+e.cdsB+" "+-e.cds+"  L "+e.cdsB+" "+e.cds+" L "+-e.cdsB+" "+e.cds+" Z","data-type":"multi-item-edit-box-resize-dragger","data-dragger-edges":"top",fill:e.boundaryBoxColor,stroke:"rgba(255,255,255,1.0)","stroke-width":1/e.safeZoom+"px"}}),e._v(" "),n("path",{staticClass:"boundary-box-dragger",attrs:{transform:"translate("+e.editBox.area.w+", "+e.editBox.area.h/2+") rotate(90)",d:"M "+-e.cdsB+" "+-e.cds+" L "+e.cdsB+" "+-e.cds+"  L "+e.cdsB+" "+e.cds+" L "+-e.cdsB+" "+e.cds+" Z","data-type":"multi-item-edit-box-resize-dragger","data-dragger-edges":"right",fill:e.boundaryBoxColor,stroke:"rgba(255,255,255,1.0)","stroke-width":1/e.safeZoom+"px"}}),e._v(" "),n("path",{staticClass:"boundary-box-dragger",attrs:{transform:"translate("+e.editBox.area.w/2+", "+e.editBox.area.h+") rotate(0)",d:"M "+-e.cdsB+" "+-e.cds+" L "+e.cdsB+" "+-e.cds+"  L "+e.cdsB+" "+e.cds+" L "+-e.cdsB+" "+e.cds+" Z","data-type":"multi-item-edit-box-resize-dragger","data-dragger-edges":"bottom",fill:e.boundaryBoxColor,stroke:"rgba(255,255,255,1.0)","stroke-width":1/e.safeZoom+"px"}}),e._v(" "),n("path",{staticClass:"boundary-box-dragger",attrs:{transform:"translate(0, "+e.editBox.area.h/2+") rotate(90)",d:"M "+-e.cdsB+" "+-e.cds+" L "+e.cdsB+" "+-e.cds+"  L "+e.cdsB+" "+e.cds+" L "+-e.cdsB+" "+e.cds+" Z","data-type":"multi-item-edit-box-resize-dragger","data-dragger-edges":"left",fill:e.boundaryBoxColor,stroke:"rgba(255,255,255,1.0)","stroke-width":1/e.safeZoom+"px"}}),e._v(" "),n("path",{staticClass:"boundary-box-dragger",attrs:{d:"M "+-e.cds+" "+-e.cds+" L "+e.cdsB+" "+-e.cds+" L "+e.cdsB+" "+e.cds+" L "+e.cds+" "+e.cds+" L "+e.cds+" "+e.cdsB+" L "+-e.cds+" "+e.cdsB+" Z","data-type":"multi-item-edit-box-resize-dragger","data-dragger-edges":"top,left",fill:e.boundaryBoxColor,stroke:"rgba(255,255,255,1.0)","stroke-width":1/e.safeZoom+"px"}}),e._v(" "),n("path",{staticClass:"boundary-box-dragger",attrs:{transform:"translate("+e.editBox.area.w+", 0) rotate(90)",d:"M "+-e.cds+" "+-e.cds+" L "+e.cdsB+" "+-e.cds+" L "+e.cdsB+" "+e.cds+" L "+e.cds+" "+e.cds+" L "+e.cds+" "+e.cdsB+" L "+-e.cds+" "+e.cdsB+" Z","data-type":"multi-item-edit-box-resize-dragger","data-dragger-edges":"top,right",fill:e.boundaryBoxColor,stroke:"rgba(255,255,255,1.0)","stroke-width":1/e.safeZoom+"px"}}),e._v(" "),n("path",{staticClass:"boundary-box-dragger",attrs:{transform:"translate("+e.editBox.area.w+", "+e.editBox.area.h+") rotate(180)",d:"M "+-e.cds+" "+-e.cds+" L "+e.cdsB+" "+-e.cds+" L "+e.cdsB+" "+e.cds+" L "+e.cds+" "+e.cds+" L "+e.cds+" "+e.cdsB+" L "+-e.cds+" "+e.cdsB+" Z","data-type":"multi-item-edit-box-resize-dragger","data-dragger-edges":"bottom,right",fill:e.boundaryBoxColor,stroke:"rgba(255,255,255,1.0)","stroke-width":1/e.safeZoom+"px"}}),e._v(" "),n("path",{staticClass:"boundary-box-dragger",attrs:{transform:"translate(0, "+e.editBox.area.h+") rotate(-90)",d:"M "+-e.cds+" "+-e.cds+" L "+e.cdsB+" "+-e.cds+" L "+e.cdsB+" "+e.cds+" L "+e.cds+" "+e.cds+" L "+e.cds+" "+e.cdsB+" L "+-e.cds+" "+e.cdsB+" Z","data-type":"multi-item-edit-box-resize-dragger","data-dragger-edges":"bottom,left",fill:e.boundaryBoxColor,stroke:"rgba(255,255,255,1.0)","stroke-width":1/e.safeZoom+"px"}})]):e._e()])])}),[],!1,null,null,null).exports;function Xh(e,t){const n=(0,Kl.rs)(e.x,e.y,t);if(n.t=e.t,e.hasOwnProperty("x1")){const i=(0,Kl.rs)(e.x+e.x1,e.y+e.y1,t);n.x1=i.x-n.x,n.y1=i.y-n.y}if(e.hasOwnProperty("x2")){const i=(0,Kl.rs)(e.x+e.x2,e.y+e.y2,t);n.x2=i.x-n.x,n.y2=i.y-n.y}return e.hasOwnProperty("h")&&(n.h=e.h),n}const ed={props:["item","zoom","boundaryBoxColor","controlPointsColor"],mounted(){_h.Z.subscribeForItemChanged(this.item.id,this.onItemChanged),_h.Z.$on(_h.Z.CURVE_EDIT_POINTS_UPDATED,this.update)},beforeDestroy(){_h.Z.unsubscribeForItemChanged(this.item.id,this.onItemChanged),_h.Z.$off(_h.Z.CURVE_EDIT_POINTS_UPDATED,this.update)},data(){return{pathSegments:this.buildPathSegments()}},methods:{onItemChanged(){this.pathSegments=this.buildPathSegments(),this.$forceUpdate()},buildPathSegments(){const e=[];return this.item.shapeProps.paths.forEach(((t,n)=>{let i=t.points.length-1;t.closed&&(i=t.points.length);for(let r=0;r<i;r++){const i=(r+1)%t.points.length,s=Xh((0,Gc.oJ)(t.points[r],this.item.area.w,this.item.area.h),this.item),o=Xh((0,Gc.oJ)(t.points[i],this.item.area.w,this.item.area.h),this.item);e.push({pathId:n,segmentId:r,path:(0,Gc.FI)(Gc.DC,Gc.DC,[s,o],!1)})}})),e},update(){this.$forceUpdate()}},computed:{safeZoom(){return this.zoom>1e-5?this.zoom:1},strokeSize(){return Math.max(1,this.item.shapeProps.strokeSize)+2},curvePaths(){return this.$store.getters.curveEditPaths}}},td=ed,nd=(0,Le.Z)(td,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[e._l(e.pathSegments,(function(t){return n("path",{attrs:{"data-type":"path-segment","data-path-index":t.pathId,"data-path-segment-index":t.segmentId,d:t.path,fill:"none",stroke:"rgba(0,0,0,0.0)","stroke-width":e.strokeSize+"px"}})})),e._v(" "),e._l(e.curvePaths,(function(t,i){return n("g",e._l(t.points,(function(r,s){return n("g",{staticClass:"path-control-points"},["B"===r.t?n("g",[n("line",{attrs:{x1:r.x,y1:r.y,x2:r.x1+r.x,y2:r.y1+r.y,stroke:e.boundaryBoxColor,"stroke-width":1/e.safeZoom}}),e._v(" "),n("line",{attrs:{x1:r.x,y1:r.y,x2:r.x2+r.x,y2:r.y2+r.y,stroke:e.boundaryBoxColor,"stroke-width":1/e.safeZoom}})]):e._e(),e._v(" "),n("circle",{attrs:{"data-type":"path-point","data-path-point-index":s,"data-path-index":i,cx:r.x,cy:r.y,r:5/e.safeZoom,fill:r.selected?e.controlPointsColor:e.boundaryBoxColor,stroke:"none"}}),e._v(" "),"B"===r.t?n("g",[n("path",{attrs:{"data-type":"path-control-point","data-path-point-index":s,"data-path-index":i,"data-path-control-point-index":"1",transform:"translate("+(r.x1+r.x)+" "+(r.y1+r.y)+")",d:"M "+5*(r.vx1+r.vy1)/e.safeZoom+" "+5*(r.vy1-r.vx1)/e.safeZoom+"  l "+-10*r.vx1/e.safeZoom+" "+-10*r.vy1/e.safeZoom+"  l "+-10*r.vy1/e.safeZoom+" "+10*r.vx1/e.safeZoom+" l "+10*r.vx1/e.safeZoom+" "+10*r.vy1/e.safeZoom+" z",fill:r.selected?e.controlPointsColor:e.boundaryBoxColor,stroke:"none"}}),e._v(" "),n("path",{attrs:{"data-type":"path-control-point","data-path-point-index":s,"data-path-index":i,"data-path-control-point-index":"2",transform:"translate("+(r.x2+r.x)+" "+(r.y2+r.y)+")",d:"M "+5*(r.vx2+r.vy2)/e.safeZoom+" "+5*(r.vy2-r.vx2)/e.safeZoom+"  l "+-10*r.vx2/e.safeZoom+" "+-10*r.vy2/e.safeZoom+"  l "+-10*r.vy2/e.safeZoom+" "+10*r.vx2/e.safeZoom+" l "+10*r.vx2/e.safeZoom+" "+10*r.vy2/e.safeZoom+" z",fill:r.selected?e.controlPointsColor:e.boundaryBoxColor,stroke:"none"}})]):e._e(),e._v(" "),"A"===r.t?n("g",[n("circle",{attrs:{"data-type":"path-control-point","data-path-point-index":s,"data-path-index":i,"data-path-control-point-index":"1",cx:r.h*(t.points[(s+1)%t.points.length].y-r.y)/100+(t.points[(s+1)%t.points.length].x+r.x)/2,cy:r.h*(r.x-t.points[(s+1)%t.points.length].x)/100+(t.points[(s+1)%t.points.length].y+r.y)/2,r:5/e.safeZoom,fill:"rgba(255, 255, 255, 0.1)",stroke:r.selected?e.controlPointsColor:e.boundaryBoxColor,"stroke-width":3/e.safeZoom}})]):e._e()])})),0)}))],2)}),[],!1,null,null,null).exports,id={props:{item:{type:Object},slotName:{type:String},area:{type:Object},text:{type:String},cssStyle:{type:Object},zoom:{type:Number},creatingNewItem:{type:Boolean},scalingVector:{type:Number},markupDisabled:{type:Boolean,default:!1}},components:{RichTextEditor:ql,EditorContent:Ea},beforeMount(){document.addEventListener("mousedown",this.outsideClickListener),document.addEventListener("keydown",this.onKeyDown),_h.Z.$on(_h.Z.ITEM_TEXT_SLOT_MOVED,this.closeEditBox),this.init()},beforeDestroy(){document.removeEventListener("mousedown",this.outsideClickListener),document.removeEventListener("keydown",this.onKeyDown),_h.Z.$off(_h.Z.ITEM_TEXT_SLOT_MOVED,this.closeEditBox)},mounted(){this.markupDisabled&&this.$refs.textarea.focus()},data(){return{editor:null,editorCssStyle:this.generateStyle(this.cssStyle)}},methods:{init(){this.markupDisabled||(this.editor=this.createEditor(this.text),_h.Z.emitItemInPlaceTextEditorCreated(this.editor))},generateStyle(e){const t=Uc.Z.clone(e);let n=this.zoom;if(t.transform=`scale(${this.zoom})`,t["transform-origin"]="top left",!this.creatingNewItem){t.width=this.area.w/n+"px";const e=this.item.textSlots[this.slotName]?this.item.textSlots[this.slotName].valign:"top";("none"!==this.item.shape||"none"===this.item.shape&&"top"!==e)&&(t.height=this.area.h/n+"px")}return t},createEditor(e){const t=new Pa({disablePasteRules:!0,disableInputRules:!0,extensions:[new Pl,new Tl,new Ml,new Ol({levels:[1,2,3]}),new El,new $l,new Dl,new Bl,new Ll,new Nl,new Rl,new Fl,new jl,new zl,new Ul],autoFocus:!0,content:"",onUpdate:e=>{this.$emit("updated",e.getHTML())}});return t.setContent(this.text,!0,{preserveWhitespace:!0}),t},outsideClickListener(e){Uc.Z.domHasParentNode(e.target,(e=>"item-in-place-text-editor"===e.getAttribute("data-type")||e.classList.contains("side-panel-right")))||this.closeEditBox()},onKeyDown(e){(0,ph.W)(e)===ph.R.ESCAPE&&this.closeEditBox()},onTextareaKeyDown(e){if("Tab"==e.key){e.preventDefault();const t=e.target,n=t.selectionStart,i=t.selectionEnd;t.value=t.value.substring(0,n)+"    "+t.value.substring(i),t.selectionStart=t.selectionEnd=n+4,this.$emit("updated",e.target.value)}},onTextareaInput(e){this.$emit("updated",e.target.value)},closeEditBox(){if("none"===this.item.shape){const e=this.$refs.editor.getBoundingClientRect(),t=this.editor.getHTML(),n=document.createElement("div");n.innerHTML=Ih()(t);const i=n.innerText.trim();if(i){if(this.creatingNewItem){let e=i;e.length>20&&(e=e.substring(0,20)),this.$emit("item-renamed",this.item,e)}this.$emit("item-area-changed",this.item,(e.width+2)/this.zoom,(e.height+2)/this.zoom)}else this.$emit("item-text-cleared",this.item)}this.$emit("close")}},computed:{cssStyle2(){return{left:`${this.area.x+1/this.zoom}px`,top:`${this.area.y+1/this.zoom}px`,transform:`scale(${this.scalingVector.x}, ${this.scalingVector.y})`}}},watch:{cssStyle(e){this.editorCssStyle=this.generateStyle(e)}}},rd=(0,Le.Z)(id,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"in-place-edit-editor-wrapper",style:e.cssStyle2},[e.markupDisabled?n("textarea",{ref:"textarea",staticClass:"in-place-text-editor",style:e.editorCssStyle,attrs:{"data-type":"item-in-place-text-editor"},domProps:{value:e.text},on:{keydown:e.onTextareaKeyDown,input:e.onTextareaInput}}):e.editor?n("div",{ref:"editor",staticClass:"item-text-container",style:e.editorCssStyle,attrs:{"data-type":"item-in-place-text-editor"}},[n("editor-content",{attrs:{editor:e.editor}})],1):e._e()])}),[],!1,null,null,null).exports;var sd=n(3651),od=n.n(sd),ad=n(6604),ld=n.n(ad);const cd=new qc("panel-state",100),hd={props:{name:String,uid:String,closable:{type:Boolean,default:!1}},data(){return{isOpen:cd.get(this.name+this.uid,!0)}},methods:{togglePanel(){this.isOpen=!this.isOpen,cd.save(this.name+this.uid,this.isOpen),this.$emit("value",this.isOpen)}}},dd=(0,Le.Z)(hd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel"},[n("div",{staticClass:"panel-title text-nonselectable",class:{"panel-expanded":e.isOpen,"panel-collapsed":!e.isOpen},on:{click:e.togglePanel}},[e._v("\n        "+e._s(e.name)+"\n    ")]),e._v(" "),e.closable?n("span",{staticClass:"panel-close",on:{click:function(t){return e.$emit("close")}}},[n("i",{staticClass:"fas fa-times"})]):e._e(),e._v(" "),e.isOpen?n("div",{staticClass:"panel-body"},[e._t("default")],2):e._e()])}),[],!1,null,null,null).exports,ud={props:[],data:()=>({id:ec().generate(),x:0,y:0}),methods:{onMouseOver(e){this.x=e.x+10;let t=e.y+20;const n=document.getElementById(`tooltip-wrapper-${this.id}`);if(n){const i=n.getBoundingClientRect();i.height+t>window.innerHeight&&(t=e.y-i.height)}this.y=t}}},pd=(0,Le.Z)(ud,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tooltip"},[n("i",{staticClass:"tooltip-icon fas fa-info-circle",on:{mouseover:e.onMouseOver}}),e._v(" "),n("div",{staticClass:"tooltip-wrapper",style:{left:e.x+"px",top:e.y+"px"},attrs:{id:"tooltip-wrapper-"+e.id}},[n("div",{staticClass:"tooltip-text"},[e._t("default")],2)])])}),[],!1,null,null,null).exports;var md=n(7010),fd=n.n(md);const gd={props:{item:{type:Object},schemeContainer:{type:Object}},components:{VueTagsInput:fd(),Panel:dd,RichTextEditor:ql},data(){const e=Wl.Z.find(this.item.shape);let t="rich";return e&&e.editorProps&&e.editorProps.description&&(t=e.editorProps.description),{itemTag:"",existingItemTags:Ke()(this.schemeContainer.itemTags,(e=>({text:e}))),shapeComponent:e,descriptionType:t}},methods:{onItemTagChange(e){this.$emit("tags-changed",Ke()(e,(e=>e.text)))},commitSchemeChange(e){_h.Z.emitSchemeChangeCommited(`item.${this.item.id}.${e}`),_h.Z.emitItemChanged(this.item.id,e)}},computed:{filteredItemTags(){return this.existingItemTags.filter((e=>new RegExp(this.itemTag,"i").test(e.text)))},itemTags(){return Ke()(this.item.tags,(e=>({text:e})))}}},vd=gd,yd=(0,Le.Z)(vd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("panel",{attrs:{name:"General"}},[n("h5",[e._v("Name")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.item.name,expression:"item.name"}],staticClass:"textfield",attrs:{type:"text"},domProps:{value:e.item.name},on:{input:[function(t){t.target.composing||e.$set(e.item,"name",t.target.value)},function(t){return e.commitSchemeChange("name")}]}}),e._v(" "),n("div",[n("h5",[e._v("Tags")]),e._v(" "),n("vue-tags-input",{attrs:{tags:e.itemTags,"autocomplete-items":e.filteredItemTags},on:{"tags-changed":e.onItemTagChange},model:{value:e.itemTag,callback:function(t){e.itemTag=t},expression:"itemTag"}})],1),e._v(" "),"rich"===e.descriptionType?n("div",[n("h5",{staticClass:"section"},[e._v("Description")]),e._v(" "),n("div",{staticClass:"textarea-wrapper"},[n("rich-text-editor",{attrs:{value:e.item.description},on:{changed:function(t){e.item.description=arguments[0],e.commitSchemeChange("description")}}})],1)]):e._e()])}),[],!1,null,null,null).exports;function xd(e){if(e%1==0)return""+e;let t="";return t=Math.floor(Math.abs(e))>0?""+uh.Z.roundPrecise(e,3):""+uh.Z.roundPrecise(e,4),t}const bd={props:{value:[Number,String,Object],format:{type:String,default:"float"},name:{type:String,default:null},icon:{type:String,default:null},min:{type:Number,default:null},max:{type:Number,default:null},disabled:{type:Boolean,default:!1},incrementSpeed:{type:Number,default:1},incrementMaxSpeed:{type:Number,default:50},incrementAcceleration:{type:Number,default:.15}},mounted(){this.$refs.label&&(this.paddingLeft=this.$refs.label.getBoundingClientRect().width),this.$refs.icon&&(this.paddingLeft=this.$refs.icon.getBoundingClientRect().width)},beforeDestroy(){document.body.removeEventListener("mouseup",this.onMouseUp)},data(){return{text:xd(this.value),number:this.value,paddingLeft:4,autoIncrementDelayTimeoutId:-1,autoIncrementDirection:1,autoIncrementInitDelay:300,autoIncrementDelay:50,autoIncrementIntervalId:-1,autoIncrementSpeed:this.incrementSpeed,autoIncrementMaxSpeed:this.incrementMaxSpeed,autoIncrementAcceleration:this.incrementAcceleration,isUserTyping:!0}},methods:{textToFloat(e){const t=parseFloat(e.replace(/[^\d.-]/g,""));return isFinite(t)?t:0},textToInt(e){const t=parseInt(e.replace(/[^\d-]/g,""));return isFinite(t)?t:0},textToNumber(e){return e=""+e,"float"===this.format?this.textToFloat(e):this.textToInt(e)},onUserInput(e){const t=e.target.value;this.number=this.enforceLimits(this.textToNumber(t)),this.isUserTyping=!0,this.$emit("changed",this.number)},onStepClicked(e){if(this.disabled)return;let t=this.textToNumber(this.text);t+=e,this.number=this.enforceLimits(t),this.$emit("changed",this.number),this.text=""+this.number},enforceLimits(e){return null!==this.min&&e<this.min?this.min:null!==this.max&&e>this.max?this.max:e},onMouseDownIncrement(e){this.onMouseDown(e,1)},onMouseDownDecrement(e){this.onMouseDown(e,-1)},onMouseDown(e,t){this.autoIncrementDirection=t,this.autoIncrementDelayTimeoutId&&clearTimeout(this.autoIncrementDelayTimeoutId),this.autoIncrementDelayTimeoutId=setTimeout((()=>{this.initAutoIncrement()}),this.autoIncrementInitDelay),document.body.addEventListener("mouseup",this.onMouseUp)},onMouseUp(){document.body.removeEventListener("mouseup",this.onMouseUp),this.autoIncrementIntervalId&&(clearInterval(this.autoIncrementIntervalId),this.autoIncrementIntervalId=-1),this.autoIncrementDelayTimeoutId&&(clearTimeout(this.autoIncrementDelayTimeoutId),this.autoIncrementDelayTimeoutId=-1)},initAutoIncrement(){this.autoIncrementSpeed=this.incrementSpeed,this.number=this.textToNumber(this.text),this.autoIncrementIntervalId=setInterval((()=>{this.number=this.enforceLimits(this.number+this.autoIncrementDirection*Math.floor(this.autoIncrementSpeed)),this.text=""+this.number,this.$emit("changed",this.number),this.autoIncrementSpeed<this.autoIncrementMaxSpeed&&(this.autoIncrementSpeed+=this.autoIncrementAcceleration)}),this.autoIncrementDelay)}},watch:{value(e){this.isUserTyping?this.isUserTyping=!1:this.text=xd(e)}}},wd=(0,Le.Z)(bd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"number-textfield-container",class:{disabled:e.disabled}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"}],style:{"padding-left":e.paddingLeft+"px"},attrs:{type:"text",disabled:e.disabled},domProps:{value:e.text},on:{input:[function(t){t.target.composing||(e.text=t.target.value)},e.onUserInput]}}),e._v(" "),e.name?n("div",{ref:"label",staticClass:"label"},[e._v(e._s(e.name))]):e._e(),e._v(" "),!e.name&&e.icon?n("div",{ref:"icon",staticClass:"label"},[n("i",{class:e.icon})]):e._e(),e._v(" "),n("ul",{staticClass:"step-controls"},[n("li",[n("span",{staticClass:"step step-up",on:{click:function(t){return e.onStepClicked(1)},mousedown:e.onMouseDownIncrement}},[n("i",{staticClass:"fas fa-caret-up"})])]),e._v(" "),n("li",[n("span",{staticClass:"step step-down",on:{click:function(t){return e.onStepClicked(-1)},mousedown:e.onMouseDownDecrement}},[n("i",{staticClass:"fas fa-caret-down"})])])])])}),[],!1,null,null,null).exports,Cd={props:["item","editBox"],components:{Panel:dd,NumberTextfield:wd},beforeMount(){_h.Z.$on(_h.Z.MULTI_ITEM_EDIT_BOX_ITEMS_UPDATED,this.onEditBoxChange),_h.Z.$on(_h.Z.MULTI_ITEM_EDIT_BOX_AREA_UPDATED,this.onEditBoxChange)},beforeDestroy(){_h.Z.$off(_h.Z.MULTI_ITEM_EDIT_BOX_ITEMS_UPDATED,this.onEditBoxChange),_h.Z.$off(_h.Z.MULTI_ITEM_EDIT_BOX_AREA_UPDATED,this.onEditBoxChange)},data(){const e=this.editBox.items[0].area.sx,t=this.editBox.items[0].area.sy;return{x:this.editBox.area.x,y:this.editBox.area.y,w:this.editBox.area.w,h:this.editBox.area.h,r:this.editBox.area.r,isSingleItem:1===this.editBox.items.length,sx:e,sy:t,scaleLocked:e===t}},methods:{toggleItemLock(){this.editBox.locked=!this.editBox.locked,ze()(this.editBox.items,(e=>{e.locked=this.editBox.locked}))},onEditBoxChange(){this.x=this.editBox.area.x,this.y=this.editBox.area.y,this.w=this.editBox.area.w,this.h=this.editBox.area.h,this.r=this.editBox.area.r},updateAreaProperty(e,t){this.$emit("area-changed",e,t)},updateScaleX(e){this.sx=e,this.scaleLocked&&(this.sy=this.sx),this.$emit("scale-changed",this.sx,this.sy)},updateScaleY(e){this.sy=e,this.$emit("scale-changed",this.sx,this.sy)}},computed:{scaleNameX(){return this.scaleLocked?"Scale":"Scale X"}}},_d=(0,Le.Z)(Cd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("panel",{attrs:{name:"Position"}},[n("ul",{staticClass:"button-group"},[n("li",[n("span",{staticClass:"toggle-button",class:{toggled:e.editBox.locked},attrs:{title:e.editBox.locked?"Unlock item":"Lock item"},on:{click:function(t){return e.toggleItemLock()}}},[n("i",{staticClass:"fas",class:[e.editBox.locked?"fa-lock":"fa-unlock"]})])])]),e._v(" "),n("table",[n("tbody",[n("tr",[n("td",[n("number-textfield",{attrs:{value:e.x,name:"x"},on:{changed:function(t){return e.updateAreaProperty("x",arguments[0])}}})],1),e._v(" "),n("td",[n("number-textfield",{attrs:{value:e.w,name:"w"},on:{changed:function(t){return e.updateAreaProperty("w",arguments[0])}}})],1)]),e._v(" "),n("tr",[n("td",[n("number-textfield",{attrs:{value:e.y,name:"y"},on:{changed:function(t){return e.updateAreaProperty("y",arguments[0])}}})],1),e._v(" "),n("td",[n("number-textfield",{attrs:{value:e.h,name:"h"},on:{changed:function(t){return e.updateAreaProperty("h",arguments[0])}}})],1)]),e._v(" "),n("tr",[n("td",[n("number-textfield",{attrs:{value:e.r,icon:"fas fa-sync-alt"},on:{changed:function(t){return e.updateAreaProperty("r",arguments[0])}}})],1),e._v(" "),n("td")])])]),e._v(" "),e.isSingleItem?n("table",[n("tbody",[n("tr",[n("td",[n("number-textfield",{attrs:{value:e.sx,name:e.scaleNameX},on:{changed:function(t){return e.updateScaleX(arguments[0])}}})],1),e._v(" "),n("td",[n("span",{staticClass:"toggle-button",class:{toggled:e.scaleLocked},on:{click:function(t){e.scaleLocked=!e.scaleLocked}}},[n("i",{staticClass:"fas fa-lock"})])]),e._v(" "),n("td",[n("number-textfield",{attrs:{value:e.sy,name:"Scale Y",disabled:e.scaleLocked},on:{changed:function(t){return e.updateScaleY(arguments[0])}}})],1)])])]):e._e()])}),[],!1,null,null,null).exports,Ad={props:{currentPage:{type:Number,default:1},totalPages:{type:Number,default:1},urlPrefix:{type:String,default:null},useRouter:{type:Boolean,default:!1}},data(){let e=this.urlPrefix;return e&&(e.indexOf("?")>0?e+="&":e+="?",e+="page="),{pages:this.buildPages(this.currentPage,this.totalPages),pageUrlPrefix:e}},methods:{urlForPage(e){return this.urlPrefix?this.pageUrlPrefix+e:"#"},onNonRoutablePageClicked(e){return this.$emit("page-clicked",e),!1},buildPages(e,t){let n=[],i=(e=Math.min(e,t))-2,r=e+2;i<1?r+=1-i:r>t&&(i-=r-t),i=Math.max(1,i),r=Math.min(t,r),i>1&&n.push({page:"1",active:!0}),i>2&&n.push({page:"...",active:!1});for(let t=i;t<=r;t++)n.push({page:t,active:t!==e});return r<t-1&&n.push({page:"...",active:!1}),n}}},Sd={components:{Modal:Xe,Pagination:(0,Le.Z)(Ad,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pagination-container"},[e.pages.length>1?n("ul",{staticClass:"pagination"},[n("li",[e.currentPage>1?n("span",[e.useRouter?n("router-link",{attrs:{to:{path:e.urlForPage(e.currentPage-1)}}},[n("i",{staticClass:"fas fa-chevron-circle-left"})]):n("a",{attrs:{href:"#"},on:{click:function(t){return e.onNonRoutablePageClicked(e.currentPage-1)}}},[n("i",{staticClass:"fas fa-chevron-circle-left"})])],1):n("span",[n("i",{staticClass:"fas fa-chevron-circle-left"})])]),e._v(" "),e._l(e.pages,(function(t){return n("li",[t.active?n("span",[e.useRouter?n("router-link",{attrs:{to:{path:e.urlForPage(t.page)}}},[e._v(e._s(t.page))]):n("a",{class:{current:e.currentPage===t.page},attrs:{href:"#"},on:{click:function(n){return e.onNonRoutablePageClicked(t.page)}}},[e._v(e._s(t.page))])],1):n("span",[e._v(e._s(t.page))])])})),e._v(" "),n("li",[e.currentPage<e.totalPages?n("span",[e.useRouter?n("router-link",{attrs:{to:{path:e.urlForPage(e.currentPage+1)}}},[n("i",{staticClass:"fas fa-chevron-circle-right"})]):n("a",{attrs:{href:"#"},on:{click:function(t){return e.onNonRoutablePageClicked(e.currentPage+1)}}},[n("i",{staticClass:"fas fa-chevron-circle-right"})])],1):n("span",[n("i",{staticClass:"fas fa-chevron-circle-right"})])])],2):e._e()])}),[],!1,null,null,null).exports},mounted(){this.reloadSchemes()},data:()=>({query:"",currentPage:1,totalPages:0,searchResult:null,searchTimerId:null,resultsPerPage:20,isLoading:!1,nextPageToken:null,errorMessage:null}),methods:{selectSearchPage(e){this.currentPage=e,this.reloadSchemes(e)},onSchemeSelect(e){this.$emit("selected-scheme",e)},reloadSchemes(e){this.isLoading=!0;const t={query:this.query,limit:this.resultsPerPage};e&&(t.page=e),this.$store.state.apiClient.findSchemes(t).then((e=>{this.errorMessage=null,this.isLoading=!1,this.searchResult=e,this.totalPages=e.totalPages,"chunk"===e.kind&&(this.nextPageToken=e.nextPageToken)})).catch((e=>{console.error(e),this.isLoading=!1,this.errorMessage="Something went wrong, failed to search diagrams"}))},loadNextPage(){this.isLoading=!0;const e={query:this.query,limit:this.resultsPerPage};e.nextPageToken=this.nextPageToken,this.$store.state.apiClient.findSchemes(e).then((e=>{this.errorMessage=null,this.isLoading=!1,this.searchResult.results=this.searchResult.results.concat(e.results),this.nextPageToken=e.nextPageToken})).catch((e=>{console.error(e),this.isLoading=!1,this.errorMessage="Something went wrong, failed to search diagrams"}))}},watch:{query(e){this.searchTimerId||(this.searchTimerId=setTimeout((()=>{this.searchTimerId=null,this.reloadSchemes(0)}),500))}}},kd=(0,Le.Z)(Sd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{title:"Search Diagrams",height:600},on:{close:function(t){return e.$emit("close")}}},[n("div",{staticStyle:{position:"relative","margin-bottom":"5px"}},[e.isLoading?n("div",{staticClass:"loader"},[n("div",{staticClass:"loader-element"})]):e._e()]),e._v(" "),n("h5",[e._v("Name")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],staticClass:"textfield",attrs:{type:"text"},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),e.errorMessage?n("div",{staticClass:"msg msg-error"},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),e.searchResult?n("div",{staticStyle:{height:"300px",overflow:"scroll"}},[n("pagination",{key:e.currentPage+"-"+e.totalPages,attrs:{"current-page":e.currentPage,"total-pages":e.totalPages},on:{"page-clicked":e.selectSearchPage}}),e._v(" "),n("table",{staticClass:"scheme-search-results"},[n("tbody",e._l(e.searchResult.results,(function(t){return n("tr",{staticClass:"scheme-row",on:{click:function(n){return e.onSchemeSelect(t)}}},[n("td",{staticClass:"scheme-icon"},[t.previewURL?n("img",{staticClass:"scheme-preview",attrs:{src:t.previewURL+"?v="+t.modifiedTime}}):n("i",{staticClass:"icon far fa-file fa-2x"})]),e._v(" "),n("td",{staticClass:"scheme-title"},[e._v(e._s(t.name))])])})),0)]),e._v(" "),e.nextPageToken&&!e.isLoading?n("p",{staticStyle:{"text-align":"center"}},[n("span",{staticClass:"btn btn-primary",on:{click:e.loadNextPage}},[e._v("Load more")])]):e._e()],1):e._e()])}),[],!1,null,null,null).exports,Id={props:["edit","title","url","type"],components:{Modal:Xe,SchemeSearchModal:kd},data(){return{popupTitle:this.edit?"Edit Link":"Create Link",submitTitle:this.edit?"Update":"Create",editTitle:this.title,editUrl:this.url,editType:this.type&&this.type.length>0?this.type:"default",knownTypes:Rh.Z.knownTypes,showSchemeSearchModal:!1}},methods:{submitLink(){this.$emit("submit-link",{title:this.editTitle,url:this.editUrl,type:this.editType}),this.$emit("close")},toggleSchemeSearch(){this.showSchemeSearchModal=!0},onSchemeSelect(e){this.editType="doc",this.editUrl=e.publicLink,this.editTitle||(this.editTitle=e.name),this.showSchemeSearchModal=!1}}},Pd=(0,Le.Z)(Id,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{title:e.popupTitle,"primary-button":e.submitTitle},on:{"primary-submit":function(t){return e.submitLink()},close:function(t){return e.$emit("close")}}},[n("h5",[e._v("Title")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model:value",value:e.editTitle,expression:"editTitle",arg:"value"}],staticClass:"textfield",attrs:{type:"text"},domProps:{value:e.editTitle},on:{input:function(t){t.target.composing||(e.editTitle=t.target.value)}}}),e._v(" "),n("h5",[e._v("Type")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.editType,expression:"editType"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.editType=t.target.multiple?n:n[0]}}},e._l(e.knownTypes,(function(t){return n("option",[e._v(e._s(t.name))])})),0),e._v(" "),n("h5",[e._v("URL")]),e._v(" "),"doc"===e.editType?n("div",{staticClass:"scheme-ref-control"},[n("input",{directives:[{name:"model",rawName:"v-model:value",value:e.editUrl,expression:"editUrl",arg:"value"}],staticClass:"textfield",attrs:{type:"text"},domProps:{value:e.editUrl},on:{input:function(t){t.target.composing||(e.editUrl=t.target.value)}}}),e._v(" "),n("span",{staticClass:"btn btn-secondary",on:{click:e.toggleSchemeSearch}},[n("i",{staticClass:"fas fa-search"})])]):n("div",[n("input",{directives:[{name:"model",rawName:"v-model:value",value:e.editUrl,expression:"editUrl",arg:"value"}],staticClass:"textfield",attrs:{type:"text"},domProps:{value:e.editUrl},on:{input:function(t){t.target.composing||(e.editUrl=t.target.value)}}})]),e._v(" "),e.showSchemeSearchModal?n("scheme-search-modal",{on:{close:function(t){e.showSchemeSearchModal=!1},"selected-scheme":e.onSchemeSelect}}):e._e()],1)}),[],!1,null,null,null).exports,Ed={props:["item"],components:{Panel:dd,LinkEditPopup:Pd},data:()=>({editLinkData:null}),methods:{getLinkCssClass:e=>Rh.Z.findTypeByNameOrDefault(e.type).cssClass,addLink(){this.editLinkData={linkId:-1,edit:!1,title:"",url:"",type:""}},deleteLink(e){this.item.links.splice(e,1),_h.Z.emitSchemeChangeCommited()},editLink(e,t){this.editLinkData={linkId:e,edit:!0,title:t.title,url:t.url,type:t.type}},onLinkSubmit(e){this.editLinkData.linkId>=0?(this.item.links[this.editLinkData.linkId].title=e.title,this.item.links[this.editLinkData.linkId].url=e.url,this.item.links[this.editLinkData.linkId].type=e.type,_h.Z.emitSchemeChangeCommited(`item.${this.item.id}.links.${this.editLinkData.linkId}`)):(this.item.links||(this.item.links=[]),this.item.links.push({id:ec().generate(),title:e.title,url:e.url,type:e.type}),_h.Z.emitSchemeChangeCommited())}},filters:{formatLinkTitle:e=>e.title?e.title:e.url}},Td=(0,Le.Z)(Ed,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("panel",{attrs:{name:"Links"}},[e.item.links&&0!==e.item.links.length?e._e():n("div",[e._v("There are no links")]),e._v(" "),n("ul",{staticClass:"links"},e._l(e.item.links,(function(t,i){return n("li",[n("a",{staticClass:"link",attrs:{href:t.url,target:"_blank"}},[n("i",{class:e.getLinkCssClass(t)}),e._v("\n                "+e._s(e._f("formatLinkTitle")(t))+"\n            ")]),e._v(" "),n("span",{staticClass:"link edit-link",on:{click:function(n){return e.editLink(i,t)}}},[n("i",{staticClass:"fas fa-pen-square"})]),e._v(" "),n("span",{staticClass:"link delete-link",on:{click:function(t){return e.deleteLink(i)}}},[n("i",{staticClass:"fas fa-times"})])])})),0),e._v(" "),n("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.addLink()}}},[n("i",{staticClass:"fas fa-link"}),e._v(" Add")]),e._v(" "),e.editLinkData?n("link-edit-popup",{attrs:{edit:e.editLinkData.edit,title:e.editLinkData.title,url:e.editLinkData.url,type:e.editLinkData.type},on:{"submit-link":e.onLinkSubmit,close:function(t){e.editLinkData=null}}}):e._e()],1)}),[],!1,null,null,null).exports;var Md=n(4023),Od=n.n(Md);const Dd={props:{color:{type:String,default:"rgba(0,0,0,1.0)"},width:{type:String,default:"100%"},height:{type:String,default:"26px"},hollow:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hint:{type:String,default:""}},components:{"color-picker":Od().Sketch},data(){return{pickerColor:this.color,vuePickerColor:{hex:this.color},showColorPicker:!1,tooltip:{shown:!1,x:0,y:0},clickAwayRegistered:!1,oldColor:null,oldAlpha:1}},methods:{toggleColorPicker(){this.disabled||(this.oldColor=this.color,this.vuePickerColor={hex:this.color},this.tooltip.shown=!0,this.registerClickAwayHandler(),this.$nextTick((()=>{this.readjustTooltipPosition()})))},updateColor(e){this.pickerColor=e.hex,this.$emit("input",`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${e.rgba.a})`)},readjustTooltipPosition(){const e=this.$refs.tooltip,t=this.$refs.toggleButton;if(!e||!t)return;const n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),r=window.innerWidth,s=window.innerHeight;i.left<r/2?this.tooltip.x=i.right:this.tooltip.x=i.left-n.width,i.top<s/2?this.tooltip.y=i.top:this.tooltip.y=i.bottom-n.height},registerClickAwayHandler(){this.clickAwayRegistered||(document.body.addEventListener("click",this.onGlobalClick),this.clickAwayRegistered=!0)},onGlobalClick(e){e.target&&e.target.closest(".color-picker")||this.closeTooltip()},closeTooltip(){this.tooltip.shown=!1,this.clickAwayRegistered&&(document.body.removeEventListener("click",this.onGlobalClick),this.clickAwayRegistered=!1)}},watch:{color(e){this.pickerColor=e,this.vuePickerColor.hex=e,this.$forceUpdate()}},computed:{cssStyle(){return this.hollow?{background:"none",border:`2px solid ${this.pickerColor}`}:{background:this.pickerColor,border:`2px solid ${this.pickerColor}`}}}},$d=(0,Le.Z)(Dd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"color-picker",style:{width:e.width,height:e.height},attrs:{title:e.hint}},[n("div",{ref:"toggleButton",staticClass:"color-picker-toggle-button",class:{disabled:e.disabled}},[n("span",{staticClass:"color-picker-toggle-button-background"}),e._v(" "),n("span",{staticClass:"color-picker-toggle-button-fill",style:e.cssStyle,on:{click:function(t){return e.toggleColorPicker()}}})]),e._v(" "),e.tooltip.shown?n("div",{ref:"tooltip",staticClass:"color-picker-tooltip",style:{left:e.tooltip.x+"px",top:e.tooltip.y+"px"}},[n("color-picker",{on:{input:e.updateColor},model:{value:e.vuePickerColor,callback:function(t){e.vuePickerColor=t},expression:"vuePickerColor"}})],1):e._e()])}),[],!1,null,null,null).exports;var Bd=n(2628),Ld=n.n(Bd),Nd=n(9734),Rd=n.n(Nd),Fd=n(4908),Zd=n.n(Fd),jd=n(6703);const zd={props:{element:{type:String,default:null},selfItem:{type:Object,default:null},schemeContainer:{type:Object},useSelf:{type:Boolean,default:!0},noneLabel:{type:String,default:"None"},allowNone:{type:Boolean,default:!1},allowTags:{type:Boolean,default:!0},excludedItemIds:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},borderless:{type:Boolean,default:!1}},components:{Dropdown:bh},mounted(){_h.Z.$on(_h.Z.ELEMENT_PICKED,this.onElementPickedFromState)},beforeDestroy(){_h.Z.emitElementPickCanceled(),_h.Z.$off(_h.Z.ELEMENT_PICKED,this.onElementPickedFromState)},data(){return{allOptions:this.collectAllOptions()}},methods:{collectAllOptions(){const e=[];return this.allowNone&&e.push({iconClass:"",name:"None",id:"none",type:"none"}),this.useSelf&&e.push({iconClass:"fas fa-cube",name:"self",id:"self",type:"item"}),ze()(this.schemeContainer.getItems(),(t=>{let n=!0;this.excludedItemIds&&this.excludedItemIds.length>0&&(n=od()(this.excludedItemIds,t.id)<0),n&&e.push({iconClass:"fas fa-cube",name:t.name,id:t.id,type:"item"})})),this.allowTags&&ze()(this.schemeContainer.itemTags,(t=>{e.push({iconClass:"fas fa-cubes",name:t,id:t,type:"item-tag"})})),e},onElementSelected(e){"self"===e.id?this.$emit("selected","self"):"item"===e.type?this.$emit("selected",`#${e.id}`):"item-tag"===e.type?this.$emit("selected",`tag: ${e.id}`):"none"===e.type?this.$emit("selected",null):console.error(e.type+" is not supported")},onDropdownToggled(){_h.Z.emitElementPickRequested((e=>{this.$emit("selected",e)}))},onDropdownHidden(){_h.Z.emitElementPickCanceled()}},computed:{enrichedElement(){if(!this.element)return{name:this.noneLabel,type:"none",iconClass:""};if(this.element.startsWith("tag:"))return{name:this.element.substr(5).trim(),type:"item-tag",iconClass:"fas fa-cubes"};if("self"===this.element)return{name:"self",iconClass:"fas fa-cube",type:"item"};const e=this.schemeContainer.findFirstElementBySelector(this.element,this.selfItem);return e?{name:e.name||e.id,iconClass:"fas fa-cube",type:"item"}:{name:"no item",type:"error",iconClass:"fas fa-exclamation-triangle"}}},filters:{toShortName:e=>e.length>20?e.substr(0,19)+"":e}},Ud=(0,Le.Z)(zd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"element-picker",class:{disabled:e.disabled}},[n("dropdown",{attrs:{options:e.allOptions,disabled:e.disabled,inline:e.inline,borderless:e.borderless},on:{selected:e.onElementSelected,"dropdown-toggled":e.onDropdownToggled,"dropdown-hidden":e.onDropdownHidden}},[n("div",{staticClass:"picked-element",class:["picked-element-type-"+e.enrichedElement.type,e.disabled?"disabled":""]},[n("i",{class:e.enrichedElement.iconClass}),e._v(" "),n("span",{staticClass:"element-name"},[e._v(e._s(e._f("toShortName")(e.enrichedElement.name)))])])])],1)}),[],!1,null,null,null).exports;var Hd=n(6012);const Vd={props:{value:{type:Object,required:!0},width:{type:String,default:"100%"},height:{type:String,default:"26px"},disabled:{type:Boolean,default:!1}},components:{"color-picker":Od().Sketch,Modal:Xe,NumberTextfield:wd},beforeMount(){this.updateCurrentColor(this.value)},mounted(){document.body.addEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp)},beforeDestroy(){document.body.removeEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp)},data(){return{id:ec().generate(),revision:0,colorTypes:["none","solid","image","gradient"],color:Uc.Z.clone(this.value),modal:{shown:!1,pickerColor:{hex:this.value.color||"#fff"},image:{path:this.value.image||""}},gradient:{selectedSliderIdx:0,isDragging:!1,selectedColor:{hex:"#fff"},originalClickPoint:{x:0},originalKnobPosition:0},gradientPreview:"",isUploading:!1,uploadErrorMessage:null}},watch:{value(e){this.updateCurrentColor(e)}},methods:{showModal(){this.disabled||(this.modal.shown=!0)},updateCurrentColor(e){"gradient"===e.type&&(this.gradient.selectedColor.hex=e.gradient.colors[this.gradient.selectedSliderIdx].c,this.gradientPreview=this.computeGradientPreview(e.gradient)),this.color=Uc.Z.clone(e),this.modal.pickerColor={hex:e.color||"#fff"},"image"===this.color.type&&(this.modal.image.path=this.color.image),this.image={path:e.image||""}},onImageStretchChange(e){this.color.stretch=e.target.checked,this.emitChange()},emitChange(){this.$emit("changed",Uc.Z.clone(this.color))},updateSolidColor(e){this.color.color=`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${e.rgba.a})`,this.emitChange()},selectColorType(e){if(this.color.type=e,"image"!==e||this.color.image||(this.color.image="",this.color.stretch=!1),"solid"!==e||this.color.color||(this.color.color="rgba(255,255,255,1.0)"),"gradient"===e&&!this.color.gradient){let e="rgba(0,0,0,1.0)",t="rgba(255,255,255,1.0)";this.color.color&&(e=this.color.color,t=this.color.color),this.color.gradient={colors:[{c:e,p:0},{c:t,p:100}],type:"linear",direction:0},this.gradientPreview=this.computeGradientPreview(this.color.gradient)}this.emitChange()},onImagePathChange(e){this.color.image=e.target.value,this.emitChange()},onImageUpload(e){if(!this.$store.state.apiClient||!this.$store.state.apiClient.uploadFile)return;const t=e.target.files[0];t&&(this.isUploading=!0,this.uploadErrorMessage=null,this.$store.state.apiClient.uploadFile(t).then((e=>{this.isUploading=!1,this.color.image=e,this.modal.image.path=e,this.emitChange()})).catch((e=>{this.isUploading=!1,this.uploadErrorMessage="Failed to upload image",e.data&&e.data.message&&Jl.addErrorSystemMessage(this.$store,e.data.message)})))},onMouseUp(e){this.gradient.isDragging&&"gradient"===this.color.type&&(this.gradient.isDragging=!1,this.color.gradient.colors.sort(((e,t)=>e.p-t.p)))},onMouseMove(e){if(this.gradient.isDragging){if(0===e.buttons)return void(this.gradient.isDragging=!1);const t=e.clientX,n=this.$refs.gradientSliderContainer.getBoundingClientRect();let i=0;i=t<n.left?0:t>n.right?100:Math.round(1e4*(t-n.left)/n.width)/100,this.color.gradient.colors[this.gradient.selectedSliderIdx].p=i,this.gradientPreview=this.computeGradientPreview(this.color.gradient),this.$forceUpdate(),this.emitChange()}},onGradientContainerDblClick(e){const t=e.clientX,n=this.$refs.gradientSliderContainer.getBoundingClientRect();if(t<n.left||t>n.right)return;const i=Math.round(1e4*(t-n.left)/n.width)/100;this.color.gradient.colors.sort(((e,t)=>e.p-t.p));let r=0,s=!1;for(let e=0;e<this.color.gradient.colors.length&&!s;e++)i>this.color.gradient.colors[e].p?r=e+1:(r=e,s=!0);this.color.gradient.colors.splice(r,0,{c:"rgba(0,0,0,1.0)",p:i}),0===r&&this.color.gradient.colors.length>1?this.color.gradient.colors[0].c=this.color.gradient.colors[1].c:r===this.color.gradient.colors.length-1&&this.color.gradient.colors.length>1?this.color.gradient.colors[r].c=this.color.gradient.colors[r-1].c:this.color.gradient.colors.length>2&&(this.color.gradient.colors[r].c=function(e,t,n){let i=n.p-t.p;if(Math.abs(i)<.001)return t.c;let r=Math.max(0,Math.min((e.p-t.p)/i,1));const s=(0,Hd.l)(t.c),o=(0,Hd.l)(n.c),a=Math.max(0,Math.min(Math.round(s.r*(1-r)+o.r*r),255)),l=Math.max(0,Math.min(Math.round(s.g*(1-r)+o.g*r),255)),c=Math.max(0,Math.min(Math.round(s.b*(1-r)+o.b*r),255)),h=Math.max(0,Math.min(Math.round(s.a*(1-r)+o.a*r),1));return(0,Hd.N)({r:a,g:l,b:c,a:h})}(this.color.gradient.colors[r],this.color.gradient.colors[r-1],this.color.gradient.colors[r+1])),this.gradient.selectedSliderIdx=r,this.gradient.selectedColor.hex=this.color.gradient.colors[r].c,this.revision+=1,this.gradient.isDragging=!1,this.gradientPreview=this.computeGradientPreview(this.color.gradient),this.emitChange()},onGradientSliderKnobClick(e,t){this.gradient.isDragging=!0,this.gradient.originalClickPoint.x=t.clientX,this.gradient.selectedColor.hex=this.color.gradient.colors[e].c,this.gradient.selectedSliderIdx=e,this.gradient.originalKnobPosition=this.color.gradient.colors[e].p},onGradientSliderKnobDblClick(e){this.color.gradient.colors.length>2&&(this.color.gradient.colors.splice(e,1),e>0&&(e-=1),this.color.gradient.selectedColor=this.color.gradient.colors[e].c,this.revision+=1,this.gradientPreview=this.computeGradientPreview(this.color.gradient),this.emitChange())},updateGradientSliderColor(e){this.color.gradient.colors[this.gradient.selectedSliderIdx].c=`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${e.rgba.a})`,this.gradientPreview=this.computeGradientPreview(this.color.gradient),this.emitChange()},invertGradient(){this.color.gradient.colors.reverse();for(let e=0;e<this.color.gradient.colors.length;e++)this.color.gradient.colors[e].p=uh.Z.clamp(100-this.color.gradient.colors[e].p,0,100);this.gradientPreview=this.computeGradientPreview(this.color.gradient),this.emitChange()},computeGradientPreview(e){let t="linear-gradient(90deg, ",n=e.colors,i=!1;for(let e=0;e<n.length-1;e++)n[e].p>n[e+1].p&&(i=!0);i&&(n=e.colors.slice(),n.sort(((e,t)=>e.p-t.p)));for(let e=0;e<n.length;e++)e>0&&(t+=", "),t+=`${n[e].c} ${n[e].p}%`;return t+=")",t}},computed:{isUploadEnabled(){return this.$store.state.apiClient&&this.$store.state.apiClient.uploadFile}}},qd=Vd,Gd=(0,Le.Z)(qd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"advanced-color-editor",class:{disabled:e.disabled},style:{width:e.width,height:e.height}},[e.color.type&&"none"!==e.color.type?e._e():n("span",{staticClass:"none-picker-toggle-button",on:{click:function(t){return e.showModal()}}}),e._v(" "),"solid"===e.color.type?n("span",{staticClass:"color-picker-toggle-button",style:{background:e.color.color},on:{click:function(t){return e.showModal()}}}):e._e(),e._v(" "),"image"===e.color.type?n("div",{staticClass:"image-container",on:{click:function(t){return e.showModal()}}},[n("img",{attrs:{src:e.color.image}})]):e._e(),e._v(" "),"gradient"===e.color.type?n("div",{staticClass:"gradient-container",style:{background:e.gradientPreview},on:{click:function(t){return e.showModal()}}}):e._e(),e._v(" "),e.modal.shown?n("modal",{attrs:{title:"Color",width:400,"use-mask":!1},on:{close:function(t){e.modal.shown=!1}}},[n("ul",{staticClass:"tabs"},e._l(e.colorTypes,(function(t){return n("li",[n("span",{staticClass:"tab",class:{active:e.color.type===t},on:{click:function(n){return e.selectColorType(t)}}},[e._v("\n                    "+e._s(t)+"\n                ")])])})),0),e._v(" "),n("div",{staticClass:"tabs-body",staticStyle:{"min-height":"320px"}},["none"===e.color.type?n("div",[n("p",[e._v("\n                    This setting disables the fill\n                ")])]):e._e(),e._v(" "),"solid"===e.color.type?n("div",[n("color-picker",{on:{input:e.updateSolidColor},model:{value:e.modal.pickerColor,callback:function(t){e.$set(e.modal,"pickerColor",t)},expression:"modal.pickerColor"}})],1):e._e(),e._v(" "),"image"===e.color.type?n("div",[n("div",{staticClass:"image-control"},[n("input",{staticClass:"textfield",attrs:{placeholder:"Image URL..."},domProps:{value:e.modal.image.path},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onImagePathChange.apply(null,arguments)},blur:e.onImagePathChange}}),e._v(" "),e.isUploadEnabled?n("div",{staticClass:"file-upload-button"},[n("i",{staticClass:"fas fa-file-upload icon"}),e._v(" "),n("input",{attrs:{type:"file",accept:"image/*"},on:{change:e.onImageUpload}})]):e._e()]),e._v(" "),n("div",{staticClass:"ctrl-group"},[n("input",{attrs:{type:"checkbox",id:"image-stretch-"+e.id},domProps:{checked:e.color.stretch},on:{input:e.onImageStretchChange}}),n("label",{attrs:{for:"image-stretch-"+e.id}},[e._v(" Stretch")])]),e._v(" "),e.isUploading?n("div",{staticClass:"msg msg-info"},[n("i",{staticClass:"fas fa-spinner fa-spin"}),e._v(" Uploading...\n                ")]):e._e(),e._v(" "),e.uploadErrorMessage?n("div",{staticClass:"msg msg-error"},[e._v(e._s(e.uploadErrorMessage))]):e._e(),e._v(" "),"image"===e.color.type&&e.color.image?n("img",{staticStyle:{"max-width":"360px","max-height":"360px"},attrs:{src:e.color.image}}):e._e()]):e._e(),e._v(" "),"gradient"===e.color.type?n("div",[n("div",{ref:"gradientSliderContainer",staticClass:"gradient-slider-container text-nonselectable"},[n("div",{staticClass:"gradient-container large",style:{background:e.gradientPreview},on:{dblclick:e.onGradientContainerDblClick}}),e._v(" "),e._l(e.color.gradient.colors,(function(t,i){return n("div",{staticClass:"gradient-slider",style:{left:t.p+"%"}},[n("div",{staticClass:"gradient-slider-knob",class:{selected:i===e.gradient.selectedSliderIdx},style:{background:t.c},on:{mousedown:function(t){return e.onGradientSliderKnobClick(i,arguments[0])},dblclick:function(t){return e.onGradientSliderKnobDblClick(i)}}})])}))],2),e._v(" "),n("div",{staticClass:"gradient-controls"},[n("div",{staticClass:"ctrl-group"},[n("div",{staticClass:"ctrl-label"},[e._v("Gradient Type")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.color.gradient.type,expression:"color.gradient.type"}],on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.color.gradient,"type",t.target.multiple?n:n[0])},e.emitChange]}},[n("option",{attrs:{value:"linear"}},[e._v("Linear")]),e._v(" "),n("option",{attrs:{value:"radial"}},[e._v("Radial")])])]),e._v(" "),"linear"===e.color.gradient.type?n("div",{staticClass:"ctrl-group"},[n("div",{staticClass:"ctrl-label"},[e._v("Direction")]),e._v(" "),n("number-textfield",{attrs:{value:e.color.gradient.direction},on:{changed:function(t){e.color.gradient.direction=arguments[0],e.emitChange()}}})],1):e._e(),e._v(" "),n("div",{staticClass:"ctrl-group"},[n("span",{staticClass:"btn btn-secondary",on:{click:e.invertGradient}},[e._v("Invert")])])]),e._v(" "),n("div",{staticClass:"gradient-color-picker"},[n("color-picker",{key:"gradient-"+e.id+"-"+e.gradient.selectedSliderIdx+"-"+e.revision,attrs:{value:e.gradient.selectedColor},on:{input:e.updateGradientSliderColor}})],1)]):e._e()])]):e._e()],1)}),[],!1,null,null,null).exports,Wd={props:["argumentValue","argumentDescription","args"],components:{Dropdown:bh,ColorPicker:$d,AdvancedColorEditor:Gd,NumberTextfield:wd,Modal:Xe},data(){let e=!1,t=[];return this.argumentDescription&&("stroke-pattern"===this.argumentDescription.type?(e=!0,t=Sh.Z.patterns):"choice"===this.argumentDescription.type&&(e=!0,t=this.argumentDescription.options)),{transitions:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],isChoice:e,choiceOptions:t,argumentType:this.argumentDescription.type,animationEditorShown:!1}},computed:{supportsAnimation(){return"number"===this.argumentDescription.type||"color"===this.argumentDescription.type||"advanced-color"===this.argumentDescription.type}},methods:{emitValue(e){this.$emit("changed",e)},onInputValue(e){this.emitValue(e.target.value)},onCheckboxInput(e){this.emitValue(e.target.checked)}},filters:{toPrettyOptionName:e=>e.name&&e.value?e.name:e}},Kd=(0,Le.Z)(Wd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"set-argument-editor"},[n("div",{staticClass:"set-argument-control"},["string"===e.argumentType||"image"===e.argumentType?n("input",{staticStyle:{width:"100px"},domProps:{value:e.argumentValue},on:{input:e.onInputValue}}):e._e(),e._v(" "),"number"===e.argumentType?n("number-textfield",{attrs:{value:e.argumentValue},on:{changed:e.emitValue}}):e._e(),e._v(" "),"color"===e.argumentType?n("color-picker",{attrs:{height:"18px",color:e.argumentValue},on:{input:e.emitValue}}):e._e(),e._v(" "),"advanced-color"===e.argumentType?n("advanced-color-editor",{attrs:{height:"18px",value:e.argumentValue},on:{changed:e.emitValue}}):e._e(),e._v(" "),"boolean"===e.argumentType?n("input",{attrs:{type:"checkbox"},domProps:{checked:e.argumentValue},on:{input:e.onCheckboxInput}}):e._e(),e._v(" "),e.isChoice?n("select",{domProps:{value:e.argumentValue},on:{input:e.onInputValue}},e._l(e.choiceOptions,(function(t){return n("option",{domProps:{value:t.name&&t.value?t.value:t}},[e._v(e._s(e._f("toPrettyOptionName")(t)))])})),0):e._e()],1),e._v(" "),e.supportsAnimation?n("div",{staticClass:"set-argument-options"},[e.args.animated?n("span",{staticClass:"set-animated",attrs:{title:"Animated"},on:{click:function(t){e.animationEditorShown=!0}}},[n("i",{staticClass:"fa-solid fa-video"})]):n("span",{staticClass:"set-instant",attrs:{title:"Instant"},on:{click:function(t){e.animationEditorShown=!0}}},[n("i",{staticClass:"fa-solid fa-video-slash"})])]):e._e(),e._v(" "),e.animationEditorShown?n("modal",{attrs:{title:"Animation"},on:{close:function(t){e.animationEditorShown=!1}}},[n("div",[n("table",{staticClass:"properties-table"},[n("tbody",[n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Animated")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.args.animated,expression:"args.animated"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.args.animated)?e._i(e.args.animated,null)>-1:e.args.animated},on:{change:function(t){var n=e.args.animated,i=t.target,r=!!i.checked;if(Array.isArray(n)){var s=e._i(n,null);i.checked?s<0&&e.$set(e.args,"animated",n.concat([null])):s>-1&&e.$set(e.args,"animated",n.slice(0,s).concat(n.slice(s+1)))}else e.$set(e.args,"animated",r)}}})])]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Duration")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("number-textfield",{attrs:{disabled:!e.args.animated,value:e.args.animationDuration},on:{changed:function(t){e.args.animationDuration=arguments[0]}}})],1)]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Transition")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.args.transition,expression:"args.transition"}],attrs:{disabled:!e.args.animated},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.args,"transition",t.target.multiple?n:n[0])}}},e._l(e.transitions,(function(t){return n("option",{domProps:{value:t}},[e._v(e._s(t))])})),0)])]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("In Background")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.args.inBackground,expression:"args.inBackground"}],attrs:{type:"checkbox",disabled:!e.args.animated},domProps:{checked:Array.isArray(e.args.inBackground)?e._i(e.args.inBackground,null)>-1:e.args.inBackground},on:{change:function(t){var n=e.args.inBackground,i=t.target,r=!!i.checked;if(Array.isArray(n)){var s=e._i(n,null);i.checked?s<0&&e.$set(e.args,"inBackground",n.concat([null])):s>-1&&e.$set(e.args,"inBackground",n.slice(0,s).concat(n.slice(s+1)))}else e.$set(e.args,"inBackground",r)}}})])])])])]),e._v(" "),"advanced-color"===e.argumentType&&e.args.value&&"gradient"===e.args.value.type?n("div",{staticClass:"msg msg-info"},[e._v("\n            Gradient animation only works when both original gradient and target gradient have same amount of color points\n        ")]):e._e()]):e._e()],1)}),[],!1,null,null,null).exports,Jd={props:{functionDescription:{type:Object,required:!0},args:{type:Object,required:!0},schemeContainer:{type:Object,required:!0},primaryButton:{type:String,default:null},closeName:{type:String,default:"Close"},apiClient:{type:Object,default:null}},components:{Modal:Xe,ColorPicker:$d,ElementPicker:Ud,Tooltip:pd,NumberTextfield:wd,AdvancedColorEditor:Gd},beforeMount(){this.updateArgumentControlDependencies()},data(){const e={};return ze()(this.functionDescription.args,((t,n)=>{this.args.hasOwnProperty(n)?e[n]=this.args[n]:e[n]=t.value})),{argumentValues:e,argumentControlStates:ld()(this.functionDescription.args,(()=>({shown:!0})))}},methods:{updateArgumentControlDependencies(){ze()(this.functionDescription.args,((e,t)=>{if(e.depends){this.argumentControlStates[t]||(this.argumentControlStates[t]={shown:n});let n=!0;ze()(e.depends,((e,t)=>{n=n&&this.argumentValues[t]===e})),this.argumentControlStates[t].shown=n}}))},onValueChange(e,t){this.argumentValues[e]=t,this.emitArgumentChange(e),this.updateArgumentControlDependencies()},emitArgumentChange(e){this.$emit("argument-changed",e,this.argumentValues[e])}}},Yd=(0,Le.Z)(Jd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{title:e.functionDescription.name+" function",primaryButton:e.primaryButton,width:400,"use-mask":!1,closeName:e.closeName},on:{close:function(t){return e.$emit("close")},"primary-submit":function(t){return e.$emit("submit")}}},[e.functionDescription.description?n("div",[n("p",[e._v(e._s(e.functionDescription.description))])]):e._e(),e._v(" "),n("div",{staticStyle:{"max-height":"400px",overflow:"auto"}},[n("table",{staticClass:"properties-table"},e._l(e.functionDescription.args,(function(t,i){return e.argumentControlStates[i]?n("tr",[n("td",{staticClass:"label",class:{disabled:!e.argumentControlStates[i].shown},attrs:{width:"50%"}},[e._v("\n                    "+e._s(t.name)+"\n                    "),t.description?n("tooltip",[e._v(e._s(t.description))]):e._e()],1),e._v(" "),n("td",{staticClass:"value",class:{disabled:!e.argumentControlStates[i].shown},attrs:{width:"50%"}},["string"===t.type||"image"===t.type?n("input",{staticClass:"textfield",attrs:{disabled:!e.argumentControlStates[i].shown},domProps:{value:e.argumentValues[i]},on:{input:function(t){return e.onValueChange(i,arguments[0].target.value)}}}):e._e(),e._v(" "),"number"===t.type?n("number-textfield",{attrs:{value:e.argumentValues[i],disabled:!e.argumentControlStates[i].shown},on:{changed:function(t){return e.onValueChange(i,arguments[0])}}}):e._e(),e._v(" "),"color"===t.type?n("color-picker",{attrs:{color:e.argumentValues[i],disabled:!e.argumentControlStates[i].shown},on:{input:function(t){return e.onValueChange(i,arguments[0])}}}):e._e(),e._v(" "),"advanced-color"===t.type?n("advanced-color-editor",{attrs:{value:e.argumentValues[i],apiClient:e.apiClient,disabled:!e.argumentControlStates[i].shown}}):e._e(),e._v(" "),"boolean"===t.type?n("input",{attrs:{type:"checkbox",disabled:!e.argumentControlStates[i].shown},domProps:{checked:e.argumentValues[i]},on:{input:function(t){return e.onValueChange(i,arguments[0].target.checked)}}}):e._e(),e._v(" "),"choice"===t.type?n("select",{attrs:{disabled:!e.argumentControlStates[i].shown},domProps:{value:e.argumentValues[i]},on:{input:function(t){return e.onValueChange(i,arguments[0].target.value)}}},e._l(t.options,(function(t){return n("option",[e._v(e._s(t))])})),0):e._e(),e._v(" "),"element"===t.type?n("element-picker",{attrs:{"scheme-container":e.schemeContainer,element:e.argumentValues[i],disabled:!e.argumentControlStates[i].shown,"use-self":!1},on:{selected:function(t){return e.onValueChange(i,arguments[0])}}}):e._e()],1)]):e._e()})),0)])])}),[],!1,null,null,null).exports;let Qd=null;function Xd(e){return navigator.clipboard.writeText(e).catch((t=>{Qd=e}))}function eu(){return navigator.clipboard.readText().catch((e=>Qd))}function tu(e,t){return Xd(JSON.stringify({kind:e,data:t}))}function nu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function iu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ru=Rd()(Ld()(zh.Z.standardEvents),(e=>e.name)),su=Ke()(ru,(e=>e.id)),ou=qc("behavior-collapse",400);function au(e){const t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nu(Object(n),!0).forEach((function(t){iu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete t.id,t}function lu(e){return{event:e.event,actions:Ke()(e.actions,au)}}const cu={props:{item:Object,schemeContainer:Object,extended:{type:Boolean,default:!1}},components:{Dropdown:bh,ElementPicker:Ud,SetArgumentEditor:Kd,Panel:dd,FunctionArgumentsEditor:Yd,VueTagsInput:fd()},mounted(){document.body.addEventListener("mouseup",this.onMouseUp)},beforeDestroy(){document.body.removeEventListener("mouseup",this.onMouseUp)},data(){const e=Rd()(Ke()(this.schemeContainer.getItems(),(e=>({id:e.id,name:e.name||"Unnamed"}))),(e=>e.name)),t=Ke()(this.item.behavior.events,this.createBehaviorEventMeta);return ze()(t,((e,t)=>{const n=ou.get(`${this.schemeContainer.scheme.id}/${this.item.id}/${t}`,0);e.collapsed=1===n})),{items:e,eventOptions:this.createEventOptions(),eventMetas:t,functionArgumentsEditor:{shown:!1,functionDescription:null,eventIndex:0,actionIndex:0,args:{}},itemTag:"",existingItemTags:Ke()(this.schemeContainer.itemTags,(e=>({text:e}))),dragging:{action:null,eventIndex:-1,actionIndex:-1,readyToDrop:!1,dropTo:{eventIndex:-1,actionIndex:-1}}}},methods:{createBehaviorEventMeta:e=>({collapsed:!1}),onItemTagsChange(e){this.$emit("item-field-changed","tags",Ke()(e,(e=>e.text)))},toggleBehaviorCollapse(e){this.eventMetas[e].collapsed=!this.eventMetas[e].collapsed,ou.save(`${this.schemeContainer.scheme.id}/${this.item.id}/${e}`,this.eventMetas[e].collapsed?1:0)},moveEventInOrder(e,t){if(t<0||t>=this.item.behavior.events.length)return;let n=this.item.behavior.events[e];this.item.behavior.events[e]=this.item.behavior.events[t],this.item.behavior.events[t]=n,n=this.eventMetas[e],this.eventMetas[e]=this.eventMetas[t],this.eventMetas[t]=n,this.$forceUpdate()},findElement(e){const t=this.schemeContainer.findElementsBySelector(e,this.item);return t.length>0?t[0]:null},createEventOptions(){let e=[];const t=Wl.Z.find(this.item.shape);if(t){const n=t.getEvents(this.item);n.length>500&&(n.length=500),e=ru.concat(Ke()(n,(e=>({id:e.name,name:e.name}))))}return e.push({id:"custom-event",name:"Custom event ..."}),e},createMethodSuggestionsForElement(e){const t=this.findElement(e);if(!t)return[];const n=[];ze()(jd.Z.main,((e,i)=>{if("set"!==i&&"sendEvent"!==i){let r=!0;if(e.supportedShapes){let n=!1;for(let i=0;i<e.supportedShapes.length;i++)if(e.supportedShapes[i]===t.shape){n=!0;break}r=n}r&&n.push({method:i,name:e.name,iconClass:"fas fa-running",description:e.description})}})),ze()(this.collectAllItemCustomEvents(t),(e=>{n.push({method:"custom-event",name:e,event:e,iconClass:"fas fa-running"})})),n.sort(((e,t)=>e.name<t.name?-1:1));const i=[{method:"set",name:"Opacity",fieldPath:"opacity",iconClass:"fas fa-cog"},{method:"set",name:"Self opacity",fieldPath:"selfOpacity",iconClass:"fas fa-cog"}],r=Wl.Z.find(t.shape);return r&&ze()(r.args,((e,t)=>{i.push({method:"set",name:e.name,fieldPath:`shapeProps.${t}`,iconClass:"fas fa-cog"})})),ze()(r.getTextSlots(t),(e=>{ze()(mh.eN,(t=>{i.push({method:"set",name:`Text / ${e.name} / ${t.name}`,fieldPath:`textSlots.${e.name}.${t.field}`,iconClass:"fas fa-cog"})}))})),i.sort(((e,t)=>e.name<t.name?-1:1)),n.concat(i)},collectAllItemCustomEvents(e){if(!e.behavior.events)return[];const t=rc()(e.behavior.events,(e=>!this.isStandardEvent(e.event)));return Zd()(Ke()(t,(e=>e.event)))},isStandardEvent:e=>od()(su,e)>=0,addBehaviorEvent(){this.item.behavior.events||(this.item.behavior.events=[]);const e={id:ec().generate(),event:"clicked",actions:[]};this.item.behavior.events.push(e),this.eventMetas.push(this.createBehaviorEventMeta(e)),this.emitChangeCommited(),this.$forceUpdate()},copyAllEvents(){tu("behavior-events",Ke()(this.item.behavior.events,lu)).then((()=>{Jl.addInfoSystemMessage(this.$store,"Copied all events")}))},copyEvent(e){const t=this.item.behavior.events[e];tu("behavior-events",[lu(t)]).then((()=>{Jl.addInfoSystemMessage(this.$store,`Copied "${t.event}" event`)}))},pasteEvents(){("behavior-events",eu().then((e=>{try{const t=JSON.parse(e);if(t&&"behavior-events"===t.kind&&t.hasOwnProperty("data"))return t.data}catch(e){return null}}))).then((e=>{e&&e.length>0&&(ze()(e,(e=>{e.id=ec().generate(),ze()(e.actions,(e=>{e.id=ec().generate()})),this.item.behavior.events.push(e)})),_h.Z.emitSchemeChangeCommited())}))},removeBehaviorEvent(e){this.item.behavior.events.splice(e,1),this.eventMetas.splice(e,1),this.emitChangeCommited()},onBehaviorEventSelected(e,t){"custom-event"===t.id?(this.item.behavior.events[e].event="Unknown event...",this.$nextTick((()=>{const t=document.getElementById(`custom-event-textfield-${this.item.id}-${e}`);t&&t.focus()}))):this.item.behavior.events[e].event=t.id,this.emitChangeCommited()},addActionToEvent(e){const t=this.item.behavior.events[e];t.actions||(t.actions=[]);let n="self";t.actions.length>0&&(n=t.actions[t.actions.length-1].element),t.actions.push({id:ec().generate(),element:n,method:"show",args:ld()(jd.Z.main.show.args,(e=>e.value))}),this.emitChangeCommited()},removeAction(e,t){this.item.behavior.events[e].actions.splice(t,1),this.emitChangeCommited()},onActionElementSelected(e,t,n){this.item.behavior.events[e].actions[t].element=n,this.emitChangeCommited()},onActionMethodSelected(e,t,n){const i=this.item.behavior.events[e].actions[t];if(i){if("set"===n.method){i.method=n.method;const e={field:n.fieldPath,value:"",animated:!1,animationDuration:.5,transition:"ease-in-out",inBackground:!1},t=this.findElement(i.element);t&&(e.value=Uc.Z.getObjectProperty(t,n.fieldPath)),i.args=e}else"custom-event"===n.method?(i.method="sendEvent",i.args={event:n.event}):(i.method=n.method,i.args=this.getDefaultArgsForMethod(i,n.method));this.emitChangeCommited()}},getDefaultArgsForMethod(e,t){let n=jd.Z.main;if(n[t]){const e=n[t].args;if(e){const t={};return ze()(e,((e,n)=>{t[n]=e.value})),t}}return{}},getArgumentDescriptionForElement(e,t){const n=this.findElement(e);if(n&&n.shape){const e=(0,mh.u2)(Wl.Z.find(n.shape),t);if(e)return e}return{type:"string"}},onArgumentValueChangeForSet(e,t,n){this.item.behavior.events[e].actions[t].args.value=n;const i=this.item.behavior.events[e].actions[t].args.field;this.emitChangeCommited(`${this.item.id}.behavior.events.${e}.actions.${t}.args.${i}`)},duplicateBehavior(e){const t=Uc.Z.clone(this.item.behavior.events[e]);this.item.behavior.events.push(t),this.eventMetas.push(this.createBehaviorEventMeta(t)),this.emitChangeCommited(),this.$forceUpdate()},emitChangeCommited(e){_h.Z.emitItemChanged(this.item.id),_h.Z.emitSchemeChangeCommited(e)},showFunctionArgumentsEditor(e,t,n){let i=jd.Z.main[e.method];i||(i={args:{}}),this.functionArgumentsEditor.functionDescription=i,this.functionArgumentsEditor.args=e.args,this.functionArgumentsEditor.eventIndex=t,this.functionArgumentsEditor.actionIndex=n,this.functionArgumentsEditor.shown=!0},onFunctionArgumentsEditorChange(e,t){const n=this.functionArgumentsEditor.eventIndex,i=this.functionArgumentsEditor.actionIndex;if(n<this.item.behavior.events.length){const r=this.item.behavior.events[n];i<r.actions.length&&(r.actions[i].args[e]=t)}_h.Z.emitSchemeChangeCommited(`items.${this.item.id}.behavior.events.${n}.actions.${i}.args.${e}`)},onActionDragStarted(e,t){let n="Drop here";const i=document.getElementById(`behavior-action-container-${this.item.id}-${e}-${t}`);i&&(n=i.innerHTML),this.dragging.action=n,this.dragging.eventIndex=e,this.dragging.actionIndex=t,this.dragging.dropTo.eventIndex=-1,this.dragging.dropTo.actionIndex=-1},onDragOverToEvent(e){this.dragging.dropTo.eventIndex=e,this.dragging.dropTo.actionIndex=0,this.dragging.readyToDrop=!(this.dragging.eventIndex===e&&0===this.dragging.actionIndex)},onDragOverToAction(e,t,n){this.dragging.dropTo.eventIndex=e,this.dragging.dropTo.actionIndex=t;const i=n.target.closest(".behavior-action-container");if(i){const e=i.getBoundingClientRect(),r=e.top+e.height/2;n.clientY-r>0&&(this.dragging.dropTo.actionIndex=t+1)}let r=!0;this.dragging.eventIndex===this.dragging.dropTo.eventIndex&&(this.dragging.actionIndex!==this.dragging.dropTo.actionIndex&&this.dragging.actionIndex!==this.dragging.dropTo.actionIndex-1||(r=!1)),this.dragging.readyToDrop=r},onMouseUp(){this.dragging.action&&this.$nextTick((()=>{this.resetDragging()}))},onDragEnd(){this.dragging.eventIndex>=0&&this.dragging.actionIndex>=0&&this.dragging.dropTo.eventIndex>=0&&this.dragging.dropTo.actionIndex>=0&&this.moveAction(this.dragging.eventIndex,this.dragging.actionIndex,this.dragging.dropTo.eventIndex,this.dragging.dropTo.actionIndex),this.resetDragging()},resetDragging(){this.dragging.action=null,this.dragging.eventIndex=-1,this.dragging.actionIndex=-1,this.dragging.readyToDrop=!1,this.dragging.dropTo.eventIndex=-1,this.dragging.dropTo.actionIndex=-1},moveAction(e,t,n,i){if(e===n&&t===i)return;const r=this.item.behavior.events[e].actions.splice(t,1)[0];e===n&&i>t&&(i-=1),this.item.behavior.events[n].actions.splice(i,0,r),this.emitChangeCommited()},jumpToElement(e){const t=this.schemeContainer.findFirstElementBySelector(e);t&&this.$emit("jumped-to-item",t)}},filters:{toPrettyEventName:e=>zh.Z.standardEvents[e]?zh.Z.standardEvents[e].name:e,toPrettyMethod:(e,t)=>jd.Z.main[e]?jd.Z.main[e].name:e,toPrettyActionArgs(e){if(jd.Z.main[e.method]){const t=jd.Z.main[e.method];if(t.argsToShortString)return`( ${t.argsToShortString(e.args)} )`}return"(...)"},toPrettyPropertyName(e,t,n,i){if("opacity"===e)return"Opacity";if(0===e.indexOf("shapeProps.")){let r=null;if(r="self"===t?n:i.findFirstElementBySelector(t),r&&r.shape){const t=Wl.Z.find(r.shape),n=e.substr("shapeProps.".length);if(t&&t.args&&t.args.hasOwnProperty(n))return t.args[n].name;if("standard"===t.shapeType&&Wl.Z.standardShapeProps.hasOwnProperty(n))return Wl.Z.standardShapeProps[n].name}}else if(0===e.indexOf("textSlots.")){const t=e.indexOf("."),n=e.indexOf(".",t+1),i=e.substring(t+1,n),r=e.substring(n+1),s=yh()(mh.eN,(e=>e.field===r));if(s)return`Text / ${i} / ${s.name}`}return e}},computed:{filteredItemTagsSuggestions(){return this.existingItemTags.filter((e=>new RegExp(this.itemTag,"i").test(e.text)))},itemTags(){return Ke()(this.item.tags,(e=>({text:e})))}}},hu=cu,du=(0,Le.Z)(hu,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{on:{dragend:e.onDragEnd}},[e.extended?e._e():n("panel",{attrs:{uid:"behavior-tags",name:"Tags"}},[n("vue-tags-input",{attrs:{tags:e.itemTags,"autocomplete-items":e.filteredItemTagsSuggestions},on:{"tags-changed":e.onItemTagsChange},model:{value:e.itemTag,callback:function(t){e.itemTag=t},expression:"itemTag"}})],1),e._v(" "),0===e.item.behavior.events.length?n("div",{staticClass:"hint"},[e._v("There are no events defined for this item yet. Start by adding an event")]):e._e(),e._v(" "),e._l(e.item.behavior.events,(function(t,i){return n("div",{staticClass:"behavior-container",class:{extended:e.extended}},[n("div",{staticClass:"behavior-event",on:{dragover:function(t){return e.onDragOverToEvent(i)}}},[n("div",{staticClass:"behavior-menu"},[n("span",{staticClass:"link icon-collapse",on:{click:function(t){return e.toggleBehaviorCollapse(i)}}},[n("i",{staticClass:"fas",class:[e.eventMetas[i]&&e.eventMetas[i].collapsed?"fa-caret-right":"fa-caret-down"]})])]),e._v(" "),n("dropdown",{attrs:{options:e.eventOptions,"auto-focus-search":e.isStandardEvent(t.event),inline:!0,borderless:!0},on:{selected:function(t){return e.onBehaviorEventSelected(i,arguments[0])}}},[n("span",{staticClass:"icon-event"},[n("i",{staticClass:"fas fa-bell"})]),e._v(" "),e.isStandardEvent(t.event)?n("span",[e._v(e._s(e._f("toPrettyEventName")(t.event)))]):n("input",{staticClass:"custom-event-textfield",attrs:{id:"custom-event-textfield-"+e.item.id+"-"+i,type:"text"},domProps:{value:t.event},on:{input:function(e){t.event=arguments[0].target.value}}})])],1),e._v(" "),e.eventMetas[i]&&e.eventMetas[i].collapsed?e._e():n("div",[0===t.actions.length?n("div",{staticClass:"hint hint-small"},[e._v("This event has no actions yet...")]):e._e(),e._v(" "),!e.dragging.readyToDrop||e.dragging.dropTo.eventIndex!==i||0!==e.dragging.dropTo.actionIndex||t.actions&&0!==t.actions.length?e._e():n("div",{staticClass:"behavior-action-container behavior-drop-highlight",domProps:{innerHTML:e._s(e.dragging.action)}}),e._v(" "),e._l(t.actions,(function(t,r){return n("div",[e.dragging.readyToDrop&&e.dragging.dropTo.eventIndex===i&&e.dragging.dropTo.actionIndex===r?n("div",{staticClass:"behavior-action-container behavior-drop-highlight",domProps:{innerHTML:e._s(e.dragging.action)}}):e._e(),e._v(" "),n("div",{staticClass:"behavior-action-container",class:{dragged:e.dragging.readyToDrop&&i===e.dragging.eventIndex&&r===e.dragging.actionIndex},attrs:{id:"behavior-action-container-"+e.item.id+"-"+i+"-"+r},on:{dragover:function(t){return e.onDragOverToAction(i,r,arguments[0])}}},[n("div",{staticClass:"icon-container"},[n("span",{staticClass:"link icon-delete",on:{click:function(t){return e.removeAction(i,r)}}},[n("i",{staticClass:"fas fa-times"})]),e._v(" "),n("span",{staticClass:"link icon-move",attrs:{draggable:"true"},on:{dragstart:function(t){return e.onActionDragStarted(i,r)}}},[n("i",{staticClass:"fas fa-arrows-alt"})])]),e._v(" "),n("div",[n("element-picker",{attrs:{element:t.element,"scheme-container":e.schemeContainer,"self-item":e.item,inline:!0,borderless:!0},on:{selected:function(t){return e.onActionElementSelected(i,r,arguments[0])}}})],1),e._v(" "),n("div",{staticClass:"behavior-goto-element",attrs:{title:"Double click to jump to element"},on:{dblclick:function(n){return e.jumpToElement(t.element)}}},[e._v(": ")]),e._v(" "),n("div",[n("dropdown",{key:t.element.item,attrs:{options:e.createMethodSuggestionsForElement(t.element),inline:!0,borderless:!0},on:{selected:function(t){return e.onActionMethodSelected(i,r,arguments[0])}}},["set"===t.method?n("span",[n("i",{staticClass:"fas fa-cog"}),e._v(" "+e._s(e._f("toPrettyPropertyName")(t.args.field,t.element,e.item,e.schemeContainer)))]):e._e(),e._v(" "),"set"!==t.method&&"sendEvent"!==t.method?n("span",{staticClass:"behavior-function"},[e._v(e._s(e._f("toPrettyMethod")(t.method,t.element))+" ")]):e._e(),e._v(" "),"sendEvent"===t.method?n("span",{staticClass:"behavior-function"},[n("i",{staticClass:"icon fas fa-play"}),e._v(" "+e._s(t.args.event)+" ")]):e._e()]),e._v(" "),"set"!==t.method&&"sendEvent"!==t.method&&t.args&&Object.keys(t.args).length>0?n("span",{staticClass:"action-method-arguments-expand",attrs:{title:"Edit function arguments"},on:{click:function(n){return e.showFunctionArgumentsEditor(t,i,r)}}},[e._v(e._s(e._f("toPrettyActionArgs")(t)))]):e._e()],1),e._v(" "),"set"===t.method?n("span",{staticClass:"function-brackets"},[e._v(" = ")]):e._e(),e._v(" "),"set"===t.method?n("set-argument-editor",{key:t.args.field,attrs:{"argument-description":e.getArgumentDescriptionForElement(t.element,t.args.field),"argument-value":t.args.value,args:t.args},on:{changed:function(t){return e.onArgumentValueChangeForSet(i,r,arguments[0])}}}):e._e()],1)])})),e._v(" "),e.dragging.readyToDrop&&e.dragging.dropTo.eventIndex===i&&e.dragging.dropTo.actionIndex>0&&e.dragging.dropTo.actionIndex>=t.actions.length?n("div",{staticClass:"behavior-action-container behavior-drop-highlight",domProps:{innerHTML:e._s(e.dragging.action)}}):e._e(),e._v(" "),n("div",{staticClass:"behavior-event-operations"},[n("span",{staticClass:"btn btn-small btn-secondary",on:{click:function(t){return e.addActionToEvent(i)}}},[e._v("+ Action")]),e._v(" "),n("span",{staticClass:"btn btn-small btn-secondary",on:{click:function(t){return e.duplicateBehavior(i)}}},[e._v("Duplicate")]),e._v(" "),n("span",{staticClass:"btn btn-small btn-secondary",on:{click:function(t){return e.copyEvent(i)}}},[e._v("Copy Event")]),e._v(" "),i>0?n("span",{staticClass:"btn btn-small btn-secondary",attrs:{title:"Move event up"},on:{click:function(t){return e.moveEventInOrder(i,i-1)}}},[n("i",{staticClass:"fas fa-caret-up"})]):e._e(),e._v(" "),i<e.item.behavior.events.length-1?n("span",{staticClass:"btn btn-small btn-secondary",attrs:{title:"Move event down"},on:{click:function(t){return e.moveEventInOrder(i,i+1)}}},[n("i",{staticClass:"fas fa-caret-down"})]):e._e(),e._v(" "),n("span",{staticClass:"btn btn-small btn-danger",on:{click:function(t){return e.removeBehaviorEvent(i)}}},[e._v("Delete")])])],2)])})),e._v(" "),n("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.addBehaviorEvent()}}},[e._v("+ Event")]),e._v(" "),n("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.copyAllEvents()}}},[e._v("Copy all events")]),e._v(" "),n("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.pasteEvents()}}},[e._v("Paste events")]),e._v(" "),e.functionArgumentsEditor.shown?n("function-arguments-editor",{attrs:{"function-description":e.functionArgumentsEditor.functionDescription,args:e.functionArgumentsEditor.args,"scheme-container":e.schemeContainer},on:{close:function(t){e.functionArgumentsEditor.shown=!1},"argument-changed":e.onFunctionArgumentsEditorChange}}):e._e()],2)}),[],!1,null,null,null).exports,uu={components:{Modal:Xe,BehaviorProperties:du,ElementPicker:Ud},props:{schemeContainer:Object},beforeMount(){this.refreshExistingItems()},data:()=>({revision:0,searchKeyword:"",existingItems:[],existingItemIds:[]}),methods:{prependItemForElement(e){const t=this.schemeContainer.findFirstElementBySelector(e);t&&this.addItem(t,!1)},appendItemForElement(e){const t=this.schemeContainer.findFirstElementBySelector(e);t&&this.addItem(t,!0)},addItem(e,t){this.searchKeyword="";let n=0;t&&(n=this.existingItems.length),this.existingItems.splice(n,0,e),this.existingItemIds.splice(n,0,e.id),this.revision+=1},refreshExistingItems(){this.existingItems=this.filterItems(),this.existingItemIds=Ke()(this.existingItems,(e=>e.id))},filterItems(){return rc()(this.schemeContainer.getItems(),(e=>e.behavior&&e.behavior.events&&e.behavior.events.length>0))},scrollToItem(e){if(!e)return;const t=document.getElementById(`advanced-behavior-item-${e.id}`);t&&(this.$refs.advancedBehaviorContainer.parentElement.scrollTop=t.offsetTop)},jumpToItem(e){yh()(this.existingItemIds,(t=>t===e.id))||(this.addItem(e,!0),this.$nextTick((()=>{this.scrollToItem(e)})))}},computed:{itemsWithBehavior(){const e=this.searchKeyword.toLowerCase();return e?rc()(this.schemeContainer.getItems(),(t=>t.name.toLowerCase().indexOf(e)>=0)):this.existingItems}}},pu=(0,Le.Z)(uu,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{title:"Advanced Behavior Editor","stretch-width":!0,"max-width":900,"use-mask":!1},on:{close:function(t){return e.$emit("close")}}},[n("div",{ref:"advancedBehaviorContainer",staticClass:"advanced-behavior-editor"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyword,expression:"searchKeyword"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Search..."},domProps:{value:e.searchKeyword},on:{input:function(t){t.target.composing||(e.searchKeyword=t.target.value)}}}),e._v(" "),n("div",{staticClass:"advanced-behavior-menu"},[n("element-picker",{key:"advanced-behavior-pick-item-1-"+e.revision,attrs:{"scheme-container":e.schemeContainer,"excluded-item-ids":e.existingItemIds,"use-self":!1,"allow-tags":!1,"none-label":"Choose item..."},on:{selected:function(t){return e.prependItemForElement(arguments[0])}}})],1),e._v(" "),n("div",{staticClass:"behavior-advanced-editor"},e._l(e.itemsWithBehavior,(function(t){return n("div",{attrs:{id:"advanced-behavior-item-"+t.id}},[n("span",{staticClass:"item-title"},[e._v(e._s(t.name))]),e._v(" "),n("behavior-properties",{key:"behavior-panel-"+t.id,attrs:{item:t,extended:!0,"scheme-container":e.schemeContainer},on:{"jumped-to-item":e.jumpToItem}})],1)})),0),e._v(" "),n("div",{staticClass:"advanced-behavior-menu"},[n("element-picker",{key:"advanced-behavior-pick-item-2-"+e.revision,attrs:{"scheme-container":e.schemeContainer,"excluded-item-ids":e.existingItemIds,"use-self":!1,"allow-tags":!1,"none-label":"Choose item..."},on:{selected:function(t){return e.appendItemForElement(arguments[0])}}})],1)])])}),[],!1,null,null,null).exports;var mu=n(1179);let fu=1;function gu(e,t,n){return{id:"simple-color-style-"+fu++,fill:{type:"solid",color:e},strokeColor:t,textColor:n}}function vu(e,t,n,i){return{id:"gradient-color-style-"+fu++,fill:{type:"gradient",gradient:{colors:[{c:e,p:0},{c:t,p:100}],type:"linear",direction:0}},strokeColor:n,textColor:i}}const yu=[{name:"Bright",styles:[gu("rgba(240,240,240,1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),gu("rgba(38, 37, 37, 1)","rgba(30,30,30,1.0)","rgba(248, 248, 248, 1)"),gu("rgba(251, 99, 99, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),gu("rgba(243, 180, 64, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),gu("rgba(244, 254, 0, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),gu("rgba(122, 255, 55, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),gu("rgba(57, 219, 136, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),gu("rgba(64, 236, 243, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),gu("rgba(128, 157, 243, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),gu("rgba(216, 128, 243, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)")]},{name:"Light",styles:[gu("rgba(212, 210, 210, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),gu("rgba(114, 112, 112, 1)","rgba(30,30,30,1.0)","rgba(248, 248, 248, 1)"),gu("rgba(237, 168, 168, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),gu("rgba(247, 208, 135, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),gu("rgba(245, 249, 142, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),gu("rgba(173, 245, 137, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),gu("rgba(143, 245, 193, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),gu("rgba(175, 247, 249, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),gu("rgba(206, 215, 245, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),gu("rgba(244, 208, 255, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)")]},{name:"Dark",styles:[gu("rgba(120, 116, 116, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),gu("rgba(77, 76, 76, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),gu("rgba(124, 39, 16, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),gu("rgba(130, 80, 14, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),gu("rgba(129, 140, 0, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),gu("rgba(58, 120, 27, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),gu("rgba(21, 108, 94, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),gu("rgba(17, 100, 126, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),gu("rgba(71, 106, 223, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),gu("rgba(106, 46, 124, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)")]},{name:"Gradient",styles:[vu("rgba(151, 150, 150, 1)","rgba(247, 247, 247, 1)","rgba(94, 91, 91, 1)","rgba(0, 0, 0, 1)"),vu("rgba(62, 62, 62, 1)","rgba(180, 180, 180, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),vu("rgba(118, 38, 17, 1)","rgba(249, 143, 114, 1)","rgba(147, 22, 22, 1)","rgba(254, 254, 254, 1)"),vu("rgba(130, 80, 14, 1)","rgba(237, 192, 132, 1)","rgba(100, 75, 33, 1)","rgba(254, 254, 254, 1)"),vu("rgba(109, 118, 7, 1)","rgba(226, 235, 114, 1)","rgba(96, 93, 54, 1)","rgba(254, 254, 254, 1)"),vu("rgba(58, 120, 27, 1)","rgba(169, 233, 138, 1)","rgba(33, 84, 20, 1)","rgba(254, 254, 254, 1)"),vu("rgba(16, 85, 74, 1)","rgba(65, 214, 191, 1)","rgba(22, 90, 65, 1)","rgba(254, 254, 254, 1)"),vu("rgba(17, 100, 126, 1)","rgba(165, 223, 241, 1)","rgba(38, 81, 106, 1)","rgba(254, 254, 254, 1)"),vu("rgba(71, 106, 223, 1)","rgba(200, 211, 247, 1)","rgba(43, 65, 135, 1)","rgba(254, 254, 254, 1)"),vu("rgba(106, 46, 124, 1)","rgba(239, 196, 251, 1)","rgba(122, 43, 135, 1)","rgba(254, 254, 254, 1)")]}];function xu(e,t){const n=Wl.Z.find(e.shape);if(n&&("standard"===n.shapeType||n.args.fill&&"advanced-color"===n.args.fill.type&&n.args.strokeColor&&"color"===n.args.strokeColor.type)){if(e.shapeProps.fill=Uc.Z.clone(t.fill),e.shapeProps.strokeColor=Uc.Z.clone(t.strokeColor),t.textColor){const i=n.getTextSlots(e);i&&ze()(i,(n=>{e.textSlots[n.name]&&(e.textSlots[n.name].color=Uc.Z.clone(t.textColor))}))}return!0}return!1}let bu=null;const wu={props:{item:{type:Object},userStylesEnabled:{type:Boolean,default:!1}},components:{Panel:dd,AdvancedFill:Ah.Z},beforeMount(){this.init()},data(){return{isEdit:!1,previewItems:null,previewComponent:null,stylePreviews:[],defaultStyleSections:Ke()(yu,(e=>({name:e.name,styles:Ke()(e.styles,this.convertStyleToPreview)})))}},methods:{init(){null===bu&&this.userStylesEnabled?this.$store.state.apiClient.getStyles().then((e=>{bu=e,this.stylePreviews=Ke()(e,this.convertStyleToPreview)})):this.stylePreviews=Ke()(bu,this.convertStyleToPreview)},convertStyleToPreview:e=>({style:e,previewFill:Ah.Z.computeSvgFill(e.fill,e.id),previewStroke:e.strokeColor}),applyStyle(e){this.$emit("style-applied",e)},applyUserStyle(e){this.isEdit||this.applyStyle(e)},saveStyleFromItem(){if(this.stylePreviews.length>=100)return void Jl.addErrorSystemMessage(this.$store,"Cannot add style as you already have 100 styles. Please consider removing some.");const e=Wl.Z.find(this.item.shape);if(!e)return;if(!("standard"===e.shapeType||e.args.fill&&"advanced-color"===e.args.fill.type&&e.args.strokeColor&&"color"===e.args.strokeColor))return;let t=null;const n=e.getTextSlots(this.item);if(n&&n.length>0){const e=n[0].name;this.item.textSlots[e]&&this.item.textSlots[e].color&&(t=this.item.textSlots[e].color)}this.$store.state.apiClient.saveStyle(this.item.shapeProps.fill,this.item.shapeProps.strokeColor,t).then((e=>{this.stylePreviews.push(this.convertStyleToPreview(e)),bu.push(e)}))},removeStyle(e){const t=this.stylePreviews[e];if(!t)return;const n=t.style.id;this.$store.state.apiClient.deleteStyle(n).then((()=>{this.stylePreviews.splice(e,1),this.stylePreviews=rc()(this.stylePreviews,(e=>e.style.id!==n))})),bu=rc()(bu,(e=>e.id!==n))}}},Cu=wu,_u=(0,Le.Z)(Cu,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("panel",{attrs:{uid:"default-styles",name:"Default Styles"}},e._l(e.defaultStyleSections,(function(t){return n("div",[n("ul",{staticClass:"shape-styles-preview"},e._l(t.styles,(function(t){return n("li",[n("div",{staticClass:"shape-style",on:{click:function(n){return e.applyStyle(t.style)}}},[n("svg",{attrs:{width:"70",height:"40"}},[n("advanced-fill",{attrs:{"fill-id":t.style.id,fill:t.style.fill,area:{x:4,y:4,w:62,h:32}}}),e._v(" "),n("rect",{attrs:{x:"4",y:"4",width:"62",height:"32",fill:t.previewFill,stroke:t.previewStroke,"stroke-width":"1"}})],1)])])})),0)])})),0),e._v(" "),e.userStylesEnabled?n("panel",{attrs:{uid:"user-styles",name:"User Styles"}},[n("span",{staticClass:"btn",on:{click:e.saveStyleFromItem}},[e._v("Add to Styles")]),e._v(" "),e.isEdit?n("span",{staticClass:"btn",on:{click:function(t){e.isEdit=!1}}},[n("i",{staticClass:"fas fa-edit"}),e._v(" Stop Edit")]):n("span",{staticClass:"btn",on:{click:function(t){e.isEdit=!0}}},[n("i",{staticClass:"fas fa-edit"}),e._v(" Edit")]),e._v(" "),n("ul",{staticClass:"shape-styles-preview"},e._l(e.stylePreviews,(function(t,i){return n("li",[n("div",{staticClass:"shape-style",on:{click:function(n){return e.applyUserStyle(t.style)}}},[e.isEdit?n("span",{staticClass:"link link-remove-style",on:{click:function(t){return e.removeStyle(i)}}},[n("i",{staticClass:"fas fa-times"})]):e._e(),e._v(" "),n("svg",{attrs:{width:"70",height:"40"}},[n("advanced-fill",{attrs:{"fill-id":t.style.id,fill:t.style.fill,area:{x:4,y:4,w:62,h:32}}}),e._v(" "),n("rect",{attrs:{x:"4",y:"4",width:"62",height:"32",fill:t.previewFill,stroke:t.previewStroke,"stroke-width":"1"}})],1)])])})),0)]):e._e()],1)}),[],!1,null,null,null).exports,Au=[];ze()(Sh.Z.patterns,(e=>{Au.push({name:e,html:Sh.Z.generateStrokeHtml(e,2,15,150,30)})}));const Su={props:{value:{type:String},width:{type:Number,default:140}},components:{Dropdown:bh},data:()=>({patternOptions:Uc.Z.clone(Au)}),computed:{selectedPatternHtml(){return Sh.Z.generateStrokeHtml(this.value,2,6,this.width,15)}}},ku=(0,Le.Z)(Su,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dropdown",{attrs:{options:e.patternOptions},on:{selected:function(t){return e.$emit("selected",arguments[0].name)}}},[n("div",{domProps:{innerHTML:e._s(e.selectedPatternHtml)}})])}),[],!1,null,null,null).exports;var Iu=n(125);function Pu(e,t,n,i,r){let s=`<svg width="${e}px" height="${t}px"><g transform="translate(5, 0)">`,o=0,a=30;if(i){i.prolongLine||(r?o=i.entryPoint.x:a=i.entryPoint.x);let e="#111111";i.hollow&&(e="none"),s+=`<path d="${i.path}" fill="${e}" stroke="#111111" stroke-width="2"/>`}return s+=`<path d="M ${o} ${n} L ${a} ${n}" fill="none" stroke="#111111" stroke-width="2"/>`,s+="</g></svg>",s}const Eu=Ke()((0,Iu.j)(),(e=>({name:e,cap:(0,Iu.g)(30,15,-15,0,e)}))),Tu=Ke()((0,Iu.j)(),(e=>({name:e,cap:(0,Iu.g)(0,15,15,0,e)})));function Mu(e,t){return Ke()(e,(e=>({name:e.name,html:Pu(100,30,15,e.cap,t)})))}const Ou={props:{value:{type:String},isSource:{type:Boolean,default:!1},width:{type:String,default:"30px"},height:{type:Number,default:20},isFat:{type:Boolean,default:!1}},components:{Dropdown:bh},data(){let e=Eu;this.isSource&&(e=Tu);let t=[];return t=this.isFat?Mu(rc()(e,(e=>"empty"===e.name||"triangle"===e.name)),this.isSource):Mu(e,this.isSource),{capOptions:t,selectedCapHtml:this.generateSelectedCapHtml(this.value)}},methods:{generateSelectedCapHtml(e){let t=null;return t=this.isSource?(0,Iu.g)(0,7,12,0,e):(0,Iu.g)(30,7,-12,0,e),Pu(40,this.height,7,t,this.isSource)}},watch:{value(e){this.selectedCapHtml=this.generateSelectedCapHtml(e)}}},Du=(0,Le.Z)(Ou,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dropdown",{attrs:{options:e.capOptions},on:{selected:function(t){return e.$emit("selected",arguments[0].name)}}},[n("div",{domProps:{innerHTML:e._s(e.selectedCapHtml)}})])}),[],!1,null,null,null).exports,$u={red:0,green:1,blue:2,alpha:3},Bu={props:["matrix"],components:{},data(){return{colorComponents:["red","green","blue","alpha"],currentComponent:"red",red:100*this.matrix[0][0],green:100*this.matrix[0][1],blue:100*this.matrix[0][2],alpha:100*this.matrix[0][3],redText:this.matrix[0][0],greenText:this.matrix[0][1],blueText:this.matrix[0][2],alphaText:this.matrix[0][3]}},methods:{selectColorComponent(e){const t=$u[e];this.red=100*this.matrix[t][0],this.green=100*this.matrix[t][1],this.blue=100*this.matrix[t][2],this.alpha=100*this.matrix[t][3],this.redText=this.red/100,this.greenText=this.green/100,this.blueText=this.blue/100,this.alphaText=this.alpha/100,this.$forceUpdate()},onValueChange(e,t){const n=$u[this.currentComponent],i=Uc.Z.clone(this.matrix);i[n][e]=t/100,this.$emit("changed",i)},onSliderTextChange(e,t){let n=parseFloat(t);isNaN(n)&&(n=0);const i=uh.Z.clamp(n,-2,2);"red"===e?(this.red=100*i,this.redText=t):"green"===e?(this.green=100*i,this.greenText=t):"blue"===e?(this.blue=100*i,this.blueText=t):"alpha"===e&&(this.alpha=100*i,this.alphaText=t)},onSliderChange(e,t){"red"===e?this.redText=t/100:"green"===e?this.greenText=t/100:"blue"===e?this.blueText=t/100:"alpha"===e&&(this.alphaText=t/100)}},watch:{currentComponent(e){this.selectColorComponent(e)},red(e){this.onValueChange(0,e)},green(e){this.onValueChange(1,e)},blue(e){this.onValueChange(2,e)},alpha(e){this.onValueChange(3,e)}}},Lu=Bu;const Nu=(0,Le.Z)(Lu,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"color-matrix"},[n("div",{staticClass:"color-component-selector"},[n("div",{staticClass:"ctrl-label"},[e._v("Channel")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.currentComponent,expression:"currentComponent"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.currentComponent=t.target.multiple?n:n[0]}}},e._l(e.colorComponents,(function(t){return n("option",{domProps:{value:t}},[e._v(e._s(t))])})),0)]),e._v(" "),n("div",{staticClass:"ctrl-label"},[e._v("Channel impact")]),e._v(" "),n("div",{staticClass:"color-component-inputs"},[n("div",{staticClass:"color-component-field"},[n("span",{staticClass:"label"},[e._v(e._s(e.currentComponent)+" to red")]),e._v(" "),n("div",[n("div",{staticClass:"slider-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.red,expression:"red"}],staticClass:"slider",attrs:{type:"range",min:"-200",max:"200"},domProps:{value:e.red},on:{input:function(t){return e.onSliderChange("red",arguments[0].target.value)},__r:function(t){e.red=t.target.value}}}),e._v(" "),n("input",{staticClass:"slider-text",attrs:{type:"text"},domProps:{value:e.redText},on:{input:function(t){return e.onSliderTextChange("red",arguments[0].target.value)}}})])])]),e._v(" "),n("div",{staticClass:"color-component-field"},[n("span",{staticClass:"label"},[e._v(e._s(e.currentComponent)+" to green")]),e._v(" "),n("div",[n("div",{staticClass:"slider-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.green,expression:"green"}],staticClass:"slider",attrs:{type:"range",min:"-200",max:"200"},domProps:{value:e.green},on:{input:function(t){return e.onSliderChange("green",arguments[0].target.value)},__r:function(t){e.green=t.target.value}}}),e._v(" "),n("input",{staticClass:"slider-text",attrs:{type:"text"},domProps:{value:e.greenText},on:{input:function(t){return e.onSliderTextChange("green",arguments[0].target.value)}}})])])]),e._v(" "),n("div",{staticClass:"color-component-field"},[n("span",{staticClass:"label"},[e._v(e._s(e.currentComponent)+" to blue")]),e._v(" "),n("div",[n("div",{staticClass:"slider-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.blue,expression:"blue"}],staticClass:"slider",attrs:{type:"range",min:"-200",max:"200"},domProps:{value:e.blue},on:{input:function(t){return e.onSliderChange("blue",arguments[0].target.value)},__r:function(t){e.blue=t.target.value}}}),e._v(" "),n("input",{staticClass:"slider-text",attrs:{type:"text"},domProps:{value:e.blueText},on:{input:function(t){return e.onSliderTextChange("blue",arguments[0].target.value)}}})])])]),e._v(" "),n("div",{staticClass:"color-component-field"},[n("span",{staticClass:"label"},[e._v(e._s(e.currentComponent)+" to alpha")]),e._v(" "),n("div",[n("div",{staticClass:"slider-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.alpha,expression:"alpha"}],staticClass:"slider",attrs:{type:"range",min:"-200",max:"200"},domProps:{value:e.alpha},on:{input:function(t){return e.onSliderChange("alpha",arguments[0].target.value)},__r:function(t){e.alpha=t.target.value}}}),e._v(" "),n("input",{staticClass:"slider-text",attrs:{type:"text"},domProps:{value:e.alphaText},on:{input:function(t){return e.onSliderTextChange("alpha",arguments[0].target.value)}}})])])])])])}),[],!1,null,null,null).exports,Ru={props:{descriptor:{type:Object,required:!0},schemeContainer:{type:Object,required:!0},value:[Number,String,Object,Boolean],disabled:{type:Boolean,default:!1},leftOriented:{type:Boolean,default:!1},itemId:{type:String,defalut:null,required:!1},shapeProps:{type:Object,required:!1}},components:{NumberTextfield:wd,ColorPicker:$d,AdvancedColorEditor:Gd,StrokePatternDropdown:ku,PathCapDropdown:Du,ElementPicker:Ud,SchemeSearchModal:kd,ColorMatrix:Nu},data:()=>({schemeSearchModalShown:!1}),methods:{emitValue(e){this.$emit("input",e)},onSchemeRefSelect(e){this.schemeSearchModalShown=!1,this.emitValue(e.id)},toggleSchemeSearch(){this.schemeSearchModalShown=!0}},computed:{minValue(){return this.descriptor.hasOwnProperty("min")?this.descriptor.min:null},maxValue(){return this.descriptor.hasOwnProperty("max")?this.descriptor.max:null},isFatConnector(){return!(!this.shapeProps||!this.shapeProps.fat)}}},Fu=(0,Le.Z)(Ru,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["string"===e.descriptor.type?n("input",{staticClass:"textfield",attrs:{disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.emitValue(arguments[0].target.value)}}}):e._e(),e._v(" "),"image"===e.descriptor.type?n("input",{staticClass:"textfield",attrs:{disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.emitValue(arguments[0].target.value)}}}):e._e(),e._v(" "),"number"===e.descriptor.type?n("NumberTextfield",{attrs:{value:e.value,disabled:e.disabled,min:e.minValue,max:e.maxValue},on:{changed:function(t){return e.emitValue(arguments[0])}}}):e._e(),e._v(" "),"color"===e.descriptor.type?n("ColorPicker",{attrs:{color:e.value,disabled:e.disabled},on:{input:function(t){return e.emitValue(arguments[0])}}}):e._e(),e._v(" "),"advanced-color"===e.descriptor.type?n("AdvancedColorEditor",{attrs:{value:e.value,disabled:e.disabled},on:{changed:function(t){return e.emitValue(arguments[0])}}}):e._e(),e._v(" "),"boolean"===e.descriptor.type?n("input",{attrs:{type:"checkbox",disabled:e.disabled},domProps:{checked:e.value},on:{input:function(t){return e.emitValue(arguments[0].srcElement.checked)}}}):e._e(),e._v(" "),"choice"===e.descriptor.type?n("select",{attrs:{disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.emitValue(arguments[0].target.value)}}},e._l(e.descriptor.options,(function(t){return n("option",[e._v(e._s(t))])})),0):e._e(),e._v(" "),"stroke-pattern"===e.descriptor.type?n("StrokePatternDropdown",{attrs:{value:e.value,disabled:e.disabled},on:{selected:function(t){return e.emitValue(arguments[0])}}}):e._e(),e._v(" "),"path-cap"===e.descriptor.type?n("PathCapDropdown",{attrs:{value:e.value,"is-source":!e.leftOriented,"is-fat":e.isFatConnector,width:"16px",height:16,disabled:e.disabled},on:{selected:function(t){return e.emitValue(arguments[0])}}}):e._e(),e._v(" "),"element"===e.descriptor.type?n("ElementPicker",{attrs:{element:e.value,"use-self":!1,"allow-none":!0,"scheme-container":e.schemeContainer,disabled:e.disabled,"excluded-item-ids":[e.itemId]},on:{selected:function(t){return e.emitValue(arguments[0])}}}):e._e(),e._v(" "),"scheme-ref"===e.descriptor.type?n("div",{staticClass:"scheme-ref-control"},[n("input",{staticClass:"textfield",attrs:{type:"text",disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.emitValue(arguments[0].target.value)}}}),e._v(" "),n("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.toggleSchemeSearch()}}},[n("i",{staticClass:"fas fa-search"})])]):e._e(),e._v(" "),"color-matrix"===e.descriptor.type?n("ColorMatrix",{attrs:{matrix:e.value},on:{changed:function(t){return e.emitValue(arguments[0])}}}):e._e(),e._v(" "),e.schemeSearchModalShown?n("scheme-search-modal",{on:{close:function(t){e.schemeSearchModalShown=!1},"selected-scheme":e.onSchemeRefSelect}}):e._e()],1)}),[],!1,null,null,null).exports,Zu={props:["effectId","effectArgs","schemeContainer"],components:{PropertyInput:Fu,Tooltip:pd},data(){const e=Dh(this.effectId);return{effectArgDefinitions:Uc.Z.clone(e.args)}},methods:{onPropChange(e,t){this.$emit("effect-arg-changed",e,t)}}};function ju(){const e=[];return ze()(Oh(),((t,n)=>{e.push({id:n,name:t.name})})),e}const zu={components:{Modal:Xe,EffectEditor:(0,Le.Z)(Zu,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("table",{staticClass:"properties-table"},[n("tbody",e._l(e.effectArgDefinitions,(function(t,i){return n("tr",["color-matrix"!==t.type?n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("\n                    "+e._s(t.name)+"\n                    "),t.description?n("tooltip",[e._v(e._s(t.description))]):e._e()],1):e._e(),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%",colspan:"color-matrix"===t.type?2:1}},[n("PropertyInput",{attrs:{descriptor:t,value:e.effectArgs[i],schemeContainer:e.schemeContainer},on:{input:function(t){return e.onPropChange(i,arguments[0])}}})],1)])})),0)])])}),[],!1,null,null,null).exports},props:{title:{type:String,default:"Add effect"},isAdding:{type:Boolean,default:!0},effectId:{type:String,required:!0},effectArgs:{type:Object,required:!0},schemeContainer:{type:Object,required:!0}},data(){const e=Dh(this.effectId);return{knownEffects:ju(),effectName:e.name}},methods:{addEffect(){this.$emit("effect-submited",{id:ec().generate(),effect:this.effectId,name:this.effectName,args:this.effectArgs})},onEffectArgEdited(e,t){this.$emit("effect-arg-changed",e,t)},onEffectIdChanged(e){this.$emit("effect-id-changed",e)}},watch:{effectName(e){this.$emit("effect-name-changed",e)}}},Uu=(0,Le.Z)(zu,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{attrs:{title:e.isAdding?"Add effect":"Edit Effect",primaryButton:e.isAdding?"Add Effect":null,closeName:e.isAdding?"Cancel":"Close",width:400,useMask:!1},on:{"primary-submit":e.addEffect,close:function(t){return e.$emit("close")}}},[n("div",{staticClass:"section"},[n("div",{staticClass:"ctrl-label"},[e._v("Effect")]),e._v(" "),n("select",{domProps:{value:e.effectId},on:{input:function(t){return e.onEffectIdChanged(arguments[0].target.value)}}},e._l(e.knownEffects,(function(t){return n("option",{domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)]),e._v(" "),n("div",{staticClass:"ctrl-label"},[e._v("Name")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.effectName,expression:"effectName"}],staticClass:"textfield",domProps:{value:e.effectName},on:{input:function(t){t.target.composing||(e.effectName=t.target.value)}}}),e._v(" "),n("EffectEditor",{key:"effect-editor-"+e.effectId,attrs:{schemeContainer:e.schemeContainer,effectId:e.effectId,effectArgs:e.effectArgs},on:{"effect-arg-changed":e.onEffectArgEdited}})],1)}),[],!1,null,null,null).exports,Hu=[{name:"description",displayName:"Description",icon:"fas fa-paragraph"},{name:"shape",displayName:"Shape Properties",icon:"fas fa-vector-square"},{name:"behavior",displayName:"Behavior (Script)",icon:"fas fa-running"},{name:"effects",displayName:"Effects",icon:"fas fa-magic"},{name:"styles",displayName:"Style Palette",icon:"fas fa-palette"}],Vu=Ke()(Hu,(e=>e.name)),qu=qc("tabs-state",100),Gu={props:{item:{type:Object},schemeContainer:{type:Object},userStylesEnabled:{type:Boolean,default:!1}},components:{Panel:dd,Tooltip:pd,ColorPicker:$d,PositionPanel:_d,LinksPanel:Td,GeneralPanel:yd,BehaviorProperties:du,AdvancedBehaviorProperties:pu,StylesPalette:_u,NumberTextfield:wd,EditEffectModal:Uu,PropertyInput:Fu},beforeMount(){let e=qu.get(this.schemeContainer.scheme.id,Vu[0]);od()(Vu,e)<0&&(e=Vu[0]),this.currentTab=e,_h.Z.$on(_h.Z.BEHAVIOR_PANEL_REQUESTED,this.onBehaviorPanelRequested),_h.Z.subscribeForItemChanged(this.item.id,this.onItemChanged)},beforeDestroy(){_h.Z.$off(_h.Z.BEHAVIOR_PANEL_REQUESTED,this.onBehaviorPanelRequested),_h.Z.unsubscribeForItemChanged(this.item.id,this.onItemChanged)},mounted(){this.oldShape=this.item.shape,this.shapeComponent=Wl.Z.find(this.item.shape),this.updateShapePropsDependencies()},data(){const e=Wl.Z.find(this.item.shape),t=Wl.Z.getShapeIds();return t.sort(),{tabs:Hu,knownCursors:["default","pointer","grab","crosshair","not-allowed","zoom-in","help","wait"],knownShapes:t,currentTab:"description",shapeComponent:e,oldShape:this.item.shape,knownBlendModes:Uc.Z.clone(mu.W),shapePropsControlStates:e?ld()(e.args,(()=>({shown:!0}))):{},knownInteractionModes:mh.pp.values(),behaviorPanelRevision:1,editEffectModal:{effectId:"drop-shadow",isAdding:!0,shown:!1,currentEffectIndex:-1,effectArgs:{}}}},methods:{onItemChanged(){this.$forceUpdate()},emitItemFieldChange(e,t){this.$emit("item-field-changed",e,t)},onShapePropChange(e,t,n){const i=Wl.Z.find(this.item.shape);if(i&&i.args[e]){const t=i.args[e];if(t.onUpdate){const i=this.item.shapeProps[e];this.item.shapeProps[e]=n,t.onUpdate(this.$store,this.item,n,i)}}this.schemeContainer.updateMultiItemEditBox(),this.$emit("shape-prop-changed",e,t,n),this.updateShapePropsDependencies(),this.$forceUpdate()},updateShapePropsDependencies(){this.shapeComponent&&ze()(this.shapeComponent.args,((e,t)=>{e.depends&&ze()(e.depends,((e,n)=>{let i=!1;if(Array.isArray(e))for(let t=0;t<e.length&&!i;t++)i=this.item.shapeProps[n]===e[t];else i=this.item.shapeProps[n]===e;this.shapePropsControlStates[t]?this.shapePropsControlStates[t].shown=i:this.shapePropsControlStates[t]={shown:i}}))}))},isArgumentHidden:e=>"path-points"===e.type||"animations"===e.type||e.hasOwnProperty("hidden")&&!0===e.hidden,onStyleApplied(e){this.$emit("item-style-applied",e)},onPositionPanelAreaChanged(e,t){const n=this.schemeContainer.multiItemEditBox;if(n){if("w"===e||"h"===e)n.area[e]=t,this.schemeContainer.updateMultiItemEditBoxItems(n,!1,Kl.pf),1===n.items.length&&Jl.setItemControlPoints(this.$store,n.items[0]);else if("r"===e){n.area.r=t;const e=uh.Z.worldPointInArea(n.pivotPoint.x*n.area.w,n.pivotPoint.y*n.area.h,n.area);n.area.x+=n.worldPivotPoint.x-e.x,n.area.y+=n.worldPivotPoint.y-e.y,this.schemeContainer.updateMultiItemEditBoxItems(n,!1,Kl.hG)}else n.area[e]=t,this.schemeContainer.updateMultiItemEditBoxItems(n,!1,Kl.W4);_h.Z.emitSchemeChangeCommited(`editbox.area.${e}`)}},onPositionPanelScaleChanged(e,t){if(this.schemeContainer.multiItemEditBox&&1===this.schemeContainer.multiItemEditBox.items.length){const n=this.schemeContainer.multiItemEditBox.items[0];e>0&&(n.area.sx=e),t>0&&(n.area.sy=t),_h.Z.emitItemChanged(n.id,"area.sx"),_h.Z.emitSchemeChangeCommited("editbox.area.s"),this.schemeContainer.updateMultiItemEditBoxAreaOnly(),this.schemeContainer.updateChildTransforms(this.schemeContainer.multiItemEditBox.items[0]),_h.Z.$emit(_h.Z.MULTI_ITEM_EDIT_BOX_AREA_UPDATED)}},toggleBehaviorEditorModal(){this.$emit("clicked-advanced-behavior-editor")},onJumpedToItem(e){e&&this.schemeContainer.selectItem(e)},onBehaviorPanelRequested(){this.behaviorPanelRevision+=1,this.currentTab="behavior"},startAddingEffect(){const e="drop-shadow",t=Dh(e);this.editEffectModal.effectArgs=Mh(t),this.item.effects.push({id:ec().generate(),effect:e,name:t.name,args:this.editEffectModal.effectArgs}),this.editEffectModal.isAdding=!0,this.editEffectModal.effectId=e,this.editEffectModal.shown=!0,this.editEffectModal.currentEffectIndex=this.item.effects.length-1,_h.Z.emitItemChanged(this.item.id,"effects")},effectModalClosed(){this.editEffectModal.isAdding&&(this.editEffectModal.currentEffectIndex>=0&&this.editEffectModal.currentEffectIndex<this.item.effects.length&&this.item.effects.splice(this.editEffectModal.currentEffectIndex,1),_h.Z.emitItemChanged(this.item.id,"effects")),this.editEffectModal.shown=!1,this.editEffectModal.currentEffectIndex=-1},onEffectArgChanged(e,t){this.editEffectModal.currentEffectIndex>=0&&this.editEffectModal.currentEffectIndex<this.item.effects.length&&(this.item.effects[this.editEffectModal.currentEffectIndex].args[e]=t),_h.Z.emitItemChanged(this.item.id,"effects")},onEffectNameChanged(e){this.editEffectModal.currentEffectIndex>=0&&this.editEffectModal.currentEffectIndex<this.item.effects.length&&(this.item.effects[this.editEffectModal.currentEffectIndex].name=e)},onEffectSubmited(e){this.editEffectModal.shown=!1,this.editEffectModal.isAdding&&(this.editEffectModal.currentEffectIndex>=0&&this.editEffectModal.currentEffectIndex<this.item.effects.length&&(this.item.effects[this.editEffectModal.currentEffectIndex]=e),_h.Z.emitItemChanged(this.item.id,"effects"),_h.Z.emitSchemeChangeCommited(`item.${this.item.id}.effects`))},openEditEffectModal(e){this.editEffectModal.currentEffectIndex=e,this.editEffectModal.effectId=this.item.effects[e].effect,this.editEffectModal.isAdding=!1,this.editEffectModal.shown=!0,this.editEffectModal.effectArgs=this.item.effects[e].args},deleteEffect(e){e<0||e>=this.item.effects.length||(this.item.effects.splice(e,1),_h.Z.emitItemChanged(this.item.id,"effects"),_h.Z.emitSchemeChangeCommited(`item.${this.item.id}.effects`))},onEffectIdChanged(e){if(this.editEffectModal.currentEffectIndex<0||this.editEffectModal.currentEffectIndex>=this.item.effects.length)return;const t=Dh(e);this.editEffectModal.effectArgs=Mh(t),this.editEffectModal.effectId=e,this.item.effects[this.editEffectModal.currentEffectIndex]={id:this.item.effects[this.editEffectModal.currentEffectIndex].id,effect:e,name:t.name,args:this.editEffectModal.effectArgs},_h.Z.emitItemChanged(this.item.id,"effects")}},computed:{hasShapeArgs(){const e=Wl.Z.find(this.item.shape);return!(!e||!e.args)&&Object.keys(e.args).length>0}},watch:{currentTab(e){qu.save(this.schemeContainer.scheme.id,e)}},filters:{prettyEffectName:e=>e||"Unnamed Effect"}},Wu=Gu,Ku=(0,Le.Z)(Wu,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item-properties"},[n("ul",{staticClass:"button-group"},e._l(e.tabs,(function(t){return n("li",[n("span",{staticClass:"toggle-button",class:{toggled:t.name===e.currentTab},attrs:{title:t.displayName},on:{click:function(n){e.currentTab=t.name}}},[n("i",{class:[t.icon]})])])})),0),e._v(" "),"description"===e.currentTab?n("general-panel",{key:"general-panel-"+e.item.id,attrs:{item:e.item,schemeContainer:e.schemeContainer},on:{"tags-changed":function(t){return e.emitItemFieldChange("tags",arguments[0])}}}):e._e(),e._v(" "),"description"===e.currentTab?n("links-panel",{key:"links-panel-"+e.item.id,attrs:{item:e.item}}):e._e(),e._v(" "),"behavior"===e.currentTab?n("div",[n("span",{staticClass:"btn btn-secondary",on:{click:e.toggleBehaviorEditorModal}},[e._v("Advanced Mode")]),e._v(" "),n("behavior-properties",{key:"behavior-panel-"+e.item.id+"-"+e.behaviorPanelRevision,attrs:{item:e.item,"scheme-container":e.schemeContainer},on:{"item-field-changed":function(t){return e.emitItemFieldChange(arguments[0],arguments[1])},"jumped-to-item":e.onJumpedToItem}})],1):e._e(),e._v(" "),"styles"===e.currentTab?n("div",[n("styles-palette",{key:"styles-palette-for-item-"+e.item.id,attrs:{userStylesEnabled:e.userStylesEnabled,item:e.item},on:{"style-applied":e.onStyleApplied}})],1):e._e(),e._v(" "),"effects"===e.currentTab?n("div",[e.item.effects&&0!==e.item.effects.length?n("ul",{staticClass:"effects-list"},e._l(e.item.effects,(function(t,i){return n("li",[n("div",{staticClass:"effect-name",on:{click:function(t){return e.openEditEffectModal(i)}}},[e._v(e._s(e._f("prettyEffectName")(t.name)))]),e._v(" "),n("div",{staticClass:"effect-right-panel"},[n("span",{staticClass:"icon icon-effect-edit",on:{click:function(t){return e.openEditEffectModal(i)}}},[n("i",{staticClass:"fas fa-edit"})]),e._v(" "),n("span",{staticClass:"icon icon-effect-delete",on:{click:function(t){return e.deleteEffect(i)}}},[n("i",{staticClass:"fas fa-times"})])])])})),0):n("div",{staticClass:"hint hint-small"},[e._v("There are no effects yet")]),e._v(" "),n("span",{staticClass:"btn btn-secondary",on:{click:e.startAddingEffect}},[e._v("Add Effect")])]):e._e(),e._v(" "),"shape"===e.currentTab?n("div",[n("panel",{attrs:{name:"General",uid:"general-item-properties"}},[n("table",{staticClass:"properties-table"},[n("tbody",[n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Opacity")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("number-textfield",{attrs:{value:e.item.opacity,min:0,max:100},on:{changed:function(t){return e.emitItemFieldChange("opacity",arguments[0])}}})],1)]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Self Opacity")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("number-textfield",{attrs:{value:e.item.selfOpacity,min:0,max:100},on:{changed:function(t){return e.emitItemFieldChange("selfOpacity",arguments[0])}}})],1)]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Cursor")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("select",{domProps:{value:e.item.cursor},on:{input:function(t){return e.emitItemFieldChange("cursor",arguments[0].target.value)}}},e._l(e.knownCursors,(function(t){return n("option",[e._v(e._s(t))])})),0)])])])])]),e._v(" "),e.hasShapeArgs?n("panel",{attrs:{name:"Shape Properties"}},[n("table",{staticClass:"properties-table"},[n("tbody",e._l(e.shapeComponent.args,(function(t,i){return e.shapePropsControlStates[i]&&!e.isArgumentHidden(t)?n("tr",[n("td",{staticClass:"label",class:{disabled:!e.shapePropsControlStates[i].shown},attrs:{width:"50%"}},[e._v("\n                            "+e._s(t.name)+"\n                            "),t.description?n("tooltip",[e._v(e._s(t.description))]):e._e()],1),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("PropertyInput",{key:"prop-input-"+e.item.id+"-"+e.item.shape+"-"+i+"-"+e.item.shapeProps.fat,attrs:{descriptor:t,value:e.item.shapeProps[i],shapeProps:e.item.shapeProps,disabled:!e.shapePropsControlStates[i].shown,schemeContainer:e.schemeContainer,leftOriented:"sourceCap"===i,itemId:e.item.id},on:{input:function(n){return e.onShapePropChange(i,t.type,arguments[0])}}})],1)]):e._e()})),0)])]):e._e(),e._v(" "),e.schemeContainer.multiItemEditBox?n("position-panel",{key:"position-panel-"+e.item.id+"-"+e.schemeContainer.multiItemEditBox.id,attrs:{"edit-box":e.schemeContainer.multiItemEditBox,item:e.item},on:{"area-changed":e.onPositionPanelAreaChanged,"scale-changed":e.onPositionPanelScaleChanged}}):e._e(),e._v(" "),n("panel",{attrs:{name:"Advanced"}},[n("table",{staticClass:"properties-table"},[n("tbody",[n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Blend mode")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("select",{domProps:{value:e.item.blendMode},on:{input:function(t){return e.emitItemFieldChange("blendMode",arguments[0].target.value)}}},e._l(e.knownBlendModes,(function(t){return n("option",[e._v(e._s(t))])})),0)])]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Visible")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("input",{staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{checked:e.item.visible},on:{input:function(t){return e.emitItemFieldChange("visible",arguments[0].target.checked)}}})])]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("\n                            Clip children\n                            "),n("tooltip",[e._v("Only renders parts of the child items that are located inside the visible shape of the parent item")])],1),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("input",{staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{checked:e.item.clip},on:{input:function(t){return e.emitItemFieldChange("clip",arguments[0].target.checked)}}})])]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Shape")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("select",{domProps:{value:e.item.shape},on:{input:function(t){return e.$emit("shape-changed",arguments[0].target.value)}}},e._l(e.knownShapes,(function(t){return n("option",[e._v(e._s(t))])})),0)])]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("\n                            Interaction Mode\n                            "),n("tooltip",[e._v('\n                                Specifies item default behavior on click. \n                                "side-panel" or "tooltip" modes are only used in case item has a non-empty description\n                            ')])],1),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("select",{domProps:{value:e.item.interactionMode},on:{input:function(t){return e.emitItemFieldChange("interactionMode",arguments[0].target.value)}}},e._l(e.knownInteractionModes,(function(t){return n("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])})),0)])]),e._v(" "),"tooltip"===e.item.interactionMode?n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Tooltip Background")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("color-picker",{attrs:{color:e.item.tooltipBackground},on:{input:function(t){return e.emitItemFieldChange("tooltipBackground",arguments[0])}}})],1)]):e._e(),e._v(" "),"tooltip"===e.item.interactionMode?n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Tooltip Color")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("color-picker",{attrs:{color:e.item.tooltipColor},on:{input:function(t){return e.emitItemFieldChange("tooltipColor",arguments[0])}}})],1)]):e._e()])])])],1):e._e(),e._v(" "),e.editEffectModal.shown?n("EditEffectModal",{key:"edit-effect-modal-"+e.item.id+"-"+e.editEffectModal.currentEffectIndex+"-"+e.editEffectModal.effectId,attrs:{isAdding:e.editEffectModal.isAdding,effectId:e.editEffectModal.effectId,effectArgs:e.editEffectModal.effectArgs,schemeContainer:e.schemeContainer},on:{close:e.effectModalClosed,"effect-submited":e.onEffectSubmited,"effect-arg-changed":e.onEffectArgChanged,"effect-name-changed":e.onEffectNameChanged,"effect-id-changed":e.onEffectIdChanged}}):e._e()],1)}),[],!1,null,null,null).exports;var Ju=n(3086);const Yu={props:["item","slotName"],components:{EditorMenuBar:Da,Dropdown:bh,NumberTextfield:wd,ColorPicker:$d},beforeMount(){_h.Z.$on(_h.Z.ITEM_IN_PLACE_TEXT_EDITOR_CREATED,this.onTextEditorCreated),_h.Z.subscribeForItemChanged(this.item.id,this.onItemChanged)},beforeDestroy(){_h.Z.$off(_h.Z.ITEM_IN_PLACE_TEXT_EDITOR_CREATED,this.onTextEditorCreated),_h.Z.unsubscribeForItemChanged(this.item.id,this.onItemChanged)},data(){const e=Wl.Z.find(this.item.shape);return{editor:null,textSlot:this.item.textSlots[this.slotName],availableTextSlots:Ke()(e.getTextSlots(this.item),(e=>e.name)),allFonts:Ke()((0,Ju._W)(),(e=>({name:e.name,style:{"font-family":e.family}}))),supportedWhiteSpaceOptions:mh.Ho,halignOptions:[{name:"Left",value:"left",iconCss:"fas fa-align-left"},{name:"Center",value:"center",iconCss:"fas fa-align-center"},{name:"Right",value:"right",iconCss:"fas fa-align-right"}],valignOptions:[{name:"Top",value:"top",iconCss:"schemio-icon schemio-icon-valign-top"},{name:"Middle",value:"middle",iconCss:"schemio-icon schemio-icon-valign-middle"},{name:"Bottom",value:"bottom",iconCss:"schemio-icon schemio-icon-valign-bottom"}]}},methods:{onItemChanged(e){e&&e.startsWith("textSlots.")&&(this.textSlot=this.item.textSlots[this.slotName],this.$forceUpdate())},onTextEditorCreated(e){this.editor=e},onMoveToSlotClicked(e){this.$emit("moved-to-slot",e)},emitTextSlotPropertyChange(e,t){this.$emit("property-changed",e,t)}}},Qu=(0,Le.Z)(Yu,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.editor?n("editor-menu-bar",{attrs:{editor:e.editor},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.commands,r=t.isActive;return t.getMarkAttrs,[n("div",{staticClass:"rich-text-editor-menubar"},[n("span",{staticClass:"editor-icon",class:{"is-active":r.bold()},on:{click:i.bold}},[n("i",{staticClass:"fas fa-bold"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.italic()},on:{click:i.italic}},[n("i",{staticClass:"fas fa-italic"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.strike()},on:{click:i.strike}},[n("i",{staticClass:"fas fa-strikethrough"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.underline()},on:{click:i.underline}},[n("i",{staticClass:"fas fa-underline"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.code()},on:{click:i.code}},[n("i",{staticClass:"fas fa-code"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.heading({level:1})},on:{click:function(e){return i.heading({level:1})}}},[e._v("\n                H1\n            ")]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.heading({level:2})},on:{click:function(e){return i.heading({level:2})}}},[e._v("\n                H2\n            ")]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.heading({level:3})},on:{click:function(e){return i.heading({level:3})}}},[e._v("\n                H3\n            ")]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.bullet_list()},on:{click:i.bullet_list}},[n("i",{staticClass:"fas fa-list-ul"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.ordered_list()},on:{click:i.ordered_list}},[n("i",{staticClass:"fas fa-list-ol"})]),e._v(" "),n("span",{staticClass:"editor-icon",class:{"is-active":r.blockquote()},on:{click:i.blockquote}},[n("i",{staticClass:"fas fa-quote-left"})])])]}}],null,!1,3899355394)}):e._e(),e._v(" "),e.textSlot?n("div",[n("table",{staticClass:"properties-table"},[n("tbody",[n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Color")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("color-picker",{attrs:{color:e.textSlot.color},on:{input:function(t){return e.emitTextSlotPropertyChange("color",arguments[0])}}})],1)]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Font")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("dropdown",{attrs:{options:e.allFonts,value:e.textSlot.font},on:{selected:function(t){return e.emitTextSlotPropertyChange("font",arguments[0].name)}}})],1)]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Font Size")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("number-textfield",{attrs:{value:e.textSlot.fontSize,min:0},on:{changed:function(t){return e.emitTextSlotPropertyChange("fontSize",arguments[0])}}})],1)]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Horizontal Align")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("ul",{staticClass:"button-group"},e._l(e.halignOptions,(function(t){return n("li",[n("span",{staticClass:"toggle-button",class:{toggled:e.textSlot.halign===t.value},attrs:{title:t.name},on:{click:function(n){return e.emitTextSlotPropertyChange("halign",t.value)}}},[n("i",{class:t.iconCss})])])})),0)])]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Vertical Align")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("ul",{staticClass:"button-group"},e._l(e.valignOptions,(function(t){return n("li",[n("span",{staticClass:"toggle-button",class:{toggled:e.textSlot.valign===t.value},attrs:{title:t.name},on:{click:function(n){return e.emitTextSlotPropertyChange("valign",t.value)}}},[n("i",{class:t.iconCss})])])})),0)])]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Padding Left")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("number-textfield",{attrs:{value:e.textSlot.paddingLeft},on:{changed:function(t){return e.emitTextSlotPropertyChange("paddingLeft",arguments[0])}}})],1)]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Padding Right")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("number-textfield",{attrs:{value:e.textSlot.paddingRight},on:{changed:function(t){return e.emitTextSlotPropertyChange("paddingRight",arguments[0])}}})],1)]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Padding Top")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("number-textfield",{attrs:{value:e.textSlot.paddingTop},on:{changed:function(t){return e.emitTextSlotPropertyChange("paddingTop",arguments[0])}}})],1)]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Padding Bottom")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("number-textfield",{attrs:{value:e.textSlot.paddingBottom},on:{changed:function(t){return e.emitTextSlotPropertyChange("paddingBottom",arguments[0])}}})],1)]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("White Space")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("select",{domProps:{value:e.textSlot.whiteSpace},on:{input:function(t){return e.emitTextSlotPropertyChange("whiteSpace",arguments[0].target.value)}}},e._l(e.supportedWhiteSpaceOptions,(function(t){return n("option",{domProps:{value:t.value}},[e._v(e._s(t.name))])})),0)])]),e._v(" "),e._l(e.availableTextSlots,(function(t){return e.slotName!==t?n("tr",[n("td",{attrs:{colspan:"2"}},[n("span",{staticClass:"btn btn-secondary",staticStyle:{width:"100%"},on:{click:function(n){return e.onMoveToSlotClicked(t)}}},[e._v('Move to "'+e._s(t)+'" slot')])])]):e._e()}))],2)])]):e._e()],1)}),[],!1,null,null,null).exports,Xu={props:["item"],methods:{getLinkCssClass:e=>Rh.Z.findTypeByNameOrDefault(e.type).cssClass},computed:{sanitizedItemDescription(){return Ih()(this.item.description)}}},ep=(0,Le.Z)(Xu,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item-details"},[n("h3",[e._v(e._s(e.item.name))]),e._v(" "),n("div",{domProps:{innerHTML:e._s(e.sanitizedItemDescription)}}),e._v(" "),e.item.links&&e.item.links.length>0?n("div",[n("h5",[e._v("Links")]),e._v(" "),n("ul",{staticClass:"links"},e._l(e.item.links,(function(t,i){return n("li",[n("a",{staticClass:"link",attrs:{href:t.url,target:"_blank"}},[n("i",{class:e.getLinkCssClass(t)}),e._v("\n                    "+e._s(t.title)+"\n                ")])])})),0)]):e._e()])}),[],!1,null,null,null).exports,tp={props:{schemeContainer:{type:Object}},components:{VueTagsInput:fd(),RichTextEditor:ql,ColorPicker:$d,Panel:dd,Tooltip:pd},mounted(){this.$store.state.apiClient&&this.$store.state.apiClient.getTags&&this.$store.state.apiClient.getTags().then((e=>{this.existingSchemeTags=Ke()(e,(e=>({text:e})))}))},data(){return{schemeTag:"",existingSchemeTags:[],showDeleteSchemeWarning:!1,screenSettings:{draggable:this.schemeContainer.scheme.settings.screen.draggable}}},methods:{onSchemeStylePropertyChange(e,t){this.schemeContainer.scheme.style[e]=t,this.onPropertyChange(`scheme.style.${e}`)},onSchemeTagChange(e){this.schemeContainer.scheme.tags=Ke()(e,(e=>e.text)),this.onPropertyChange("tags")},onPropertyChange(e){_h.Z.emitSchemeChangeCommited(`scheme.${e}`)}},computed:{filteredSchemeTags(){return this.existingSchemeTags.filter((e=>new RegExp(this.schemeTag,"i").test(e.text)))},schemeTags(){return Ke()(this.schemeContainer.scheme.tags,(e=>({text:e})))},supportsSchemeDeletion(){return this.$store.state.apiClient&&this.$store.state.apiClient.deleteScheme},supportsShapeExport(){return od()(this.schemeContainer.scheme.tags,"schemio-extra-shapes")>=0}},watch:{"screenSettings.draggable":{handler(e){this.schemeContainer.scheme.settings.screen.draggable=e,_h.Z.emitSchemeChangeCommited("scheme.settings.screen.draggable")}}}},np=tp,ip=(0,Le.Z)(np,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.schemeContainer.scheme?n("div",[n("panel",{attrs:{name:"General"}},[n("h5",{staticClass:"section"},[e._v("Name")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.schemeContainer.scheme.name,expression:"schemeContainer.scheme.name"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Scheme name ..."},domProps:{value:e.schemeContainer.scheme.name},on:{change:function(t){return e.onPropertyChange("name")},input:function(t){t.target.composing||e.$set(e.schemeContainer.scheme,"name",t.target.value)}}}),e._v(" "),n("h5",{staticClass:"section"},[e._v("Tags")]),e._v(" "),n("vue-tags-input",{attrs:{tags:e.schemeTags,"autocomplete-items":e.filteredSchemeTags},on:{"tags-changed":e.onSchemeTagChange},model:{value:e.schemeTag,callback:function(t){e.schemeTag=t},expression:"schemeTag"}}),e._v(" "),n("h5",{staticClass:"section"},[e._v("Description")]),e._v(" "),n("rich-text-editor",{on:{changed:function(t){e.schemeContainer.scheme.description=arguments[0],e.onPropertyChange("description")}},model:{value:e.schemeContainer.scheme.description,callback:function(t){e.$set(e.schemeContainer.scheme,"description",t)},expression:"schemeContainer.scheme.description"}})],1),e._v(" "),n("panel",{attrs:{name:"Screen Settings"}},[n("table",{staticClass:"properties-table"},[n("tbody",[n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("\n                            Draggable\n                            "),n("tooltip",[e._v("\n                                Allows users to drag screen using mouse in view mode.\n                            ")])],1),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.screenSettings.draggable,expression:"screenSettings.draggable"}],attrs:{type:"checkbox",id:"chk-screen-draggable"},domProps:{checked:Array.isArray(e.screenSettings.draggable)?e._i(e.screenSettings.draggable,null)>-1:e.screenSettings.draggable},on:{change:function(t){var n=e.screenSettings.draggable,i=t.target,r=!!i.checked;if(Array.isArray(n)){var s=e._i(n,null);i.checked?s<0&&e.$set(e.screenSettings,"draggable",n.concat([null])):s>-1&&e.$set(e.screenSettings,"draggable",n.slice(0,s).concat(n.slice(s+1)))}else e.$set(e.screenSettings,"draggable",r)}}})])])])])]),e._v(" "),n("panel",{attrs:{name:"Style"}},[n("table",{staticClass:"properties-table"},[n("tbody",[n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Background")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("color-picker",{attrs:{color:e.schemeContainer.scheme.style.backgroundColor},on:{input:function(t){return e.onSchemeStylePropertyChange("backgroundColor",arguments[0])}}})],1)]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Grid")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("color-picker",{attrs:{color:e.schemeContainer.scheme.style.gridColor},on:{input:function(t){return e.onSchemeStylePropertyChange("gridColor",arguments[0])}}})],1)]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Bound box")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("color-picker",{attrs:{color:e.schemeContainer.scheme.style.boundaryBoxColor},on:{input:function(t){return e.onSchemeStylePropertyChange("boundaryBoxColor",arguments[0])}}})],1)]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Control points")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("color-picker",{attrs:{color:e.schemeContainer.scheme.style.controlPointsColor},on:{input:function(t){return e.onSchemeStylePropertyChange("controlPointsColor",arguments[0])}}})],1)]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Item marker")]),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("color-picker",{attrs:{color:e.schemeContainer.scheme.style.itemMarkerColor},on:{input:function(t){return e.onSchemeStylePropertyChange("itemMarkerColor",arguments[0])}}})],1)]),e._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Item marker toggled by default\n                            "),n("tooltip",[e._v("\n                                When diagram is open in view mode it will displayed markers for items that are clickable\n                            ")])],1),e._v(" "),n("td",{staticClass:"value",attrs:{width:"50%"}},[n("input",{attrs:{type:"checkbox"},domProps:{checked:e.schemeContainer.scheme.style.itemMarkerToggled},on:{input:function(t){return e.onSchemeStylePropertyChange("itemMarkerToggled",arguments[0].target.checked)}}})])])])])]),e._v(" "),n("panel",{attrs:{name:"Operations"}},[n("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.$emit("clicked-advanced-behavior-editor")}}},[n("i",{staticClass:"fas fa-running"}),e._v(" Behavior Editor")]),e._v(" "),e.supportsShapeExport?n("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.$emit("export-all-shapes")}}},[e._v("Export Shapes")]):e._e(),e._v(" "),e.supportsSchemeDeletion?n("span",{staticClass:"btn btn-danger",on:{click:function(t){return e.$emit("delete-diagram-requested")}}},[e._v("Delete Diagram")]):e._e()])],1):e._e()])}),[],!1,null,null,null).exports,rp={props:["scheme"],data:()=>({}),computed:{sanitizedDescription(){return Ih()(this.scheme.description)}}},sp=(0,Le.Z)(rp,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scheme-details"},[n("h3",[e._v(e._s(e.scheme.name))]),e._v(" "),n("div",{domProps:{innerHTML:e._s(e.sanitizedDescription)}})])}),[],!1,null,null,null).exports,op={props:{imageUrl:{type:String,default:""},primaryButton:{type:String,default:"Create"}},components:{Modal:Xe},data(){return{url:this.imageUrl,selectedFile:null,errorUploading:!1,isUploading:!1}},methods:{submitCreateImage(){this.$emit("submit-image",this.url)},onFileSelect(e){this.selectedFile=e.target.files[0]}},computed:{supportsUpload(){return this.$store.state.apiClient&&this.$store.state.apiClient.uploadFile}},watch:{selectedFile(e){e&&(this.isUploading=!0,this.errorUploading=!1,this.$store.state.apiClient.uploadFile(e).then((e=>{this.isUploading=!1,this.errorUploading=!1,this.url=e})).catch((e=>{this.isUploading=!1,this.errorUploading=!0,e.data&&e.data.message&&Jl.addErrorSystemMessage(this.$store,e.data.message)})))}}},ap=(0,Le.Z)(op,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{title:"Create Image","primary-button":e.primaryButton},on:{close:function(t){return e.$emit("close")},"primary-submit":function(t){return e.submitCreateImage()}}},[n("h5",[e._v("Image URL")]),e._v(" "),n("div",{staticClass:"image-control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Image URL..."},domProps:{value:e.url},on:{input:function(t){t.target.composing||(e.url=t.target.value)}}}),e._v(" "),e.supportsUpload?n("div",{staticClass:"file-upload-button"},[n("i",{staticClass:"fas fa-file-upload icon"}),e._v(" "),n("input",{attrs:{type:"file",accept:"image/*"},on:{change:e.onFileSelect}})]):e._e()]),e._v(" "),e.isUploading?n("div",{staticClass:"msg msg-info"},[n("i",{staticClass:"fas fa-spinner fa-spin"}),e._v(" Uploading...\n    ")]):e._e(),e._v(" "),e.errorUploading?n("div",{staticClass:"msg msg-error"},[e._v("\n        Could not upload image.\n    ")]):e._e(),e._v(" "),n("div",{staticClass:"image-preview"},[e.url.length>0?n("img",{attrs:{src:e.url}}):e._e()])])}),[],!1,null,null,null).exports,lp={components:{Modal:Xe},data:()=>({url:"",iconName:"",selectedFile:null,errorMessage:null,isUploading:!1}),methods:{submitIcon(){this.$store.state.apiClient.createArt({name:this.iconName,url:this.url}).then((e=>{this.$emit("art-created",e)})).catch((e=>{this.errorMessage="Error creating art"}))},onFileSelect(e){this.selectedFile=e.target.files[0]}},computed:{supportsUpload(){return this.$store.state.apiClient&&this.$store.state.apiClient.uploadFile}},watch:{selectedFile(e){e&&(this.iconName||(this.iconName=e.name),this.isUploading=!0,this.$store.state.apiClient.uploadFile(e).then((e=>{this.isUploading=!1,this.errorMessage=null,this.url=e})).catch((e=>{this.isUploading=!1,this.errorMessage="Unable to upload a file",e.data&&e.data.message&&Jl.addErrorSystemMessage(this.$store,e.data.message)})))}}},cp=(0,Le.Z)(lp,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{title:"Create Art Icon","primary-button":"Create"},on:{close:function(t){return e.$emit("close")},"primary-submit":function(t){return e.submitIcon()}}},[n("h5",[e._v("Icon name")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.iconName,expression:"iconName"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Name..."},domProps:{value:e.iconName},on:{input:function(t){t.target.composing||(e.iconName=t.target.value)}}}),e._v(" "),n("p",[e._v("\n        Use small images or even better - SVG icons.\n    ")]),e._v(" "),n("h5",[e._v("Image URL")]),e._v(" "),n("div",{staticClass:"image-control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Image URL..."},domProps:{value:e.url},on:{input:function(t){t.target.composing||(e.url=t.target.value)}}}),e._v(" "),e.supportsUpload?n("div",{staticClass:"file-upload-button"},[n("i",{staticClass:"fas fa-file-upload icon"}),e._v(" "),n("input",{attrs:{type:"file",accept:"image/*"},on:{change:e.onFileSelect}})]):e._e()]),e._v(" "),e.isUploading?n("div",{staticClass:"msg msg-info"},[n("i",{staticClass:"fas fa-spinner fa-spin"}),e._v(" Uploading...\n    ")]):e._e(),e._v(" "),e.errorMessage?n("div",{staticClass:"msg msg-error"},[e._v(e._s(e.errorMessage))]):e._e()])}),[],!1,null,null,null).exports,hp={props:["artList"],components:{Modal:Xe},data:()=>({selectedIndex:-1,changedArtIndex:-1}),methods:{saveArt(e){this.$store.state.apiClient.saveArt(e.id,e),this.changedArtIndex=-1},deleteArtAtIndex(e){e>=0&&e<this.artList.length&&this.$store.state.apiClient.deleteArt(this.artList[e].id).then((()=>{this.selectedIndex=-1,this.artList.splice(e,1)}))},close(){this.changedArtIndex>=0&&this.changedArtIndex<this.artList.length&&this.saveArt(this.artList[this.changedArtIndex]),this.$emit("close")}},watch:{selectedIndex(e){this.changedArtIndex>=0&&this.changedArtIndex<this.artList.length&&this.saveArt(this.artList[this.changedArtIndex])}}},dp=hp,up=(0,Le.Z)(dp,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{title:"Edit Art",width:800},on:{close:function(t){return e.close()}}},[n("div",[n("table",[n("tbody",[n("tr",[n("td",{attrs:{width:"300px"}},[e.selectedIndex<0?n("input",{staticClass:"textfield",attrs:{type:"text",disabled:!0}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.artList[e.selectedIndex].name,expression:"artList[selectedIndex].name"}],staticClass:"textfield",attrs:{type:"text"},domProps:{value:e.artList[e.selectedIndex].name},on:{change:function(t){e.changedArtIndex=e.selectedIndex},input:function(t){t.target.composing||e.$set(e.artList[e.selectedIndex],"name",t.target.value)}}})]),e._v(" "),n("td",[e.selectedIndex>=0?n("span",{staticClass:"btn btn-danger",on:{click:function(t){return e.deleteArtAtIndex(e.selectedIndex)}}},[e._v("Delete")]):e._e()])])])])]),e._v(" "),n("div",{staticClass:"item-menu",staticStyle:{"max-height":"300px",overlow:"scroll"}},e._l(e.artList,(function(t,i){return n("div",{key:t.id,staticClass:"item-container",class:{selected:i===e.selectedIndex},on:{click:function(t){e.selectedIndex=i}}},[n("img",{attrs:{width:"60px",height:"60px",src:t.url}}),e._v(" "),n("span",[e._v(e._s(t.name))])])})),0)])}),[],!1,null,null,null).exports,pp=new class{constructor(){this.itemShapeProps={},this.itemTextProps={}}registerItemShapeProp(e,t,n){this.itemShapeProps.hasOwnProperty(e)||(this.itemShapeProps[e]={}),this.itemShapeProps[e][t]=JSON.stringify(n)}applyItemProps(e){const t=this.itemShapeProps[e.shape];t&&ze()(t,((t,n)=>{e.shapeProps[n]=JSON.parse(t)}));const n=this.itemTextProps[e.shape];n&&ze()(n,((t,n)=>{e.textSlots&&e.textSlots[n]&&ze()(t,((t,i)=>{e.textSlots[n][i]=JSON.parse(t)}))}))}registerItemTextProp(e,t,n,i){this.itemTextProps.hasOwnProperty(e)||(this.itemTextProps[e]={}),this.itemTextProps[e].hasOwnProperty(t)||(this.itemTextProps[e][t]={}),this.itemTextProps[e][t][n]=JSON.stringify(i)}};function mp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function fp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gp(e,t,n){if("object"!=typeof n||!Array.isArray(n.shapes))throw new Error(`Invalid shape group in ${url}`);const i=[];n.shapes.forEach((e=>{const n=function(e,t){return`ext:${t.shapeConfig.id}:${e}`}(t,e);Wl.Z.registerRawShape(n,e.shapeConfig),Array.isArray(e.shapeConfig.menuItems)&&e.shapeConfig.menuItems.forEach((e=>{i.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mp(Object(n),!0).forEach((function(t){fp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:n},e))}))})),Jl.registerShapeGroupId(e,t)}function vp(e,t){const n=function(e){const t=new Set;return Array.isArray(e)&&e.forEach((e=>{(0,mh.Hp)(e,(e=>{e.shape&&!Wl.Z.find(e.shape)&&t.add(e.shape)}))})),Array.from(t)}(e);return n&&n.length>0?function(e,t){const n=new Set;if(e.forEach((e=>{const t=e.split(":");3===t.length&&n.add(t[2])})),0===n.size)return Promise.resolve(null);const i=t.state.assetsPath||"/assets",r=i.endsWith("/")?"":"/";return Fe().get(`${i}${r}shapes/shapes.json`).then((e=>{const i=e.data;if(!i)return null;const r=new Map;return i.forEach((e=>{r.set(e.id,e)})),Promise.all(Array.from(n).map((e=>{const n=r.get(e);return n?Fe().get(n.ref).then((n=>{gp(t,e,n.data),_h.Z.$emit(_h.Z.EXTRA_SHAPE_GROUP_REGISTERED)})):Promise.resolve(null)})))}))}(n,t):Promise.resolve()}function yp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function xp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yp(Object(n),!0).forEach((function(t){bp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const wp={components:{Modal:Xe},beforeCreate(){this.isLoading=!0;const e=this.$store.state.assetsPath||"/assets",t=e.endsWith("/")?"":"/";Promise.all([Fe().get(`${e}${t}shapes/shapes.json`).then((e=>e.data)),Fe().get(`${e}${t}art/art.json`).then((e=>e.data))]).then((([e,t])=>{this.isLoading=!1,Array.isArray(e)||(e=[]),Array.isArray(t)||(t=[]);const n=e.map((e=>xp({type:"shape",used:this.$store.state.itemMenu.shapeGroupIds.has(e.id)},e))),i=t.map((e=>xp({type:"art",used:this.$store.state.itemMenu.artPackIds.has(e.ref)},e))),r=n.concat(i);r.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)),this.entries=r})).catch((e=>{this.isLoading=!1,this.errorMessage="Failed to load all shapes",console.error(e)}))},data:()=>({isLoading:!1,entries:null,selectedEntry:null,selectedEntryIdx:-1,errorMessage:null}),methods:{selectEntry(e,t){this.selectedEntryIdx=t,this.selectedEntry=e},registerSelectedShapeGroup(){"shape"===this.selectedEntry.type?this.registerShapeGroup(this.selectedEntry):"art"===this.selectedEntry.type&&this.registerArtPack(this.selectedEntry)},registerArtPack(e){this.isLoading=!0,Fe().get(e.ref).then((t=>{const n=t.data;this.isLoading=!1,Jl.addArtPack(this.$store,e.ref,n),_h.Z.$emit(_h.Z.ART_PACK_ADDED,n),e.used=!0})).catch((e=>{this.isLoading=!1,console.error(e)}))},registerShapeGroup(e){const t=e.ref;this.isLoading=!0,Fe().get(t).then((t=>{this.isLoading=!1,gp(this.$store,e.id,t.data),_h.Z.$emit(_h.Z.EXTRA_SHAPE_GROUP_REGISTERED),e.used=!0})).catch((e=>{this.isLoading=!1,console.error(e)}))}}},Cp=(0,Le.Z)(wp,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{title:"Additional shapes",width:"900"},on:{close:function(t){return e.$emit("close")}}},[e.isLoading?n("div",{staticClass:"loader"},[n("div",{staticClass:"loader-element"})]):e._e(),e._v(" "),e.errorMessage?n("div",{staticClass:"msg msg-danger"},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),e.entries?n("div",{staticClass:"external-shapes"},[n("div",{staticClass:"external-shapes-list"},[n("ul",e._l(e.entries,(function(t,i){return n("li",{class:{selected:e.selectedEntryIdx===i},on:{click:function(n){return e.selectEntry(t,i)}}},[e._v("\n                    "+e._s(t.name)+" \n                    "),t.used?n("span",{staticClass:"added"},[e._v("added")]):e._e()])})),0)]),e._v(" "),e.selectedEntry?n("div",{staticClass:"external-shape-preview"},[n("div",{staticClass:"title"},[e._v(e._s(e.selectedEntry.name))]),e._v(" "),e.selectedEntry.preview?n("div",{staticClass:"preview"},[n("img",{staticClass:"large",attrs:{src:e.selectedEntry.preview}})]):e._e(),e._v(" "),e.selectedEntry.previewImages?n("div",{staticClass:"preview"},e._l(e.selectedEntry.previewImages,(function(e){return n("div",{staticClass:"preview-icon"},[n("img",{attrs:{src:e}})])})),0):e._e(),e._v(" "),n("div",{staticClass:"buttons"},[e.selectedEntry.used?e._e():n("span",{staticClass:"btn btn-primary",on:{click:function(t){return e.registerSelectedShapeGroup()}}},[e._v("Add")])])]):n("div",{staticClass:"external-shape-preview"})]):e._e()])}),[],!1,null,null,null).exports,_p={"create-curve":"Lets you design your own complex shapes",draw:"Allows to draw complex shapes with mouse. Once the drawing is submited - it will optimize its points so that you can easily edit it later"},Ap={props:{schemeContainer:{type:Object},projectArtEnabled:{type:Boolean,default:!0}},components:{Panel:dd,CreateImageModal:ap,Modal:Xe,CustomArtUploadModal:cp,EditArtModal:up,LinkEditPopup:Pd,ItemSvg:Nh,ExtraShapesModal:Cp,ExtraShapesModal:Cp},beforeMount(){this.filterItemPanels(),_h.Z.$on(_h.Z.EXTRA_SHAPE_GROUP_REGISTERED,this.updateAllPanels),_h.Z.$on(_h.Z.ART_PACK_ADDED,this.updateAllArtPacks)},beforeDestroy(){_h.Z.$off(_h.Z.EXTRA_SHAPE_GROUP_REGISTERED,this.updateAllPanels),_h.Z.$off(_h.Z.ART_PACK_ADDED,this.updateAllArtPacks)},data(){return{customArtUploadModalShown:!1,menu:"main",artPacks:[],filteredArtPacks:[],artList:[],searchKeyword:"",errorMessage:null,editArtModalShown:!1,itemPanels:this.generateItemPanels(),filteredItemPanels:[],linkCreation:{popupShown:!1,item:null,withMouse:!1},imageCreation:{popupShown:!1,item:null,withMouse:!1},previewItem:{shown:!1,item:null,artIcon:null,gif:null,y:50,description:null},itemCreationDragged:{startedDragging:!1,item:null,pageX:0,pageY:0,imageProperty:null},extraShapesModal:{shown:!1}}},methods:{updateAllPanels(){this.itemPanels=this.generateItemPanels(),this.filterItemPanels()},generateItemPanels(){const e={};ze()(Wl.Z.getRegistry(),((t,n)=>{t.menuItems&&ze()(t.menuItems,(i=>{let r=i.group||"Ungrouped";e[r]||(e[r]={name:r,items:[]}),e[r].items.push(this.prepareItemForMenu(Uc.Z.clone(i),t,n))}))}));const t=[];return ze()(e,((e,n)=>{t.push(e)})),t},filterItemPanels(){const e=this.searchKeyword.toLowerCase();this.filteredItemPanels=Ke()(this.itemPanels,(t=>{let n=t.name.toLowerCase().indexOf(e)>=0;return{name:t.name,items:rc()(t.items,(t=>!this.searchKeyword||n||t.name.toLowerCase().indexOf(e)>=0))}}))},updateAllArtPacks(){this.filterArtPacks(),this.$forceUpdate()},safeTextMatchKeyword(e){let t=e||"";const n=this.searchKeyword.toLowerCase();return t.toLowerCase().indexOf(n)>=0},filterArtPacks(){this.filteredArtPacks=Ke()(this.$store.state.itemMenu.artPacks,(e=>{let t=this.safeTextMatchKeyword(e.name);return{id:e.id,name:e.name,link:e.link,author:e.author,icons:rc()(e.icons,(e=>!this.searchKeyword||t||this.safeTextMatchKeyword(e.name)||this.safeTextMatchKeyword(e.description)))}}))},prepareItemForMenu:(e,t,n)=>(e.item||(e.item={}),e.item.shape=n,e.item=Uc.Z.extendObject(e.item,mh.XZ),e.previewArea?e.item.area=e.previewArea:e.item.area={x:6,y:6,w:140,h:90},e.item.shape&&(0,Gl.GO)(e.item),e),showExtraShapePreviewItem(e,t){if(!e.item){const n=Wl.Z.find(t);this.prepareItemForMenu(e,n,t)}this.showPreviewItem(e)},showPreviewItem(e){(0,Gl.z9)(e.item),this.previewItem.item=e,this.previewItem.artIcon=null,this.previewItem.gif=null,this.previewItem.description=e.description,this.previewItem.shown=!0},stopPreviewItem(e){this.previewItem.item&&this.previewItem.item.name===e.name&&(this.previewItem.shown=!1)},showPreviewArt(e){this.previewItem.item=null,this.previewItem.artIcon=e,this.previewItem.gif=null,this.previewItem.description=e.description,this.previewItem.shown=!0},stopPreviewArt(e){this.previewItem.artIcon&&this.previewItem.artIcon.name===e.name&&(this.previewItem.shown=!1)},showPreviewGif(e){this.previewItem.item=null,this.previewItem.artIcon=null,this.previewItem.gif=e,this.previewItem.description=_p[e]?_p[e]:null,this.previewItem.shown=!0},stopPreviewGif(e){this.previewItem.gif===e&&(this.previewItem.shown=!1)},onArtCreated(e){this.artList.push(e),this.customArtUploadModalShown=!1},onItemPicked(e){if(this.itemCreationDragged.startedDragging)return;const t=Uc.Z.clone(e.item);return t.name=this.schemeContainer.generateUniqueName(e.name),"link"===e.item.shape?(this.linkCreation.item=t,this.linkCreation.withMouse=!0,void(this.linkCreation.popupShown=!0)):e.imageProperty?(this.itemCreationDragged.imageProperty=e.imageProperty,this.imageCreation.item=t,this.imageCreation.withMouse=!0,void(this.imageCreation.popupShown=!0)):void _h.Z.$emit(_h.Z.START_CREATING_ITEM,t)},linkSubmited(e){this.linkCreation.popupShown=!1;const t=Uc.Z.clone(this.linkCreation.item);t.name=this.makeUniqueName("Link"),t.shapeProps.url=e.url,t.textSlots.link.text=e.title,t.shapeProps.icon=e.type,pp.applyItemProps(t),this.linkCreation.withMouse?_h.Z.$emit(_h.Z.START_CREATING_ITEM,t):_h.Z.emitItemCreationDraggedToSvgEditor(t,this.itemCreationDragged.pageX+2,this.itemCreationDragged.pageY+2)},onImageSubmited(e){this.imageCreation.popupShown=!1;var t=new Image;const n=this,i=Uc.Z.clone(n.imageCreation.item);i.name=n.makeUniqueName("Image"),i.id=ec().generate(),i.area={x:0,y:0,w:100,h:100},Uc.Z.setObjectProperty(i,n.itemCreationDragged.imageProperty,e),this.imageCreation.withMouse?_h.Z.$emit(_h.Z.START_CREATING_ITEM,i):(t.onload=function(){this.width>1&&this.height>1&&(i.area={x:0,y:0,w:this.width,h:this.height},_h.Z.emitItemCreationDraggedToSvgEditor(i,n.itemCreationDragged.pageX+2,n.itemCreationDragged.pageY+2))},t.onerror=e=>{_h.Z.emitItemCreationDraggedToSvgEditor(i,n.itemCreationDragged.pageX+2,n.itemCreationDragged.pageY+2)},t.src=e)},makeUniqueName(e){return this.schemeContainer.copyNameAndMakeUnique(e)},initiateSelectAndDrag(){_h.Z.$emit(_h.Z.CANCEL_CURRENT_STATE)},initiateCurveCreation(){const e={name:this.makeUniqueName("Path"),area:{x:0,y:0,w:100,h:100,r:0,sx:1,sy:1,px:.5,py:.5},shape:"path",shapeProps:{paths:[]}};(0,Gl.z9)(e),_h.Z.$emit(_h.Z.START_CURVE_EDITING,e)},initiateDrawing(e){_h.Z.$emit(_h.Z.START_DRAWING)},preventEvent(e){e.preventDefault(),e.stopPropagation()},onArtMouseDown(e,t){const n={id:ec().generate(),cursor:"default",opacity:100,blendMode:"normal",name:this.makeUniqueName(t.name),description:"",text:"",links:[],shape:"rect",area:{x:0,y:0,w:100,h:60},shapeProps:{strokeSize:0,fill:{type:"image",image:t.url}}};(0,Gl.z9)(n),this.onItemMouseDown(e,{item:n,name:n.name},!0)},onItemMouseDown(e,t,n){const i=this,r=this.$refs.itemDragger,s=Uc.Z.clone(t.item);n||"sticky_note"===s.shape||pp.applyItemProps(s);let o=0;t.previewArea?(s.area.w=t.previewArea.w,s.area.h=t.previewArea.h):(s.area.w=100,s.area.h=60),t.size&&(s.area.w=t.size.w,s.area.h=t.size.h),this.itemCreationDragged.item=s,this.itemCreationDragged.startedDragging=!1,t.imageProperty?this.itemCreationDragged.imageProperty=t.imageProperty:this.itemCreationDragged.imageProperty=null;const a=e.pageX,l=e.pageY;function c(e){var t,n;0===e.buttons&&d(),t=e.pageX,n=e.pageY,o+=Math.abs(t-a)+Math.abs(n-l),!i.itemCreationDragged.startedDragging&&o>10&&(i.itemCreationDragged.startedDragging=!0),r.style.left=`${t+2}px`,r.style.top=`${n+2}px`,i.itemCreationDragged.pageX=t,i.itemCreationDragged.pageY=n}function h(e){var n,r;d(),Uc.Z.domHasParentNode(e.target,(e=>"svg_plot"===e.id))?(n=e.pageX,r=e.pageY,i.itemCreationDragged.pageX=n,i.itemCreationDragged.pageY=r,"link"===t.item.shape?(i.linkCreation.item=s,i.linkCreation.withMouse=!1,i.linkCreation.popupShown=!0):t.imageProperty?(i.itemCreationDragged.imageProperty=t.imageProperty,i.imageCreation.item=s,i.imageCreation.withMouse=!1,i.imageCreation.popupShown=!0):(s.id=ec().generate(),s.area={x:0,y:0,w:s.area.w,h:s.area.h},s.name=i.makeUniqueName(t.name),_h.Z.emitItemCreationDraggedToSvgEditor(s,n+2,r+2))):o<10&&i.onItemPicked(t)}function d(){i.itemCreationDragged.startedDragging=!1,i.itemCreationDragged.item=null,document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",h)}document.addEventListener("mousemove",c),document.addEventListener("mouseup",h)},closeArtPack(e){Jl.removeArtPack(this.$store,e.id),this.filterArtPacks()}},watch:{searchKeyword(){this.filterItemPanels(),this.filterArtPacks()}},computed:{previewWidth(){return this.previewItem&&this.previewItem.item&&this.previewItem.item.item?this.previewItem.item.item.area.w+this.previewItem.item.item.area.x+10:150},previewHeight(){return this.previewItem&&this.previewItem.item&&this.previewItem.item.item?this.previewItem.item.item.area.h+this.previewItem.item.item.area.y+10:150},extraShapeGroups(){return this.$store.getters.extraShapeGroups}}},Sp=(0,Le.Z)(Ap,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"create-item-menu"},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyword,expression:"searchKeyword"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Search..."},domProps:{value:e.searchKeyword},on:{input:function(t){t.target.composing||(e.searchKeyword=t.target.value)}}}),e._v(" "),n("div",{staticClass:"item-menu"},[n("div",{staticClass:"item-container",attrs:{title:"Select/Drag"},on:{click:function(t){return e.initiateSelectAndDrag()}}},[n("img",{attrs:{src:"/assets/images/icons/select.svg",width:"35",height:"30"}})]),e._v(" "),n("div",{staticClass:"item-container",attrs:{title:"Create Path"},on:{click:function(t){return e.initiateCurveCreation()},mouseover:function(t){return e.showPreviewGif("create-curve")},mouseleave:function(t){return e.stopPreviewGif("create-curve")}}},[n("img",{attrs:{src:"/assets/images/icons/create-curve.svg",width:"35",height:"30"}})]),e._v(" "),n("div",{staticClass:"item-container",attrs:{title:"Draw"},on:{click:function(t){return e.initiateDrawing()},mouseover:function(t){return e.showPreviewGif("draw")},mouseleave:function(t){return e.stopPreviewGif("draw")}}},[n("img",{attrs:{src:"/assets/images/icons/draw.svg",width:"35",height:"30"}})])]),e._v(" "),e._l(e.filteredItemPanels,(function(t){return t.items.length>0?n("panel",{attrs:{name:t.name}},[n("div",{staticClass:"item-menu"},e._l(t.items,(function(t){return n("div",{staticClass:"item-container",attrs:{title:t.name},on:{mouseleave:function(n){return e.stopPreviewItem(t)},mouseover:function(n){return e.showPreviewItem(t)},mousedown:function(n){return e.onItemMouseDown(n,t)},dragstart:e.preventEvent,drag:e.preventEvent}},[t.iconUrl?n("img",{attrs:{src:t.iconUrl,width:"42px",height:"32px"}}):t.iconSVG?n("svg",{attrs:{width:"42px",height:"32px"},domProps:{innerHTML:e._s(t.iconSVG)}}):e._e()])})),0)]):e._e()})),e._v(" "),e._l(e.extraShapeGroups,(function(t){return n("panel",{attrs:{name:t.name}},[n("div",{staticClass:"item-menu"},e._l(t.items,(function(t){return n("div",{staticClass:"item-container",attrs:{title:t.name},on:{mouseleave:function(n){return e.stopPreviewItem(t)},mouseover:function(n){return e.showExtraShapePreviewItem(t,t.id)},mousedown:function(n){return e.onItemMouseDown(n,t)},dragstart:e.preventEvent,drag:e.preventEvent}},[t.iconUrl?n("img",{attrs:{src:t.iconUrl,width:"42px",height:"32px"}}):t.iconSVG?n("svg",{attrs:{width:"42px",height:"32px"},domProps:{innerHTML:e._s(t.iconSVG)}}):e._e()])})),0)])})),e._v(" "),e.projectArtEnabled?n("panel",{attrs:{name:"Project Art"}},[n("span",{staticClass:"btn btn-primary",attrs:{title:"Upload art icon"},on:{click:function(t){e.customArtUploadModalShown=!0}}},[n("i",{staticClass:"fas fa-file-upload"})]),e._v(" "),n("span",{staticClass:"btn btn-primary",attrs:{title:"Edit art icons"},on:{click:function(t){e.editArtModalShown=!0}}},[n("i",{staticClass:"fas fa-pencil-alt"})]),e._v(" "),n("div",{staticClass:"item-menu"},e._l(e.artList,(function(t){return!e.searchKeyword||e.safeTextMatchKeyword(t.name)?n("div",{staticClass:"item-container",on:{mouseover:function(n){return e.showPreviewArt(t)},mouseleave:function(n){return e.stopPreviewArt(t)},mousedown:function(n){return e.onArtMouseDown(n,t)},dragstart:e.preventEvent,drag:e.preventEvent}},[n("img",{attrs:{src:t.url}})]):e._e()})),0)]):e._e(),e._v(" "),e._l(e.filteredArtPacks,(function(t){return t.icons.length>0?n("panel",{attrs:{name:t.name,closable:!0},on:{close:function(n){return e.closeArtPack(t)}}},[n("div",{staticClass:"art-pack"},[n("div",{staticClass:"art-pack-author"},[e._v("Created by "),n("a",{attrs:{href:t.link}},[e._v(e._s(t.author))])]),e._v(" "),n("div",{staticClass:"item-menu"},e._l(t.icons,(function(t){return!e.searchKeyword||e.safeTextMatchKeyword(t.name)||e.safeTextMatchKeyword(t.description)?n("div",{staticClass:"item-container",on:{mouseover:function(n){return e.showPreviewArt(t)},mouseleave:function(n){return e.stopPreviewArt(t)},mousedown:function(n){return e.onArtMouseDown(n,t)},dragstart:e.preventEvent,drag:e.preventEvent}},[n("img",{attrs:{src:t.url,title:t.name+" "+t.description}})]):e._e()})),0)])]):e._e()})),e._v(" "),n("div",{staticClass:"section"},[n("span",{staticClass:"btn btn-secondary btn-block",on:{click:function(t){e.extraShapesModal.shown=!0}}},[e._v("More shapes ")])])],2),e._v(" "),e.imageCreation.popupShown?n("create-image-modal",{on:{close:function(t){e.imageCreation.popupShown=!1},"submit-image":function(t){return e.onImageSubmited(arguments[0])}}}):e._e(),e._v(" "),e.customArtUploadModalShown?n("custom-art-upload-modal",{on:{close:function(t){e.customArtUploadModalShown=!1},"art-created":e.onArtCreated}}):e._e(),e._v(" "),e.editArtModalShown?n("edit-art-modal",{attrs:{"art-list":e.artList},on:{close:function(t){e.editArtModalShown=!1}}}):e._e(),e._v(" "),e.errorMessage?n("modal",{attrs:{title:"Error"},on:{close:function(t){e.errorMessage=null}}},[e._v("\n        "+e._s(e.errorMessage)+"\n    ")]):e._e(),e._v(" "),e.extraShapesModal.shown?n("ExtraShapesModal",{on:{close:function(t){e.extraShapesModal.shown=!1}}}):e._e(),e._v(" "),e.linkCreation.popupShown?n("link-edit-popup",{attrs:{edit:!1},on:{"submit-link":e.linkSubmited,close:function(t){e.linkCreation.popupShown=!1}}}):e._e(),e._v(" "),e.previewItem.shown?n("div",{staticClass:"preview-item"},[n("div",{staticClass:"item-container"},[e.previewItem.item?n("div",[n("h4",[e._v(e._s(e.previewItem.item.name))]),e._v(" "),e.previewItem.item.item?n("svg",{attrs:{width:e.previewWidth+"px",height:e.previewHeight+"px"}},[n("item-svg",{attrs:{item:e.previewItem.item.item,mode:"edit"}})],1):e._e()]):e._e(),e._v(" "),e.previewItem.artIcon?n("div",[n("h4",[e._v(e._s(e.previewItem.artIcon.name))]),e._v(" "),n("img",{staticClass:"preview-art",attrs:{src:e.previewItem.artIcon.url}})]):e._e(),e._v(" "),e.previewItem.gif?n("div",[n("img",{staticStyle:{"max-width":"100%"},attrs:{src:"/assets/images/animations/"+e.previewItem.gif+".gif"}})]):e._e(),e._v(" "),e.previewItem.description?n("div",{staticClass:"preview-item-description"},[e._v(e._s(e.previewItem.description))]):e._e()])]):e._e(),e._v(" "),n("div",{ref:"itemDragger",staticStyle:{position:"fixed"},style:{display:e.itemCreationDragged.item&&e.itemCreationDragged.startedDragging?"inline-block":"none"}},[e.itemCreationDragged.item&&e.itemCreationDragged.startedDragging?n("svg",{attrs:{width:e.itemCreationDragged.item.area.x+e.itemCreationDragged.item.area.w+50+"px",height:e.itemCreationDragged.item.area.y+e.itemCreationDragged.item.area.h+50+"px"}},[n("item-svg",{attrs:{item:e.itemCreationDragged.item,mode:"edit"}})],1):e._e()])],1)}),[],!1,null,null,null).exports,kp={props:["item","x","y"],beforeMount(){this.timeMounted=(new Date).getTime(),document.body.addEventListener("click",this.onBodyClick)},mounted(){const e=document.getElementById(this.domId).getBoundingClientRect(),t=Math.min(0,window.innerWidth-this.x-e.width),n=Math.min(0,window.innerHeight-this.y-e.height);this.positionLeft=this.x+t,this.positionTop=this.y+n},beforeDestroy(){document.body.removeEventListener("click",this.onBodyClick)},data(){const e=Math.min(200,window.innerWidth-60),t=Math.min(700,window.innerWidth-60),n=Math.min(500,window.innerHeight-60);return{domId:`item-tooltip-${this.item.id}`,timeMounted:0,positionLeft:this.x,positionTop:this.y,minWidth:e,maxWidth:t,maxHeight:n,tooltipBackground:this.item.tooltipBackground||"#eeeeee",tooltipColor:this.item.tooltipColor||"#111111"}},methods:{onBodyClick(e){(new Date).getTime()-this.timeMounted>200&&(this.isInsideTooltip(e.srcElement)||this.$emit("close"))},isInsideTooltip:e=>!!e.closest('[data-type="item-tooltip"]')},computed:{tooltipStyle(){return{left:this.positionLeft+"px",top:this.positionTop+"px",background:this.tooltipBackground,color:this.tooltipColor,padding:"10px","min-width":`${this.minWidth}px`,"max-width":`${this.maxWidth}px`,"max-height":`${this.maxHeight}px`}},sanitizedItemDescription(){return Ih()(this.item.description)}}},Ip=(0,Le.Z)(kp,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item-tooltip",style:e.tooltipStyle,attrs:{id:e.domId,"data-type":"item-tooltip"}},[n("div",{staticClass:"tooltip-header"},[n("span",{staticClass:"item-tooltip-close",style:{color:e.tooltipColor},on:{click:function(t){return e.$emit("close")}}},[e._v("")]),e._v(" "),n("h3",{style:{color:e.tooltipColor}},[e._v(e._s(e.item.name))])]),e._v(" "),n("div",{staticClass:"item-tooltip-body",domProps:{innerHTML:e._s(e.sanitizedItemDescription)}})])}),[],!1,null,null,null).exports,Pp={props:{x:Number,y:Number,connectorItemId:String,schemeContainer:Object},components:{ItemSvg:Nh},mounted(){document.body.addEventListener("click",this.onBodyClick),document.body.addEventListener("keydown",this.onGlobalKeydown);const e=this.$refs.panelContainer.getBoundingClientRect();e.bottom>window.innerHeight&&(this.position.top=window.innerHeight-e.height-40),e.right>window.innerWidth&&(this.position.left=window.innerWidth-e.width-40)},beforeDestroy(){document.body.removeEventListener("click",this.onBodyClick),document.body.removeEventListener("keydown",this.onGlobalKeydown)},data(){const e=[];return ze()(Wl.Z.getRegistry(),((t,n)=>{t.menuItems&&ze()(t.menuItems,(t=>{if(!t.imageProperty){const i=Uc.Z.clone(t);i.item||(i.item={}),i.item.shape=n,e.push(Uc.Z.clone(i))}}))})),{itemEntries:e,position:{left:this.x,top:this.y}}},methods:{onDestinationItemSelected(e){const t=Uc.Z.clone(e.item);t.name=e.name,this.enrichItem(t),this.$emit("item-selected",t),this.$emit("close")},enrichItem(e){(0,Gl.z9)(e),(0,Gl.GO)(e)},onBodyClick(e){e.target&&e.target.closest(".connector-destination-proposal")||this.$emit("close")},onGlobalKeydown(e){this.$emit("close")}}},Ep=(0,Le.Z)(Pp,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"panelContainer",staticClass:"connector-destination-proposal",style:{left:e.position.left+"px",top:e.position.top+"px"},attrs:{oncontextmenu:"return false;"}},[n("div",{staticClass:"item-menu"},e._l(e.itemEntries,(function(t){return n("div",{staticClass:"item-container",attrs:{title:t.name},on:{click:function(n){return e.onDestinationItemSelected(t)}}},[t.iconUrl?n("img",{attrs:{src:t.iconUrl,width:"42px",height:"32px"}}):e._e()])})),0)])}),[],!1,null,null,null).exports,Tp=[{label:"y",value:31536e3},{label:"m",value:2678400},{label:"w",value:604800},{label:"d",value:86400},{label:"h",value:3600},{label:"m",value:60},{label:"s",value:1}];function Mp(e){"placeholder"===e.kind&&(e.isLoading=!1,e.failedLoading=!1,e.isDeleting=!1),e.formatedTime=new Date(e.time).toLocaleString()}const Op={props:{entityId:{type:String},comments:{type:Object,default:{enabled:!1,allowed:!1,isAdmin:!1,counter:0,provider:null}}},components:{MenuDropdown:nc},beforeMount(){this.comments.provider?this.comments.provider.getComments(null).then((e=>{ze()(e.comments,Mp),this.messages=e.comments,this.isLoading=!1})).catch((e=>{console.error(e),this.isLoading=!1})):this.isLoading=!1},data:()=>({messages:[],newMessage:"",isLoading:!0,commentOptions:[{name:"Delete this comment",iconClass:"fas fa-trash-alt",event:"delete-comment"}]}),methods:{leaveComment(){0!==this.newMessage.length&&(this.isLoading=!0,this.comments.provider.leaveComment(this.newMessage).then((e=>{this.isLoading=!1,this.messages.push(e),this.newMessage=""})).catch((e=>{console.error(e),this.isLoading=!1})))},loadMoreComments(e){this.messages[e].failedLoading=!1,this.messages[e].isLoading=!0,this.$forceUpdate(),this.comments.provider.getComments(this.messages[e].timeRange).then((t=>{ze()(t.comments,Mp),this.messages.splice(e,1);const n=this.messages.slice(0,e),i=this.messages.slice(e);this.messages=n.concat(t.comments).concat(i),this.$forceUpdate()})).catch((t=>{console.error(t),this.messages[e].failedLoading=!0,this.$forceUpdate()}))},deleteComment(e){const t=this.messages[e];t.id&&(this.messages[e].isDeleting=!0,this.comments.provider.deleteComment(t.id).then((()=>{this.messages.splice(e,1)})).catch((t=>{console.error(t),this.messages[e].isDeleting=!1,Jl.addErrorSystemMessage(this.$store,"Was not able to delete comment")})))}},computed:{isTextEmpty(){return 0===this.newMessage.length}},filters:{formatTimeAgo(e){const t=new Date(e),n=new Date;return function(e,t){let n="",i=0,r=e;for(let e=0;e<Tp.length&&i<1;e++){const t=Tp[e],s=Math.floor(r/t.value);s>0&&(i>0&&(n+=" "),n+=s+t.label,r-=s*t.value,i++)}return n+" ago"}(Math.floor((n.getTime()-t.getTime())/1e3))}}},Dp=Op,$p=(0,Le.Z)(Dp,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comments-container"},[n("h3",[e._v("Comments")]),e._v(" "),n("div",{class:{"comments-loading":e.isLoading}},[e._l(e.messages,(function(t,i){return n("div",["placeholder"===t.kind?n("div",{staticClass:"comment-more-placeholder"},[e._m(0,!0),e._v(" "),t.isLoading?n("div",[n("i",{staticClass:"fas fa-spinner fa-spin fa-1x"}),e._v(" "),n("span",[e._v("Loading...")])]):t.failedLoading?n("div",[n("span",{staticClass:"hint hint-small"},[e._v("Sorry, something went wrong")]),e._v(" "),n("div",{staticClass:"hint hint-small"},[n("span",{staticClass:"link",on:{click:function(t){return e.loadMoreComments(i)}}},[e._v("Try again")])])]):n("div",[n("span",{staticClass:"hint hint-small"},[e._v("There are more comments that were not loaded")]),e._v(" "),n("div",{staticClass:"hint hint-small"},[n("span",{staticClass:"link",on:{click:function(t){return e.loadMoreComments(i)}}},[e._v("Load more comments")])])]),e._v(" "),e._m(1,!0)]):n("div",{staticClass:"comment-container",class:{"comment-deleting":t.isDeleting}},[n("div",{staticClass:"comment-header"},[t.user?n("a",{staticClass:"comment-user-name",attrs:{href:t.user.link}},[e._v(e._s(t.user.name))]):e._e(),e._v(" "),n("span",{staticClass:"timestamp",attrs:{title:t.formatedTime}},[e._v(e._s(e._f("formatTimeAgo")(t.time)))]),e._v(" "),e.comments.isAdmin||t.own?n("MenuDropdown",{attrs:{iconClass:"fas fa-ellipsis-v",options:e.commentOptions},on:{"delete-comment":function(t){return e.deleteComment(i)}}}):e._e()],1),e._v(" "),n("div",{staticClass:"comment-body"},[n("pre",[e._v(e._s(t.text))])])])])})),e._v(" "),e.comments.allowed?n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],staticClass:"textfield",domProps:{value:e.newMessage},on:{input:function(t){t.target.composing||(e.newMessage=t.target.value)}}}),e._v(" "),n("span",{staticClass:"btn btn-primary",class:{disabled:e.isTextEmpty},on:{click:e.leaveComment}},[e._v("Leave Comment")])]):e._e()],2),e._v(" "),e.isLoading?n("div",{staticClass:"loading-splash"},[n("i",{staticClass:"fas fa-spinner fa-spin fa-1x"}),e._v(" "),n("span",[e._v("Loading...")])]):e._e()])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"comment-ellipsis"},[t("i",{staticClass:"fas fa-ellipsis-h"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"comment-ellipsis"},[t("i",{staticClass:"fas fa-ellipsis-h"})])}],!1,null,null,null).exports;function Bp(e){for(let t=e.childNodes.length-1;t>=0;t--){let n=e.childNodes[t];n&&n.nodeType===Node.ELEMENT_NODE?"true"===n.getAttribute("data-preview-ignore")?e.removeChild(n):("p"===n.nodeName.toLowerCase()&&(n.style.marginTop=0,n.style.marginBottom=0,n.style.padding=0,n.style.minHeight="18px"),Bp(n)):n&&n.nodeType===Node.COMMENT_NODE&&e.removeChild(n)}}function Lp(e,t){if(t||(t=[]),"image"===e.tagName){const n=e.getAttribute("xlink:href");n&&!n.startsWith("data:")&&t.push(e)}return ze()(e.childNodes,(e=>{Lp(e,t)})),t}function Np(e){const t=Lp(e),n=[];return ze()(t,(e=>{n.push(function(e){const t=e.getAttribute("xlink:href");return new Promise(((n,i)=>{const r=document.createElement("img");r.setAttribute("crossorigin","anonymous"),r.onload=()=>{try{const t=document.createElement("canvas"),i=e.getAttribute("width"),s=e.getAttribute("height");t.width=i,t.height=s;let o=0,a=0,l=i,c=s;if("none"!==e.getAttribute("preserveAspectRatio")&&r.width>0&&r.height>0){const e=Math.min(i/r.width,s/r.height);o=i/2-r.width/2*e,a=s/2-r.height/2*e,l=r.width*e,c=r.height*e}t.getContext("2d").drawImage(r,o,a,l,c);const h=t.toDataURL("image/png");e.setAttribute("xlink:href",h),n()}catch(e){console.error("Could not convert image "+imageURL+" to dataURL",e),i()}},r.onerror=()=>{i()},r.src=t}))}(e))})),Promise.all(n)}function Rp(e){return{encodeURLHash(e){let t="",n=!0;return ze()(e,((e,i)=>{n||(t+="&"),t+=i+"="+encodeURIComponent(e),n=!1})),t},decodeURLHash(t){if(t.startsWith("#")&&(t=t.substring(1)),!t)return{};const n={};let i=t;if("hash"===e){const e=t.indexOf("?");if(!(e>=0))return{};i=t.substring(e+1)}const r=i.split("&");return ze()(r,(e=>{const t=e.split("=");t.length>1&&(n[t[0]]=decodeURIComponent(t[1]))})),n},changeURLHash(t){const n=this.encodeURLHash(t);if("hash"===e){let e=location.hash;const t=location.hash.indexOf("?");t>=0&&(e=location.hash.substring(0,t)),0===e.length&&"#"!==e.charAt(0)&&(e="#"+e),history.pushState(null,null,e+"?"+n)}else history.pushState(null,null,"#"+n)}}}class Fp{constructor(e){e=e||{},this.checkpoints=[],this.size=e.size||30,this.currentPosition=0,this.lastAffinityId=null}commit(e,t){t&&t===this.lastAffinityId?this.checkpoints[this.currentPosition]=Uc.Z.clone(e):(this.lastAffinityId=t,this.currentPosition<this.checkpoints.length-1&&this.currentPosition>=0&&this.checkpoints.splice(this.currentPosition+1,this.checkpoints.length-this.currentPosition),this.checkpoints.length>=this.size&&this.checkpoints.shift(),this.checkpoints.push(Uc.Z.clone(e)),this.currentPosition=this.checkpoints.length-1)}undo(){return this.lastAffinityId=null,this.currentPosition>0&&(this.currentPosition-=1),this.current()}redo(){return this.lastAffinityId=null,this.currentPosition<this.checkpoints.length-1&&(this.currentPosition+=1),this.current()}current(){return this.currentPosition<this.checkpoints.length?Uc.Z.clone(this.checkpoints[this.currentPosition]):null}undoable(){return this.currentPosition>0}redoable(){return this.currentPosition<this.checkpoints.length-1}}const Zp=qc("item-selector",5);function jp(e,t,n){e&&ze()(e,(e=>{n(e,t),e.childItems&&jp(e.childItems,e,n)}))}const zp={props:["schemeContainer","minHeight"],mounted(){document.body.addEventListener("mouseup",this.onMouseUp),_h.Z.$on(_h.Z.ANY_ITEM_SELECTED,this.onAnyItemSelected),_h.Z.$on(_h.Z.ANY_ITEM_DESELECTED,this.onAnyItemDeselected),this.scrollToSelection()},beforeDestroy(){document.body.removeEventListener("mouseup",this.onMouseUp),_h.Z.$off(_h.Z.ANY_ITEM_SELECTED,this.onAnyItemSelected),_h.Z.$off(_h.Z.ANY_ITEM_DESELECTED,this.onAnyItemDeselected)},data(){const e=parseInt(Zp.get("height",0));return{searchKeyword:"",height:uh.Z.clamp(e,this.minHeight,1e3),dragging:{items:[],destinationId:null,dropInside:!1,dropAbove:!1,readyToDrop:!1,previewItemName:"Drop here",startedDragging:!1,pageX:0,pageY:0,padding:0},nameEdit:{itemId:null,name:""},filteredItems:this.schemeContainer.getItems(),lastClickedItem:null}},methods:{scrollToSelection(){if(1===this.schemeContainer.selectedItems.length){const e=this.schemeContainer.selectedItems[0].id,t=this.$refs[`row_${e}`];if(t&&t.length>=1){const e=t[0],n=this.$refs.itemSelectorContainer;if(e&&n){const t=e.offsetTop-n.offsetTop,i=n.getBoundingClientRect().height,r=t-n.scrollTop;(r<-5||r>i-5)&&(n.scrollTop=Math.max(0,t-20))}}}},onMouseUp(e){if(e.target&&"item-name-edit-in-place"===e.target.getAttribute("data-type"))return!0;this.nameEdit.itemId=null},cancelNameEdit(){this.nameEdit.itemId=null},preventEvent(e){e.preventDefault(),e.stopPropagation()},onItemMouseDown(e,t){if(t.target&&("item-name-edit-in-place"===t.target.getAttribute("data-type")||t.target.closest(".item-collapser")))return!0;const n=t;if(t.shiftKey&&this.lastClickedItem){const t=this.schemeContainer.findItemById(this.lastClickedItem.id);if(t)return this.selectItemsVertically(t,e),void(this.lastClickedItem=e);this.lastClickedItem=null}this.lastClickedItem=e,this.nameEdit.itemId&&this.nameEdit.itemId!==e.id&&(this.nameEdit.itemId=null),t.shiftKey||this.schemeContainer.isItemSelected(e)||this.schemeContainer.selectItem(e,t.metaKey||t.ctrlKey),2===t.button&&_h.Z.emitRightClickedItem(e,t.pageX,t.pageY),dh(t).withDraggedElement(this.$refs.itemDragger).withDroppableClass("item-droppable-area").withScrollableElement(this.$refs.itemSelectorContainer).onDragStart((t=>{this.dragging.items=[].concat(this.schemeContainer.selectedItems);const n=new Set;let i=!1;for(let t=0;t<this.dragging.items.length&&!i;t++)this.dragging.items[t].id===e.id&&(i=!0);i||this.dragging.items.unshift(e),this.dragging.items.forEach((e=>{(0,mh.Hp)(e,(e=>{n.add(e.id)}))}));const r=[];this.dragging.items.forEach((e=>{let t=!1;for(let i=0;i<e.meta.ancestorIds.length&&!t;i++)n.has(e.meta.ancestorIds[i])&&(t=!0);t||r.push(e)})),this.dragging.items=r,this.dragging.previewItemName=e.name,this.dragging.startedDragging=!0,this.filteredItems=rc()(this.filterItemsByKeyword(this.searchKeyword),(e=>!n.has(e.id))),this.$forceUpdate()})).onDrag((e=>{this.dragging.pageX=e.pageX,this.dragging.pageY=e.pageY})).onDragOver(((e,t)=>{const n=t.getBoundingClientRect();let i=this.schemeContainer.findItemById(t.getAttribute("data-item-id")),r=e.clientY<n.top+n.height/2;if(r){let e=0,t=!1;for(;e<this.filteredItems.length&&!t;e++)this.filteredItems[e].id===i.id&&e>0&&(t=!0,i=this.filteredItems[e-1],r=!1)}const s=this.dragging.pageX-n.left-25*i.meta.ancestorIds.length-15;if(this.dragging.destinationId=i.id,this.dragging.dropInside=s>35,s<0&&i.meta.ancestorIds.length>0){const e=uh.Z.clamp(Math.ceil(Math.abs(s/25)),1,i.meta.ancestorIds.length);this.dragging.destinationId=i.meta.ancestorIds[i.meta.ancestorIds.length-e]}this.dragging.dropAbove=r,this.dragging.readyToDrop=!0,this.dragging.padding=25*(i.meta.ancestorIds.length+(this.dragging.dropInside?1:0))+15})).onDone((()=>{if(this.dragging.startedDragging||n.shiftKey||this.schemeContainer.selectItem(e,n.metaKey||n.ctrlKey),this.dragging.startedDragging=!1,this.dragging.readyToDrop&&this.dragging.items.length>0&&this.dragging.destinationId){let e=null;e=this.dragging.dropAbove?e=>{this.schemeContainer.remountItemBeforeOtherItem(e.id,this.dragging.destinationId)}:this.dragging.dropInside?e=>{this.schemeContainer.remountItemInsideOtherItem(e.id,this.dragging.destinationId,0)}:e=>{this.schemeContainer.remountItemAfterOtherItem(e.id,this.dragging.destinationId)};let t=this.dragging.items;this.dragging.dropAbove||(t=t.reverse()),ze()(t,(t=>{t.id!==this.dragging.destinationId&&e(t)}))}this.dragging.items=[],this.dragging.destinationId=null,this.filteredItems=this.filterItemsByKeyword(this.searchKeyword)})).build()},onItemDoubleClicked(e){this.nameEdit.name=e.name,this.nameEdit.itemId=e.id,this.$nextTick((()=>{const e=this.$refs.nameEditInput;e&&(Array.isArray(e)?e.length>0&&e[0].focus():e.focus())}))},selectItemsVertically(e,t){let n=-1,i=-1;for(let r=0;r<this.filteredItems.length&&(n<0||i<0);r+=1)this.filteredItems[r].id===e.id&&(n=r),this.filteredItems[r].id===t.id&&(i=r);if(n<0||i<0)return;const r=[];for(let e=Math.min(n,i);e<=Math.max(n,i);e+=1)r.push(this.filteredItems[e]);this.schemeContainer.selectMultipleItems(r,!0),this.$forceUpdate()},toggleItemCollapseState(e){e.meta.collapsed=!e.meta.collapsed,jp(e.childItems,e,((e,t)=>{e.meta.collapseBitMask=t.meta.collapseBitMask<<e.meta.ancestorIds.length|(t.meta.collapsed?1:0)})),this.$forceUpdate()},toggleItemVisibility(e){e.visible=!e.visible,_h.Z.emitItemChanged(e.id,"visible"),_h.Z.emitSchemeChangeCommited(`item.${e.id}.visible`),this.$forceUpdate()},toggleItemLock(e){e.locked=!e.locked,this.$forceUpdate()},onAnyItemSelected(){this.scrollToSelection(),this.$forceUpdate()},onAnyItemDeselected(){this.$forceUpdate()},filterItemsByKeyword(e){const t=e.toLowerCase();return rc()(this.schemeContainer.getItems(),(e=>(e.name||"").toLowerCase().indexOf(t)>=0))},onItemSelectorResizeDraggerMouseDown(e){dh(e).onDrag((e=>{const t=this.$refs.itemSelectorContainer.getBoundingClientRect(),n=e.pageY-t.bottom,i=uh.Z.clamp(this.height+n,this.minHeight,window.innerHeight-140);this.height=i,Zp.save("height",this.height)})).build()}},watch:{nameEdit:{deep:!0,handler(){if(this.nameEdit.itemId){const e=this.schemeContainer.findItemById(this.nameEdit.itemId);e&&(e.name=this.nameEdit.name,_h.Z.emitSchemeChangeCommited(`item.${e.id}.name`))}}},searchKeyword(e){this.filteredItems=e?this.filterItemsByKeyword(e):this.schemeContainer.getItems()}}},Up=zp,Hp=(0,Le.Z)(Up,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item-selector"},[n("div",{staticClass:"item-selector-top-panel"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyword,expression:"searchKeyword"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Search"},domProps:{value:e.searchKeyword},on:{input:function(t){t.target.composing||(e.searchKeyword=t.target.value)}}})]),e._v(" "),n("div",{ref:"itemSelectorContainer",staticClass:"item-selector-items",style:{height:e.height+"px","min-height":e.minHeight+"px"},attrs:{oncontextmenu:"return false;"}},e._l(e.filteredItems,(function(t,i){return n("div",{key:t.id,ref:"row_"+t.id,refInFor:!0,staticClass:"item-selector-item-row-container item-droppable-area",attrs:{"data-item-id":t.id,"data-index":i}},[e.dragging.readyToDrop&&t.id===e.dragging.destinationId&&e.dragging.dropAbove?n("div",{staticClass:"item-row item-drop-preview",style:{"padding-left":25*t.meta.ancestorIds.length+15+"px"}},[n("div",{staticClass:"item"},[n("div",{staticClass:"item-name"},[n("span",[n("i",{staticClass:"fas fa-cube"}),e._v(" "+e._s(e.dragging.previewItemName))])])])]):e._e(),e._v(" "),n("div",{staticClass:"item-row",style:{"padding-left":25*t.meta.ancestorIds.length+15+"px"}},[0===t.meta.collapseBitMask?n("div",{ref:"item_"+t.id,refInFor:!0,staticClass:"item",class:{selected:e.schemeContainer.isItemSelected(t)},on:{dragstart:e.preventEvent,drag:e.preventEvent,mousedown:function(n){return e.onItemMouseDown(t,n)},dblclick:function(n){return e.onItemDoubleClicked(t,n)}}},[t.childItems&&t.childItems.length>0?n("span",{staticClass:"item-collapser",on:{click:function(n){return e.toggleItemCollapseState(t)}}},[t.meta.collapsed?n("i",{staticClass:"fas fa-angle-right"}):n("i",{staticClass:"fas fa-angle-down"})]):e._e(),e._v(" "),n("div",{staticClass:"item-name"},[t.id!==e.nameEdit.itemId?n("span",[n("i",{staticClass:"fas fa-cube"}),e._v(" "+e._s(t.name))]):e._e(),e._v(" "),t.id===e.nameEdit.itemId?n("input",{directives:[{name:"model",rawName:"v-model",value:e.nameEdit.name,expression:"nameEdit.name"}],ref:"nameEditInput",refInFor:!0,attrs:{type:"text","data-type":"item-name-edit-in-place"},domProps:{value:e.nameEdit.name},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.cancelNameEdit()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancelNameEdit()}],input:function(t){t.target.composing||e.$set(e.nameEdit,"name",t.target.value)}}}):e._e()]),e._v(" "),n("div",{staticClass:"item-right-panel"},[n("span",{staticClass:"icon",on:{click:function(n){return e.toggleItemLock(t)}}},[t.locked?n("i",{staticClass:"fas fa-lock icon-locked"}):n("i",{staticClass:"fas fa-unlock icon-unlocked"})]),e._v(" "),n("span",{staticClass:"icon",on:{click:function(n){return e.toggleItemVisibility(t)}}},[t.visible?n("i",{staticClass:"fas fa-lightbulb icon-visible"}):n("i",{staticClass:"far fa-lightbulb icon-invisible"})])])]):e._e()]),e._v(" "),e.dragging.readyToDrop&&t.id===e.dragging.destinationId&&!e.dragging.dropAbove?n("div",{staticClass:"item-row item-drop-preview",style:{"padding-left":e.dragging.padding+"px"}},[n("div",{staticClass:"item"},[n("div",{staticClass:"item-name"},[n("span",[n("i",{staticClass:"fas fa-cube"}),e._v(" "+e._s(e.dragging.previewItemName))])])])]):e._e()])})),0),e._v(" "),n("div",{ref:"itemDragger",staticClass:"item-selector-drag-preview",staticStyle:{position:"fixed","white-space":"nowrap"},style:{display:e.dragging.startedDragging?"inline-block":"none"}},e._l(e.dragging.items,(function(t,i){return i<3?n("div",[n("span",{class:"preview-"+i},[n("i",{staticClass:"fas fa-cube"}),e._v(" "+e._s(t.name))])]):e._e()})),0),e._v(" "),n("div",{staticClass:"item-selector-resize-dragger",on:{mousedown:e.onItemSelectorResizeDraggerMouseDown}})])}),[],!1,null,null,null).exports;var Vp=n(5733),qp=n.n(Vp);const Gp={props:["scheme"],components:{Modal:Xe},data:()=>({}),methods:{exportSubmitted(){const e=new(qp()),t=Uc.Z.clone(this.scheme);e.file("scheme.json",JSON.stringify(t)),this.$store.state.apiClient.getExportHTMLResources().then((t=>{e.file("schemio-standalone.css",t.css),e.file("index.html",t.html),e.file("schemio-standalone.js",t.js),e.file("syntax-highlight-worker.js",t.syntaxHighlightWorker),e.file("syntax-highlight.css",t.syntaxHighlightCSS),e.generateAsync({type:"base64",compression:"DEFLATE",compressionOptions:{level:9}}).then((e=>{this.saveAs("scheme.zip",e),this.$emit("close")}))}))},saveAs(e,t){const n=`data:application/zip;base64,${t}`,i=document.createElement("a");document.body.appendChild(i);try{i.href=n,i.download=e,i.click()}catch(e){console.error(e)}setTimeout((()=>document.body.removeChild(i)),100)}}},Wp=(0,Le.Z)(Gp,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{title:"Export as HTML",primaryButton:"Export"},on:{close:function(t){return e.$emit("close")},"primary-submit":e.exportSubmitted}},[n("p",[e._v("\n        Exports diagram into a separate HTML page with standalone Schemio player.\n        It packages your diagram together with Schemio javascript files into a zip archive.\n    ")])])}),[],!1,null,null,null).exports;function Kp(e,t,n){e=e.replace(/[^a-zA-Z0-9\-\_\.]/g,"-").replace(/\s/g,"-");const i=`data:${t};base64,${btoa(n)}`,r=document.createElement("a");document.body.appendChild(r);try{r.href=i,r.download=e,r.click()}catch(e){console.error(e)}setTimeout((()=>document.body.removeChild(r)),100)}const Jp={props:["scheme"],components:{Modal:Xe},data:()=>({optimized:!0}),methods:{onExportSubmitted(){let e=Uc.Z.sanitizeScheme(Uc.Z.clone(this.scheme));this.optimized&&(e=(0,fh.mY)(e)),this.saveAs(`${this.scheme.name}.json`,JSON.stringify(e)),this.$emit("close")},saveAs(e,t){Kp(e,"aplication/json",t)}}},Yp=(0,Le.Z)(Jp,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{title:"Export as JSON",primaryButton:"Export"},on:{close:function(t){return e.$emit("close")},"primary-submit":e.onExportSubmitted}},[n("p",[e._v("\n        Exports diagram as JSON. You can later import the scheme back.\n    ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.optimized,expression:"optimized"}],attrs:{type:"checkbox",id:"chk-export-json-optimized"},domProps:{checked:Array.isArray(e.optimized)?e._i(e.optimized,null)>-1:e.optimized},on:{change:function(t){var n=e.optimized,i=t.target,r=!!i.checked;if(Array.isArray(n)){var s=e._i(n,null);i.checked?s<0&&(e.optimized=n.concat([null])):s>-1&&(e.optimized=n.slice(0,s).concat(n.slice(s+1)))}else e.optimized=r}}}),n("label",{attrs:{for:"chk-export-json-optimized"}},[e._v(" Optimized")]),e._v(" "),e.optimized?n("p",[e._v("\n        With "),n("b",[e._v("optimized")]),e._v(" export it will remove all the fields that have default values, and thus will only export fields that you have modified\n    ")]):n("p",[e._v("\n        With "),n("b",[e._v("unoptimized")]),e._v(" export it will export all fields in the document.\n    ")])])}),[],!1,null,null,null).exports,Qp={props:["scheme"],components:{Modal:Xe},beforeMount(){const e=JSON.stringify((0,fh.mY)(Uc.Z.sanitizeScheme(Uc.Z.clone(this.scheme)))),t=new(qp());t.file("doc.json",e),t.generateAsync({type:"base64",compression:"DEFLATE",compressionOptions:{level:9}}).then((e=>{const t={"+":".","/":"_","=":"-"},n=e.replace(/[+/=]/g,(e=>t[e])),i="offline-editor";let r="";r="hash"===(this.$router?this.$router.mode:"history")?`/#/${i}/?doc=${n}`:`/${i}#doc=${n}`,this.link=window.location.origin+r,this.$nextTick((()=>{this.$refs.textarea.focus(),this.$refs.textarea.select()}))}))},data:()=>({link:""}),methods:{copyToClipboard(){Xd(this.link)}}},Xp=(0,Le.Z)(Qp,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{title:"Export as link"},on:{close:function(t){return e.$emit("close")}}},[n("p",[e._v("\n        Exports diagram as a URL\n        "),n("span",{staticClass:"btn btn-secondary",on:{click:e.copyToClipboard}},[e._v("Copy to Clipboard")])]),e._v(" "),n("textarea",{ref:"textarea",staticStyle:{width:"100%"},attrs:{name:"link",rows:"30",readonly:"readonly"},domProps:{value:e.link}})])}),[],!1,null,null,null).exports;function em(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function tm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?em(Object(n),!0).forEach((function(t){nm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):em(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function im(e,t,n){const i=yh()(e,(e=>0===e.indexOf(t)));return i?i.substr(t.length):n}function rm(e,t,n,i,r){return{type:"path",paths:Ke()(e.shapeProps.paths,(s=>({points:Ke()(s.points,(s=>{const o=(0,Gc.oJ)(s,e.area.w,e.area.h),a=(0,Kl.rs)(o.x,o.y,e),l=tm(tm({},o),{},{x:a.x-t,y:a.y-n});if("B"===o.t){const t=(0,Kl.rs)(o.x+o.x1,o.y+o.y1,e),n=(0,Kl.rs)(o.x+o.x2,o.y+o.y2,e);l.x1=t.x-a.x,l.y1=t.y-a.y,l.x2=n.x-a.x,l.y2=n.y-a.y}return(0,Gc.Vk)(l,i,r)})),closed:s.closed})))}}function sm(e,t){let n="fill";return"none"===e.shapeProps.fill.type&&(n="none"),n=od()(e.tags,"fill-with-stroke")>=0?"strokeColor":im(e.tags,"fill-arg=",n),tm(tm({},t),{},{fillArg:n,strokeSize:e.shapeProps.strokeSize})}function om(e,t,n,i,r){const s=(0,Kl.rs)(0,0,e),o=(0,Kl.rs)(e.area.w,0,e),a=(0,Kl.rs)(0,e.area.h,e),l=(e,s)=>({x:uh.Z.roundPrecise2(100*(e-t)/i),y:uh.Z.roundPrecise2(100*(s-n)/r)}),c={type:e.shape,projection:{p0:l(s.x,s.y),pw:l(o.x,o.y),ph:l(a.x,a.y)}};return"rect"===e.shape&&(c.cornerRadiusRatio={w:0,h:0},e.area.w>0&&e.area.h>0&&(c.cornerRadiusRatio.w=uh.Z.roundPrecise2(100*e.shapeProps.cornerRadius/e.area.w),c.cornerRadiusRatio.h=uh.Z.roundPrecise2(100*e.shapeProps.cornerRadius/e.area.h))),c}function am(e){return"ellipse"===e||"rect"===e}function lm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function cm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lm(Object(n),!0).forEach((function(t){hm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dm(e,t,n){return n>1?t=e/n:n<1?e=t*n:t=e=Math.min(e,t),{w:e,h:t}}function um(e,t,n,i,r){let s=`<g transform="translate(${t}, ${n})">`;const o={area:{x:0,y:0,w:i,h:r},shapeProps:{}};return ze()(e.shapeConfig.items,(t=>{const n=(0,Gc.VE)(o,e.shapeConfig,t);let i="none";"fill"===t.fillArg?i="#ffffff":"strokeColor"===t.fillArg&&(i="#111111"),n&&(s+=`<path d="${n.path}" fill="${i}" stroke="#111111" stroke-width="${2*t.strokeSize}px" stroke-linejoin="round"/>`)})),s+"</g>"}function pm(e){const t=im(e.tags,"shape-group=",e.name),n={group:t,shapes:[],preview:null};return Array.isArray(e.items)&&e.items.forEach((e=>{const i=function(e,t){if("dummy"!==e.shape)return null;let n=im(e.tags,"shape-id=");n||(n=e.name.toLowerCase().replaceAll(/[\W_]+/g,"-"));let i=1;e.area.w>0&&e.area.h>0&&(i=e.area.w/e.area.h);const r=function(e){if("dummy"!==e.shape)throw new Error('The root item should be a "dummy" shape');const t={shapeType:"raw",pins:[],textSlots:[],items:[],outlines:[]},n=e.area.w,i=e.area.h;if(Math.abs(n)<.01||Math.abs(i)<.01)throw new Error("Root item should have proper area");const r=(0,Kl.rs)(0,0,e),s=new Set;return(0,mh.Hp)(e,(e=>{const o=(0,Kl.rs)(0,0,e);if("outline"===e.name||e.tags&&od()(e.tags,"outline")>=0)"path"===e.shape?t.outlines=t.outlines.concat(rm(e,r.x,r.y,n,i)):am(e.shape)&&(t.outlines=t.outlines.concat(om(e,r.x,r.y,n,i)));else if("path"===e.shape)t.items.push(sm(e,rm(e,r.x,r.y,n,i)));else if(am(e.shape))t.items.push(sm(e,om(e,r.x,r.y,n,i)));else if(od()(e.tags,"pin")>=0){const s=(0,Kl.rs)(e.area.w/2,e.area.h/2,e),o={x:uh.Z.roundPrecise2(100*(s.x-r.x)/n),y:uh.Z.roundPrecise2(100*(s.y-r.y)/i)};od()(e.tags,"pin-no-normal")<0&&(o.nx=uh.Z.roundPrecise(Math.cos((e.area.r-90)*Math.PI/180),4),o.ny=uh.Z.roundPrecise(Math.sin((e.area.r-90)*Math.PI/180),4)),t.pins.push(o)}else"none"===e.shape&&od()(e.tags,"text-slot")>=0&&(s.has(e.name)||(s.add(e.name),t.textSlots.push({name:e.name,area:{x:uh.Z.roundPrecise2(100*(o.x-r.x)/n),y:uh.Z.roundPrecise2(100*(o.y-r.y)/i),w:uh.Z.roundPrecise2(100*e.area.w/n),h:uh.Z.roundPrecise2(100*e.area.h/i)}})))})),{shapeConfig:t}}(e),s=function(e,t){const{w:n,h:i}=dm(42,32,t);let r=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 ${n} ${i}" xml:space="preserve" width="${n}px" height="${i}px">`;return r+=um(e,3,3,n-6,i-6),r+="</svg>",r}(r,i),o=btoa(s),a=dm(80,80,i),l=dm(150,150,i);return{name:e.name,widthToHeightRatio:i,shapeConfig:cm(cm({},r.shapeConfig),{},{id:n,menuItems:[{group:t,name:e.name,iconUrl:`data:image/svg+xml;base64,${o}`,size:{w:uh.Z.roundPrecise1(a.w),h:uh.Z.roundPrecise1(a.h)},previewArea:{x:0,y:0,w:uh.Z.roundPrecise1(l.w),h:uh.Z.roundPrecise1(l.h),r:0}}]})}}(e,t);i&&n.shapes.push(i)})),n.preview=function(e){let t=0,n=0,i="";for(let r=0;r<e.shapes.length&&t<4;r++){const{w:s,h:o}=dm(80,80,e.shapes[r].widthToHeightRatio),a=40+100*n-s/2,l=40+100*t-o/2;i+=um(e.shapes[r],a,l,s,o),n+=1,n>=5&&(n=0,t+=1)}const r=100*Math.min(e.shapes.length,5)+10,s=100*Math.min(t+1,4)+10;return"data:image/svg+xml;base64,"+btoa(`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="-10 -10 ${r+10} ${s+10}" xml:space="preserve" width="${r+20}px" height="${s+20}px">${i}</svg>`)}(n),n.shapes.forEach((e=>delete e.widthToHeightRatio)),n}const mm={props:["scheme"],components:{Modal:Xe},data(){let e=null,t=null;try{e=pm(this.scheme)}catch(e){console.error(e),t="Failed to generate shape group"}return{shapeGroup:e,errorMessage:t}},methods:{exportShapeGroup(){if(this.shapeGroup){const e=this.shapeGroup.group.toLocaleLowerCase().replaceAll(/[^a-z0-9]/gi,"-");Uc.Z.forceDownload(`${e}.json`,"application/json",JSON.stringify(this.shapeGroup))}}},computed:{primaryButton(){return this.shapeGroup?"Export":null}}},fm=(0,Le.Z)(mm,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{title:"Shape Exporter","primary-button":e.primaryButton},on:{"primary-submit":e.exportShapeGroup,close:function(t){return e.$emit("close")}}},[n("div",{staticClass:"shape-exporter-modal-body"},[n("div",{staticClass:"shape-exporter-settings"},[e.errorMessage?n("div",{staticClass:"msg msg-error"},[e._v("\n                "+e._s(e.errorMessage)+"\n            ")]):e._e(),e._v(" "),e.shapeGroup?n("div",[n("h4",[e._v(e._s(e.shapeGroup.group))]),e._v(" "),n("img",{attrs:{src:e.shapeGroup.preview,alt:""}})]):e._e()]),e._v(" "),n("div",{staticClass:"shape-exporter-shapes"},[n("table",[n("thead",[n("tr",[n("th",[e._v("ID")]),e._v(" "),n("th",[e._v("Name")]),e._v(" "),n("th",[e._v("Preview")])])]),e._v(" "),n("tbody",e._l(e.shapeGroup.shapes,(function(t){return n("tr",[n("td",[e._v(e._s(t.shapeConfig.id))]),e._v(" "),n("td",[e._v(e._s(t.name))]),e._v(" "),n("td",[n("img",{attrs:{width:"52px",height:"42px",src:t.shapeConfig.menuItems[0].iconUrl}})])])})),0)])])])])}),[],!1,null,null,null).exports,gm={props:["scheme"],components:{Modal:Xe},methods:{onImportSubmitted(){this.$emit("import-scheme-submitted",this.scheme),this.$emit("close")}}},vm=(0,Le.Z)(gm,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{title:"Import Diagram",primaryButton:"Import"},on:{close:function(t){return e.$emit("close")},"primary-submit":e.onImportSubmitted}},[e._v("\n    Are you sure you want to import "),n("b",[e._v(e._s(e.scheme.name))]),e._v("? All your current changes will be lost and overwritten with this scheme.\n")])}),[],!1,null,null,null).exports,ym={props:["mouseX","mouseY","options"],mounted(){document.body.addEventListener("mousedown",this.onDocumentClick);const e=this.$refs.rootContextMenu.getBoundingClientRect(),t=e.right-window.innerWidth,n=e.bottom-window.innerHeight;this.menuWidth=e.width,this.menuHeight=e.height,t>0&&(this.x-=t),n>0&&(this.y-=n)},beforeDestroy(){document.body.removeEventListener("mousedown",this.onDocumentClick)},data(){return{domId:ec().generate(),x:this.mouseX,y:this.mouseY,menuWidth:100,menuHeight:100,mountTime:(new Date).getTime()}},methods:{onDocumentClick(e){Uc.Z.domHasParentNode(e.target,(e=>e.classList.contains("context-menu")))||(new Date).getTime()-this.mountTime>500&&setTimeout((()=>{this.$emit("close")}),100)},onOptionSelected(e){e.subOptions||(this.$emit("selected",e),this.$emit("close"))},subOptionsStyle(e,t){const n={left:this.menuWidth-4+"px","min-width":`${this.menuWidth}px`},i=this.menuHeight/this.options.length,r=t.length*i,s=this.x+this.menuWidth,o=e*i+this.y,a=s+this.menuWidth-window.innerWidth,l=o+r-window.innerHeight;return l>0&&(n.top=-l+"px"),a>0&&(n.left=4-this.menuWidth+"px"),n}}},xm=(0,Le.Z)(ym,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"context-menu"},[n("ul",{ref:"rootContextMenu",style:{top:e.y+"px",left:e.x+"px"}},e._l(e.options,(function(t,i){return n("li",{on:{click:function(n){return e.onOptionSelected(t)}}},[n("span",{staticClass:"context-menu-suboptions-icon"},[t.subOptions?n("i",{staticClass:"fas fa-caret-right"}):e._e()]),e._v(" "),t.iconClass?n("i",{class:t.iconClass}):e._e(),e._v(" "),n("span",{staticClass:"context-menu-option-name"},[e._v(e._s(t.name))]),e._v(" "),t.subOptions?n("ul",{style:e.subOptionsStyle(i,t.subOptions)},e._l(t.subOptions,(function(t){return n("li",{on:{click:function(n){return e.onOptionSelected(t)}}},[t.iconClass?n("i",{class:t.iconClass}):e._e(),e._v(" "),n("span",{staticClass:"context-menu-option-name"},[e._v(e._s(t.name))])])})),0):e._e()])})),0)])}),[],!1,null,null,null).exports;function bm(e){return null!==e&&"object"==typeof e}function wm(e,t,n,i){let r=[];return i&&n.length>0&&!i(n)?{changes:[]}:(function(e){const t=typeof e;return"boolean"===t||"string"===t||"number"===t}(e)&&e!==t?r.push({path:n,oldValue:e,value:t}):bm(e)?r=r.concat(function(e,t,n,i){if(!bm(t))return{changes:n,oldValue:e,value:t};let r=[];return ze()(e,((e,s)=>{const o=n.concat([s]);if(t.hasOwnProperty(s)){const n=wm(e,t[s],o,i);n.changes.length>0&&(r=r.concat(n.changes))}})),{changes:r}}(e,t,n,i).changes):Array.isArray(e)&&(r=r.concat(Cm(e,t,n,i).changes)),{changes:r})}function Cm(e,t,n,i){if(!isArray(modifiedObject))return{changes:n,oldValue:originObject,value:modifiedObject};let r=[];return ze()(e,((e,s)=>{const o=n.concat([s]);if(t.length>s){const t=wm(e,modifiedObject[s],o,i);t.changes.length>0&&(r=r.concat(t.changes))}})),{changes:r}}var _m=n(8370),Am=n(9375);const Sm=new Set(["area","effects","opacity","selfOpacity","textSlots","visible","shapeProps","blendMode"]);function km(e,t,n){let i=Math.abs(Uc.Z.hashString(e+t))%360;const r=Math.abs(Uc.Z.hashString(n));i=(i+(r%20-10))%360;const s=[20,70],o=[87,97];return`hsl(${i}, ${r%(s[1]-s[0])+s[0]}%, ${r%(o[1]-o[0])+o[0]}%)`}function Im(e){return t=>!(!Sm.has(t[0])||("connector"===e.shape||"path"===e.shape)&&t.length>1&&"shapeProps"===t[0]&&("points"===t[1]||"sourceItem"===t[1]||"destinationItem"===t[1]||"sourceItemPosition"===t[1]||"destinationItemPosition"===t[1])||"frame_player"===e.shape&&t.length>1&&"shapeProps"===t[0])}let Pm=!1;function Em(e,t){for(let n=0;n<e.frames.length;n++)if(e.frames[n].frame===t)return n;return-1}const Tm={props:{schemeContainer:{type:Object,required:!0},framePlayer:{type:Object,required:!0},light:{type:Boolean,default:!0}},components:{ContextMenu:xm,PropertyInput:Fu,FunctionArgumentsEditor:Yd},beforeMount(){this.compileAnimations(),_h.Z.$on(_h.Z.SCHEME_CHANGE_COMMITED,this.onSchemeChange),_h.Z.$on(_h.Z.HISTORY_UNDONE,this.onHistoryUndone),_h.Z.subscribeForItemChanged(this.framePlayer.id,this.onFramePlayerChanged)},beforeDestroy(){_h.Z.$off(_h.Z.SCHEME_CHANGE_COMMITED,this.onSchemeChange),_h.Z.$off(_h.Z.HISTORY_UNDONE,this.onHistoryUndone),_h.Z.unsubscribeForItemChanged(this.framePlayer.id,this.onFramePlayerChanged),Jl.setAnimationEditorRecording(this.$store,!1)},data(){return{originSchemeContainer:null,currentFrame:1,totalFrames:this.framePlayer.shapeProps.totalFrames,framesMatrix:this.buildFramesMatrix(),compiledAnimations:[],isPlaying:!1,isRecording:!1,recordingPushbackTimer:null,recordingPushbackInterval:100,selectedTrackIdx:-1,frameDrag:{on:!1,source:{blank:!0,trackIdx:-1,frameIdx:-1},destination:{frameIdx:-1}},trackDrag:{on:!1,srcAnimationId:null,srcTrackIdx:-1,kind:null,text:"Drag it",dstTrackIdx:-1,dstFuncId:null,dstFuncDropBefore:!1,dropHead:!1},frameContextMenu:{shown:!1,mouseX:0,mouseY:0,options:[]},selectedFrameControl:{value:null,trackIdx:-1,frame:-1,blank:!0,propertyDescriptor:null},shouldRecompileAnimations:!1,functionEditorModal:{shown:!1,funcName:null,functionId:null,args:null,isAdding:!0,functionDescription:null}}},methods:{openAnimationEditor(){this.$emit("animation-editor-opened",this.framePlayer)},selectFrame(e){this.currentFrame=e,this.shouldRecompileAnimations&&this.compileAnimations(),ze()(this.compiledAnimations,(t=>{t.toggleFrame(e)})),this.schemeContainer.updateMultiItemEditBox(),this.selectedFrameControl.trackIdx>=0&&this.selectFrameControl(this.selectedFrameControl.trackIdx,e-1),this.isRecording&&(this.originSchemeContainer=new Kl.ZP(Uc.Z.clone(this.schemeContainer.scheme)))},selectTrackAndFrame(e,t){this.selectedTrackIdx=e;const n=this.framesMatrix[e];this.selectFrameControl(e,t),this.selectFrame(n.frames[t].frame)},selectFrameControl(e,t){const n=this.framesMatrix[e];if(!n.frames)return;const i=n.frames[t];this.selectedFrameControl.propertyDescriptor=n.propertyDescriptor,i.blank?this.selectedFrameControl.blank=!0:(this.selectedFrameControl.blank=!1,this.selectedFrameControl.value=i.value),this.selectedFrameControl.trackIdx=e,this.selectedFrameControl.frame=i.frame},resetFrameControl(){this.selectedFrameControl.trackIdx=-1,this.selectedFrameControl.frame=-1,this.selectedFrameControl.propertyDescriptor=null},onFrameDoubleClick(e,t){const n=this.framesMatrix[e];if("sections"===n.kind)this.addSectionFrame(e,t),this.selectTrackAndFrame(e,t);else if("function"===n.kind)this.addFunctionFrame(e,t),this.selectTrackAndFrame(e,t);else{const i=n.frames[t];i.blank&&(this.recordCurrentValueForTrack(n,i),this.selectTrackAndFrame(e,t))}},fillMatrixFrames(e,t){const n=[];e.sort(((e,t)=>e.frame-t.frame));const i=e=>{const t=n.length;for(let i=0;i<e;i++)n.push({frame:i+t+1,blank:!0})},r=this.framePlayer.shapeProps.totalFrames;let s=null;return ze()(e,(e=>{if(e.frame-1>n.length&&e.frame<=r&&i(e.frame-1-n.length),(!s||s.frame!==e.frame)&&e.frame<=r){const i=Uc.Z.clone(e);this.enrichFrameWithIcon(i,t),n.push(i)}s=e})),n.length<r&&i(r-n.length),n},enrichFrameWithIcon(e,t){"visibility"===t?e.icon="visibility-"+e.value:"opacity"===t&&(e.value<=25?e.icon="opacity-none":e.value<75?e.icon="opacity-low":e.icon="opacity-high")},buildFramesMatrix(){const e=[];return this.fixAllAnimationFrames(),ze()(this.framePlayer.shapeProps.animations,(t=>{if("function"===t.kind)return;let n=null,i=null,r=null;if("item"===t.kind){const e=this.schemeContainer.findItemById(t.id);e&&(n=e.name,i=(0,_m.qK)(e,t.property),"visible"===t.property?r="visibility":"opacity"===t.property||"selfOpacity"===t.property?r="opacity":i&&(r=i.type))}else"scheme"===t.kind&&(i=(0,_m.uR)(t.property));const s=this.fillMatrixFrames(t.frames,r),o={kind:t.kind,id:t.id,property:t.property,color:km(t.kind,t.id,t.property),propertyDescriptor:i,valueType:r,itemName:n,frames:s};e.push(o)})),e.push(this.buildSectionsTrack()),e.concat(this.buildFunctionTracks())},fixAllAnimationFrames(){const e=e=>{if(e.sort(((e,t)=>e.frame-t.frame)),!(e.length<2))for(let t=1;t<e.length;t++)e[t].frame===e[t-1].frame&&(e.splice(t,1),t-=1)};ze()(this.framePlayer.shapeProps.animations,(t=>{e(t.frames)})),e(this.framePlayer.shapeProps.sections)},buildSectionsTrack(){let e=this.framePlayer.shapeProps.sections;return e||(e=[]),{kind:"sections",propertyDescriptor:{type:"string",name:"Section Name"},frames:this.fillMatrixFrames(e,"section")}},buildFunctionTracks(){const e=[];return ze()(this.framePlayer.shapeProps.functions,((t,n)=>{const i=Am.Z[t.functionId];i&&(e.push({kind:"function-header",id:n,name:i.getFullName(t.args,this.schemeContainer)}),ze()(this.framePlayer.shapeProps.animations,(t=>{if("function"===t.kind&&t.id===n){const r=i.inputs[t.property];if(!r)return;e.push({kind:"function",id:n,property:t.property,frames:this.fillMatrixFrames(t.frames,"number"),propertyDescriptor:r})}})))})),e},startRecording(){this.isRecording=!0,Jl.setAnimationEditorRecording(this.$store,!0),this.originSchemeContainer=new Kl.ZP(Uc.Z.clone(this.schemeContainer.scheme))},stopRecording(){this.isRecording=!1,Jl.setAnimationEditorRecording(this.$store,!1)},onSchemeChange(){this.isRecording&&(this.recordingPushbackTimer&&clearTimeout(this.recordingPushbackTimer),this.recordingPushbackTimer=setTimeout((()=>{this.recordCurrentFrame(),this.recordingPushbackTimer=null}),this.recordingPushbackInterval))},recordCurrentFrame(){const e=function(e,t){const n=[];return ze()(t.getItems(),(t=>{const i=e.findItemById(t.id);if(!i)return;const r=function(e,t,n){return wm(e,t,[],n?n.fieldCheck:null)}(t,i,{fieldCheck:Im(i)});r.changes&&r.changes.length>0&&ze()(r.changes,(e=>{0!==e.path.length&&n.push({kind:"item",id:i.id,property:e.path.join("."),value:e.value,oldValue:e.oldValue})}))})),e.scheme.style.backgroundColor!==t.scheme.style.backgroundColor&&n.push({kind:"scheme",id:null,property:"style.backgroundColor",value:e.scheme.style.backgroundColor}),n}(this.schemeContainer,this.originSchemeContainer);ze()(e,(e=>{if("number"==typeof e.value&&"number"==typeof e.oldValue&&uh.Z.tooSmall(e.value-e.oldValue))return;let t=yh()(this.framePlayer.shapeProps.animations,(t=>{return i=t,(n=e).kind===i.kind&&n.id===i.id&&n.property===i.property;var n,i}));if(t){let n=-1,i=!1,r=null;for(let e=0;e<t.frames.length&&!i;e++){const s=t.frames[e];s.frame===this.currentFrame?(n=e,i=!0,r=s,this.shouldRecompileAnimations=!0):i=!0}r&&n>=0?r.frame===this.currentFrame?r.value=e.value:t.frames.splice(n,0,{frame:this.currentFrame,value:e.value,kind:"linear"}):t.frames.splice(0,0,{frame:this.currentFrame,value:e.value,kind:"linear"})}else{t=e;const n=[{frame:this.currentFrame,value:e.value,kind:"linear"}];this.currentFrame>1&&n.splice(0,0,{frame:1,value:e.oldValue,kind:"linear"}),this.framePlayer.shapeProps.animations.push({kind:e.kind,id:e.id,property:e.property,frames:n})}})),this.updateFramesMatrix()},updateFramesMatrix(){this.framesMatrix=this.buildFramesMatrix(),this.shouldRecompileAnimations=!0},compileAnimations(){this.compiledAnimations=(0,_m.yl)(this.framePlayer,this.schemeContainer),this.shouldRecompileAnimations=!1},removeAnimationTrack(e){if("function-header"===e.kind){this.framePlayer.shapeProps.functions.hasOwnProperty(e.id)&&delete this.framePlayer.shapeProps.functions[e.id];const t=this.framePlayer.shapeProps.animations;for(let n=0;n<t.length;n++)"function"===t[n].kind&&t[n].id===e.id&&(t.splice(n,1),n-=1);this.updateFramesMatrix()}else if("item"===e.kind){const t=this.findAnimationIndexForTrack(e);if(t<0)return null;this.framePlayer.shapeProps.animations.splice(t,1),this.updateFramesMatrix()}},findAnimationIndexForTrack(e){for(let t=0;t<this.framePlayer.shapeProps.animations.length;t++){const n=this.framePlayer.shapeProps.animations[t];if(n.kind===e.kind&&n.id===e.id&&n.property===e.property)return t}return-1},preventEvent(e){e.preventDefault(),e.stopPropagation()},onMatrixFrameMouseDown(e,t,n){const i=this.framesMatrix[e].frames[t];dh(n).withDraggedElement(this.$refs.frameDragPreview).withDroppableClass("frame-droppable-area").onSimpleClick((()=>{this.selectTrackAndFrame(e,t)})).onDragStart((()=>{this.frameDrag.on=!0,this.frameDrag.source.blank=i.blank,this.frameDrag.source.trackIdx=e,this.frameDrag.source.frameIdx=t})).onDragOver(((e,t)=>{const n=parseInt(t.getAttribute("data-track-idx")),i=parseInt(t.getAttribute("data-frame-idx"));n===this.frameDrag.source.trackIdx?this.frameDrag.destination.frameIdx=i:this.frameDrag.destination.frameIdx=-1})).onDrop(((e,t)=>{const n=parseInt(t.getAttribute("data-track-idx")),i=parseInt(t.getAttribute("data-frame-idx"));n===this.frameDrag.source.trackIdx&&this.onMatrixDragEnd(this.frameDrag.source.trackIdx,this.frameDrag.source.frameIdx,i)})).onDone((e=>{this.frameDrag.on=!1,this.frameDrag.source.trackIdx=-1,this.frameDrag.source.frameIdx=-1,this.frameDrag.destination.frameIdx=-1})).build()},onMatrixDragEnd(e,t,n){if(n===t||n<0)return;const i=this.framesMatrix[e],r=i.frames[t],s=i.frames[n];if("sections"===i.kind){const e=this.framePlayer.shapeProps.sections;if(r.blank){let t=-1;for(let n=0;n<e.length&&t<0;n++)e[n].frame===s.frame&&(t=n);t>=0&&e.splice(t,1)}else{const t={frame:s.frame,value:r.value};let n=-1;for(let t=0;t<e.length&&n<0;t++)e[t].frame===r.frame&&(n=t);n>=0?e[n]=t:e.push(t),e.sort(((e,t)=>e.frame-t.frame))}}else{const e=this.findAnimationIndexForTrack(i);if(e<0)return;const t=this.framePlayer.shapeProps.animations[e];if(r.blank&&!s.blank){const e=Em(t,s.frame);if(e<0)return;t.frames.splice(e,1)}else if(!r.blank){if(s.blank){const e=Em(t,r.frame);if(e<0)return;t.frames[e].frame=n+1}else{const e=Em(t,r.frame);if(e<0)return;const i=Em(t,s.frame);if(i<0)return;t.frames[e].frame=n+1,t.frames.splice(i,1)}t.frames.sort(((e,t)=>e.frame-t.frame))}}this.updateFramesMatrix()},playAnimations(){this.resetFrameControl(),this.shouldRecompileAnimations&&this.compileAnimations(),this.isPlaying=!0,function(e,t,n,i,r,{onFrame:s,onFinish:o}){if(Pm)return;Pm=!0;let a=0,l=n;s(l);const c=(h,d)=>{a+=d;let u=n+a*Math.max(i,.01)/1e3,p=Math.floor(u);p>l&&(l=p,s(l)),ze()(t,(e=>{e.toggleFrame(u)})),e.updateMultiItemEditBox(),p<r&&Pm?window.requestAnimationFrame((()=>{const e=performance.now();c(e,e-h)})):(Pm=!1,o())};c(performance.now(),0)}(this.schemeContainer,this.compiledAnimations,this.currentFrame,this.framePlayer.shapeProps.fps,this.framePlayer.shapeProps.totalFrames,{onFrame:e=>{this.currentFrame=e},onFinish:()=>{this.isPlaying=!1}})},stopAnimations(){Pm=!1},moveFrameLeft(){this.isPlaying||this.currentFrame>1&&this.selectFrame(this.currentFrame-1)},moveFrameRight(){this.isPlaying||this.currentFrame<this.framePlayer.shapeProps.totalFrames&&this.selectFrame(this.currentFrame+1)},onFrameRightClick(e,t,n){e.preventDefault();const i=this.framesMatrix[t],r=i.frames[n],s=[{name:"Insert empty frames",iconClass:"fa-solid fa-plus",clicked:()=>{this.insertEmptyFramesAtFrame(n+1)}}];this.framePlayer.shapeProps.totalFrames>1&&s.push({name:"Delete frame for all tracks",iconClass:"fas fa-trash",clicked:()=>{this.deleteFrames(n+1)}}),"function"!==i.kind&&s.push({name:"Record current value",iconClass:"far fa-dot-circle",clicked:()=>{this.recordCurrentValueForTrack(i,r)}}),r.blank||(s.push({name:"Clear frame",iconClass:"fa-solid fa-broom",clicked:()=>{if("sections"===i.kind){const e=this.framePlayer.shapeProps.sections;for(let t=0;t<e.length;t++)if(e[t].frame===r.frame){e.splice(t,1),i.frames[n]={frame:r.frame,blank:!0};break}}else{const e=this.findAnimationIndexForTrack(i);if(e<0)return;const t=Em(this.framePlayer.shapeProps.animations[e],r.frame);if(t<0)return;this.framePlayer.shapeProps.animations[e].frames.splice(t,1),this.updateFramesMatrix()}this.selectedTrackIdx===t&&this.selectedFrameControl.frame===r.frame&&this.selectTrackAndFrame(t,n)}}),ze()(jh.jU.values(),(e=>{r.kind!==e&&s.push({name:"Convert to "+e,interpolation:e,clicked:e=>{const t=this.findAnimationIndexForTrack(i);if(t<0)return;const n=Em(this.framePlayer.shapeProps.animations[t],r.frame);n<0||(this.framePlayer.shapeProps.animations[t].frames[n].kind=e.interpolation,this.updateFramesMatrix())}})}))),0!==s.length&&(this.frameContextMenu.options=s,this.frameContextMenu.mouseX=e.pageX,this.frameContextMenu.mouseY=e.pageY,this.frameContextMenu.shown=!0)},deleteFrames(e){const t=t=>{for(let n=t.length-1;n>=0;n-=1)t[n].frame>e?t[n].frame-=1:t[n].frame===e&&t.splice(n,1)};t(this.framePlayer.shapeProps.sections),this.framePlayer.shapeProps.animations.forEach((e=>{t(e.frames)})),this.framePlayer.shapeProps.totalFrames-=1,this.totalFrames=this.framePlayer.shapeProps.totalFrames,this.updateFramesMatrix(),_h.Z.emitSchemeChangeCommited()},insertEmptyFramesAtFrame(e){const t=t=>{for(let n=0;n<t.length;n++)t[n].frame>=e&&(t[n].frame+=1)};t(this.framePlayer.shapeProps.sections),this.framePlayer.shapeProps.animations.forEach((e=>{t(e.frames)})),this.framePlayer.shapeProps.totalFrames+=1,this.totalFrames=this.framePlayer.shapeProps.totalFrames,this.updateFramesMatrix(),_h.Z.emitSchemeChangeCommited()},onContextMenuOptionClick(e){e.clicked&&e.clicked(e)},recordCurrentValueForTrack(e,t){const n=this.findAnimationIndexForTrack(e);if(n<0)return;const i=this.framePlayer.shapeProps.animations[n];let r=0;if("item"===e.kind){const t=this.schemeContainer.findItemById(e.id);if(!t)return;r=Uc.Z.getObjectProperty(t,e.property)}else{if("scheme"!==e.kind)return;r=Uc.Z.getObjectProperty(this.schemeContainer.scheme,e.property)}const s=Em(i,t.frame);if(s>=0)i.frames[s].value=r;else{let e=0,n="linear";for(let r=0;r<i.frames.length;r++)if(n=i.frames[r].kind,i.frames[r].frame>t.frame){e=r;break}i.frames.splice(e,0,{frame:t.frame,kind:n,value:r})}this.updateFramesMatrix()},onFramePropertyInput(e){const t=this.selectedFrameControl.trackIdx,n=this.selectedFrameControl.frame;if(t<0||n<0)return;const i=this.framesMatrix[t];if(this.selectedFrameControl.value=e,"item"===i.kind||"scheme"===i.kind||"function"===i.kind){const r=this.findAnimationIndexForTrack(i);if(r<0)return;const s=this.framePlayer.shapeProps.animations[r],o=Em(s,n);if(o<0)return;if(this.framePlayer.shapeProps.animations[r].frames[o].value=e,this.framesMatrix[t].frames[n-1].value=e,"item"===s.kind){const t=this.schemeContainer.findItemById(s.id);t&&(Uc.Z.setObjectProperty(t,s.property,e),_h.Z.emitItemChanged(t.id,s.property),s.property.startsWith("area.")&&this.schemeContainer.updateMultiItemEditBox())}else"scheme"===s.kind?Uc.Z.setObjectProperty(this.schemeContainer.scheme,s.property,e):"function"===s.kind&&this.selectFrame(n);i.valueType&&this.enrichFrameWithIcon(this.framesMatrix[t].frames[n-1],i.valueType),_h.Z.emitSchemeChangeCommited(`animation.${this.framePlayer.id}.track.${t}.frames.${o}.${s.property}`),this.shouldRecompileAnimations=!0}else if("sections"===i.kind){const t=this.framePlayer.shapeProps.sections;for(let r=0;r<t.length;r++)if(t[r].frame===n){t[r].value=e,i.frames[n-1].value=e;break}_h.Z.emitSchemeChangeCommited(`animation.${this.framePlayer.id}.sections.${n}`)}},addSectionFrame(e,t){const n=t+1,i={frame:n,value:`${n}`,kind:"step"};let r=0;const s=this.framePlayer.shapeProps.sections;for(let e=0;e<s.length;e++){if(s[e].frame===n)return;if(s[e].frame>n){r=e;break}}this.framesMatrix[e].frames[t]=i,s.splice(r,0,i),_h.Z.emitSchemeChangeCommited(`animation.${this.framePlayer.id}.sections.${i}`)},addFunctionFrame(e,t){const n=this.framesMatrix[e],i=this.framePlayer.shapeProps.functions[n.id];if(!i)return;const r=this.findAnimationIndexForTrack(n);if(r<0)return;const s=this.framePlayer.shapeProps.animations[r];let o=0,a=null,l=null;const c=t+1;for(let e=0;e<s.frames.length;e++){if(s.frames[e].frame===c)return;if(s.frames[e].frame>c){o=e,l=s.frames[e];break}a=s.frames[e]}const h={frame:c,kind:"linear",value:0},d=Am.Z[i.functionId];if(!d)return;const u=d.inputs[s.property];if(u){if(a&&l){const e=(c-a.frame)/Math.max(1,l.frame-a.frame);h.value=(0,_m.QI)(u.type,a.value,l.value,e)}else h.value=a||l?a.value:u.value;s.frames.splice(o,0,h),this.updateFramesMatrix()}},toggleFunctionAddModal(){this.functionEditorModal.funcName="moveAlongPath",this.functionEditorModal.functionId=null;const e=Am.Z[this.functionEditorModal.funcName];this.functionEditorModal.functionDescription=e;const t={};ze()(e,((e,n)=>{t[n]=e.value})),this.functionEditorModal.args=t,this.functionEditorModal.isAdding=!0,this.functionEditorModal.shown=!0},toggleEditFunctionArgumentsForTrack(e){const t=this.framePlayer.shapeProps.functions[e.id];if(!t)return null;this.functionEditorModal.funcName=e.functionId,this.functionEditorModal.functionDescription=Am.Z[t.functionId],this.functionEditorModal.functionId=e.id,this.functionEditorModal.args=t.args,this.functionEditorModal.isAdding=!1,this.functionEditorModal.functionDescription&&(this.functionEditorModal.shown=!0)},onFunctionModalArgumentChanged(e,t){this.functionEditorModal.args[e]=t},onFunctionModalSubmit(){if(this.functionEditorModal.shown=!1,this.functionEditorModal.isAdding){const e=ec().generate(),t=Am.Z[this.functionEditorModal.funcName];if(!t)return;this.framePlayer.shapeProps.functions[e]={functionId:this.functionEditorModal.funcName,args:Uc.Z.clone(this.functionEditorModal.args)},ze()(t.inputs,((t,n)=>{this.framePlayer.shapeProps.animations.push({kind:"function",id:e,property:n,frames:[{frame:1,kind:"linear",value:t.value},{frame:this.framePlayer.shapeProps.totalFrames,kind:"linear",value:t.endValue}]})}))}else this.functionEditorModal.functionId&&ze()(this.functionEditorModal.args,((e,t)=>{this.framePlayer.shapeProps.functions[this.functionEditorModal.functionId].args[t]=e}));this.updateFramesMatrix()},onHistoryUndone(){this.updateFramesMatrix()},onFramePlayerChanged(){this.totalFrames!==this.framePlayer.shapeProps.totalFrames&&(this.totalFrames=this.framePlayer.shapeProps.totalFrames,this.updateFramesMatrix())},onTrackLabelMouseDown(e,t){const n=this.framesMatrix[e];if("sections"===n.kind||"function"===n.kind)return;const i=(e,t)=>{const i=parseInt(t.getAttribute("data-track-index")),r=this.framesMatrix[i];if("item"===this.trackDrag.kind){if(r.kind!==this.trackDrag.kind)return void(this.trackDrag.dstTrackIdx=-1);const n=t.getBoundingClientRect(),s=e.pageY<n.top+n.height/2;this.trackDrag.dstTrackIdx=i,this.trackDrag.dropHead=!1,s&&(i>0?this.trackDrag.dstTrackIdx=i-1:this.trackDrag.dropHead=!0)}else if("function-header"===this.trackDrag.kind)if(this.trackDrag.dropHead=!1,"function-header"===r.kind&&r.id!==n.id)this.trackDrag.dstTrackIdx=i-1,this.trackDrag.dstFuncId=r.id,this.trackDrag.dstFuncDropBefore=!0;else if("function"===r.kind&&r.id!==n.id){this.trackDrag.dstFuncId=r.id,this.trackDrag.dstFuncDropBefore=!1;let e=!1,t=i+1;for(;t<this.framesMatrix.length&&!e;t++)"function-header"===this.framesMatrix[t].kind&&(e=!0);this.trackDrag.dstTrackIdx=e?t-2:this.framesMatrix.length-1}else this.trackDrag.dstTrackIdx=-1,this.trackDrag.dstFuncId=null};dh(t).withScrollableElement(this.$refs.frameAnimatorCanvas).withDraggedElement(this.$refs.trackDragPreview).withDroppableClass("track-droppable-area").onDragStart((()=>{this.trackDrag.srcTrackIdx=e,this.trackDrag.kind=n.kind,this.trackDrag.dstFuncId=null,this.trackDrag.on=!0,"item"===n.kind?this.trackDrag.text=n.itemName+" "+n.property:"function-header"===n.kind&&(this.trackDrag.text=n.name)})).onDragOver(i).onDrop(((e,t)=>{if(i(e,t),"item"===n.kind){if(this.trackDrag.dstTrackIdx<0)return;const e=this.framesMatrix[this.trackDrag.dstTrackIdx],t=this.findAnimationIndexForTrack(n);let i=this.findAnimationIndexForTrack(e);if(t>=0&&i>=0){const e=this.framePlayer.shapeProps.animations.splice(t,1);this.trackDrag.dropHead||(i+=1),this.framePlayer.shapeProps.animations.splice(i,0,e[0]),this.updateFramesMatrix(),this.$forceUpdate()}}else if("function-header"===n.kind){if(!this.trackDrag.dstFuncId)return;const e=[];let t=-1;if(ze()(this.framePlayer.shapeProps.functions,((i,r)=>{n.id!==r&&e.push(r),this.trackDrag.dstFuncId===r&&(t=this.trackDrag.dstFuncDropBefore?e.length-1:e.length)})),t<0)return;e.splice(t,0,n.id);const i={};e.forEach((e=>{i[e]=this.framePlayer.shapeProps.functions[e]})),this.framePlayer.shapeProps.functions=i,this.updateFramesMatrix(),this.$forceUpdate()}})).onDone((()=>{this.trackDrag.on=!1})).build()}}},Mm=Tm,Om=(0,Le.Z)(Mm,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"frame-animator-panel"},[e.light?n("div",{staticClass:"frame-animator-light"},[n("span",{staticClass:"btn btn-secondary btn-small",on:{click:e.openAnimationEditor}},[n("i",{staticClass:"fas fa-film"}),e._v(" Open Animation Editor")]),e._v(" "),n("span",{staticClass:"frame-animator-title"},[e._v(e._s(e.framePlayer.name))])]):n("div",{staticClass:"frame-animator-container"},[n("div",{staticClass:"frame-animator-header"},[n("div",{staticClass:"frame-animator-title"},[n("i",{staticClass:"fas fa-film"}),e._v(" "),n("h3",[e._v(e._s(e.framePlayer.name))])]),e._v(" "),n("div",{staticClass:"frame-animator-controls"},[n("div",{staticClass:"frame-animator-player-buttons"},[e.isRecording?n("div",[n("span",{staticClass:"btn btn-danger btn-small",attrs:{title:"Record items for currently selected frame"},on:{click:e.stopRecording}},[n("i",{staticClass:"fas fa-stop"}),e._v(" Stop recording\n                        ")])]):n("div",[n("span",{staticClass:"btn btn-danger btn-small",attrs:{title:"Record items for currently selected frame"},on:{click:e.startRecording}},[n("i",{staticClass:"far fa-dot-circle"})]),e._v(" "),n("span",{staticClass:"btn btn-secondary btn-small",attrs:{title:"Previous"},on:{click:e.moveFrameLeft}},[n("i",{staticClass:"fas fa-angle-left"})]),e._v(" "),e.isPlaying?n("span",{staticClass:"btn btn-secondary btn-small",attrs:{title:"Stop"},on:{click:e.stopAnimations}},[n("i",{staticClass:"fas fa-stop"})]):n("span",{staticClass:"btn btn-secondary btn-small",attrs:{title:"Play"},on:{click:e.playAnimations}},[n("i",{staticClass:"fas fa-play"})]),e._v(" "),n("span",{staticClass:"btn btn-secondary btn-small",attrs:{title:"Next"},on:{click:e.moveFrameRight}},[n("i",{staticClass:"fas fa-angle-right"})])])]),e._v(" "),!e.isRecording&&e.selectedFrameControl.trackIdx>=0&&e.selectedFrameControl.frame>=0?n("div",{staticClass:"frame-animator-frame-input"},[!e.selectedFrameControl.blank&&e.selectedFrameControl.propertyDescriptor?n("div",[n("PropertyInput",{key:"frame-prop-input-"+e.selectedFrameControl.trackIdx+"-"+e.selectedFrameControl.frame,attrs:{descriptor:e.selectedFrameControl.propertyDescriptor,value:e.selectedFrameControl.value,shapeProps:{},schemeContainer:e.schemeContainer,itemId:null},on:{input:e.onFramePropertyInput}})],1):e._e()]):e._e()]),e._v(" "),n("div",{staticClass:"frame-animator-right-panel"},[n("span",{staticClass:"icon",on:{click:function(t){return e.$emit("close")}}},[n("i",{staticClass:"fas fa-times"})])])]),e._v(" "),n("div",{ref:"frameAnimatorCanvas",staticClass:"frame-animator-canvas"},[n("table",{staticClass:"frame-animator-matrix"},[n("thead",[n("tr",{class:{"drop-below":e.trackDrag.on&&e.trackDrag.dropHead}},[n("th"),e._v(" "),e._l(e.totalFrames,(function(t){return n("th",{class:{current:t===e.currentFrame},attrs:{title:t},on:{click:function(n){return e.selectFrame(t)}}},[e._v("\n                            "+e._s(t)+"\n                        ")])}))],2)]),e._v(" "),n("tbody",[e._l(e.framesMatrix,(function(t,i){return n("tr",{staticClass:"track-droppable-area",class:{"selected-track":i===e.selectedTrackIdx,"track-missing":!t.propertyDescriptor&&"function-header"!==t.kind&&"function"!==t.kind,"drop-below":e.trackDrag.on&&!e.trackDrag.dropHead&&i===e.trackDrag.dstTrackIdx},style:{"background-color":t.color},attrs:{"data-track-index":i}},[n("td",{staticClass:"frame-animator-property",class:["frame-animator-property-"+t.kind,"item"===t.kind||"function-header"===t.kind?"draggable":null],attrs:{colspan:"function-header"===t.kind?e.totalFrames+1:1},on:{mousedown:function(t){return e.onTrackLabelMouseDown(i,t)}}},["item"===t.kind?n("div",[t.itemName?n("span",{staticClass:"frame-item-name"},[e._v(e._s(t.itemName))]):n("span",{staticClass:"frame-item-name"},[e._v("Deleted item")]),e._v(" "),n("span",{staticClass:"frame-item-property"},[e._v(e._s(t.property))])]):"sections"===t.kind?n("div",[n("i",{staticClass:"fas fa-paragraph"}),e._v(" Sections\n                            ")]):"function-header"===t.kind?n("div",{staticClass:"function-animator-track-header"},[e._v("\n                                "+e._s(t.name)+"\n                            ")]):"function"===t.kind||"scheme"===t.kind?n("div",[e._v("\n                                "+e._s(t.property)+"\n                            ")]):e._e(),e._v(" "),n("div",{staticClass:"frame-property-operations"},["function-header"===t.kind?n("span",{staticClass:"icon-button",attrs:{title:"Edit function"},on:{click:function(n){return e.toggleEditFunctionArgumentsForTrack(t)}}},[n("i",{staticClass:"fas fa-cog"})]):e._e(),e._v(" "),"sections"!==t.kind&&"function"!==t.kind?n("span",{staticClass:"icon-button",attrs:{title:"Remove animation track"},on:{click:function(n){return e.removeAnimationTrack(t)}}},[n("i",{staticClass:"fas fa-trash"})]):e._e()])]),e._v(" "),e._l(t.frames,(function(r,s){return n("td",{staticClass:"frame frame-droppable-area",class:{active:!r.blank,current:r.frame===e.currentFrame,"drop-candidate":e.frameDrag.source.trackIdx===i&&e.frameDrag.destination.frameIdx===s},attrs:{"data-track-idx":i,"data-frame-idx":s,title:t.property+", frame: "+r.frame+", interpolation: "+r.kind+", value: "+r.value,draggable:"true"},on:{dblclick:function(t){return e.onFrameDoubleClick(i,s)},dragstart:e.preventEvent,drag:e.preventEvent,mousedown:function(t){return e.onMatrixFrameMouseDown(i,s,t)},contextmenu:function(t){return e.onFrameRightClick(t,i,s)}}},[r.blank||e.frameDrag.on&&i===e.frameDrag.source.trackIdx&&s===e.frameDrag.source.frameIdx?n("div",{staticClass:"empty-frame-number"},[e._v(e._s(r.frame))]):n("div",{staticClass:"active-frame"},["visibility-true"===r.icon?n("i",{staticClass:"fas fa-lightbulb"}):"visibility-false"===r.icon?n("i",{staticClass:"far fa-lightbulb"}):"opacity-none"===r.icon?n("i",{staticClass:"fa-regular fa-circle"}):"opacity-low"===r.icon?n("i",{staticClass:"fa-solid fa-circle-half-stroke"}):n("i",{staticClass:"fas fa-circle"})])])}))],2)})),e._v(" "),n("tr",[n("td",{attrs:{colspan:e.totalFrames+1}},[n("span",{staticClass:"btn btn-small",on:{click:function(t){return e.toggleFunctionAddModal()}}},[e._v("Add path function")])])])],2)])])]),e._v(" "),n("div",{ref:"frameDragPreview",staticClass:"frame-drag-preview",class:{"is-dragging":e.frameDrag.on}},[e.frameDrag.source.blank?e._e():n("span",{staticClass:"active-frame"},[n("i",{staticClass:"fas fa-circle"})])]),e._v(" "),n("div",{ref:"trackDragPreview",staticClass:"track-drag-preview",class:{"is-dragging":e.trackDrag.on}},[e._v("\n        "+e._s(e.trackDrag.text)+"\n    ")]),e._v(" "),e.frameContextMenu.shown?n("ContextMenu",{attrs:{mouseX:e.frameContextMenu.mouseX,mouseY:e.frameContextMenu.mouseY,options:e.frameContextMenu.options},on:{selected:e.onContextMenuOptionClick,close:function(t){e.frameContextMenu.shown=!1}}}):e._e(),e._v(" "),e.functionEditorModal.shown?n("FunctionArgumentsEditor",{attrs:{functionDescription:e.functionEditorModal.functionDescription,args:e.functionEditorModal.args,primaryButton:e.functionEditorModal.isAdding?"Add":"Save",schemeContainer:e.schemeContainer,closeName:"Cancel"},on:{close:function(t){e.functionEditorModal.shown=!1},"argument-changed":e.onFunctionModalArgumentChanged,submit:function(t){return e.onFunctionModalSubmit()}}}):e._e()],1)}),[],!1,null,null,null).exports;function Dm(e,t,n){if(!e)return!1;const i=Wl.Z.getShapePropDescriptor(e,t);return null!==i&&i.type===n}const $m={props:{item:{type:Object,required:!0}},components:{"color-picker":Od().Sketch,NumberTextfield:wd},mounted(){document.body.addEventListener("click",this.onBodyClick),_h.Z.subscribeForItemChanged(this.item.id,this.onItemChanged)},beforeDestroy(){document.body.removeEventListener("click",this.onBodyClick),_h.Z.unsubscribeForItemChanged(this.item.id,this.onItemChanged)},data(){const e=this.buildProps();return{toggled:!1,supportsStrokeColor:e.supportsStrokeColor,supportsStrokeSize:e.supportsStrokeSize,supportsStrokePattern:e.supportsStrokePattern,strokeColor:e.strokeColor,strokeSize:e.strokeSize,strokePattern:e.strokePattern,vuePickerColor:{hex:e.strokeColor},strokePatterns:this.buildStrokePatterns(e.strokeSize)}},methods:{buildProps(){const e=Wl.Z.find(this.item.shape),t=Dm(e,"strokeColor","color"),n=Dm(e,"strokeSize","number"),i=Dm(e,"strokePattern","stroke-pattern");let r="rgba(0, 0, 0, 1.0)",s=0,o=null;return t&&(r=this.item.shapeProps.strokeColor),n&&(s=this.item.shapeProps.strokeSize),i&&(o=this.item.shapeProps.strokePattern),{strokeColor:r,strokeSize:s,strokePattern:o,supportsStrokeColor:t,supportsStrokeSize:n,supportsStrokePattern:i}},onItemChanged(e){if("shapeProps.strokeColor"===e||"shapeProps.strokeSize"===e||"shapeProps.strokePattern"===e){const e=this.buildProps();this.strokeColor=e.strokeColor,this.strokeSize=e.strokeSize,this.strokePattern=e.strokePattern,this.vuePickerColor.hex=e.strokeColor,this.strokePatterns=this.buildStrokePatterns(e.strokeSize)}},buildStrokePatterns:e=>Ke()(Sh.Z.patterns,(t=>({name:t,html:Sh.Z.generateStrokeHtml(t,e,15,300,30)}))),toggleDropdown(){this.toggled=!this.toggled},updateColor(e){this.strokeColor=`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${e.rgba.a})`,this.$emit("color-changed",this.strokeColor)},onStrokeSizeChange(e){this.strokeSize=e,this.strokePatterns=this.buildStrokePatterns(Math.max(1,Math.min(this.strokeSize,10))),this.$emit("size-changed",this.strokeSize)},selectPattern(e){this.strokePattern=e,this.$emit("pattern-changed",e)},onBodyClick(e){e.target&&e.target.closest(".stroke-control")||(this.toggled=!1)}}},Bm=(0,Le.Z)($m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"stroke-control"},[e.supportsStrokeColor?n("div",{staticClass:"stroke-control-toggle-button",style:{border:"4px solid "+e.strokeColor},attrs:{title:"Stroke"},on:{click:e.toggleDropdown}}):e._e(),e._v(" "),e.toggled?n("div",{staticClass:"stroke-control-dropdown"},[n("div",{staticClass:"stroke-control-color-container"},[e.supportsStrokeColor?n("color-picker",{on:{input:e.updateColor},model:{value:e.vuePickerColor,callback:function(t){e.vuePickerColor=t},expression:"vuePickerColor"}}):e._e()],1),e._v(" "),n("div",{staticClass:"stroke-control-other-controls"},[n("div",[e.supportsStrokeSize?n("NumberTextfield",{attrs:{name:"Size",value:e.strokeSize,min:0},on:{changed:function(t){return e.onStrokeSizeChange(arguments[0])}}}):e._e()],1),e._v(" "),e.supportsStrokePattern?n("div",{staticClass:"stroke-control-patterns"},e._l(e.strokePatterns,(function(t){return n("div",{staticClass:"stroke-control-pattern-option",class:{selected:t.name===e.strokePattern},domProps:{innerHTML:e._s(t.html)},on:{click:function(n){return e.selectPattern(t.name)}}})})),0):e._e()])]):e._e()])}),[],!1,null,null,null).exports,Lm={props:{item:{type:Object,required:!0}},components:{"color-picker":Od().Sketch,NumberTextfield:wd,Dropdown:bh},beforeMount(){_h.Z.subscribeForItemChanged(this.item.id,this.onItemChange),document.body.addEventListener("click",this.onBodyClick)},beforeDestroy(){_h.Z.unsubscribeForItemChanged(this.item.id,this.onItemChange),document.body.removeEventListener("click",this.onBodyClick)},data(){const e=this.buildAllProps();return{toggled:!1,textColor:e.textColor,fontSize:e.fontSize,font:e.font,halign:e.halign,valign:e.valign,supportsTextSlots:e.supportsTextSlots,vuePickerColor:{hex:e.textColor},allFonts:Ke()((0,Ju._W)(),(e=>({name:e.name,style:{"font-family":e.family}}))),halignOptions:[{name:"Left",value:"left",iconCss:"fas fa-align-left"},{name:"Center",value:"center",iconCss:"fas fa-align-center"},{name:"Right",value:"right",iconCss:"fas fa-align-right"}],valignOptions:[{name:"Top",value:"top",iconCss:"schemio-icon schemio-icon-valign-top"},{name:"Middle",value:"middle",iconCss:"schemio-icon schemio-icon-valign-middle"},{name:"Bottom",value:"bottom",iconCss:"schemio-icon schemio-icon-valign-bottom"}]}},methods:{buildAllProps(){let e=!1,t="rgba(0, 0, 0, 1.0)",n=14,i=(0,Ju.vq)(),r="left",s="top";const o=Wl.Z.find(this.item.shape);if(o&&o.getTextSlots){const a=o.getTextSlots(this.item);if(a&&a.length>0){const o=a[0].name;this.item.textSlots&&this.item.textSlots[o]&&(this.item.textSlots[o].font&&(i=this.item.textSlots[o].font),this.item.textSlots[o].color&&(t=this.item.textSlots[o].color),this.item.textSlots[o].fontSize&&(n=this.item.textSlots[o].fontSize),this.item.textSlots[o].halign&&(r=this.item.textSlots[o].halign),this.item.textSlots[o].valign&&(s=this.item.textSlots[o].valign)),e=!0}}return{textColor:t,fontSize:n,font:i,halign:r,valign:s,supportsTextSlots:e}},toggleDropdown(){this.toggled=!this.toggled,this.updateProps()},updateProps(){const e=this.buildAllProps();this.textColor=e.textColor,this.fontSize=e.fontSize,this.font=e.font,this.halign=e.halign,this.valign=e.valign,this.supportsTextSlots=e.supportsTextSlots,this.vuePickerColor.hex=this.textColor},onItemChange(e){e&&e.startsWith("textSlots.")&&this.updateProps()},updateColor(e){this.textColor=`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${e.rgba.a})`,this.emitPropertyChange("color",this.textColor)},onFontSizeChange(e){this.fontSize=e,this.emitPropertyChange("fontSize",e)},onFontChange(e){this.font=e,this.emitPropertyChange("font",e)},onHAlignChange(e){this.halign=e,this.emitPropertyChange("halign",e)},onVAlignChange(e){this.valign=e,this.emitPropertyChange("valign",e)},emitPropertyChange(e,t){this.$emit("property-changed",e,t)},onBodyClick(e){e.target&&e.target.closest(".text-style-control")||(this.toggled=!1)}}},Nm=(0,Le.Z)(Lm,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-style-control"},[e.supportsTextSlots?n("div",{staticClass:"text-style-control-toggle-button",style:{"border-bottom":"4px solid "+e.textColor},attrs:{title:"Stroke"},on:{click:e.toggleDropdown}},[e._v("A")]):e._e(),e._v(" "),e.toggled?n("div",{staticClass:"text-style-control-dropdown"},[n("div",{staticClass:"text-style-control-color-container"},[n("color-picker",{on:{input:e.updateColor},model:{value:e.vuePickerColor,callback:function(t){e.vuePickerColor=t},expression:"vuePickerColor"}})],1),e._v(" "),n("div",{staticClass:"text-style-control-other-controls"},[n("div",[n("dropdown",{attrs:{options:e.allFonts,value:e.font},on:{selected:function(t){return e.onFontChange(arguments[0].name)}}})],1),e._v(" "),n("div",[n("NumberTextfield",{attrs:{name:"Font Size",value:e.fontSize,min:0},on:{changed:function(t){return e.onFontSizeChange(arguments[0])}}})],1),e._v(" "),n("div",[n("ul",{staticClass:"button-group"},e._l(e.halignOptions,(function(t){return n("li",[n("span",{staticClass:"toggle-button",class:{toggled:e.halign===t.value},attrs:{title:t.name},on:{click:function(n){return e.onHAlignChange(t.value)}}},[n("i",{class:t.iconCss})])])})),0)]),e._v(" "),n("div",[n("ul",{staticClass:"button-group"},e._l(e.valignOptions,(function(t){return n("li",[n("span",{staticClass:"toggle-button",class:{toggled:e.valign===t.value},attrs:{title:t.name},on:{click:function(n){return e.onVAlignChange(t.value)}}},[n("i",{class:t.iconCss})])])})),0)])])]):e._e()])}),[],!1,null,null,null).exports,Rm={props:{schemeContainer:{type:Object,required:!0},mode:{type:String,required:!0},textSelectionEnabled:{type:Boolean,default:!1},zoom:{type:Number,required:!0},editAllowed:{type:Boolean,default:!1},isStaticEditor:{type:Boolean,default:!1},isOfflineEditor:{type:Boolean,default:!1},menuOptions:{type:Array,default:[]}},components:{AdvancedColorEditor:Gd,ColorPicker:$d,StrokePatternDropdown:ku,PathCapDropdown:Du,NumberTextfield:wd,MenuDropdown:nc,Dropdown:bh,StrokeControl:Bm,TextStyleControl:Nm},beforeMount(){_h.Z.$on(_h.Z.ANY_ITEM_SELECTED,this.onItemSelectionChanged),_h.Z.$on(_h.Z.ANY_ITEM_DESELECTED,this.onItemSelectionChanged),_h.Z.$on(_h.Z.ITEM_SURROUND_CREATED,this.onItemSurroundCreated),_h.Z.$on(_h.Z.EDITOR_STATE_CHANGED,this.onEditorStateChanged)},beforeDestroy(){_h.Z.$off(_h.Z.ANY_ITEM_SELECTED,this.onItemSelectionChanged),_h.Z.$off(_h.Z.ANY_ITEM_DESELECTED,this.onItemSelectionChanged),_h.Z.$off(_h.Z.ITEM_SURROUND_CREATED,this.onItemSurroundCreated),_h.Z.$off(_h.Z.EDITOR_STATE_CHANGED,this.onEditorStateChanged)},data(){const e=e=>()=>{this.$emit(e)};return{knownModes:["view","edit"],searchKeyword:"",searchHighlights:[],connectorTypes:["linear","smooth","step","step-cut","step-smooth"],zoomOptions:[{name:"10%",value:10},{name:"25%",value:25},{name:"35%",value:35},{name:"50%",value:50},{name:"75%",value:75},{name:"100%",value:100},{name:"125%",value:125},{name:"150%",value:150},{name:"200%",value:200},{name:"300%",value:300},{name:"400%",value:400},{name:"500%",value:500},{name:"750%",value:750},{name:"1000%",value:1e3}],selectedItemsCount:0,firstSelectedItem:null,supportsFill:!1,fillColor:{type:"solid",color:"rgba(255,255,255,1.0)"},pathSourceCap:"empty",pathDestinationCap:"empty",currentConnectorSmoothing:"smooth",itemSurround:{shown:!1,padding:20,boundingBox:{x:0,y:0,w:0,h:0,r:0},item:null,childItemOriginalPositions:{}},menuDropdownOptions:[{name:"New diagram",callback:e("new-scheme-requested"),iconClass:"fas fa-file",disabled:!this.editAllowed||this.isStaticEditor||this.isOfflineEditor},{name:"Import diagram",callback:e("import-json-requested"),iconClass:"fas fa-file-import"},{name:"Duplicate diagram",callback:e("duplicate-diagram-requested"),iconClass:"fas fa-copy",disabled:!this.editAllowed||this.isStaticEditor||this.isOfflineEditor},{name:"Delete diagram",callback:e("delete-diagram-requested"),iconClass:"fas fa-trash",disabled:!this.editAllowed||this.isStaticEditor||this.isOfflineEditor},{name:"Create patch",callback:()=>_h.Z.emitSchemePatchRequested(this.schemeContainer.scheme),iconClass:"fas fa-file-export",disabled:!this.editAllowed||this.isStaticEditor||this.isOfflineEditor},{name:"Apply patch",callback:e("apply-patch-requested"),iconClass:"fas fa-file-import"},{name:"Export as JSON",callback:e("export-json-requested"),iconClass:"fas fa-file-export"},{name:"Export as SVG",callback:e("export-svg-requested"),iconClass:"fas fa-file-export"},{name:"Export as PNG",callback:e("export-png-requested"),iconClass:"fas fa-file-export"},{name:"Export as link",callback:e("export-link-requested"),iconClass:"fas fa-file-export"},{name:"Export as HTML",callback:e("export-html-requested"),iconClass:"fas fa-file-export"}].concat(this.menuOptions)}},methods:{toggleSnapToGrid(e){this.$store.dispatch("setGridSnap",e)},toggleSnapToItems(e){this.$store.dispatch("setItemSnap",e)},onItemSelectionChanged(){if(this.itemSurround.shown=!1,this.selectedItemsCount=this.schemeContainer.getSelectedItems().length,this.schemeContainer.getSelectedItems().length>0){const e=this.schemeContainer.getSelectedItems()[0],t=Wl.Z.find(e.shape);this.firstSelectedItem=e,t&&"advanced-color"===t.argType("fill")?(this.fillColor=e.shapeProps.fill,this.supportsFill=!0):this.supportsFill=!1,"connector"!==e.shape&&"path"!==e.shape||(this.pathSourceCap=e.shapeProps.sourceCap,this.pathDestinationCap=e.shapeProps.destinationCap)}this.selectedItemsCount>0&&"connector"===this.firstSelectedItem.shape&&(this.currentConnectorSmoothing=this.firstSelectedItem.shapeProps.smoothing)},setConnectorSmoothing(e){this.currentConnectorSmoothing=e,Jl.setDefaultConnectorSmoothing(this.$store,e),this.isCreatingConnector()?(this.$store.state.connecting.connectorItem.shapeProps.smoothing=e,_h.Z.emitItemChanged(this.$store.state.connecting.connectorItem.id)):this.emitShapePropChange("smoothing","choice",e)},isCreatingConnector(){return"connecting"===this.$store.state.editorStateName&&this.$store.state.connecting.connectorItem},onEditorStateChanged(){this.isCreatingConnector()&&(this.currentConnectorSmoothing=this.$store.state.connecting.connectorItem.shapeProps.smoothing)},stopEditCurve(){_h.Z.$emit(_h.Z.CURVE_EDIT_STOPPED)},stopDrawing(){_h.Z.$emit(_h.Z.STOP_DRAWING)},removeSelectedItems(){0!==this.selectedItemsCount&&this.schemeContainer.deleteSelectedItems()},emitShapePropChange(e,t,n){this.$emit("shape-prop-changed",e,t,n),"sourceCap"===e?this.pathSourceCap=n:"destinationCap"===e&&(this.pathDestinationCap=n)},onTextStylePropertyChange(e,t){this.$emit("text-style-prop-change",e,t)},onItemSurroundCreated(e,t,n){this.itemSurround.childItemOriginalPositions={},this.itemSurround.item=e,this.itemSurround.boundingBox=t,this.itemSurround.padding=n,this.itemSurround.shown=!0,ze()(e.childItems,(e=>{this.itemSurround.childItemOriginalPositions[e.id]=this.schemeContainer.worldPointOnItem(0,0,e)}))},onItemSurroundPaddingChanged(e){const t=this.itemSurround.item;if(!t)return;this.$store.dispatch("setItemSurroundPadding",e);let n=null;if(t.meta.parentId&&(n=this.schemeContainer.findItemById(t.meta.parentId)),n){const i=this.schemeContainer.localPointOnItem(this.itemSurround.boundingBox.x-e,this.itemSurround.boundingBox.y-e,n);t.area.x=i.x,t.area.y=i.y,t.area.w=this.itemSurround.boundingBox.w+2*e,t.area.h=this.itemSurround.boundingBox.h+2*e}else t.area.x=this.itemSurround.boundingBox.x-e,t.area.y=this.itemSurround.boundingBox.y-e,t.area.w=this.itemSurround.boundingBox.w+2*e,t.area.h=this.itemSurround.boundingBox.h+2*e;_h.Z.emitItemChanged(t.id,"area"),this.schemeContainer.updateMultiItemEditBox(),ze()(t.childItems,(e=>{const n=this.itemSurround.childItemOriginalPositions[e.id],i=this.schemeContainer.localPointOnItem(n.x,n.y,t);e.area.x=i.x,e.area.y=i.y,_h.Z.emitItemChanged(e.id,"area")}))},onAutoRemountChange(e){Jl.setAutoRemount(this.$store,e.target.checked)},onShowPivotChange(e){Jl.setShowPivot(this.$store,e.target.checked)},toggleClickableMarkers(e){e&&_h.Z.$emit(_h.Z.CLICKABLE_MARKERS_TOGGLED),Jl.setShowClickableMarkers(this.$store,e)},onZoomOutClicked(){let e=this.zoomOptions[0].value,t=!1;for(let n=0;n<this.zoomOptions.length&&!t;n++)this.zoomOptions[n].value<this.zoom?e=this.zoomOptions[n].value:t=!0;this.changeZoomTo(e)},onZoomInClicked(){let e=this.zoomOptions[this.zoomOptions.length-1].value,t=!1,n=this.zoomOptions.length-1;for(;!t;)this.zoomOptions[n].value>this.zoom?e=this.zoomOptions[n].value:t=!0,n-=1,n<0&&(t=!0);this.changeZoomTo(e)},onZoomOptionSelected(e){this.changeZoomTo(e.value)},changeZoomTo(e){let t=this.schemeContainer;const n=t.screenTransform.x,i=t.screenTransform.y,r=document.getElementById("svg_plot").getBoundingClientRect(),s=r.width/2,o=r.height/2,a=e/100,l=s-a*(s-n)/t.screenTransform.scale,c=o-a*(o-i)/t.screenTransform.scale;t.screenTransform.scale=a,t.screenTransform.x=l,t.screenTransform.y=c,this.$emit("zoom-changed",e)},onZoomSubmit(e){const t=e.target.value,n=parseInt(t);isNaN(n)||n>0&&this.changeZoomTo(n)},toggleSearchedItems(){this.$emit("zoomed-to-items",this.searchHighlights)},onDrawEpsilonChanged(e){this.$store.dispatch("updateDrawEpsilon",e)},toggleTextSelection(){this.$emit("text-selection-changed",!this.textSelectionEnabled)}},watch:{searchKeyword(e){if((e=e.trim().toLowerCase()).length>0){const t=[];let n=[];ze()(this.schemeContainer.getItems(),(i=>{let r=!1;"view"===this.mode&&this.schemeContainer.isItemInHUD(i)||(((i.name||"").toLowerCase().indexOf(e)>=0||i.tags&&i.tags.length>0&&find(i.tags,(t=>t.toLowerCase().indexOf(e)>=0)))&&(r=!0),r&&(n.push(i),t.push(i.id)))})),this.searchHighlights=n,_h.Z.emitItemsHighlighted(t)}else this.searchHighlights=[],_h.Z.emitItemsHighlighted([])}},computed:{historyRedoable(){return this.$store.state.history.redoable},historyUndoable(){return this.$store.state.history.undoable},shouldSnapToGrid(){return this.$store.getters.shouldSnapToGrid},shouldSnapToItems(){return this.$store.getters.shouldSnapToItems},currentState(){return this.$store.state.editorStateName},shouldShowPathHelpers(){return"editPath"===this.$store.state.editorStateName},shouldShowDrawHelpers(){return"draw"===this.$store.state.editorStateName},shouldShowPathCaps(){return"editPath"===this.$store.state.editorStateName||this.selectedItemsCount>0&&("connector"===this.firstSelectedItem.shape||"path"===this.firstSelectedItem.shape)},shouldShowConnectorControls(){return this.selectedItemsCount>0&&"connector"===this.firstSelectedItem.shape||"connecting"===this.$store.state.editorStateName},autoRemount(){return this.$store.getters.autoRemount},showPivot(){return this.$store.getters.showPivot},showClickableMarkers(){return this.$store.getters.showClickableMarkers},firstSelectedPathEditPoint(){return this.$store.getters.firstSelectedCurveEditPoint},drawEpsilon(){return this.$store.getters.drawEpsilon},animationEditorIsRecording(){return this.$store.getters.animationEditorIsRecording}}},Fm=Rm,Zm=(0,Le.Z)(Fm,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quick-helper-panel-wrapper text-nonselectable"},[n("div",{staticClass:"quick-helper-panel"},[n("div",{staticClass:"quick-helper-panel-section"},[n("ul",{staticClass:"button-group"},[n("li",[n("menu-dropdown",{attrs:{name:"","icon-class":"fas fa-bars",options:e.menuDropdownOptions},on:{"export-embedded-requested":function(t){return e.$emit("export-embedded-requested")},"export-html-requested":function(t){return e.$emit("export-html-requested")}}})],1)])]),e._v(" "),n("div",{staticClass:"quick-helper-panel-section"},[n("ul",{staticClass:"button-group"},[n("li",[n("span",{staticClass:"icon-button",attrs:{title:"Zoom to Selection"},on:{click:function(t){return e.$emit("clicked-zoom-to-selection")}}},[n("i",{staticClass:"fas fa-bullseye"})])]),e._v(" "),n("li",[n("div",{staticClass:"zoom-control"},[n("span",{staticClass:"zoom-button zoom-out",on:{click:e.onZoomOutClicked}},[n("i",{staticClass:"fas fa-search-minus"})]),e._v(" "),n("dropdown",{attrs:{options:e.zoomOptions,inline:!0,"hover-effect":!1,"search-enabled":!1},on:{selected:e.onZoomOptionSelected}},[n("input",{staticStyle:{"min-width":"80px","padding-left":"1px","padding-right":"1px"},domProps:{value:e.zoom},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onZoomSubmit.apply(null,arguments)}}})]),e._v(" "),n("span",{staticClass:"zoom-button zoom-in",on:{click:e.onZoomInClicked}},[n("i",{staticClass:"fas fa-search-plus"})])],1)]),e._v(" "),n("li",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyword,expression:"searchKeyword"}],staticClass:"textfield",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:"Search..."},domProps:{value:e.searchKeyword},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.toggleSearchedItems.apply(null,arguments)},input:function(t){t.target.composing||(e.searchKeyword=t.target.value)}}}),e._v(" "),e.searchKeyword?n("span",{staticClass:"link",on:{click:function(t){e.searchKeyword=""}}},[e._v("Reset search")]):e._e()]),e._v(" "),e.editAllowed?n("li",[n("div",{staticClass:"toggle-group"},e._l(e.knownModes,(function(t){return n("span",{staticClass:"toggle-button",class:["mode-"+t,e.mode===t?"toggled":""],on:{click:function(n){return e.$emit("mode-changed",t)}}},["edit"===t?n("i",{staticClass:"fas fa-edit"}):e._e(),e._v(" "),"view"===t?n("i",{staticClass:"fas fa-eye"}):e._e(),e._v("\n                            "+e._s(t)+"\n                        ")])})),0)]):e._e()])]),e._v(" "),"view"===e.mode?n("div",{staticClass:"quick-helper-panel-section"},[n("ul",{staticClass:"button-group"},[n("li",[n("span",{staticClass:"toggle-button",class:{toggled:e.showClickableMarkers},attrs:{title:"Toggle clickable items"},on:{click:function(t){return e.toggleClickableMarkers(!e.showClickableMarkers)}}},[n("i",{staticClass:"schemio-icon schemio-icon-iterm-marker"})])]),e._v(" "),n("li",[n("span",{staticClass:"toggle-button",class:{toggled:e.textSelectionEnabled},attrs:{title:"Toggle text selection"},on:{click:e.toggleTextSelection}},[n("i",{staticClass:"fa-solid fa-i-cursor"})])])])]):e._e(),e._v(" "),"edit"===e.mode?n("div",{staticClass:"quick-helper-panel-section"},[n("ul",{staticClass:"button-group"},[n("li",[n("span",{staticClass:"icon-button",class:{disabled:!e.historyUndoable},attrs:{title:"Undo"},on:{click:function(t){return e.$emit("clicked-undo")}}},[n("i",{staticClass:"fas fa-undo"})])]),e._v(" "),n("li",[n("span",{staticClass:"icon-button",class:{disabled:!e.historyRedoable},attrs:{title:"Redo"},on:{click:function(t){return e.$emit("clicked-redo")}}},[n("i",{staticClass:"fas fa-redo"})])]),e._v(" "),n("li",[n("span",{staticClass:"toggle-button",class:{toggled:e.shouldSnapToGrid},attrs:{title:"Snap to Grid"},on:{click:function(t){return e.toggleSnapToGrid(!e.shouldSnapToGrid)}}},[n("i",{staticClass:"fas fa-magnet"}),e._v(" "),n("i",{staticClass:"small-letter"},[e._v("G")])])]),e._v(" "),n("li",[n("span",{staticClass:"toggle-button",class:{toggled:e.shouldSnapToItems},attrs:{title:"Snap to Items"},on:{click:function(t){return e.toggleSnapToItems(!e.shouldSnapToItems)}}},[n("i",{staticClass:"fas fa-magnet"})])])])]):e._e(),e._v(" "),"edit"===e.mode&&e.selectedItemsCount>0?n("div",{staticClass:"quick-helper-panel-section"},[n("ul",{staticClass:"button-group"},[n("li",[n("span",{staticClass:"icon-button",attrs:{title:"Remove"},on:{click:function(t){return e.removeSelectedItems()}}},[n("i",{staticClass:"fas fa-trash"})])]),e._v(" "),n("li",[n("span",{staticClass:"icon-button",attrs:{title:"Bring To Front"},on:{click:function(t){return e.$emit("clicked-bring-to-front")}}},[n("img",{attrs:{src:"/assets/images/helper-panel/bring-to-front.svg"}})])]),e._v(" "),n("li",[n("span",{staticClass:"icon-button",attrs:{title:"Bring To Back"},on:{click:function(t){return e.$emit("clicked-bring-to-back")}}},[n("img",{attrs:{src:"/assets/images/helper-panel/bring-to-back.svg"}})])])])]):e._e(),e._v(" "),"edit"===e.mode&&e.selectedItemsCount>0?n("div",{staticClass:"quick-helper-panel-section"},[n("ul",{staticClass:"button-group"},[e.supportsFill?n("li",[n("advanced-color-editor",{attrs:{value:e.fillColor,width:"18px",height:"18px"},on:{changed:function(t){return e.emitShapePropChange("fill","advanced-color",arguments[0])}}})],1):e._e(),e._v(" "),e.firstSelectedItem?n("li",[n("StrokeControl",{key:"stroke-control-"+e.firstSelectedItem.id+"-"+e.firstSelectedItem.shape,attrs:{item:e.firstSelectedItem},on:{"color-changed":function(t){return e.emitShapePropChange("strokeColor","color",arguments[0])},"size-changed":function(t){return e.emitShapePropChange("strokeSize","number",arguments[0])},"pattern-changed":function(t){return e.emitShapePropChange("strokePattern","stroke-pattern",arguments[0])}}})],1):e._e(),e._v(" "),e.firstSelectedItem?n("li",[n("TextStyleControl",{key:"text-style-control-"+e.firstSelectedItem.id+"-"+e.firstSelectedItem.shape,attrs:{item:e.firstSelectedItem},on:{"property-changed":e.onTextStylePropertyChange}})],1):e._e(),e._v(" "),e.shouldShowPathCaps?n("li",[n("path-cap-dropdown",{key:"qhp-path-cap-source-"+e.firstSelectedItem.meta.revision,attrs:{value:e.pathSourceCap,"is-source":!0,"is-fat":"connector"===e.firstSelectedItem.shape&&e.firstSelectedItem.shapeProps.fat,width:"16px",height:15},on:{selected:function(t){return e.emitShapePropChange("sourceCap","path-cap",arguments[0])}}})],1):e._e(),e._v(" "),e.shouldShowPathCaps?n("li",[n("path-cap-dropdown",{key:"qhp-path-cap-destination-"+e.firstSelectedItem.meta.revision,attrs:{value:e.pathDestinationCap,"is-source":!1,"is-fat":"connector"===e.firstSelectedItem.shape&&e.firstSelectedItem.shapeProps.fat,width:"16px",height:15},on:{selected:function(t){return e.emitShapePropChange("destinationCap","path-cap",arguments[0])}}})],1):e._e()])]):e._e(),e._v(" "),"edit"===e.mode&&e.shouldShowConnectorControls?n("div",{staticClass:"quick-helper-panel-section"},[n("ul",{staticClass:"button-group"},e._l(e.connectorTypes,(function(t){return n("li",[n("span",{staticClass:"icon-button",class:{dimmed:e.currentConnectorSmoothing!=t},attrs:{title:t},on:{click:function(n){return e.setConnectorSmoothing(t)}}},[n("img",{attrs:{src:"/assets/images/helper-panel/connector-"+t+".svg"}})])])})),0)]):e._e(),e._v(" "),"edit"===e.mode&&e.shouldShowPathHelpers?n("div",{staticClass:"quick-helper-panel-section"},[n("ul",{staticClass:"button-group"},[e.firstSelectedPathEditPoint?n("li",[n("span",{staticClass:"icon-button",class:{dimmed:"L"!=e.firstSelectedPathEditPoint.t},attrs:{title:"Simple"},on:{click:function(t){return e.$emit("convert-path-points-to-simple")}}},[n("img",{attrs:{src:"/assets/images/helper-panel/path-point-simple.svg"}})])]):e._e(),e._v(" "),e.firstSelectedPathEditPoint?n("li",[n("span",{staticClass:"icon-button",class:{dimmed:"B"!=e.firstSelectedPathEditPoint.t},attrs:{title:"Simple"},on:{click:function(t){return e.$emit("convert-path-points-to-bezier")}}},[n("img",{attrs:{src:"/assets/images/helper-panel/path-point-bezier.svg"}})])]):e._e(),e._v(" "),n("li",[n("span",{staticClass:"btn btn-small btn-primary",on:{click:e.stopEditCurve}},[e._v("Stop Edit")])])])]):e._e(),e._v(" "),"edit"===e.mode&&e.shouldShowDrawHelpers?n("div",{staticClass:"quick-helper-panel-section"},[n("ul",{staticClass:"button-group"},[n("li",[n("number-textfield",{attrs:{value:e.drawEpsilon,name:"Optimization",min:1,max:1e3},on:{changed:e.onDrawEpsilonChanged}})],1),e._v(" "),n("li",[n("span",{staticClass:"btn btn-small btn-primary",on:{click:e.stopDrawing}},[e._v("Stop Drawing")])])])]):e._e(),e._v(" "),"edit"===e.mode?n("div",{staticClass:"quick-helper-panel-section"},[n("ul",{staticClass:"button-group"},[n("li",[n("input",{attrs:{type:"checkbox",title:"Automatically mount items into other items",id:"chk-auto-remount",disabled:e.animationEditorIsRecording},domProps:{checked:e.autoRemount},on:{change:e.onAutoRemountChange}}),e._v(" "),n("label",{attrs:{for:"chk-auto-remount",title:"Automatically mount items into other items"}},[e._v("Auto mount")])])])]):e._e(),e._v(" "),"edit"===e.mode?n("div",{staticClass:"quick-helper-panel-section"},[n("ul",{staticClass:"button-group"},[n("li",[n("input",{attrs:{type:"checkbox",title:"Show pivot point handler",id:"chk-show-pivot"},domProps:{checked:e.showPivot},on:{change:e.onShowPivotChange}}),e._v(" "),n("label",{attrs:{for:"chk-show-pivot",title:"Show pivot point handler"}},[e._v("Pivot")])])])]):e._e(),e._v(" "),"edit"===e.mode&&e.itemSurround.shown?n("div",{staticClass:"quick-helper-panel-section"},[n("ul",{staticClass:"button-group"},[n("li",[n("number-textfield",{attrs:{value:e.itemSurround.padding,name:"Padding"},on:{changed:e.onItemSurroundPaddingChanged}})],1)])]):e._e(),e._v(" "),n("div",{staticClass:"quick-helper-panel-section"},[e._t("default")],2)])])}),[],!1,null,null,null).exports;let jm=null;const zm={components:{AdvancedFill:Ah.Z},beforeMount(){this.init()},data(){return{previewItems:null,previewComponent:null,stylePreviews:[],defaultStyleSections:Ke()(yu,(e=>({name:e.name,styles:Ke()(e.styles,this.convertStyleToPreview)})))}},methods:{init(){null===jm&&this.$store.state.apiClient&&this.$store.state.apiClient.getStyles?this.$store.state.apiClient.getStyles().then((e=>{jm=e,this.stylePreviews=Ke()(e,this.convertStyleToPreview)})):Array.isArray(jm)&&(this.stylePreviews=Ke()(jm,this.convertStyleToPreview))},convertStyleToPreview:e=>({style:e,previewFill:Ah.Z.computeSvgFill(e.fill,e.id),previewStroke:e.strokeColor}),applyStyle(e){this.$emit("style-applied",e)},applyUserStyle(e){this.applyStyle(e)}}},Um=(0,Le.Z)(zm,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",e._l(e.defaultStyleSections,(function(t){return n("div",[n("ul",{staticClass:"shape-styles-preview"},e._l(t.styles,(function(t){return n("li",[n("div",{staticClass:"shape-style",on:{click:function(n){return e.applyStyle(t.style)}}},[n("svg",{attrs:{width:"40",height:"30"}},[n("advanced-fill",{attrs:{"fill-id":t.style.id,fill:t.style.fill,area:{x:4,y:4,w:32,h:22}}}),e._v(" "),n("rect",{attrs:{x:"4",y:"4",width:"32",height:"22",fill:t.previewFill,stroke:t.previewStroke,"stroke-width":"1"}})],1)])])})),0)])})),0),e._v(" "),n("div",[n("ul",{staticClass:"shape-styles-preview"},e._l(e.stylePreviews,(function(t,i){return n("li",[n("div",{staticClass:"shape-style",on:{click:function(n){return e.applyUserStyle(t.style)}}},[n("svg",{attrs:{width:"40",height:"30"}},[n("advanced-fill",{attrs:{"fill-id":t.style.id,fill:t.style.fill,area:{x:4,y:4,w:32,h:22}}}),e._v(" "),n("rect",{attrs:{x:"4",y:"4",width:"32",height:"22",fill:t.previewFill,stroke:t.previewStroke,"stroke-width":"1"}})],1)])])})),0)])])}),[],!1,null,null,null).exports,Hm={props:["x","y","item","schemeContainer"],components:{AdvancedColorEditor:Gd,StrokeControl:Bm,Modal:Xe,RichTextEditor:ql,VueTagsInput:fd(),StylesMiniPalette:Um},mounted(){this.updatePosition()},data(){let e=null,t=!1,n=!1;const i=Wl.Z.find(this.item.shape);return i&&"advanced-color"===i.argType("fill")&&(e=this.item.shapeProps.fill,t=!0),i&&"color"===i.argType("strokeColor")&&(n=!0),{fillColor:e,supportsFill:t,supportsStroke:n,posX:this.x,posY:this.y,nameEdited:!1,itemName:this.item.name,descriptionEditorShown:!1,itemTag:"",existingItemTags:Ke()(this.schemeContainer.itemTags,(e=>({text:e}))),stylesPopup:{shown:!1,x:0,y:0}}},methods:{onItemTagChange(e){this.item.tags=e.map((e=>e.text))},updatePosition(){const e=this.$refs.floatingHelperPanel.getBoundingClientRect();this.posX=uh.Z.clamp(this.x-e.width/2,10,window.innerWidth-10),this.posY=this.y},editPath(){_h.Z.emitCurveEdited(this.item)},cropImage(){_h.Z.$emit(_h.Z.IMAGE_CROP_TRIGGERED,this.item)},commitSchemeChange(e){_h.Z.emitSchemeChangeCommited(`item.${this.item.id}.${e}`)},updateShapeProp(e,t){this.item.shapeProps[e]=t,_h.Z.emitItemChanged(this.item.id,`shapeProps.${e}`),_h.Z.emitSchemeChangeCommited(`item.${this.item.id}.shapeProps.${e}`)},deleteItem(){this.schemeContainer.deleteSelectedItems(),_h.Z.emitSchemeChangeCommited()},triggerNameEdit(){this.nameEdited=!0,this.$nextTick((()=>{this.$refs.nameInput.focus()}))},toggleStylesPopup(){this.stylesPopup.shown?this.stylesPopup.shown=!1:(this.stylesPopup.x=0,this.stylesPopup.y=35,this.stylesPopup.shown=!0)},applyItemStyle(e){xu(this.item,e)&&(_h.Z.emitItemChanged(this.item.id),_h.Z.emitSchemeChangeCommited(`item.${this.item.id}.styles`)),this.stylesPopup.shown=!1}},watch:{x(e){this.updatePosition()},y(e){this.updatePosition()},itemName(e){this.item.name=e,_h.Z.emitItemChanged(this.item.id,"name"),_h.Z.emitSchemeChangeCommited(`item.${this.item.id}.name`)}},computed:{filteredItemTags(){return this.existingItemTags.filter((e=>new RegExp(this.itemTag,"i").test(e.text)))},itemTags(){return Array.isArray(this.item.tags)?this.item.tags.map((e=>({text:e}))):[]}}},Vm=Hm,qm=(0,Le.Z)(Vm,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"floating-helper-panel"}},[n("div",{ref:"floatingHelperPanel",staticClass:"floating-helper-panel",style:{top:e.posY+"px",left:e.posX+"px"}},[n("ul",{staticClass:"button-group"},[n("li",[n("div",{staticClass:"item-name"},[e.nameEdited?n("input",{directives:[{name:"model",rawName:"v-model",value:e.itemName,expression:"itemName"}],ref:"nameInput",attrs:{type:"text",placeholder:"Name..."},domProps:{value:e.itemName},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.nameEdited=!1},blur:function(t){e.nameEdited=!1},input:function(t){t.target.composing||(e.itemName=t.target.value)}}}):n("span",{attrs:{title:e.itemName},on:{click:e.triggerNameEdit}},[e._v(e._s(e.item.name))])])]),e._v(" "),n("li",[n("span",{staticClass:"icon-button",attrs:{title:"Description"},on:{click:function(t){e.descriptionEditorShown=!0}}},[n("i",{staticClass:"fas fa-paragraph"})])]),e._v(" "),e.supportsFill&&"connector"!==e.item.shape?n("li",[n("advanced-color-editor",{attrs:{value:e.fillColor,width:"18px",height:"18px",title:"Fill"},on:{changed:function(t){return e.updateShapeProp("fill",arguments[0])}}})],1):e._e(),e._v(" "),e.supportsStroke?n("li",[n("StrokeControl",{attrs:{item:e.item,title:"Stroke"},on:{"color-changed":function(t){return e.updateShapeProp("strokeColor",arguments[0])},"size-changed":function(t){return e.updateShapeProp("strokeSize",arguments[0])},"pattern-changed":function(t){return e.updateShapeProp("strokePattern",arguments[0])}}})],1):e._e(),e._v(" "),"path"===e.item.shape?n("li",[n("span",{staticClass:"icon-button",attrs:{title:"Edit path"},on:{click:e.editPath}},[n("img",{attrs:{src:"/assets/images/icons/create-curve.svg"}})])]):e._e(),e._v(" "),"image"===e.item.shape?n("li",[n("span",{staticClass:"icon-button",attrs:{title:"Crop image"},on:{click:e.cropImage}},[n("i",{staticClass:"fas fa-crop"})])]):e._e(),e._v(" "),e.supportsFill&&"connector"!==e.item.shape?n("li",[n("span",{staticClass:"icon-button",attrs:{title:"Styles"},on:{click:function(t){return e.toggleStylesPopup()}}},[n("i",{staticClass:"fas fa-palette"})])]):e._e(),e._v(" "),n("li",[n("span",{staticClass:"icon-button",attrs:{title:"Remove"},on:{click:function(t){return e.deleteItem()}}},[n("i",{staticClass:"fas fa-trash"})])])]),e._v(" "),e.descriptionEditorShown?n("modal",{attrs:{title:"Description"},on:{close:function(t){e.descriptionEditorShown=!1}}},[n("h5",[e._v("Tags")]),e._v(" "),n("vue-tags-input",{attrs:{tags:e.itemTags,"autocomplete-items":e.filteredItemTags},on:{"tags-changed":e.onItemTagChange},model:{value:e.itemTag,callback:function(t){e.itemTag=t},expression:"itemTag"}}),e._v(" "),n("h5",[e._v('Description of "'+e._s(e.item.name)+'"')]),e._v(" "),n("rich-text-editor",{attrs:{id:"floating-helper-panel-"+e.item.id,value:e.item.description},on:{changed:function(t){e.item.description=arguments[0],e.commitSchemeChange("description")}}})],1):e._e(),e._v(" "),e.stylesPopup.shown?n("div",{staticClass:"styles-popup",style:{top:e.stylesPopup.y+"px",left:e.stylesPopup.x+"px"}},[n("styles-mini-palette",{on:{"style-applied":e.applyItemStyle}})],1):e._e()],1)])}),[],!1,null,null,null).exports,Gm={props:{exportedItems:{value:[],type:Array},width:{value:300,type:Number},height:{value:300,type:Number},kind:{value:"svg",type:String},backgroundColor:{value:"rgba(255,255,255,1.0)",type:String}},components:{Modal:Xe,NumberTextfield:wd},data(){const e=Ke()(this.exportedItems,(e=>e.html)).join("\n");let t=0;ze()(this.exportedItems,(e=>{!isNaN(e.item.shapeProps.strokeSize)&&e.item.shapeProps.strokeSize>t&&(t=e.item.shapeProps.strokeSize)}));const n=Math.max(40,2*t);let i=n,r=n,s=n,o=n;return(this.width<60||this.height<60)&&(i=2*t,r=2*t,s=2*t,o=2*t),{shouldExportBackground:!1,paddingTop:i,paddingLeft:r,paddingBottom:o,paddingRight:s,largestStrokeSize:t,placement:"centered",svgHtml:e,previewPadding:20}},methods:{saveIt(){const e=this.$refs.svgContainer.cloneNode(!0);ze()(e.childNodes,(t=>{t&&t.nodeType===Node.ELEMENT_NODE&&"true"===t.getAttribute("data-preview-ignore")&&e.removeChild(t)})),Np(e).catch((e=>{console.error("Failed to rasterize some images",e)})).then((()=>{if("svg"===this.kind){const t=this.width+this.paddingRight+this.paddingLeft,n=this.height+this.paddingBottom+this.paddingTop;e.setAttribute("viewBox",`${-this.paddingLeft} ${-this.paddingTop} ${t} ${n}`),e.removeAttribute("width"),e.removeAttribute("height")}else{const t=this.width+2*this.largestStrokeSize,n=this.height+2*this.largestStrokeSize;e.setAttribute("viewBox",`${-this.largestStrokeSize} ${-this.largestStrokeSize} ${t} ${n}`),e.setAttribute("width",`${t}px`),e.setAttribute("height",`${n}px`)}const t=e.outerHTML,n=`data:image/svg+xml;base64,${btoa(t)}`;if("svg"===this.kind)this.downloadViaLink(`${this.exportedItems[0].item.name}.svg`,n);else{const e=document.createElement("canvas");e.width=Math.max(1,this.width+this.paddingLeft+this.paddingRight),e.height=Math.max(1,this.height+this.paddingTop+this.paddingBottom);const t=e.getContext("2d"),i=new Image;i.onload=()=>{t.fillStyle=this.backgroundColor,t.fillRect(0,0,e.width,e.height),t.drawImage(i,this.paddingLeft,this.paddingTop),this.downloadViaLink(`${this.exportedItems[0].item.name}.png`,e.toDataURL("image/png"))},i.src=n}}))},downloadViaLink(e,t){const n=document.createElement("a");document.body.appendChild(n);try{n.href=t,n.download=e,n.click(),this.$emit("close")}catch(e){console.error(e)}setTimeout((()=>document.body.removeChild(n)),100)}},computed:{preserveAspectRatio(){return"stretched"===this.placement?"none":"centered"===this.placement?"xMidYMid":"xMinYMin"},svgStyle(){return this.shouldExportBackground?{background:this.backgroundColor}:{}},previewStrokeSize(){const e=this.width+2*this.previewPadding+this.paddingLeft+this.paddingRight,t=this.height+2*this.previewPadding+this.paddingTop+this.paddingBottom;return Math.abs(e)<.001||Math.abs(t)<.001?1:2*Math.max(Math.abs(e/600),Math.abs(t/380))},viewBoxWidth(){return this.width+this.paddingRight},viewBoxHeight(){return this.height+this.paddingBottom},title(){return"svg"===this.kind?"Export as SVG":"Export as PNG"}}},Wm=(0,Le.Z)(Gm,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{title:e.title,"primary-button":"Save"},on:{close:function(t){return e.$emit("close")},"primary-submit":e.saveIt}},[n("table",[n("tbody",[n("tr",[n("td",[n("number-textfield",{attrs:{value:e.paddingLeft,name:"Left"},on:{changed:function(t){e.paddingLeft=arguments[0]}}})],1),e._v(" "),n("td",[n("number-textfield",{attrs:{value:e.paddingTop,name:"Top"},on:{changed:function(t){e.paddingTop=arguments[0]}}})],1),e._v(" "),n("td",[n("number-textfield",{attrs:{value:e.paddingRight,name:"Width"},on:{changed:function(t){e.paddingRight=arguments[0]}}})],1),e._v(" "),n("td",[n("number-textfield",{attrs:{value:e.paddingBottom,name:"Height"},on:{changed:function(t){e.paddingBottom=arguments[0]}}})],1)]),e._v(" "),n("tr",[n("td",{attrs:{colspan:"2"}},[e._v("\n                    Placement\n                    "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.placement,expression:"placement"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.placement=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"top-left"}},[e._v("Top Left")]),e._v(" "),n("option",{attrs:{value:"centered"}},[e._v("Centered")]),e._v(" "),n("option",{attrs:{value:"stretched"}},[e._v("Stretched")])])]),e._v(" "),n("td",{attrs:{colspan:"2"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.shouldExportBackground,expression:"shouldExportBackground"}],attrs:{type:"checkbox",id:"chk-export-svg-background"},domProps:{checked:Array.isArray(e.shouldExportBackground)?e._i(e.shouldExportBackground,null)>-1:e.shouldExportBackground},on:{change:function(t){var n=e.shouldExportBackground,i=t.target,r=!!i.checked;if(Array.isArray(n)){var s=e._i(n,null);i.checked?s<0&&(e.shouldExportBackground=n.concat([null])):s>-1&&(e.shouldExportBackground=n.slice(0,s).concat(n.slice(s+1)))}else e.shouldExportBackground=r}}}),n("label",{attrs:{for:"chk-export-svg-background"}},[e._v(" Export SVG Background")])])])])]),e._v(" "),n("svg",{ref:"svgContainer",staticClass:"export-svg-preview",style:e.svgStyle,attrs:{width:"100%",height:"300px",viewBox:-e.paddingLeft-e.previewPadding+" "+(-e.paddingTop-e.previewPadding)+" "+(e.viewBoxWidth+2*e.previewPadding)+" "+(e.viewBoxHeight+2*e.previewPadding),preserveAspectRatio:e.preserveAspectRatio,xmlns:"http://www.w3.org/2000/svg","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[n("g",{attrs:{"data-preview-ignore":"true"}},[n("rect",{staticStyle:{fill:"none","stroke-width":"1",stroke:"rgba(100,100,255, 0.2)"},style:{"stroke-width":e.previewStrokeSize},attrs:{x:-e.paddingLeft,y:-e.paddingTop,width:e.viewBoxWidth+e.paddingLeft,height:e.viewBoxHeight+e.paddingTop}})]),e._v(" "),n("g",{domProps:{innerHTML:e._s(e.svgHtml)}})])])}),[],!1,null,null,null).exports;function Km(e){return e.metaKey||e.ctrlKey||e.shiftKey}class Jm{constructor(e,t,n){this.schemeContainer=null,this.eventBus=e,this.name=n||"",this.store=t,this.subState=null,this.previousSubStates=[]}migrateSubState(e){this.subState&&(this.previousSubStates.push(this.subState),this.previousSubStates.length>10&&this.previousSubStates.shift()),this.subState=e,this.store.dispatch("setEditorSubStateName",this.subState?this.subState.name:"null")}migrateToPreviousSubState(){this.previousSubStates.length>0&&(this.subState=this.previousSubStates.pop(),this.store.dispatch("setEditorSubStateName",this.subState?this.subState.name:"null"))}resetPreviousSubStates(){this.previousSubStates=[]}setSchemeContainer(e){this.schemeContainer=e}reset(){}cancel(){this.reset(),this.eventBus.$emit(this.eventBus.CANCEL_CURRENT_STATE,this.name)}keyPressed(e,t){this.subState&&this.subState.keyPressed(e,t)}keyUp(e,t){this.subState&&this.subState.keyUp(e,t)}mouseDoubleClick(e,t,n,i,r,s){this.subState&&this.subState.mouseDoubleClick(e,t,n,i,r,s)}mouseDown(e,t,n,i,r,s){this.subState&&this.subState.mouseDown(e,t,n,i,r,s)}mouseMove(e,t,n,i,r,s){this.subState&&this.subState.mouseMove(e,t,n,i,r,s)}mouseUp(e,t,n,i,r,s){this.subState&&this.subState.mouseUp(e,t,n,i,r,s)}mouseWheel(e,t,n,i,r){if(r){const e=r.wheelDeltaY?r.wheelDeltaY===-3*r.deltaY:0===r.deltaMode;0===r.deltaX&&0===r.deltaY||(e?this.dragScreenOffset(r.deltaX,-r.deltaY):this.zoomByWheel(n,i,r.deltaY))}}zoomByWheel(e,t,n){var i=0,r=this.schemeContainer.screenTransform.x,s=this.schemeContainer.screenTransform.y;if(n<0){const n=e-(i=1.1*this.schemeContainer.screenTransform.scale)*(e-r)/this.schemeContainer.screenTransform.scale,o=t-i*(t-s)/this.schemeContainer.screenTransform.scale;this.schemeContainer.screenTransform.scale=i,this.dragScreenTo(n,o)}else if(this.schemeContainer.screenTransform.scale>.05){const n=e-(i=this.schemeContainer.screenTransform.scale/1.1)*(e-r)/this.schemeContainer.screenTransform.scale,o=t-i*(t-s)/this.schemeContainer.screenTransform.scale;this.schemeContainer.screenTransform.scale=i,this.dragScreenTo(n,o)}}zoomOutByKey(){this.changeZoomTo(.9*this.schemeContainer.screenTransform.scale)}zoomInByKey(){this.changeZoomTo(1.1*this.schemeContainer.screenTransform.scale)}changeZoomTo(e){let t=this.schemeContainer;const n=t.screenTransform.x,i=t.screenTransform.y,r=document.getElementById("svg_plot").getBoundingClientRect(),s=r.width/2,o=r.height/2,a=s-e*(s-n)/t.screenTransform.scale,l=o-e*(o-i)/t.screenTransform.scale;t.screenTransform.scale=e,t.screenTransform.x=a,t.screenTransform.y=l,_h.Z.$emit(_h.Z.SCREEN_TRANSFORM_UPDATED,t.screenTransform)}dragScreenOffset(e,t){let n=this.schemeContainer.screenTransform.x+e,i=this.schemeContainer.screenTransform.y+t;this.dragScreenTo(n,i)}dragScreenTo(e,t){const n=this.schemeContainer.screenSettings.boundingBox,i=this.schemeContainer.screenTransform.scale;if(n){const r=-(n.x+n.w)*i+10,s=this.schemeContainer.screenSettings.width-n.x*i-10,o=-(n.y+n.h)*i+10,a=this.schemeContainer.screenSettings.height-n.y*i-10;this.schemeContainer.screenTransform.x=Math.max(r,Math.min(e,s)),this.schemeContainer.screenTransform.y=Math.max(o,Math.min(t,a))}else this.schemeContainer.screenTransform.x=e,this.schemeContainer.screenTransform.y=t;this.eventBus.$emit(_h.Z.SCREEN_TRANSFORM_UPDATED,this.schemeContainer.screenTransform)}isSnappingToItemsEnabled(){return this.store.state.snap.items}snapToGrid(e){const t=uh.Z.getSnappingWidthForScale(this.schemeContainer.screenTransform.scale);return this.store.state.snap.grid?Math.round(e/t)*t:e}snapPoints(e,t,n,i){if(!e)return{dx:n,dy:i};let r=n,s=i,o=this.schemeContainer.screenTransform.scale,a=null,l=1e3,c=null,h=1e3;if(this.isSnappingToItemsEnabled()&&(ze()(this.schemeContainer.relativeSnappers.horizontal,(n=>{t.has(n.item.id)||ze()(e.horizontal,(e=>{let t=Math.abs(n.value-e.y-i);t*o<6&&t<l&&(a={snapper:n,dy:n.value-e.y},l=t)}))})),ze()(this.schemeContainer.relativeSnappers.vertical,(i=>{t.has(i.item.id)||ze()(e.vertical,(e=>{let t=Math.abs(i.value-e.x-n);t*o<6&&t<h&&(c={snapper:i,dx:i.value-e.x},h=t)}))}))),a)Jl.setItemSnapper(this.store,a.snapper),s=a.dy;else if(this.store.state.snap.grid){let t=1e3;ze()(e.horizontal,(e=>{const n=this.snapToGrid(e.y+i),r=Math.abs(n-e.y);r<t&&(t=r,s=n-e.y)}))}if(c)Jl.setItemSnapper(this.store,c.snapper),r=c.dx;else if(this.store.state.snap.grid){let t=1e3;ze()(e.vertical,(e=>{const i=this.snapToGrid(e.x+n),s=Math.abs(i-e.x);s<t&&(t=s,r=i-e.x)}))}return{dx:r,dy:s}}getUpdatePrecision(){return this.schemeContainer.screenTransform.scale<.5?0:Math.max(0,Math.round(Math.log10(100*this.schemeContainer.screenTransform.scale)-1))}round(e){return uh.Z.roundPrecise(e,this.getUpdatePrecision())}}class Ym extends Jm{constructor(e,t){super(e.eventBus,e.store,t),this.schemeContainer=e.schemeContainer,this.parentState=e}migrate(e){this.parentState.migrateSubState(e)}migrateSubState(e){this.parentState.migrateSubState(e)}migrateToPreviousSubState(){this.parentState.migrateToPreviousSubState()}cancel(){this.parentState.cancel()}getSchemeContainer(){return this.parentState.schemeContainer}}class Qm extends Ym{constructor(e,t){super(e,"drag-screen"),this.schemeContainer=e.schemeContainer,this.originalClickPoint=t,this.originalScreenOffset={x:this.schemeContainer.screenTransform.x,y:this.schemeContainer.screenTransform.y}}keyUp(e,t){e===ph.R.SPACE&&this.migrateToPreviousSubState()}mouseDown(e,t,n,i,r,s){this.originalClickPoint={x:e,y:t,mx:n,my:i},this.originalScreenOffset={x:this.schemeContainer.screenTransform.x,y:this.schemeContainer.screenTransform.y}}mouseMove(e,t,n,i,r,s){0!==s.buttons?this.originalClickPoint&&(this.schemeContainer.screenTransform.x=Math.floor(this.originalScreenOffset.x+n-this.originalClickPoint.mx),this.schemeContainer.screenTransform.y=Math.floor(this.originalScreenOffset.y+i-this.originalClickPoint.my)):this.mouseUp(e,t,n,i,r,s)}mouseUp(e,t,n,i,r,s){this.eventBus.$emit(this.eventBus.SCREEN_TRANSFORM_UPDATED),this.migrateToPreviousSubState()}}class Xm extends Ym{constructor(e,t,n,i,r,s){super(e,"multi-select"),this.clickedObject=null,this.shouldSelectOnlyOne=!1,this.multiSelectBox={x:t,y:n,w:0,h:0},this.originalClickPoint={x:t,y:n,mx:i,my:r},this.item=e.item,this.schemeContainer=e.schemeContainer,this.selectorCallback=s}mouseMove(e,t,n,i,r,s){0!==s.buttons?(e>this.originalClickPoint.x?(this.multiSelectBox.x=this.originalClickPoint.x,this.multiSelectBox.w=e-this.originalClickPoint.x):(this.multiSelectBox.x=e,this.multiSelectBox.w=this.originalClickPoint.x-e),t>this.originalClickPoint.y?(this.multiSelectBox.y=this.originalClickPoint.y,this.multiSelectBox.h=t-this.originalClickPoint.y):(this.multiSelectBox.y=t,this.multiSelectBox.h=this.originalClickPoint.y-t),Jl.setMultiSelectBox(this.store,this.multiSelectBox)):this.mouseUp(e,t,n,i,r,s)}mouseUp(e,t,n,i,r,s){this.selectorCallback(this.multiSelectBox,Km(s)),Jl.setMultiSelectBox(this.store,null),this.migrateToPreviousSubState()}}const ef=Jm,tf=new sh.Yd("UserEventBus"),nf=zh.Z.standardEvents.mousein.id,rf=zh.Z.standardEvents.mouseout.id,sf=zh.Z.standardEvents.clicked.id,of=new sh.Yd("StateDragItem"),af=!0,lf=!1,cf={moved:!0,rotated:!1,resized:!1,id:""},hf=cf;function df(e){return e.metaKey||e.ctrlKey||e.shiftKey}function uf(e){e&&(e.worldPivotPoint=uh.Z.worldPointInArea(e.pivotPoint.x*e.area.w,e.pivotPoint.y*e.area.h,e.area))}class pf extends Ym{constructor(e,t,n,i,r,s,o){super(e,t),this.originalPoint={x:i,y:r,mx:s,my:o},this.schemeContainer=e.schemeContainer,this.multiItemEditBox=n,this.multiItemEditBoxOriginalArea=Uc.Z.clone(n.area),this.boxPointsForSnapping=this.generateBoxPointsForSnapping(n),this.modificationContextId=ec().generate()}mouseUp(e,t,n,i,r,s){Jl.clearItemSnappers(this.store);let o=[];this.multiItemEditBox&&this.multiItemEditBox.items&&(o=this.multiItemEditBox.items),this.lastModifiedItem&&o.push(this.lastModifiedItem);let a=!1;ze()(o,(e=>{this.schemeContainer.readjustItem(e.id,lf,hf,this.getUpdatePrecision()),"path"!==e.shape&&"connector"!==e.shape||(a=!0)})),a&&this.schemeContainer.updateMultiItemEditBox(),this.schemeContainer.reindexItems(),this.eventBus.emitSchemeChangeCommited(),this.migrateToPreviousSubState()}generateBoxPointsForSnapping(e){const t=[[0,0],[e.area.w,0],[e.area.w,e.area.h],[0,e.area.h]],n={x:0,y:0},i={x:0,y:0};return ze()(t,((t,r)=>{const s=uh.Z.worldPointInArea(t[0],t[1],e.area);0===r?(n.x=s.x,n.y=s.y,i.x=s.x,i.y=s.y):(n.x=Math.min(n.x,s.x),n.y=Math.min(n.y,s.y),i.x=Math.max(i.x,s.x),i.y=Math.max(i.y,s.y))})),{vertical:[{x:n.x,y:n.y},{x:i.x,y:i.y}],horizontal:[{x:n.x,y:n.y},{x:i.x,y:i.y}]}}}class mf extends Ym{constructor(e,t,n,i,r,s,o){super(e,"resize-edit-box"),this.item=t,this.pointId=n,this.originalPoint={x:i,y:r,mx:s,my:o},this.schemeContainer=e.schemeContainer,this.controlPoint=this.findItemControlPoint(this.pointId),this.controlPoint?(this.controlPointOriginalX=this.controlPoint.x,this.controlPointOriginalY=this.controlPoint.y):this.migrateToPreviousSubState()}mouseMove(e,t,n,i,r,s){0!==s.buttons?this.handleControlPointDrag(e,t):this.mouseUp(e,t,n,i,r,s)}mouseUp(e,t,n,i,r,s){this.eventBus.emitSchemeChangeCommited(),this.eventBus.emitItemsHighlighted([]),this.migrateToPreviousSubState()}findItemControlPoint(e){for(let t=0;t<this.store.state.itemControlPoints.length;t++){const n=this.store.state.itemControlPoints[t];if(n.id===e)return n.point}return null}handleControlPointDrag(e,t){if(Jl.clearItemSnappers(this.store),this.controlPoint)if("connector"===this.item.shape&&(this.controlPoint.isEdgeStart||this.controlPoint.isEdgeEnd))this.handleCurveConnectorEdgeControlPointDrag(e,t,this.controlPoint);else{const n=this.schemeContainer.localPointOnItem(this.originalPoint.x,this.originalPoint.y,this.item),i=this.schemeContainer.localPointOnItem(e,t,this.item),r=i.x-n.x,s=i.y-n.y,o=Wl.Z.find(this.item.shape),a=(0,Kl.pD)(this.item),l=Math.max(1e-7,a.x),c=Math.max(1e-7,a.y);"connector"===this.item.shape?this.handleConnectorPointDrag(this.pointId,r,s,this.controlPointOriginalX/l,this.controlPointOriginalY/c):o.controlPoints.handleDrag(this.item,this.pointId,this.controlPointOriginalX/l,this.controlPointOriginalY/c,r,s,this,this.schemeContainer),this.eventBus.emitItemChanged(this.item.id),this.schemeContainer.readjustItem(this.item.id,af,hf,this.getUpdatePrecision()),Jl.setItemControlPoints(this.store,this.item),this.reindexNeeded=!0,this.lastModifiedItem=this.item}}handleConnectorPointDrag(e,t,n,i,r){const s=this.item.shapeProps.points[e];if(s){const e=this.schemeContainer.worldPointOnItem(i+t,r+n,this.item),o=this.snapPoints({vertical:[e],horizontal:[e]},new Set,0,0),a=this.schemeContainer.localPointOnItem(e.x+o.dx,e.y+o.dy,this.item);s.x=a.x,s.y=a.y,Jl.setSelectedConnectorPath(this.store,Wl.Z.find(this.item.shape).computeOutline(this.item))}}handleCurveConnectorEdgeControlPointDrag(e,t,n){let i=10;this.schemeContainer.screenTransform.scale>0&&(i/=this.schemeContainer.screenTransform.scale);const r=this.item.shapeProps.points[this.pointId];if(!r)return;let s=null;this.multiItemEditBox?s=this.multiItemEditBox.itemIds:(s=new Set,s.add(this.item.id));const o=this.snapPoints({horizontal:[{x:e,y:t}],vertical:[{x:e,y:t}]},s,0,0),a=this.schemeContainer.findClosestPointToItems(e+o.dx,t+o.dy,i,this.item.id,!0);if(a&&a.itemId!==this.item.id){const e=this.schemeContainer.localPointOnItem(a.x,a.y,this.item);r.x=e.x,r.y=e.y,this.eventBus.emitItemsHighlighted([a.itemId],{highlightPins:!0}),n.isEdgeStart?(this.item.shapeProps.sourceItem="#"+a.itemId,this.item.shapeProps.sourceItemPosition=a.distanceOnPath):(this.item.shapeProps.destinationItem="#"+a.itemId,this.item.shapeProps.destinationItemPosition=a.distanceOnPath)}else{const i=this.schemeContainer.localPointOnItem(e+o.dx,t+o.dy,this.item);r.x=i.x,r.y=i.y,this.eventBus.emitItemsHighlighted([]),n.isEdgeStart?(this.item.shapeProps.sourceItem=null,this.item.shapeProps.sourceItemPosition=0):(this.item.shapeProps.destinationItem=null,this.item.shapeProps.destinationItemPosition=0)}const l=Wl.Z.find(this.item.shape);Jl.setItemControlPoints(this.store,this.item),this.eventBus.emitItemChanged(this.item.id),this.schemeContainer.readjustItem(this.item.id,af,hf,this.getUpdatePrecision()),this.reindexNeeded=!0,this.lastModifiedItem=this.item,Jl.setSelectedConnectorPath(this.store,l.computeOutline(this.item))}}class ff extends pf{constructor(e,t,n,i,r,s){super(e,"drag-pivot-edit-box",t,n,i,r,s),this.oldPivotPoint={x:t.pivotPoint.x,y:t.pivotPoint.y}}mouseMove(e,t,n,i,r,s){if(0===s.buttons)return void this.mouseUp(e,t,n,i,r,s);if(!this.multiItemEditBox)return;if(0===this.multiItemEditBox.area.w||0===this.multiItemEditBox.area.h)return;const o=uh.Z.localPointInArea(e,t,this.multiItemEditBox.area),a=uh.Z.localPointInArea(this.originalPoint.x,this.originalPoint.y,this.multiItemEditBox.area);this.multiItemEditBox.pivotPoint.x=uh.Z.clamp(this.oldPivotPoint.x+(o.x-a.x)/this.multiItemEditBox.area.w,0,1),this.multiItemEditBox.pivotPoint.y=uh.Z.clamp(this.oldPivotPoint.y+(o.y-a.y)/this.multiItemEditBox.area.h,0,1),uf(this.multiItemEditBox)}mouseUp(e,t,n,i,r,s){1===this.multiItemEditBox.items.length&&(this.multiItemEditBox.items[0].area.px=this.multiItemEditBox.pivotPoint.x,this.multiItemEditBox.items[0].area.py=this.multiItemEditBox.pivotPoint.y,this.schemeContainer.updateMultiItemEditBoxItems(this.multiItemEditBox,lf,cf,this.getUpdatePrecision())),super.mouseUp(e,t,n,i,r,s)}}class gf extends pf{constructor(e,t,n,i,r,s,o){super(e,"resize-edit-box",t,i,r,s,o),this.draggerEdges=n}mouseMove(e,t,n,i,r,s){Jl.clearItemSnappers(this.store),0!==s.buttons?(bf(this.multiItemEditBox,this.multiItemEditBoxOriginalArea,this.originalPoint,this.store,this,e,t,this.draggerEdges),this.schemeContainer.updateMultiItemEditBoxItems(this.multiItemEditBox,af,{moved:!1,rotated:!1,resized:!0,id:this.modificationContextId},this.getUpdatePrecision()),1===this.multiItemEditBox.items.length&&Jl.setItemControlPoints(this.store,this.multiItemEditBox.items[0]),uf(this.multiItemEditBox),this.reindexNeeded=!0):this.mouseUp(e,t,n,i,r,s)}}class vf extends pf{constructor(e,t,n,i,r,s){super(e,"rotate-edit-box",t,n,i,r,s)}mouseMove(e,t,n,i,r,s){if(0===s.buttons)return void this.mouseUp(e,t,n,i,r,s);const o=this.multiItemEditBoxOriginalArea,a=uh.Z.worldPointInArea(o.w*this.multiItemEditBox.pivotPoint.x,o.h*this.multiItemEditBox.pivotPoint.y,o),l=this.calculateRotatedAngle(e,t,this.originalPoint.x,this.originalPoint.y,a.x,a.y,s),c=l*Math.PI/180,h=uh.Z.calculateRotationOffsetForSameCenter(this.multiItemEditBoxOriginalArea.x,this.multiItemEditBoxOriginalArea.y,a.x,a.y,c);this.multiItemEditBox.area.x=h.x,this.multiItemEditBox.area.y=h.y,this.multiItemEditBox.area.r=o.r+l,this.schemeContainer.updateMultiItemEditBoxItems(this.multiItemEditBox,af,{id:this.modificationContextId,moved:!1,rotated:!0,resized:!1},this.getUpdatePrecision()),this.reindexNeeded=!0,of.info("Rotated multi item edit box",this.multiItemEditBox)}calculateRotatedAngle(e,t,n,i,r,s,o){const a=n-r,l=i-s,c=e-r,h=t-s,d=a*a+l*l,u=c*c+h*h;if(d<1e-4||u<1e-4)return;const p=a*h-c*l>=0?1:-1,m=(a*c+l*h)/(Math.sqrt(d)*Math.sqrt(u));let f=p*Math.acos(m)*180/Math.PI;return isNaN(f)?0:(df(o)||(f=5*Math.round(f/5)),f)}}class yf extends pf{constructor(e,t,n,i,r,s){super(e,"drag-edit-box",t,n,i,r,s),this.proposedItemForMounting=null,this.proposedToRemountToRoot=!1}mouseMove(e,t,n,i,r,s){if(Jl.clearItemSnappers(this.store),!this.multiItemEditBox)return void this.migrateToPreviousSubState();if(0===s.buttons)return void this.mouseUp(e,t,n,i,r,s);const o=e-this.originalPoint.x,a=t-this.originalPoint.y;Jl.clearItemSnappers(this.store);const l=this.snapPoints(this.boxPointsForSnapping,this.multiItemEditBox.itemIds,o,a);if(this.multiItemEditBox.area.x=this.multiItemEditBoxOriginalArea.x+l.dx,this.multiItemEditBox.area.y=this.multiItemEditBoxOriginalArea.y+l.dy,this.schemeContainer.updateMultiItemEditBoxItems(this.multiItemEditBox,af,cf,this.getUpdatePrecision()),1===this.multiItemEditBox.items.length&&"connector"===this.multiItemEditBox.items[0].shape&&(Jl.setItemControlPoints(this.store,this.multiItemEditBox.items[0]),Jl.setSelectedConnectorPath(this.store,Wl.Z.find("connector").computeOutline(this.multiItemEditBox.items[0]))),this.store.state.autoRemount&&!this.store.state.animationEditor.isRecording){const e={meta:{},area:this.multiItemEditBox.area};this.proposedItemForMounting=this.schemeContainer.findItemSuitableForParent(e,(e=>!this.multiItemEditBox.itemIds.has(e.id)))}else this.proposedItemForMounting=null;this.proposedItemForMounting?(this.eventBus.emitItemsHighlighted([this.proposedItemForMounting.id],{highlightPins:!1}),this.proposedToRemountToRoot=!1):(this.eventBus.emitItemsHighlighted([]),this.proposedToRemountToRoot=!0),uf(this.multiItemEditBox)}mouseUp(e,t,n,i,r,s){this.store.state.autoRemount&&!this.store.state.animationEditor.isRecording&&(this.multiItemEditBox&&this.proposedItemForMounting?this.remountItems(this.multiItemEditBox.items,this.proposedItemForMounting):this.multiItemEditBox&&this.proposedToRemountToRoot&&this.remountItems(this.multiItemEditBox.items)),this.eventBus.emitItemsHighlighted([]),super.mouseUp(e,t,n,i,r,s)}remountItems(e,t){const n=new Set;ze()(e,(e=>{if(!(e.meta&&e.meta.ancestorIds&&yh()(e.meta.ancestorIds,(e=>n.has(e)))))if(n.add(e.id),t)e.meta&&e.meta.parentId!==t.id&&this.schemeContainer.remountItemInsideOtherItem(e.id,t.id);else if(e.meta&&e.meta.parentId&&e.meta.ancestorIds){const t=this.schemeContainer.findItemById(e.meta.ancestorIds[0]);t?this.schemeContainer.remountItemAfterOtherItem(e.id,t.id):this.schemeContainer.remountItemToRoot(e.id)}}))}}class xf extends Ym{constructor(e){super(e,"idle"),this.clickedObject=null}reset(){this.clickedObject=null,this.schemeContainer=this.parentState.schemeContainer}keyPressed(e,t){if(e!==ph.R.SPACE){var n=t.ctrlCmdPressed?10:1;ph.R.LEFT===e?this.dragItemsByKeyboard(-n,0):ph.R.RIGHT===e?this.dragItemsByKeyboard(n,0):ph.R.UP===e?this.dragItemsByKeyboard(0,-n):ph.R.DOWN===e?this.dragItemsByKeyboard(0,n):e!==ph.R.SPACE||this.startedDragging?e===ph.R.MINUS?this.zoomOutByKey():e===ph.R.EQUALS&&this.zoomInByKey():this.shouldDragScreen=!0}else this.migrate(new Qm(this.parentState))}mouseDown(e,t,n,i,r,s){if(function(e){return 1===e.button}(s))this.migrate(new Qm(this.parentState,{x:e,y:t,mx:n,my:i}));else if(function(e){return 2===e.button}(s))this.handleRightClick(e,t,n,i,r,s);else{if(!r||"void"===r.type)return df(s)||this.deselectAllItems(),void this.migrate(new Xm(this.parentState,e,t,n,i,((e,t)=>this.selectByBoundaryBox(e,t))));if(this.clickedObject=r,"item"===r.type&&r.item)this.schemeContainer.isItemSelected(r.item)||this.schemeContainer.selectItem(r.item,df(s));else if(r.connectorStarter)return void _h.Z.$emit(_h.Z.START_CONNECTING_ITEM,r.connectorStarter.item,r.connectorStarter.point)}}mouseDoubleClick(e,t,n,i,r,s){r.item?"path"===r.item.shape?this.eventBus.emitCurveEdited(r.item):"connector"===r.item.shape?this.handleDoubleClickOnConnector(r.item,e,t):this.findTextSlotAndEmitInPlaceEdit(r.item,e,t):r.controlPoint&&"connector"===r.controlPoint.item.shape?this.handleDoubleClickOnConnectorControlPoint(r.controlPoint.item,r.controlPoint.pointId):r.itemTextElement?this.findTextSlotAndEmitInPlaceEdit(r.itemTextElement.item,e,t):"void"===r.type?this.eventBus.$emit(_h.Z.VOID_DOUBLE_CLICKED,e,t,n,i):"multi-item-edit-box"===r.type&&1===r.multiItemEditBox.items.length&&"path"===r.multiItemEditBox.items[0].shape&&this.eventBus.emitCurveEdited(r.multiItemEditBox.items[0])}mouseMove(e,t,n,i,r,s){if(this.clickedObject){if("item"===this.clickedObject.type&&this.schemeContainer.multiItemEditBox)return this.migrate(new yf(this.parentState,this.schemeContainer.multiItemEditBox,e,t,n,i)),void this.reset();if("multi-item-edit-box-rotational-dragger"===this.clickedObject.type)return this.migrate(new vf(this.parentState,this.schemeContainer.multiItemEditBox,e,t,n,i)),void this.reset();if("multi-item-edit-box-resize-dragger"===this.clickedObject.type)return this.migrate(new gf(this.parentState,this.schemeContainer.multiItemEditBox,this.clickedObject.draggerEdges,e,t,n,i)),void this.reset();if("multi-item-edit-box-pivot-dragger"===this.clickedObject.type)return this.migrate(new ff(this.parentState,this.schemeContainer.multiItemEditBox,e,t,n,i)),void this.reset();if("control-point"===this.clickedObject.type)return this.migrate(new mf(this.parentState,this.clickedObject.controlPoint.item,this.clickedObject.controlPoint.pointId,e,t,n,i)),void this.reset()}}mouseUp(){this.clickedObject=null}handleRightClick(e,t,n,i,r,s){"item"===r.type?(this.schemeContainer.isItemSelected(r.item)||this.schemeContainer.selectItem(r.item,df(s)),this.eventBus.emitRightClickedItem(r.item,n,i)):"void"===r.type&&(this.schemeContainer.deselectAllItems(),this.eventBus.$emit(_h.Z.VOID_RIGHT_CLICKED,e,t,n,i))}deselectAllItems(){this.schemeContainer.deselectAllItems(),ze()(this.schemeContainer.selectedItems,(e=>this.eventBus.emitItemDeselected(e.id)))}dragItemsByKeyboard(e,t){const n=this.schemeContainer.multiItemEditBox;n&&!n.locked&&(n.area.x+=e,n.area.y+=t,this.schemeContainer.updateMultiItemEditBoxItems(n,lf,cf,this.getUpdatePrecision()),this.schemeContainer.updateMultiItemEditBox())}handleDoubleClickOnConnector(e,t,n){const i=Wl.Z.find(e.shape);if(!i)return;let r=parseInt(e.shapeProps.strokeSize)+1;const s=document.createElementNS("http://www.w3.org/2000/svg","path");let o="";if(e.shapeProps.fat&&e.shapeProps.points.length>1){const t=e.shapeProps.points;o=`M ${t[0].x} ${t[0].y}`;for(let e=1;e<t.length;e++)o+=` L ${t[e].x} ${t[e].y}`;r+=e.shapeProps.fatWidth}else o=i.computeOutline(e);if(!o)return;s.setAttribute("d",o);const a=this.schemeContainer.localPointOnItem(t,n,e),l=uh.Z.closestPointOnPath(a.x,a.y,s),c=a.x-l.x,h=a.y-l.y;if(Math.sqrt(c*c+h*h)<=r){const t=this.findClosestLineSegment(l.distance,e.shapeProps.points,s);e.shapeProps.points.splice(t+1,0,{x:l.x,y:l.y}),this.eventBus.emitItemChanged(e.id),this.schemeContainer.readjustItem(e.id,af,hf,this.getUpdatePrecision()),Jl.setItemControlPoints(this.store,e),Jl.setSelectedConnectorPath(this.store,Wl.Z.find(e.shape).computeOutline(e)),this.eventBus.emitSchemeChangeCommited()}}findClosestLineSegment(e,t,n){let i=t.length-1;for(;i>0;){if(uh.Z.closestPointOnPath(t[i].x,t[i].y,n).distance<e)return i;i--}return 0}handleDoubleClickOnConnectorControlPoint(e,t){e.shapeProps.points.splice(t,1),this.eventBus.emitItemChanged(e.id),this.schemeContainer.readjustItem(e.id,af,hf,this.getUpdatePrecision()),Jl.setItemControlPoints(this.store,e),Jl.setSelectedConnectorPath(this.store,Wl.Z.find(e.shape).computeOutline(e)),this.eventBus.emitSchemeChangeCommited()}findTextSlotAndEmitInPlaceEdit(e,t,n){const i=this.findItemTextSlotByPoint(e,t,n);i&&this.eventBus.emitItemTextSlotEditTriggered(e,i.name,i.area,i.markupDisabled,!1)}findItemTextSlotByPoint(e,t,n){const i=this.schemeContainer.localPointOnItem(t,n,e),r=Wl.Z.find(e.shape).getTextSlots(e);let s=null;for(let e=0;e<r.length&&!s;e++){const t=r[e];uh.Z.isPointInArea(i.x,i.y,t.area)&&(s=t)}return!s&&r.length>0&&(s=r[0]),s}selectByBoundaryBox(e,t){const n=[];ze()(this.schemeContainer.getItems(),(t=>{const i=[{x:0,y:0},{x:t.area.w,y:0},{x:t.area.w,y:t.area.h},{x:0,y:t.area.h}];let r=!0;for(let n=0;n<i.length&&r;n++){const s=this.schemeContainer.worldPointOnItem(i[n].x,i[n].y,t);r=uh.Z.isPointInArea(s.x,s.y,e)}r&&n.push(t)})),this.schemeContainer.selectMultipleItems(n,t)}}function bf(e,t,n,i,r,s,o,a){let l=e.area.x,c=e.area.y,h=e.area.w,d=e.area.h,u=s-n.x,p=o-n.y,m=uh.Z.worldPointInArea(0,0,e.area),f=uh.Z.worldPointInArea(1,0,e.area),g=uh.Z.worldPointInArea(0,1,e.area);const v={x:f.x-m.x,y:f.y-m.y},y={x:g.x-m.x,y:g.y-m.y};Jl.clearItemSnappers(i);const x=(n,i,s,o,a)=>{const l=uh.Z.worldPointInArea(n,i,t),c=uh.Z.worldPointInArea(s,o,t);let h=null;uh.Z.sameFloatingValue(l.x,c.x)?h="vertical":uh.Z.sameFloatingValue(l.y,c.y)&&(h="horizontal");let d=u*a.x+p*a.y;if(h){const t={};let n;t[h]=[l],n=r?r.snapPoints(t,e.itemIds,d*a.x,d*a.y):{dx:d*a.x,dy:d*a.y},d=n.dx*a.x+n.dy*a.y}return d};if(2===a.length&&"top"===a[0]&&"left"===a[1]){const e=x(0,0,t.w,0,y),n=x(0,0,0,t.h,v);l=t.x+n*v.x+e*y.x,c=t.y+n*v.y+e*y.y,h=t.w-n,d=t.h-e,d<0&&(d=0)}else ze()(a,(e=>{if("top"===e){const e=x(0,0,t.w,0,y);l=t.x+e*y.x,c=t.y+e*y.y,d=t.h-e,d<0&&(d=0)}else if("bottom"===e){const e=x(0,t.h,t.w,t.h,y);d=t.h+e,d<0&&(d=0)}else if("left"===e){const e=x(0,0,0,t.h,v);l=t.x+e*v.x,c=t.y+e*v.y,h=t.w-e,h<0&&(h=0)}else if("right"===e){const e=x(t.w,0,t.w,t.h,v);h=t.w+e,h<0&&(h=0)}}));e.area.x=l,e.area.y=c,h>0&&(e.area.w=h),d>0&&(e.area.h=d)}var wf=n(9113);const Cf=!0,_f={id:"",moved:!0,rotated:!1,resized:!1};function Af(e){return e&&("path-point"===e.type||"path-control-point"===e.type||"path-segment"===e.type)}function Sf(e,t){e.shapeProps.paths.forEach(((e,n)=>{e.points.forEach(((e,i)=>{t(e,n,i)}))}))}function kf(e,t,n,i){const r=i+3*(t-n)-e,s=3*(e-2*t+n),o=4*s*s-12*r*(3*(t-e));if(o<=0)return[];const a=Math.sqrt(o),l=(-2*s+a)/(6*r),c=(-2*s-a)/(6*r),h=[],d=r=>e*(1-r)*(1-r)*(1-r)+3*t*r*(1-r)*(1-r)+3*n*r*r*(1-r)+r*r*r*i;return l>=0&&l<=1&&h.push(d(l)),c>=0&&c<=1&&h.push(d(c)),h}function If(e,t,n){const i=e-2*t+n;if(uh.Z.tooSmall(i))return[];const r=(n-t)/i;return r>=0&&r<=1?[e*r*r+2*t*r*(1-r)+n*(1-r)*(1-r)]:[]}function Pf(e){const{w:t,h:n}=e.area;let i=null;const r=e=>{i.x1=Math.min(i.x1,e),i.x2=Math.max(i.x2,e)},s=e=>{i.y1=Math.min(i.y1,e),i.y2=Math.max(i.y2,e)},o=(e,t)=>{i?(r(e),s(t)):i={x1:e,y1:t,x2:e,y2:t}},a=[];Sf(e,((i,l,c)=>{0===c&&(a[l]=[]);const h=(0,Gc.oJ)(i,t,n);o(h.x,h.y);const d=(0,Kl.rs)(h.x,h.y,e);d.t=i.t;let u=null;if(c===e.shapeProps.paths[l].points.length-1?e.shapeProps.paths[l].closed&&(u=(0,Gc.oJ)(e.shapeProps.paths[l].points[0],t,n)):u=(0,Gc.oJ)(e.shapeProps.paths[l].points[c+1],t,n),"B"===i.t||u&&"B"===u.t){const t=(0,Kl.rs)(h.x+h.x1,h.y+h.y1,e);d.x1=t.x,d.y1=t.y;const n=(0,Kl.rs)(h.x+h.x2,h.y+h.y2,e);d.x2=n.x,d.y2=n.y,"B"===i.t&&u&&"B"===u.t?(kf(h.x,h.x+h.x2,u.x+u.x1,u.x).forEach(r),kf(h.y,h.y+h.y2,u.y+u.y1,u.y).forEach(s)):"B"===i.t&&u?(If(h.x,h.x+h.x2,u.x).forEach(r),If(h.y,h.y+h.y2,u.y).forEach(s)):"B"!==i.t&&u&&"B"===u.t&&(If(h.x,u.x+u.x1,u.x).forEach(r),If(h.y,u.y+u.y1,u.y).forEach(s))}if("A"===i.t&&u){d.h=i.h;const e=uh.Z.distanceBetweenPoints(h.x,h.y,u.x,u.y),t=e*i.h/100;if(!uh.Z.tooSmall(t)&&!uh.Z.tooSmall(e)){const n=Math.abs(t/2+e*e/(8*t)),i=[{x:0,y:n},{x:0,y:-n},{x:n,y:0},{x:-n,y:0}],r=uh.Z.createLineEquation(h.x,h.y,u.x,u.y),s={x:(u.x+h.x)/2,y:(u.y+h.y)/2},a=uh.Z.rotateVector90CounterClockwise((u.x-h.x)/e,(u.y-h.y)/e),l={x:s.x+a.x*t,y:s.y+a.y*t};t<0&&(a.x=-a.x,a.y=-a.y);const c=s.x+a.x*(Math.abs(t)-n),d=s.y+a.y*(Math.abs(t)-n),p=uh.Z.identifyPointSideAgainstLine(l.x,l.y,r);i.forEach((e=>{e.x+=c,e.y+=d,p*uh.Z.identifyPointSideAgainstLine(e.x,e.y,r)>0&&o(e.x,e.y)}))}}a[l][c]=d}));const l=(0,Kl.rs)(i.x1,i.y1,e);e.area.w=Math.max(0,i.x2-i.x1),e.area.h=Math.max(0,i.y2-i.y1);const c=uh.Z.findTranslationMatchingWorldPoint(l.x,l.y,0,0,e.area,e.meta.transformMatrix);e.area.x=c.x,e.area.y=c.y,Sf(e,((t,n,i)=>{const r=a[n][i],s=(0,Kl.N5)(r.x,r.y,e);if(s.t=r.t,"B"===s.t){const t=(0,Kl.N5)(r.x1,r.y1,e);s.x1=t.x-s.x,s.y1=t.y-s.y;const n=(0,Kl.N5)(r.x2,r.y2,e);s.x2=n.x-s.x,s.y2=n.y-s.y}"A"===t.t&&(s.h=t.h),e.shapeProps.paths[n].points[i]=(0,Gc.Vk)(s,e.area.w,e.area.h)}))}function Ef(e){if(e.area.w>100&&e.area.h>100)return;const t=Math.max(100,e.area.w),n=Math.max(100,e.area.h);if(e.shapeProps.paths.length>0&&e.shapeProps.paths[0].points.length>0){const i=(0,Gc.oJ)(e.shapeProps.paths[0].points[0],e.area.w,e.area.h),r=(0,Kl.rs)(i.x,i.y,e);Sf(e,((i,r,s)=>{const o=(0,Gc.oJ)(i,e.area.w,e.area.h);e.shapeProps.paths[r].points[s]=(0,Gc.Vk)(o,t,n)})),e.area.w=t,e.area.h=n;const s=(0,Gc.oJ)(e.shapeProps.paths[0].points[0],e.area.w,e.area.h),o=uh.Z.findTranslationMatchingWorldPoint(r.x,r.y,s.x,s.y,e.area,e.meta.transformMatrix);e.area.x=o.x,e.area.y=o.y}}class Tf extends Ym{constructor(e,t,n,i){super(e,"bezier-conversion"),this.point=t,this.pathId=n,this.pointId=i,this.item=e.item}mouseMove(e,t,n,i,r,s){this.updateBezierPoint(e,t)}updateBezierPoint(e,t){const n=this.schemeContainer.localPointOnItem(e,t,this.item),i=(0,Gc.Vk)(this.parentState.snapCurvePoint(-1,-1,n.x,n.y),this.item.area.w,this.item.area.h);this.point.t="B",this.point.x2=this.round(i.x-this.point.x),this.point.y2=this.round(i.y-this.point.y),this.point.x1=-this.point.x2,this.point.y1=-this.point.y2,this.eventBus.emitItemChanged(this.item.id),Jl.updateCurveEditPoint(this.store,this.item,this.pathId,this.pointId,this.point)}mouseUp(e,t,n,i,r,s){this.updateBezierPoint(e,t);const o=(0,Gc.Vk)((0,Kl.N5)(e,t,this.item),this.item.area.w,this.item.area.h);o.t="L",this.item.shapeProps.paths[this.pathId].points.push(o),this.migrate(new Mf(this.parentState,this.pathId))}}class Mf extends Ym{constructor(e,t){super(e,"creating-path"),this.item=e.item,this.pathId=t,this.shouldClosePath=!1,this.mouseIsDown=!1,this.originalMouseX=0,this.originalMouseY=0}keyPressed(e,t){e===ph.R.SPACE&&this.migrate(new Qm(this.parentState))}mouseDown(e,t,n,i,r,s){this.originalMouseX=n,this.originalMouseY=i,this.mouseIsDown=!0,this.pathId>=this.item.shapeProps.paths.length&&this.item.shapeProps.paths.push({closed:!1,points:[],pos:"relative"});const o=(0,Kl.N5)(e,t,this.item),a=this.parentState.snapCurvePoint(this.pathId,0,o.x,o.y),l=this.item.shapeProps.paths[this.pathId].points,c=(0,Gc.Vk)({x:a.x,y:a.y,t:"L"},this.item.area.w,this.item.area.h);if(0===l.length)l.push(c);else{const e=l.length-1;l[e].x=c.x,l[e].y=c.y,this.snapToFirstPoint(l[e])}this.eventBus.emitItemChanged(this.item.id),Jl.updateAllCurveEditPoints(this.store,this.item),this.parentState.historyCommit()}snapToFirstPoint(e){if(this.item.shapeProps.paths[this.pathId].points.length>2){const t=this.item.shapeProps.paths[this.pathId].points[0],n=(e.x-t.x)*this.item.area.w/Gc.DC,i=(e.y-t.y)*this.item.area.h/Gc.DC;Math.sqrt(n*n+i*i)*this.getSchemeContainer().screenTransform.scale<=5?(e.x=t.x,e.y=t.y,this.shouldClosePath=!0):this.shouldClosePath=!1}}mouseMove(e,t,n,i,r,s){if(Jl.clearItemSnappers(this.store),this.item.shapeProps.paths.length>this.pathId&&this.item.shapeProps.paths[this.pathId].points.length>0){const r=this.item.shapeProps.paths[this.pathId].points.length-1,s=this.item.shapeProps.paths[this.pathId].points[r];if(this.mouseIsDown&&Math.max(Math.abs(n-this.originalMouseX),Math.abs(i-this.originalMouseY))>3)return void this.migrate(new Tf(this.parentState,s,this.pathId,r));{const n=(0,Kl.N5)(e,t,this.item),i=this.parentState.snapCurvePoint(this.pathId,r,n.x,n.y),o=(0,Gc.Vk)({x:i.x,y:i.y,t:"L"},this.item.area.w,this.item.area.h);s.x=o.x,s.y=o.y,this.snapToFirstPoint(s),this.eventBus.emitItemChanged(this.item.id),Jl.updateCurveEditPoint(this.store,this.item,this.pathId,r,s)}}}mouseUp(e,t,n,i,r,s){if(Jl.clearItemSnappers(this.store),this.mouseIsDown=!1,this.shouldClosePath)return this.item.shapeProps.paths[this.pathId].closed=!0,this.shouldClosePath=!1,void this.cancel();const o=(0,Kl.N5)(e,t,this.item),a=(0,Gc.Vk)({x:o.x,y:o.y,t:"L"},this.item.area.w,this.item.area.h);this.item.shapeProps.paths[this.pathId].points.push(a),this.eventBus.emitItemChanged(this.item.id),Jl.updateAllCurveEditPoints(this.store,this.item)}reset(){this.pathId<this.item.shapeProps.paths.length&&this.item.shapeProps.paths[this.pathId].points.length>0&&this.item.shapeProps.paths[this.pathId].points.pop()}}class Of extends Ym{constructor(e,t,n,i){super(e,"drag-object"),this.draggedObject=t,this.item=e.item,this.schemeContainer=e.schemeContainer,this.originalClickPoint={x:n,y:i},this.worldSelectedPoints=null,this.originalCurvePaths=Uc.Z.clone(this.item.shapeProps.paths),"path-point"!==this.draggedObject.type&&"path-segment"!==this.draggedObject.type||(this.worldSelectedPoints=this.createWorldSelectedBoundsPoints())}forEachSelectedPoint(e){Jl.getCurveEditPaths(this.store).forEach(((t,n)=>{t.points.forEach((t=>{t.selected&&e(this.item.shapeProps.paths[n].points[t.id],n,t.id)}))}))}createWorldSelectedBoundsPoints(){const e=[],t=[],n=(e,t)=>{0===e.length?(e.push(t),e.push(t)):(e[0]=Math.min(e[0],t),e[1]=Math.max(e[1],t))};return this.forEachSelectedPoint((i=>{const r=(0,Gc.oJ)(i,this.item.area.w,this.item.area.h),s=(0,Kl.rs)(r.x,r.y,this.item);n(e,s.x),n(t,s.y)})),[{x:e[0],y:t[0]},{x:e[1],y:t[0]},{x:e[1],y:t[1]},{x:e[0],y:t[1]}]}mouseMove(e,t,n,i,r,s){0!==s.buttons?(Jl.clearItemSnappers(this.store),"path-point"===this.draggedObject.type||"path-segment"===this.draggedObject.type?this.handleAllSelectedPoints(e,t):"path-control-point"===this.draggedObject.type&&this.handleCurveControlPointDrag(e,t,s)):this.mouseUp(e,t,n,i,r,s)}mouseUp(e,t,n,i,r,s){this.parentState.historyCommit(),Jl.clearItemSnappers(this.store),this.migrateToPreviousSubState()}snapCurvePoint(e,t,n,i){return this.parentState.snapCurvePoint(e,t,n,i)}_cx(e){return e*Gc.DC/this.item.area.w}_cy(e){return e*Gc.DC/this.item.area.h}cx_(e){return e*this.item.area.w/Gc.DC}cy_(e){return e*this.item.area.h/Gc.DC}handleCurveControlPointDrag(e,t,n){const i=this.item.shapeProps.paths[this.draggedObject.pathIndex].points[this.draggedObject.pointIndex];if("A"===i.t)return void this.handleArcControlPointDrag(e,t,n);const r=this.schemeContainer.localPointOnItem(this.originalClickPoint.x,this.originalClickPoint.y,this.item),s=this.schemeContainer.localPointOnItem(e,t,this.item),o=this.draggedObject.controlPointIndex,a=1===o?2:1,l=this.snapCurvePoint(-1,-1,this.cx_(i.x+this.originalCurvePaths[this.draggedObject.pathIndex].points[this.draggedObject.pointIndex][`x${o}`])+s.x-r.x,this.cy_(i.y+this.originalCurvePaths[this.draggedObject.pathIndex].points[this.draggedObject.pointIndex][`y${o}`])+s.y-r.y);i[`x${o}`]=this._cx(l.x)-i.x,i[`y${o}`]=this._cy(l.y)-i.y,"B"!==i.t||n.metaKey||n.ctrlKey||n.shiftKey||(i[`x${a}`]=-i[`x${o}`],i[`y${a}`]=-i[`y${o}`]),this.eventBus.emitItemChanged(this.item.id),Jl.updateCurveEditPoint(this.store,this.item,this.draggedObject.pathIndex,this.draggedObject.pointIndex,i),this.schemeContainer.readjustItem(this.item.id,Cf,_f,this.getUpdatePrecision())}handleArcControlPointDrag(e,t,n){const i=this.item.shapeProps.paths[this.draggedObject.pathIndex].points[this.draggedObject.pointIndex];let r=null;r=this.draggedObject.pointIndex>=this.item.shapeProps.paths[this.draggedObject.pathIndex].points.length-1?this.item.shapeProps.paths[this.draggedObject.pathIndex].points[0]:this.item.shapeProps.paths[this.draggedObject.pathIndex].points[this.draggedObject.pointIndex+1];const s=this.schemeContainer.localPointOnItem(e,t,this.item),o=(0,Gc.oJ)(r,this.item.area.w,this.item.area.h),a=(0,Gc.oJ)(i,this.item.area.w,this.item.area.h),l=uh.Z.distanceBetweenPoints(a.x,a.y,o.x,o.y),c=uh.Z.createLineEquation(a.x,a.y,o.x,o.y),h=uh.Z.distanceFromPointToLine(s.x,s.y,c);uh.Z.tooSmall(l)||(i.h=-h/l*100*uh.Z.identifyPointSideAgainstLine(s.x,s.y,c)),this.eventBus.emitItemChanged(this.item.id),Jl.updateCurveEditPoint(this.store,this.item,this.draggedObject.pathIndex,this.draggedObject.pointIndex,i),this.schemeContainer.readjustItem(this.item.id,Cf,_f,this.getUpdatePrecision())}handleAllSelectedPoints(e,t){if(Jl.clearItemSnappers(this.store),!this.worldSelectedPoints||0===this.worldSelectedPoints.length)return;const n=this.parentState.snapPoints({vertical:this.worldSelectedPoints,horizontal:this.worldSelectedPoints},new Set,e-this.originalClickPoint.x,t-this.originalClickPoint.y);this.forEachSelectedPoint(((e,t,i)=>{const r=(0,Gc.oJ)(this.originalCurvePaths[t].points[i],this.item.area.w,this.item.area.h),s=(0,Kl.rs)(r.x,r.y,this.item),o=(0,Kl.N5)(s.x+n.dx,s.y+n.dy,this.item),a=(0,Gc.Vk)(o,this.item.area.w,this.item.area.h);e.x=a.x,e.y=a.y,Jl.updateCurveEditPoint(this.store,this.item,t,i,e)})),this.eventBus.emitItemChanged(this.item.id),this.schemeContainer.readjustItem(this.item.id,Cf,_f,this.getUpdatePrecision())}}class Df extends Ym{constructor(e,t){super(e,"idle"),this.clickedObject=null,this.shouldSelectOnlyOne=!1,this.contextMenuHandler=t}reset(){this.clickedObject=null,this.shouldSelectOnlyOne=!1}keyPressed(e,t){e===ph.R.SPACE&&this.migrate(new Qm(this.parentState))}mouseDoubleClick(e,t,n,i,r,s){r&&"path-segment"===r.type&&this.parentState.insertPointAtCoords(e,t,r.pathIndex,r.segmentIndex)}mouseDown(e,t,n,i,r,s){if(function(e){return 1===e.button}(s))this.migrate(new Qm(this.parentState,{x:e,y:t,mx:n,my:i}));else{if(!this.parentState.item.id){this.getSchemeContainer().addItem(this.parentState.item);const o=new Mf(this.parentState,0);return this.migrate(o),void o.mouseDown(e,t,n,i,r,s)}!function(e){return 2===e.button}(s)?(r&&(this.clickedObject=r),!r||"path-point"!==r.type&&"path-control-point"!==r.type?r&&"path-segment"===r.type&&this.selectPath(r,!0):Jl.getCurveEditPaths(this.store)[r.pathIndex].points[r.pointIndex].selected?Km(s)||(this.shouldSelectOnlyOne=!0):(Jl.selectCurveEditPoint(this.store,r.pathIndex,r.pointIndex,Km(s)),_h.Z.$emit(_h.Z.CURVE_EDIT_POINTS_UPDATED))):this.contextMenuHandler(e,t,n,i,r,s)}}mouseMove(e,t,n,i,r,s){return!this.clickedObject||"path-point"!==this.clickedObject.type&&"path-control-point"!==this.clickedObject.type&&"path-segment"!==this.clickedObject.type?this.clickedObject&&!Af(this.clickedObject)?(this.reset(),void this.migrate(new Xm(this.parentState,e,t,n,i,((e,t)=>this.selectByBoundaryBox(e,t))))):void 0:(this.migrate(new Of(this.parentState,this.clickedObject,e,t)),void this.reset())}selectByBoundaryBox(e,t){t||(Jl.resetCurveEditPointSelection(this.store),_h.Z.$emit(_h.Z.CURVE_EDIT_POINTS_UPDATED)),this.parentState.item.shapeProps.paths.forEach(((t,n)=>{t.points.forEach(((t,i)=>{const r=(0,Gc.oJ)(t,this.parentState.item.area.w,this.parentState.item.area.h),s=this.parentState.schemeContainer.worldPointOnItem(r.x,r.y,this.parentState.item);uh.Z.isPointInArea(s.x,s.y,e)&&Jl.selectCurveEditPoint(this.store,n,i,!0)}))})),_h.Z.$emit(_h.Z.CURVE_EDIT_POINTS_UPDATED)}mouseUp(e,t,n,i,r,s){this.clickedObject&&"path-segment"===this.clickedObject.type?this.selectPath(r,!1):this.shouldSelectOnlyOne&&this.clickedObject?"path-point"===this.clickedObject.type&&(Jl.selectCurveEditPoint(this.store,r.pathIndex,r.pointIndex,!1),_h.Z.$emit(_h.Z.CURVE_EDIT_POINTS_UPDATED)):this.clickedObject&&!Af(this.clickedObject)&&Jl.resetCurveEditPointSelection(this.store),this.reset()}selectPath(e,t){t||Jl.resetCurveEditPointSelection(this.store);for(let t=0;t<this.parentState.item.shapeProps.paths[e.pathIndex].points.length;t++)Jl.selectCurveEditPoint(this.store,e.pathIndex,t,!0);_h.Z.$emit(_h.Z.CURVE_EDIT_POINTS_UPDATED)}}const $f={id:"",moved:!0,rotated:!1,resized:!1},Bf={id:"",moved:!0,rotated:!1,resized:!1},Lf={id:"",moved:!0,rotated:!1,resized:!1},Nf=new class{constructor(){this.itemEventSubscribers={},this.revision=ec().generate()}subscribeItemEvent(e,t,n){this.itemEventSubscribers.hasOwnProperty(e)||(this.itemEventSubscribers[e]={}),this.itemEventSubscribers[e].hasOwnProperty(t)||(this.itemEventSubscribers[e][t]=[]),this.itemEventSubscribers[e][t].push({callback:n})}emitItemEvent(e,t){tf.infoEvent(t,[e]);const n=this.itemEventSubscribers[e];n&&n[t]&&ze()(n[t],(n=>{n.callback.apply(null,[this,this.revision,e,t])}))}clear(){this.itemEventSubscribers={},this.revision=ec().generate()}isActionAllowed(e){return this.revision===e}},Rf={interact:new class extends ef{constructor(e,t,n){super(e,t),this.name="interact",this.startedDragging=!1,this.initialClickPoint=null,this.originalOffset={x:0,y:0},this.originalZoom=1,this.currentHoveredItem=null,this.hoveredItemIds=new Set,this.userEventBus=n}softReset(){this.initialClickPoint=null,this.startedDragging=!1}reset(){this.softReset(),this.hoveredItemIds=new Set}mouseDown(e,t,n,i,r,s){this.initScreenDrag(n,i)}initScreenDrag(e,t){this.startedDragging=!0,this.initialClickPoint={x:e,y:t},this.originalOffset={x:this.schemeContainer.screenTransform.x,y:this.schemeContainer.screenTransform.y},this.originalZoom=this.schemeContainer.screenTransform.scale}keyPressed(e,t){e===ph.R.MINUS?this.zoomOutByKey():e===ph.R.EQUALS&&this.zoomInByKey()}mouseUp(e,t,n,i,r,s){this.startedDragging&&this.initialClickPoint&&(Math.abs(n-this.initialClickPoint.x)+Math.abs(i-this.initialClickPoint.y)<3&&(r&&r.item?(this.eventBus.$emit(_h.Z.ANY_ITEM_CLICKED,r.item),this.emit(r.item,sf),this.handleItemClick(r.item,n,i)):s.target&&s.target.closest(".item-link")||this.eventBus.$emit(_h.Z.VOID_CLICKED)),this.softReset())}mouseMove(e,t,n,i,r,s){this.startedDragging&&this.initialClickPoint?(s.preventDefault(),0===s.buttons?this.softReset():this.dragScreen(n,i)):this.handleItemHoverEvents(r)}handleItemClick(e,t,n){e.links&&e.links.length>0&&this.eventBus.$emit(_h.Z.ITEM_LINKS_SHOW_REQUESTED,e),(0,mh.U3)(e)&&(e.interactionMode===mh.pp.SIDE_PANEL?this.eventBus.$emit(_h.Z.ITEM_SIDE_PANEL_TRIGGERED,e):e.interactionMode===mh.pp.TOOLTIP&&this.eventBus.$emit(_h.Z.ITEM_TOOLTIP_TRIGGERED,e,t,n))}sendItemEventById(e,t){const n=this.schemeContainer.findItemById(e);n&&this.emit(n,t)}handleItemHoverEvents(e){if(e&&"item"===e.type)if(this.currentHoveredItem){if(this.currentHoveredItem.id!==e.item.id){let t=new Set;e.item.meta&&Array.isArray(e.item.meta.ancestorIds)&&(t=new Set(e.item.meta.ancestorIds)),t.add(e.item.id),this.hoveredItemIds.forEach((e=>{t.has(e)||(this.hoveredItemIds.delete(e),this.sendItemEventById(e,rf))})),t.forEach((e=>{this.hoveredItemIds.has(e)||(this.hoveredItemIds.add(e),this.sendItemEventById(e,nf))})),this.currentHoveredItem=e.item}}else e.item.meta&&Array.isArray(e.item.meta.ancestorIds)?(this.hoveredItemIds=new Set(e.item.meta.ancestorIds.concat([e.item.id])),e.item.meta.ancestorIds.forEach((e=>{this.sendItemEventById(e,nf)}))):this.hoveredItemIds=new Set([e.item.id]),this.emit(e.item,nf),this.currentHoveredItem=e.item;else this.hoveredItemIds.forEach((e=>{this.sendItemEventById(e,rf)})),this.hoveredItemIds.clear(),this.currentHoveredItem=null}emit(e,t){e&&e.id&&this.userEventBus.emitItemEvent(e.id,t)}dragScreen(e,t){this.schemeContainer.scheme.settings.screen.draggable&&this.dragScreenTo(Math.floor(this.originalOffset.x+e-this.initialClickPoint.x),Math.floor(this.originalOffset.y+t-this.initialClickPoint.y))}}(_h.Z,rh,Nf),createItem:new class extends ef{constructor(e,t){super(e,t),this.name="create-item",this.item=null,this.addedToScheme=!1,this.originalPoint=null}reset(){this.item=null,this.addedToScheme=!1}setItem(e){this.item=e;const t=Wl.Z.find(e.shape);t&&t.shapeEvents&&t.shapeEvents.beforeCreate&&t.shapeEvents.beforeCreate(this.store,e)}mouseDown(e,t,n,i,r,s){const o=this.snapPoints({vertical:[{x:e,y:t}],horizontal:[{x:e,y:t}]},new Set,0,0);this.originalPoint={x:e+o.dx,y:t+o.dy},this.item.name=this.schemeContainer.generateUniqueName(this.item.name),this.item.area.w=0,this.item.area.h=0,this.schemeContainer.addNonIndexableItem(this.item),this.addedToScheme=!0,this.schemeContainer.setActiveBoundaryBox(this.item.area)}mouseMove(e,t,n,i,r,s){if(Jl.clearItemSnappers(this.store),this.addedToScheme){if(0===s.buttons)return void this.submitItemAndFinishCreating();const n=this.snapPoints({vertical:[{x:e,y:t}],horizontal:[{x:e,y:t}]},new Set,0,0);this.updateItemArea(e+n.dx,t+n.dy)}}mouseUp(e,t,n,i,r,s){if(this.addedToScheme){const n=this.snapPoints({vertical:[{x:e,y:t}],horizontal:[{x:e,y:t}]},new Set,0,0);this.updateItemArea(e+n.dx,t+n.dy),this.submitItemAndFinishCreating()}else this.cancel();Jl.clearItemSnappers(this.store)}submitItemAndFinishCreating(){if(this.schemeContainer.setActiveBoundaryBox(null),this.store.state.autoRemount&&"hud"!==this.item.shape){const e=this.schemeContainer.findItemSuitableForParent(this.item,(e=>e.id!==this.item.id));this.schemeContainer.deselectAllItems(),e&&this.schemeContainer.remountItemInsideOtherItem(this.item.id,e.id)}this.schemeContainer.reindexItems(),this.schemeContainer.selectItem(this.item),this.eventBus.emitItemChanged(this.item.id),this.eventBus.$emit(_h.Z.CANCEL_CURRENT_STATE),this.eventBus.emitSchemeChangeCommited(),this.reset()}updateItemArea(e,t){e>this.originalPoint.x?(this.item.area.w=this.round(e-this.originalPoint.x),this.item.area.x=this.round(this.originalPoint.x)):(this.item.area.w=this.round(this.originalPoint.x-e),this.item.area.x=this.round(e)),t>this.originalPoint.y?(this.item.area.h=this.round(t-this.originalPoint.y),this.item.area.y=this.round(this.originalPoint.y)):(this.item.area.h=this.round(this.originalPoint.y-t),this.item.area.y=this.round(t)),_h.Z.emitItemChanged(this.item.id)}}(_h.Z,rh),editPath:new class extends ef{constructor(e,t){super(e,t),this.name="editPath",this.item=null,this.history=new Fp}reset(){this.eventBus.emitItemsHighlighted([]),this.item=null,this.history=new Fp({size:100}),this.updateHistoryState(),this.migrateSubState(new Df(this,((e,t,n,i,r,s)=>this.contextMenuHandler(e,t,n,i,r,s)))),this.resetPreviousSubStates()}historyCommit(){this.history.commit(this.item.shapeProps.paths),this.updateHistoryState()}updateHistoryState(){this.store.dispatch("setHistoryUndoable",this.history.undoable()),this.store.dispatch("setHistoryRedoable",this.history.redoable())}undo(){const e=this.history.undo();this.item.shapeProps.paths=e,_h.Z.emitItemChanged(this.item.id),Jl.updateAllCurveEditPoints(this.store,this.item),this.updateHistoryState()}redo(){const e=this.history.redo();this.item.shapeProps.paths=e,_h.Z.emitItemChanged(this.item.id),Jl.updateAllCurveEditPoints(this.store,this.item),this.updateHistoryState()}cancel(){if(this.subState&&this.subState.reset(),this.eventBus.emitItemsHighlighted([]),this.item&&this.item.id){const e=this.item.shapeProps.paths;for(let t=e.length-1;t>=0;t--)e[t].points.length<2&&e.splice(t,1);if(0===e.length)this.schemeContainer.deleteItem(this.item);else{const e=[];if(this.item.childItems&&this.item.childItems.forEach((t=>{e.push((0,Kl.rs)(0,0,t))})),Pf(this.item),this.schemeContainer.readjustItem(this.item.id,!1,_f,this.getUpdatePrecision()),this.item.childItems){const t=uh.Z.standardTransformWithArea(this.item.meta.transformMatrix,this.item.area);this.item.childItems.forEach(((n,i)=>{const r=uh.Z.findTranslationMatchingWorldPoint(e[i].x,e[i].y,0,0,n.area,t);r&&(n.area.x=r.x,n.area.y=r.y)}))}this.schemeContainer.reindexItems()}this.schemeContainer.updateMultiItemEditBox()}this.eventBus.emitSchemeChangeCommited(),super.cancel()}setItem(e){this.item=e,Ef(e),this.historyCommit()}getSelectedPoints(){const e=[];return Jl.getCurveEditPaths(this.store).forEach(((t,n)=>{t.points.forEach(((t,i)=>{t.selected&&e.push({pathId:n,pointId:i})}))})),e}contextMenuHandler(e,t,n,i,r,s){Af(r)||this.eventBus.emitCustomContextMenuRequested(n,i,[{name:"Add new path",clicked:()=>this.startCreatingNewPath()}]);const o=this.getSelectedPoints();let a=!1;for(let e=0;e<o.length&&!a;e++)a=r.pathIndex===o[e].pathId&&r.pointIndex===o[e].pointId;if(o.length>1&&a){const e=[{name:"Delete points",clicked:()=>this.deleteSelectedPoints()},{name:"Convert to bezier",clicked:()=>o.forEach((e=>this.convertPointToBezier(e.pathId,e.pointId)))},{name:"Convert to simple",clicked:()=>o.forEach((e=>this.convertPointToSimple(e.pathId,e.pointId)))},{name:"Convert to arc",clicked:()=>o.forEach((e=>this.convertPointToArc(e.pathId,e.pointId)))}];return 2===o.length&&e.push({name:"Merge points",clicked:()=>this.mergePoints(o[0],o[1])}),void this.eventBus.emitCustomContextMenuRequested(n,i,e)}if(r&&"path-point"===r.type){Jl.selectCurveEditPoint(this.store,r.pathIndex,r.pointIndex,!1),_h.Z.$emit(_h.Z.CURVE_EDIT_POINTS_UPDATED);const e=this.item.shapeProps.paths[r.pathIndex].points[r.pointIndex];let t=null;r.pointIndex<this.item.shapeProps.paths[r.pathIndex].points.length-1&&(t=this.item.shapeProps.paths[r.pathIndex].points[r.pointIndex+1]);let s=null;r.pointIndex>0&&(s=this.item.shapeProps.paths[r.pathIndex].points[r.pointIndex-1]);const o=[{name:"Delete point",clicked:()=>this.deletePoint(r.pathIndex,r.pointIndex)}];s&&s.break||t&&t.break||o.push({name:"Break path",clicked:()=>this.breakPath(r.pathIndex,r.pointIndex)}),"L"!==e.t&&o.push({name:"Convert to simple point",clicked:()=>this.convertPointToSimple(r.pathIndex,r.pointIndex)}),"B"!==e.t&&o.push({name:"Convert to bezier point",clicked:()=>this.convertPointToBezier(r.pathIndex,r.pointIndex)}),"A"!==e.t&&o.push({name:"Convert to arc point",clicked:()=>this.convertPointToArc(r.pathIndex,r.pointIndex)}),this.eventBus.emitCustomContextMenuRequested(n,i,o)}else r&&"path-segment"===r.type&&this.eventBus.emitCustomContextMenuRequested(n,i,[{name:"Extract path",clicked:()=>this.extractPath(r.pathIndex)},{name:"Invert path",clicked:()=>this.invertPath(r.pathIndex)},{name:"Duplicate path",clicked:()=>this.duplicatePath(r.pathIndex)}])}startCreatingNewPath(){this.subState&&"idle"===this.subState.name&&this.migrateSubState(new Mf(this,this.item.shapeProps.paths.length))}convertSelectedPointsToSimple(){this.getSelectedPoints().forEach((({pathId:e,pointId:t})=>this.convertPointToSimple(e,t)))}convertSelectedPointsToBezier(){this.getSelectedPoints().forEach((({pathId:e,pointId:t})=>this.convertPointToBezier(e,t)))}extractPath(e){if(this.item.shapeProps.paths.length<2)return;const t=this.item.shapeProps.paths[e],n=Uc.Z.clone(this.item);delete n.id,n.meta={},n.area={x:0,y:0,w:100,h:100,r:0,sx:1,sy:1,px:.5,py:.5},n.name=this.item.name+" segment",n.description="",n.childItems=[],n._childItems=[],n.shapeProps.paths=[{pos:"relative",closed:t.closed,points:t.points.map((e=>{const t=(0,Gc.oJ)(e,this.item.area.w,this.item.area.h),i=(0,Kl.rs)(t.x,t.y,this.item);if(i.t=t.t,t.hasOwnProperty("x1")){const e=(0,Kl.rs)(t.x+t.x1,t.y+t.y1,this.item);i.x1=e.x-i.x,i.y1=e.y-i.y}if(t.hasOwnProperty("x2")){const e=(0,Kl.rs)(t.x+t.x2,t.y+t.y2,this.item);i.x2=e.x-i.x,i.y2=e.y-i.y}return(0,Gc.Vk)(i,n.area.w,n.area.h)}))}],Pf(n),this.item.shapeProps.paths.splice(e,1),this.cancel();const i=this.schemeContainer.addItem(n);this.schemeContainer.selectItem(i)}invertPath(e){this.item.shapeProps.paths[e].points.reverse(),this.item.shapeProps.paths[e].points.forEach((e=>{if("B"===e.t){const t=e.x1,n=e.y1;e.x1=e.x2,e.y1=e.y2,e.x2=t,e.y2=n}})),this.eventBus.emitItemChanged(this.item.id),Jl.updateAllCurveEditPoints(this.store,this.item),this.eventBus.emitSchemeChangeCommited()}duplicatePath(e){const t=Uc.Z.clone(this.item.shapeProps.paths[e]);t.points.forEach((e=>{e.x+=10,e.y+=10})),this.item.shapeProps.paths.push(t),this.eventBus.emitItemChanged(this.item.id),Jl.updateAllCurveEditPoints(this.store,this.item),this.eventBus.emitSchemeChangeCommited()}mergePoints(e,t){e.pathId===t.pathId?this.mergePointsInSamePath(this.item.shapeProps.paths[e.pathId],e.pointId,t.pointId):this.mergePointsOfTwoPaths(e.pathId,e.pointId,t.pathId,t.pointId),this.historyCommit()}mergePointsInSamePath(e,t,n){if(e.closed)return;const i=Math.min(t,n);if(0!==i)return;const r=Math.max(t,n);if(r!==e.points.length-1)return;const s=e.points[i],o=e.points[r],a=(s.x+o.x)/2,l=(s.y+o.y)/2;s.x=a,s.y=l,e.points.pop(),e.closed=!0,this.eventBus.emitItemChanged(this.item.id),Jl.updateAllCurveEditPoints(this.store,this.item),this.eventBus.emitSchemeChangeCommited()}mergePointsOfTwoPaths(e,t,n,i){const r=this.item.shapeProps.paths[e],s=this.item.shapeProps.paths[n];if(r.closed||s.closed)return;if(0!==t&&t!==r.points.length-1)return;if(0!==i&&i!==s.points.length-1)return;const o=r.points[t],a=s.points[i],l=(o.x+a.x)/2,c=(o.y+a.y)/2;0===i?(0===t&&(r.points=r.points.reverse()),r.points.pop(),s.points[0].x=l,s.points[0].y=c,r.points=r.points.concat(s.points),this.item.shapeProps.paths.splice(n,1)):0===t?(0===i&&(s.points=s.points.reverse()),s.points.pop(),r.points[0].x=l,r.points[0].y=c,s.points=s.points.concat(r.points),this.item.shapeProps.paths.splice(e,1)):(s.points=s.points.reverse(),r.points.pop(),s.points[0].x=l,s.points[0].y=c,r.points=r.points.concat(s.points),this.item.shapeProps.paths.splice(n,1)),this.eventBus.emitItemChanged(this.item.id),Jl.updateAllCurveEditPoints(this.store,this.item),this.eventBus.emitSchemeChangeCommited()}breakPath(e,t){const n=this.item.shapeProps.paths[e];n.closed?this.breakClosedPath(n,t):this.breakPathIntoTwo(n,t),this.eventBus.emitItemChanged(this.item.id),Jl.updateAllCurveEditPoints(this.store,this.item),this.eventBus.emitSchemeChangeCommited(),this.historyCommit()}breakClosedPath(e,t){const n=[];for(let i=0;i<e.points.length;i++){const r=(i+t+1)%e.points.length;r!==t&&n.push(e.points[r])}e.closed=!1,e.points=n}breakPathIntoTwo(e,t){if(0===t){if(e.points.length<3)return;e.points.splice(0,1)}else if(1===t){if(e.points.length<4)return;e.points.splice(0,2)}else if(t===e.points.length-1){if(e.points.length<3)return;e.points.splice(t,1)}else if(t===e.points.length-2){if(e.points.length<4)return;e.points.splice(t,2)}else{const n={pos:"relative",closed:!1,points:e.points.splice(t+1,e.points.length-t-1)};e.points.pop(),this.item.shapeProps.paths.push(n)}}deletePoint(e,t){this.item.shapeProps.paths[e].points.splice(t,1),this.eventBus.emitItemChanged(this.item.id),this.schemeContainer.readjustItem(this.item.id,Cf,_f,this.getUpdatePrecision()),Jl.updateAllCurveEditPoints(this.store,this.item),this.eventBus.emitSchemeChangeCommited()}deleteSelectedPoints(){this.getSelectedPoints().reverse().forEach((e=>{this.item.shapeProps.paths[e.pathId].points.splice(e.pointId,1)})),this.eventBus.emitItemChanged(this.item.id),this.schemeContainer.readjustItem(this.item.id,Cf,_f,this.getUpdatePrecision()),Jl.updateAllCurveEditPoints(this.store,this.item),this.eventBus.emitSchemeChangeCommited(),this.historyCommit()}insertPointAtCoords(e,t,n,i){const r=(0,Gc.Vk)((0,Kl.N5)(e,t,this.item),this.item.area.w,this.item.area.h);this.item.shapeProps.paths[n].points.splice(i+1,0,{x:r.x,y:r.y,t:"L"}),"B"===this.item.shapeProps.paths[n].points[i].t&&this.convertPointToBezier(n,i+1),this.eventBus.emitItemChanged(this.item.id),this.schemeContainer.readjustItem(this.item.id,Cf,_f,this.getUpdatePrecision()),Jl.updateAllCurveEditPoints(this.store,this.item),this.eventBus.emitSchemeChangeCommited(),this.historyCommit()}convertPointToSimple(e,t){const n=this.item.shapeProps.paths[e].points[t];n&&(n.t="L",n.hasOwnProperty("x1")&&(delete n.x1,delete n.y1),n.hasOwnProperty("x2")&&(delete n.x2,delete n.y2),this.eventBus.emitItemChanged(this.item.id),this.schemeContainer.readjustItem(this.item.id,Cf,_f,this.getUpdatePrecision()),Jl.updateCurveEditPoint(this.store,this.item,e,t,this.item.shapeProps.paths[e].points[t]),this.eventBus.emitSchemeChangeCommited(),this.historyCommit())}convertPointToBezier(e,t){const n=this.item.shapeProps.paths[e].points[t];if(!n)return;let i=10,r=0;if(this.item.shapeProps.paths[e].points.length>2){let n=t-1;n<0&&(n=this.item.shapeProps.paths[e].points.length+n);let s=t+1;s>=this.item.shapeProps.paths[e].points.length-1&&(s-=this.item.shapeProps.paths[e].points.length-1),i=(this.item.shapeProps.paths[e].points[s].x-this.item.shapeProps.paths[e].points[n].x)/4,r=(this.item.shapeProps.paths[e].points[s].y-this.item.shapeProps.paths[e].points[n].y)/4}n.x1=-i,n.y1=-r,n.x2=i,n.y2=r,n.t="B",this.eventBus.emitItemChanged(this.item.id),this.schemeContainer.readjustItem(this.item.id,Cf,_f,this.getUpdatePrecision()),Jl.updateCurveEditPoint(this.store,this.item,e,t,this.item.shapeProps.paths[e].points[t]),this.eventBus.emitSchemeChangeCommited(),this.historyCommit()}convertPointToArc(e,t){const n=this.item.shapeProps.paths[e].points[t];"A"!==n.t&&(n.h=50),n.t="A",this.eventBus.emitItemChanged(this.item.id),this.schemeContainer.readjustItem(this.item.id,Cf,_f,this.getUpdatePrecision()),Jl.updateCurveEditPoint(this.store,this.item,e,t,this.item.shapeProps.paths[e].points[t]),this.eventBus.emitSchemeChangeCommited(),this.historyCommit()}snapCurvePoint(e,t,n,i){const r=(0,Kl.rs)(n,i,this.item);let s=1e5,o=1e5,a=null,l=null;this.isSnappingToItemsEnabled()&&this.item.shapeProps.paths.forEach(((n,i)=>{n.points.forEach(((n,c)=>{if(e===i&&t===c)return;const h=this.schemeContainer.worldPointOnItem(n.x,n.y,this.item);let d=Math.abs(h.y-r.y);d<6&&d<s&&(s=d,a={localValue:n.y,value:h.y,item:this.item,snapperType:"horizontal"}),d=Math.abs(h.x-r.x),d<6&&d<o&&(o=d,l={localValue:n.x,value:h.x,item:this.item,snapperType:"vertical"})}))}));const c=this.snapPoints({vertical:[r],horizontal:[r]},new Set,0,0);let h=r.x+c.dx,d=r.y+c.dy;const u=this.schemeContainer.localPointOnItem(h,d,this.item);return a&&(u.y=a.localValue,Jl.setItemSnapper(this.store,a)),l&&(u.x=l.localValue,Jl.setItemSnapper(this.store,l)),{x:this.round(u.x),y:this.round(u.y)}}}(_h.Z,rh),connecting:new class extends ef{constructor(e,t){super(e,t),this.name="connecting",this.item=null,this.parentItem=null,this.addedToScheme=!1,this.originalClickPoint={x:0,y:0,mx:0,my:0},this.candidatePointSubmited=!1,this.wasMouseMoved=!1,this.shouldDragScreen=!1,this.startedDraggingScreen=!1,this.originalScreenOffset={x:0,y:0},this.shadowSvgPath=document.createElementNS("http://www.w3.org/2000/svg","path")}reset(){this.eventBus.emitItemsHighlighted([]),this.item=null,this.parentItem=null,this.addedToScheme=!1,this.softReset()}softReset(){this.shouldDragScreen=!1,this.wasMouseMoved=!1,this.startedDraggingScreen=!1,this.candidatePointSubmited=!1}cancel(){Jl.setCurrentConnector(this.store,null),this.eventBus.emitItemsHighlighted([]),this.item&&(this.item.shapeProps.points.splice(this.item.shapeProps.points.length-1,1),this.item.shapeProps.points.length>0&&this.submitItem()),super.cancel()}setItem(e){this.item=e,Jl.setCurrentConnector(this.store,e),this.schemeContainer.findItemById(e.id)&&(this.addedToScheme=!0,this.creatingNewPoints=!1)}initConnectingFromSourceItem(e,t){t||(t={x:this.round(e.area.w/2),y:this.round(e.area.h/2)});const n=this.schemeContainer.worldPointOnItem(t.x,t.y,e);let i={shape:"connector",name:`${e.name} -> `,area:{x:0,y:0,w:200,h:200,r:0},shapeProps:{destinationCap:"triangle"}};(0,Gl.z9)(i),i=this.schemeContainer.addItem(i),i.shapeProps.sourceItem=`#${e.id}`;let r=null;e.meta.parentId&&(r=this.schemeContainer.findItemById(e.meta.parentId),r&&(this.schemeContainer.remountItemInsideOtherItemAtTheBottom(i.id,r.id),i.area.x=0,i.area.y=0,i.area.w=r.area.w,i.area.h=r.area.h));const s=this.findAttachmentPointToItem(e,t);i.shapeProps.sourceItemPosition=s.distanceOnPath;let o=s,a=n;return r&&(o=this.schemeContainer.localPointOnItem(s.x,s.y,r),a=this.schemeContainer.localPointOnItem(n.x,n.y,r)),i.shapeProps.points=[{t:"L",x:this.round(o.x),y:this.round(o.y)},{t:"L",x:this.round(a.x),y:this.round(a.y)}],void 0!==s.nx&&(i.shapeProps.points[0].bx=uh.Z.roundPrecise(s.nx,4),i.shapeProps.points[0].by=uh.Z.roundPrecise(s.ny,4)),this.item=i,Jl.setCurrentConnector(this.store,this.item),this.parentItem=r,this.addedToScheme=!0,this.creatingNewPoints=!0,this.item}findAttachmentPointToItem(e,t){const n=this.schemeContainer.worldPointOnItem(t.x,t.y,e),i=this.schemeContainer.closestPointToItemOutline(e,n,{withNormal:!0}),r=this.findClosestItemPin(e,n);if(r){if(i){const t=this.schemeContainer.worldPointOnItem(e.area.w/2,e.area.h/2,e);if((r.x-t.x)*(r.x-t.x)+(r.y-t.y)*(r.y-t.y)<.5)return i}return r.x=this.round(r.x),r.y=this.round(r.y),r}return i?(i.x=this.round(i.x),i.y=this.round(i.y),i):{x:this.round(e.area.w/2),y:this.round(e.area.h/2)}}findClosestItemPin(e,t){const n=Wl.Z.find(e.shape);if(!n)return null;const i=n.getPins(e);let r=null,s=0;return ze()(i,((n,i)=>{const o=this.schemeContainer.worldPointOnItem(n.x,n.y,e),a=(o.x-t.x)*(o.x-t.x)+(o.y-t.y)*(o.y-t.y);(!r||s>a)&&(s=a,r={x:o.x,y:o.y,distanceOnPath:-i-1},(n.nx||n.ny)&&(r.nx=n.nx,r.ny=n.ny))})),r}initFirstClick(e,t){this.item.shapeProps.points=[],this.schemeContainer.addItem(this.item);const n=this.snapCurvePoint(-1,e,t);this.item.shapeProps.points.push({x:n.x,y:n.y,t:"L"}),this.item.shapeProps.points.push({x:n.x,y:n.y,t:"L"}),this.handleEdgePointDrag(this.item.shapeProps.points[0],!0),this.addedToScheme=!0}initScreenDrag(e,t){this.startedDraggingScreen=!0,this.originalClickPoint.x=e,this.originalClickPoint.y=t,this.originalClickPoint.mx=e,this.originalClickPoint.my=t,this.originalScreenOffset={x:this.schemeContainer.screenTransform.x,y:this.schemeContainer.screenTransform.y}}keyPressed(e,t){e!==ph.R.SPACE||this.startedDraggingScreen||(this.shouldDragScreen=!0)}keyUp(e,t){e===ph.R.SPACE&&(this.shouldDragScreen=!1)}mouseDown(e,t,n,i,r,s){if(this.originalClickPoint.x=e,this.originalClickPoint.y=t,this.originalClickPoint.mx=n,this.originalClickPoint.my=i,this.shouldDragScreen)this.initScreenDrag(n,i);else if(this.addedToScheme)if(function(e){return 2===e.button}(s))this.proposeNewDestinationItemForConnector(this.item,n,i);else{let n=e,i=t;if(this.parentItem){const r=this.schemeContainer.localPointOnItem(e,t,this.parentItem);n=r.x,i=r.y}const r=this.snapCurvePoint(this.item.shapeProps.points.length-1,n,i);if(this.item.shapeProps.destinationItem)return this.item.shapeProps.sourceItem&&(this.item.name=this.createNameFromAttachedItems(this.item.shapeProps.sourceItem,this.item.shapeProps.destinationItem)),this.submitItem(),this.reset(),void this.eventBus.$emit(_h.Z.CANCEL_CURRENT_STATE);const s=this.item.shapeProps.points[this.item.shapeProps.points.length-1];s.x=r.x,s.y=r.y,this.candidatePointSubmited=!0}else this.initFirstClick(e,t)}createNameFromAttachedItems(e,t){const n=this.schemeContainer.findFirstElementBySelector(e),i=this.schemeContainer.findFirstElementBySelector(t);return n&&i?`${n.name} -> ${i.name}`:"Curve"}mouseMove(e,t,n,i,r,s){if(!this.store.state.connectorProposedDestination.shown)if(this.wasMouseMoved=!0,this.shouldDragScreen&&this.startedDraggingScreen)this.dragScreen(n,i);else if(Jl.clearItemSnappers(this.store),this.addedToScheme){const n=this.item.shapeProps.points.length-1,i=this.item.shapeProps.points[n];let r=e,s=t;if(this.parentItem){const n=this.schemeContainer.localPointOnItem(e,t,this.parentItem);r=n.x,s=n.y}const o=this.snapCurvePoint(n,r,s);i.x=this.round(o.x),i.y=this.round(o.y),this.handleEdgePointDrag(i,!1),this.eventBus.emitItemChanged(this.item.id)}else this.handleConnectorSourceMouseMove(e,t)}mouseUp(e,t,n,i,r,s){if(this.eventBus.emitItemsHighlighted([]),this.addedToScheme&&this.candidatePointSubmited){this.candidatePointSubmited=!1;let n=e,i=t;if(this.parentItem){const r=this.schemeContainer.localPointOnItem(e,t,this.parentItem);n=r.x,i=r.y}const r=this.snapCurvePoint(-1,n,i);this.item.shapeProps.points.push({x:this.round(r.x),y:this.round(r.y),t:"L"}),this.eventBus.emitItemChanged(this.item.id)}Jl.clearItemSnappers(this.store),this.softReset()}snapCurvePoint(e,t,n){const i=this.schemeContainer.worldPointOnItem(t,n,this.item);let r=1e5,s=1e5,o=null,a=null;this.isSnappingToItemsEnabled()&&ze()(this.item.shapeProps.points,((t,n)=>{if(e===n)return;const l=this.schemeContainer.worldPointOnItem(t.x,t.y,this.item);let c=Math.abs(l.y-i.y);c<6&&c<r&&(r=c,o={localValue:t.y,value:l.y,item:this.item,snapperType:"horizontal"}),c=Math.abs(l.x-i.x),c<6&&c<s&&(s=c,a={localValue:t.x,value:l.x,item:this.item,snapperType:"vertical"})}));const l=this.snapPoints({vertical:[i],horizontal:[i]},new Set,0,0);let c=i.x+l.dx,h=i.y+l.dy;const d=this.schemeContainer.localPointOnItem(c,h,this.item);return o&&(d.y=o.localValue,Jl.setItemSnapper(this.store,o)),a&&(d.x=a.localValue,Jl.setItemSnapper(this.store,a)),{x:this.round(d.x),y:this.round(d.y)}}handleConnectorSourceMouseMove(e,t){const n=this.findClosestAttachmentPoint(e,t);n?(this.eventBus.emitItemsHighlighted([n.itemId],{highlightPins:!0}),this.item.shapeProps.sourceItem="#"+n.itemId,this.item.shapeProps.sourceItemPosition=n.distanceOnPath):(this.eventBus.emitItemsHighlighted([]),this.item.shapeProps.sourceItem=null,this.item.shapeProps.sourceItemPosition=0)}findClosestAttachmentPoint(e,t){let n=10;return this.schemeContainer.screenTransform.scale>0&&(n/=this.schemeContainer.screenTransform.scale),this.schemeContainer.findClosestPointToItems(e,t,n,this.item.id,!0)}handleEdgePointDrag(e,t){const n=this.schemeContainer.worldPointOnItem(e.x,e.y,this.item),i=this.findClosestAttachmentPoint(n.x,n.y);if(i){const n=this.schemeContainer.localPointOnItem(i.x,i.y,this.item);e.x=n.x,e.y=n.y;const r=this.schemeContainer.findItemById(i.itemId);if(i.hasOwnProperty("nx"))e.bx=i.nx,e.by=i.ny;else{const t=this.schemeContainer.calculateNormalOnPointInItemOutline(r,i.distanceOnPath);e.bx=t.x,e.by=t.y}this.eventBus.emitItemsHighlighted([i.itemId],{highlightPins:!0}),t?(this.item.shapeProps.sourceItem="#"+i.itemId,this.item.shapeProps.sourceItemPosition=i.distanceOnPath):(this.item.shapeProps.destinationItem="#"+i.itemId,this.item.shapeProps.destinationItemPosition=i.distanceOnPath)}else e.hasOwnProperty("bx")&&(delete e.bx,delete e.by),this.eventBus.emitItemsHighlighted([]),t?(this.item.shapeProps.sourceItem=null,this.item.shapeProps.sourceItemPosition=0):(this.item.shapeProps.destinationItem=null,this.item.shapeProps.destinationItemPosition=0)}submitItem(){if(this.item.shapeProps.points.length<2)return this.schemeContainer.deleteItem(this.item),this.schemeContainer.reindexItems(),void this.reset();this.schemeContainer.readjustItem(this.item.id,!1,Bf,this.getUpdatePrecision()),this.schemeContainer.reindexItems(),this.eventBus.emitItemChanged(this.item.id,"area"),this.eventBus.emitSchemeChangeCommited(),this.schemeContainer.selectItem(this.item),this.reset()}dragScreen(e,t){this.schemeContainer.screenTransform.x=Math.floor(this.originalScreenOffset.x+e-this.originalClickPoint.x),this.schemeContainer.screenTransform.y=Math.floor(this.originalScreenOffset.y+t-this.originalClickPoint.y)}proposeNewDestinationItemForConnector(e,t,n){Jl.proposeConnectorDestinationItems(this.store,e.id,t,n)}submitConnectorDestinationItem(e){"uml_actor"===(e=Uc.Z.clone(e)).shape?(e.area.w=50,e.area.h=100):(e.area.w=100,e.area.h=50);const t=this.item.shapeProps.points[this.item.shapeProps.points.length-2],n=this.item.shapeProps.points[this.item.shapeProps.points.length-1],i=(0,Kl.rs)(t.x,t.y,this.item),r=(0,Kl.rs)(n.x,n.y,this.item),s=uh.Z.normalizedVector(r.x-i.x,r.y-i.y),o=(Math.abs(s.x)*e.area.w+Math.abs(s.y)*e.area.h)/2;let a={x:r.x,y:i.y};s&&(a.x=r.x+s.x*o,a.y=r.y+s.y*o),e.area.x=a.x-e.area.w/2,e.area.y=a.y-e.area.h/2;const l=this.schemeContainer.addItem(e),c=this.schemeContainer.closestPointToItemOutline(l,r,{}),h=(0,Kl.N5)(c.x,c.y,this.item);n.x=h.x,n.y=h.y,this.item.shapeProps.points.push(Uc.Z.clone(this.item.shapeProps.points[this.item.shapeProps.points.length-1])),this.item.shapeProps.destinationItem=`#${l.id}`,this.item.shapeProps.destinationItemPosition=c.distanceOnPath,this.item.name+=l.name,this.cancel()}}(_h.Z,rh),dragItem:new class extends ef{constructor(e,t){super(e,t),this.name="drag-item",this.subState=null}migrateSubState(e){super.migrateSubState(e),_h.Z.emitFloatingHelperPanelUpdated()}migrateToPreviousSubState(){super.migrateToPreviousSubState(),_h.Z.emitFloatingHelperPanelUpdated()}reset(){this.migrateSubState(new xf(this))}mouseMove(e,t,n,i,r,s){super.mouseMove(e,t,n,i,r,s),0===s.buttons&&Jl.clearItemSnappers(this.store)}mouseUp(e,t,n,i,r,s){super.mouseUp(e,t,n,i,r,s),Jl.clearItemSnappers(this.store)}shouldAllowFloatingHelperPanel(){return this.subState&&"idle"===this.subState.name}}(_h.Z,rh),pickElement:new class extends ef{constructor(e,t){super(e,t),this.name="connecting",this.elementPickCallback=null,this.highlightedItemId=null}reset(){this.elementPickCallback=null,this.resetHighlight()}mouseMove(e,t,n,i,r,s){r.item?this.highlightItem(r.item):this.resetHighlight()}mouseDown(e,t,n,i,r,s){this.resetHighlight(),r.item&&(this.elementPickCallback&&this.elementPickCallback(`#${r.item.id}`),setTimeout((()=>{this.cancel()}),200))}setElementPickCallback(e){this.elementPickCallback=e}highlightItem(e){e.id!==this.highlightedItemId&&(this.highlightedItemId=e.id,this.eventBus.emitItemsHighlighted([e.id]))}resetHighlight(){this.highlightedItemId&&(this.highlightedItemId=null,this.eventBus.emitItemsHighlighted([]))}}(_h.Z,rh),cropImage:new class extends ef{constructor(e,t){super(e,t),this.name="crop-image",this.item=null,this.editBox=null,this.originalPoint={x:0,y:0,mx:0,my:0},this.startedDragging=!0,this.draggerEdges=null,this.editBoxOriginalArea=null,this.modificationContextId=null}reset(){this.originalPoint={x:0,y:0,mx:0,my:0},this.startedDragging=!0,this.draggerEdges=null,this.editBoxOriginalArea=null,this.modificationContextId=null}setImageItem(e){this.item=e,this.originalItemCrop=Uc.Z.clone(e.shapeProps.crop),this.originalItemArea=Uc.Z.clone(e.area),this.origianlItemTransformMatrix=Uc.Z.clone(e.meta.transformMatrix)}setImageEditBox(e){this.editBox=e}mouseDown(e,t,n,i,r,s){this.modificationContextId=ec().generate(),"multi-item-edit-box-resize-dragger"===r.type?this.initMultiItemBoxResize(r.draggerEdges,e,t,n,i):"multi-item-edit-box-reset-image-crop-link"===r.type?this.resetCrop():this.cancel()}cancel(){this.submit(),super.cancel()}submit(){this.schemeContainer.reindexItems(),this.schemeContainer.updateMultiItemEditBox()}initDragging(e,t,n,i){this.originalPoint.x=e,this.originalPoint.y=t,this.originalPoint.mx=n,this.originalPoint.my=i,this.startedDragging=!0}initMultiItemBoxResize(e,t,n,i,r){this.initDragging(t,n,i,r),this.initOriginalAreasForMultiItemEditBox(this.editBox),this.draggerEdges=e}initOriginalAreasForMultiItemEditBox(e){this.editBoxOriginalArea=Uc.Z.clone(e.area)}mouseMove(e,t,n,i,r,s){this.startedDragging&&this.draggerEdges&&this.dragMultiItemEditBoxByDragger(e,t,this.draggerEdges,s)}dragMultiItemEditBoxByDragger(e,t,n,i){bf(this.editBox,this.editBoxOriginalArea,this.originalPoint,this.store,null,e,t,n)}mouseUp(e,t,n,i,r,s){this.reset();const o=uh.Z.worldPointInArea(0,0,this.editBox.area),a=uh.Z.localPointInArea(o.x,o.y,this.originalItemArea,this.origianlItemTransformMatrix),l=-this.originalItemCrop.x*this.originalItemArea.w,c=-this.originalItemCrop.y*this.originalItemArea.h,h=this.originalItemArea.w*(1+this.originalItemCrop.x+this.originalItemCrop.w),d=this.originalItemArea.h*(1+this.originalItemCrop.y+this.originalItemCrop.h);this.schemeContainer.updateMultiItemEditBoxItems(this.editBox,!0,{moved:!1,rotated:!1,resized:!0,id:this.modificationContextId},this.getUpdatePrecision()),uh.Z.tooSmall(this.item.area.w)||(this.item.shapeProps.crop.x=(a.x-l)/this.item.area.w,this.item.shapeProps.crop.w=h/this.item.area.w-this.item.shapeProps.crop.x-1),uh.Z.tooSmall(this.item.area.h)||(this.item.shapeProps.crop.y=(a.y-c)/this.item.area.h,this.item.shapeProps.crop.h=d/this.item.area.h-this.item.shapeProps.crop.y-1)}resetCrop(){this.item.area.x-=this.item.shapeProps.crop.x*this.item.area.w,this.item.area.y-=this.item.shapeProps.crop.y*this.item.area.h,this.item.area.w=this.item.area.w*(1+this.item.shapeProps.crop.x+this.item.shapeProps.crop.w),this.item.area.h=this.item.area.h*(1+this.item.shapeProps.crop.y+this.item.shapeProps.crop.h),this.item.shapeProps.crop.x=0,this.item.shapeProps.crop.y=0,this.item.shapeProps.crop.w=0,this.item.shapeProps.crop.h=0,this.cancel()}}(_h.Z,rh),draw:new class extends ef{constructor(e,t){super(e,t),this.name="draw",this.item=null,this.isDrawing=!1,this.strokeColor=null,this.currentPathId=0}reset(){this.item=null,this.isDrawing=!1,this.currentPathId=0}mouseDown(e,t,n,i,r,s){this.item?(this.item.shapeProps.paths.push({pos:"relative",closed:!1,points:[(0,Gc.Vk)({x:this.round(e),y:this.round(t),t:"L"},this.item.area.w,this.item.area.h)]}),this.currentPathId=this.item.shapeProps.paths.length-1):this.initFirstClick(e,t),this.isDrawing=!0,_h.Z.emitItemChanged(this.item.id,"shapeProps.points")}initFirstClick(e,t){this.currentPathId=0;const n={area:{x:0,y:0,w:100,h:100,r:0,px:.5,py:.5,sx:1,sy:1},name:this.schemeContainer.generateUniqueName("Drawing"),shape:"path",shapeProps:{paths:[{pos:"relative",closed:!1,points:[]}],strokeSize:3,closed:!1,fill:{type:"none"}}};this.strokeColor&&(n.shapeProps.strokeColor=this.strokeColor),this.schemeContainer.addItem(n),this.item=n,this.item.shapeProps.paths[0].points.push((0,Gc.Vk)({x:this.round(e),y:this.round(t),t:"L"},this.item.area.w,this.item.area.h))}mouseMove(e,t,n,i,r,s){if(this.isDrawing&&this.item){if(0===s.buttons)return void(this.isDrawing=!1);const n=this.item.shapeProps.paths[this.currentPathId].points[this.item.shapeProps.paths[this.currentPathId].points.length-1],i=this.round(e),r=this.round(t);if(!uh.Z.sameFloatingValue(i,n.x)||!uh.Z.sameFloatingValue(r,n.y)){const e={x:i,y:r,t:"L"};this.item.shapeProps.paths[this.currentPathId].points.push((0,Gc.Vk)(e,this.item.area.w,this.item.area.h)),_h.Z.emitItemChanged(this.item.id,"shapeProps.paths")}}}mouseUp(e,t,n,i,r,s){this.isDrawing=!1,_h.Z.emitItemChanged(this.item.id,"shapeProps.paths")}cancel(){this.eventBus.emitItemsHighlighted([]);const e=this.submitDrawing();e&&this.schemeContainer.selectItem(e),super.cancel()}pickColor(e){this.strokeColor=e,this.item&&this.item.shapeProps.paths[this.currentPathId].points.length>0?0===this.item.shapeProps.paths[this.currentPathId].points.length||(this.submitDrawing(),this.reset()):this.item&&(this.item.shapeProps.strokeColor=e)}submitDrawing(){return this.item?(this.item.shapeProps.paths.forEach((e=>{e.points=(0,wf.T)(e.points,uh.Z.clamp(this.store.getters.drawEpsilon,1,1e3))})),Pf(this.item),this.schemeContainer.readjustItem(this.item.id,!1,$f,this.getUpdatePrecision()),this.schemeContainer.reindexItems(),this.item):null}}(_h.Z,rh)};let Ff=new Fp({size:30});function Zf(e){return new Promise(((t,n)=>{const i=new Image;i.onload=t,i.onerror=n,i.src=e}))}const jf=qc("scheme-settings",40),zf=["rgba(0, 0, 0, 1)","rgba(76, 76, 76, 1)","rgba(128, 128, 128, 1)","rgba(170, 170, 170, 1)","rgba(255, 255, 255, 1)","rgba(254, 0, 0, 1)","rgba(254, 154, 0, 1)","rgba(255, 220, 0, 1)","rgba(82, 237, 0, 1)","rgba(0, 255, 215, 1)","rgba(0, 236, 254, 1)","rgba(0, 9, 254, 1)","rgba(200, 0, 254, 1)","rgba(254, 93, 93, 1)","rgba(252, 176, 58, 1)","rgba(249, 225, 78, 1)","rgba(141, 241, 88, 1)","rgba(93, 246, 222, 1)","rgba(118, 241, 251, 1)","rgba(137, 141, 242, 1)","rgba(228, 156, 247, 1)"],Uf={components:{SvgEditor:Jh,ItemProperties:Ku,ItemDetails:ep,SchemeProperties:ip,SchemeDetails:sp,CreateItemMenu:Sp,QuickHelperPanel:Zm,FloatingHelperPanel:qm,CreateNewSchemeModal:Ql,LinkEditPopup:Pd,InPlaceTextEditBox:rd,ItemTooltip:Ip,Panel:dd,ItemSelector:Hp,TextSlotProperties:Qu,Dropdown:bh,ConnectorDestinationProposal:Ep,AdvancedBehaviorProperties:pu,Modal:Xe,ShapeExporterModal:fm,FrameAnimatorPanel:Om,PathEditBox:nd,Comments:$p,ContextMenu:xm,ExportPictureModal:Wm,MultiItemEditBox:Qh,"export-html-modal":Wp,"export-json-modal":Yp,"import-scheme-modal":vm,"export-as-link-modal":Xp},props:{scheme:{type:Object,default:null},patchIndex:{type:Object,default:null},editAllowed:{type:Boolean,default:!1},isStaticEditor:{type:Boolean,default:!1},isOfflineEditor:{type:Boolean,default:!1},userStylesEnabled:{type:Boolean,default:!1},projectArtEnabled:{type:Boolean,default:!0},menuOptions:{type:Array,default:[]},comments:{type:Object,default:{enabled:!1,isAdmin:!1,allowed:!1,counter:0,provider:null}}},beforeMount(){window.onbeforeunload=this.onBrowseClose,this.markSchemeAsUnmodified(),_h.Z.$on(_h.Z.ANY_ITEM_CLICKED,this.onAnyItemClicked),_h.Z.$on(_h.Z.KEY_PRESS,this.onKeyPress),_h.Z.$on(_h.Z.KEY_UP,this.onKeyUp),_h.Z.$on(_h.Z.PLACE_ITEM,this.onPlaceItem),_h.Z.$on(_h.Z.VOID_CLICKED,this.onVoidClicked),_h.Z.$on(_h.Z.ITEM_TOOLTIP_TRIGGERED,this.onItemTooltipTriggered),_h.Z.$on(_h.Z.ITEM_SIDE_PANEL_TRIGGERED,this.onItemSidePanelTriggered),_h.Z.$on(_h.Z.SCHEME_CHANGE_COMMITED,this.commitHistory),_h.Z.$on(_h.Z.SCREEN_TRANSFORM_UPDATED,this.onScreenTransformUpdated),_h.Z.$on(_h.Z.ITEM_TEXT_SLOT_EDIT_TRIGGERED,this.onItemTextSlotEditTriggered),_h.Z.$on(_h.Z.ANY_ITEM_SELECTED,this.onItemSelectionUpdated),_h.Z.$on(_h.Z.ANY_ITEM_DESELECTED,this.onItemSelectionUpdated),_h.Z.$on(_h.Z.COMPONENT_LOAD_REQUESTED,this.onComponentLoadRequested),_h.Z.$on(_h.Z.RIGHT_CLICKED_ITEM,this.onRightClickedItem),_h.Z.$on(_h.Z.VOID_RIGHT_CLICKED,this.onRightClickedVoid),_h.Z.$on(_h.Z.CUSTOM_CONTEXT_MENU_REQUESTED,this.onCustomContextMenuRequested),_h.Z.$on(_h.Z.CANCEL_CURRENT_STATE,this.onCancelCurrentState),_h.Z.$on(_h.Z.ELEMENT_PICK_REQUESTED,this.switchStatePickElement),_h.Z.$on(_h.Z.START_CREATING_ITEM,this.switchStateCreateItem),_h.Z.$on(_h.Z.START_CURVE_EDITING,this.onStartCurveEditing),_h.Z.$on(_h.Z.START_DRAWING,this.switchStateDrawing),_h.Z.$on(_h.Z.START_CONNECTING_ITEM,this.onStartConnecting),_h.Z.$on(_h.Z.STOP_DRAWING,this.onStopDrawing),_h.Z.$on(_h.Z.CURVE_EDITED,this.onCurveEditRequested),_h.Z.$on(_h.Z.CURVE_EDIT_STOPPED,this.onCurveEditStopped),_h.Z.$on(_h.Z.IMAGE_CROP_TRIGGERED,this.startCroppingImage),_h.Z.$on(_h.Z.ELEMENT_PICK_CANCELED,this.onElementPickCanceled),_h.Z.$on(_h.Z.ANY_ITEM_CHANGED,this.onAnyItemChanged),_h.Z.$on(_h.Z.ITEM_CREATION_DRAGGED_TO_SVG_EDITOR,this.itemCreationDraggedToSvgEditor),_h.Z.$on(_h.Z.FLOATING_HELPER_PANEL_UPDATED,this.updateFloatingHelperPanel)},beforeDestroy(){window.onbeforeunload=null,_h.Z.$off(_h.Z.ANY_ITEM_CLICKED,this.onAnyItemClicked),_h.Z.$off(_h.Z.KEY_PRESS,this.onKeyPress),_h.Z.$off(_h.Z.KEY_UP,this.onKeyUp),_h.Z.$off(_h.Z.PLACE_ITEM,this.onPlaceItem),_h.Z.$off(_h.Z.VOID_CLICKED,this.onVoidClicked),_h.Z.$off(_h.Z.ITEM_TOOLTIP_TRIGGERED,this.onItemTooltipTriggered),_h.Z.$off(_h.Z.ITEM_SIDE_PANEL_TRIGGERED,this.onItemSidePanelTriggered),_h.Z.$off(_h.Z.SCHEME_CHANGE_COMMITED,this.commitHistory),_h.Z.$off(_h.Z.SCREEN_TRANSFORM_UPDATED,this.onScreenTransformUpdated),_h.Z.$off(_h.Z.ITEM_TEXT_SLOT_EDIT_TRIGGERED,this.onItemTextSlotEditTriggered),_h.Z.$off(_h.Z.ANY_ITEM_SELECTED,this.onItemSelectionUpdated),_h.Z.$off(_h.Z.ANY_ITEM_DESELECTED,this.onItemSelectionUpdated),_h.Z.$off(_h.Z.COMPONENT_LOAD_REQUESTED,this.onComponentLoadRequested),_h.Z.$off(_h.Z.RIGHT_CLICKED_ITEM,this.onRightClickedItem),_h.Z.$off(_h.Z.VOID_RIGHT_CLICKED,this.onRightClickedVoid),_h.Z.$off(_h.Z.CUSTOM_CONTEXT_MENU_REQUESTED,this.onCustomContextMenuRequested),_h.Z.$off(_h.Z.CANCEL_CURRENT_STATE,this.onCancelCurrentState),_h.Z.$off(_h.Z.ELEMENT_PICK_REQUESTED,this.switchStatePickElement),_h.Z.$off(_h.Z.START_CREATING_ITEM,this.switchStateCreateItem),_h.Z.$off(_h.Z.START_CURVE_EDITING,this.onStartCurveEditing),_h.Z.$off(_h.Z.START_DRAWING,this.switchStateDrawing),_h.Z.$off(_h.Z.START_CONNECTING_ITEM,this.onStartConnecting),_h.Z.$off(_h.Z.STOP_DRAWING,this.onStopDrawing),_h.Z.$off(_h.Z.CURVE_EDITED,this.onCurveEditRequested),_h.Z.$off(_h.Z.CURVE_EDIT_STOPPED,this.onCurveEditStopped),_h.Z.$off(_h.Z.IMAGE_CROP_TRIGGERED,this.startCroppingImage),_h.Z.$off(_h.Z.ELEMENT_PICK_CANCELED,this.onElementPickCanceled),_h.Z.$off(_h.Z.ANY_ITEM_CHANGED,this.onAnyItemChanged),_h.Z.$off(_h.Z.ITEM_CREATION_DRAGGED_TO_SVG_EDITOR,this.itemCreationDraggedToSvgEditor),_h.Z.$off(_h.Z.FLOATING_HELPER_PANEL_UPDATED,this.updateFloatingHelperPanel)},mounted(){this.init()},data(){return{editorRevision:0,state:"interact",userEventBus:Nf,hasher:Rp(this.$router?this.$router.mode:"history"),offlineMode:!1,schemeId:null,schemeRevision:(new Date).getTime(),originalUrlEncoded:encodeURIComponent(window.location),isLoading:!1,loadingStep:"load",isSaving:!1,schemeLoadErrorMessage:null,cropImage:{editBox:null,item:null},inPlaceTextEditor:{item:null,slotName:"",markupDisabled:!1,shown:!1,area:{x:0,y:0,w:100,h:100},text:"",creatingNewItem:!1,scalingVector:{x:1,y:1},style:{}},sidePanelItemForViewMode:null,sidePanelRightWidth:400,sidePanelRightWidthLastUsed:400,sidePanelLeftWidth:220,sidePanelLeftWidthLastUsed:220,schemeContainer:null,interactiveSchemeContainer:null,customContextMenu:{id:ec().generate(),show:!1,mouseX:0,mouseY:0,menuOptions:[]},zoom:100,mode:"view",textSelectionEnabled:!1,addLinkPopup:{item:null,shown:!1},newSchemePopup:{name:"",description:"",show:!1,parentSchemeItem:null},currentTab:"Doc",tabs:["Doc","Item"],offsetSaveTimerId:null,itemTooltip:{item:null,shown:!1,x:0,y:0},itemTextSlotsAvailable:[],exportHTMLModalShown:!1,exportJSONModalShown:!1,exportAsLinkModalShown:!1,exportShapeModal:{shown:!1,scheme:null},importSchemeFileShown:!1,importSchemeModal:{sheme:null,shown:!1},loadPatchFileShown:!1,advancedBehaviorProperties:{shown:!1},schemeTitleEdit:{shown:!1},drawColorPallete:zf,animatorPanel:{framePlayer:null},exportPictureModal:{kind:"svg",width:100,height:100,shown:!1,exportedItems:[],backgroundColor:"rgba(255,255,255,1.0)"},duplicateDiagramModal:{shown:!1,name:"",errorMessage:null},deleteSchemeWarningShown:!1,floatingHelperPanel:{shown:!1,item:null,x:0,y:0},bottomPanelHeight:300}},methods:{init(){if(!this.scheme)return void this.initOfflineMode();const e=this.hasher.decodeURLHash(window.location.hash);this.editAllowed&&e.m&&"edit"===e.m?this.mode="edit":this.mode="view",this.loadingStep="load",this.isLoading=!0,this.schemeLoadErrorMessage=null,this.schemeId=this.scheme.id,this.initSchemeContainer(this.scheme)},initOfflineMode(){const e=this.hasher.decodeURLHash(window.location.hash);e.m&&"view"===e.m?this.mode="view":this.mode="edit";let t={};const n=window.localStorage.getItem("offlineScheme");if(n)try{t=JSON.parse(n)}catch(e){t={}}(0,fh.GL)(t),this.offlineMode=!0,this.initSchemeContainer(t)},initSchemeContainer(e){return this.isLoading=!0,this.loadingStep="load-shapes",vp(e.items,this.$store).catch((e=>{console.error(e),Jl.addErrorSystemMessage(this.$store,"Failed to load shapes")})).then((()=>{this.isLoading=!1,this.schemeContainer=new Kl.ZP(e,_h.Z),ze()(Rf,(e=>{e.setSchemeContainer(this.schemeContainer),e.reset()})),Ff=new Fp({size:30}),Ff.commit(e),document._history=Ff,"view"===this.mode&&this.switchToViewMode();const t=jf.get(this.schemeId);if(t&&t.screenPosition)"Text"!==t.currentTab&&(this.currentTab=t.currentTab),this.schemeContainer.screenTransform.x=t.screenPosition.offsetX,this.schemeContainer.screenTransform.y=t.screenPosition.offsetY,this.zoom=parseFloat(t.screenPosition.zoom),this.schemeContainer.screenTransform.scale=parseFloat(this.zoom)/100;else if(this.schemeContainer.selectedItems.length>0){const e=this.calculateZoomingAreaForItems(this.schemeContainer.selectedItems);e&&_h.Z.emitBringToViewInstantly(e)}return this.schemeContainer})).then((e=>{this.loadingStep="img-preload";const t=function(e){const t=[];return ze()(e,(e=>{const n=Wl.Z.find(e.shape);n&&"advanced-color"===n.argType("fill")&&"image"===e.shapeProps.fill.type&&e.shapeProps.fill.image&&t.push(e.shapeProps.fill.image)})),t}(e.getItems());return Promise.race([Promise.all(Ke()(t,Zf)),(1e4,new Promise((e=>{setTimeout(e,1e4)})))])})).then((()=>{this.isLoading=!1}))},toggleMode(e){("edit"!==e||this.editAllowed)&&(this.mode=e,"view"===e?(this.hideSidePanelRight(),this.switchStateInteract()):"edit"===e&&(this.showSidePanelRight(),this.switchStateDragItem()))},onTextSelectionForViewChanged(e){this.textSelectionEnabled=e},onCancelCurrentState(){"edit"===this.mode?this.state="dragItem":this.state="interact",Rf[this.state].reset(),this.updateHistoryState()},switchStateDragItem(){_h.Z.emitItemsHighlighted([]),Rf.dragItem.schemeContainer=this.schemeContainer,Rf[this.state].cancel(),this.state="dragItem",Rf.dragItem.reset()},switchStateInteract(){_h.Z.emitItemsHighlighted([]),Rf.interact.schemeContainer=this.interactiveSchemeContainer,Rf[this.state].cancel(),this.state="interact",Rf[this.state].reset(),this.updateFloatingHelperPanel()},switchStatePickElement(e){_h.Z.emitItemsHighlighted([]),Rf.pickElement.reset(),Rf.pickElement.schemeContainer=this.schemeContainer,Rf.pickElement.setElementPickCallback(e),this.state="pickElement",this.updateFloatingHelperPanel()},switchStateCreateItem(e){_h.Z.emitItemsHighlighted([]),Rf[this.state].cancel(),"path"===e.shape?(e.shapeProps.points=[],this.setCurveEditItem(e),this.state="editPath",_h.Z.emitCurveEdited(e)):"connector"===e.shape?(e.shapeProps.points=[],this.state="connecting",Rf.connecting.setItem(e)):this.state="createItem",Rf[this.state].schemeContainer=this.schemeContainer,Rf[this.state].reset(),Rf[this.state].setItem(e),this.updateFloatingHelperPanel()},setCurveEditItem(e){this.$store.dispatch("setCurveEditItem",e)},onStartCurveEditing(e){_h.Z.emitItemsHighlighted([]),Rf[this.state].cancel(),e.shapeProps.points=[],this.setCurveEditItem(e),"path"===e.shape&&(e.shapeProps.closed=!1),this.state="editPath",_h.Z.emitCurveEdited(e),Rf[this.state].schemeContainer=this.schemeContainer,Rf[this.state].reset(),Rf[this.state].setItem(e),this.updateFloatingHelperPanel()},switchStateDrawing(){_h.Z.emitItemsHighlighted([]),Rf[this.state].cancel(),this.state="draw",Rf.draw.schemeContainer=this.schemeContainer,Rf.draw.reset(),this.updateFloatingHelperPanel()},onStopDrawing(){"draw"===this.state&&Rf.draw.cancel(),this.updateFloatingHelperPanel()},onStartConnecting(e,t){_h.Z.emitItemsHighlighted([]),Rf[this.state].cancel();let n=null;t&&(n=this.schemeContainer.localPointOnItem(t.x,t.y,e)),Rf.connecting.schemeContainer=this.schemeContainer,Rf.connecting.reset(),Rf.connecting.initConnectingFromSourceItem(e,n).shapeProps.smoothing=this.$store.state.defaultConnectorSmoothing,this.state="connecting",this.updateFloatingHelperPanel()},onDrawColorPicked(e){"draw"===this.state&&Rf.draw.pickColor(e)},onCurveEditRequested(e){_h.Z.emitItemsHighlighted([]),Rf[this.state].cancel(),this.state="editPath",Rf.editPath.reset(),Rf.editPath.setItem(e),this.setCurveEditItem(e),this.updateFloatingHelperPanel()},onCurveEditStopped(){"editPath"===this.state&&Rf.editPath.cancel()},startCroppingImage(e){_h.Z.emitItemsHighlighted([]),Rf[this.state].cancel(),this.state="cropImage",Rf[this.state].schemeContainer=this.schemeContainer,Rf.cropImage.reset(),this.cropImage.editBox=this.schemeContainer.generateMultiItemEditBox([e]),this.cropImage.item=e,Rf.cropImage.setImageEditBox(this.cropImage.editBox),Rf.cropImage.setImageItem(e),this.updateFloatingHelperPanel()},onElementPickCanceled(){"pickElement"===this.state&&Rf.pickElement.cancel()},onItemTextSlotEditTriggered(e,t,n,i,r){const s=e.textSlots[t],o=(0,Kl.rs)(n.x,n.y,e),a=(0,Kl.rs)(n.x+n.w,n.y,e),l=(0,Kl.rs)(n.x+n.w,n.y+n.h,e),c=(0,Kl.rs)(n.x,n.y+n.h,e),h=uh.Z.averagePoint(o,a,l,c),d=uh.Z.distanceBetweenPoints(o.x,o.y,a.x,a.y),u=uh.Z.distanceBetweenPoints(o.x,o.y,c.x,c.y),p=(0,Kl.pD)(e),m=h.x-d/2,f=h.y-u/2;this.inPlaceTextEditor.slotName=t,this.inPlaceTextEditor.item=e,this.inPlaceTextEditor.text=s.text,this.inPlaceTextEditor.markupDisabled=i,this.inPlaceTextEditor.style=(0,gh.A)(s),this.inPlaceTextEditor.creatingNewItem=r;const g=1/Math.max(1e-7,p.x),v=1/Math.max(1e-7,p.y);this.inPlaceTextEditor.area.x=this._x(m)-g,this.inPlaceTextEditor.area.y=this._y(f)-v,this.inPlaceTextEditor.area.w=this._z(d),this.inPlaceTextEditor.area.h=this._z(u),this.inPlaceTextEditor.shown=!0,this.inPlaceTextEditor.scalingVector=p,this.updateFloatingHelperPanel()},onInPlaceTextEditorUpdate(e){this.inPlaceTextEditor.shown&&(this.inPlaceTextEditor.item.textSlots[this.inPlaceTextEditor.slotName].text=e)},onInPlaceTextEditorItemAreaChanged(e,t,n){"none"===e.shape&&(e.area.w=t,e.area.h=n,this.schemeContainer.updateMultiItemEditBox())},onInPlaceTextEditorItemRenamed(e,t){e.name=t},onInPlaceTextEditorItemTextCleared(e){"none"!==!e.shape&&(e.childItems&&e.childItems.length>0||this.schemeContainer.deleteItem(e))},closeItemTextEditor(){this.inPlaceTextEditor.item&&(_h.Z.emitItemTextSlotEditCanceled(this.inPlaceTextEditor.item,this.inPlaceTextEditor.slotName),_h.Z.emitSchemeChangeCommited(`item.${this.inPlaceTextEditor.item.id}.textSlots.${this.inPlaceTextEditor.slotName}.text`),_h.Z.emitItemChanged(this.inPlaceTextEditor.item.id,`textSlots.${this.inPlaceTextEditor.slotName}.text`),this.schemeContainer.reindexItems()),this.inPlaceTextEditor.shown=!1,this.inPlaceTextEditor.item=null,this.inPlaceTextEditor.markupDisabled=!1,this.inPlaceTextEditor.slotName=null},updateInPlaceTextEditorStyle(){const e=this.inPlaceTextEditor.item.textSlots[this.inPlaceTextEditor.slotName];this.inPlaceTextEditor.style=(0,gh.A)(e)},onAnyItemChanged(e){this.inPlaceTextEditor.item&&this.inPlaceTextEditor.item.id===e&&this.updateInPlaceTextEditorStyle()},onNewSchemeRequested(){this.offlineMode?confirm("Area you sure you want to reset all your changes?")&&this.initOfflineMode():this.schemeId&&this.openNewSchemePopup()},openNewSchemePopup(){this.newSchemePopup.show=!0},onSaveSchemeClick(){!this.offlineMode&&this.$store.state.apiClient?this.saveScheme():this.saveToLocalStorage()},saveScheme(){this.offlineMode||(this.isStaticEditor?_h.Z.emitSchemePatchRequested(this.schemeContainer.scheme):this.$store.state.apiClient&&this.$store.state.apiClient.saveScheme&&(this.createSchemePreview(),this.isSaving=!0,this.$store.dispatch("clearStatusMessage"),this.$store.state.apiClient.saveScheme((0,fh.wS)(this.schemeContainer.scheme)).then((()=>{this.markSchemeAsUnmodified(),this.isSaving=!1})).catch((e=>{this.isSaving=!1,this.$store.dispatch("setErrorStatusMessage","Failed to save, please try again"),this.markSchemeAsModified()}))))},saveToLocalStorage(){window.localStorage.setItem("offlineScheme",JSON.stringify(this.schemeContainer.scheme)),Jl.addInfoSystemMessage(this.$store,"Saved scheme to local storage","offline-save"),this.markSchemeAsUnmodified()},createSchemePreview(){this.$store.state.apiClient&&this.$store.state.apiClient.uploadSchemeSvgPreview&&function(e,t){const n=document.querySelector('#svg_plot [data-type="scene-transform"]').cloneNode(!0);return Np(n).catch((e=>{})).then((()=>{n.setAttribute("transform","");const e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttribute("viewBox",`${t.x-10} ${t.y-10} ${t.w+20} ${t.h+20}`),e.setAttribute("width",t.w+20),e.setAttribute("height",t.h+20),e.setAttribute("version","1.1"),e.setAttribute("xml:space","preserve"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("xmlns:xhtml","http://www.w3.org/1999/xhtml"),e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),e.appendChild(n),Bp(e),'<?xml version="1.0" ?>'+e.outerHTML.replace(/&nbsp;/g," ")}))}(0,this.schemeContainer.getBoundingBoxOfItems(this.schemeContainer.getItems())).then((e=>this.$store.state.apiClient.uploadSchemeSvgPreview(this.schemeId,e)))},zoomToSelection(){"edit"===this.mode?this.schemeContainer.selectedItems.length>0?this.zoomToItems(this.schemeContainer.selectedItems):this.zoomToItems(this.schemeContainer.getItems()):"view"===this.mode&&this.zoomToItems(this.interactiveSchemeContainer.getItems())},zoomToItems(e){if(0===e.length)return;const t=this.calculateZoomingAreaForItems(e);t&&_h.Z.emitBringToViewAnimated(t)},calculateZoomingAreaForItems(e){if("view"===this.mode&&(e=this.interactiveSchemeContainer.filterNonHUDItems(e)),!e||0===e.length)return null;let t=rc()(e,(e=>e.visible&&e.meta.calculatedVisibility));return 0===t.length&&e.length>0&&(t=e),this.schemeContainer.getBoundingBoxOfItems(t)},onClickedAddItemLink(e){this.addLinkPopup.item=e,this.addLinkPopup.shown=!0},onClickedStartConnecting(e,t,n){const i={x:0,y:0};i.x=t,i.y=n,_h.Z.$emit(_h.Z.START_CONNECTING_ITEM,e,i)},onItemLinkSubmit(e){this.addLinkPopup.item.links.push({id:ec().generate(),title:e.title,url:e.url,type:e.type}),_h.Z.emitSchemeChangeCommited()},startCreatingChildSchemeForItem(e){this.newSchemePopup.name=e.name,this.newSchemePopup.parentSchemeItem=e,this.newSchemePopup.show=!0},submitNewSchemeForCreation(e){const t=this;return new Promise(((n,i)=>{t.$emit("new-scheme-submitted",e,((e,t)=>{if(t){const n=this.newSchemePopup.parentSchemeItem;n&&(n.links||(n.links=[]),n.links.push({title:`${e.name}`,url:t,type:"scheme"}),_h.Z.emitItemChanged(n.id,"links")),window.open(t,"_blank")}n(),this.newSchemePopup.show=!1}),i)}))},onUpdateOffset(e,t){this.initOffsetSave()},onZoomChanged(e){this.zoom=e,this.initOffsetSave()},initOffsetSave(){this.offsetSaveTimerId&&clearTimeout(this.offsetSaveTimerId),this.offsetSaveTimerId=setTimeout((()=>{this.offsetSaveTimerId=null,this.saveSchemeSettings()}),200)},saveSchemeSettings(){jf.save(this.schemeContainer.scheme.id,{currentTab:this.currentTab,screenPosition:{offsetX:this.schemeContainer.screenTransform.x,offsetY:this.schemeContainer.screenTransform.y,zoom:this.zoom}})},onPlaceItem(e){this.schemeContainer.addItem(e)},onAnyItemClicked(e){this.sidePanelItemForViewMode=null,this.hideSidePanelRight()},onVoidClicked(){"view"===this.mode&&(this.hideSidePanelRight(),this.sidePanelItemForViewMode=null)},onKeyPress(e,t){"edit"===this.mode&&(e===ph.R.CTRL_C?this.copySelectedItems():e===ph.R.CTRL_V?this.pasteItemsFromClipboard():ph.R.CTRL_S===e?this.offlineMode||!this.editAllowed?this.exportAsJSON():this.saveScheme():ph.R.CTRL_Z===e?this.historyUndo():ph.R.CTRL_SHIFT_Z===e?this.historyRedo():ph.R.CTRL_A===e?(this.schemeContainer.selectAllItems(),_h.Z.$emit(_h.Z.ANY_ITEM_SELECTED)):ph.R.DELETE===e&&("editPath"===this.state?Rf.editPath.deleteSelectedPoints():"dragItem"===this.state&&this.deleteSelectedItems())),e===ph.R.ESCAPE?Rf[this.state].cancel():Rf[this.state].keyPressed(e,t)},copySelectedItems(){Xd(this.schemeContainer.copySelectedItems())},copySelectedItemStyle(){const e=this.schemeContainer.getSelectedItems();e.length>0&&Jl.copyItemStyle(this.$store,e[0])},createComponentFromItem(e){const t=(0,Kl.rs)(0,1.2*e.area.h,e),n={area:{x:t.x,y:t.y,w:e.area.w,h:e.area.h},name:`Component[${e.name}]`,shape:"component",shapeProps:{kind:"embedded",referenceItem:"#"+e.id,autoZoom:!1,showButton:!1}};(0,Gl.z9)(n),this.schemeContainer.addItem(n)},applyCopiedItemStyle(){this.$store.state.copiedStyleItem&&(ze()(this.schemeContainer.getSelectedItems(),(e=>{(0,mh.FR)(this.$store.state.copiedStyleItem,e),_h.Z.emitItemChanged(e.id)})),_h.Z.emitSchemeChangeCommited())},pasteItemsFromClipboard(){eu().then((e=>{if(e){const t=this.schemeContainer.decodeItemsFromText(e);t&&(this.isLoading=!0,this.loadingStep="load-shapes",vp(t,this.$store).catch((e=>{console.error(e),Jl.addErrorSystemMessage(this.$store,"Failed to load shapes")})).then((()=>{this.isLoading=!1;const e=(this.schemeContainer.screenSettings.width/2-this.schemeContainer.screenTransform.x)/this.schemeContainer.screenTransform.scale,n=(this.schemeContainer.screenSettings.height/2-this.schemeContainer.screenTransform.y)/this.schemeContainer.screenTransform.scale;this.schemeContainer.pasteItems(t,e,n),_h.Z.emitSchemeChangeCommited()})))}}))},onBrowseClose(){return this.$store.getters.schemeModified?"The changes were not saved":null},onItemTooltipTriggered(e,t,n){this.itemTooltip.item=e,this.itemTooltip.x=t;const i=this.$refs.middleSection.getBoundingClientRect();this.itemTooltip.y=Math.max(i.top,n),this.itemTooltip.shown=!0},onItemSidePanelTriggered(e){this.sidePanelItemForViewMode=e,this.showSidePanelRight(),this.currentTab="Item"},commitHistory(e){Ff.commit(this.schemeContainer.scheme,e),this.markSchemeAsModified(),this.updateHistoryState()},historyEditAllowed(){return"dragItem"===this.state},historyUndo(){if("editPath"===this.state)Rf.editPath.undo();else if(Ff.undoable()&&this.historyEditAllowed()){const e=Ff.undo();e&&(this.schemeContainer.scheme=e,this.schemeContainer.reindexItems(),this.updateRevision(),this.editorRevision++,this.restoreItemSelection(),this.restoreCurveEditing(),_h.Z.$emit(_h.Z.HISTORY_UNDONE)),this.updateHistoryState()}},historyRedo(){if("editPath"===this.state)Rf.editPath.redo();else if(Ff.redoable()&&this.historyEditAllowed()){const e=Ff.redo();e&&(this.schemeContainer.scheme=e,this.schemeContainer.reindexItems(),this.editorRevision++,this.updateRevision(),this.restoreItemSelection(),this.restoreCurveEditing(),_h.Z.$emit(_h.Z.HISTORY_UNDONE)),this.updateHistoryState()}},restoreCurveEditing(){if("editPath"===this.$store.state.editorStateName){const e=this.$store.state.curveEditing.item;if(!e)return;const t=this.schemeContainer.findItemById(e.id);t?(this.$store.dispatch("setCurveEditItem",t),_h.Z.$emit(_h.Z.CURVE_EDITED,t)):(this.$store.dispatch("setCurveEditItem",null),"editPath"===this.$store.state.editorStateName&&_h.Z.$emit(_h.Z.CURVE_EDIT_STOPPED))}else this.$store.dispatch("setCurveEditItem",null)},restoreItemSelection(){const e=Ke()(this.schemeContainer.selectedItems,(e=>e.id));this.schemeContainer.deselectAllItems(),ze()(e,(e=>{const t=this.schemeContainer.findItemById(e);t&&this.schemeContainer.selectItem(t,!0)}))},updateHistoryState(){this.$store.dispatch("setHistoryUndoable",Ff.undoable()),this.$store.dispatch("setHistoryRedoable",Ff.redoable())},updateRevision(){this.schemeRevision=(new Date).getTime()},bringSelectedItemsToFront(){this.schemeContainer.bringSelectedItemsToFront(),this.schemeContainer.reindexItems(),this.commitHistory(),this.markSchemeAsModified(),this.updateRevision()},bringSelectedItemsToBack(){this.schemeContainer.bringSelectedItemsToBack(),this.schemeContainer.reindexItems(),this.commitHistory(),this.markSchemeAsModified(),this.updateRevision()},markSchemeAsModified(){this.$store.dispatch("markSchemeAsModified")},markSchemeAsUnmodified(){this.$store.dispatch("markSchemeAsUnmodified")},onScreenTransformUpdated(e){e&&(this.zoom=Math.round(1e4*e.scale)/100),this.initOffsetSave(),"edit"===this.mode&&this.updateFloatingHelperPanel()},importScheme(e){Uc.Z.clone(e).id=this.schemeContainer.scheme.id;const t=this.schemeContainer.revision;this.initSchemeContainer(e).then((()=>{this.schemeContainer.revision=t+1,this.updateRevision(),this.commitHistory(),this.editorRevision++,"view"===this.mode&&this.switchToViewMode()}))},onImportSchemeJSONClicked(){this.importSchemeFileShown=!0,this.$nextTick((()=>{this.$refs.importSchemeFileInput.click()}))},onImportSchemeFileInputChanged(e){this.loadSchemeFile(e.target.files[0])},loadSchemeFile(e){const t=new FileReader;t.onload=e=>{this.importSchemeFileShown=!1;try{const t=JSON.parse(e.target.result);this.importSchemeModal.scheme=t,this.importSchemeModal.shown=!0}catch(e){alert("Not able to import scheme. Malformed json")}},t.readAsText(e)},triggerApplyPatchUpload(){this.loadPatchFileShown=!0,this.$nextTick((()=>{this.$refs.loadPatchFileInput.click()}))},onLoadPatchFileInputChanged(e){const t=e.target.files[0],n=new FileReader;n.onload=e=>{this.loadPatchFileShown=!1;try{const t=JSON.parse(e.target.result);this.$emit("preview-patch-requested",t)}catch(e){alert("Not able to load patch. Malformed json")}},n.readAsText(t)},exportAsJSON(){this.exportJSONModalShown=!0},exportAsSVG(){this.openExportPictureModal(this.schemeContainer,this.schemeContainer.scheme.items,"svg")},exportAsPNG(){this.openExportPictureModal(this.schemeContainer,this.schemeContainer.scheme.items,"png")},exportAsLink(){this.exportAsLinkModalShown=!0},onItemSelectionUpdated(){if(this.schemeContainer.selectedItems.length>0){this.currentTab="Item";const e=this.schemeContainer.selectedItems[0],t=Wl.Z.find(e.shape);if(!t)return;const n=t.getTextSlots(e);if(1===this.schemeContainer.selectedItems.length&&"frame_player"===this.schemeContainer.selectedItems[0].shape){const e=this.schemeContainer.selectedItems[0];this.animatorPanel.framePlayer=e}else this.animatorPanel.framePlayer=null;n&&n.length>0?this.itemTextSlotsAvailable=Ke()(n,(t=>({tabName:`Text: ${t.name}`,slotName:t.name,item:e}))):this.itemTextSlotsAvailable.length=0}else this.animatorPanel.framePlayer=null,this.itemTextSlotsAvailable.length=0;this.updateFloatingHelperPanel()},onTextSlotMoved(e,t,n){n!==t&&(e.textSlots[n]=Uc.Z.clone(e.textSlots[t]),e.textSlots[t].text="",_h.Z.emitItemChanged(e.id,`textSlots.${n}`),this.inPlaceTextEditor.item||(this.currentTab=`Text: ${n}`),_h.Z.emitItemTextSlotMoved(e,t,n))},onItemShapePropChanged(e,t,n){let i="",r=!1;if(ze()(this.schemeContainer.selectedItems,(s=>{const o=Wl.Z.find(s.shape);if(o){const a=Wl.Z.getShapePropDescriptor(o,e);a&&a.type===t&&(this.schemeContainer.setPropertyForItem(s,(t=>{t.shapeProps[e]=Uc.Z.clone(n),_h.Z.emitItemChanged(t.id,`shapeProps.${e}`)})),s.meta.revision+=1,i+=s.id,pp.registerItemShapeProp(s.shape,e,n)),"component"!==s.shape||"referenceItem"!==e&&"placement"!==e||(this.schemeContainer.reindexSpecifiedItems([s]),r=!0)}"connector"===s.shape&&"smoothing"===e&&(r=!0)})),1===this.schemeContainer.selectedItems.length){const e=this.schemeContainer.selectedItems[0];"connector"===e.shape&&Jl.setSelectedConnectorPath(this.$store,Wl.Z.find(e.shape).computeOutline(e))}_h.Z.emitSchemeChangeCommited(`item.${i}.shapeProps.${e}`),r&&this.schemeContainer.reindexItems()},onItemFieldChanged(e,t){let n="";ze()(this.schemeContainer.selectedItems,(i=>{this.schemeContainer.setPropertyForItem(i,(n=>{n[e]=Uc.Z.clone(t),_h.Z.emitItemChanged(n.id,e)})),n+=i.id})),"tags"===e&&this.schemeContainer.reindexTags(),_h.Z.emitSchemeChangeCommited(`item.${n}.${e}`)},onItemShapeChanged(e){let t="";ze()(this.schemeContainer.selectedItems,(n=>{this.schemeContainer.setPropertyForItem(n,(t=>{t.shape=e,(0,Gl.z9)(t),_h.Z.emitItemChanged(t.id,"shape")})),t+=n.id})),_h.Z.emitSchemeChangeCommited(`item.${t}.shape`)},onItemStyleApplied(e){let t="";ze()(this.schemeContainer.selectedItems,(n=>{xu(n,e)&&(_h.Z.emitItemChanged(n.id),t+=n.id)})),_h.Z.emitSchemeChangeCommited(`item.${t}.${name}`)},onInPlaceEditTextPropertyChanged(e,t,n,i){e.textSlots&&e.textSlots.hasOwnProperty(t)&&(e.textSlots[t][n]=Uc.Z.clone(i),pp.registerItemTextProp(e.shape,t,n,i)),_h.Z.emitItemChanged(e.id),_h.Z.emitSchemeChangeCommited(`item.${e.id}.textSlots.${t}.${n}`)},onItemGenericTextSlotPropChanged(e,t){let n="";ze()(this.schemeContainer.selectedItems,(i=>{i.textSlots&&ze()(i.textSlots,((n,r)=>{i.textSlots[r][e]=Uc.Z.clone(t),pp.registerItemTextProp(i.shape,r,e,t)})),_h.Z.emitItemChanged(i.id,`textSlots.*.${e}`),n+=i.id})),_h.Z.emitSchemeChangeCommited(`item.${n}.textSlots.*.${e}`)},onTextPropertyChanged(e,t,n){let i="";ze()(this.schemeContainer.selectedItems,(r=>{r.textSlots&&r.textSlots.hasOwnProperty(e)&&(r.textSlots[e][t]=Uc.Z.clone(n),pp.registerItemTextProp(r.shape,e,t,n)),_h.Z.emitItemChanged(r.id,`textSlots.${e}.${t}`),i+=r.id})),_h.Z.emitSchemeChangeCommited(`item.${i}.textSlots.${e}.${t}`)},convertCurvePointToSimple(){"editPath"===this.state&&Rf[this.state].convertSelectedPointsToSimple()},convertCurvePointToBezier(){"editPath"===this.state&&Rf[this.state].convertSelectedPointsToBezier()},closeConnectorProposedDestination(){Jl.disableProposeConnectorDestinationItems(this.$store)},onConnectorDestinationItemSelected(e){"connecting"===this.state&&Rf[this.state].submitConnectorDestinationItem(e)},triggerSchemeTitleEdit(){this.schemeTitleEdit.shown=!0,this.$nextTick((()=>{this.$refs.schemeTitle&&this.$refs.schemeTitle.focus()}))},submitTitleEdit(){this.$refs.schemeTitle&&(this.schemeContainer.scheme.name=this.$refs.schemeTitle.innerHTML,this.updateRevision(),this.commitHistory()),this.schemeTitleEdit.shown=!1},clearStatusMessage(){this.$store.dispatch("clearStatusMessage")},switchToViewMode(){this.interactiveSchemeContainer=new Kl.ZP(Uc.Z.clone(this.schemeContainer.scheme),_h.Z),this.interactiveSchemeContainer.screenTransform=Uc.Z.clone(this.schemeContainer.screenTransform);const e=this.schemeContainer.getBoundingBoxOfItems(this.schemeContainer.filterNonHUDItems(this.schemeContainer.getItems()));this.interactiveSchemeContainer.screenSettings.boundingBox=e,Zh.Z.enableAnimations(),this.switchStateInteract()},switchToEditMode(){this.interactiveSchemeContainer=null,Zh.Z.stopAllAnimations(),this.switchStateDragItem()},onDrawColorPicked(e){"draw"===this.state&&Rf.draw.pickColor(e)},onSvgSizeUpdated({width:e,height:t}){this.interactiveSchemeContainer&&(this.interactiveSchemeContainer.screenSettings.width=e,this.interactiveSchemeContainer.screenSettings.height=t)},onAnimatiorEditorOpened(e){Jl.startAnimationEditor(this.$store,e)},closeAnimatorEditor(){Jl.startAnimationEditor(this.$store,null)},onComponentLoadRequested(e){this.$store.state.apiClient&&this.$store.state.apiClient.getScheme&&(e._childItems&&e._childItems.length>0&&(e._childItems=[]),e.meta.componentLoadFailed=!1,this.$store.state.apiClient.getScheme(e.shapeProps.schemeId).then((e=>vp(e.scheme.items,this.$store).catch((e=>{console.error(e),Jl.addErrorSystemMessage(this.$store,"Failed to load shapes")})).then((()=>e)))).then((t=>{const n=t.scheme,i=new Kl.ZP(n,_h.Z);this.interactiveSchemeContainer.attachItemsToComponentItem(e,i.scheme.items),this.interactiveSchemeContainer.prepareFrameAnimationsForItems(),_h.Z.emitItemChanged(e.id),"component"===e.shape&&e.shapeProps.autoZoom&&this.zoomToItems([e]),this.$nextTick((()=>{_h.Z.emitComponentSchemeMounted(e)}))})).catch((t=>{"component"===e.shape&&(e.textSlots.button.text="Loading failed",_h.Z.emitItemChanged(e.id)),console.error(t),Jl.addErrorSystemMessage(this.$store,"Failed to load component","scheme-component-load"),e.meta.componentLoadFailed=!0,_h.Z.emitComponentLoadFailed(e)})))},onRightClickedItem(e,t,n){const i=this.x_(t),r=this.y_(n),s=this.schemeContainer.multiItemEditBox&&1===this.schemeContainer.multiItemEditBox.items.length||!this.schemeContainer.multiItemEditBox;if(this.customContextMenu.menuOptions=[{name:"Bring to Front",clicked:()=>{this.bringSelectedItemsToFront()}},{name:"Bring to Back",clicked:()=>{this.bringSelectedItemsToBack()}},{name:"Connect",iconClass:"fas fa-network-wired",clicked:()=>{this.onClickedStartConnecting(e,i,r)}},{name:"Add link",iconClass:"fas fa-link",clicked:()=>{this.onClickedAddItemLink(e)}}],!this.offline&&s&&this.customContextMenu.menuOptions.push({name:"Create diagram for this element...",iconClass:"far fa-file",clicked:()=>{this.startCreatingChildSchemeForItem(e)}}),this.customContextMenu.menuOptions=this.customContextMenu.menuOptions.concat([{name:"Copy",iconsClass:"fas fa-copy",clicked:()=>{this.copySelectedItems(e)}},{name:"Copy item style",clicked:()=>{this.copySelectedItemStyle(e)}}]),this.$store.state.copiedStyleItem&&this.customContextMenu.menuOptions.push({name:"Apply copied item style",clicked:()=>{this.applyCopiedItemStyle(e)}}),s)this.customContextMenu.menuOptions.push({name:"Create component from this item",clicked:()=>{this.createComponentFromItem(e)}}),"image"===e.shape&&this.customContextMenu.menuOptions.push({name:"Crop image",iconClass:"fas fa-crop",clicked:()=>_h.Z.$emit(_h.Z.IMAGE_CROP_TRIGGERED,e)});else{let e=!0;for(let t=0;t<this.schemeContainer.multiItemEditBox.items.length&&e;t++)e="path"===this.schemeContainer.multiItemEditBox.items[t].shape;e&&this.customContextMenu.menuOptions.push({name:"Merge paths",clicked:()=>this.mergePaths(this.schemeContainer.multiItemEditBox.items)})}this.customContextMenu.menuOptions=this.customContextMenu.menuOptions.concat([{name:"Delete",iconClass:"fas fa-trash",clicked:()=>{this.deleteSelectedItems()}},{name:"Surround items",clicked:()=>{this.surroundSelectedItems()}},{name:"Export as SVG ...",iconsClass:"fas fa-file-export",clicked:()=>{this.exportSelectedItemsAsSVG()}},{name:"Export as PNG ...",iconsClass:"fas fa-file-export",clicked:()=>{this.exportSelectedItemsAsPNG()}}]);let o=[e];this.schemeContainer.multiItemEditBox&&(o=this.schemeContainer.multiItemEditBox.items);const a=[{name:"Horizontally in parent",clicked:()=>this.schemeContainer.alignItemsHorizontallyInParent(o)},{name:"Vertically in parent",clicked:()=>this.schemeContainer.alignItemsVerticallyInParent(o)},{name:"Centered in parent",clicked:()=>this.schemeContainer.alignItemsCenteredInParent(o)}];o.length>1&&(a.push({name:"All items horizontally",clicked:()=>this.schemeContainer.alignItemsHorizontally(o)}),a.push({name:"All items vertically",clicked:()=>this.schemeContainer.alignItemsVertically(o)})),this.customContextMenu.menuOptions.push({name:"Align",subOptions:a}),s&&this.customContextMenu.menuOptions.push({name:"Events",subOptions:[{name:"Init",clicked:()=>{this.addItemBehaviorEvent(e,"init")}},{name:"Clicked",clicked:()=>{this.addItemBehaviorEvent(e,"clicked")}},{name:"Mouse In",clicked:()=>{this.addItemBehaviorEvent(e,"mousein")}},{name:"Mouse Out",clicked:()=>{this.addItemBehaviorEvent(e,"mouseout")}}]}),"path"===e.shape&&this.customContextMenu.menuOptions.push({name:"Edit Path",clicked:()=>{_h.Z.emitCurveEdited(e)}}),this.customContextMenu.mouseX=t+5,this.customContextMenu.mouseY=n+5,this.customContextMenu.id=ec().generate(),this.customContextMenu.show=!0},onRightClickedVoid(e,t,n,i){if("edit"===this.mode){this.customContextMenu.menuOptions=[{name:"Paste",clicked:()=>{this.pasteItemsFromClipboard()}}];const e=document.getElementById("svg_plot").getBoundingClientRect();this.customContextMenu.mouseX=n+e.left+5,this.customContextMenu.mouseY=i+e.top+5,this.customContextMenu.id=ec().generate(),this.customContextMenu.show=!0}},onCustomContextMenuRequested(e,t,n){this.customContextMenu.menuOptions=n;const i=document.getElementById("svg_plot").getBoundingClientRect();this.customContextMenu.mouseX=e+i.left+5,this.customContextMenu.mouseY=t+i.top+5,this.customContextMenu.id=ec().generate(),this.customContextMenu.show=!0},onCustomContextMenuOptionSelected(e){e.subOptions||e.clicked(),this.customContextMenu.show=!1},addItemBehaviorEvent(e,t){find(e.behavior.events,(e=>e.event===t))||e.behavior.events.push({id:ec().generate(),event:t,actions:[]}),_h.Z.$emit(_h.Z.BEHAVIOR_PANEL_REQUESTED)},mergePaths(e){const t=e[0];e.shift(),function(e,t){t.sort(((e,t)=>e.meta.ancestorIds.length-t.meta.ancestorIds.length)),Ef(e);for(let n=0;n<t.length;n++)Ef(t[n]),t[n].shapeProps.paths.forEach((i=>{const r={pos:"relative",closed:i.closed,points:[]};i.points.forEach((i=>{const s=(0,Gc.oJ)(i,t[n].area.w,t[n].area.h),o=(0,Kl.ht)(s.x,s.y,t[n],e);if(o.t=s.t,s.hasOwnProperty("x1")){const i=(0,Kl.ht)(s.x+s.x1,s.y+s.y1,t[n],e);o.x1=i.x-o.x,o.y1=i.y-o.y}if(s.hasOwnProperty("x2")){const i=(0,Kl.ht)(s.x+s.x2,s.y+s.y2,t[n],e);o.x2=i.x-o.x,o.y2=i.y-o.y}r.points.push((0,Gc.Vk)(o,e.area.w,e.area.h))})),e.shapeProps.paths.push(r)}));Pf(e)}(t,e),this.schemeContainer.readjustItem(t.id,!1,Lf),this.schemeContainer.deleteItems(e),this.schemeContainer.selectItem(t),_h.Z.emitSchemeChangeCommited()},surroundSelectedItems(){const e=this.schemeContainer.multiItemEditBox;if(null!==e&&e.items.length>0){const t=this.$store.state.itemSurround.padding,n=Uc.Z.clone(mh.XZ);n.name="Group",n.area={x:e.area.x-t,y:e.area.y-t,w:e.area.w+2*t,h:e.area.h+2*t,r:e.area.r},n.shape="rect",n.shapeProps={strokePattern:Sh.Z.DASHED,strokeSize:2,fill:{type:"none"}},n.textSlots={body:{halign:"left",valign:"top",text:"<i>Group...</i>"}},this.schemeContainer.addItem(n),this.schemeContainer.remountItemBeforeOtherItem(n.id,e.items[0].id);const i={};ze()(e.items,(e=>{let t=!0;if(e.meta&&e.meta.ancestorIds)for(let n=0;n<e.meta.ancestorIds.length&&t;n++)i[e.meta.ancestorIds[n]]&&(t=!1);t&&(n.childItems&&n.childItems.length>0?this.schemeContainer.remountItemAfterOtherItem(e.id,n.childItems[n.childItems.length-1].id):this.schemeContainer.remountItemInsideOtherItem(e.id,n.id),i[e.id]=1)})),this.schemeContainer.selectItem(n),_h.Z.emitItemSurroundCreated(n,e.area,t)}},exportSelectedItemsAsSVG(){this.exportSelectedItemsAsPicture("svg")},exportSelectedItemsAsPNG(){this.exportSelectedItemsAsPicture("png")},exportSelectedItemsAsPicture(e){if(!this.schemeContainer.multiItemEditBox)return;const t=this.schemeContainer.multiItemEditBox;if(0===t.items.length)return;const n=[],i={};ze()(t.items,(e=>{let t=!0;for(let n=0;n<e.meta.ancestorIds.length&&t;n++)i[e.meta.ancestorIds[n]]&&(t=!1);t&&(n.push(e),i[e.id]=1)})),this.openExportPictureModal(this.schemeContainer,n,e)},openExportPictureModal(e,t,n){if(!t||0===t.length)return void Jl.addErrorSystemMessage(this.$store,"You have no items in your document");const i=[];let r=null,s=null;const o=[];ze()(t,(t=>{if(t.visible&&t.opacity>1e-4){const n=document.querySelector(`g[data-svg-item-container-id="${t.id}"]`);if(n){const i=this.calculateBoundingBoxOfAllSubItems(e,t);r?(r.x=Math.min(r.x,i.x),r.y=Math.min(r.y,i.y)):r={x:i.x,y:i.y},s?(s.x=Math.max(s.x,i.x+i.w),s.y=Math.max(s.y,i.y+i.h)):s={x:i.x+i.w,y:i.y+i.h};const a=n.cloneNode(!0);Bp(a),o.push({item:t,itemDom:a})}}})),ze()(o,(t=>{const n=t.item,s=t.itemDom,o=e.worldPointOnItem(0,0,n),a=(0,Kl.mo)(n),l=o.x-r.x,c=o.y-r.y;s.setAttribute("transform",`translate(${l},${c}) rotate(${a})`);const h=s.outerHTML;i.push({item:n,html:h})})),this.exportPictureModal.exportedItems=i,this.exportPictureModal.width=s.x-r.x,this.exportPictureModal.height=s.y-r.y,this.exportPictureModal.width>5&&(this.exportPictureModal.width=Math.round(this.exportPictureModal.width)),this.exportPictureModal.height>5&&(this.exportPictureModal.height=Math.round(this.exportPictureModal.height)),this.exportPictureModal.width<.001&&(this.exportPictureModal.width=20),this.exportPictureModal.height<.001&&(this.exportPictureModal.height=20),this.exportPictureModal.backgroundColor=e.scheme.style.backgroundColor,this.exportPictureModal.kind=n,this.exportPictureModal.shown=!0},calculateBoundingBoxOfAllSubItems(e,t){const n=[];return(0,mh.Hp)(t,(e=>{e.visible&&e.opacity>1e-4&&"dummy"!==e.shape&&e.selfOpacity>1e-4&&n.push(e)})),e.getBoundingBoxOfItems(n)},deleteSelectedItems(){this.schemeContainer.deleteSelectedItems(),_h.Z.emitSchemeChangeCommited()},itemCreationDraggedToSvgEditor(e,t,n){const i=this.mouseCoordsFromPageCoords(t,n),r=this.toLocalPoint(i.x,i.y);e.area.x=r.x,e.area.y=r.y,e.area.w=e.area.w/Math.max(1e-7,this.schemeContainer.screenTransform.scale),e.area.h=e.area.h/Math.max(1e-7,this.schemeContainer.screenTransform.scale);const s=e.area.w,o=e.area.h;if(this.schemeContainer.addItem(e),this.$store.state.autoRemount){const t=this.schemeContainer.findItemSuitableForParent(e,(t=>t.id!==e.id));t&&this.schemeContainer.remountItemInsideOtherItemAtTheBottom(e.id,t.id)}const a=(0,Kl.pD)(e);e.area.w=s/Math.max(1e-7,a.x),e.area.h=o/Math.max(1e-7,a.y),this.schemeContainer.selectItem(e),_h.Z.emitSchemeChangeCommited()},toLocalPoint(e,t){return{x:(e-this.schemeContainer.screenTransform.x)/this.schemeContainer.screenTransform.scale,y:(t-this.schemeContainer.screenTransform.y)/this.schemeContainer.screenTransform.scale}},onKeyUp(e,t){e!==ph.R.ESCAPE&&e!=ph.R.DELETE&&Rf[this.state].keyUp(e,t)},mouseWheel(e,t,n,i,r){Rf[this.state].mouseWheel(e,t,n,i,r)},mouseDown(e,t,n,i,r,s){Rf[this.state].mouseDown(e,t,n,i,r,s)},mouseUp(e,t,n,i,r,s){Rf[this.state].mouseUp(e,t,n,i,r,s)},mouseMove(e,t,n,i,r,s){Rf[this.state].mouseMove(e,t,n,i,r,s)},mouseDoubleClick(e,t,n,i,r,s){Rf[this.state].mouseDoubleClick(e,t,n,i,r,s)},mouseCoordsFromPageCoords(e,t){var n=document.getElementById("svg_plot").getBoundingClientRect(),i=e-n.left,r=t-n.top;return{x:Math.round(i),y:Math.round(r)}},deleteScheme(){const e=this.schemeContainer.scheme.projectLink;this.$store.state.apiClient.deleteScheme(this.schemeContainer.scheme.id).then((()=>{window.location=e||"/"}))},showDuplicateDiagramModal(){this.duplicateDiagramModal.name=this.schemeContainer.scheme.name+" Copy",this.duplicateDiagramModal.errorMessage=null,this.duplicateDiagramModal.shown=!0},duplicateDiagram(){const e=this.duplicateDiagramModal.name.trim();if(!e)return void(this.duplicateDiagramModal.errorMessage="Name should not be empty");const t=Uc.Z.clone(this.schemeContainer.scheme);t.id=null,t.name=e,this.submitNewSchemeForCreation(t).then((()=>{this.duplicateDiagramModal.shown=!1})).catch((e=>{this.duplicateDiagramModal.errorMessage="Oops, something went wrong."}))},updateFloatingHelperPanel(){if(!this.schemeContainer)return;if("dragItem"!==this.state||!Rf.dragItem.shouldAllowFloatingHelperPanel()||1!==this.schemeContainer.selectedItems.length||this.inPlaceTextEditor.shown)return void this.resetFloatingHelperPanel();const e=this.schemeContainer.selectedItems[0],t=[(0,Kl.rs)(0,0,e),(0,Kl.rs)(e.area.w,0,e),(0,Kl.rs)(e.area.w,e.area.h,e),(0,Kl.rs)(0,e.area.h,e)],n={x:t[0].x,y:t[0].y},i={x:t[0].x,y:t[0].y};t.forEach((e=>{n.x=Math.min(n.x,e.x),n.y=Math.min(n.y,e.y),i.x=Math.max(i.x,e.x),i.y=Math.max(i.y,e.y)}));const r={x:this._x(n.x),y:this._y(n.y)-115},s={x:this._x(i.x),y:this._y(i.y)+60},o=(r.x+s.x)/2,a=document.getElementById("svg_plot").getBoundingClientRect();if(o<0||o>a.width)return void this.resetFloatingHelperPanel();let l=r.y;l<5&&(l=s.y),l<5||l>a.height-40?this.resetFloatingHelperPanel():(this.floatingHelperPanel.x=o,this.floatingHelperPanel.y=l,this.floatingHelperPanel.item=e,this.floatingHelperPanel.shown=!0)},resetFloatingHelperPanel(){this.floatingHelperPanel.shown&&(this.floatingHelperPanel.shown=!1,this.floatingHelperPanel.item=null)},onBottomPanelMouseDown(e){dh(e).onDrag((e=>{this.bottomPanelHeight=uh.Z.clamp(window.innerHeight-e.pageY,100,window.innerHeight-100)})).build()},openExportAllShapesModal(){this.exportShapeModal.scheme=this.schemeContainer.scheme,this.exportShapeModal.shown=!0},hideSidePanelRight(){this.sidePanelRightWidth=0},showSidePanelRight(){this.sidePanelRightWidth=this.sidePanelRightWidthLastUsed},onRightSidePanelExpanderMouseDown(e){this.onSidePanelExpanderMouseDown(e,this.$refs.sidePanelRight,1,{onValue:e=>{this.sidePanelRightWidth=e,e>0&&(this.sidePanelRightWidthLastUsed=e)},onToggle:()=>{this.sidePanelRightWidth>0?this.sidePanelRightWidth=0:this.sidePanelRightWidth=this.sidePanelRightWidthLastUsed}})},onLeftSidePanelExpanderMouseDown(e){this.onSidePanelExpanderMouseDown(e,this.$refs.sidePanelLeft,-1,{onValue:e=>{this.sidePanelLeftWidth=e,e>0&&(this.sidePanelLeftWidthLastUsed=e)},onToggle:()=>{this.sidePanelLeftWidth>0?this.sidePanelLeftWidth=0:this.sidePanelLeftWidth=this.sidePanelLeftWidthLastUsed}})},onSidePanelExpanderMouseDown(e,t,n,i){const r=t.getBoundingClientRect().width,s=e.pageX;dh(e).onDrag((e=>{const t=e.pageX-s,o=uh.Z.clamp(r-t*n,0,window.innerWidth/2.5);o<80?i.onValue(0):i.onValue(o)})).onSimpleClick((()=>{i.onToggle()})).build()},_x(e){return e*this.schemeContainer.screenTransform.scale+this.schemeContainer.screenTransform.x},_y(e){return e*this.schemeContainer.screenTransform.scale+this.schemeContainer.screenTransform.y},_z(e){return e*this.schemeContainer.screenTransform.scale},x_(e){return e*this.schemeContainer.screenTransform.scale+this.schemeContainer.screenTransform.x},y_(e){return e*this.schemeContainer.screenTransform.scale+this.schemeContainer.screenTransform.y},z_(e){return e*this.schemeContainer.screenTransform.scale}},filters:{capitalize:e=>e.substring(0,1).toUpperCase()+e.substring(1,e.length)},watch:{mode(e){const t=this.hasher.decodeURLHash(window.location.hash);t.m=e,this.hasher.changeURLHash(t),"view"===e?this.switchToViewMode():this.switchToEditMode()},currentTab(e){this.saveSchemeSettings()},state(e){this.$store.dispatch("setEditorStateName",e),_h.Z.emitEditorStateChanged(this.state)}},computed:{currentSchemeContainer(){return"view"===this.mode?this.interactiveSchemeContainer:this.schemeContainer},schemeModified(){return this.$store.getters.schemeModified},connectorProposedDestination(){return this.$store.getters.connectorProposedDestination},statusMessage(){return this.$store.getters.statusMessage},editorStateName(){return this.$store.getters.editorStateName},animationEditorCurrentFramePlayer(){return this.$store.getters.animationEditorCurrentFramePlayer},commentsEntityId(){return this.scheme?this.scheme.id:"offline-scheme"},apiClient(){return this.$store.getters.apiClient},curveEditItem(){return this.$store.state.curveEditing.item},editorSubStateName(){return this.$store.getters.editorSubStateName}}},Hf=Uf,Vf=(0,Le.Z)(Hf,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scheme-editor-view"},[e.currentSchemeContainer?n("quick-helper-panel",{key:"quick-helper-panel-"+e.mode,attrs:{"scheme-container":e.currentSchemeContainer,mode:e.mode,textSelectionEnabled:e.textSelectionEnabled,zoom:e.zoom,"edit-allowed":e.offlineMode||e.editAllowed,"is-static-editor":e.isStaticEditor,"is-offline-editor":e.isOfflineEditor,menuOptions:e.menuOptions},on:{"shape-prop-changed":e.onItemShapePropChanged,"text-style-prop-change":e.onItemGenericTextSlotPropChanged,"clicked-zoom-to-selection":function(t){return e.zoomToSelection()},"clicked-undo":function(t){return e.historyUndo()},"clicked-redo":function(t){return e.historyRedo()},"clicked-bring-to-front":function(t){return e.bringSelectedItemsToFront()},"clicked-bring-to-back":function(t){return e.bringSelectedItemsToBack()},"convert-path-points-to-simple":function(t){return e.convertCurvePointToSimple()},"convert-path-points-to-bezier":function(t){return e.convertCurvePointToBezier()},"import-json-requested":e.onImportSchemeJSONClicked,"export-json-requested":e.exportAsJSON,"export-svg-requested":e.exportAsSVG,"export-png-requested":e.exportAsPNG,"export-html-requested":function(t){e.exportHTMLModalShown=!0},"export-link-requested":e.exportAsLink,"apply-patch-requested":e.triggerApplyPatchUpload,"duplicate-diagram-requested":function(t){return e.showDuplicateDiagramModal()},"delete-diagram-requested":function(t){e.deleteSchemeWarningShown=!0},"zoom-changed":e.onZoomChanged,"zoomed-to-items":e.zoomToItems,"new-scheme-requested":e.onNewSchemeRequested,"mode-changed":e.toggleMode,"text-selection-changed":e.onTextSelectionForViewChanged}},["edit"===e.mode&&(e.schemeModified||e.statusMessage.message)?n("ul",{staticClass:"button-group"},[e.schemeModified?n("li",[e.isSaving?n("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.onSaveSchemeClick()}}},[n("i",{staticClass:"fas fa-spinner fa-spin"}),e._v("Saving...")]):n("span",{staticClass:"btn btn-primary",on:{click:function(t){return e.onSaveSchemeClick()}}},[e._v("Save")])]):e._e(),e._v(" "),e.statusMessage.message?n("li",[n("div",{staticClass:"msg",class:{"msg-error":e.statusMessage.isError,"msg-info":!e.statusMessage.isError}},[e._v("\n                    "+e._s(e.statusMessage.message)+"\n                    "),n("span",{staticClass:"msg-close",on:{click:e.clearStatusMessage}},[n("i",{staticClass:"fas fa-times"})])])]):e._e()]):e._e()]):e._e(),e._v(" "),n("div",{ref:"middleSection",staticClass:"scheme-editor-middle-section"},[!e.schemeContainer&&e.schemeLoadErrorMessage?n("div",{staticClass:"scheme-error-message"},[n("h3",[e._v(e._s(e.schemeLoadErrorMessage))])]):e._e(),e._v(" "),e.schemeContainer?n("div",{staticClass:"scheme-container",attrs:{oncontextmenu:"return false;"}},[e.schemeContainer&&"edit"===e.mode?n("SvgEditor",{key:e.schemeContainer.scheme.id+"-edit-"+e.editorRevision,class:["state-"+e.state,"sub-state-"+e.editorSubStateName],attrs:{schemeContainer:e.schemeContainer,patchIndex:e.patchIndex,mode:e.mode,offline:e.offlineMode,zoom:e.zoom,stateLayerShown:"draw"===e.state||"createItem"===e.state},on:{"mouse-wheel":e.mouseWheel,"mouse-move":e.mouseMove,"mouse-down":e.mouseDown,"mouse-up":e.mouseUp,"mouse-double-click":e.mouseDoubleClick,"svg-size-updated":e.onSvgSizeUpdated}},[n("g",{attrs:{slot:"scene-transform"},slot:"scene-transform"},[e.schemeContainer.multiItemEditBox&&"editPath"!==e.state&&"cropImage"!==e.state&&!e.inPlaceTextEditor.shown?n("MultiItemEditBox",{key:"multi-item-edit-box-"+e.schemeContainer.multiItemEditBox.id,attrs:{"edit-box":e.schemeContainer.multiItemEditBox,zoom:e.schemeContainer.screenTransform.scale,boundaryBoxColor:e.schemeContainer.scheme.style.boundaryBoxColor,controlPointsColor:e.schemeContainer.scheme.style.controlPointsColor}}):e._e(),e._v(" "),"cropImage"===e.state&&e.cropImage.editBox?n("MultiItemEditBox",{key:"crop-image-edit-box",attrs:{"edit-box":e.cropImage.editBox,kind:"crop-image",zoom:e.schemeContainer.screenTransform.scale,boundaryBoxColor:e.schemeContainer.scheme.style.boundaryBoxColor,controlPointsColor:e.schemeContainer.scheme.style.controlPointsColor}}):e._e(),e._v(" "),"editPath"===e.state&&e.curveEditItem&&e.curveEditItem.meta?n("g",[n("PathEditBox",{key:"item-curve-edit-box-"+e.curveEditItem.id,attrs:{item:e.curveEditItem,zoom:e.schemeContainer.screenTransform.scale,"boundary-box-color":e.schemeContainer.scheme.style.boundaryBoxColor,"control-points-color":e.schemeContainer.scheme.style.controlPointsColor}})],1):e._e()],1),e._v(" "),n("div",{attrs:{slot:"overlay"},slot:"overlay"},["pickElement"===e.state?n("div",{staticClass:"editor-top-hint-label"},[e._v("Click any element to pick it")]):e._e(),e._v(" "),e.floatingHelperPanel.shown&&e.floatingHelperPanel.item?n("FloatingHelperPanel",{key:"floating-helper-panel-"+e.floatingHelperPanel.item.id,attrs:{x:e.floatingHelperPanel.x,y:e.floatingHelperPanel.y,item:e.floatingHelperPanel.item,schemeContainer:e.schemeContainer}}):e._e()],1)]):e._e(),e._v(" "),e.interactiveSchemeContainer&&"view"===e.mode?n("SvgEditor",{key:e.schemeContainer.scheme.id+"-view-"+e.editorRevision,attrs:{schemeContainer:e.interactiveSchemeContainer,patchIndex:e.patchIndex,mode:e.mode,textSelectionEnabled:e.textSelectionEnabled,offline:e.offlineMode,zoom:e.zoom,userEventBus:e.userEventBus},on:{"mouse-wheel":e.mouseWheel,"mouse-move":e.mouseMove,"mouse-down":e.mouseDown,"mouse-up":e.mouseUp,"mouse-double-click":e.mouseDoubleClick,"svg-size-updated":e.onSvgSizeUpdated}},[n("div",{attrs:{slot:"overlay"},slot:"overlay"},["view"===e.mode&&e.textSelectionEnabled?n("div",{staticClass:"editor-top-hint-label"},[e._v("\n                        You can select any text, but you cannot interact with items\n                        "),n("span",{staticClass:"btn btn-primary",on:{click:function(t){e.textSelectionEnabled=!1}}},[e._v("Cancel")])]):e._e()])]):e._e(),e._v(" "),e.inPlaceTextEditor.shown?n("InPlaceTextEditBox",{key:"in-place-text-edit-"+e.inPlaceTextEditor.item.id+"-"+e.inPlaceTextEditor.slotName,attrs:{item:e.inPlaceTextEditor.item,slotName:e.inPlaceTextEditor.slotName,area:e.inPlaceTextEditor.area,"css-style":e.inPlaceTextEditor.style,text:e.inPlaceTextEditor.text,"markup-disabled":e.inPlaceTextEditor.markupDisabled,"creating-new-item":e.inPlaceTextEditor.creatingNewItem,scalingVector:e.inPlaceTextEditor.scalingVector,zoom:e.schemeContainer.screenTransform.scale},on:{close:e.closeItemTextEditor,updated:e.onInPlaceTextEditorUpdate,"item-renamed":e.onInPlaceTextEditorItemRenamed,"item-area-changed":e.onInPlaceTextEditorItemAreaChanged,"item-text-cleared":e.onInPlaceTextEditorItemTextCleared}}):e._e()],1):e._e(),e._v(" "),"edit"===e.mode&&(e.animatorPanel.framePlayer||e.animationEditorCurrentFramePlayer)?n("div",{staticClass:"bottom-panel",style:{height:e.animationEditorCurrentFramePlayer?e.bottomPanelHeight+"px":null}},[e.animationEditorCurrentFramePlayer?n("div",{staticClass:"bottom-panel-dragger",on:{mousedown:e.onBottomPanelMouseDown}}):e._e(),e._v(" "),n("div",{staticClass:"bottom-panel-body"},[n("div",{staticClass:"side-panel-filler-left",style:{width:e.sidePanelLeftWidth+"px"}}),e._v(" "),n("div",{staticClass:"bottom-panel-content"},[e.animationEditorCurrentFramePlayer?n("FrameAnimatorPanel",{key:e.animationEditorCurrentFramePlayer.id,attrs:{schemeContainer:e.schemeContainer,framePlayer:e.animationEditorCurrentFramePlayer,light:!1},on:{close:e.closeAnimatorEditor}}):e.animatorPanel.framePlayer?n("FrameAnimatorPanel",{key:e.animatorPanel.framePlayer.id,attrs:{schemeContainer:e.schemeContainer,framePlayer:e.animatorPanel.framePlayer,light:!0},on:{"animation-editor-opened":e.onAnimatiorEditorOpened}}):e._e()],1),e._v(" "),n("div",{staticClass:"side-panel-filler-right",style:{width:e.sidePanelRightWidth+"px"}})])]):e._e(),e._v(" "),"edit"===e.mode&&e.schemeContainer?n("div",{ref:"sidePanelLeft",staticClass:"side-panel side-panel-left",style:{width:e.sidePanelLeftWidth+"px"}},[n("span",{staticClass:"side-panel-expander",on:{mousedown:e.onLeftSidePanelExpanderMouseDown}},[e.sidePanelLeftWidth>0?n("i",{staticClass:"fas fa-angle-left"}):n("i",{staticClass:"fas fa-angle-right"})]),e._v(" "),e.sidePanelLeftWidth>0?n("div",{staticClass:"side-panel-overflow"},[n("div",{staticClass:"wrapper"},[n("create-item-menu",{attrs:{"scheme-container":e.schemeContainer,projectArtEnabled:e.projectArtEnabled}})],1)]):e._e()]):e._e(),e._v(" "),e.schemeContainer?n("div",{ref:"sidePanelRight",staticClass:"side-panel side-panel-right",style:{width:e.sidePanelRightWidth+"px"}},[n("span",{staticClass:"side-panel-expander",on:{mousedown:e.onRightSidePanelExpanderMouseDown}},[e.sidePanelRightWidth>0?n("i",{staticClass:"fas fa-angle-right"}):n("i",{staticClass:"fas fa-angle-left"})]),e._v(" "),e.sidePanelRightWidth>0?n("div",{staticClass:"side-panel-overflow"},[e.inPlaceTextEditor.item?n("ul",{staticClass:"tabs text-nonselectable"},[e._m(0)]):"draw"===e.editorStateName?n("ul",{staticClass:"tabs text-nonselectable"},[e._m(1)]):n("ul",{staticClass:"tabs"},[e._l(e.tabs,(function(t){return n("li",[n("span",{staticClass:"tab",class:{active:e.currentTab===t},on:{click:function(n){e.currentTab=t}}},[e._v(e._s(t))])])})),e._v(" "),e.comments&&e.comments.enabled?n("li",[n("span",{staticClass:"tab",class:{active:"Comments"===e.currentTab},on:{click:function(t){e.currentTab="Comments"}}},[n("i",{staticClass:"fas fa-comment-alt"}),e._v(" "+e._s(e.comments.counter))])]):e._e(),e._v(" "),e._l(e.itemTextSlotsAvailable,(function(t){return"edit"===e.mode?n("li",[n("span",{staticClass:"tab",class:{active:e.currentTab===t.tabName},on:{click:function(n){e.currentTab=t.tabName}}},[e._v(" "+e._s(t.slotName))])]):e._e()}))],2),e._v(" "),"draw"===e.editorStateName?n("div",{staticClass:"tabs-body"},e._l(e.drawColorPallete,(function(t){return n("div",{staticClass:"draw-color-pallete-option",style:{background:t},on:{click:function(n){return e.onDrawColorPicked(t)}}})})),0):n("div",{staticClass:"tabs-body"},["Doc"===e.currentTab&&e.schemeContainer&&!e.inPlaceTextEditor.item?n("div",["edit"===e.mode?n("scheme-properties",{attrs:{"scheme-container":e.schemeContainer},on:{"clicked-advanced-behavior-editor":function(t){e.advancedBehaviorProperties.shown=!0},"export-all-shapes":e.openExportAllShapesModal,"delete-diagram-requested":function(t){e.deleteSchemeWarningShown=!0}}}):n("scheme-details",{attrs:{scheme:e.schemeContainer.scheme}})],1):e._e(),e._v(" "),"Item"!==e.currentTab||e.inPlaceTextEditor.item?e._e():n("div",["edit"===e.mode?n("div",[n("panel",{attrs:{name:"Items"}},[n("item-selector",{key:e.schemeRevision+"-"+e.schemeContainer.revision,attrs:{"scheme-container":e.schemeContainer,"min-height":200}})],1),e._v(" "),e.schemeContainer.selectedItems.length>0?n("item-properties",{key:e.schemeRevision+"-"+e.schemeContainer.selectedItems[0].id+"-"+e.schemeContainer.selectedItems[0].shape,attrs:{item:e.schemeContainer.selectedItems[0],revision:e.schemeRevision,schemeContainer:e.schemeContainer,userStylesEnabled:e.userStylesEnabled},on:{"shape-prop-changed":e.onItemShapePropChanged,"item-field-changed":e.onItemFieldChanged,"item-style-applied":e.onItemStyleApplied,"shape-changed":e.onItemShapeChanged,"clicked-advanced-behavior-editor":function(t){e.advancedBehaviorProperties.shown=!0}}}):e._e()],1):e._e(),e._v(" "),e.sidePanelItemForViewMode&&"view"===e.mode?n("item-details",{attrs:{item:e.sidePanelItemForViewMode}}):e._e()],1),e._v(" "),"Comments"===e.currentTab&&e.comments&&e.comments.enabled?n("div",[n("Comments",{attrs:{entityId:e.commentsEntityId,comments:e.comments}})],1):e._e(),e._v(" "),e.inPlaceTextEditor.item&&"edit"===e.mode?n("div",[n("text-slot-properties",{attrs:{item:e.inPlaceTextEditor.item,"slot-name":e.inPlaceTextEditor.slotName},on:{"moved-to-slot":function(t){return e.onTextSlotMoved(e.inPlaceTextEditor.item,e.inPlaceTextEditor.slotName,arguments[0])},"property-changed":function(t){return e.onInPlaceEditTextPropertyChanged(e.inPlaceTextEditor.item,e.inPlaceTextEditor.slotName,arguments[0],arguments[1])}}})],1):"edit"===e.mode?n("div",e._l(e.itemTextSlotsAvailable,(function(t){return e.currentTab===t.tabName?n("text-slot-properties",{key:"text-slot-"+t.item.id+"-"+t.slotName,attrs:{item:t.item,"slot-name":t.slotName},on:{"moved-to-slot":function(n){return e.onTextSlotMoved(t.item,t.slotName,arguments[0])},"property-changed":function(n){return e.onTextPropertyChanged(t.slotName,arguments[0],arguments[1])}}}):e._e()})),1):e._e()])]):e._e()]):e._e()]),e._v(" "),e.customContextMenu.show?n("context-menu",{key:e.customContextMenu.id,attrs:{"mouse-x":e.customContextMenu.mouseX,"mouse-y":e.customContextMenu.mouseY,options:e.customContextMenu.menuOptions},on:{close:function(t){e.customContextMenu.show=!1},selected:e.onCustomContextMenuOptionSelected}}):e._e(),e._v(" "),e.exportHTMLModalShown?n("export-html-modal",{attrs:{scheme:e.schemeContainer.scheme},on:{close:function(t){e.exportHTMLModalShown=!1}}}):e._e(),e._v(" "),e.exportJSONModalShown?n("export-json-modal",{attrs:{scheme:e.schemeContainer.scheme},on:{close:function(t){e.exportJSONModalShown=!1}}}):e._e(),e._v(" "),e.exportAsLinkModalShown?n("export-as-link-modal",{attrs:{scheme:e.schemeContainer.scheme},on:{close:function(t){e.exportAsLinkModalShown=!1}}}):e._e(),e._v(" "),e.importSchemeModal.shown?n("import-scheme-modal",{attrs:{scheme:e.importSchemeModal.scheme},on:{close:function(t){e.importSchemeModal.shown=!1},"import-scheme-submitted":e.importScheme}}):e._e(),e._v(" "),e.newSchemePopup.show?n("create-new-scheme-modal",{attrs:{name:e.newSchemePopup.name,description:e.newSchemePopup.description,apiClient:e.apiClient},on:{close:function(t){e.newSchemePopup.show=!1},"scheme-submitted":e.submitNewSchemeForCreation}}):e._e(),e._v(" "),e.addLinkPopup.shown?n("link-edit-popup",{attrs:{edit:!1,title:"",url:"",type:""},on:{"submit-link":e.onItemLinkSubmit,close:function(t){e.addLinkPopup.shown=!1}}}):e._e(),e._v(" "),e.itemTooltip.shown?n("item-tooltip",{attrs:{item:e.itemTooltip.item,x:e.itemTooltip.x,y:e.itemTooltip.y},on:{close:function(t){e.itemTooltip.shown=!1}}}):e._e(),e._v(" "),e.connectorProposedDestination&&e.connectorProposedDestination.shown?n("connector-destination-proposal",{attrs:{x:e.connectorProposedDestination.mx,y:e.connectorProposedDestination.my,"connector-item-id":e.connectorProposedDestination.connectorItemId,"scheme-container":e.schemeContainer},on:{"item-selected":e.onConnectorDestinationItemSelected,close:function(t){return e.closeConnectorProposedDestination()}}}):e._e(),e._v(" "),e.importSchemeFileShown?n("div",{staticStyle:{display:"none"}},[n("input",{ref:"importSchemeFileInput",attrs:{type:"file",accept:"application/json"},on:{change:e.onImportSchemeFileInputChanged}})]):e._e(),e._v(" "),e.loadPatchFileShown?n("div",{staticStyle:{display:"none"}},[n("input",{ref:"loadPatchFileInput",attrs:{type:"file",accept:"application/json"},on:{change:e.onLoadPatchFileInputChanged}})]):e._e(),e._v(" "),e.advancedBehaviorProperties.shown?n("advanced-behavior-properties",{attrs:{"scheme-container":e.schemeContainer},on:{close:function(t){e.advancedBehaviorProperties.shown=!1}}}):e._e(),e._v(" "),e.exportShapeModal.shown?n("shape-exporter-modal",{attrs:{scheme:e.exportShapeModal.scheme},on:{close:function(t){e.exportShapeModal.shown=!1}}}):e._e(),e._v(" "),e.duplicateDiagramModal.shown?n("modal",{attrs:{title:"Duplicate diagram",primaryButton:"Create copy"},on:{close:function(t){e.duplicateDiagramModal.shown=!1},"primary-submit":function(t){return e.duplicateDiagram()}}},[n("p",[e._v("\n            Duplicate current diagram in a new file\n        ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.duplicateDiagramModal.name,expression:"duplicateDiagramModal.name"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Name"},domProps:{value:e.duplicateDiagramModal.name},on:{input:function(t){t.target.composing||e.$set(e.duplicateDiagramModal,"name",t.target.value)}}}),e._v(" "),e.duplicateDiagramModal.errorMessage?n("div",{staticClass:"msg msg-danger"},[e._v("\n            "+e._s(e.duplicateDiagramModal.errorMessage)+"\n        ")]):e._e()]):e._e(),e._v(" "),e.deleteSchemeWarningShown?n("modal",{attrs:{title:"Delete diagram",primaryButton:"Delete"},on:{close:function(t){e.deleteSchemeWarningShown=!1},"primary-submit":function(t){return e.deleteScheme()}}},[e._v("\n        Are you sure you want to delete "),n("b",[e._v(e._s(e.schemeContainer.scheme.name))]),e._v(" scheme?\n    ")]):e._e(),e._v(" "),e.isLoading?n("modal",{attrs:{width:380,"show-header":!1,"show-footer":!1,"use-mask":!1}},[n("div",{staticClass:"scheme-loading-icon"},["load"===e.loadingStep?n("div",[n("i",{staticClass:"fas fa-spinner fa-spin fa-1x"}),e._v(" "),n("span",[e._v("Loading scheme...")])]):e._e(),e._v(" "),"load-shapes"===e.loadingStep?n("div",[n("i",{staticClass:"fas fa-spinner fa-spin fa-1x"}),e._v(" "),n("span",[e._v("Loading shapes...")])]):e._e(),e._v(" "),"img-preload"===e.loadingStep?n("div",[n("i",{staticClass:"fas fa-spinner fa-spin fa-1x"}),e._v(" "),n("span",[e._v("Preloading all images...  ")]),e._v(" "),n("span",{staticClass:"btn btn-secondary",on:{click:function(t){e.isLoading=!1}}},[e._v("Skip")])]):e._e()])]):e._e(),e._v(" "),e.exportPictureModal.shown?n("export-picture-modal",{attrs:{"exported-items":e.exportPictureModal.exportedItems,kind:e.exportPictureModal.kind,width:e.exportPictureModal.width,height:e.exportPictureModal.height,"background-color":e.exportPictureModal.backgroundColor},on:{close:function(t){e.exportPictureModal.shown=!1}}}):e._e()],1)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("span",{staticClass:"tab active"},[e._v("Text")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("span",{staticClass:"tab active"},[e._v("Draw")])])}],!1,null,null,null).exports,qf=[{name:"items",op:"patch-id-array",childrenField:"childItems",fields:[{names:["area","name","opacity","selfOpacity","visible","blendMode","cursor","shape","clip","interactionMode"],op:"replace"},{name:"description",op:"patch-text"},{name:"shapeProps",op:"modify",fields:[{op:"replace"}]},{names:["tags"],op:"patch-set"},{name:"textSlots",op:"modify",fields:[{op:"modify",fields:[{name:"text",op:"patch-text"},{op:"replace"}]}]},{name:"behavior",op:"modify",fields:[{name:"events",op:"patch-id-array",childrenField:null,fields:[{name:"event",op:"replace"},{name:"actions",op:"patch-id-array",childrenField:null,fields:[{names:["element","method"],op:"replace"},{name:"args",op:"modify",fields:[{op:"replace"}]}]}]}]},{name:"links",op:"patch-id-array",childrenField:null,fields:[{names:["title","url","type"],op:"replace"}]},{name:"effects",op:"patch-id-array",childrenField:null,fields:[{names:["effect","name"],op:"replace"},{name:"args",op:"modify",fields:[{op:"replace"}]}]}]},{name:"name",op:"replace"},{name:"description",op:"patch-text"},{name:"settings",op:"modify",fields:[{name:"screen",op:"modify",fields:[{op:"replace"}]}]},{name:"style",op:"modify",fields:[{op:"replace"}]},{name:"tags",op:"patch-set"}];class Gf{constructor(e,t){this.name=e,this.fieldEntry=t,this.fields=new Map,this.defaultField=null}indexFieldEntry(e,t){const n=new Gf(e,t);e?this.fields.set(e,n):this.defaultField=n,t.fields&&n.indexFieldEntries(t.fields)}indexFieldEntries(e){ze()(e,(e=>{e.names?ze()(e.names,(t=>{this.indexFieldEntry(t,e)})):this.indexFieldEntry(e.name,e)}))}findRelevantFieldEntry(e){return 0===e.length||1===e.length&&this.name===e[0]?this.fieldEntry:this.fields.has(e[0])?this.fields.get(e[0]).findRelevantFieldEntry(e.slice(1)):this.defaultField?this.defaultField.findRelevantFieldEntry(e.slice(1)):null}}function Wf(e,t,n){Kf(e,t,null,n)}function Kf(e,t,n,i){let r=null;ze()(e,((e,s)=>{i(e,n,r,s),t&&e[t]&&Kf(e[t],t,e,i),r=e}))}function Jf(e,t){return Uc.Z.equals(e,t)}function Yf(e,t){const n=new Map;return Wf(e,t,((e,t,i,r)=>{let s=null;t&&(s=t.id),n.set(e.id,{id:e.id,item:e,parentId:s,previousId:i?i.id:null,sortOrder:r})})),n}function Qf(e,t,n,i){let r=[];const s=new Set;ze()(e,((e,t)=>s.add(t))),ze()(t,((e,t)=>s.add(t)));const o=new Map;let a=null;ze()(n,(e=>{e.name?o.set(e.name,e):e.names?ze()(e.names,(t=>o.set(t,e))):a||(a=e)}));const l=(n,o)=>{if("replace"===n.op)Jf(e[o],t[o])||r.push({path:i.concat([o]),op:"replace",value:Uc.Z.clone(t[o])});else if("patch-text"===n.op)Jf(e[o],t[o])||r.push({path:i.concat([o]),op:"patch-text",patch:sg(e[o],t[o])});else if("modify"===n.op&&e[o]&&t[o])r=r.concat(Qf(e[o],t[o],n.fields,i.concat([o])));else if("patch-set"===n.op){const n=function(e,t){const n=[],i=new Set,r=new Set;return ze()(e,(e=>i.add(e))),ze()(t,(e=>{i.has(e)||n.push({op:"add",value:e}),r.add(e)})),ze()(e,(e=>{r.has(e)||n.push({op:"delete",value:e})})),n}(e[o],t[o]);n&&n.length>0&&r.push({path:i.concat([o]),op:"patch-set",changes:n})}else if("patch-id-array"===n.op){const s=function(e,t,n){e||(e=[]),t||(t=[]);const i=Yf(e,n.childrenField),r=Yf(t,n.childrenField),s=new Map,o=(e,t)=>{s.has(e)||s.set(e,[]),s.get(e).push(t)},a=e=>{const t={};for(let i in e)e.hasOwnProperty(i)&&i!==n.childrenField&&(t[i]=e[i]);return t},l=new Map;r.forEach(((e,t)=>{const n=i.get(t);n&&n.parentId===e.parentId||(l.has(e.parentId)||l.set(e.parentId,[]),l.get(e.parentId).push(e),n?(o(e.parentId,{id:t,op:"mount",parentId:e.parentId,sortOrder:e.sortOrder}),o(n.parentId,{id:t,op:"demount",parentId:n.parentId,sortOrder:n.sortOrder})):o(e.parentId,{id:t,op:"add",value:a(e.item),parentId:e.parentId,sortOrder:e.sortOrder}))}));const c=(e,t)=>{const s=[];for(let t=0;t<e.length;t++){const a=e[t],l=i.get(a.id);if(r.has(a.id)){const e=r.get(a.id);if(e.parentId===l.parentId){s.push(l);const t=Qf(a,e.item,n.fields,[]);t.length>0&&o(a.parentId,{id:a.id,op:"modify",changes:t})}}else{const e=i.get(a.id);o(e.parentId,{id:a.id,op:"delete",parentId:e.parentId,sortOrder:e.sortOrder})}n.childrenField&&a[n.childrenField]&&c(a[n.childrenField],a.id)}const a=l.get(t);a&&ze()(a,(e=>{s.splice(Math.min(e.sortOrder,s.length),0,e)}));const h=[];for(let e=0;e<s.length;e++){const t=s[e];t.previousId=e>0?s[e-1].item.id:null,t.sortOrder=e;const n=r.get(t.id);t.newSortOrder=n.sortOrder,t.newParentId=n.parentId,(t.previousId!==n.previousId&&t.sortOrder!=t.newSortOrder||t.parentId!==t.newParentId)&&h.push(t)}h.sort(((e,t)=>e.newSortOrder-t.newSortOrder));for(let e=h.length-1;e>0;e--)h[e].sortOrder===h[e-1].newSortOrder&&h[e].newSortOrder===h[e].sortOrder+1&&h[e].parentId===h[e].newParentId&&h.splice(e,1);ze()(h,(e=>{o(e.parentId,{id:e.id,op:"reorder",parentId:e.newParentId,sortOrder:e.newSortOrder})}))};c(e,null);let h=[];return s.forEach((e=>{e.sort(((e,t)=>"modify"===e.op?2:e.sortOrder<t.sortOrder?-1:1)),e.forEach((e=>{"demount"===e.op?delete e.sortOrder:"delete"===e.op&&(delete e.sortOrder,delete e.parentId),!n.childrenField&&e.hasOwnProperty("parentId")&&delete e.parentId})),h=h.concat(e)})),h}(e[o],t[o],n);s&&s.length>0&&r.push({path:i.concat([o]),op:"patch-id-array",changes:s})}s.delete(o)};return o.forEach(((e,t)=>l(e,t))),a&&s.forEach((e=>{l(a,e)})),r}function Xf(e,t){return function(e,t,n){return{version:"1",protocol:"schemio/patch",changes:Qf(e,t,n,[])}}(e,t,qf)}function eg(e,t,n,i){switch(t.op){case"replace":Uc.Z.setObjectProperty(e,t.path,t.value);break;case"patch-text":const r=Uc.Z.getObjectProperty(e,t.path);Uc.Z.setObjectProperty(e,t.path,function(e,t){let n=e;if(t.delete.length>0){const i=[];let r=0,s=0;for(;r<e.length&&s<t.delete.length;){if(t.delete[s][0]===r){if(r+=t.delete[s][1]-1,s++,s>=t.delete.length)break}else i.push(e[r]);r++}n=i.join(""),r<e.length&&(n+=e.substring(r+1))}return t.add.length>0&&ze()(t.add,(e=>{const t=e[0],i=e[1];n=n.substring(0,t)+i+n.substring(t)})),n}(r,t.patch));break;case"patch-set":!function(e,t){let n=Uc.Z.getObjectProperty(e,t.path);if(!Array.isArray(n))return;const i=new Set(n);ze()(t.changes,(e=>{"delete"===e.op?i.delete(e.value):"add"===e.op&&i.add(e.value)})),n=[],i.forEach((e=>n.push(e))),Uc.Z.setObjectProperty(e,t.path,n)}(e,t);break;case"patch-id-array":!function(e,t,n,i){const r=Uc.Z.getObjectProperty(e,t.path);Array.isArray(r)||(r=[],Uc.Z.setObjectProperty(e,t.path,r));const s=i.findRelevantFieldEntry(n);let o=null;s&&s.childrenField&&(o=s.childrenField);const a=new Map;Wf(r,o,(e=>{a.set(e.id,e)})),ze()(t.changes,(e=>{switch(e.op){case"modify":tg.modify(a,r,e,n,i,s);break;case"reorder":tg.reorder(a,r,e,n,i,s);break;case"delete":tg.delete(a,r,e,n,i,s);break;case"add":tg.add(a,r,e,n,i,s);break;case"mount":tg.mount(a,r,e,n,i,s);break;case"demount":tg.demount(a,r,e,n,i,s)}}))}(e,t,n.concat(t.path),i)}}const tg={modify(e,t,n,i,r,s){const o=e.get(n.id);o&&ze()(n.changes,(e=>{eg(o,e,i,r)}))},reorder(e,t,n,i,r,s){const o=tg.findParentItem(e,t,n.parentId,s);if(!Array.isArray(o))return;const a=tg.findItemIndexInParrent(o,n.id);if(a>=0){const e=o[a];o.splice(a,1),o.splice(Math.min(n.sortOrder,o.length),0,e)}},delete(e,t,n,i,r,s){tg.demount(e,t,n),e.delete(n.id)},demount(e,t,n,i,r,s){const o=tg.findParentItem(e,t,n.parentId,s);if(!Array.isArray(o))return;const a=tg.findItemIndexInParrent(o,n.id);a>=0&&o.splice(a,1)},mount(e,t,n,i,r,s){if(!e.has(n.id))return;const o=e.get(n.id),a=tg.findParentItem(e,t,n.parentId,s);Array.isArray(a)&&a.splice(Math.min(n.sortOrder,a.length),0,o)},add(e,t,n,i,r,s){let o=t;n.parentId&&(o=tg.findParentItem(e,t,n.parentId,s)),Array.isArray(o)&&(e.set(n.id,n.value),o.splice(Math.min(n.sortOrder,o.length),0,n.value))},findParentItem(e,t,n,i){if(n){if(i&&i.childrenField&&e.has(n)){const t=e.get(n);return t[i.childrenField]||(t[i.childrenField]=[]),t[i.childrenField]}return null}return t},findItemIndexInParrent(e,t){let n=-1;for(let i=0;i<e.length&&n<0;i++)e[i].id===t&&(n=i);return n}};function ng(e){const t={document:{fieldChanges:0,fields:[]},items:{added:{count:0,items:[]},deleted:{count:0,items:[]},modified:{count:0,items:[]}}},n=new Map,i=new Set,r=(e,s,o,a)=>{if(a||(a=[]),"modified"===s){if(o.changes&&o.changes.length>0)ze()(o.changes,(t=>{let n=a;t.path?n=n.concat(t.path):t.id&&(n=n.concat(t.id)),r(e,s,t,n)}));else{const r=a.join("."),o=`${e}.${r}`;if(!i.has(o)){if(i.add(o),!n.has(e)){const i={id:e,fields:[]};n.set(e,i),t.items.modified.items.push(i)}r&&n.get(e).fields.push(r),t.items[s].count+=1}}n.get(e)}else t.items[s].count+=1,t.items[s].items.push(e)};return ze()(e.changes,(e=>{"items"===e.path[0]?ze()(e.changes,(e=>{switch(e.op){case"add":r(e.id,"added");break;case"delete":r(e.id,"deleted");break;default:r(e.id,"modified",e)}})):(t.document.fieldChanges+=1,t.document.fields.push(e.path.join(".")))})),t}function ig(e,t,n,i,r){const s=`${n}-${i}`;if(r.has(s))return r.get(s);if(n<0||i<0)return"";if(e[n]===t[i]){const o=ig(e,t,n-1,i-1,r)+e[n];return r.set(s,o),o}{const s=ig(e,t,n-1,i,r);r.set(`${n-1}-${i}`,s);const o=ig(e,t,n,i-1,r);return r.set(`${n}-${i-1}`,o),s.length>o.length?s:o}}function rg(e,t){return ig(e,t,e.length-1,t.length-1,new Map)}function sg(e,t){const n=rg(e,t),i=[];let r=null,s=0,o=0;for(;s<e.length&&o<n.length;)e[s]!==n[o]?r?r[1]+=1:(r=[s,1],i.push(r)):(r=null,o++),s++;s<e.length&&i.push([s,e.length-s]);const a=[];for(s=0,o=0;s<t.length&&o<n.length;)t[s]!==n[o]?r?r[1]+=t[s]:(r=[s,t[s]],a.push(r)):(r=null,o++),s++;return s<t.length&&a.push([s,t.substr(s)]),{delete:i,add:a}}function og(e,t,n){const i=t.split(".");if(!("shapeProps"===i[0]&&i.length>1))return"textSlots"===i[0]&&i.length>2?`Text / ${i[1]} / ${(0,mh.Kp)(i[2])}`:i[0];{const t=n.findItemById(e);if(!t)return null;const r=Wl.Z.find(t.shape);if(!r)return null;const s=Wl.Z.getShapePropDescriptor(r,i[1]);if(s)return s.name}return null}const ag={props:["patch","originSchemeContainer","modifiedSchemeContainer"],beforeMount(){this.stats=function(e,t,n){ze()(e.items.modified.items,(e=>{e.collapsed=!0;const i=t.findItemById(e.id);i&&(e.name=i.name);const r=new Set;ze()(e.fields,(i=>{let s=og(e.id,i,n);s||(s=og(e.id,i,t)),s?r.add(s):r.add(i)})),e.fields=Array.from(r)}));const i=(e,t)=>Ke()(e,(e=>{const n=t.findItemById(e);return n?{id:e,name:n.name}:{id:e,name:"Unknown item"}}));return e.items.added.items=i(e.items.added.items,n),e.items.deleted.items=i(e.items.deleted.items,t),e}(ng(this.patch),this.originSchemeContainer,this.modifiedSchemeContainer)},data:()=>({stats:null,addedItemsCollapsed:!0,deletedItemsCollapsed:!0,modifiedItemsCollapsed:!0})},lg=(0,Le.Z)(ag,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"ctrl-label"},[e._v("Origin Doc")]),e._v("\n    "+e._s(e.originSchemeContainer.scheme.name)+"\n\n    "),n("div",{staticClass:"ctrl-label"},[e._v("Changes")]),e._v(" "),n("div",{staticClass:"patch-label"},[e._v("\n        Total modified fields: "),n("span",[e._v(e._s(e.stats.document.fieldChanges+e.stats.items.modified.count))])]),e._v(" "),n("div",{staticClass:"patch-additions section"},[n("div",{staticClass:"patch-label clickable",on:{click:function(t){e.addedItemsCollapsed=!e.addedItemsCollapsed}}},[n("span",{staticClass:"patch-expander"},[e.addedItemsCollapsed?n("i",{staticClass:"fas fa-caret-right"}):n("i",{staticClass:"fas fa-caret-down"})]),e._v("\n            New items: "),n("span",[e._v(e._s(e.stats.items.added.count))])]),e._v(" "),e.addedItemsCollapsed?e._e():n("div",{staticClass:"patch-items-container"},e._l(e.stats.items.added.items,(function(t){return n("div",[n("div",[n("i",{staticClass:"fas fa-cube"}),e._v(" "+e._s(t.name)+" ")])])})),0)]),e._v(" "),n("div",{staticClass:"patch-deletions section"},[n("div",{staticClass:"patch-label clickable",on:{click:function(t){e.deletedItemsCollapsed=!e.deletedItemsCollapsed}}},[n("span",{staticClass:"patch-expander"},[e.deletedItemsCollapsed?n("i",{staticClass:"fas fa-caret-right"}):n("i",{staticClass:"fas fa-caret-down"})]),e._v("\n            Deleted items: "),n("span",[e._v(e._s(e.stats.items.deleted.count))])]),e._v(" "),e.deletedItemsCollapsed?e._e():n("div",{staticClass:"patch-items-container"},e._l(e.stats.items.deleted.items,(function(t){return n("div",[n("div",[n("i",{staticClass:"fas fa-cube"}),e._v(" "+e._s(t.name)+" ")])])})),0)]),e._v(" "),n("div",{staticClass:"patch-modifications section"},[n("div",{staticClass:"patch-label clickable",on:{click:function(t){e.modifiedItemsCollapsed=!e.modifiedItemsCollapsed}}},[n("span",{staticClass:"patch-expander"},[e.modifiedItemsCollapsed?n("i",{staticClass:"fas fa-caret-right"}):n("i",{staticClass:"fas fa-caret-down"})]),e._v("\n            Modified items: "),n("span",[e._v(e._s(e.stats.items.modified.items.length))])]),e._v(" "),e.modifiedItemsCollapsed?e._e():n("div",{staticClass:"patch-items-container"},e._l(e.stats.items.modified.items,(function(t){return n("div",[n("div",[n("div",{staticClass:"clickable",on:{click:function(e){t.collapsed=!t.collapsed}}},[n("span",{staticClass:"patch-expander"},[t.collapsed?n("i",{staticClass:"fas fa-caret-right"}):n("i",{staticClass:"fas fa-caret-down"})]),e._v(" "),n("i",{staticClass:"fas fa-cube"}),e._v(" "+e._s(t.name)+" "),n("span",[e._v(e._s(t.fields.length))])]),e._v(" "),t.collapsed?e._e():n("div",[n("ul",{staticClass:"patch-field-list"},e._l(t.fields,(function(t){return n("li",[n("i",{staticClass:"fas fa-cog"}),e._v(" "+e._s(t))])})),0)])])])})),0)])])}),[],!1,null,null,null).exports,cg={components:{Debugger:lh,SystemMessagePanel:hh,SchemeEditor:Vf,ColorPicker:$d,Modal:Xe,PatchDetails:lg},props:{scheme:{type:Object,default:()=>null},editAllowed:{type:Boolean,default:!1},isStaticEditor:{type:Boolean,default:!1},isOfflineEditor:{type:Boolean,default:!1},userStylesEnabled:{type:Boolean,default:!1},projectArtEnabled:{type:Boolean,default:!0},menuOptions:{type:Array,default:()=>[]},comments:{type:Object,default:()=>null}},mounted(){(0,sh.$D)((()=>{this.debuggerShown=!0}))},data:()=>({debuggerShown:!1,patch:{index:null,patch:null,patchedScheme:null,isToggled:!1,stats:null,originSchemeContainer:null,modifiedSchemeContainer:null,detailsModalShown:!1}}),methods:{onNewSchemeSubmitted(e,t,n){this.$emit("new-scheme-submitted",e,t,n)},onPreviewPatchRequested(e){this.scheme&&e&&(this.patch.patch=e,this.patch.stats=ng(e),this.patch.index=function(e){const t={addedItems:new Set,deletedItems:new Set,modifiedItems:new Set,modifiedFields:new Set};return ze()(e.items.added.items,(e=>t.addedItems.add(e))),ze()(e.items.deleted.items,(e=>t.deletedItems.add(e))),ze()(e.document.fields,(e=>t.modifiedFields.add(e))),ze()(e.items.modified.items,(e=>{t.modifiedItems.add(e.id),ze()(e.fields,(n=>{t.modifiedFields.add(`items.${e.id}.${n}`)}))})),t}(this.patch.stats),this.patch.patchedScheme=function(e,t){return function(e,t,n){const i=Uc.Z.clone(e);return ze()(t.changes,(e=>{eg(i,e,[],n)})),i}(e,t,function(e){const t=new Gf;return t.indexFieldEntries(e),t}(qf))}(this.scheme,e),this.patch.isToggled=!0,this.patch.originSchemeContainer=new Kl.ZP(this.scheme),this.patch.modifiedSchemeContainer=new Kl.ZP(this.patch.patchedScheme),this.$forceUpdate())},updatePatchDiffColoring(e){this.$store.dispatch("setPatchDiffColoringEnabled",e)},updatePatchDiffColor(e,t){this.$store.dispatch("updatePatchDiffColor",{changeType:e,color:t})},cancelPatch(){this.patch.isToggled=!1,this.patch.patch=null,this.patch.patchedScheme=null,this.patch.stats=null,this.patch.index=null,this.patch.originSchemeContainer=null,this.patch.modifiedSchemeContainer=null},applyPatch(){this.$emit("patch-applied",this.patch.patchedScheme),this.cancelPatch()}},computed:{patchIsDiffColoringEnabled(){return this.$store.getters.patchIsDiffColoringEnabled},patchAdditionsColor(){return this.$store.getters.patchAdditionsColor},patchDeletionsColor(){return this.$store.getters.patchDeletionsColor},patchModificationsColor(){return this.$store.getters.patchModificationsColor}}},hg=cg,dg={props:["scheme","originScheme"],components:{Modal:Xe,SchemeSearchModal:kd,PatchDetails:lg},data(){return{schemeSearchModalShown:!1,patch:null,isLoading:!1,errorMessage:null,originSchemeContainer:null,modifiedSchemeContainer:new Kl.ZP(this.scheme)}},beforeMount(){this.originScheme&&(this.originSchemeContainer=new Kl.ZP(this.originScheme),this.patch=Xf(this.originSchemeContainer.scheme,this.scheme))},methods:{onDownloadPatch(){this.patch&&Kp("patch.json","application/json",JSON.stringify(this.patch))},onBaseSelected(e){this.schemeSearchModalShown=!1,this.loadBaseScheme(e.id)},loadBaseScheme(e){this.isLoading=!0,this.errorMessage=null,this.$store.state.apiClient.getScheme(e).then((e=>{this.isLoading=!1,this.originSchemeContainer=new Kl.ZP(e.scheme),this.patch=Xf(this.originSchemeContainer.scheme,this.scheme)})).catch((e=>{console.error(e),this.errorMessage="Something went wrong, failed to load base diagram"}))}},computed:{primaryButtonDisabled(){return null===this.patch}}},ug={components:{SchemioEditorApp:(0,Le.Z)(hg,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scheme-editor-app"},[e.patch.patchedScheme&&e.patch.isToggled?n("SchemeEditor",{key:"patched-scheme",attrs:{scheme:e.patch.patchedScheme,patchIndex:e.patch.index,editAllowed:e.editAllowed,isStaticEditor:e.isStaticEditor,isOfflineEditor:e.isOfflineEditor,userStylesEnabled:e.userStylesEnabled,projectArtEnabled:e.projectArtEnabled,menuOptions:e.menuOptions,comments:e.comments},on:{"new-scheme-submitted":e.onNewSchemeSubmitted,"preview-patch-requested":e.onPreviewPatchRequested}}):n("SchemeEditor",{key:"origin-scheme",attrs:{scheme:e.scheme,editAllowed:e.editAllowed,isStaticEditor:e.isStaticEditor,isOfflineEditor:e.isOfflineEditor,patchIndex:e.patch.index,userStylesEnabled:e.userStylesEnabled,projectArtEnabled:e.projectArtEnabled,menuOptions:e.menuOptions,comments:e.comments},on:{"new-scheme-submitted":e.onNewSchemeSubmitted,"preview-patch-requested":e.onPreviewPatchRequested}}),e._v(" "),e.debuggerShown?n("Debugger",{on:{close:function(t){e.debuggerShown=!1}}}):e._e(),e._v(" "),e.scheme&&e.patch.patchedScheme?n("div",{staticClass:"patch-menu-wrapper"},[n("div",{staticClass:"patch-menu-popup"},[n("div",{staticClass:"toggle-group"},[n("span",{staticClass:"toggle-button",class:[e.patch.isToggled?"":"toggled"],on:{click:function(t){e.patch.isToggled=!1}}},[e._v("Origin")]),e._v(" "),n("span",{staticClass:"toggle-button",class:[e.patch.isToggled?"toggled":""],on:{click:function(t){e.patch.isToggled=!0}}},[e._v("Modified")])]),e._v(" "),n("input",{attrs:{type:"checkbox",id:"chk-patch-menu-toggle-diff-coloring"},domProps:{checked:e.patchIsDiffColoringEnabled},on:{input:function(t){return e.updatePatchDiffColoring(arguments[0].target.checked)}}}),e._v(" "),n("label",{attrs:{for:"chk-patch-menu-toggle-diff-coloring"}},[e._v("Highlight diff")]),e._v(" "),n("color-picker",{attrs:{color:e.patchAdditionsColor,width:"26px",hint:"Additions"},on:{input:function(t){return e.updatePatchDiffColor("additions",arguments[0])}}}),e._v(" "),n("color-picker",{attrs:{color:e.patchDeletionsColor,width:"26px",hint:"Deletions"},on:{input:function(t){return e.updatePatchDiffColor("deletions",arguments[0])}}}),e._v(" "),n("color-picker",{attrs:{color:e.patchModificationsColor,width:"26px",hint:"Modifications"},on:{input:function(t){return e.updatePatchDiffColor("modifications",arguments[0])}}}),e._v(" "),n("span",{staticClass:"btn btn-secondary",on:{click:function(t){e.patch.detailsModalShown=!0}}},[e._v("Show Changes")]),e._v(" "),n("span",{staticClass:"btn btn-primary",on:{click:e.applyPatch}},[e._v("Apply")]),e._v(" "),n("span",{staticClass:"btn btn-danger",on:{click:e.cancelPatch}},[e._v("Cancel")])],1)]):e._e(),e._v(" "),e.patch.detailsModalShown?n("Modal",{attrs:{title:"Patch details",width:900},on:{close:function(t){e.patch.detailsModalShown=!1}}},[n("PatchDetails",{attrs:{originSchemeContainer:e.patch.originSchemeContainer,modifiedSchemeContainer:e.patch.modifiedSchemeContainer,patch:e.patch.patch}})],1):e._e(),e._v(" "),n("SystemMessagePanel")],1)}),[],!1,null,null,null).exports,CreatePatchModal:(0,Le.Z)(dg,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{title:"Create patch",primaryButton:"Download",primaryButtonDisabled:e.primaryButtonDisabled},on:{close:function(t){return e.$emit("close")},"primary-submit":e.onDownloadPatch}},[e.originScheme?e._e():n("span",{staticClass:"btn btn-primary",on:{click:function(t){e.schemeSearchModalShown=!0}}},[e._v("Choose base diagram")]),e._v(" "),e.isLoading?n("div",{staticClass:"loader"},[n("div",{staticClass:"loader-element"})]):n("div",[e.patch&&e.originSchemeContainer?n("div",[n("patch-details",{attrs:{originSchemeContainer:e.originSchemeContainer,modifiedSchemeContainer:e.modifiedSchemeContainer,patch:e.patch}})],1):e.errorMessage?n("div",{staticClass:"msg msg-error"},[e._v("\n            "+e._s(e.errorMessage)+"\n        ")]):n("div",{staticClass:"hint"},[e._v("\n            Select a base diagram for which you want to generate a patch\n        ")])]),e._v(" "),e.schemeSearchModalShown?n("scheme-search-modal",{on:{close:function(t){e.schemeSearchModalShown=!1},"selected-scheme":e.onBaseSelected}}):e._e()],1)}),[],!1,null,null,null).exports},props:{apiClientType:{type:String,default:"fs"},editAllowed:{type:Boolean,default:!0},userStylesEnabled:{type:Boolean,default:!0},projectArtEnabled:{type:Boolean,default:!0}},beforeMount(){_h.Z.$on(_h.Z.SCHEME_PATCH_REQUESTED,this.onSchemePatchRequested),this.isLoading=!0,"static"===this.apiClientType&&(this.isStaticEditor=!0);let e=Ge(this.apiClientType).then((e=>(this.$store.dispatch("setApiClient",e),this.apiClient=e,e)));e="offline"===this.apiClientType?e.then((e=>{this.loadSchemeFromLink(),this.isLoading=!1})):e.then((e=>e.getScheme(this.schemeId))).then((e=>{this.isLoading=!1,this.path=e.folderPath,this.buildBreadcrumbs(e.folderPath),this.scheme=e.scheme,this.originScheme=Uc.Z.clone(e.scheme),e.viewOnly&&(this.shouldAllowEdit=!1)})),e.catch((e=>{this.isLoading=!1,e.response&&404===e.response.status?this.is404=!0:(console.error(e),this.errorMessage="Oops, something went wrong")}))},beforeDestroy(){_h.Z.$off(_h.Z.SCHEME_PATCH_REQUESTED,this.onSchemePatchRequested)},data(){return{schemeId:this.$route.params.schemeId,path:"",breadcrumbs:[],shouldAllowEdit:this.editAllowed,isStaticEditor:!1,scheme:null,apiClient:null,is404:!1,errorMessage:null,isLoading:!1,originScheme:null,modifiedScheme:null,createPatchModalShown:!1,originKeyReloadHash:ec().generate()}},methods:{buildBreadcrumbs(e){const t=e.split("/"),n=[];let i="";ze()(t,(e=>{""!==e&&(i=""===i?e:`${i}/${e}`,n.push({kind:"dir",name:e,path:i}))})),n.length>2&&(n.splice(1,n.length-2),n.splice(1,0,{kind:"ellipsis"})),this.breadcrumbs=n},onNewSchemeSubmitted(e,t,n){this.apiClient.createNewScheme(this.path,e).then((e=>{t&&(this.$router&&"history"===this.$router.mode?t(e,`/docs/${e.id}#m=edit`):t(e,`#/docs/${e.id}?m=edit`))})).catch((e=>{console.error("Failed to create new diagram",e),Jl.addErrorSystemMessage(this.$store,"Failed to create new diagram"),n&&n()}))},onSchemePatchRequested(e){this.modifiedScheme=e,this.createPatchModalShown=!0},onPatchApplied(e){this.scheme=e,this.originKeyReloadHash=ec().generate()},loadSchemeFromLink(){const e=this.$router?this.$router.mode:"history",t={".":"+",_:"/","-":"="},n=Rp(e).decodeURLHash(window.location.hash);if(n.doc){const e=n.doc.replace(/[\._\-]/g,(e=>t[e]));qp().loadAsync(e,{base64:!0}).then((e=>{if(e.files["doc.json"])return e.files["doc.json"].async("text");throw new Error("Missing doc.json file")})).then((e=>{this.scheme=JSON.parse(e)})).catch((e=>{console.log(e),Jl.addErrorSystemMessage(this.$store,"Failed to load document from URL","link-loader")}))}}},computed:{originSchemeForPatch(){return"static"===this.apiClientType?this.originScheme:null}}},pg=(0,Le.Z)(ug,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[n("schemio-header",[n("div",{attrs:{slot:"middle-section"},slot:"middle-section"},[n("ul",{staticClass:"header-breadcrumbs"},e._l(e.breadcrumbs,(function(t,i){return n("li",["dir"===t.kind?n("router-link",{attrs:{to:"/f/"+t.path}},[n("i",{staticClass:"fas fa-folder"}),e._v("\n                        "+e._s(t.name)+"\n                    ")]):e._e(),e._v(" "),"ellipsis"===t.kind?n("span",[e._v("...")]):e._e(),e._v(" "),i<e.breadcrumbs.length-1?n("i",{staticClass:"fas fa-caret-right breadcrumb-separator"}):e._e()],1)})),0),e._v(" "),e.scheme?n("div",{staticClass:"scheme-title"},[n("img",{staticClass:"icon",attrs:{src:"/assets/images/schemio-logo-white.small.png",height:"20"}}),e._v(" "),n("span",[e._v(e._s(e.scheme.name))])]):e._e()]),e._v(" "),n("div",{attrs:{slot:"loader"},slot:"loader"},[e.isLoading?n("div",{staticClass:"loader"},[n("div",{staticClass:"loader-element"})]):e._e()])]),e._v(" "),e.is404?n("div",{staticClass:"middle-content"},[n("h4",[e._v("Sorry, requested document was not found")])]):e.errorMessage?n("div",{staticClass:"middle-content"},[e.errorMessage?n("div",{staticClass:"msg msg-error"},[e._v(e._s(e.errorMessage))]):e._e()]):"offline"===e.apiClientType?n("SchemioEditorApp",{key:e.scheme?"offline-scheme":"offline-scheme-empty",attrs:{scheme:e.scheme,editAllowed:!0,isStaticEditor:!1,isOfflineEditor:!0,userStylesEnabled:!1,projectArtEnabled:!1}}):e.scheme?n("SchemioEditorApp",{key:"scheme-"+e.originKeyReloadHash,attrs:{scheme:e.scheme,editAllowed:e.shouldAllowEdit,isStaticEditor:e.isStaticEditor,userStylesEnabled:e.userStylesEnabled,projectArtEnabled:e.projectArtEnabled},on:{"new-scheme-submitted":e.onNewSchemeSubmitted,"patch-applied":e.onPatchApplied}}):e._e(),e._v(" "),e.createPatchModalShown?n("CreatePatchModal",{attrs:{originScheme:e.originSchemeForPatch,scheme:e.modifiedScheme},on:{close:function(t){e.createPatchModalShown=!1}}}):e._e()],1)}),[],!1,null,null,null).exports,mg=(0,Le.Z)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("schemio-header"),e._v(" "),e._m(0)],1)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"middle-content"},[n("h3",[e._v("Sorry, the page you have requested was not found")])])}],!1,null,null,null).exports;function fg(e){return e>=0&&e<10?"0"+e:""+e}const gg={components:{Modal:Xe},beforeMount(){this.updateExportStatus()},data:()=>({errorMessage:null,exportStatus:null,intervalId:null}),methods:{submitExport(){this.$store.state.apiClient.submitStaticExport().then((e=>{this.exportStatus.status="running",this.intervalId||(this.intervalId=setInterval((()=>{this.updateExportStatus()}),1e3))})).catch((e=>{console.error(e),this.errorMessage="Something went wrong with exporting your diagrams"}))},updateExportStatus(){this.$store.state.apiClient.getStaticExportStatus().then((e=>{this.intervalId&&"running"!==e.status&&(clearInterval(this.intervalId),this.intervalId=null),this.exportStatus=e})).catch((e=>{console.error(e)}))}}},vg={components:{StaticExportModal:(0,Le.Z)(gg,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{title:"Export all diagrams"},on:{close:function(t){return e.$emit("close")}}},[e._v("\n    You can export all your documents into a single archive. You can use it to host all your diagrams in a read-only mode.\n\n    "),e.exportStatus?n("div",["running"===e.exportStatus.status?n("div",[n("div",{staticClass:"progress-bar progress-bar-default"})]):n("p",{staticStyle:{"text-align":"center"}},[n("span",{staticClass:"btn btn-primary",on:{click:e.submitExport}},[e._v("Export all diagrams")])]),e._v(" "),"finished"===e.exportStatus.status?n("div",[e._v("\n            Done, you can download all your exported documents using this "),n("a",{staticClass:"link",attrs:{href:"/v1/static-export/download/"+e.exportStatus.archiveVersion}},[e._v("link")])]):e._e()]):e._e()])}),[],!1,null,null,null).exports},data:()=>({staticExportModalShown:!1}),computed:{staticExportAllowed(){return this.$store.getters.staticExportAllowed}}},yg=(0,Le.Z)(vg,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header"},[n("div",{staticClass:"header-body"},[e._m(0),e._v(" "),n("div",{staticClass:"header-middle-section"},[e._t("middle-section")],2),e._v(" "),e.staticExportAllowed?n("div",{staticClass:"right-section"},[n("div",{staticClass:"current-user"},[e._m(1),e._v(" "),n("ul",{staticClass:"user-profile-menu"},[e.staticExportAllowed?n("li",[n("span",{staticClass:"link",on:{click:function(t){e.staticExportModalShown=!0}}},[e._v("Export all diagrams")])]):e._e()])])]):e._e()]),e._v(" "),n("div",{staticClass:"header-loader-container"},[e._t("loader")],2),e._v(" "),e.staticExportModalShown?n("StaticExportModal",{on:{close:function(t){e.staticExportModalShown=!1}}}):e._e()],1)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{staticClass:"header-caption",attrs:{href:"/"}},[n("img",{attrs:{src:"/assets/images/schemio-logo-white.small.png",height:"25"}}),e._v(" "),n("span",[e._v("Schemio")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-profile"},[n("span",{staticClass:"user-name"},[e._v("Admin")])])}],!1,null,null,null).exports,xg=(0,Le.Z)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"footer"},[n("div",{staticClass:"footer-body"},[n("ul",[n("li",[n("router-link",{attrs:{to:"/about"}},[e._v("About")])],1),e._v(" "),e._m(0)])])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("a",{attrs:{href:"https://github.com/ishubin/schemio"}},[e._v("Project on GitHub")])])}],!1,null,null,null).exports;window.createSchemioStaticApp=function(e){let n=!1;function i(e,t,n,i){return{name:e,path:t,component:n,props:i}}e&&e.hasOwnProperty("editAllowed")&&(n=e.editAllowed),t().use(De),t().filter("formatDateTime",(e=>{const t=new Date(e),n=fg;return`${t.getFullYear()}.${n(t.getMonth()+1)}.${n(t.getDate())} ${n(t.getHours())}:${n(t.getMinutes())}`})),t().component("schemio-header",yg),t().component("schemio-footer",xg);const r=[i("SchemeEditorView","/docs/:schemeId",pg,{apiClientType:"static",editAllowed:n}),i("OfflineSchemeEditorView","/offline-editor",pg,{apiClientType:"offline",userStylesEnabled:!1,projectArtEnabled:!1}),i("AboutView","/about",dc),i("NotFoundView","/not-found",mg),i("HomeView","/",hc,{apiClientType:"static"}),i("FolderView","/f/*",hc,{apiClientType:"static",toolbarShown:!1}),{path:"*",redirect:"/not-found"}],s=new De({routes:r});new(t())(t().util.extend({router:s,store:rh},Ne)).$mount("#app")}})()})();